(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["sf-pdfviewer2"],{

/***/ "./bundles/sf-pdfviewer2.js":
/*!**********************************!*\
  !*** ./bundles/sf-pdfviewer2.js ***!
  \**********************************/
/*! no exports provided */
/*! all exports used */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _modules_sf_pdfviewer2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../modules/sf-pdfviewer2.js */ "./modules/sf-pdfviewer2.js");
/* harmony import */ var _modules_sf_pdfviewer2_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_pdfviewer2_js__WEBPACK_IMPORTED_MODULE_0__);


/***/ }),

/***/ "./modules/sf-pdfviewer2.js":
/*!**********************************!*\
  !*** ./modules/sf-pdfviewer2.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}window.sfBlazor=window.sfBlazor||{};window.sfBlazor.SfPdfViewer=function(){'use strict';var __extends=undefined&&undefined.__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect==="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r;};var __awaiter$1=undefined&&undefined.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value);}).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var __generator$1=undefined&&undefined.__generator||function(thisArg,body){var _={label:0,sent:function sent(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break;}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}if(t[2])_.ops.pop();_.trys.pop();continue;}op=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}};/* eslint-disable */ // eslint-disable-next-line max-len
// eslint-disable-next-line max-len
// eslint-disable-next-line max-len
/**
 * The `ToolbarSettings` module is used to provide the toolbar settings of PDF viewer.
 */var ToolbarSettings=/** @class */function(_super){__extends(ToolbarSettings,_super);function ToolbarSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(true)],ToolbarSettings.prototype,"showTooltip",void 0);__decorate([sf.base.Property()],ToolbarSettings.prototype,"toolbarItems",void 0);__decorate([sf.base.Property()],ToolbarSettings.prototype,"annotationToolbarItems",void 0);__decorate([sf.base.Property()],ToolbarSettings.prototype,"formDesignerToolbarItems",void 0);return ToolbarSettings;}(sf.base.ChildProperty);/**
 * The `AjaxRequestSettings` module is used to set the ajax Request Headers of PDF viewer.
 */var AjaxRequestSettings=/** @class */function(_super){__extends(AjaxRequestSettings,_super);function AjaxRequestSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property()],AjaxRequestSettings.prototype,"ajaxHeaders",void 0);__decorate([sf.base.Property(false)],AjaxRequestSettings.prototype,"withCredentials",void 0);return AjaxRequestSettings;}(sf.base.ChildProperty);/**
 * The `CustomStamp` module is used to provide the custom stamp added in stamp menu of the PDF Viewer toolbar.
 */var CustomStamp=/** @class */function(_super){__extends(CustomStamp,_super);function CustomStamp(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('')],CustomStamp.prototype,"customStampName",void 0);__decorate([sf.base.Property('')],CustomStamp.prototype,"customStampImageSource",void 0);return CustomStamp;}(sf.base.ChildProperty);/**
 * The `AnnotationToolbarSettings` module is used to provide the annotation toolbar settings of the PDF viewer.
 */var AnnotationToolbarSettings=/** @class */function(_super){__extends(AnnotationToolbarSettings,_super);function AnnotationToolbarSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(true)],AnnotationToolbarSettings.prototype,"showTooltip",void 0);__decorate([sf.base.Property()],AnnotationToolbarSettings.prototype,"annotationToolbarItem",void 0);return AnnotationToolbarSettings;}(sf.base.ChildProperty);/**
 * The `FormDesignerToolbarSettings` module is used to provide the Form designer toolbar settings of the PDF viewer.
 */var FormDesignerToolbarSettings=/** @class */function(_super){__extends(FormDesignerToolbarSettings,_super);function FormDesignerToolbarSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(true)],FormDesignerToolbarSettings.prototype,"showTooltip",void 0);__decorate([sf.base.Property()],FormDesignerToolbarSettings.prototype,"formDesignerToolbarItem",void 0);return FormDesignerToolbarSettings;}(sf.base.ChildProperty);/**
 * The `SignatureFieldSettings` module is used to set the properties of signature field in PDF Viewer
 */var SignatureFieldSettings=/** @class */function(_super){__extends(SignatureFieldSettings,_super);function SignatureFieldSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],SignatureFieldSettings.prototype,"bounds",void 0);__decorate([sf.base.Property('')],SignatureFieldSettings.prototype,"name",void 0);__decorate([sf.base.Property(false)],SignatureFieldSettings.prototype,"isReadOnly",void 0);__decorate([sf.base.Property('visible')],SignatureFieldSettings.prototype,"visibility",void 0);__decorate([sf.base.Property(false)],SignatureFieldSettings.prototype,"isRequired",void 0);__decorate([sf.base.Property(false)],SignatureFieldSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property('')],SignatureFieldSettings.prototype,"tooltip",void 0);__decorate([sf.base.Property(0)],SignatureFieldSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property()],SignatureFieldSettings.prototype,"signatureDialogSettings",void 0);__decorate([sf.base.Property()],SignatureFieldSettings.prototype,"signatureIndicatorSettings",void 0);return SignatureFieldSettings;}(sf.base.ChildProperty);/**
 * The `InitialFieldSettings` module is used to set the properties of initial field in PDF Viewer
 */var InitialFieldSettings=/** @class */function(_super){__extends(InitialFieldSettings,_super);function InitialFieldSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],InitialFieldSettings.prototype,"bounds",void 0);__decorate([sf.base.Property('')],InitialFieldSettings.prototype,"name",void 0);__decorate([sf.base.Property(false)],InitialFieldSettings.prototype,"isReadOnly",void 0);__decorate([sf.base.Property('visible')],InitialFieldSettings.prototype,"visibility",void 0);__decorate([sf.base.Property(false)],InitialFieldSettings.prototype,"isRequired",void 0);__decorate([sf.base.Property(false)],InitialFieldSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property('')],InitialFieldSettings.prototype,"tooltip",void 0);__decorate([sf.base.Property(0)],InitialFieldSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(false)],InitialFieldSettings.prototype,"isInitialField",void 0);__decorate([sf.base.Property()],InitialFieldSettings.prototype,"initialDialogSettings",void 0);__decorate([sf.base.Property()],InitialFieldSettings.prototype,"initialIndicatorSettings",void 0);return InitialFieldSettings;}(sf.base.ChildProperty);/**
 * The `SignatureIndicatorSettings` module is used to provide the properties of signature Indicator in the signature field
 */var SignatureIndicatorSettings=/** @class */function(_super){__extends(SignatureIndicatorSettings,_super);function SignatureIndicatorSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(1)],SignatureIndicatorSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('orange')],SignatureIndicatorSettings.prototype,"backgroundColor",void 0);__decorate([sf.base.Property(19)],SignatureIndicatorSettings.prototype,"width",void 0);__decorate([sf.base.Property(10)],SignatureIndicatorSettings.prototype,"height",void 0);__decorate([sf.base.Property(10)],SignatureIndicatorSettings.prototype,"fontSize",void 0);__decorate([sf.base.Property(null)],SignatureIndicatorSettings.prototype,"text",void 0);__decorate([sf.base.Property('black')],SignatureIndicatorSettings.prototype,"color",void 0);return SignatureIndicatorSettings;}(sf.base.ChildProperty);/**
 * The `SignatureDialogSettings` module is used to customize the signature dialog box.
 */var SignatureDialogSettings=/** @class */function(_super){__extends(SignatureDialogSettings,_super);function SignatureDialogSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('Draw')],SignatureDialogSettings.prototype,"displayMode",void 0);__decorate([sf.base.Property(false)],SignatureDialogSettings.prototype,"hideSaveSignature",void 0);return SignatureDialogSettings;}(sf.base.ChildProperty);/**
 * The `ServerActionSettings` module is used to provide the server action methods of PDF viewer.
 */var ServerActionSettings=/** @class */function(_super){__extends(ServerActionSettings,_super);function ServerActionSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('Load')],ServerActionSettings.prototype,"load",void 0);__decorate([sf.base.Property('Unload')],ServerActionSettings.prototype,"unload",void 0);__decorate([sf.base.Property('RenderPdfPages')],ServerActionSettings.prototype,"renderPages",void 0);__decorate([sf.base.Property('RenderPdfPages')],ServerActionSettings.prototype,"print",void 0);__decorate([sf.base.Property('Download')],ServerActionSettings.prototype,"download",void 0);__decorate([sf.base.Property('RenderThumbnailImages')],ServerActionSettings.prototype,"renderThumbnail",void 0);__decorate([sf.base.Property('RenderAnnotationComments')],ServerActionSettings.prototype,"renderComments",void 0);__decorate([sf.base.Property('ImportAnnotations')],ServerActionSettings.prototype,"importAnnotations",void 0);__decorate([sf.base.Property('ExportAnnotations')],ServerActionSettings.prototype,"exportAnnotations",void 0);__decorate([sf.base.Property('ImportFormFields')],ServerActionSettings.prototype,"importFormFields",void 0);__decorate([sf.base.Property('ExportFormFields')],ServerActionSettings.prototype,"exportFormFields",void 0);__decorate([sf.base.Property('RenderPdfTexts')],ServerActionSettings.prototype,"renderTexts",void 0);return ServerActionSettings;}(sf.base.ChildProperty);/**
 * The `StrikethroughSettings` module is used to provide the properties to Strikethrough annotation.
 */var StrikethroughSettings=/** @class */function(_super){__extends(StrikethroughSettings,_super);function StrikethroughSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(1)],StrikethroughSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],StrikethroughSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ff0000')],StrikethroughSettings.prototype,"color",void 0);__decorate([sf.base.Property('Guest')],StrikethroughSettings.prototype,"author",void 0);__decorate([sf.base.Property('')],StrikethroughSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(null)],StrikethroughSettings.prototype,"customData",void 0);__decorate([sf.base.Property(false)],StrikethroughSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(false)],StrikethroughSettings.prototype,"enableMultiPageAnnotation",void 0);__decorate([sf.base.Property(false)],StrikethroughSettings.prototype,"enableTextMarkupResizer",void 0);__decorate([sf.base.Property(['None'])],StrikethroughSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],StrikethroughSettings.prototype,"isPrint",void 0);return StrikethroughSettings;}(sf.base.ChildProperty);/**
 * The `UnderlineSettings` module is used to provide the properties to Underline annotation.
 */var UnderlineSettings=/** @class */function(_super){__extends(UnderlineSettings,_super);function UnderlineSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(1)],UnderlineSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],UnderlineSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#00ff00')],UnderlineSettings.prototype,"color",void 0);__decorate([sf.base.Property('Guest')],UnderlineSettings.prototype,"author",void 0);__decorate([sf.base.Property('')],UnderlineSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(null)],UnderlineSettings.prototype,"customData",void 0);__decorate([sf.base.Property(false)],UnderlineSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(false)],UnderlineSettings.prototype,"enableMultiPageAnnotation",void 0);__decorate([sf.base.Property(false)],UnderlineSettings.prototype,"enableTextMarkupResizer",void 0);__decorate([sf.base.Property(['None'])],UnderlineSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],UnderlineSettings.prototype,"isPrint",void 0);return UnderlineSettings;}(sf.base.ChildProperty);/**
 * The `HighlightSettings` module is used to provide the properties to Highlight annotation.
 */var HighlightSettings=/** @class */function(_super){__extends(HighlightSettings,_super);function HighlightSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(1)],HighlightSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],HighlightSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffff00')],HighlightSettings.prototype,"color",void 0);__decorate([sf.base.Property('Guest')],HighlightSettings.prototype,"author",void 0);__decorate([sf.base.Property('')],HighlightSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(null)],HighlightSettings.prototype,"customData",void 0);__decorate([sf.base.Property(false)],HighlightSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(false)],HighlightSettings.prototype,"enableMultiPageAnnotation",void 0);__decorate([sf.base.Property(false)],HighlightSettings.prototype,"enableTextMarkupResizer",void 0);__decorate([sf.base.Property(['None'])],HighlightSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],HighlightSettings.prototype,"isPrint",void 0);return HighlightSettings;}(sf.base.ChildProperty);/**
 * The `LineSettings` module is used to provide the properties to line annotation.
 */var LineSettings=/** @class */function(_super){__extends(LineSettings,_super);function LineSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],LineSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],LineSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],LineSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],LineSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],LineSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],LineSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],LineSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('None')],LineSettings.prototype,"lineHeadStartStyle",void 0);__decorate([sf.base.Property('None')],LineSettings.prototype,"lineHeadEndStyle",void 0);__decorate([sf.base.Property(0)],LineSettings.prototype,"borderDashArray",void 0);__decorate([sf.base.Property('')],LineSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],LineSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],LineSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],LineSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],LineSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],LineSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],LineSettings.prototype,"customData",void 0);__decorate([sf.base.Property(['None'])],LineSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],LineSettings.prototype,"isPrint",void 0);return LineSettings;}(sf.base.ChildProperty);/**
 * The `ArrowSettings` module is used to provide the properties to arrow annotation.
 */var ArrowSettings=/** @class */function(_super){__extends(ArrowSettings,_super);function ArrowSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],ArrowSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],ArrowSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],ArrowSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],ArrowSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],ArrowSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],ArrowSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],ArrowSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('None')],ArrowSettings.prototype,"lineHeadStartStyle",void 0);__decorate([sf.base.Property('None')],ArrowSettings.prototype,"lineHeadEndStyle",void 0);__decorate([sf.base.Property(0)],ArrowSettings.prototype,"borderDashArray",void 0);__decorate([sf.base.Property('')],ArrowSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],ArrowSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],ArrowSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],ArrowSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],ArrowSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],ArrowSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],ArrowSettings.prototype,"customData",void 0);__decorate([sf.base.Property(['None'])],ArrowSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],ArrowSettings.prototype,"isPrint",void 0);return ArrowSettings;}(sf.base.ChildProperty);/**
 * The `RectangleSettings` module is used to provide the properties to rectangle annotation.
 */var RectangleSettings=/** @class */function(_super){__extends(RectangleSettings,_super);function RectangleSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],RectangleSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],RectangleSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(100)],RectangleSettings.prototype,"width",void 0);__decorate([sf.base.Property(50)],RectangleSettings.prototype,"height",void 0);__decorate([sf.base.Property(1)],RectangleSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],RectangleSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],RectangleSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],RectangleSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],RectangleSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('')],RectangleSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],RectangleSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],RectangleSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],RectangleSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],RectangleSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],RectangleSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],RectangleSettings.prototype,"customData",void 0);__decorate([sf.base.Property(['None'])],RectangleSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],RectangleSettings.prototype,"isPrint",void 0);return RectangleSettings;}(sf.base.ChildProperty);/**
 * The `CircleSettings` module is used to provide the properties to circle annotation.
 */var CircleSettings=/** @class */function(_super){__extends(CircleSettings,_super);function CircleSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],CircleSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],CircleSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(100)],CircleSettings.prototype,"width",void 0);__decorate([sf.base.Property(100)],CircleSettings.prototype,"height",void 0);__decorate([sf.base.Property(1)],CircleSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],CircleSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],CircleSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],CircleSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],CircleSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('')],CircleSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],CircleSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],CircleSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],CircleSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],CircleSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],CircleSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],CircleSettings.prototype,"customData",void 0);__decorate([sf.base.Property(['None'])],CircleSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],CircleSettings.prototype,"isPrint",void 0);return CircleSettings;}(sf.base.ChildProperty);/**
 * The `ShapeLabelSettings` module is used to provide the properties to rectangle annotation.
 */var ShapeLabelSettings=/** @class */function(_super){__extends(ShapeLabelSettings,_super);function ShapeLabelSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(1)],ShapeLabelSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],ShapeLabelSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#000')],ShapeLabelSettings.prototype,"fontColor",void 0);__decorate([sf.base.Property(16)],ShapeLabelSettings.prototype,"fontSize",void 0);__decorate([sf.base.Property('Helvetica')],ShapeLabelSettings.prototype,"fontFamily",void 0);__decorate([sf.base.Property('Label')],ShapeLabelSettings.prototype,"labelContent",void 0);__decorate([sf.base.Property('')],ShapeLabelSettings.prototype,"notes",void 0);return ShapeLabelSettings;}(sf.base.ChildProperty);/**
 * The `PolygonSettings` module is used to provide the properties to polygon annotation.
 */var PolygonSettings=/** @class */function(_super){__extends(PolygonSettings,_super);function PolygonSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],PolygonSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],PolygonSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],PolygonSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],PolygonSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],PolygonSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],PolygonSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],PolygonSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('')],PolygonSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],PolygonSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],PolygonSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],PolygonSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],PolygonSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],PolygonSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],PolygonSettings.prototype,"customData",void 0);__decorate([sf.base.Property(['None'])],PolygonSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],PolygonSettings.prototype,"isPrint",void 0);return PolygonSettings;}(sf.base.ChildProperty);/**
 * The `stampSettings` module is used to provide the properties to stamp annotation.
 */var StampSettings=/** @class */function(_super){__extends(StampSettings,_super);function StampSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],StampSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],StampSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(150)],StampSettings.prototype,"width",void 0);__decorate([sf.base.Property(50)],StampSettings.prototype,"height",void 0);__decorate([sf.base.Property(1)],StampSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('Guest')],StampSettings.prototype,"author",void 0);__decorate([sf.base.Property('')],StampSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],StampSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],StampSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],StampSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],StampSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],StampSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],StampSettings.prototype,"customData",void 0);__decorate([sf.base.Property([])],StampSettings.prototype,"dynamicStamps",void 0);__decorate([sf.base.Property([])],StampSettings.prototype,"signStamps",void 0);__decorate([sf.base.Property([])],StampSettings.prototype,"standardBusinessStamps",void 0);__decorate([sf.base.Property(['None'])],StampSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],StampSettings.prototype,"isPrint",void 0);return StampSettings;}(sf.base.ChildProperty);/**
 * The `CustomStampSettings` module is used to provide the properties to customstamp annotation.
 */var CustomStampSettings=/** @class */function(_super){__extends(CustomStampSettings,_super);function CustomStampSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],CustomStampSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],CustomStampSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],CustomStampSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('Guest')],CustomStampSettings.prototype,"author",void 0);__decorate([sf.base.Property(0)],CustomStampSettings.prototype,"width",void 0);__decorate([sf.base.Property(0)],CustomStampSettings.prototype,"height",void 0);__decorate([sf.base.Property(0)],CustomStampSettings.prototype,"left",void 0);__decorate([sf.base.Property(0)],CustomStampSettings.prototype,"top",void 0);__decorate([sf.base.Property(false)],CustomStampSettings.prototype,"isAddToMenu",void 0);__decorate([sf.base.Property(0)],CustomStampSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],CustomStampSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],CustomStampSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],CustomStampSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],CustomStampSettings.prototype,"isLock",void 0);__decorate([sf.base.Property('')],CustomStampSettings.prototype,"customStamps",void 0);__decorate([sf.base.Property(true)],CustomStampSettings.prototype,"enableCustomStamp",void 0);__decorate([sf.base.Property(['None'])],CustomStampSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],CustomStampSettings.prototype,"isPrint",void 0);return CustomStampSettings;}(sf.base.ChildProperty);/**
 * The `DistanceSettings` module is used to provide the properties to distance calibrate annotation.
 */var DistanceSettings=/** @class */function(_super){__extends(DistanceSettings,_super);function DistanceSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],DistanceSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],DistanceSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],DistanceSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ff0000')],DistanceSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],DistanceSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],DistanceSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],DistanceSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('None')],DistanceSettings.prototype,"lineHeadStartStyle",void 0);__decorate([sf.base.Property('None')],DistanceSettings.prototype,"lineHeadEndStyle",void 0);__decorate([sf.base.Property(0)],DistanceSettings.prototype,"borderDashArray",void 0);__decorate([sf.base.Property('')],DistanceSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],DistanceSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],DistanceSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],DistanceSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],DistanceSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],DistanceSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],DistanceSettings.prototype,"customData",void 0);__decorate([sf.base.Property(40)],DistanceSettings.prototype,"leaderLength",void 0);__decorate([sf.base.Property('move')],DistanceSettings.prototype,"resizeCursorType",void 0);__decorate([sf.base.Property(['None'])],DistanceSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],DistanceSettings.prototype,"isPrint",void 0);return DistanceSettings;}(sf.base.ChildProperty);/**
 * The `PerimeterSettings` module is used to provide the properties to perimeter calibrate annotation.
 */var PerimeterSettings=/** @class */function(_super){__extends(PerimeterSettings,_super);function PerimeterSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],PerimeterSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],PerimeterSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],PerimeterSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],PerimeterSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],PerimeterSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],PerimeterSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],PerimeterSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('None')],PerimeterSettings.prototype,"lineHeadStartStyle",void 0);__decorate([sf.base.Property('None')],PerimeterSettings.prototype,"lineHeadEndStyle",void 0);__decorate([sf.base.Property(0)],PerimeterSettings.prototype,"borderDashArray",void 0);__decorate([sf.base.Property(0)],PerimeterSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],PerimeterSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],PerimeterSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],PerimeterSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],PerimeterSettings.prototype,"isLock",void 0);__decorate([sf.base.Property('')],PerimeterSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(['None'])],PerimeterSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],PerimeterSettings.prototype,"isPrint",void 0);return PerimeterSettings;}(sf.base.ChildProperty);/**
 * The `AreaSettings` module is used to provide the properties to area calibrate annotation.
 */var AreaSettings=/** @class */function(_super){__extends(AreaSettings,_super);function AreaSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],AreaSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],AreaSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],AreaSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],AreaSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],AreaSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],AreaSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],AreaSettings.prototype,"thickness",void 0);__decorate([sf.base.Property(0)],AreaSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],AreaSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],AreaSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],AreaSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],AreaSettings.prototype,"isLock",void 0);__decorate([sf.base.Property('')],AreaSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(['None'])],AreaSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],AreaSettings.prototype,"isPrint",void 0);return AreaSettings;}(sf.base.ChildProperty);/**
 * The `RadiusSettings` module is used to provide the properties to radius calibrate annotation.
 */var RadiusSettings=/** @class */function(_super){__extends(RadiusSettings,_super);function RadiusSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],RadiusSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],RadiusSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(100)],RadiusSettings.prototype,"width",void 0);__decorate([sf.base.Property(90)],RadiusSettings.prototype,"height",void 0);__decorate([sf.base.Property(1)],RadiusSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],RadiusSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],RadiusSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],RadiusSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],RadiusSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('')],RadiusSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],RadiusSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],RadiusSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],RadiusSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],RadiusSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],RadiusSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],RadiusSettings.prototype,"customData",void 0);__decorate([sf.base.Property(['None'])],RadiusSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],RadiusSettings.prototype,"isPrint",void 0);return RadiusSettings;}(sf.base.ChildProperty);/**
 * The `VolumeSettings` module is used to provide the properties to volume calibrate annotation.
 */var VolumeSettings=/** @class */function(_super){__extends(VolumeSettings,_super);function VolumeSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],VolumeSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],VolumeSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],VolumeSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],VolumeSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],VolumeSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],VolumeSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],VolumeSettings.prototype,"thickness",void 0);__decorate([sf.base.Property(0)],VolumeSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],VolumeSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],VolumeSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],VolumeSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],VolumeSettings.prototype,"isLock",void 0);__decorate([sf.base.Property('')],VolumeSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(['None'])],VolumeSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],VolumeSettings.prototype,"isPrint",void 0);return VolumeSettings;}(sf.base.ChildProperty);/**
 * The `Ink` module is used to provide the properties to Ink annotation.
 */var InkAnnotationSettings=/** @class */function(_super){__extends(InkAnnotationSettings,_super);function InkAnnotationSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],InkAnnotationSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],InkAnnotationSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(0)],InkAnnotationSettings.prototype,"width",void 0);__decorate([sf.base.Property(0)],InkAnnotationSettings.prototype,"height",void 0);__decorate([sf.base.Property(0)],InkAnnotationSettings.prototype,"path",void 0);__decorate([sf.base.Property(1)],InkAnnotationSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ff0000')],InkAnnotationSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property(1)],InkAnnotationSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('')],InkAnnotationSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(false)],InkAnnotationSettings.prototype,"isLock",void 0);__decorate([sf.base.Property('Guest')],InkAnnotationSettings.prototype,"author",void 0);__decorate([sf.base.Property(['None'])],InkAnnotationSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(null)],InkAnnotationSettings.prototype,"customData",void 0);__decorate([sf.base.Property(true)],InkAnnotationSettings.prototype,"isPrint",void 0);return InkAnnotationSettings;}(sf.base.ChildProperty);/**
 * The `stickyNotesSettings` module is used to provide the properties to sticky notes annotation.
 */var StickyNotesSettings=/** @class */function(_super){__extends(StickyNotesSettings,_super);function StickyNotesSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],StickyNotesSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],StickyNotesSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property('Guest')],StickyNotesSettings.prototype,"author",void 0);__decorate([sf.base.Property(1)],StickyNotesSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('')],StickyNotesSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(null)],StickyNotesSettings.prototype,"customData",void 0);__decorate([sf.base.Property(false)],StickyNotesSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(['None'])],StickyNotesSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],StickyNotesSettings.prototype,"isPrint",void 0);return StickyNotesSettings;}(sf.base.ChildProperty);/**
 * The `MeasurementSettings` module is used to provide the settings to measurement annotations.
 */var MeasurementSettings=/** @class */function(_super){__extends(MeasurementSettings,_super);function MeasurementSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(1)],MeasurementSettings.prototype,"scaleRatio",void 0);__decorate([sf.base.Property('in')],MeasurementSettings.prototype,"conversionUnit",void 0);__decorate([sf.base.Property('in')],MeasurementSettings.prototype,"displayUnit",void 0);__decorate([sf.base.Property(96)],MeasurementSettings.prototype,"depth",void 0);return MeasurementSettings;}(sf.base.ChildProperty);/**
 * The `FreeTextSettings` module is used to provide the properties to free text annotation.
 */var FreeTextSettings=/** @class */function(_super){__extends(FreeTextSettings,_super);function FreeTextSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],FreeTextSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],FreeTextSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],FreeTextSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],FreeTextSettings.prototype,"borderColor",void 0);__decorate([sf.base.Property(1)],FreeTextSettings.prototype,"borderWidth",void 0);__decorate([sf.base.Property('solid')],FreeTextSettings.prototype,"borderStyle",void 0);__decorate([sf.base.Property('Guest')],FreeTextSettings.prototype,"author",void 0);__decorate([sf.base.Property('#ffffff00')],FreeTextSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property(16)],FreeTextSettings.prototype,"fontSize",void 0);__decorate([sf.base.Property(151)],FreeTextSettings.prototype,"width",void 0);__decorate([sf.base.Property(24.6)],FreeTextSettings.prototype,"height",void 0);__decorate([sf.base.Property('#000')],FreeTextSettings.prototype,"fontColor",void 0);__decorate([sf.base.Property('Helvetica')],FreeTextSettings.prototype,"fontFamily",void 0);__decorate([sf.base.Property('TypeHere')],FreeTextSettings.prototype,"defaultText",void 0);__decorate([sf.base.Property('None')],FreeTextSettings.prototype,"fontStyle",void 0);__decorate([sf.base.Property('Left')],FreeTextSettings.prototype,"textAlignment",void 0);__decorate([sf.base.Property(false)],FreeTextSettings.prototype,"allowEditTextOnly",void 0);__decorate([sf.base.Property('')],FreeTextSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],FreeTextSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],FreeTextSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],FreeTextSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],FreeTextSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],FreeTextSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],FreeTextSettings.prototype,"customData",void 0);__decorate([sf.base.Property(['None'])],FreeTextSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],FreeTextSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property(false)],FreeTextSettings.prototype,"isReadonly",void 0);__decorate([sf.base.Property(false)],FreeTextSettings.prototype,"enableAutoFit",void 0);return FreeTextSettings;}(sf.base.ChildProperty);/**
 * The `AnnotationSelectorSettings` module is used to provide the properties to annotation selectors.
 */var AnnotationSelectorSettings=/** @class */function(_super){__extends(AnnotationSelectorSettings,_super);function AnnotationSelectorSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('')],AnnotationSelectorSettings.prototype,"selectionBorderColor",void 0);__decorate([sf.base.Property('black')],AnnotationSelectorSettings.prototype,"resizerBorderColor",void 0);__decorate([sf.base.Property('#FF4081')],AnnotationSelectorSettings.prototype,"resizerFillColor",void 0);__decorate([sf.base.Property(8)],AnnotationSelectorSettings.prototype,"resizerSize",void 0);__decorate([sf.base.Property(1)],AnnotationSelectorSettings.prototype,"selectionBorderThickness",void 0);__decorate([sf.base.Property('Square')],AnnotationSelectorSettings.prototype,"resizerShape",void 0);__decorate([sf.base.Property('')],AnnotationSelectorSettings.prototype,"selectorLineDashArray",void 0);__decorate([sf.base.Property('Corners')],AnnotationSelectorSettings.prototype,"resizerLocation",void 0);__decorate([sf.base.Property(null)],AnnotationSelectorSettings.prototype,"resizerCursorType",void 0);return AnnotationSelectorSettings;}(sf.base.ChildProperty);/**
 * The `TextSearchColorSettings` module is used to set the settings for the color of the text search highlight.
 */var TextSearchColorSettings=/** @class */function(_super){__extends(TextSearchColorSettings,_super);function TextSearchColorSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('#fdd835')],TextSearchColorSettings.prototype,"searchHighlightColor",void 0);__decorate([sf.base.Property('#8b4c12')],TextSearchColorSettings.prototype,"searchColor",void 0);return TextSearchColorSettings;}(sf.base.ChildProperty);/**
 * The `HandWrittenSignatureSettings` module is used to provide the properties to handwritten signature.
 */var HandWrittenSignatureSettings=/** @class */function(_super){__extends(HandWrittenSignatureSettings,_super);function HandWrittenSignatureSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(1)],HandWrittenSignatureSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#000000')],HandWrittenSignatureSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property(1)],HandWrittenSignatureSettings.prototype,"thickness",void 0);__decorate([sf.base.Property(150)],HandWrittenSignatureSettings.prototype,"width",void 0);__decorate([sf.base.Property(100)],HandWrittenSignatureSettings.prototype,"height",void 0);__decorate([sf.base.Property(1)],HandWrittenSignatureSettings.prototype,"saveSignatureLimit",void 0);__decorate([sf.base.Property(1)],HandWrittenSignatureSettings.prototype,"saveInitialLimit",void 0);__decorate([sf.base.Property([])],HandWrittenSignatureSettings.prototype,"signatureItem",void 0);__decorate([sf.base.Property()],HandWrittenSignatureSettings.prototype,"typeSignatureFonts",void 0);__decorate([sf.base.Property('')],HandWrittenSignatureSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property()],HandWrittenSignatureSettings.prototype,"signatureDialogSettings",void 0);__decorate([sf.base.Property()],HandWrittenSignatureSettings.prototype,"initialDialogSettings",void 0);return HandWrittenSignatureSettings;}(sf.base.ChildProperty);/**
 * The `AnnotationSettings` module is used to provide the properties to annotations.
 */var AnnotationSettings=/** @class */function(_super){__extends(AnnotationSettings,_super);function AnnotationSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('Guest')],AnnotationSettings.prototype,"author",void 0);__decorate([sf.base.Property(0)],AnnotationSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],AnnotationSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],AnnotationSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],AnnotationSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],AnnotationSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(false)],AnnotationSettings.prototype,"skipPrint",void 0);__decorate([sf.base.Property(false)],AnnotationSettings.prototype,"skipDownload",void 0);__decorate([sf.base.Property(null)],AnnotationSettings.prototype,"customData",void 0);__decorate([sf.base.Property(['None'])],AnnotationSettings.prototype,"allowedInteractions",void 0);return AnnotationSettings;}(sf.base.ChildProperty);/**
 * The `DocumentTextCollectionSettings` module is used to provide the properties to DocumentTextCollection.
 */var DocumentTextCollectionSettings=/** @class */function(_super){__extends(DocumentTextCollectionSettings,_super);function DocumentTextCollectionSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property()],DocumentTextCollectionSettings.prototype,"textData",void 0);__decorate([sf.base.Property()],DocumentTextCollectionSettings.prototype,"pageText",void 0);__decorate([sf.base.Property()],DocumentTextCollectionSettings.prototype,"pageSize",void 0);return DocumentTextCollectionSettings;}(sf.base.ChildProperty);/**
 * The `TextDataSettings` module is used to provide the properties of text data.
 */var TextDataSettings=/** @class */function(_super){__extends(TextDataSettings,_super);function TextDataSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property()],TextDataSettings.prototype,"bounds",void 0);__decorate([sf.base.Property()],TextDataSettings.prototype,"text",void 0);return TextDataSettings;}(sf.base.ChildProperty);/**
 * The `RectangleBounds` module is used to provide the properties of rectangle bounds.
 */var RectangleBounds=/** @class */function(_super){__extends(RectangleBounds,_super);function RectangleBounds(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property()],RectangleBounds.prototype,"size",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"x",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"y",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"width",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"height",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"left",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"top",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"right",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"bottom",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"isEmpty",void 0);return RectangleBounds;}(sf.base.ChildProperty);/**
 * The `TileRenderingSettings` module is used to provide the tile rendering settings of the PDF viewer.
 */var TileRenderingSettings=/** @class */function(_super){__extends(TileRenderingSettings,_super);function TileRenderingSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(true)],TileRenderingSettings.prototype,"enableTileRendering",void 0);__decorate([sf.base.Property(0)],TileRenderingSettings.prototype,"x",void 0);__decorate([sf.base.Property(0)],TileRenderingSettings.prototype,"y",void 0);return TileRenderingSettings;}(sf.base.ChildProperty);/**
 * The `ScrollSettings` module is used to provide the settings of the scroll of the PDF viewer.
 */var ScrollSettings=/** @class */function(_super){__extends(ScrollSettings,_super);function ScrollSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(100)],ScrollSettings.prototype,"delayPageRequestTimeOnScroll",void 0);return ScrollSettings;}(sf.base.ChildProperty);/**
 * The `FormField` is used to store the form fields of PDF document.
 */var FormField=/** @class */function(_super){__extends(FormField,_super);function FormField(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('')],FormField.prototype,"name",void 0);__decorate([sf.base.Property(false)],FormField.prototype,"isChecked",void 0);__decorate([sf.base.Property(false)],FormField.prototype,"isSelected",void 0);__decorate([sf.base.Property('')],FormField.prototype,"id",void 0);__decorate([sf.base.Property('')],FormField.prototype,"value",void 0);__decorate([sf.base.Property('')],FormField.prototype,"type",void 0);__decorate([sf.base.Property(false)],FormField.prototype,"isReadOnly",void 0);__decorate([sf.base.Property([''])],FormField.prototype,"signatureType",void 0);__decorate([sf.base.Property('')],FormField.prototype,"fontName",void 0);__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],FormField.prototype,"bounds",void 0);__decorate([sf.base.Property('Helvetica')],FormField.prototype,"fontFamily",void 0);__decorate([sf.base.Property(10)],FormField.prototype,"fontSize",void 0);__decorate([sf.base.Property('None')],FormField.prototype,"fontStyle",void 0);__decorate([sf.base.Property('black')],FormField.prototype,"color",void 0);__decorate([sf.base.Property('white')],FormField.prototype,"backgroundColor",void 0);__decorate([sf.base.Property('Left')],FormField.prototype,"alignment",void 0);__decorate([sf.base.Property('visible')],FormField.prototype,"visibility",void 0);__decorate([sf.base.Property(0)],FormField.prototype,"maxLength",void 0);__decorate([sf.base.Property(false)],FormField.prototype,"isRequired",void 0);__decorate([sf.base.Property(false)],FormField.prototype,"isPrint",void 0);__decorate([sf.base.Property('')],FormField.prototype,"tooltip",void 0);__decorate([sf.base.Property('')],FormField.prototype,"options",void 0);__decorate([sf.base.Property()],FormField.prototype,"signatureIndicatorSettings",void 0);__decorate([sf.base.Property(1)],FormField.prototype,"thickness",void 0);__decorate([sf.base.Property('#303030')],FormField.prototype,"borderColor",void 0);__decorate([sf.base.Property(false)],FormField.prototype,"isMultiline",void 0);return FormField;}(sf.base.ChildProperty);/**
 * The `ContextMenuSettings` is used to show the context menu of PDF document.
 */var ContextMenuSettings=/** @class */function(_super){__extends(ContextMenuSettings,_super);function ContextMenuSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('RightClick')],ContextMenuSettings.prototype,"contextMenuAction",void 0);__decorate([sf.base.Property([])],ContextMenuSettings.prototype,"contextMenuItems",void 0);return ContextMenuSettings;}(sf.base.ChildProperty);/**
 * The `TextFieldSettings` is used to to show and customize the appearance of text box HTML element.
 */var TextFieldSettings=/** @class */function(_super){__extends(TextFieldSettings,_super);function TextFieldSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],TextFieldSettings.prototype,"bounds",void 0);__decorate([sf.base.Property('')],TextFieldSettings.prototype,"name",void 0);__decorate([sf.base.Property('')],TextFieldSettings.prototype,"value",void 0);__decorate([sf.base.Property('Helvetica')],TextFieldSettings.prototype,"fontFamily",void 0);__decorate([sf.base.Property(10)],TextFieldSettings.prototype,"fontSize",void 0);__decorate([sf.base.Property(0)],TextFieldSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property('None')],TextFieldSettings.prototype,"fontStyle",void 0);__decorate([sf.base.Property('black')],TextFieldSettings.prototype,"color",void 0);__decorate([sf.base.Property('white')],TextFieldSettings.prototype,"backgroundColor",void 0);__decorate([sf.base.Property('Left')],TextFieldSettings.prototype,"alignment",void 0);__decorate([sf.base.Property(false)],TextFieldSettings.prototype,"isReadOnly",void 0);__decorate([sf.base.Property('visible')],TextFieldSettings.prototype,"visibility",void 0);__decorate([sf.base.Property(0)],TextFieldSettings.prototype,"maxLength",void 0);__decorate([sf.base.Property(false)],TextFieldSettings.prototype,"isRequired",void 0);__decorate([sf.base.Property(false)],TextFieldSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property('')],TextFieldSettings.prototype,"tooltip",void 0);__decorate([sf.base.Property(1)],TextFieldSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('#303030')],TextFieldSettings.prototype,"borderColor",void 0);__decorate([sf.base.Property(false)],TextFieldSettings.prototype,"isMultiline",void 0);return TextFieldSettings;}(sf.base.ChildProperty);/**
 * The `PasswordFieldSettings` is used to to show and customize the appearance of password input HTML element.
 */var PasswordFieldSettings=/** @class */function(_super){__extends(PasswordFieldSettings,_super);function PasswordFieldSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],PasswordFieldSettings.prototype,"bounds",void 0);__decorate([sf.base.Property('')],PasswordFieldSettings.prototype,"name",void 0);__decorate([sf.base.Property('')],PasswordFieldSettings.prototype,"value",void 0);__decorate([sf.base.Property(0)],PasswordFieldSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property('Helvetica')],PasswordFieldSettings.prototype,"fontFamily",void 0);__decorate([sf.base.Property(10)],PasswordFieldSettings.prototype,"fontSize",void 0);__decorate([sf.base.Property('None')],PasswordFieldSettings.prototype,"fontStyle",void 0);__decorate([sf.base.Property('black')],PasswordFieldSettings.prototype,"color",void 0);__decorate([sf.base.Property('white')],PasswordFieldSettings.prototype,"backgroundColor",void 0);__decorate([sf.base.Property('Left')],PasswordFieldSettings.prototype,"alignment",void 0);__decorate([sf.base.Property(false)],PasswordFieldSettings.prototype,"isReadOnly",void 0);__decorate([sf.base.Property('visible')],PasswordFieldSettings.prototype,"visibility",void 0);__decorate([sf.base.Property(0)],PasswordFieldSettings.prototype,"maxLength",void 0);__decorate([sf.base.Property(false)],PasswordFieldSettings.prototype,"isRequired",void 0);__decorate([sf.base.Property(false)],PasswordFieldSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property('')],PasswordFieldSettings.prototype,"tooltip",void 0);__decorate([sf.base.Property(1)],PasswordFieldSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('#303030')],PasswordFieldSettings.prototype,"borderColor",void 0);return PasswordFieldSettings;}(sf.base.ChildProperty);/**
 * The `CheckBoxFieldSettings` is used to to show and customize the appearance of check box element.
 */var CheckBoxFieldSettings=/** @class */function(_super){__extends(CheckBoxFieldSettings,_super);function CheckBoxFieldSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],CheckBoxFieldSettings.prototype,"bounds",void 0);__decorate([sf.base.Property('')],CheckBoxFieldSettings.prototype,"name",void 0);__decorate([sf.base.Property(false)],CheckBoxFieldSettings.prototype,"isChecked",void 0);__decorate([sf.base.Property('white')],CheckBoxFieldSettings.prototype,"backgroundColor",void 0);__decorate([sf.base.Property(false)],CheckBoxFieldSettings.prototype,"isReadOnly",void 0);__decorate([sf.base.Property('visible')],CheckBoxFieldSettings.prototype,"visibility",void 0);__decorate([sf.base.Property(false)],CheckBoxFieldSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property(0)],CheckBoxFieldSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property('')],CheckBoxFieldSettings.prototype,"tooltip",void 0);__decorate([sf.base.Property(false)],CheckBoxFieldSettings.prototype,"isRequired",void 0);__decorate([sf.base.Property(1)],CheckBoxFieldSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('#303030')],CheckBoxFieldSettings.prototype,"borderColor",void 0);return CheckBoxFieldSettings;}(sf.base.ChildProperty);/**
 * The `RadioButtonFieldSettings` is used to to show and customize the appearance of radio button element.
 */var RadioButtonFieldSettings=/** @class */function(_super){__extends(RadioButtonFieldSettings,_super);function RadioButtonFieldSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],RadioButtonFieldSettings.prototype,"bounds",void 0);__decorate([sf.base.Property('')],RadioButtonFieldSettings.prototype,"name",void 0);__decorate([sf.base.Property(false)],RadioButtonFieldSettings.prototype,"isSelected",void 0);__decorate([sf.base.Property('white')],RadioButtonFieldSettings.prototype,"backgroundColor",void 0);__decorate([sf.base.Property(false)],RadioButtonFieldSettings.prototype,"isReadOnly",void 0);__decorate([sf.base.Property(false)],RadioButtonFieldSettings.prototype,"isRequired",void 0);__decorate([sf.base.Property(0)],RadioButtonFieldSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property('visible')],RadioButtonFieldSettings.prototype,"visibility",void 0);__decorate([sf.base.Property(false)],RadioButtonFieldSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property('')],RadioButtonFieldSettings.prototype,"tooltip",void 0);__decorate([sf.base.Property(1)],RadioButtonFieldSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('#303030')],RadioButtonFieldSettings.prototype,"borderColor",void 0);return RadioButtonFieldSettings;}(sf.base.ChildProperty);/**
 * The `DropdownFieldSettings` is used to to show and customize the appearance of drop down element.
 */var DropdownFieldSettings=/** @class */function(_super){__extends(DropdownFieldSettings,_super);function DropdownFieldSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],DropdownFieldSettings.prototype,"bounds",void 0);__decorate([sf.base.Property('')],DropdownFieldSettings.prototype,"name",void 0);__decorate([sf.base.Property('')],DropdownFieldSettings.prototype,"value",void 0);__decorate([sf.base.Property('Helvetica')],DropdownFieldSettings.prototype,"fontFamily",void 0);__decorate([sf.base.Property(10)],DropdownFieldSettings.prototype,"fontSize",void 0);__decorate([sf.base.Property(0)],DropdownFieldSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property('None')],DropdownFieldSettings.prototype,"fontStyle",void 0);__decorate([sf.base.Property('black')],DropdownFieldSettings.prototype,"color",void 0);__decorate([sf.base.Property('white')],DropdownFieldSettings.prototype,"backgroundColor",void 0);__decorate([sf.base.Property('Left')],DropdownFieldSettings.prototype,"alignment",void 0);__decorate([sf.base.Property(false)],DropdownFieldSettings.prototype,"isReadOnly",void 0);__decorate([sf.base.Property('visible')],DropdownFieldSettings.prototype,"visibility",void 0);__decorate([sf.base.Property(false)],DropdownFieldSettings.prototype,"isRequired",void 0);__decorate([sf.base.Property(false)],DropdownFieldSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property('')],DropdownFieldSettings.prototype,"tooltip",void 0);__decorate([sf.base.Property('')],DropdownFieldSettings.prototype,"options",void 0);__decorate([sf.base.Property(1)],DropdownFieldSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('#303030')],DropdownFieldSettings.prototype,"borderColor",void 0);return DropdownFieldSettings;}(sf.base.ChildProperty);/**
 * The `ListBoxFieldSettings` is used to to show and customize the appearance of list box element.
 */var ListBoxFieldSettings=/** @class */function(_super){__extends(ListBoxFieldSettings,_super);function ListBoxFieldSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],ListBoxFieldSettings.prototype,"bounds",void 0);__decorate([sf.base.Property('')],ListBoxFieldSettings.prototype,"name",void 0);__decorate([sf.base.Property('')],ListBoxFieldSettings.prototype,"value",void 0);__decorate([sf.base.Property('Helvetica')],ListBoxFieldSettings.prototype,"fontFamily",void 0);__decorate([sf.base.Property(10)],ListBoxFieldSettings.prototype,"fontSize",void 0);__decorate([sf.base.Property(0)],ListBoxFieldSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property('None')],ListBoxFieldSettings.prototype,"fontStyle",void 0);__decorate([sf.base.Property('black')],ListBoxFieldSettings.prototype,"color",void 0);__decorate([sf.base.Property('white')],ListBoxFieldSettings.prototype,"backgroundColor",void 0);__decorate([sf.base.Property('Left')],ListBoxFieldSettings.prototype,"alignment",void 0);__decorate([sf.base.Property(false)],ListBoxFieldSettings.prototype,"isReadOnly",void 0);__decorate([sf.base.Property('visible')],ListBoxFieldSettings.prototype,"visibility",void 0);__decorate([sf.base.Property(false)],ListBoxFieldSettings.prototype,"isRequired",void 0);__decorate([sf.base.Property(false)],ListBoxFieldSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property('')],ListBoxFieldSettings.prototype,"tooltip",void 0);__decorate([sf.base.Property([])],ListBoxFieldSettings.prototype,"options",void 0);__decorate([sf.base.Property(1)],ListBoxFieldSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('#303030')],ListBoxFieldSettings.prototype,"borderColor",void 0);return ListBoxFieldSettings;}(sf.base.ChildProperty);var Item=/** @class */function(_super){__extends(Item,_super);function Item(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('')],Item.prototype,"itemName",void 0);__decorate([sf.base.Property('')],Item.prototype,"itemValue",void 0);return Item;}(sf.base.ChildProperty);/**
 * Represents the PDF viewer component.
 * ```html
 * <div id="pdfViewer"></div>
 * <script>
 *  var pdfViewerObj = new PdfViewer();
 *  pdfViewerObj.appendTo("#pdfViewer");
 * </script>
 * ```
 */var PdfViewer=/** @class */function(){function PdfViewer(dataId,element,dotnetRef,options,isWebAssembly){window.sfBlazor=window.sfBlazor;/**
        * @private
        */this.blazorAction=PdfViewerBlazorAction.Default;/**
        * @private
        */this.lastAnnotation=null;/**
        * @private
        */this.cultureValue=null;/**
         * Get the Loaded document signature Collections in the PdfViewer control.
         */ // eslint-disable-next-line
this.signatureCollection=[];/**
         * Gets or sets the document name loaded in the PdfViewer control.
         */this.fileName=null;/**
         * Gets or sets the document name loaded in the PdfViewer control.
         */this.enableRtl=false;/**
         * Gets or sets the document name loaded in the PdfViewer control.
         */this.allowServerDataBinding=true;/**
         * @private
         */this.zIndex=-1;/**
         * @private
         */this.nameTable={};/**   @private  */this.clipboardData={};/**
         * @private
         */this.zIndexTable=[];this.isTextSelectionStarted=false;/**
         * store the drawing objects.
         *
         * @private
         * @deprecated
         */ //@Property()
this.drawingObject=new PdfAnnotationBase();this.LoadedOnMessage=function(event){if(event.data.message==='loaded'){this.viewerBase.initializeComponent();if(this.enableTextSelection&&this.textSelectionModule){this.textSelectionModule.enableTextSelectionMode();}else{this.viewerBase.disableTextSelectionMode();}this.drawing.renderLabels(this);}};/** @hidden */this.defaultLocale={'PdfViewer':'PDF Viewer','Cancel':'Cancel','Download file':'Download file','Download':'Download','Enter Password':'This document is password protected. Please enter a password.','File Corrupted':'File Corrupted','File Corrupted Content':'The file is corrupted and cannot be opened.','Fit Page':'Fit Page','Fit Width':'Fit Width','Automatic':'Automatic','Go To First Page':'Show first page','Invalid Password':'Incorrect Password. Please try again.','Next Page':'Show next page','OK':'OK','Open':'Open file','Page Number':'Current page number','Previous Page':'Show previous page','Go To Last Page':'Show last page','Zoom':'Zoom','Zoom In':'Zoom in','Zoom Out':'Zoom out','Page Thumbnails':'Page thumbnails','Bookmarks':'Bookmarks','Print':'Print file','Password Protected':'Password Required','Copy':'Copy','Text Selection':'Text selection tool','Panning':'Pan mode','Text Search':'Find text','Find in document':'Find in document','Match case':'Match case','Apply':'Apply','GoToPage':'Go to Page',// eslint-disable-next-line max-len
'No matches':'Viewer has finished searching the document. No more matches were found','No Text Found':'No Text Found','Undo':'Undo','Redo':'Redo','Annotation':'Add or Edit annotations','FormDesigner':'Add and Edit Form Fields','Highlight':'Highlight Text','Underline':'Underline Text','Strikethrough':'Strikethrough Text','Delete':'Delete annotation','Opacity':'Opacity','Color edit':'Change Color','Opacity edit':'Change Opacity','Highlight context':'Highlight','Underline context':'Underline','Strikethrough context':'Strikethrough',// eslint-disable-next-line max-len
'Server error':'Web-service is not listening. PDF Viewer depends on web-service for all it\'s features. Please start the web service to continue.',// eslint-disable-next-line max-len
'Client error':'Client-side error is found. Please check the custom headers provided in the AjaxRequestSettings property and web action methods in the ServerActionSettings property.','Open text':'Open','First text':'First Page','Previous text':'Previous Page','Next text':'Next Page','Last text':'Last Page','Zoom in text':'Zoom In','Zoom out text':'Zoom Out','Selection text':'Selection','Pan text':'Pan','Print text':'Print','Search text':'Search','Annotation Edit text':'Edit Annotation','FormDesigner Edit text':'Add and Edit Form Fields','Line Thickness':'Line Thickness','Line Properties':'Line Properties','Start Arrow':'Start Arrow','End Arrow':'End Arrow','Line Style':'Line Style','Fill Color':'Fill Color','Line Color':'Line Color','None':'None','Open Arrow':'Open','Closed Arrow':'Closed','Round Arrow':'Round','Square Arrow':'Square','Diamond Arrow':'Diamond','Butt':'Butt','Cut':'Cut','Paste':'Paste','Delete Context':'Delete','Properties':'Properties','Add Stamp':'Add Stamp','Add Shapes':'Add Shapes','Stroke edit':'Change Stroke Color','Change thickness':'Change Border Thickness','Add line':'Add Line','Add arrow':'Add Arrow','Add rectangle':'Add Rectangle','Add circle':'Add Circle','Add polygon':'Add Polygon','Add Comments':'Add Comments','Comments':'Comments','SubmitForm':'Submit Form','No Comments Yet':'No Comments Yet','Accepted':'Accepted','Completed':'Completed','Cancelled':'Cancelled','Rejected':'Rejected','Leader Length':'Leader Length','Scale Ratio':'Scale Ratio','Calibrate':'Calibrate','Calibrate Distance':'Calibrate Distance','Calibrate Perimeter':'Calibrate Perimeter','Calibrate Area':'Calibrate Area','Calibrate Radius':'Calibrate Radius','Calibrate Volume':'Calibrate Volume','Depth':'Depth','Closed':'Closed','Round':'Round','Square':'Square','Diamond':'Diamond','Edit':'Edit','Comment':'Comment','Comment Panel':'Comment Panel','Set Status':'Set Status','Post':'Post','Page':'Page','Add a comment':'Add a comment','Add a reply':'Add a reply','Import Annotations':'Import annotations from JSON file','Export Annotations':'Export annotation to JSON file','Export XFDF':'Export annotation to XFDF file','Import XFDF':'Import annotations from XFDF file','Add':'Add','Clear':'Clear','Bold':'Bold','Italic':'Italic','Strikethroughs':'Strikethrough','Underlines':'Underline','Superscript':'Superscript','Subscript':'Subscript','Align left':'Align Left','Align right':'Align Right','Center':'Center','Justify':'Justify','Font color':'Font Color','Text Align':'Text Align','Text Properties':'Font Style','SignatureFieldDialogHeaderText':'Add Signature','HandwrittenSignatureDialogHeaderText':'Add Signature','InitialFieldDialogHeaderText':'Add Initial','HandwrittenInitialDialogHeaderText':'Add Initial','Draw Ink':'Draw Ink','Create':'Create','Font family':'Font Family','Font size':'Font Size','Free Text':'Free Text','Import Failed':'Invalid JSON file type or file name; please select a valid JSON file','File not found':'Imported JSON file is not found in the desired location','Export Failed':'Export annotations action has failed; please ensure annotations are added properly','of':'of ','Dynamic':'Dynamic','Standard Business':'Standard Business','Sign Here':'Sign Here','Custom Stamp':'Custom Stamp','Enter Signature as Name':'Enter your name','Draw-hand Signature':'DRAW','Type Signature':'TYPE','Upload Signature':'UPLOAD','Browse Signature Image':'BROWSE','Save Signature':'Save Signature','Save Initial':'Save Initial','Textbox':'Textbox','Password':'Password','Check Box':'Checkbox','Radio Button':'Radio Button','Dropdown':'Drop Down','List Box':'List Box','Signature':'Signature','Delete FormField':'Delete Form Field','Textbox Properties':'Textbox Properties','Name':'Name','Tooltip':'Tooltip','Value':'Value','Form Field Visibility':'Form Field Visibility','Read Only':'Read Only','Required':'Required','Checked':'Checked','Show Printing':'Show Printing','Formatting':'Format','Fill':'Fill','Border':'Border','Border Color':'Border Color','Thickness':'Thickness','Max Length':'Max Length','List Item':'Item Name','Export Value':'Item Value','Dropdown Item List':'Dropdown Item List','List Box Item List':'List Box Item List','General':'GENERAL','Appearance':'APPEARANCE','Options':'OPTIONS','Delete Item':'Delete','Up':'Up','Down':'Down','Multiline':'Multiline','Revised':'Revised','Reviewed':'Reviewed','Received':'Received','Confidential':'Confidential','Approved':'Approved','Not Approved':'Not Approved','Witness':'Witness','Initial Here':'Initial Here','Draft':'Draft','Final':'Final','For Public Release':'For Public Release','Not For Public Release':'Not For Public Release','For Comment':'For Comment','Void':'Void','Preliminary Results':'Preliminary Results','Information Only':'Information Only','in':'in','m':'m','ft_in':'ft_in','ft':'ft','p':'p','cm':'cm','mm':'mm','pt':'pt','cu':'cu','sq':'sq','Initial':'Initial'};// debugger;
this._dotnetInstance=dotnetRef;// if (!isNullOrUndefined(element)) {
//     element.blazor__instance = this;
// }
this.element=element;this.dataId=dataId;window.sfBlazor.setCompInstance(this);this.viewerBase=new PdfViewerBase(this);this.viewerBase.isWebAssembly=isWebAssembly;if(!sf.base.isNullOrUndefined(options)){this.options=options;this.updateOptions(options);}this.drawing=new Drawing(this);}Object.defineProperty(PdfViewer.prototype,"zoomPercentage",{/**
         * Returns the current zoom percentage of the PdfViewer control.
         *
         * @asptype int
         * @blazorType int
         */get:function get(){return this.magnificationModule.zoomFactor*100;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"bookmark",{/**
         * Gets the bookmark view object of the pdf viewer.
         *
         * @asptype BookmarkView
         * @blazorType BookmarkView
         * @returns { BookmarkView }
         */get:function get(){return this.bookmarkViewModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"print",{/**
         * Gets the print object of the pdf viewer.
         *
         * @asptype Print
         * @blazorType Print
         * @returns { Print }
         */get:function get(){return this.printModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"magnification",{/**
         * Gets the magnification object of the pdf viewer.
         *
         * @asptype Magnification
         * @blazorType Magnification
         * @returns { Magnification }
         */get:function get(){return this.magnificationModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"navigation",{/**
         * Gets the navigation object of the pdf viewer.
         *
         * @asptype Navigation
         * @blazorType Navigation
         * @returns { Navigation }
         */get:function get(){return this.navigationModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"textSearch",{/**
         * Gets the text search object of the pdf viewer.
         *
         * @asptype TextSearch
         * @blazorType TextSearch
         * @returns { TextSearch }
         */get:function get(){return this.textSearchModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"toolbar",{/**
         * Gets the toolbar object of the pdf viewer.
         *
         * @asptype Toolbar
         * @blazorType Toolbar
         * @returns { Toolbar }
         */get:function get(){return this.toolbarModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"thumbnailView",{/**
         * Gets the thumbnail-view object of the pdf viewer.
         *
         * @asptype ThumbnailView
         * @blazorType ThumbnailView
         * @returns { ThumbnailView }
         */get:function get(){return this.thumbnailViewModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"annotation",{/**
         * Gets the annotation object of the pdf viewer.
         *
         * @asptype Annotation
         * @blazorType Annotation
         * @returns { Annotation }
         */get:function get(){return this.annotationModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"formField",{/**
         * Gets the FormFields object of the pdf viewer.
         *
         * @asptype FormFields
         * @blazorType FormFields
         * @returns { FormFields }
         */get:function get(){return this.formFieldsModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"formDesigner",{/**
         * Gets the FormDesigner object of the pdf viewer.
         *
         * @asptype FormDesigner
         * @blazorType FormDesigner
         * @returns { FormDesigner }
         */get:function get(){return this.formDesignerModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"textSelection",{/**
         * Gets the TextSelection object of the pdf viewer.
         *
         * @asptype TextSelection
         * @blazorType TextSelection
         * @returns { TextSelection }
         */get:function get(){return this.textSelectionModule;},enumerable:true,configurable:true});PdfViewer.prototype.updateOptions=function(options){this.serviceUrl=options.serviceUrl;this.enableFormFieldsValidation=options.enableFormFieldsValidation;this.pageCount=options.pageCount;this.printScaleFactor=options.printScaleFactor;this.isDocumentEdited=options.isDocumentEdited;this.currentPageNumber=options.currentPageNumber;this.documentPath=options.documentPath;this.zoomValue=options.zoomValue;this.zoomMode=options.zoomMode;this.downloadFileName=options.downloadFileName;this.exportAnnotationFileName=options.exportAnnotationFileName;this.height=options.height;this.width=options.width;this.enableToolbar=options.enableToolbar;this.enableRtl=options.enableRtl;this.enableAnnotationToolbar=options.enableAnnotationToolbar;this.enableNavigationToolbar=options.enableNavigationToolbar;this.retryCount=options.retryCount;this.showNotificationDialog=options.showNotificationDialog;this.enableCommentPanel=options.enableCommentPanel;this.isCommandPanelOpen=options.isCommandPanelOpen;this.commentPanelVisible=options.commentPanelVisible;this.showDigitalSignatureAppearance=options.showDigitalSignatureAppearance;this.enableThumbnail=options.enableThumbnail;this.isThumbnailViewOpen=options.isThumbnailViewOpen;this.enableDownload=options.enableDownload;this.enablePrint=options.enablePrint;this.printMode=options.printMode;this.isSignatureEditable=options.isSignatureEditable;this.enableBookmark=options.enableBookmark;this.enableHyperlink=options.enableHyperlink;this.enableHandwrittenSignature=options.enableHandwrittenSignature;this.enableInkAnnotation=options.enableInkAnnotation;this.restrictZoomRequest=options.restrictZoomRequest;this.hyperlinkOpenState=options.hyperlinkOpenState;this.enableNavigation=options.enableNavigation;this.enableAutoComplete=options.enableAutoComplete;this.enableMagnification=options.enableMagnification;this.enableShapeLabel=options.enableShapeLabel;this.enableImportAnnotationMeasurement=options.enableImportAnnotationMeasurement;this.enablePinchZoom=options.enablePinchZoom;this.enableZoomOptimization=options.enableZoomOptimization;this.enableTextSelection=options.enableTextSelection;this.enableTextSearch=options.enableTextSearch;this.enableAnnotation=options.enableAnnotation;this.enableFormFields=options.enableFormFields;this.isFormFieldDocument=options.isFormFieldDocument;this.enableFreeText=options.enableFreeText;this.enableTextMarkupAnnotation=options.enableTextMarkupAnnotation;this.enableShapeAnnotation=options.enableShapeAnnotation;this.enableMeasureAnnotation=options.enableMeasureAnnotation;this.enableStampAnnotations=options.enableStampAnnotations;this.enableStickyNotesAnnotation=options.enableStickyNotesAnnotation;this.interactionMode=options.interactionMode;this.isExtractText=options.isExtractText;this.dateTimeFormat=options.stampSettings.dateTimeFormat;// this.cssClass = options.cssClass,
this.toolbarSettings=options.toolbarSettings;this.ajaxRequestSettings=options.ajaxRequestSettings;this.serverActionSettings=options.serverActionSettings;this.textSearchColorSettings=options.textSearchColorSettings;this.contextMenuSettings=options.contextMenuSettings;this.tileRenderingSettings=options.tileRenderingSettings;this.scrollSettings=options.scrollSettings;this.annotationSettings=options.annotationSettings;this.highlightSettings=options.highlightSettings;this.strikethroughSettings=options.strikethroughSettings;this.underlineSettings=options.underlineSettings;this.shapeLabelSettings=options.shapeLabelSettings;this.lineSettings=options.lineSettings;this.arrowSettings=options.arrowSettings;this.rectangleSettings=options.rectangleSettings;this.circleSettings=options.circleSettings;this.polygonSettings=options.polygonSettings;this.measurementSettings=options.measurementSettings;this.distanceSettings=options.distanceSettings;this.perimeterSettings=options.perimeterSettings;this.areaSettings=options.areaSettings;this.radiusSettings=options.radiusSettings;this.volumeSettings=options.volumeSettings;this.stampSettings=options.stampSettings;this.customStampSettings=options.customStampSettings;this.freeTextSettings=options.freeTextSettings;this.handWrittenSignatureSettings=options.handWrittenSignatureSettings;this.signatureFieldSettings=options.signatureFieldSettings;this.inkAnnotationSettings=options.inkAnnotationSettings;this.stickyNotesSettings=options.stickyNotesSettings;this.annotationSelectorSettings=options.annotationSelectorSettings;this.enableDesktopMode=options.enableDesktopMode;if(!this.annotations){this.annotations=options.annotations;}if(options.selectedItems&&this.selectedItems===undefined){this.selectedItems=options.selectedItems;}this.formFields=options.formFields;this.requiredModules();};/**
     * @private
     */PdfViewer.prototype.updatePdfViewerOptions=function(propertyName,value){this._dotnetInstance.invokeMethodAsync('UpdatePdfViewerOptions',propertyName,value);};PdfViewer.prototype.setOptions=function(newProp,oldProp,update){var properties=Object.keys(newProp);for(var _i=0,properties_1=properties;_i<properties_1.length;_i++){var prop=properties_1[_i];switch(prop){case'locale':// if (this.viewerBase.loadedData) {
//     // eslint-disable-next-line
//     let data: any = null;
//     if (this.formFieldsModule) {
//         data = this.viewerBase.getItemFromSessionStorage('_formfields');
//     }
//     if (data) {
//         this.viewerBase.formfieldvalue = JSON.parse(data);
//         // eslint-disable-next-line
//         let annotCollection: any[] = this.annotationCollection;
//         const filename: string = this.viewerBase.jsonDocumentId;
//         super.refresh();
//         this.load(this.viewerBase.loadedData, null);
//         this.addAnnotation(annotCollection);
//         this.viewerBase.loadedData = null;
//         this.downloadFileName = filename;
//         this.fileName = filename;
//     }
// }
break;case'enableToolbar':// this.notify('', { module: 'toolbar', enable: this.enableToolbar });
// requireRefresh = true;
break;case'enableCommentPanel':// this.notify('', { module: 'annotation', enable: this.enableCommentPanel });
// requireRefresh = true;
// if (this.toolbarModule && this.toolbarModule.annotationToolbarModule) {
//     this.toolbarModule.annotationToolbarModule.enableCommentPanelTool(this.enableCommentPanel);
// }
// if (!this.enableCommentPanel) {
//     if (this.viewerBase.navigationPane) {
//         this.viewerBase.navigationPane.closeCommentPanelContainer();
//     }
// }
break;case'showDigitalSignatureAppearance':this.showDigitalSignatureAppearance=newProp.showDigitalSignatureAppearance;break;case'documentPath':if(update){this.load(newProp.documentPath,null);}break;case'interactionMode':this.interactionMode=newProp.interactionMode;if(newProp.interactionMode==='Pan'){this.viewerBase.initiatePanning();if(this.toolbar){this.toolbar.updateInteractionTools(false);}}else if(newProp.interactionMode==='TextSelection'){this.viewerBase.initiateTextSelectMode();if(this.toolbar){this.toolbar.updateInteractionTools(true);}}break;case'height':this.height=newProp.height;this.viewerBase.updateHeight();this.viewerBase.onWindowResize();if(this.toolbar&&this.toolbar.annotationToolbarModule){if(this.toolbar.annotationToolbarModule.isToolbarHidden){this.toolbar.annotationToolbarModule.adjustViewer(false);}else{this.toolbar.annotationToolbarModule.adjustViewer(true);}}break;case'width':this.width=newProp.width;this.viewerBase.updateWidth();this.viewerBase.onWindowResize();break;case'customStamp':this.renderCustomerStamp(this.customStamp[0]);break;case'customStampSettings':this.customStampSettings=newProp.customStampSettings;break;case'enableFormFields':/* if (this.enableFormFields && this.formFieldsModule) {
                         for (let m: number = 0; m < this.pageCount; m++) {
                             this.formFieldsModule.renderFormFields(m);
                         }
                     } else {
                         this.formFieldsModule = new FormFields(this, this.viewerBase);
                         this.formFieldsModule.formFieldsReadOnly(this.enableFormFields);
                     }*/break;case'designerMode':if(this.designerMode){this.formDesignerModule.setMode('designer');}else{this.formDesignerModule.setMode('edit');}break;case'highlightSettings':case'underlineSettings':case'strikethroughSettings':if(this.annotationModule&&this.annotationModule.textMarkupAnnotationModule){this.annotationModule.textMarkupAnnotationModule.updateTextMarkupSettings(prop);}break;case'commentPanelVisible':if(newProp.commentPanelVisible){this.annotation.showCommentsPanel();}else{this.viewerBase.navigationPane.closeCommentPanelContainer();}break;}}this.updateOptions(newProp);};//    public preRender(): void {
//        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, 'en-US');
//    }
PdfViewer.prototype.preRender=function(){this.localeObj=new sf.base.L10n(this.getModuleName(),this.defaultLocale,'en-US');};PdfViewer.prototype.render=function(){var proxy=null;proxy=this;var workerBob=new Blob([PdfiumRunner.toString().replace(/^[^{]*{([\s\S]*)}$/m,'$1')],{type:'text/javascript'});var workerBlobUrl=URL.createObjectURL(workerBob);window['pdfViewerRunner_'+this.dataId]=this.viewerBase.pdfViewerRunner=new Worker(workerBlobUrl);window.getRunningScript=function(){return function(){return new Error().stack.match(/(?:http[s]?:\/\/(?:[^\/\s]+\/))(.*\.js)/)[0];};};var scriptLinkURL=window.getRunningScript()();var splitURL=scriptLinkURL.split('/');this.viewerBase.pdfViewerRunner.postMessage({url:scriptLinkURL.replace("/"+splitURL[splitURL.length-1],""),message:'initialLoading'});this.viewerBase.pdfViewerRunner.onmessage=function(event){proxy.viewerBase.CommonOnMessage(event);};// this.renderComplete();
};PdfViewer.prototype.getModuleName=function(){return'PdfViewer';};/**
     * @private
     */PdfViewer.prototype.getLocaleConstants=function(){return this.defaultLocale;};/**
     * To modify the Json Data in ajax request.
     *
     * @param jsonData
     * @returns void
     */ // eslint-disable-next-line
PdfViewer.prototype.setJsonData=function(jsonData){this.viewerBase.ajaxData=jsonData;};PdfViewer.prototype.onPropertyChanged=function(newProp,oldProp){var properties=Object.keys(newProp);for(var _i=0,properties_2=properties;_i<properties_2.length;_i++){var prop=properties_2[_i];switch(prop){case'locale':/* if (this.viewerBase.loadedData) {
                         // eslint-disable-next-line
                         let data: any = null;
                         if (this.formFieldsModule) {
                             data = this.viewerBase.getItemFromSessionStorage('_formfields');
                         }
                         if (data) {
                             this.viewerBase.formfieldvalue = JSON.parse(data);
                             // eslint-disable-next-line
                             let annotCollection: any[] = this.annotationCollection;
                             const filename: string = this.viewerBase.jsonDocumentId;
                             super.refresh();
                             this.load(this.viewerBase.loadedData, null);
                             this.addAnnotation(annotCollection);
                             this.viewerBase.loadedData = null;
                             this.downloadFileName = filename;
                             this.fileName = filename;
                         }
                     }*/break;case'enableToolbar'://this.notify('', { module: 'toolbar', enable: this.enableToolbar });
break;case'enableCommentPanel'://this.notify('', { module: 'annotation', enable: this.enableCommentPanel });
if(this.toolbarModule&&this.toolbarModule.annotationToolbarModule){this.toolbarModule.annotationToolbarModule.enableCommentPanelTool(this.enableCommentPanel);}if(!this.enableCommentPanel){if(this.viewerBase.navigationPane){this.viewerBase.navigationPane.closeCommentPanelContainer();}}break;case'documentPath':if(!sf.base.isBlazor()){this.load(newProp.documentPath,null);}else{this._dotnetInstance.invokeMethodAsync('LoadDocumentFromClient',newProp.documentPath,false);}break;case'interactionMode':this.interactionMode=newProp.interactionMode;if(newProp.interactionMode==='Pan'){this.viewerBase.initiatePanning();if(this.toolbar){this.toolbar.updateInteractionTools(false);}}else if(newProp.interactionMode==='TextSelection'){this.viewerBase.initiateTextSelectMode();if(this.toolbar){this.toolbar.updateInteractionTools(true);}}break;case'height':this.height=newProp.height;this.viewerBase.updateHeight();this.viewerBase.onWindowResize();if(this.toolbar&&this.toolbar.annotationToolbarModule){if(this.toolbar.annotationToolbarModule.isToolbarHidden){this.toolbar.annotationToolbarModule.adjustViewer(false);}else{this.toolbar.annotationToolbarModule.adjustViewer(true);}}break;case'width':this.width=newProp.width;this.viewerBase.updateWidth();this.viewerBase.onWindowResize();break;case'customStamp':this.renderCustomerStamp(this.customStamp[0]);break;case'customStampSettings':if(newProp.customStampSettings.customStamps){this.renderCustomerStamp(this.customStampSettings.customStamps[0]);}break;case'enableFormFields':if(this.enableFormFields&&this.formFieldsModule){for(var m=0;m<this.pageCount;m++){this.formFieldsModule.renderFormFields(m);}}else{this.formFieldsModule=new FormFields(this,this.viewerBase);this.formFieldsModule.formFieldsReadOnly(this.enableFormFields);}break;case'designerMode':if(this.designerMode){this.formDesignerModule.setMode('designer');}else{this.formDesignerModule.setMode('edit');}break;case'highlightSettings':case'underlineSettings':case'strikethroughSettings':if(this.annotationModule&&this.annotationModule.textMarkupAnnotationModule){this.annotationModule.textMarkupAnnotationModule.updateTextMarkupSettings(prop);}break;}}};// eslint-disable-next-line
PdfViewer.prototype.renderCustomerStamp=function(customStamp){this.annotation.stampAnnotationModule.isStampAddMode=true;this.annotationModule.stampAnnotationModule.isStampAnnotSelected=true;this.viewerBase.stampAdded=true;this.viewerBase.isAlreadyAdded=false;// eslint-disable-next-line max-len
this.annotation.stampAnnotationModule.createCustomStampAnnotation(customStamp.customStampImageSource,customStamp.customStampName);};PdfViewer.prototype.getPersistData=function(){return'PdfViewer';};PdfViewer.prototype.requiredModules=function(){if(this.enableMagnification){if(sf.base.isNullOrUndefined(this.magnificationModule)){this.magnificationModule=new Magnification(this,this.viewerBase);}}if(this.enableNavigation){if(sf.base.isNullOrUndefined(this.navigationModule)){this.navigationModule=new Navigation(this,this.viewerBase);}}if(this.enableToolbar||this.enableNavigationToolbar||this.enableAnnotationToolbar||this.enableFormDesignerToolbar){if(sf.base.isNullOrUndefined(this.toolbarModule)){this.toolbarModule=new Toolbar$1(this,this.viewerBase);}}if(this.enableHyperlink){if(sf.base.isNullOrUndefined(this.linkAnnotationModule)){this.linkAnnotationModule=new LinkAnnotation(this,this.viewerBase);}}if(this.enableThumbnail){if(sf.base.isNullOrUndefined(this.thumbnailViewModule)){this.thumbnailViewModule=new ThumbnailView(this,this.viewerBase);}}if(this.enableBookmark){if(sf.base.isNullOrUndefined(this.bookmarkViewModule)){this.bookmarkViewModule=new BookmarkView(this,this.viewerBase);}}if(this.enableTextSelection){if(sf.base.isNullOrUndefined(this.printModule)){this.textSelectionModule=new TextSelection(this,this.viewerBase);}}if(this.enableTextSearch){if(sf.base.isNullOrUndefined(this.textSearchModule)){this.textSearchModule=new TextSearch(this,this.viewerBase);}}if(this.enablePrint){if(sf.base.isNullOrUndefined(this.printModule)){this.printModule=new Print(this,this.viewerBase);}}if(this.enableAnnotation){if(sf.base.isNullOrUndefined(this.annotationModule)){this.annotationModule=new Annotation(this,this.viewerBase);}}if(this.enableFormFields){if(sf.base.isNullOrUndefined(this.formFieldsModule)){this.formFieldsModule=new FormFields(this,this.viewerBase);}}if(this.enableFormDesigner&&!sf.base.isBlazor()){if(sf.base.isNullOrUndefined(this.formDesignerModule)){this.formDesignerModule=new FormDesigner(this,this.viewerBase);}}};/**
     * Loads the given PDF document in the PDF viewer control
     *
     * @param  {string} document - Specifies the document name for load
     * @param  {string} password - Specifies the Given document password
     * @returns void
     */PdfViewer.prototype.load=function(document,password){if(this.pageCount!==0){this.viewerBase.clear(true);}else{this.viewerBase.clear(false);}this.pageCount=0;this.currentPageNumber=0;this.updatePdfViewerOptions("PageCount",0);this.updatePdfViewerOptions("CurrentPageNumber",0);if(!sf.base.isBlazor()){if(this.toolbarModule){this.toolbarModule.resetToolbar();}}else{this.viewerBase.blazorUIAdaptor.resetToolbar();}this.viewerBase.initiatePageRender(document,password);};/**
     * Loads the given PDF document in the PDF viewer control
     * @private
     */PdfViewer.prototype.loadDocument=function(documentId,isFileName,fileName){if(this.pageCount!==0){this.viewerBase.clear(true);}else{this.viewerBase.clear(false);}this.pageCount=0;this.currentPageNumber=0;this.viewerBase.blazorUIAdaptor.resetToolbar();this.fileName=fileName;this.viewerBase.initiateLoadDocument(documentId,isFileName,fileName);};/**
     * Loads the Byte Array of document in the PDF viewer control
    * @private
    */PdfViewer.prototype.loadByteArray=function(documentByteArray){if(documentByteArray!=null){this.fileByteArray=documentByteArray;}};/**
     * Loads the PDF document with the document details in the PDF viewer control
    * @private
    */PdfViewer.prototype.loadSuccess=function(documentDetails,password){this.viewerBase.loadSuccess(documentDetails,password);};/**
     * Set the focus of the given element
    * @private
    */PdfViewer.prototype.focusElement=function(elementId){var element=document.getElementById(elementId);if(element!=null){element.focus();}};/**
     * Downloads the PDF document being loaded in the ejPdfViewer control.
     *
     * @returns void
     */PdfViewer.prototype.download=function(){if(this.enableDownload){this.viewerBase.download();}};/**
     * Saves the PDF document being loaded in the PDF Viewer control as blob.
     *
     * @returns Promise<Blob>
     */PdfViewer.prototype.saveAsBlob=function(){var _this=this;if(this.enableDownload){return new Promise(function(resolve,reject){resolve(_this.viewerBase.saveAsBlob());});}else{return null;}};/**
     * updates the PDF Viewer container width and height from externally.
     *
     * @returns void
     */PdfViewer.prototype.updateViewerContainer=function(){this.viewerBase.updateViewerContainer();};/**
     * Specifies the message to be displayed  in the popup.
     *
     * @param errorString
     * @returns void
     */PdfViewer.prototype.showNotificationPopup=function(errorString){this.viewerBase.showNotificationPopup(errorString);};/**
     * Focus a form field in a document by its field name or the field object.
     *
     * @param field
     * @returns void
     */PdfViewer.prototype.focusFormField=function(field){var _this=this;if(typeof field==="string"){var fieldCollections=this.retrieveFormFields();for(var i=0;i<fieldCollections.length;i++){if(fieldCollections[i].name===field){field=fieldCollections[i];}}}if(field){this.viewerBase.isFocusField=true;this.viewerBase.focusField=field;var pageIndex=parseFloat(field.id.split('_')[1]);this.navigationModule.goToPage(pageIndex+1);setTimeout(function(){var currentField=document.getElementById(field.id);if(currentField){currentField.focus();_this.viewerBase.isFocusField=false;_this.viewerBase.focusField=[];}},100);}};/**
     * Update the form field values from externally.
     *
     * @param fieldValue
     * @returns void
     */ // eslint-disable-next-line
PdfViewer.prototype.updateFormFieldsValue=function(fieldValue){// eslint-disable-next-line
var target=document.getElementById(fieldValue.id);target=target?target:document.getElementById(fieldValue.id+'_content_html_element').children[0].children[0];if(target&&fieldValue.type==='Textbox'||fieldValue.type==='Password'){target.value=fieldValue.value;}else if(fieldValue.type==='RadioButton'||fieldValue.type==='CheckBox'){if(fieldValue.type==='CheckBox'){target.style.appearance='auto';}var value=fieldValue.value.toLowerCase();if(value==="true"||value==="yes"||value==="on"){target.checked=true;target.value=fieldValue.value;}else{target.checked=false;target.value=fieldValue.value;}}else if(fieldValue.type==='DropDown'||fieldValue.type==='ListBox'){if(target.nodeName==="SELECT"){target.options[target.selectedIndex].text=fieldValue.value;}if(target.nodeName==="DATALIST"){target=document.getElementById(target.id.replace(this.element.id+'input_','editableDropdown'));target.value=fieldValue.value;}}if(fieldValue.type==='SignatureField'||fieldValue.type==='InitialField'){if(fieldValue.signatureType){fieldValue.signatureType=fieldValue.signatureType[0];}fieldValue.fontName=fieldValue.fontName?fieldValue.fontName:fieldValue.fontFamily;if(target.classList.contains('e-pdfviewer-signatureformfields-signature')){if(this.formDesignerModule)this.annotation.deleteAnnotationById(fieldValue.id.split('_')[0]+'_content');else this.annotation.deleteAnnotationById(fieldValue.id);}if(!fieldValue.signatureType)fieldValue.signatureType=fieldValue.value.indexOf('base64')>-1?'Image':fieldValue.value.startsWith('M')&&fieldValue.split(',')[1].split(' ')[1].startsWith('L')?'Path':'Type';this.formFieldsModule.drawSignature(fieldValue.signatureType,fieldValue.value,target,fieldValue.fontName);}else{this.formFieldsModule.updateDataInSession(target);}};/**
     * Perform undo action for the edited annotations
     *
     * @returns void
     */PdfViewer.prototype.undo=function(){if(this.annotationModule){this.annotationModule.undo();}};/**
     * Perform redo action for the edited annotations
     *
     * @returns void
     */PdfViewer.prototype.redo=function(){if(this.annotationModule){this.annotationModule.redo();}};/**
     * Unloads the PDF document being displayed in the PDF viewer.
     *
     * @returns void
     */PdfViewer.prototype.unload=function(){this.viewerBase.clear(true);this.viewerBase.pdfViewerRunner.postMessage({message:'unloadFPDF'});this.updatePdfViewerOptions("PageCount",0);this.pageCount=0;if(!sf.base.isBlazor()){if(this.toolbarModule){this.viewerBase.pageCount=0;this.toolbarModule.resetToolbar();}}else{this.viewerBase.blazorUIAdaptor.resetToolbar();}if(this.fileByteArray){this.fileByteArray=null;}if(this.viewerBase.hyperlinkAndLinkAnnotation){this.viewerBase.hyperlinkAndLinkAnnotation={};}if(this.viewerBase.pageTextDetails){this.viewerBase.pageTextDetails={};}this.magnificationModule.zoomTo(100);};/**
     * Destroys all managed resources used by this object.
     */PdfViewer.prototype.destroy=function(isDestroy,dataId){if(window["pdfViewerRunner_"+dataId]){window["pdfViewerRunner_"+dataId].terminate();delete window["pdfViewerRunner_"+dataId];}if(!sf.base.isNullOrUndefined(this.element)&&!isDestroy){if(this.element.parentElement!==null){this.element.parentElement.removeChild(this.element);}}if(this.viewerBase.navigationPane){this.viewerBase.navigationPane.restrictUpdateZoomValue=false;}this.viewerBase.destroy();if(this.viewerBase.navigationPane){this.viewerBase.navigationPane.restrictUpdateZoomValue=true;}};// eslint-disable-next-line
/**
     * Perform imports annotations action in the PDF Viewer
     * @param  {any} importData - Specifies the data for annotation imports
     * @returns void
     */ // eslint-disable-next-line
PdfViewer.prototype.importAnnotation=function(importData,annotationDataFormat){if(this.annotationModule){if(typeof importData==='string'){var isXfdfFile=importData.indexOf('.xfdf')>-1||annotationDataFormat.indexOf('Xfdf')>-1?true:false;if(annotationDataFormat){if(importData.indexOf('</xfdf>')>-1){this.viewerBase.importAnnotations(importData,annotationDataFormat,false);}else{if(annotationDataFormat=='Json'){if(importData.includes('pdfAnnotation')){this.importAnnotationsAsJson(importData);}else{var newImportData=importData.split(',')[1]?importData.split(',')[1]:importData.split(',')[0];importData=decodeURIComponent(escape(atob(newImportData)));this.importAnnotationsAsJson(importData);}}else{this.viewerBase.importAnnotations(importData,annotationDataFormat,isXfdfFile);}}}else{if(importData.split('.')[1]==='json'){if(importData.includes('pdfAnnotation')){this.importAnnotationsAsJson(importData);}else{var newImportData=importData.split(',')[1]?importData.split(',')[1]:importData.split(',')[0];importData=decodeURIComponent(escape(atob(newImportData)));this.importAnnotationsAsJson(importData);}}else{this.viewerBase.importAnnotations(importData,AnnotationDataFormat.Xfdf,isXfdfFile);}}}else{this.viewerBase.importAnnotations(importData);}}};/**
     * Perform import annotations as json action in the PDF Viewer
     *
     * @param importData
     * @returns void
     */PdfViewer.prototype.importAnnotationsAsJson=function(importData){var jsonData=JSON.parse(importData);var firstAnnotation=jsonData.pdfAnnotation[Object.keys(jsonData.pdfAnnotation)[0]];if(Object.keys(jsonData.pdfAnnotation).length>=1&&(firstAnnotation.textMarkupAnnotation||firstAnnotation.measureShapeAnnotation||firstAnnotation.freeTextAnnotation||firstAnnotation.stampAnnotations||firstAnnotation.signatureInkAnnotation||firstAnnotation.shapeAnnotation&&firstAnnotation.shapeAnnotation[0].Bounds)){this.viewerBase.isPDFViewerJson=true;this.viewerBase.importAnnotations(jsonData,AnnotationDataFormat.Json);}else{this.viewerBase.isPDFViewerJson=false;this.viewerBase.importAnnotations(btoa(importData),AnnotationDataFormat.Json);}};/**
     * Perform export annotations action in the PDF Viewer
     *
     * @param annotationDataFormat
     * @returns void
     */PdfViewer.prototype.exportAnnotation=function(annotationDataFormat){if(this.annotationModule){if(annotationDataFormat&&annotationDataFormat==='Xfdf'){this.viewerBase.exportAnnotations(AnnotationDataFormat.Xfdf);}else{this.viewerBase.exportAnnotations(AnnotationDataFormat.Json);}}};/**
     * Perform export annotations action in the PDF Viewer
     *
     * @returns Promise<object>
     */PdfViewer.prototype.exportAnnotationsAsObject=function(){var _this=this;if(this.annotationModule){return new Promise(function(resolve,reject){_this.viewerBase.exportAnnotationsAsObject().then(function(value){resolve(value);});});}else{return null;}};/**
     * Export annotations and returns a base64 string for both Json and XFDF formats
     *
     * @returns Promise<string>
     */PdfViewer.prototype.exportAnnotationsAsBase64String=function(annotationDataFormat){var _this=this;if(this.annotationModule){return new Promise(function(resolve,reject){_this.viewerBase.createRequestForExportAnnotations(false,annotationDataFormat,true).then(function(value){resolve(value);});});}else{return null;}};/**
     * Perform to add annotations in the PDF Viewer
     *
     * @param annotation
     * @returns void
     */ // eslint-disable-next-line
PdfViewer.prototype.addAnnotation=function(annotation){if(this.viewerBase){this.viewerBase.addAnnotation(annotation);}};// eslint-disable-next-line
/**
     * Perform  action in the PDF Viewer
     * @returns void
     */ // eslint-disable-next-line
PdfViewer.prototype.importFormFields=function(formFields){if(this.formFieldsModule){this.viewerBase.importFormFields(formFields);}};/**
     * Perform imports form fields action in the PDF Viewer
     * @param  {any} importData - Specifies the imports data for form fields
     * @param  {string} formFieldDataFormat - Specifies the form fields data format for imports data
     * @returns void
     */ // eslint-disable-next-line
PdfViewer.prototype.importFormFieldsAsStream=function(importData,formFieldDataFormat){if(this.formFieldsModule){this.viewerBase.createRequestForImportingFormfields(importData,formFieldDataFormat);}};/**
     * Perform export action in the PDF Viewer
     *
     * @param path
     * @returns void
     */PdfViewer.prototype.exportFormFields=function(path){if(this.formFieldsModule){this.viewerBase.exportFormFields(path);}};/**
     * Perform export annotations action in the PDF Viewer
     *
     * @returns Promise<object>
     */PdfViewer.prototype.exportFormFieldsAsObject=function(){var _this=this;if(this.formFieldsModule){return new Promise(function(resolve,reject){_this.viewerBase.exportFormFieldsAsObject().then(function(value){resolve(value);});});}else{return null;}};/**
     * Perform export annotations action in the PDF Viewer
     * @param formFieldDataFormat - Specifies the form fields data format for exports data
     * @private
     * @returns Promise<object>
     */PdfViewer.prototype.exportFormFieldsAsStream=function(formFieldDataFormat){var _this=this;if(this.formFieldsModule){return new Promise(function(resolve,reject){_this.viewerBase.createRequestForExportFormfields(false,null,formFieldDataFormat).then(function(value){resolve(value);});});}else{return null;}};/**
     * reset all form fields data
     *
     * @returns void
     */PdfViewer.prototype.resetFormFields=function(){this.formFieldsModule.resetFormFields();};/**
     * Clears data from the form fields.
     * Parameter - Specifies the form field object.
     *
     * @param formField
     * @returns void
     */ // eslint-disable-next-line
PdfViewer.prototype.clearFormFields=function(formField){this.formFieldsModule.clearFormFields(formField);};/**
     * To delete the annotation Collections in the PDF Document.
     *
     * @returns void
     */PdfViewer.prototype.deleteAnnotations=function(){if(this.annotationModule){this.viewerBase.deleteAnnotations();}};/**
     * To retrieve the form fields in the PDF Document.
     *
     * @returns void
     */PdfViewer.prototype.retrieveFormFields=function(){return this.formFieldCollections;};/**
     * To update the form fields in the PDF Document.
     *
     * @param formFields
     * @returns void
     */ // eslint-disable-next-line
PdfViewer.prototype.updateFormFields=function(formFields){this.updateFormFieldsValue(formFields);this.formFieldsModule.updateFormFieldValues(formFields);};/**
     * @param JsonData
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAjaxRequestInitiate=function(JsonData){//this.trigger('ajaxRequestInitiate', eventArgs);
};/**
     * @param value
     * @param fieldName
     * @param id
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireButtonFieldClickEvent=function(value,fieldName,id){//this.trigger('buttonFieldClick', eventArgs);
};/**
     * @param name
     * @param field
     * @param cancel
     * @param name
     * @param field
     * @param cancel
     * @param isLeftClick - becomes true on signature panel left click
     * @private
     */PdfViewer.prototype.fireFormFieldClickEvent=function(name,field,cancel,isLeftClick){return __awaiter$1(this,void 0,void 0,function(){var eventArgs,promise;var _this=this;return __generator$1(this,function(_a){eventArgs={name:name,field:field,cancel:cancel};if(sf.base.isBlazor()){eventArgs.field.type=field.type;if(eventArgs.field.name==='signature'){eventArgs.field.signatureType=[SignatureType.Draw];}promise=this._dotnetInstance.invokeMethodAsync('Trigger','FormFieldClick',eventArgs);promise.then(function(value){if(field.type==='SignatureField'||field.type==='InitialField'){if(field.type==='InitialField')_this.viewerBase.isInitialField=true;else _this.viewerBase.isInitialField=false;var target=document.getElementById(field.id);target=target?target:document.getElementById(field.id+'_content_html_element')?document.getElementById(field.id+'_content_html_element').children[0].children[0]:null;if(!value.cancel&&target&&!target.disabled&&target.classList.contains('e-pdfviewer-signatureformfields')&&(isLeftClick||sf.base.isNullOrUndefined(isLeftClick))){_this.viewerBase.signatureModule.showSignatureDialog(true);}}});}return[2/*return*/];});});};/**
     * @param name - Get the name of the event.
     * @param field - Event arguments for the form field add event.
     * @param pageIndex - Get the page number.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldAddEvent=function(name,field,pageIndex){this.viewerBase.isFormFieldSelect=false;// this.trigger('formFieldAdd', eventArgs);
};/**
     * @param name - Get the name of the event.
     * @param field - Event arguments for the form field remove event.
     * @param pageIndex - Get the page number.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldRemoveEvent=function(name,field,pageIndex){//this.trigger('formFieldRemove', eventArgs);
};/**
     * @param name - Returns the event name.
     * @param field - Returns the double-clicked form field object.
     * @param cancel - If TRUE, property panel of the form field does not open. FALSE by default.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldDoubleClickEvent=function(eventArgs){// this.trigger('formFieldDoubleClick', eventArgs);
return eventArgs;};/**
     * @param name - Get the name of the event.
     * @param field - Event arguments for the form field properties change event.
     * @param pageIndex - Get the page number.
     * @param isAlignmentChanged - Specifies whether the text alignment of the form field is changed or not.
     * @param isBackgroundColorChanged - Specifies whether the background color of the form field is changed or not.
     * @param isBorderColorChanged - Specifies whether the border color of the form field is changed or not.
     * @param isBorderWidthChanged - Specifies whether the border width of the form field is changed or not.
     * @param isColorChanged - Specifies whether the font color of the form field is changed or not.
     * @param isFontFamilyChanged - Specifies whether the font family of the form field is changed or not.
     * @param isFontSizeChanged - Specifies whether the font size of the form field is changed or not.
     * @param isFontStyleChanged - Specifies whether the font style of the form field is changed or not.
     * @param isMaxLengthChanged - Specifies whether the max length of the form field is changed or not.
     * @param isPrintChanged - Specifies whether the print option of the form field is changed or not.
     * @param isReadOnlyChanged - Specifies the Read Only of Form field is changed or not.
     * @param isRequiredChanged - Specifies whether the is required option of the form field is changed or not.
     * @param isToolTipChanged - Specifies whether the tool tip property is changed or not.
     * @param isValueChanged - Specifies whether the form field value is changed or not.
     * @param isVisibilityChanged - Specifies whether the form field visibility is changed or not.
     * @param newValue - Specifies the new value of the form field.
     * @param oldValue - Specifies the old value of the form field.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldPropertiesChangeEvent=function(name,field,pageIndex,isValueChanged,isFontFamilyChanged,isFontSizeChanged,isFontStyleChanged,isColorChanged,isBackgroundColorChanged,isBorderColorChanged,isBorderWidthChanged,isAlignmentChanged,isReadOnlyChanged,isVisibilityChanged,isMaxLengthChanged,isRequiredChanged,isPrintChanged,isToolTipChanged,oldValue,newValue){// this.trigger('formFieldPropertiesChange', eventArgs);
};/**
     * @param name - Get the name of the event.
     * @param field - Event arguments for the form field mouse leave event.
     * @param pageIndex - Get the page number.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldMouseLeaveEvent=function(name,field,pageIndex){// this.trigger('formFieldMouseLeave', eventArgs);
};/**
     * @param name - Get the name of the event.
     * @param field - Event arguments for the form field mouse over event.
     * @param pageIndex - Get the page number.
     * @param pageX - Get the mouse over x position with respect to the page container.
     * @param pageY - Get the mouse over y position with respect to the page container.
     * @param X - Specifies the mouse over x position with respect to the viewer container.
     * @param Y - Specifies the mouse over y position with respect to the viewer container.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldMouseoverEvent=function(name,field,pageIndex,pageX,pageY,X,Y){// this.trigger('formFieldMouseover', eventArgs);
};/**
     * @param name - Get the name of the event.
     * @param field - Event arguments for the form field move event.
     * @param pageIndex - Get the page number.
     * @param previousPosition - Get the previous position of the form field in the page.
     * @param currentPosition - Current position of form field in the page.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldMoveEvent=function(name,field,pageIndex,previousPosition,currentPosition){//this.trigger('formFieldMove', eventArgs);
};/**
     * @param name - Get the name of the event.
     * @param field - Event arguments for the form field resize event.
     * @param pageIndex - Get the page number.
     * @param previousPosition - Get the previous position of the form field in the page.
     * @param currentPosition - Current position of form field in the page.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldResizeEvent=function(name,field,pageIndex,previousPosition,currentPosition){//this.trigger('formFieldResize', eventArgs);
};/**
     * @param name - Get the name of the event.
     * @param field - Event arguments for the form field select event.
     * @param pageIndex - Get the page number.
     * @param isProgrammaticSelection - Specifies whether the the form field is selected programmatically or by UI.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldSelectEvent=function(name,field,pageIndex,isProgrammaticSelection){//this.trigger('formFieldSelect', eventArgs);
};/**
     * @param name - Get the name of the event.
     * @param field - Event arguments for the form field unselect event.
     * @param pageIndex - Get the page number.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldUnselectEvent=function(name,field,pageIndex){//this.trigger('formFieldUnselect', eventArgs);
};/**
     * @param pageData
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireDocumentLoad=function(pageData){var eventArgs={name:'documentLoad',documentName:this.fileName,pageData:pageData};if(sf.base.isBlazor()){this._dotnetInstance.invokeMethodAsync('LoadDocument',null);this.viewerBase.blazorUIAdaptor.loadDocument();this._dotnetInstance.invokeMethodAsync('Trigger','DocumentLoaded',eventArgs);}};/**
     * @param fileName
     * @private
     */PdfViewer.prototype.fireDocumentUnload=function(fileName){var eventArgs={name:'documentUnload',documentName:fileName};this._dotnetInstance.invokeMethodAsync('Trigger','DocumentUnloaded',eventArgs);};/**
     * @param isPasswordRequired
     * @param password
     * @param isPasswordRequired
     * @param password
     * @private
     */PdfViewer.prototype.fireDocumentLoadFailed=function(isPasswordRequired,password){// eslint-disable-next-line max-len
var eventArgs={name:'documentLoadFailed',documentName:this.fileName,isPasswordRequired:isPasswordRequired,password:password};this._dotnetInstance.invokeMethodAsync('Trigger','DocumentLoadFailed',eventArgs);};/**
     * @param errorStatusCode
     * @param errorMessage
     * @param action
     * @param retryCount
     * @param errorStatusCode
     * @param errorMessage
     * @param action
     * @param retryCount
     * @param errorStatusCode
     * @param errorMessage
     * @param action
     * @param retryCount
     * @private
     */PdfViewer.prototype.fireAjaxRequestFailed=function(errorStatusCode,errorMessage,action,retryCount){// eslint-disable-next-line max-len
var eventArgs={name:'ajaxRequestFailed',documentName:this.fileName,errorStatusCode:errorStatusCode,errorMessage:errorMessage,action:action};if(retryCount){eventArgs.retryCount=true;}this._dotnetInstance.invokeMethodAsync('Trigger','AjaxRequestFailed',eventArgs);};/**
     * @action
     * @data
     * @private
     */PdfViewer.prototype.fireAjaxRequestSuccess=function(action,data){var eventArgs={name:'ajaxRequestSuccess',documentName:this.fileName,action:action,data:data,cancel:false};if(eventArgs.cancel){return true;}else{return false;}//this.trigger('ajaxRequestSuccess', eventArgs);
};/**
     * @param action
     * @private
     */PdfViewer.prototype.fireValidatedFailed=function(action){// eslint-disable-next-line
var eventArgs={};eventArgs.documentName=this.fileName;eventArgs.formFields=this.formFieldCollections;eventArgs.nonFillableFields=this.viewerBase.nonFillableFields;this._dotnetInstance.invokeMethodAsync('Trigger','ValidateFormFields',eventArgs);};/**
     * @param x
     * @param y
     * @param pageNumber
     * @private
     */PdfViewer.prototype.firePageClick=function(x,y,pageNumber){if(!Number.isNaN(pageNumber)){var eventArgs={name:'pageClick',documentName:this.fileName,x:x,y:y,pageNumber:pageNumber};this._dotnetInstance.invokeMethodAsync('Trigger','PageClick',eventArgs);}};/**
     * @param previousPageNumber
     * @private
     */PdfViewer.prototype.firePageChange=function(previousPageNumber){// eslint-disable-next-line max-len
var eventArgs={name:'pageChange',documentName:this.fileName,currentPageNumber:this.currentPageNumber,previousPageNumber:previousPageNumber};this._dotnetInstance.invokeMethodAsync('Trigger','PageChange',eventArgs);this.viewerBase.blazorUIAdaptor.pageChanged(this.currentPageNumber);};/**
     * @private
     */PdfViewer.prototype.fireZoomChange=function(){// eslint-disable-next-line max-len
var eventArgs={name:'zoomChange',zoomValue:Math.round(this.magnificationModule.zoomFactor*100),previousZoomValue:Math.round(this.magnificationModule.previousZoomFactor*100)};this._dotnetInstance.invokeMethodAsync('Trigger','ZoomChange',eventArgs);};/**
     * @param hyperlink
     * @param hyperlinkElement
     * @private
     */PdfViewer.prototype.fireHyperlinkClick=function(hyperlink,hyperlinkElement){return __awaiter$1(this,void 0,void 0,function(){var eventArgs;return __generator$1(this,function(_a){switch(_a.label){case 0:eventArgs={name:'hyperlinkClick',hyperlink:hyperlink,hyperlinkElement:hyperlinkElement,cancel:false};return[4/*yield*/,this._dotnetInstance.invokeMethodAsync('Trigger','HyperlinkClick',eventArgs)];case 1:eventArgs=_a.sent();if(eventArgs.hyperlinkElement.href!=eventArgs.hyperlink){hyperlinkElement.href=eventArgs.hyperlink;}if(eventArgs.cancel){return[2/*return*/,false];}else{return[2/*return*/,true];}return[2/*return*/];}});});};/**
     * @param hyperlinkElement
     * @private
     */PdfViewer.prototype.fireHyperlinkHover=function(hyperlinkElement){// eslint-disable-next-line max-len
var eventArgs={name:'hyperlinkMouseOver',hyperlinkElement:hyperlinkElement};this._dotnetInstance.invokeMethodAsync('Trigger','HyperlinkMouseOver',eventArgs);};/**
     * @param fieldName
     * @param value
     * @param fieldName
     * @param value
     * @private
     */PdfViewer.prototype.fireFocusOutFormField=function(fieldName,value){// eslint-disable-next-line max-len
// eslint-disable-next-line
//this.trigger('formFieldFocusOut', eventArgs);
};/**
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationAdd=function(pageNumber,index,type,bounds,settings,textMarkupContent,tmStartIndex,tmEndIndex,labelSettings,multiPageCollection,customStampName){var eventArgs={name:'annotationAdd',pageIndex:pageNumber,annotationId:index,annotationType:type,annotationBound:bounds,annotationSettings:settings};if(textMarkupContent){if(sf.base.isBlazor()){eventArgs.annotationSettings.textMarkupContent=textMarkupContent;eventArgs.annotationSettings.textMarkupStartIndex=tmStartIndex;eventArgs.annotationSettings.textMarkupEndIndex=tmEndIndex;}else{eventArgs.textMarkupContent=textMarkupContent;eventArgs.textMarkupStartIndex=tmStartIndex;eventArgs.textMarkupEndIndex=tmEndIndex;}}if(labelSettings){eventArgs.labelSettings=labelSettings;}if(multiPageCollection){eventArgs.multiplePageCollection=multiPageCollection;}if(type==='Image'){eventArgs.customStampName=customStampName;}this.viewerBase.isAnnotationSelect=false;this.viewerBase.blazorUIAdaptor.annotationAdd();this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationAdd',eventArgs);};/**
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param multiPageCollection
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationRemove=function(pageNumber,index,type,bounds,textMarkupContent,tmStartIndex,tmEndIndex,multiPageCollection){// eslint-disable-next-line max-len
var eventArgs={name:'annotationRemove',pageIndex:pageNumber,annotationId:index,annotationType:type,annotationBounds:bounds};if(textMarkupContent){eventArgs.textMarkupContent=textMarkupContent;eventArgs.textMarkupStartIndex=tmStartIndex;eventArgs.textMarkupEndIndex=tmEndIndex;}if(multiPageCollection){eventArgs.multiplePageCollection=multiPageCollection;}this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationRemove',eventArgs);};/**
     * @param value
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireBeforeAddFreeTextAnnotation=function(value){// eslint-disable-next-line max-len
// eslint-disable-next-line
//this.trigger('beforeAddFreeText', eventArgs);
};/**
     * @param id
     * @param text
     * @param annotation
     * @param id
     * @param text
     * @param annotation
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireCommentAdd=function(id,text,annotation){// eslint-disable-next-line max-len
// eslint-disable-next-line
//this.trigger('commentAdd', eventArgs);
};/**
     * @param id
     * @param text
     * @param annotation
     * @param id
     * @param text
     * @param annotation
     * @param id
     * @param text
     * @param annotation
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireCommentEdit=function(id,text,annotation){// eslint-disable-next-line max-len
// eslint-disable-next-line
// this.trigger('commentEdit', eventArgs);
};/**
     * @param id
     * @param text
     * @param annotation
     * @param id
     * @param text
     * @param annotation
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireCommentDelete=function(id,text,annotation){// eslint-disable-next-line max-len
// eslint-disable-next-line
// this.trigger('commentDelete', eventArgs);
};/**
     * @param id
     * @param text
     * @param annotation
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireCommentSelect=function(id,text,annotation){// eslint-disable-next-line max-len
// eslint-disable-next-line
// this.trigger('commentSelect', eventArgs);
};/**
     * @param id
     * @param text
     * @param annotation
     * @param statusChange
     * @param id
     * @param text
     * @param annotation
     * @param statusChange
     * @param id
     * @param text
     * @param annotation
     * @param statusChange
     * @param id
     * @param text
     * @param annotation
     * @param statusChange
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireCommentStatusChanged=function(id,text,annotation,statusChange){// eslint-disable-next-line max-len
// eslint-disable-next-line
// this.trigger('commentStatusChanged', eventArgs);
};/**
     * @param pageNumber
     * @param index
     * @param type
     * @param isColorChanged
     * @param isOpacityChanged
     * @param isTextChanged
     * @param isCommentsChanged
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param isColorChanged
     * @param isOpacityChanged
     * @param isTextChanged
     * @param isCommentsChanged
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param multiPageCollection
     * @private
     */ // eslint-disable-next-line max-len
// eslint-disable-next-line
PdfViewer.prototype.fireAnnotationPropertiesChange=function(pageNumber,index,type,isColorChanged,isOpacityChanged,isTextChanged,isCommentsChanged,textMarkupContent,tmStartIndex,tmEndIndex,multiPageCollection){// eslint-disable-next-line max-len
var eventArgs={name:'annotationPropertiesChange',pageIndex:pageNumber,annotationId:index,annotationType:type,isColorChanged:isColorChanged,isOpacityChanged:isOpacityChanged,isTextChanged:isTextChanged,isCommentsChanged:isCommentsChanged};if(textMarkupContent){eventArgs.textMarkupContent=textMarkupContent;eventArgs.textMarkupStartIndex=tmStartIndex;eventArgs.textMarkupEndIndex=tmEndIndex;}if(multiPageCollection){eventArgs.multiplePageCollection=multiPageCollection;}this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationPropertiesChange',eventArgs);};/**
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param data
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param data
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param data
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireSignatureAdd=function(pageNumber,index,type,bounds,opacity,strokeColor,thickness,data){var eventArgs={pageIndex:pageNumber,id:index,type:type,bounds:bounds,opacity:opacity};if(thickness){eventArgs.thickness=thickness;}if(strokeColor){eventArgs.strokeColor=strokeColor;}if(data){eventArgs.data=data;}this._dotnetInstance.invokeMethodAsync('Trigger','AddSignature',eventArgs);};/**
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireSignatureRemove=function(pageNumber,index,type,bounds){var eventArgs={pageIndex:pageNumber,id:index,type:type,bounds:bounds};this._dotnetInstance.invokeMethodAsync('Trigger','RemoveSignature',eventArgs);};/**
     * @param pageNumber
     * @param id
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param previousPosition
     * @param currentPosition
     * @param pageNumber
     * @param id
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param previousPosition
     * @param currentPosition
     * @param pageNumber
     * @param id
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param previousPosition
     * @param currentPosition
     * @param pageNumber
     * @param id
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param previousPosition
     * @param currentPosition
     * @param pageNumber
     * @param id
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param previousPosition
     * @param currentPosition
     * @param pageNumber
     * @param id
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param previousPosition
     * @param currentPosition
     * @param pageNumber
     * @param id
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param previousPosition
     * @param currentPosition
     * @param pageNumber
     * @param id
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param previousPosition
     * @param currentPosition
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireSignatureMove=function(pageNumber,id,type,opacity,strokeColor,thickness,previousPosition,currentPosition){var eventArgs={pageIndex:pageNumber,id:id,type:type,opacity:opacity,strokeColor:strokeColor,thickness:thickness,previousPosition:previousPosition,currentPosition:currentPosition};this._dotnetInstance.invokeMethodAsync('Trigger','MoveSignature',eventArgs);};/**
     * @param pageNumber
     * @param index
     * @param type
     * @param isStrokeColorChanged
     * @param isOpacityChanged
     * @param isThicknessChanged
     * @param oldProp
     * @param newProp
     * @param pageNumber
     * @param index
     * @param type
     * @param isStrokeColorChanged
     * @param isOpacityChanged
     * @param isThicknessChanged
     * @param oldProp
     * @param newProp
     * @param pageNumber
     * @param index
     * @param type
     * @param isStrokeColorChanged
     * @param isOpacityChanged
     * @param isThicknessChanged
     * @param oldProp
     * @param newProp
     * @param pageNumber
     * @param index
     * @param type
     * @param isStrokeColorChanged
     * @param isOpacityChanged
     * @param isThicknessChanged
     * @param oldProp
     * @param newProp
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireSignaturePropertiesChange=function(pageNumber,index,type,isStrokeColorChanged,isOpacityChanged,isThicknessChanged,oldProp,newProp){var eventArgs={pageIndex:pageNumber,id:index,type:type,isStrokeColorChanged:isStrokeColorChanged,isOpacityChanged:isOpacityChanged,isThicknessChanged:isThicknessChanged,oldValue:oldProp,newValue:newProp};this._dotnetInstance.invokeMethodAsync('Trigger','SignaturePropertiesChange',eventArgs);};/**
     * @param pageNumber
     * @param index
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param currentPosition
     * @param previousPosition
     * @param pageNumber
     * @param index
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param currentPosition
     * @param previousPosition
     * @param pageNumber
     * @param index
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param currentPosition
     * @param previousPosition
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireSignatureResize=function(pageNumber,index,type,opacity,strokeColor,thickness,currentPosition,previousPosition){var eventArgs={pageIndex:pageNumber,id:index,type:type,opacity:opacity,strokeColor:strokeColor,thickness:thickness,currentPosition:currentPosition,previousPosition:previousPosition};this._dotnetInstance.invokeMethodAsync('Trigger','ResizeSignature',eventArgs);};/**
     * @param id
     * @param pageNumber
     * @param signature
     * @param id
     * @param pageNumber
     * @param signature
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireSignatureSelect=function(id,pageNumber,signature){var eventArgs={id:id,pageIndex:pageNumber,signature:signature};this._dotnetInstance.invokeMethodAsync('Trigger','SignatureSelect',eventArgs);};/**
     * @param id
     * @param pageNumber
     * @param signature
     * @param id
     * @param pageNumber
     * @param signature
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireSignatureUnselect=function(id,pageNumber,signature){var eventArgs={id:id,pageIndex:pageNumber,signature:signature};this._dotnetInstance.invokeMethodAsync('Trigger','SignatureUnselected',eventArgs);};/**
     * @param id
     * @param pageNumber
     * @param annotation
     * @param annotationCollection
     * @param multiPageCollection
     * @param isSelected
     * @param annotationAddMode
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationSelect=function(id,pageNumber,annotation,annotationCollection,multiPageCollection,isSelected,annotationAddMode){// eslint-disable-next-line max-len
var eventArgs={name:'annotationSelect',annotationId:id,pageIndex:pageNumber,annotation:annotation};if(annotationCollection){// eslint-disable-next-line max-len
eventArgs={name:'annotationSelect',annotationId:id,pageIndex:pageNumber,annotation:annotation,annotationCollection:annotationCollection};}if(multiPageCollection){eventArgs.multiplePageCollection=multiPageCollection;}if(isSelected){eventArgs.isProgrammaticSelection=isSelected;}if(annotationAddMode){eventArgs.annotationAddMode=annotationAddMode;}if(annotation){if(annotation.type==='FreeText'){// eslint-disable-next-line
var fontStyle={isBold:false,isItalic:false,isStrikeout:false,isUnderline:false};if(annotation.fontStyle===1){fontStyle.isBold=true;}else if(annotation.fontStyle===2){fontStyle.isItalic=true;}else if(annotation.fontStyle===3){fontStyle.isStrikeout=true;}else if(annotation.fontStyle===4){fontStyle.isUnderline=true;}annotation.fontStyle=fontStyle;}this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationSelect',eventArgs);this.viewerBase.blazorUIAdaptor.annotationSelect(annotation.type);}};/**
     * @param id
     * @param pageNumber
     * @param annotation
     * @param id
     * @param pageNumber
     * @param annotation
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationUnSelect=function(id,pageNumber,annotation){if(sf.base.isBlazor()){var eventArgs_1={name:'annotationUnSelect',annotationId:id,pageIndex:pageNumber,annotation:annotation};for(var i=0;i<this.annotationCollection.length;i++){if(this.annotationCollection[i].annotationId==annotation.annotName){eventArgs_1.annotation=this.annotationCollection[i];}}this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationUnSelect',eventArgs_1);this.viewerBase.blazorUIAdaptor.annotationUnSelect();}// eslint-disable-next-line max-len
// this.trigger('annotationUnSelect', eventArgs);
};/**
     * @param id
     * @param pageNumber
     * @param annotation
     * @param id
     * @param pageNumber
     * @param annotation
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationDoubleClick=function(id,pageNumber,annotation){// eslint-disable-next-line max-len
var eventArgs={name:'annotationDblClick',annotationId:id,pageIndex:pageNumber,annotation:annotation};this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationDoubleClick',eventArgs);};/**
     * @param pageNumber
     * @private
     */PdfViewer.prototype.fireTextSelectionStart=function(pageNumber){this.isTextSelectionStarted=true;var eventArgs={pageIndex:pageNumber};this._dotnetInstance.invokeMethodAsync('Trigger','TextSelectionStart',eventArgs);};/**
     * @param pageNumber
     * @param text
     * @param bound
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireTextSelectionEnd=function(pageNumber,text,bound){if(this.isTextSelectionStarted){var eventArgs={pageIndex:pageNumber,textContent:text,textBounds:bound};this._dotnetInstance.invokeMethodAsync('Trigger','TextSelectionEnd',eventArgs);this.isTextSelectionStarted=false;}};/**
     * @param canvas
     * @param index
     * @private
     */PdfViewer.prototype.renderDrawing=function(canvas,index){if(sf.base.isNullOrUndefined(index)&&this.viewerBase.activeElements.activePageID&&!this.viewerBase.isPrint){index=this.viewerBase.activeElements.activePageID;}if(this.annotation){this.annotation.renderAnnotations(index,null,null,null,canvas);}else{this.formDesignerModule.updateCanvas(index,canvas);}};/**
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationResize=function(pageNumber,index,type,bounds,settings,textMarkupContent,tmStartIndex,tmEndIndex,labelSettings,multiPageCollection){var eventArgs={name:'annotationResize',pageIndex:pageNumber,annotationId:index,annotationType:type,annotationBound:bounds,annotationSettings:settings};if(textMarkupContent){eventArgs.textMarkupContent=textMarkupContent;eventArgs.textMarkupStartIndex=tmStartIndex;eventArgs.textMarkupEndIndex=tmEndIndex;}if(labelSettings){eventArgs.labelSettings=labelSettings;}if(multiPageCollection){eventArgs.multiplePageCollection=multiPageCollection;}this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationResize',eventArgs);};/**
     * @param pageNumber
     * @param id
     * @param type
     * @param annotationSettings
     * @param previousPosition
     * @param currentPosition
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationMoving=function(pageNumber,id,type,annotationSettings,previousPosition,currentPosition){//this.trigger('annotationMoving', eventArgs);
};/**
     * @param pageNumber
     * @param id
     * @param type
     * @param annotationSettings
     * @param previousPosition
     * @param currentPosition
     * @param pageNumber
     * @param id
     * @param type
     * @param annotationSettings
     * @param previousPosition
     * @param currentPosition
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationMove=function(pageNumber,id,type,annotationSettings,previousPosition,currentPosition){var eventArgs={name:'annotationMove',pageIndex:pageNumber,annotationId:id,annotationType:type,annotationSettings:annotationSettings,previousPosition:previousPosition,currentPosition:currentPosition};this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationMove',eventArgs);};/**
     * @param id
     * @param pageNumber
     * @param annotationType
     * @param bounds
     * @param annotation
     * @param currentPosition
     * @param mousePosition
     * @param id
     * @param pageNumber
     * @param annotationType
     * @param bounds
     * @param annotation
     * @param currentPosition
     * @param mousePosition
     * @param id
     * @param pageNumber
     * @param annotationType
     * @param bounds
     * @param annotation
     * @param currentPosition
     * @param mousePosition
     * @param id
     * @param pageNumber
     * @param annotationType
     * @param bounds
     * @param annotation
     * @param currentPosition
     * @param mousePosition
     * @param id
     * @param pageNumber
     * @param annotationType
     * @param bounds
     * @param annotation
     * @param currentPosition
     * @param mousePosition
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationMouseover=function(id,pageNumber,annotationType,bounds,annotation,currentPosition,mousePosition){var eventArgs={name:'annotationMouseover',annotationId:id,pageIndex:pageNumber,annotationType:annotationType,annotationBounds:bounds,annotation:annotation,pageX:currentPosition.left,pageY:currentPosition.top,X:mousePosition.left,Y:mousePosition.top};if(sf.base.isBlazor()){if(annotation.subject==='Perimeter calculation'){eventArgs.annotationType='Perimeter';}else if(annotation.subject==='Area calculation'){eventArgs.annotationType='Area';}else if(annotation.subject==='Volume calculation'){eventArgs.annotationType='Volume';}else if(annotation.subject==='Arrow'){eventArgs.annotationType='Arrow';}else if(annotation.subject==='Circle'){eventArgs.annotationType='Circle';}}this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationMouseOver',eventArgs);};/**
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationMouseLeave=function(pageNumber){//this.trigger('annotationMouseLeave', eventArgs);
};/**
     * @param pageX
     * @param pageY
     * @private
     */PdfViewer.prototype.firePageMouseover=function(pageX,pageY){var eventArgs={pageX:pageX,pageY:pageY};this._dotnetInstance.invokeMethodAsync('Trigger','PageMouseOver',eventArgs);};/**
     * @param fileName
     * @private
     */PdfViewer.prototype.fireDownloadStart=function(fileName){var eventArgs={fileName:fileName};this._dotnetInstance.invokeMethodAsync('Trigger','DownloadStart',eventArgs);};/**
     * @param fileName
     * @param downloadData
     * @private
     */PdfViewer.prototype.fireDownloadEnd=function(fileName,downloadData){var eventArgs={fileName:fileName,downloadDocument:downloadData};this._dotnetInstance.invokeMethodAsync('Trigger','DownloadEnd',eventArgs);};/**
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.firePrintStart=function(){return __awaiter$1(this,void 0,void 0,function(){var eventArgs,promise;var _this=this;return __generator$1(this,function(_a){eventArgs={fileName:this.downloadFileName,cancel:false};if(sf.base.isBlazor()){promise=this._dotnetInstance.invokeMethodAsync('Trigger','PrintStart',eventArgs);promise.then(function(value){if(!value.cancel){_this.printModule.print();}});}return[2/*return*/];});});};/**
     * @param eventName
     * @param args
     * @param eventName
     * @param args
     * @private
     */PdfViewer.prototype.triggerEvent=function(eventName,args){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(_a){/*let eventArgs: void | object = await this.trigger(eventName, args);
                if (isBlazor && typeof eventArgs === 'string') {
                    eventArgs = JSON.parse(eventArgs as string);
                }*/return[2/*return*/,null];});});};/**
     * @param fileName
     * @private
     */PdfViewer.prototype.firePrintEnd=function(fileName){var eventArgs={fileName:fileName};this._dotnetInstance.invokeMethodAsync('Trigger','PrintEnd',eventArgs);};/**
     * @param pageNumber
     * @private
     */PdfViewer.prototype.fireThumbnailClick=function(pageNumber){var eventArgs={name:'thumbnailClick',pageNumber:pageNumber};this._dotnetInstance.invokeMethodAsync('Trigger','ThumbnailClick',eventArgs);};/**
     * @param pageNumber
     * @param position
     * @param text
     * @param fileName
     * @param pageNumber
     * @param position
     * @param text
     * @param fileName
     * @param pageNumber
     * @param position
     * @param text
     * @param fileName
     * @private
     */PdfViewer.prototype.fireBookmarkClick=function(pageNumber,position,text,fileName){// eslint-disable-next-line
// this._dotnetInstance.invokeMethodAsync('Trigger', 'BookmarkClick', eventArgs);
};/**
     * @param importData
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireImportStart=function(importData){var eventArgs={name:'importAnnotationsStart',importData:importData,formFieldData:null};this._dotnetInstance.invokeMethodAsync('Trigger','ImportAnnotationsStart',eventArgs);};/**
     * @param exportData
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireExportStart=function(exportData){var eventArgs={name:'exportAnnotationsStart',exportData:exportData,formFieldData:null};this._dotnetInstance.invokeMethodAsync('Trigger','ExportAnnotationsStart',eventArgs);};/**
     * @param importData
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireImportSuccess=function(importData){var eventArgs={name:'importAnnotationsSuccess',importData:importData,formFieldData:null};this._dotnetInstance.invokeMethodAsync('Trigger','ImportAnnotationsSuccess',eventArgs);};/**
     * @param exportData
     * @param fileName
     * @param exportData
     * @param fileName
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireExportSuccess=function(exportData,fileName){var eventArgs={name:'exportAnnotationsSuccess',exportData:exportData,fileName:fileName,formFieldData:null};this._dotnetInstance.invokeMethodAsync('Trigger','ExportAnnotationsSuccess',eventArgs);};/**
     * @param data
     * @param errorDetails
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireImportFailed=function(data,errorDetails){// eslint-disable-next-line max-len
var eventArgs={name:'importAnnotationsFailed',importData:data,errorDetails:errorDetails,formFieldData:null};this._dotnetInstance.invokeMethodAsync('Trigger','ImportAnnotationsFailed',eventArgs);};/**
     * @param data
     * @param errorDetails
     * @param data
     * @param errorDetails
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireExportFailed=function(data,errorDetails){// eslint-disable-next-line max-len
var eventArgs={name:'exportAnnotationsFailed',exportData:data,errorDetails:errorDetails,formFieldData:null};this._dotnetInstance.invokeMethodAsync('Trigger','ExportAnnotationsFailed',eventArgs);};/**
     * @param data
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormImportStarted=function(data){// this.trigger('importStart', eventArgs);
};/**
     * @param data
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormExportStarted=function(data){// this.trigger('exportStart', eventArgs);
};/**
     * @param data
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormImportSuccess=function(data){// this.trigger('importSuccess', eventArgs);
};/**
     * @param data
     * @param fileName
     * @param data
     * @param fileName
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormExportSuccess=function(data,fileName){// this.trigger('exportSuccess', eventArgs);
};/**
     * @param data
     * @param errorDetails
     * @param data
     * @param errorDetails
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormImportFailed=function(data,errorDetails){// eslint-disable-next-line max-len
// this.trigger('importFailed', eventArgs);
};/**
     * @param data
     * @param errorDetails
     * @param data
     * @param errorDetails
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormExportFailed=function(data,errorDetails){// eslint-disable-next-line max-len
// this.trigger('exportFailed', eventArgs);
};/**
     * @param documentCollection
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireTextExtractionCompleted=function(documentCollection){var eventArgs={documentTextCollection:documentCollection};this._dotnetInstance.invokeMethodAsync('Trigger','ExtractTextCompleted',eventArgs);};/**
     * @param searchText
     * @param isMatchcase
     * @param searchText
     * @param isMatchcase
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireTextSearchStart=function(searchText,isMatchcase){// eslint-disable-next-line max-len
var eventArgs={name:'textSearchStart',searchText:searchText,matchCase:isMatchcase};this._dotnetInstance.invokeMethodAsync('Trigger','TextSearchStart',eventArgs);};/**
     * @param searchText
     * @param isMatchcase
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireTextSearchComplete=function(searchText,isMatchcase){// eslint-disable-next-line max-len
var eventArgs={name:'textSearchComplete',searchText:searchText,matchCase:isMatchcase};this._dotnetInstance.invokeMethodAsync('Trigger','TextSearchComplete',eventArgs);};/**
     * @param searchText
     * @param isMatchcase
     * @param bounds
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireTextSearchHighlight=function(searchText,isMatchcase,bounds,pageNumber){// eslint-disable-next-line max-len
var eventArgs={name:'textSearchHighlight',searchText:searchText,matchCase:isMatchcase,bounds:bounds,pageNumber:pageNumber};this._dotnetInstance.invokeMethodAsync('Trigger','TextSearchHighlight',eventArgs);};/**
     * @param bounds
     * @param commonStyle
     * @param cavas
     * @param index
     * @private
     */PdfViewer.prototype.renderAdornerLayer=function(bounds,commonStyle,cavas,index){renderAdornerLayer(bounds,commonStyle,cavas,index,this);};/**
     * @param index
     * @param currentSelector
     * @param index
     * @param currentSelector
     * @private
     */PdfViewer.prototype.renderSelector=function(index,currentSelector){this.drawing.renderSelector(index,currentSelector);};/**
     * @param objArray
     * @param currentSelector
     * @param multipleSelection
     * @param preventUpdate
     * @param objArray
     * @param currentSelector
     * @param multipleSelection
     * @param preventUpdate
     * @param objArray
     * @param currentSelector
     * @param multipleSelection
     * @param preventUpdate
     * @param objArray
     * @param currentSelector
     * @param multipleSelection
     * @param preventUpdate
     * @private
     */ // eslint-disable-next-line max-len
PdfViewer.prototype.select=function(objArray,currentSelector,multipleSelection,preventUpdate){// let allowServerDataBind: boolean = this.allowServerDataBinding;
this.enableServerDataBinding(false);if(this.annotationModule){var annotationSelect=this.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;// eslint-disable-next-line
var annotation=this.selectedItems.annotations[0];if(annotationSelect){// eslint-disable-next-line
var currentAnnot=this.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;this.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(annotationSelect,true);this.fireAnnotationUnSelect(currentAnnot.annotName,currentAnnot.pageNumber,currentAnnot);}if(!multipleSelection){if(this.viewerBase.activeElements&&this.viewerBase.activeElements.activePageID>=0){if(annotation){this.fireAnnotationUnSelect(annotation.annotName,annotation.pageIndex,annotation);}this.clearSelection(this.viewerBase.activeElements.activePageID);}}}if(this.formDesignerModule){var formField=this.selectedItems.formFields[0];if(formField){if(this.formDesignerModule&&formField&&formField.formFieldAnnotationType){var field={value:formField.value,fontFamily:formField.fontFamily,fontSize:formField.fontSize,fontStyle:formField.fontStyle,color:formField.color,backgroundColor:formField.backgroundColor,borderColor:formField.borderColor,thickness:formField.thickness,alignment:formField.alignment,isReadonly:formField.isReadonly,visibility:formField.visibility,maxLength:formField.maxLength,isRequired:formField.isRequired,isPrint:formField.isPrint,rotation:formField.rotateAngle,tooltip:formField.tooltip,options:formField.options,isChecked:formField.isChecked,isSelected:formField.isSelected};this.fireFormFieldUnselectEvent("formFieldUnselect",field,formField.pageIndex);}}}this.drawing.select(objArray,currentSelector,multipleSelection,preventUpdate);//  this.enableServerDataBinding(allowServerDataBind, true);
};/**
     * @param pageId
     * @private
     */PdfViewer.prototype.getPageTable=function(pageId){return this.drawing.getPageTable(pageId);};/**
     * @param diffX
     * @param diffY
     * @param pageIndex
     * @param currentSelector
     * @param helper
     * @param diffX
     * @param diffY
     * @param pageIndex
     * @param currentSelector
     * @param helper
     * @param diffX
     * @param diffY
     * @param pageIndex
     * @param currentSelector
     * @param helper
     * @private
     */ // eslint-disable-next-line max-len
PdfViewer.prototype.dragSelectedObjects=function(diffX,diffY,pageIndex,currentSelector,helper){return this.drawing.dragSelectedObjects(diffX,diffY,pageIndex,currentSelector,helper);};/**
     * @param sx
     * @param sy
     * @param pivot
     * @private
     */PdfViewer.prototype.scaleSelectedItems=function(sx,sy,pivot){return this.drawing.scaleSelectedItems(sx,sy,pivot);};/**
     * @param endPoint
     * @param obj
     * @param point
     * @param segment
     * @param target
     * @param targetPortId
     * @param currentSelector
     * @param endPoint
     * @param obj
     * @param point
     * @param segment
     * @param target
     * @param targetPortId
     * @param currentSelector
     * @param endPoint
     * @param obj
     * @param point
     * @param segment
     * @param target
     * @param targetPortId
     * @param currentSelector
     * @param endPoint
     * @param obj
     * @param point
     * @param segment
     * @param target
     * @param targetPortId
     * @param currentSelector
     * @private
     */ // eslint-disable-next-line max-len
PdfViewer.prototype.dragConnectorEnds=function(endPoint,obj,point,segment,target,targetPortId,currentSelector){return this.drawing.dragConnectorEnds(endPoint,obj,point,segment,target,null,currentSelector);};/**
     * @param pageId
     * @private
     */PdfViewer.prototype.clearSelection=function(pageId){// let allowServerDataBind: boolean = this.allowServerDataBinding;
this.enableServerDataBinding(false);var selectormodel=this.selectedItems;var node=selectormodel.annotations.length>0?this.selectedItems.annotations[0]:this.selectedItems.formFields[0];if(selectormodel.annotations.length>0){selectormodel.offsetX=0;selectormodel.offsetY=0;selectormodel.width=0;selectormodel.height=0;selectormodel.rotateAngle=0;selectormodel.annotations=[];selectormodel.wrapper=null;}else if(selectormodel.formFields.length>0){selectormodel.offsetX=0;selectormodel.offsetY=0;selectormodel.width=0;selectormodel.height=0;selectormodel.rotateAngle=0;selectormodel.formFields=[];selectormodel.wrapper=null;}this.drawing.clearSelectorLayer(pageId);this.viewerBase.isAnnotationSelect=false;this.viewerBase.isFormFieldSelect=false;//this.enableServerDataBinding(allowServerDataBind, true);
};/**
     * @param obj
     * @private
     */PdfViewer.prototype.add=function(obj){return this.drawing.add(obj);};/**
     * @param obj
     * @private
     */PdfViewer.prototype.remove=function(obj){return this.drawing.remove(obj);};/**
     * @private
     */PdfViewer.prototype.copy=function(){if(this.annotation)this.annotation.isShapeCopied=true;else if(this.formDesigner&&this.designerMode)this.formDesigner.isShapeCopied=true;return this.drawing.copy();};/**
     * @param angle
     * @param currentSelector
     * @param angle
     * @param currentSelector
     * @private
     */PdfViewer.prototype.rotate=function(angle,currentSelector){return this.drawing.rotate(this.selectedItems,angle,null,currentSelector);};/**
     * @param obj
     * @private
     */PdfViewer.prototype.paste=function(obj){var index;if(this.viewerBase.activeElements.activePageID){index=this.viewerBase.activeElements.activePageID;}return this.drawing.paste(obj,index||0);};/**
     * @private
     */PdfViewer.prototype.refresh=function(){for(var i=0;i<this.annotations.length;i++){if(this.zIndexTable.length!==undefined){for(var i_1=0;i_1<this.zIndexTable.length;i_1++){var objects=this.zIndexTable[i_1].objects;for(var j=0;j<objects.length;j++){objects.splice(j,1);}delete this.zIndexTable[i_1];}if(this.annotations[i]){delete this.annotations[i];}if(this.selectedItems.annotations&&this.selectedItems.annotations[i]){delete this.selectedItems.annotations[i];}this.zIndexTable=[];this.renderDrawing();}if(this.annotations&&this.annotations.length!==0){this.annotations.length=0;this.selectedItems.annotations.length=0;}}};/**
     * @private
     */PdfViewer.prototype.cut=function(){var index;if(this.viewerBase.activeElements.activePageID){index=this.viewerBase.activeElements.activePageID;}if(this.annotation)this.annotation.isShapeCopied=true;else if(this.formDesigner&&this.designerMode)this.formDesigner.isShapeCopied=true;return this.drawing.cut(index||0);};/**
     * @param actualObject
     * @param node
     * @private
     */PdfViewer.prototype.nodePropertyChange=function(actualObject,node){this.drawing.nodePropertyChange(actualObject,node);};/**
     * enableServerDataBinding method \
     *
     * @returns { void }  enableServerDataBinding method .\
     * @param {boolean} enable - provide the node value.
     *
     * @private
     */PdfViewer.prototype.enableServerDataBinding=function(enable,clearBulkChanges){if(clearBulkChanges===void 0){clearBulkChanges=false;}if(sf.base.isBlazor()){/* this.allowServerDataBinding = enable;
             if (clearBulkChanges) {
                 this.bulkChanges = {};
             }*/}};/**
     * @param tx
     * @param ty
     * @param pageIndex
     * @param nodeBounds
     * @param isStamp
     * @param isSkip
     * @param tx
     * @param ty
     * @param pageIndex
     * @param nodeBounds
     * @param isStamp
     * @param isSkip
     * @param tx
     * @param ty
     * @param pageIndex
     * @param nodeBounds
     * @param isStamp
     * @param isSkip
     * @private
     */ // eslint-disable-next-line max-len
PdfViewer.prototype.checkBoundaryConstraints=function(tx,ty,pageIndex,nodeBounds,isStamp,isSkip){return this.drawing.checkBoundaryConstraints(tx,ty,pageIndex,nodeBounds,isStamp,isSkip);};__decorate([sf.base.Event()],PdfViewer.prototype,"created",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"documentLoad",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"documentUnload",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"documentLoadFailed",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"ajaxRequestFailed",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"ajaxRequestSuccess",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"validateFormFields",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"pageClick",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"pageChange",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"hyperlinkClick",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"hyperlinkMouseOver",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"zoomChange",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationAdd",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationRemove",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationPropertiesChange",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationResize",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"addSignature",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"removeSignature",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"moveSignature",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"signaturePropertiesChange",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"resizeSignature",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"signatureSelect",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationSelect",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationUnSelect",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationDoubleClick",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationMove",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationMoving",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationMouseover",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationMouseLeave",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"pageMouseover",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"importStart",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"exportStart",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"importSuccess",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"exportSuccess",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"importFailed",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"exportFailed",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"extractTextCompleted",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"thumbnailClick",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"bookmarkClick",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"textSelectionStart",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"textSelectionEnd",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"downloadStart",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"buttonFieldClick",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldClick",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"downloadEnd",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"printStart",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"printEnd",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"textSearchStart",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"textSearchComplete",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"textSearchHighlight",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"ajaxRequestInitiate",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"commentAdd",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"commentEdit",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"commentDelete",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"commentSelect",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"commentStatusChanged",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"beforeAddFreeText",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldFocusOut",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldAdd",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldRemove",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldPropertiesChange",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldMouseLeave",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldMouseover",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldMove",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldResize",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldSelect",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldUnselect",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldDoubleClick",void 0);return PdfViewer;}();var __extends$1=undefined&&undefined.__extends||function(){var _extendStatics2=function extendStatics(d,b){_extendStatics2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return _extendStatics2(d,b);};return function(d,b){_extendStatics2(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();/**
 * The `PdfBounds` is base for annotation bounds.
 *
 * @hidden
 */var PdfBounds=/** @class */function(_super){__extends$1(PdfBounds,_super);function PdfBounds(){var _this=_super!==null&&_super.apply(this,arguments)||this;/**
         * Represents the the x value of the annotation.
         *
         * @default 0
         */ // @Property(0)
_this.x=0;/**
         * Represents the the y value of the annotation.
         *
         * @default 0
         */ // @Property(0)
_this.y=0;/**
         * Represents the the width value of the annotation.
         *
         * @default 0
         */ // @Property(0)
_this.width=0;/**
         * Represents the the height value of the annotation.
         *
         * @default 0
         */ // @Property(0)
_this.height=0;/**
         * Represents the the left value of the annotation.
         *
         * @default 0
         */ // @Property(0)
_this.left=0;/**
         * Represents the the top value of the annotation.
         *
         * @default 0
         */ // @Property(0)
_this.top=0;/**
         * Represents the the right value of the annotation.
         *
         * @default 0
         */ // @Property(0)
_this.right=0;/**
         * Represents the the bottom value of the annotation.
         *
         * @default 0
         */ // @Property(0)
_this.bottom=0;/**
         * Sets the reference point, that will act as the offset values(offsetX, offsetY) of a node
         *
         * @default new Point(0,0)
         */ // @Complex<PointModel>({ x: 0, y: 0 }, Point)
_this.location={x:0,y:0};/**
         * Sets the size of the annotation
         *
         * @default new Size(0, 0)
         */ // @Complex<Size>(new Size(0, 0), Size)
_this.size=new sf.drawings.Size(0,0);return _this;}return PdfBounds;}(sf.base.ChildProperty);/**
 * The `PdfFont` is base for annotation Text styles.
 *
 * @hidden
 */var PdfFont=/** @class */function(){function PdfFont(){/**
         * Represents the the font Bold style of annotation text content.
         *
         * @default 'false'
         */ // @Property(false)
this.isBold=false;/**
         * Represents the the font Italic style of annotation text content.
         *
         * @default 'false'
         */ // @Property(false)
this.isItalic=false;/**
         * Represents the the font Underline style of annotation text content.
         *
         * @default 'false'
         */ // @Property(false)
this.isUnderline=false;/**
         * Represents the the font Strikeout style of annotation text content.
         *
         * @default 'false'
         */ // @Property(false)
this.isStrikeout=false;}return PdfFont;}();/**
 * The `PdfAnnotationSelector` is base for annotation selector settings.
 *
 * @hidden
 */var PdfAnnotationSelector=/** @class */function(){function PdfAnnotationSelector(){/**
         * Specifies the selection border color.
         *
         * @default ''
         */this.selectionBorderColor='';/**
         * Specifies the border color of the resizer.
         *
         * @default 'black'
         */this.resizerBorderColor='black';/**
         * Specifies the fill color of the resizer.
         *
         * @default '#FF4081'
         */this.resizerFillColor='#FF4081';/**
         * Specifies the size of the resizer.
         *
         * @default 8
         */this.resizerSize=8;/**
         * Specifies the thickness of the border of selection.
         *
         * @default 1
         */this.selectionBorderThickness=1;/**
         * Specifies the shape of the resizer.
         *
         * @default "Square"
         */this.resizerShape="Square";/**
         * Specifies the border dash array of the selection.
         *
         * @default []
         */this.selectorLineDashArray=[];/**
         * specifies the cursor type of resizer
         *
         * @default null
         */this.resizerCursorType=null;}return PdfAnnotationSelector;}();/**
 * Defines the common behavior of PdfAnnotationBase
 *
 * @hidden
 */var PdfAnnotationBase=/** @class */function(){function PdfAnnotationBase(){/**
         * Represents the unique id of annotation
         *
         * @default ''
         */ // @Property('')
this.id='';/**
         * Represents the annotation type of the pdf
         *
         * @default 'Rectangle'
         */ // @Property('Rectangle')
this.shapeAnnotationType='Rectangle';/**
         * Represents the annotation type of the form field
         *
         * @default ''
         */ // @Property(null)
this.formFieldAnnotationType=null;/**
         * Represents the measure type of the annotation
         *
         * @default ''
         */ // @Property('')
this.measureType='';/**
         * Represents the auther value of the annotation
         *
         * @default ''
         */ // @Property('')
this.author='';/**
         * Represents the modified date of the annotation
         *
         * @default ''
         */ // @Property('')
this.modifiedDate='';/**
         * Represents the subject of the annotation
         *
         * @default ''
         */ // @Property('')
this.subject='';/**
         * Represents the notes of the annotation
         *
         * @default ''
         */ // @Property('')
this.notes='';/**
         * specifies the locked action of the comment
         *
         * @default 'false'
         */ // @Property(false)
this.isCommentLock=false;/**
         * Represents the stroke color of the annotation
         *
         * @default 'black'
         */ // @Property('black')
this.strokeColor='black';/**
         * Represents the fill color of the annotation
         *
         * @default 'tranparent'
         */ // @Property('#ffffff00')
this.fillColor='#ffffff00';/**
         * Represents the fill color of the annotation
         *
         * @default 'tranparent'
         */ // @Property('#ffffff00')
this.stampFillColor='#ffffff00';/**
         * Represents the stroke color of the annotation
         *
         * @default 'black'
         */ // @Property('black')
this.stampStrokeColor='black';/**
         * Represents the path data of the annotation
         *
         * @default ''
         */ // @Property('')
this.data='';/**
         * Represents the opecity value of the annotation
         *
         * @default 1
         */ // @Property(1)
this.opacity=1;/**
         * Represents the thickness value of annotation
         *
         * @default 1
         */ // @Property(1)
this.thickness=1;/**
         * Represents the border style of annotation
         *
         * @default ''
         */ // @Property('')
this.borderStyle='';/**
         * Represents the border dash array of annotation
         *
         * @default ''
         */ // @Property('')
this.borderDashArray='';/**
         * Represents the rotate angle of annotation
         *
         * @default 0
         */ // @Property(0)
this.rotateAngle=0;/**
         * Represents the annotation as cloud shape
         *
         * @default false
         */ // @Property(false)
this.isCloudShape=false;/**
         * Represents the cloud intensity
         *
         * @default 0
         */ // @Property(0)
this.cloudIntensity=0;/**
         * Represents the height of the leader of distance shapes
         *
         * @default 40
         */ // @Property(40)
this.leaderHeight=40;/**
         * Represents the line start shape style
         *
         * @default null
         */ // @Property(null)
this.lineHeadStart=null;/**
         * Represents the line end shape style
         *
         * @default null
         */ // @Property(null)
this.lineHeadEnd=null;/**
         * Represents vertex points in the line annotation or shape annotation.
         *
         * @default []
         */ // @Property([])
this.vertexPoints=[];/**
         * Represents vertex points in the line annotation or shape annotation.
         *
         * @default null
         */ // @Property(null)
this.sourcePoint=null;/**
         * Represents vertex points in the line annotation or shape annotation.
         *
         * @default None
         */ // @Property('None')
this.sourceDecoraterShapes='None';/**
         * Represents vertex points in the line annotation or shape annotation.
         *
         * @default None
         */ // @Property('None')
this.taregetDecoraterShapes='None';/**
         * Represents vertex points in the line annotation or shape annotation.
         *
         * @default null
         */ // @Property(null)
this.targetPoint=null;/**
         * Represents vertex points in the line annotation or shape annotation.
         *
         * @default []
         */ // @Property([])
this.segments=[];/**
         * Represents bounds of the annotation
         *
         * @default new Point(0,0)
         */ // @Complex<PdfBoundsModel>({ x: 0, y: 0 }, PdfBounds)
this.bounds={x:0,y:0};/**
         * Represents the cloud intensity
         *
         * @default 0
         */ // @Property(0)
this.pageIndex=0;/**
         * Represents the cloud intensity
         *
         * @default -1
         */ // @Property(-1)
this.zIndex=-1;/**
         * Represents the cloud intensity
         *
         * @default null
         */ // @Property(null)
this.wrapper=null;/**
         * Represents the dynamic stamp
         *
         * @default false
         */ // @Property(false)
this.isDynamicStamp=false;/**
         * Represents the dynamic text.
         *
         * @default ''
         */ // @Property('')
this.dynamicText='';/**
         * Represents the unique annotName of the annotation
         *
         * @default ''
         */ // @Property('')
this.annotName='';/**
         * Represents the comments collection of the annotation
         *
         * @default []
         */ // @Property([])
this.comments=[];/**
         * Represents the comments collection of the annotation
         *
         * @default '#000'
         */ // @Property('#000')
this.fontColor='#000';/**
         * Represents the font size of the annotation content
         *
         * @default '16'
         */ // @Property(16)
this.fontSize=16;/**
         * Represents the font family of the annotation content
         *
         * @default 'Helvetica'
         */ // @Property('Helvetica')
this.fontFamily='Helvetica';/**
         * Represents the font style of the annotation content
         *
         * @default 'None'
         */ // @Property('None')
this.fontStyle='None';/**
         * Represents the shape annotation label add flag
         *
         * @default 'false'
         */ // @Property(false)
this.enableShapeLabel=false;/**
         * Represents the shape annotation label content
         *
         * @default 'label'
         */ // @Property('label')
this.labelContent='label';/**
         * Represents the shape annotation label content fill color
         *
         * @default '#ffffff00'
         */ // @Property('#ffffff00')
this.labelFillColor='#ffffff00';/**
         * Represents the shape annotation label content max-length
         *
         * @default '15'
         */ // @Property(15)
this.labelMaxLength=15;/**
         * Represents the opecity value of the annotation
         *
         * @default 1
         */ // @Property(1)
this.labelOpacity=1;/**
         * Represents the selection settings of the annotation
         *
         * @default ''
         */ // @Property('')
this.annotationSelectorSettings=new PdfAnnotationSelector();/**
         * Represents the shape annotation label content border color
         *
         * @default '#ffffff00'
         */ // @Property('#ffffff00')
this.labelBorderColor='#ffffff00';/**
         * Represents the text anlignment style of annotation
         *
         * @default 'left'
         */ // @Property('left')
this.textAlign='left';/**
         * Represents the unique Name of the annotation
         *
         * @default ''
         */ // @Property('')
this.signatureName='';/**
         * specifies the minHeight of the annotation.
         *
         * @default 0
         */ // @Property(0)
this.minHeight=0;/**
         * specifies the minWidth of the annotation.
         *
         * @default 0
         */ // @Property(0)
this.minWidth=0;/**
         * specifies the minHeight of the annotation.
         *
         * @default 0
         */ // @Property(0)
this.maxHeight=0;/**
         * specifies the maxWidth of the annotation.
         *
         * @default 0
         */ // @Property(0)
this.maxWidth=0;/**
         * specifies the locked action of the annotation.
         *
         * @default 'false'
         */ // @Property(false)
this.isLock=false;/**
         * specifies the particular annotation mode.
         *
         * @default 'UI Drawn Annotation'
         */ // @Property('UI Drawn Annotation')
this.annotationAddMode='UI Drawn Annotation';/**
         * specifies the previous font size  of the annotation.
         *
         * @default '16'
         */ // @Property(16)
this.previousFontSize=16;/**
         * Represents the text style of annotation
         *
         * @default ''
         */ // @Complex<PdfFontModel>({ isBold: false, isItalic: false, isStrikeout: false, isUnderline: false }, PdfFont)
this.font=new PdfFont();/**
         * Represents the shape annotation label content bounds
         *
         * @default ''
         */ // @Complex<PdfBoundsModel>({ x: 0, y: 0 }, PdfBounds)
this.labelBounds={x:0,y:0};/**
         * specifies the custom data of the annotation.
         */ // @Property(16)(null)
this.customData=null;/**
         * specifies whether the annotations are included or not in print actions.
         */ // @Property(16)(true)
this.isPrint=true;/**
         * Allows to edit the free text annotation
         */ // @Property(16)(false)
this.isReadonly=false;}return PdfAnnotationBase;}();/**
 * Defines the common behavior of PdfFormFieldBase
 *
 * @hidden
 */var PdfFormFieldBase=/** @class */function(){// eslint-disable-next-line @typescript-eslint/no-explicit-any
function PdfFormFieldBase(parent,propName,defaultValue,isArray){/**
         * Represents the unique id of formField
         *
         * @default ''
         */ // @Property(16)('')
this.id='';/**
         * specifies the type of the signature.
         */ // @Property(16)('')
this.signatureType='';/**
         * Represents the name of the formField
         *
         * @default ''
         */ // @Property(16)('')
this.name='';/**
         * Represents the value of the formField
         *
         * @default ''
         */ // @Property(16)('')
this.value='';/**
         * Represents the annotation type of the form field
         *
         * @default ''
         */ // @Property(16)(null)
this.formFieldAnnotationType=null;/**
         * Represents the fill color of the form field
         *
         * @default '#daeaf7ff'
         */ // @Property(16)('#daeaf7ff')
this.backgroundColor='#daeaf7ff';/**
         * Represents the text color of the form field
         *
         * @default 'black'
         */ // @Property(16)('black')
this.color='black';/**
         * Represents the border color of the form field
         *
         * @default '#303030'
         */ // @Property(16)('#303030')
this.borderColor='#303030';/**
         * Represents the tooltip of the form field
         *
         * @default ''
         */ // @Property(16)('')
this.tooltip='';/**
         * Represents the opecity value of the formField
         *
         * @default 1
         */ // @Property(16)(1)
this.opacity=1;/**
         * Represents the thickness value of FormField
         *
         * @default 1
         */ // @Property(16)(1)
this.thickness=1;/**
         * Represents the rotate angle of formField
         *
         * @default 0
         */ // @Property(16)(0)
this.rotateAngle=0;/**
         * Represents bounds of the formField
         *
         * @default new Point(0,0)
         */ // @Complex<PdfBoundsModel>({ x: 0, y: 0 }, PdfBounds)
this.bounds={x:0,y:0};/**
         * Represents the cloud intensity
         *
         * @default 0
         */ // @Property(16)(0)
this.pageIndex=0;/**
         * Represents the page number
         *
         * @default 1
         */ // @Property(16)(1)
this.pageNumber=1;/**
         * Represents the cloud intensity
         *
         * @default -1
         */ // @Property(16)(-1)
this.zIndex=-1;/**
         * Represents the cloud intensity
         *
         * @default null
         */ // @Property(16)(null)
this.wrapper=null;/**
         * Represents the font size of the formField content
         *
         * @default 16
         */ // @Property(16)(16)
this.fontSize=16;/**
         * Represents the font family of the formField content
         *
         * @default 'Helvetica'
         */ // @Property(16)('Helvetica')
this.fontFamily='Helvetica';/**
         * Represents the font style of the formField content
         *
         * @default 'None'
         */ // @Property(16)('None')
this.fontStyle='None';/**
         * Represents the text anlignment style of formField
         *
         * @default 'left'
         */ // @Property('left')
this.alignment='left';/**
         * specifies the minHeight of the formField.
         *
         * @default 0
         */ // @Property(0)
this.minHeight=0;/**
         * specifies the minWidth of the formField.
         *
         * @default 0
         */ // @Property(0)
this.minWidth=0;/**
         * specifies the minHeight of the formField.
         *
         * @default 0
         */ // @Property(0)
this.maxHeight=0;/**
         * specifies the maxWidth of the formField.
         *
         * @default 0
         */ // @Property(0)
this.maxWidth=0;/**
         * specifies the maxLength of the textbox/password.
         *
         * @default 0
         */ // @Property(0)
this.maxLength=0;/**
         * If it is set as Hidden, Html element will be hide in the UI. By default it is visible.
         */ // @Property('visible')
this.visibility='visible';/**
         * specifies whether the form field are included or not in print actions.
         */ // @Property(true)
this.isPrint=true;/**
         * Allows to edit the form Field text.
         */ // @Property(false)
this.isReadonly=false;/**
         * Enable or disable the checkbox state.
         */ // @Property(false)
this.isChecked=false;/**
         * Enable or disable the RadioButton state.
         */ // @Property(false)
this.isSelected=false;/**
         * Specify whether an form field element is mandatory.
         */ // @Property(false)
this.isRequired=false;/**
         * Enable or disable the Multiline Textbox.
         */ //@Property(false)
this.isMultiline=false;/**
         * Represents the text style of annotation
         *
         * @default ''
         */ // @Complex<PdfFontModel>({ isBold: false, isItalic: false, isStrikeout: false, isUnderline: false }, PdfFont)
this.font=new PdfFont();// super(parent, propName, defaultValue, isArray);
}return PdfFormFieldBase;}();/**
 * @hidden
 */var ZOrderPageTable=/** @class */function(){function ZOrderPageTable(){this.pageIdTemp=0;this.zIndexTemp=-1;this.childNodesTemp=[];this.objects=[];this.zIndexTemp=-1;this.pageIdTemp=0;}Object.defineProperty(ZOrderPageTable.prototype,"pageId",{/** @private */get:function get(){return this.pageIdTemp;},/** @private */set:function set(offset){this.pageIdTemp=offset;},enumerable:true,configurable:true});Object.defineProperty(ZOrderPageTable.prototype,"zIndex",{/** @private */get:function get(){return this.zIndexTemp;},/** @private */set:function set(offset){this.zIndexTemp=offset;},enumerable:true,configurable:true});Object.defineProperty(ZOrderPageTable.prototype,"objects",{/** @private */get:function get(){return this.childNodesTemp;},/** @private */set:function set(childNodes){this.childNodesTemp=childNodes;},enumerable:true,configurable:true});return ZOrderPageTable;}();/**
 * Defines the size and position of selected items and defines the appearance of selector
 *
 * @hidden
 */var Selector=/** @class */function(){function Selector(){/**
         * Defines the size and position of the container
         *
         * @default null
         */this.wrapper=null;/**
         * Defines the collection of selected nodes
         */ // @Collection<PdfAnnotationBaseModel>([], PdfAnnotationBase)
this.annotations=[];/**
         * Defines the collection of selected form Fields
         */ // @Collection<PdfFormFieldBaseModel>([], PdfFormFieldBase)
this.formFields=[];/**
         * Sets the rotate angle of the container
         *
         * @default 0
         */ //@Property(0)
this.rotateAngle=0;/**
         * Sets the positionX of the container
         *
         * @default 0
         */ //@Property(0)
this.offsetX=0;/**
         * Sets the positionY of the container
         *
         * @default 0
         */ //@Property(0)
this.offsetY=0;/**
         * Sets the pivot of the selector
         *
         * @default { x: 0.5, y: 0.5 }
         */ //@Complex<PointModel>({ x: 0.5, y: 0.5 }, Point)
//public pivot: PointModel;
this.pivot={x:0.5,y:0.5};}/**
     * Initializes the UI of the container
     *
     * @param  {any} diagram - diagram element.
     * @returns {Container} - Returns the container element.
     */ // eslint-disable-next-line
Selector.prototype.init=function(diagram){var container=new sf.drawings.Container();container.measureChildren=false;container.children=[];if(this.formFields&&this.formFields.length>0){for(var i=0;i<this.formFields.length;i++){var node=diagram.pdfViewer.nameTable[this.formFields[i].id];var wrapper=node.wrapper;container.children.push(wrapper);}}else if(this.annotations){for(var i=0;i<this.annotations.length;i++){if(!sf.base.isNullOrUndefined(this.annotations[i])){var node=diagram.pdfViewer.nameTable[this.annotations[i].id];var wrapper=node.wrapper;container.children.push(wrapper);}}}this.wrapper=container;return container;};return Selector;}();/**
 * @param {PdfAnnotationBaseModel} obj - Specified the shape annotation object.
 * @hidden
 * @returns {void}
 */function isLineShapes(obj){if(obj.shapeAnnotationType==='Line'||obj.shapeAnnotationType==='LineWidthArrowHead'||obj.shapeAnnotationType==='Distance'||obj.shapeAnnotationType==='Polygon'){return true;}return false;}/**
 * @param {PdfAnnotationBaseModel | PdfFormFieldBaseModel} obj - Specified the annotation or form fields object.
 * @param {DrawingElement} element - Specified the annotation drawing element.
 * @returns {void}
 * @hidden
 */function setElementStype(obj,element){if(obj&&element){if(obj.formFieldAnnotationType){if(obj.id.indexOf('diagram_helper')!==-1){element.style.fill='transparent';element.style.strokeWidth=1;element.style.strokeDashArray=obj.borderDashArray;}else{element.style.fill='transparent';element.style.strokeWidth=0;}}else{var fillColor=obj.fillColor==='#ffffff00'?'transparent':obj.fillColor;element.style.fill=fillColor?fillColor:'white';// eslint-disable-next-line max-len
element.style.strokeColor=obj.strokeColor?obj.strokeColor:obj.borderColor;// eslint-disable-next-line max-len
element.style.color=obj.strokeColor?obj.strokeColor:obj.borderColor;element.style.strokeWidth=obj.thickness;if(obj.shapeAnnotationType==='Image'||obj.shapeAnnotationType==='SignatureText'||obj.shapeAnnotationType==='SignatureImage'){element.style.strokeWidth=0;}element.style.strokeDashArray=obj.borderDashArray;element.style.opacity=obj.opacity;}}}/**
 * @param {PointModel[]} points - Specified the annotation points value.
 * @hidden
 * @returns {number} - Returns the points length.
 */function findPointsLength(points){var length=0;for(var i=0;i<points.length-1;i++){length+=sf.drawings.Point.findLength(points[i],points[i+1]);}return length;}/**
 * @param {PointModel[]} points - Specified the annotation points value.
 * @hidden
 * @returns {number} - Returns the points length.
 */ /**
 * @private
 * @param {DrawingElement} element - Specified the drawing element.
 * @param {Transforms} transform - Specified the transform value.
 * @returns {BaseAttributes} - Returns the base attributes value.
 */function getBaseShapeAttributes(element,transform){var baseShapeAttributes={width:element.actualSize.width,height:element.actualSize.height,x:element.offsetX-element.actualSize.width*element.pivot.x+0.5,y:element.offsetY-element.actualSize.height*element.pivot.y+0.5,angle:element.rotateAngle+element.parentTransform,fill:element.style.fill,stroke:element.style.strokeColor,pivotX:element.pivot.x,pivotY:element.pivot.y,strokeWidth:1,opacity:element.style.opacity,dashArray:element.style.strokeDashArray||'',visible:element.visible,id:element.id};if(transform){baseShapeAttributes.x+=transform.tx;baseShapeAttributes.y+=transform.ty;}return baseShapeAttributes;}/**
 * Get function
 *
 * @private
 * @param {Function | string} value - Type of the function.
 * @returns {Function} - Returns the function.
 */function getFunction(value){if(value!==undefined){if(typeof value==='string'){value=sf.base.getValue(value,window);}}return value;}/**
 * @private
 * @param {any} obj - Specified the annotation object.
 * @param {Function | string} additionalProp - Specified the annotation additional properties.
 * @param {string} key - Specified the annotation key value.
 * @returns {Object} - Returns the cloned object.
 */ // eslint-disable-next-line
function cloneObject(obj,additionalProp,key){// eslint-disable-next-line
var newObject={};var keys='properties';var prop='propName';if(obj){key=obj[prop];var sourceObject=obj[keys]||obj;var properties=[];properties=properties.concat(Object.keys(sourceObject));var customProperties=[];properties.push('version');if(key){var propAdditional=getFunction(additionalProp);if(propAdditional){customProperties=propAdditional(key);}else{customProperties=[];}properties=properties.concat(customProperties);}var internalProp=getInternalProperties(key);properties=properties.concat(internalProp);for(var _i=0,properties_1=properties;_i<properties_1.length;_i++){var property=properties_1[_i];if(property!=='historyManager'){if(property!=='wrapper'){// eslint-disable-next-line
var isEventEmmitter=obj[property]&&obj.hasOwnProperty('observers')?true:false;if(!isEventEmmitter){if(obj[property]instanceof Array){newObject[property]=cloneArray(internalProp.indexOf(property)===-1&&obj[keys]?obj[keys][property]:obj[property],additionalProp,property);}else if(obj[property]instanceof Array===false&&obj[property]instanceof HTMLElement){newObject[property]=obj[property].cloneNode(true).innerHtml;}else if(obj[property]instanceof Array===false&&obj[property]instanceof Object){newObject[property]=cloneObject(internalProp.indexOf(property)===-1&&obj[keys]?obj[keys][property]:obj[property]);}else{newObject[property]=obj[property];}}}else{if(obj[property]){newObject[property]={actualSize:{width:obj[property].actualSize.width,height:obj[property].actualSize.height},offsetX:obj[property].offsetX,offsetY:obj[property].offsetY};}}}}}return newObject;}/**
 * @private
 * @param {Object[]} sourceArray - Specified the annotation source collections.
 * @param {Function | string} additionalProp - Specified the annotation additional properties.
 * @param {string} key - Specified the annotation key value.
 * @returns {Object[]} - Returns the cloned object array.
 */function cloneArray(sourceArray,additionalProp,key){var clonedArray;if(sourceArray){clonedArray=[];for(var i=0;i<sourceArray.length;i++){if(sourceArray[i]instanceof Array){clonedArray.push(sourceArray[i]);}else if(sourceArray[i]instanceof Object){clonedArray.push(cloneObject(sourceArray[i],additionalProp,key));}else{clonedArray.push(sourceArray[i]);}}}return clonedArray;}/**
 * @private
 * @param {string} propName - Specified the annotation property name.
 * @returns {string[]} - Returns the internal properties.
 */function getInternalProperties(propName){switch(propName){case'nodes':case'children':return['inEdges','outEdges','parentId','processId','nodeId','umlIndex','isPhase','isLane'];case'connectors':return['parentId'];case'annotation':return['nodeId'];case'annotations':return['nodeId'];case'shape':return['hasHeader'];}return[];}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {string} position - Specified the annotation position.
 * @hidden
 * @returns {Leader} - Returns the leader value.
 */function isLeader(obj,position){var rotatedPoint;if(obj.shapeAnnotationType==='Distance'){var leaderCount=0;var newPoint1=void 0;for(var i=0;i<obj.wrapper.children.length;i++){var angle=sf.drawings.Point.findAngle(obj.sourcePoint,obj.targetPoint);// eslint-disable-next-line
var segment=obj.wrapper.children[i];if(segment.id.indexOf('leader')>-1){var center=obj.wrapper.children[0].bounds.center;if(leaderCount===0){newPoint1={x:obj.sourcePoint.x,y:obj.sourcePoint.y-obj.leaderHeight};center=obj.sourcePoint;}else{newPoint1={x:obj.targetPoint.x,y:obj.targetPoint.y-obj.leaderHeight};center=obj.targetPoint;}var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,angle,center.x,center.y);rotatedPoint=sf.drawings.transformPointByMatrix(matrix,{x:newPoint1.x,y:newPoint1.y});if(position==='Leader'+leaderCount){return{leader:'leader'+leaderCount,point:rotatedPoint};}leaderCount++;}}}return{leader:'',point:rotatedPoint};}/**
 * @private
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {PointModel[]} points - Specified the annotation points.
 * @returns {PointModel[]} - Returns the annotation points model array.
 */function getConnectorPoints(obj,points){points=obj.vertexPoints;var newPoints=points.slice(0);if(newPoints&&newPoints.length>0){obj.sourcePoint=newPoints[0];obj.targetPoint=newPoints[newPoints.length-1];}return newPoints;}/**
 * @private
 * @param {PdfAnnotationBaseModel} connector - Specified the annotation connector model.
 * @param {PointModel[]} points - Specified the annotation points.
 * @returns {string} - Returns the annotation path value.
 */function getSegmentPath(connector,points){var path='';var getPt;var pts=[];var j=0;while(j<points.length){pts.push({x:points[j].x,y:points[j].y});j++;}pts=clipDecorators(connector,pts);for(var k=0;k<pts.length;k++){getPt=pts[k];if(k===0){path='M'+getPt.x+' '+getPt.y;}if(k>0){path+=' '+'L'+getPt.x+' '+getPt.y;}}return path;}/**
 * @private
 * @param {PdfAnnotationBaseModel} connector - Specified the annotation connector model.
 * @param {PointModel[]} points - Specified the annotation points.
 * @param {PathElement} element - Specified the annotation element.
 * @returns {PathElement} - Returns the annotation path element.
 */function updateSegmentElement(connector,points,element){var bounds=new sf.drawings.Rect();var segmentPath=getSegmentPath(connector,points);bounds=sf.drawings.Rect.toBounds(points);element.width=bounds.width;element.height=bounds.height;element.offsetX=bounds.x+element.width/2;element.offsetY=bounds.y+element.height/2;element.data=segmentPath;if(connector.wrapper){connector.wrapper.offsetX=element.offsetX;connector.wrapper.offsetY=element.offsetY;connector.wrapper.width=bounds.width;connector.wrapper.height=bounds.height;}return element;}/**
 * @private
 * @param {PdfAnnotationBaseModel} connector - Specified the annotation connector model.
 * @param {PathElement} segmentElement - Specified the annotation segment element.
 * @returns {PathElement} - Returns the annotation path element.
 */function getSegmentElement(connector,segmentElement){var points=[];points=getConnectorPoints(connector);segmentElement.staticSize=true;segmentElement=updateSegmentElement(connector,points,segmentElement);setElementStype(connector,segmentElement);return segmentElement;}/**
 * @private
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {DrawingElement} element - Specified the annotation drawing element.
 * @param {PointModel} pt - Specified the annotation point.
 * @param {PointModel} adjacentPoint - Specified the annotation adjacent point.
 * @param {boolean} isSource - Specified the is source value or not.
 * @returns {void}
 */function updateDecoratorElement(obj,element,pt,adjacentPoint,isSource){element.offsetX=pt.x;element.offsetY=pt.y;var angle=sf.drawings.Point.findAngle(pt,adjacentPoint);var thickness=obj.thickness<=5?5:obj.thickness;var getPath=getDecoratorShape(isSource?obj.sourceDecoraterShapes:obj.taregetDecoraterShapes);var size=new sf.drawings.Size(thickness*2,thickness*2);element.transform=sf.drawings.RotateTransform.Self;setElementStype(obj,element);element.style.fill=obj.fillColor!=='tranparent'?obj.fillColor:'white';element.rotateAngle=angle;element.data=getPath;element.canMeasurePath=true;element.width=size.width;element.height=size.height;if(obj.sourceDecoraterShapes==='Butt'){element.width=size.width-10;element.height=size.height+10;}}/**
 * @private
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {PointModel} offsetPoint - Specified the annotation offset point.
 * @param {PointModel} adjacentPoint - Specified the annotation adjacent point.
 * @param {boolean} isSource - Specified the is source value or not.
 * @returns {PathElement} - Returns the annotation path element.
 */function getDecoratorElement(obj,offsetPoint,adjacentPoint,isSource){var decEle=new sf.drawings.PathElement();updateDecoratorElement(obj,decEle,offsetPoint,adjacentPoint,isSource);return decEle;}/**
 * @private
 * @param {PdfAnnotationBaseModel} connector - Specified the annotation object.
 * @param {PointModel[]} pts - Specified the annotation point model array.
 * @returns {PointModel[]} - Returns the annotation point model array.
 */function clipDecorators(connector,pts){pts[0]=clipDecorator(connector,pts,true);pts[pts.length-1]=clipDecorator(connector,pts,false);return pts;}/**
 * @private
 * @param {PdfAnnotationBaseModel} connector - Specified the annotation connector object.
 * @param {PointModel[]} points - Specified the annotation offset point.
 * @param {boolean} isSource - Specified the is source value or not.
 * @returns {PointModel} - Returns the annotation point model.
 */function clipDecorator(connector,points,isSource){var point={x:0,y:0};var start={x:0,y:0};var end={x:0,y:0};var length=points.length;start=!isSource?points[length-1]:points[0];end=!isSource?points[length-2]:points[1];var len=sf.drawings.Point.distancePoints(start,end);len=len===0?1:len;var width=connector.thickness;point.x=Math.round(start.x+width*(end.x-start.x)/len);point.y=Math.round(start.y+width*(end.y-start.y)/len);var strokeWidth=1;point=sf.drawings.Point.adjustPoint(point,end,true,strokeWidth/2);return point;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {PointModel[]} points - Specified the annotation point model array.
 * @param {MeasureAnnotation} measure - Specified the measure annotation object.
 * @param {PdfViewer} pdfviewer - Specified the pdfviewer element.
 * @hidden
 * @returns {TextElement[]} - Returns the text element collections.
 */ // eslint-disable-next-line max-len
function initDistanceLabel(obj,points,measure,pdfviewer){var labels=[];var angle=sf.drawings.Point.findAngle(points[0],points[1]);var textele=textElement(obj,angle);if(!pdfviewer.enableImportAnnotationMeasurement&&obj.notes&&obj.notes!==''){textele.content=obj.notes;}else{textele.content=measure.setConversion(findPointsLength([points[0],points[1]])*measure.pixelToPointFactor,obj);}textele.rotateValue={y:-10,angle:angle};if(obj.enableShapeLabel===true){textele.style.strokeColor=obj.labelBorderColor;textele.style.fill=obj.labelFillColor;textele.style.fontSize=obj.fontSize;textele.style.color=obj.fontColor;textele.style.fontFamily=obj.fontFamily;}labels.push(textele);return labels;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {PointModel[]} points - Specified the annotation point model array.
 * @param {MeasureAnnotation} measure - Specified the measure annotation object.
 * @hidden
 * @returns {string} - Returns the distance value.
 */function updateDistanceLabel(obj,points,measure){var distance;for(var i=0;i<obj.wrapper.children.length;i++){var textElement_1=obj.wrapper.children[i];if(textElement_1&&!sf.base.isNullOrUndefined(textElement_1.content)){distance=measure.setConversion(findPointsLength([points[0],points[1]])*measure.pixelToPointFactor,obj);textElement_1.content=distance;textElement_1.childNodes[0].text=textElement_1.content;textElement_1.refreshTextElement();}}return distance;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {MeasureAnnotation} measure - Specified the measure annotation object.
 * @hidden
 * @returns {string} - Returns the radius label value.
 */function updateRadiusLabel(obj,measure){var radius;for(var i=0;i<obj.wrapper.children.length;i++){var textElement_2=obj.wrapper.children[i];if(textElement_2&&!sf.base.isNullOrUndefined(textElement_2.content)){radius=measure.setConversion(obj.bounds.width/2*measure.pixelToPointFactor,obj);textElement_2.content=radius;if(textElement_2.childNodes.length===2){textElement_2.childNodes[0].text=radius;textElement_2.childNodes.splice(textElement_2.childNodes.length-1,1);}else{textElement_2.childNodes[0].text=radius;}textElement_2.refreshTextElement();}}return radius;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {PointModel[]} points - Specified the annotation point model array.
 * @param {MeasureAnnotation} measure - Specified the measure annotation object.
 * @param {PdfViewer} pdfviewer - Specified the pdfviewer element.
 * @hidden
 * @returns {TextElement[]} - Returns the text element collections.
 */ // eslint-disable-next-line max-len
function initPerimeterLabel(obj,points,measure,pdfviewer){var labels=[];var angle=sf.drawings.Point.findAngle(points[0],points[1]);var textele=textElement(obj,angle);if(!pdfviewer.enableImportAnnotationMeasurement&&obj.notes&&obj.notes!==''){textele.content=obj.notes;}else{textele.content=measure.calculatePerimeter(obj);}if(obj.enableShapeLabel===true){textele.style.strokeColor=obj.labelBorderColor;textele.style.fill=obj.labelFillColor;textele.style.fontSize=obj.fontSize;textele.style.color=obj.fontColor;textele.style.fontFamily=obj.fontFamily;}textele.rotateValue={y:-10,angle:angle};labels.push(textele);return labels;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {PointModel[]} points - Specified the annotation point model array.
 * @param {MeasureAnnotation} measure - Specified the measure annotation object.
 * @hidden
 * @returns {string} - Returns the perimeter label value.
 */function updatePerimeterLabel(obj,points,measure){var perimeter;for(var i=0;i<obj.wrapper.children.length;i++){var textElement_3=obj.wrapper.children[i];if(textElement_3&&!sf.base.isNullOrUndefined(textElement_3.content)){perimeter=measure.calculatePerimeter(obj);textElement_3.content=perimeter;textElement_3.childNodes[0].text=textElement_3.content;textElement_3.refreshTextElement();}}return perimeter;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @hidden
 * @returns {void}
 */ /**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @hidden
 * @returns {void}
 */function updateCalibrateLabel(obj){if(obj.wrapper&&obj.wrapper.children){for(var i=0;i<obj.wrapper.children.length;i++){var textElement_5=obj.wrapper.children[i];if(textElement_5&&!sf.base.isNullOrUndefined(textElement_5.content)){textElement_5.content=obj.notes;textElement_5.childNodes[0].text=textElement_5.content;textElement_5.refreshTextElement();}}}}/**
 * Used to find the path for polygon shapes
 *
 * @param {PointModel[]} collection - Specified the polygon annotaion points collection.
 * @hidden
 * @returns {string} - Returns the polygon annotation path.
 */function getPolygonPath(collection){var path='';var seg;path='M'+collection[0].x+' '+collection[0].y;var i;for(i=1;i<collection.length;i++){seg=collection[i];path+='L'+seg.x+' '+seg.y;}path+='Z';return path;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {number} angle - Specified the annotaion rotation angle.
 * @hidden
 * @returns {TextElement} - Returns the annotation text element.
 */function textElement(obj,angle){var textele=new sf.drawings.TextElement();setElementStype(obj,textele);textele.style.fill='transparent';textele.id=sf.drawings.randomId();textele.horizontalAlignment='Center';textele.rotateValue={y:10,angle:angle};textele.verticalAlignment='Top';textele.relativeMode='Object';textele.setOffsetWithRespectToBounds(.5,.5,'Absolute');// eslint-disable-next-line
textele.style.textWrapping='NoWrap';return textele;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {PointModel[]} points - Specified the annotaion leader points.
 * @hidden
 * @returns {PathElement[]} - Returns the annotation path elements.
 */function initLeaders(obj,points){var leaders=[];var leader=initLeader(obj,points[0],points[1]);leaders.push(leader);leader=initLeader(obj,points[1],points[0],true);leaders.push(leader);return leaders;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {PointModel} point1 - Specified the annotaion leader point1.
 * @param {PointModel} point2 - Specified the annotaion leader point2.
 * @param {boolean} isSecondLeader - Specified the is second leader or not.
 * @hidden
 * @returns {PathElement} - Returns the annotation path element.
 */function initLeader(obj,point1,point2,isSecondLeader){var element=new sf.drawings.PathElement();element.offsetX=point1.x;element.offsetY=point1.y;var angle=sf.drawings.Point.findAngle(point1,point2);var center={x:(point1.x+point2.x)/2,y:(point1.y+point2.y)/2};var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,0-angle,center.x,center.y);var rotatedPoint=sf.drawings.transformPointByMatrix(matrix,point1);var newPoint1={x:rotatedPoint.x,y:rotatedPoint.y-obj.leaderHeight};matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,angle,element.offsetX,element.offsetY);rotatedPoint=sf.drawings.transformPointByMatrix(matrix,newPoint1);var finalPoint={x:point1.x,y:point1.y};element.offsetX=finalPoint.x;element.offsetY=finalPoint.y;element.transform=sf.drawings.RotateTransform.Self;var getPath='M'+point1.x+','+point1.y+',L'+rotatedPoint.x+','+rotatedPoint.y+'Z';var size=new sf.drawings.Size(0,obj.leaderHeight);element.pivot.x=.5;if(isSecondLeader){element.id='leader2_'+sf.drawings.randomId();element.pivot.y=0;}else{element.id='leader1_'+sf.drawings.randomId();element.pivot.y=1;}setElementStype(obj,element);element.rotateAngle=angle;element.data=getPath;element.canMeasurePath=true;element.width=size.width;element.height=size.height;return element;}/**
 * @private
 * @param {PdfAnnotationBaseModel} connector - Specified the annotation connector object.
 * @param {PointModel} reference - Specified the pointer reference value.
 * @returns {boolean} - Returns true or false.
 */function isPointOverConnector(connector,reference){var vertexPoints=connector.vertexPoints;for(var i=0;i<vertexPoints.length-1;i++){var start=vertexPoints[i];var end=vertexPoints[i+1];var rect=sf.drawings.Rect.toBounds([start,end]);rect.Inflate(10);if(rect.containsPoint(reference)){var intersectinPt=findNearestPoint(reference,start,end);var segment1={x1:start.x,x2:end.x,y1:start.y,y2:end.y};var segment2={x1:reference.x,x2:intersectinPt.x,y1:reference.y,y2:intersectinPt.y};var intersectDetails=sf.drawings.intersect3(segment1,segment2);if(intersectDetails.enabled){var distance=sf.drawings.Point.findLength(reference,intersectDetails.intersectPt);if(Math.abs(distance)<10){return true;}}else{var rect_1=sf.drawings.Rect.toBounds([reference,reference]);rect_1.Inflate(3);if(rect_1.containsPoint(start)||rect_1.containsPoint(end)){return true;}}if(sf.drawings.Point.equals(reference,intersectinPt)){return true;}}}return false;}/**
 * @param {PointModel} reference - Specified the pointer reference value.
 * @param {PointModel} start - Specified the pointer start value.
 * @param {PointModel} end - Specified the pointer end value.
 * @private
 * @returns {PointModel} - Returns annotation point model.
 */function findNearestPoint(reference,start,end){var shortestPoint;var shortest=sf.drawings.Point.findLength(start,reference);var shortest1=sf.drawings.Point.findLength(end,reference);if(shortest>shortest1){shortestPoint=end;}else{shortestPoint=start;}var angleBWStAndEnd=sf.drawings.Point.findAngle(start,end);var angleBWStAndRef=sf.drawings.Point.findAngle(shortestPoint,reference);var r=sf.drawings.Point.findLength(shortestPoint,reference);var vaAngle=angleBWStAndRef+(angleBWStAndEnd-angleBWStAndRef)*2;return{x:shortestPoint.x+r*Math.cos(vaAngle*Math.PI/180),y:shortestPoint.y+r*Math.sin(vaAngle*Math.PI/180)};}/**
 * @param {DecoratorShapes} shape - Specified the annotation decorator shapes.
 * @hidden
 * @returns {string} - Returns the annotation decorator shape value.
 */function getDecoratorShape(shape){// eslint-disable-next-line
return decoratorShapes[shape];}var decoratorShapes={'OpenArrow':'M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z','Square':'M0,0 L10,0 L10,10 L0,10 z','Fletch':'M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z','OpenFetch':'M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5'+'c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z '+'M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0'+'c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z','IndentedArrow':'M17,10c0,0-4.5,5.5,0,12L5,16L17,10z','OutdentedArrow':'M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z','DoubleArrow':'M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z','Arrow':'M15,10 L15,22 L5,16Z','Diamond':'M12,23l-7-7l7-7l6.9,7L12,23z','Circle':'M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z','Butt':'M0,0 L0,90'};var __extends$2=undefined&&undefined.__extends||function(){var _extendStatics3=function extendStatics(d,b){_extendStatics3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return _extendStatics3(d,b);};return function(d,b){_extendStatics3(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();/**
 * HTMLElement defines the basic html elements
 */var DiagramHtmlElement=/** @class */function(_super){__extends$2(DiagramHtmlElement,_super);/**
     * set the id for each element
     *
     * @param {string} nodeTemplate - Set the id for each element.
     * @returns {void}
     *
     * @private
     */function DiagramHtmlElement(nodeTemplate){var _this=_super.call(this)||this;_this.templateFn=_this.templateCompiler(nodeTemplate);return _this;}DiagramHtmlElement.prototype.templateCompiler=function(template){if(template){// eslint-disable-next-line @typescript-eslint/no-unused-vars
try{if(document.querySelectorAll(template).length){return sf.base.compile(document.querySelector(template).innerHTML.trim());}}catch(e){return sf.base.compile(template);}}return undefined;};/**
     * getNodeTemplate method \
     *
     * @returns { Function } getNodeTemplate method .\
     *
     * @private
     */DiagramHtmlElement.prototype.getNodeTemplate=function(){return this.templateFn;};return DiagramHtmlElement;}(sf.drawings.DrawingElement);/**
 * Renderer module is used to render basic diagram elements
 *
 * @hidden
 */var Drawing=/** @class */function(){function Drawing(viewer){this.isDynamicStamps=false;this.pdfViewer=viewer;this.renderer=new sf.drawings.DrawingRenderer('this.pdfViewer.dataId',false);this.svgRenderer=new sf.drawings.SvgRenderer();}/**
     * @private
     * @param {PdfViewer} viewer - Specified the pdfViewer element.
     * @returns {void}
     */Drawing.prototype.renderLabels=function(viewer){var annotations=viewer.annotations;if(annotations){for(var i=0;i<annotations.length;i++){var annotation=annotations[i];this.initObject(annotation);}}};Drawing.prototype.createNewZindexTable=function(pageId){var zIndexTable=new ZOrderPageTable();this.pdfViewer.zIndex++;zIndexTable.pageId=this.pdfViewer.zIndex;this.pdfViewer.zIndexTable.push(zIndexTable);return zIndexTable;};/**
     * @private
     * @param {number} pageId - Specified the page Id.
     * @returns {ZOrderPageTable} - Returns the ZOrder page table.
     */Drawing.prototype.getPageTable=function(pageId){var zIndexTable;if(this.pdfViewer.zIndexTable.length!==undefined){var notFound=true;for(var i=0;i<this.pdfViewer.zIndexTable.length;i++){if(this.pdfViewer.zIndexTable[i].pageId===pageId){notFound=false;zIndexTable=this.pdfViewer.zIndexTable[i];break;}}if(notFound){zIndexTable=this.createNewZindexTable(pageId);zIndexTable.pageId=pageId;}}else{zIndexTable=this.createNewZindexTable(pageId);}return zIndexTable;};/**
     * @private
     * @param {number} index - Specified the page index value.
     * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
     * @returns {void}
     */Drawing.prototype.setZIndex=function(index,obj){if(obj.pageIndex!==undefined){var pageTable=this.getPageTable(obj.pageIndex);if(obj.zIndex===-1){pageTable.zIndex++;obj.zIndex=pageTable.zIndex;pageTable.objects.push(obj);}else{var index_1=obj.zIndex;var tabelLength=pageTable.objects.length;obj.zIndex=tabelLength++;pageTable.objects.push(obj);}}};/**
     * @private
     * @param {PdfAnnotationBaseModel | PdfFormFieldBaseModel} obj - Specified the annotation object.
     * @returns {PdfAnnotationBaseModel | PdfFormFieldBaseModel} - Returns the annotaion or form fields model.
     */Drawing.prototype.initObject=function(obj){//Move the common properties like zindex and id to an abstract class
this.setZIndex(this.pdfViewer.zIndex,obj);sf.drawings.createMeasureElements();if(!isLineShapes(obj)){this.initNode(obj);}else{this.initLine(obj);obj.wrapper.measure(new sf.drawings.Size(undefined,undefined));obj.wrapper.arrange(obj.wrapper.desiredSize);}if(obj.wrapper===null){//Init default wrapper
}// eslint-disable-next-line @typescript-eslint/no-explicit-any
this.pdfViewer.nameTable[obj.id]=obj;if(obj.formFieldAnnotationType){this.nodePropertyChange(obj,{bounds:{width:obj.bounds.width,height:obj.bounds.height}});}//Add some methodologies to add the children of group to name table
return obj;};Drawing.prototype.initNode=function(obj){var canvas=this.initContainer(obj);var content;if(!canvas.children){canvas.children=[];}if(!content){content=this.init(obj,canvas);}//canvas.children.push(content);
canvas.rotateAngle=obj.rotateAngle;// eslint-disable-next-line max-len
canvas.measure(new sf.drawings.Size(obj.wrapper.width,obj.wrapper.height));canvas.arrange(canvas.desiredSize);if(this.isDynamicStamps){this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(obj,null,'dynamicStamp');this.isDynamicStamps=false;}};/**
     * Allows to initialize the UI of a node
     */ /**
     * @private
     * @param {PdfAnnotationBaseModel | PdfFormFieldBaseModel} obj - Specified the annotation object.
     * @param {Container} canvas - Specified the canvas element.
     * @returns {DrawingElement} - Returns the drawing element.
     */Drawing.prototype.init=function(obj,canvas){var content;content=new sf.drawings.DrawingElement();var pathContent;var basicElement;var isStamp=false;// eslint-disable-next-line
var annotationSettings=this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.findAnnotationSettings(obj):{};var annotationMaxHeight=0;var annotationMaxWidth=0;var annotationMinHeight=0;var annotationMinWidth=0;if(annotationSettings.minWidth||annotationSettings.maxWidth||annotationSettings.minHeight||annotationSettings.maxHeight){annotationMaxHeight=annotationSettings.maxHeight?annotationSettings.maxHeight:2000;annotationMaxWidth=annotationSettings.maxWidth?annotationSettings.maxWidth:2000;annotationMinHeight=annotationSettings.minHeight?annotationSettings.minHeight:0;annotationMinWidth=annotationSettings.minWidth?annotationSettings.minWidth:0;}var isAnnotationSet=false;if(annotationMinHeight||annotationMinWidth||annotationMaxHeight||annotationMaxWidth){isAnnotationSet=true;}if(obj.formFieldAnnotationType){content=this.initFormFields(obj,content,canvas);}else{// eslint-disable-next-line max-len
content=this.initAnnotationObject(obj,pathContent,content,canvas,isStamp,basicElement,isAnnotationSet,annotationMaxHeight,annotationMaxWidth,annotationMinWidth,annotationMinHeight);}content.id=obj.id+'_content';content.relativeMode='Object';if(obj.shapeAnnotationType!=='Stamp'){if(obj.bounds.width!==undefined){content.width=obj.bounds.width;if(isAnnotationSet){if(content.width<annotationMinWidth||content.width>annotationMaxWidth){if(content.width<annotationMinWidth){content.width=annotationMinWidth;}if(content.width>annotationMaxWidth){content.width=annotationMaxWidth;}}}}content.horizontalAlignment='Stretch';if(obj.bounds.height!==undefined){content.height=obj.bounds.height;if(isAnnotationSet){if(content.height<annotationMinHeight||content.width>annotationMaxHeight){if(content.height<annotationMinHeight){content.height=annotationMinHeight;}if(content.height>annotationMaxHeight){content.height=annotationMaxHeight;}}}}setElementStype(obj,content);if(this.pdfViewer.viewerBase.drawSignatureWithTool&&obj.shapeAnnotationType==='SignatureText'){content.style.strokeWidth=0;}}content.isRectElement=true;content.verticalAlignment='Stretch';return content;};Drawing.prototype.initFormFields=function(obj,content,canvas){switch(obj.formFieldAnnotationType){case'Textbox':case'PasswordField':case'Checkbox':case'RadioButton':case'DropdownList':case'ListBox':case'SignatureField':case'InitialField':// eslint-disable-next-line
var htmlContent=new DiagramHtmlElement();content=htmlContent;content.rotateAngle=this.pdfViewer.formFieldsModule.getAngle(obj.pageIndex);content.id=obj.id+'_content';canvas.children.push(content);break;}return content;};// eslint-disable-next-line
Drawing.prototype.initAnnotationObject=function(obj,pathContent,content,canvas,isStamp,basicElement,isAnnotationSet,annotationMaxHeight,annotationMaxWidth,annotationMinWidth,annotationMinHeight){switch(obj.shapeAnnotationType){case'Ellipse':pathContent=new sf.drawings.PathElement();pathContent.data='M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5'+'C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z';content=pathContent;canvas.children.push(content);if(obj.enableShapeLabel){var textLabel=this.textElement(obj);textLabel.content=obj.labelContent;textLabel.style.color=obj.fontColor;textLabel.style.strokeColor=obj.labelBorderColor;textLabel.style.fill=obj.labelFillColor;textLabel.style.fontSize=obj.fontSize;textLabel.style.fontFamily=obj.fontFamily;textLabel.style.opacity=obj.labelOpacity;textLabel.style.textWrapping='NoWrap';canvas.children.push(textLabel);}break;case'Path':pathContent=new sf.drawings.PathElement();pathContent.data=obj.data;content=pathContent;canvas.children.push(content);break;case'HandWrittenSignature':case'Ink':pathContent=new sf.drawings.PathElement();pathContent.data=obj.data;pathContent.style.strokeColor=obj.strokeColor;pathContent.style.strokeWidth=obj.thickness;pathContent.style.opacity=obj.opacity;content=pathContent;canvas.children.push(content);break;case'Polygon':pathContent=new sf.drawings.PathElement();pathContent.data=getPolygonPath(obj.vertexPoints);content=pathContent;canvas.children.push(content);break;case'Stamp':isStamp=true;this.isDynamicStamps=true;if(obj&&obj.annotationAddMode&&(obj.annotationAddMode==='Existing Annotation'||obj.annotationAddMode==='Imported Annotation'||obj.id==='diagram_helper')){obj.bounds.width=obj.bounds.width-20;obj.bounds.height=obj.bounds.height-20;}if(obj.isDynamicStamp){canvas.horizontalAlignment='Left';basicElement=new sf.drawings.DrawingElement();content=basicElement;content.cornerRadius=10;content.style.fill=obj.stampFillColor;content.style.strokeColor=obj.stampStrokeColor;canvas.children.push(content);var textele_1=this.textElement(obj);textele_1=new sf.drawings.TextElement();textele_1.style.fontFamily='Helvetica';textele_1.style.fontSize=14;textele_1.style.italic=true;textele_1.style.bold=true;textele_1.style.color=obj.fillColor;textele_1.rotateValue=undefined;textele_1.content=obj.dynamicText;textele_1.relativeMode='Point';textele_1.margin.left=10;textele_1.margin.bottom=-7;textele_1.setOffsetWithRespectToBounds(0,0.57,null);textele_1.relativeMode='Point';if(obj.annotationAddMode==='Existing Annotation'||obj.annotationAddMode==='Imported Annotation'){textele_1.style.fontSize=this.fontSizeCalculation(obj,textele_1,obj.bounds.width-20);}if(obj.id!="diagram_helper"){canvas.children.push(textele_1);}// eslint-disable-next-line
var pathContent1=new sf.drawings.PathElement();pathContent1.id=sf.drawings.randomId()+'_stamp';pathContent1.data=obj.data;pathContent1.width=obj.bounds.width;if(isAnnotationSet&&obj.bounds.width>annotationMaxWidth){pathContent1.width=annotationMaxWidth;obj.bounds.width=annotationMaxWidth;}pathContent1.height=obj.bounds.height/2;if(isAnnotationSet&&obj.bounds.height>annotationMaxHeight){pathContent1.height=annotationMaxHeight/2;obj.bounds.height=annotationMaxHeight/2;}pathContent1.rotateValue=undefined;pathContent1.margin.left=10;pathContent1.margin.bottom=-5;pathContent1.relativeMode='Point';pathContent1.setOffsetWithRespectToBounds(0,0.1,null);// eslint-disable-next-line
var content1=pathContent1;pathContent1.style.fill=obj.fillColor;pathContent1.style.strokeColor=obj.strokeColor;pathContent1.style.opacity=obj.opacity;content.width=obj.bounds.width+20;content.height=obj.bounds.height+20;content.style.opacity=obj.opacity;canvas.children.push(content1);}else{canvas.horizontalAlignment='Left';basicElement=new sf.drawings.DrawingElement();content=basicElement;content.cornerRadius=10;content.style.fill=obj.stampFillColor;content.style.strokeColor=obj.stampStrokeColor;canvas.children.push(content);// eslint-disable-next-line
var pathContent1=new sf.drawings.PathElement();pathContent1.id=sf.drawings.randomId()+'_stamp';pathContent1.data=obj.data;pathContent1.width=obj.bounds.width;if(isAnnotationSet&&obj.bounds.width>annotationMaxWidth){pathContent1.width=annotationMaxWidth;obj.bounds.width=annotationMaxWidth;}pathContent1.height=obj.bounds.height;if(isAnnotationSet&&obj.bounds.height>annotationMaxHeight){pathContent1.height=annotationMaxHeight;obj.bounds.height=annotationMaxHeight;}// eslint-disable-next-line
var content1=pathContent1;pathContent1.style.fill=obj.fillColor;pathContent1.style.strokeColor=obj.strokeColor;pathContent1.style.opacity=obj.opacity;content.width=obj.bounds.width+20;content.height=obj.bounds.height+20;content.style.opacity=obj.opacity;canvas.children.push(content1);}break;case'Image':case'SignatureImage':// eslint-disable-next-line
var pathContent11=new sf.drawings.ImageElement();pathContent11.source=obj.data;content=pathContent11;content.style.strokeWidth=0;canvas.children.push(content);break;case'Rectangle':basicElement=new sf.drawings.DrawingElement();content=basicElement;canvas.children.push(content);if(obj.enableShapeLabel){var textLabel=this.textElement(obj);textLabel.content=obj.labelContent;textLabel.style.color=obj.fontColor;textLabel.style.strokeColor=obj.labelBorderColor;textLabel.style.fill=obj.labelFillColor;textLabel.style.fontSize=obj.fontSize;textLabel.style.fontFamily=obj.fontFamily;textLabel.style.opacity=obj.labelOpacity;textLabel.style.textWrapping='NoWrap';canvas.children.push(textLabel);}break;case'Perimeter':pathContent=new sf.drawings.PathElement();pathContent.data='M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5'+'C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z';content=pathContent;setElementStype(obj,pathContent);canvas.children.push(content);basicElement=new sf.drawings.DrawingElement();basicElement.id='perimeter_'+sf.drawings.randomId();basicElement.height=.2;basicElement.width=.2;basicElement.transform=sf.drawings.RotateTransform.Self;basicElement.horizontalAlignment='Stretch';this.setNodePosition(basicElement,obj);basicElement.rotateAngle=obj.rotateAngle;setElementStype(obj,basicElement);canvas.children.push(basicElement);// eslint-disable-next-line
var textele=this.textElement(obj);textele=new sf.drawings.TextElement();textele.style.textWrapping='NoWrap';textele.content=textele.content=findPointsLength([{x:obj.bounds.x,y:obj.bounds.y},{x:obj.bounds.x+obj.bounds.width,y:obj.bounds.y+obj.bounds.height}]).toString();textele.rotateValue={y:-10,angle:obj.rotateAngle};canvas.children.push(textele);break;case'Radius':pathContent=new sf.drawings.PathElement();pathContent.data='M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5'+'C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z';content=pathContent;setElementStype(obj,pathContent);canvas.children.push(content);basicElement=new sf.drawings.DrawingElement();basicElement.id='radius_'+sf.drawings.randomId();basicElement.height=.2;basicElement.width=obj.bounds.width/2;basicElement.transform=sf.drawings.RotateTransform.Self;this.setNodePosition(basicElement,obj);basicElement.rotateAngle=obj.rotateAngle;setElementStype(obj,basicElement);canvas.children.push(basicElement);// eslint-disable-next-line
var radiusTextEle=this.textElement(obj);if(obj.enableShapeLabel){radiusTextEle.style.color=obj.fontColor;radiusTextEle.style.strokeColor=obj.labelBorderColor;radiusTextEle.style.fill=obj.labelFillColor;radiusTextEle.style.fontSize=obj.fontSize;radiusTextEle.style.fontFamily=obj.fontFamily;radiusTextEle.style.opacity=obj.labelOpacity;radiusTextEle.style.textWrapping='NoWrap';}// eslint-disable-next-line
var length_1=findPointsLength([{x:obj.bounds.x,y:obj.bounds.y},{x:obj.bounds.x+obj.bounds.width,y:obj.bounds.y+obj.bounds.height}]);if(!this.pdfViewer.enableImportAnnotationMeasurement&&obj.notes&&obj.notes!==''){radiusTextEle.content=obj.notes;}else{if(!obj.bounds.width){// eslint-disable-next-line max-len
radiusTextEle.content=this.pdfViewer.annotation.measureAnnotationModule.setConversion(0*this.pdfViewer.annotation.measureAnnotationModule.pixelToPointFactor,obj);}else{// eslint-disable-next-line max-len
radiusTextEle.content=this.pdfViewer.annotation.measureAnnotationModule.setConversion(obj.bounds.width/2*this.pdfViewer.annotation.measureAnnotationModule.pixelToPointFactor,obj);}}radiusTextEle.rotateValue={y:-10,x:obj.bounds.width/4,angle:obj.rotateAngle};canvas.children.push(radiusTextEle);break;case'StickyNotes':// eslint-disable-next-line
var pathContent2=new sf.drawings.ImageElement();pathContent2.source=obj.data;pathContent2.width=obj.bounds.width;pathContent2.height=obj.bounds.height;pathContent2.style.strokeColor=obj.strokeColor;pathContent2.style.strokeWidth=0;content=pathContent2;canvas.children.push(content);break;case'SignatureText':// eslint-disable-next-line
var rectElements=new sf.drawings.DrawingElement();rectElements.style.strokeWidth=0;content=rectElements;content.style.strokeWidth=0;canvas.style.strokeWidth=0;canvas.children.push(content);// eslint-disable-next-line
var signatureText=this.textElement(obj);signatureText.style.fontFamily=obj.fontFamily;signatureText.style.fontSize=obj.fontSize;signatureText.style.textAlign='Left';signatureText.rotateValue=undefined;signatureText.content=obj.data;signatureText.margin.top=obj.fontSize/2;signatureText.style.strokeWidth=0;canvas.children.push(signatureText);break;case'FreeText':// eslint-disable-next-line
var rectElement=new sf.drawings.DrawingElement();content=rectElement;canvas.children.push(content);// eslint-disable-next-line
var freeTextEle=this.textElement(obj);freeTextEle=new sf.drawings.TextElement();freeTextEle.style.fontFamily=obj.fontFamily;freeTextEle.style.fontSize=obj.fontSize;freeTextEle.style.textAlign='Left';if(obj.textAlign.toLowerCase()==='center'){freeTextEle.style.textAlign='Center';}else if(obj.textAlign.toLowerCase()==='right'){freeTextEle.style.textAlign='Right';}else if(obj.textAlign.toLowerCase()==='justify'){freeTextEle.style.textAlign='Justify';}freeTextEle.style.color=obj.fontColor;freeTextEle.style.bold=obj.font.isBold;freeTextEle.style.italic=obj.font.isItalic;if(obj.font.isUnderline===true){freeTextEle.style.textDecoration='Underline';}else if(obj.font.isStrikeout===true){freeTextEle.style.textDecoration='LineThrough';}freeTextEle.rotateValue=undefined;freeTextEle.content=obj.dynamicText;freeTextEle.style.opacity=obj.opacity;freeTextEle.margin.left=4;freeTextEle.margin.top=5*(obj.fontSize/16);if(this.pdfViewer.freeTextSettings.enableAutoFit){freeTextEle.style.textWrapping='Wrap';}else{freeTextEle.style.textWrapping='WrapWithOverflow';}freeTextEle.relativeMode='Point';freeTextEle.setOffsetWithRespectToBounds(0,0,null);freeTextEle.relativeMode='Point';canvas.children.push(freeTextEle);break;}content.id=obj.id+'_content';content.relativeMode='Object';content.printID=obj.annotName;if(!isStamp){if(obj.bounds.width!==undefined){content.width=obj.bounds.width;if(isAnnotationSet){if(content.width<annotationMinWidth||content.width>annotationMaxWidth){if(content.width<annotationMinWidth){content.width=annotationMinWidth;}if(content.width>annotationMaxWidth){content.width=annotationMaxWidth;}}}}content.horizontalAlignment='Stretch';if(obj.bounds.height!==undefined){content.height=obj.bounds.height;if(isAnnotationSet){if(content.height<annotationMinHeight||content.width>annotationMaxHeight){if(content.height<annotationMinHeight){content.height=annotationMinHeight;}if(content.height>annotationMaxHeight){content.height=annotationMaxHeight;}}}}setElementStype(obj,content);}content.isRectElement=true;content.verticalAlignment='Stretch';return content;};Drawing.prototype.textElement=function(obj){var textele=new sf.drawings.TextElement();setElementStype(obj,textele);textele.horizontalAlignment='Center';textele.verticalAlignment='Top';textele.relativeMode='Object';textele.setOffsetWithRespectToBounds(.5,.5,'Absolute');return textele;};/**
     * @private
     * @param {DrawingElement} obj - Specified the drawing element.
     * @param {PdfAnnotationBaseModel} node - Specified the node element.
     * @returns {void}
     */Drawing.prototype.setNodePosition=function(obj,node){if(node.shapeAnnotationType==='Perimeter'){obj.offsetX=node.bounds.x+node.bounds.width/2;obj.offsetY=node.bounds.y+node.bounds.height/2;}else if(node.shapeAnnotationType==='Radius'){// eslint-disable-next-line max-len
var trasPoint={x:node.bounds.x+node.bounds.width/2+node.bounds.width/4,y:node.bounds.y+node.bounds.height/2};var center={x:node.bounds.x+node.bounds.width/2,y:node.bounds.y+node.bounds.height/2};var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,node.rotateAngle,center.x,center.y);var rotatedPoint=sf.drawings.transformPointByMatrix(matrix,trasPoint);var newPoint1={x:rotatedPoint.x,y:rotatedPoint.y};obj.offsetX=newPoint1.x;obj.offsetY=newPoint1.y;obj.width=node.bounds.width/2;}};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
     * @returns {Container} - Returns the container element.
     */Drawing.prototype.initContainer=function(obj){if(!obj.id){obj.id=sf.drawings.randomId();}// Creates canvas element
var canvas=new sf.drawings.Canvas();canvas.id=obj.id;canvas.offsetX=obj.bounds.x+obj.bounds.width*0.5;canvas.offsetY=obj.bounds.y+obj.bounds.height*0.5;canvas.style.fill='transparent';canvas.style.strokeColor='transparent';canvas.rotateAngle=obj.rotateAngle;obj.wrapper=canvas;return canvas;};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
     * @returns {Canvas} - Returns the canvas element.
     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any
Drawing.prototype.initLine=function(obj){if(!obj.id){obj.id=sf.drawings.randomId();}var container=new sf.drawings.Canvas();var segment=new sf.drawings.PathElement();segment.id=obj.id+'_path';var srcDecorator=new sf.drawings.PathElement();var targetDecorator=new sf.drawings.PathElement();if(obj.vertexPoints.length){obj.sourcePoint=obj.vertexPoints[0];obj.targetPoint=obj.vertexPoints[obj.vertexPoints.length-1];for(var i=0;i<obj.vertexPoints.length;i++){if(i!==0&&i!==obj.vertexPoints.length-1){obj.segments.push(obj.vertexPoints[i]);}}}segment=getSegmentElement(obj,segment);var points=[];points=getConnectorPoints(obj);//  points = this.clipDecorators(this, points);
var leaders=[];var labels=[];if(obj.shapeAnnotationType==='Distance'){leaders=initLeaders(obj,points);labels=initDistanceLabel(obj,points,this.pdfViewer.annotation.measureAnnotationModule,this.pdfViewer);}if((obj.shapeAnnotationType==='Line'||obj.shapeAnnotationType==='LineWidthArrowHead')&&obj.measureType==='Perimeter'){labels=initPerimeterLabel(obj,points,this.pdfViewer.annotation.measureAnnotationModule,this.pdfViewer);}if(obj.enableShapeLabel===true&&!(obj.shapeAnnotationType==='Distance')&&!(obj.measureType==='Perimeter')){var angle=sf.drawings.Point.findAngle(points[0],points[1]);var textele=this.textElement(obj);textele.id=sf.drawings.randomId();if(!this.pdfViewer.enableImportAnnotationMeasurement&&obj.notes&&obj.notes!==''){textele.content=obj.notes;}else{textele.content=obj.labelContent;}textele.style.strokeColor=obj.labelBorderColor;textele.style.fill=obj.labelFillColor;textele.style.fontSize=obj.fontSize;textele.style.color=obj.fontColor;textele.style.fontFamily=obj.fontFamily;textele.style.opacity=obj.labelOpacity;textele.rotateValue={y:-10,angle:angle};textele.style.textWrapping='NoWrap';labels.push(textele);}points=clipDecorators(obj,points);var bounds=sf.drawings.Rect.toBounds(points);container.width=bounds.width;container.height=bounds.height;container.offsetX=bounds.x+container.pivot.x*bounds.width;container.offsetY=bounds.y+container.pivot.y*bounds.height;var anglePoints=obj.vertexPoints;if(obj.shapeAnnotationType==='Line'||obj.shapeAnnotationType==='LineWidthArrowHead'||obj.shapeAnnotationType==='Distance'){srcDecorator=getDecoratorElement(obj,points[0],anglePoints[1],true);targetDecorator=getDecoratorElement(obj,points[points.length-1],anglePoints[anglePoints.length-2],false);}srcDecorator.id=obj.id+'_srcDec';targetDecorator.id=obj.id+'_tarDec';/* eslint-disable @typescript-eslint/dot-notation */segment.style['fill']='transparent';container.style.strokeColor='transparent';container.style.fill='transparent';container.style.strokeWidth=0;container.children=[];setElementStype(obj,segment);container.children.push(segment);if(leaders.length>0){for(var i=0;i<leaders.length;i++){container.children.push(leaders[i]);}}if(labels.length>0){for(var i=0;i<labels.length;i++){container.children.push(labels[i]);}}container.children.push(srcDecorator);container.children.push(targetDecorator);container.id=obj.id;container.offsetX=segment.offsetX;container.offsetY=segment.offsetY;container.width=segment.width;container.height=segment.height;points=getConnectorPoints(obj);obj.wrapper=container;return container;};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
     * @returns {PdfAnnotationBaseModel} - Returns the added annotaion object.
     */Drawing.prototype.add=function(obj){var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);if(obj.formFieldAnnotationType&&this.pdfViewer.formDesignerModule){obj=new PdfFormFieldBase(this.pdfViewer,'formFields',obj,true);obj=this.initObject(obj);this.pdfViewer.formFields.push(obj);}else{//obj = new PdfAnnotationBase();
// obj = new PdfAnnotationBase(this.pdfViewer, 'annotations', obj as PdfAnnotationBase, true);
obj=this.updateAnnotationObject(obj);obj=this.initObject(obj);this.pdfViewer.annotations.push(obj);}this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);return obj;};Drawing.prototype.updateAnnotationObject=function(obj){var newObject=new PdfAnnotationBase();if(obj){if(obj.id){newObject.id=obj.id;}if(obj.shapeAnnotationType){newObject.shapeAnnotationType=obj.shapeAnnotationType;}if(obj.formFieldAnnotationType){newObject.formFieldAnnotationType=obj.formFieldAnnotationType;}if(obj.measureType){newObject.measureType=obj.measureType;}if(obj.author){newObject.author=obj.author;}if(obj.modifiedDate){newObject.modifiedDate=obj.modifiedDate;}if(obj.subject){newObject.subject=obj.subject;}if(obj.notes){newObject.notes=obj.notes;}if(obj.isCommentLock){newObject.isCommentLock=obj.isCommentLock;}if(obj.strokeColor){newObject.strokeColor=obj.strokeColor;}if(obj.fillColor){newObject.fillColor=obj.fillColor;}if(obj.stampStrokeColor){newObject.stampStrokeColor=obj.stampStrokeColor;}if(obj.stampFillColor){newObject.stampFillColor=obj.stampFillColor;}if(obj.data){newObject.data=obj.data;}if(obj.opacity!==null&&obj.opacity!==undefined){newObject.opacity=obj.opacity;}if(obj.thickness){newObject.thickness=obj.thickness;}if(obj.borderStyle){newObject.borderStyle=obj.borderStyle;}if(obj.borderDashArray){newObject.borderDashArray=obj.borderDashArray;}if(obj.rotateAngle){newObject.rotateAngle=obj.rotateAngle;}if(obj.isCloudShape){newObject.isCloudShape=obj.isCloudShape;}if(obj.cloudIntensity){newObject.cloudIntensity=obj.cloudIntensity;}if(obj.leaderHeight){newObject.leaderHeight=obj.leaderHeight;}if(obj.lineHeadStart){newObject.lineHeadStart=obj.lineHeadStart;}if(obj.lineHeadEnd){newObject.lineHeadEnd=obj.lineHeadEnd;}if(obj.vertexPoints){newObject.vertexPoints=obj.vertexPoints;}if(obj.sourcePoint){newObject.sourcePoint=obj.sourcePoint;}if(obj.sourceDecoraterShapes){newObject.sourceDecoraterShapes=obj.sourceDecoraterShapes;}if(obj.taregetDecoraterShapes){newObject.taregetDecoraterShapes=obj.taregetDecoraterShapes;}if(obj.targetPoint){newObject.targetPoint=obj.targetPoint;}if(obj.segments){newObject.segments=obj.segments;}if(obj.bounds){newObject.bounds=obj.bounds;}if(obj.pageIndex){newObject.pageIndex=obj.pageIndex;}if(obj.zIndex){newObject.zIndex=obj.zIndex;}if(obj.wrapper){newObject.wrapper=obj.wrapper;}if(obj.isDynamicStamp){newObject.isDynamicStamp=obj.isDynamicStamp;}if(obj.dynamicText){newObject.dynamicText=obj.dynamicText;}if(obj.annotName){newObject.annotName=obj.annotName;}if(obj.review){newObject.review=obj.review;}if(obj.comments){newObject.comments=obj.comments;}if(obj.fontColor){newObject.fontColor=obj.fontColor;}if(obj.fontSize){newObject.fontSize=obj.fontSize;}if(obj.fontFamily){newObject.fontFamily=obj.fontFamily;}if(obj.fontStyle){newObject.fontStyle=obj.fontStyle;}if(obj.enableShapeLabel){newObject.enableShapeLabel=obj.enableShapeLabel;}if(obj.labelContent){newObject.labelContent=obj.labelContent;}if(obj.labelFillColor){newObject.labelFillColor=obj.labelFillColor;}if(obj.labelMaxLength){newObject.labelMaxLength=obj.labelMaxLength;}if(obj.labelOpacity){newObject.labelOpacity=obj.labelOpacity;}if(obj.annotationSelectorSettings){newObject.annotationSelectorSettings=obj.annotationSelectorSettings;}if(obj.labelBorderColor){newObject.labelBorderColor=obj.labelBorderColor;}if(obj.textAlign){newObject.textAlign=obj.textAlign;}if(obj.signatureName){newObject.signatureName=obj.signatureName;}if(obj.minHeight){newObject.minHeight=obj.minHeight;}if(obj.minWidth){newObject.minWidth=obj.minWidth;}if(obj.maxHeight){newObject.maxHeight=obj.maxHeight;}if(obj.maxWidth){newObject.maxWidth=obj.maxWidth;}if(obj.isLock){newObject.isLock=obj.isLock;}if(obj.annotationAddMode){newObject.annotationAddMode=obj.annotationAddMode;}if(obj.annotationSettings){newObject.annotationSettings=obj.annotationSettings;}if(obj.previousFontSize){newObject.previousFontSize=obj.previousFontSize;}if(obj.font){newObject.font=obj.font;}if(obj.labelBounds){newObject.labelBounds=obj.labelBounds;}if(obj.customData){newObject.customData=obj.customData;}if(obj.allowedInteractions){newObject.allowedInteractions=obj.allowedInteractions;}if(obj.isPrint){newObject.isPrint=obj.isPrint;}if(obj.isReadonly){newObject.isReadonly=obj.isReadonly;}}return newObject;};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
     * @returns {void}
     */Drawing.prototype.remove=function(obj){var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);var index=obj.pageIndex;for(var i=0;i<this.pdfViewer.annotations.length;i++){var annotation=this.pdfViewer.annotations[i];if(annotation.id&&(annotation.id===obj.id||annotation.id.split('_')[0]===obj.id)||annotation.wrapper&&annotation.wrapper.id===obj.id){this.pdfViewer.annotations.splice(i,1);var objects=this.getPageObjects(obj.pageIndex);for(var j=0;j<objects.length;j++){if(objects[j].id===obj.id){objects.splice(j,1);if(obj.shapeAnnotationType==='Path'||obj.shapeAnnotationType==='SignatureImage'||obj.shapeAnnotationType==='SignatureText'){this.refreshCanvasDiagramLayer(undefined,index,obj.id);}else{this.pdfViewer.renderDrawing(undefined,index);}}}// need to add code snippet to remove from z index table   
}}/* for (let i: number = 0; i < this.pdfViewer.formFields.length; i++) {
             const element: PdfAnnotationBaseModel = this.pdfViewer.formFields[i];
             if (element.id === obj.id || element.wrapper.id === obj.id) {
                 this.pdfViewer.formFields.splice(i, 1);
                 if (this.pdfViewer.formDesignerModule && obj.formFieldAnnotationType) {
                     this.pdfViewer.formFieldCollection.splice(i, 1);
                 }
                 const objects : (PdfFormFieldBaseModel)[] = this.getPageObjects(obj.pageIndex);
                 for (let j: number = 0; j < objects.length; j++) {
                     if (objects[j].id === obj.id) {
                         objects.splice(j, 1);
                     }
                     if (objects[j] && objects[j].id && objects[j].id.indexOf(obj.id) !== -1) {
                         objects.splice(j, 1);
                     }
                 }
             }
         }
         if (obj.formFieldAnnotationType === 'Textbox' || obj.formFieldAnnotationType === 'Checkbox' || obj.formFieldAnnotationType === 'RadioButton'
             || obj.formFieldAnnotationType === 'PasswordField' || obj.formFieldAnnotationType === 'DropdownList' || obj.formFieldAnnotationType === 'ListBox' || obj.formFieldAnnotationType === 'SignatureField' || obj.formFieldAnnotationType === 'InitialField') {
             for (let i: number = 0; i < this.pdfViewer.formFieldCollections.length; i++) {
                 // eslint-disable-next-line
                 const element: any = this.pdfViewer.formFieldCollections[i];
                 if (element.id === obj.id) {
                     this.pdfViewer.formFieldCollections.splice(i, 1);
                 }
             }
         }
         if (obj.formFieldAnnotationType === 'Textbox' || obj.formFieldAnnotationType === 'Checkbox' || obj.formFieldAnnotationType === 'RadioButton'
             || obj.formFieldAnnotationType === 'PasswordField' || obj.formFieldAnnotationType === 'DropdownList' || obj.formFieldAnnotationType === 'ListBox' || obj.formFieldAnnotationType === 'SignatureField' || obj.formFieldAnnotationType === 'InitialField') {
             // eslint-disable-next-line
             const inputField: any = document.getElementById('form_field_' + obj.id + '_content_html_element');
             if (inputField) {
                 inputField.remove();
                 this.pdfViewer.renderDrawing(undefined, index);
                 const field: IFormField = {
                     // eslint-disable-next-line
                     name: (obj as any).name, value: (obj as any).value, fontFamily: obj.fontFamily, fontSize: obj.fontSize, fontStyle: (obj as any).fontStyle,
                     // eslint-disable-next-line
                     color: (obj as any).color, backgroundColor: (obj as any).backgroundColor, alignment: (obj as any).alignment, isReadonly: (obj as any).isReadonly, visibility: (obj as any).visibility,
                     // eslint-disable-next-line
                     maxLength: (obj as any).maxLength, isRequired: (obj as any).isRequired, isPrint: obj.isPrint, rotation: (obj as any).rotateAngle, tooltip: (obj as any).tooltip,
                     // eslint-disable-next-line
                     options: (obj as any).options, isChecked: (obj as any).isChecked, isSelected: (obj as any).isSelected
                 };
                 this.pdfViewer.fireFormFieldRemoveEvent('formFieldRemove', field, obj.pageIndex);
                 this.pdfViewer.formDesignerModule.removeFieldsFromAnnotationCollections(obj.id);
             }
         }*/this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);};/**
     * @private
     * @param {number} pageIndex - Specified the page index.
     * @returns {PdfAnnotationBaseModel[]} - Returns the annotation base model collections.
     */Drawing.prototype.getPageObjects=function(pageIndex){var pageTable=this.getPageTable(pageIndex);return pageTable.objects;};/**
     * @private
     * @param {HTMLCanvasElement} diagramLayer - Specified the diagram layer element.
     * @param {number} pageIndex - Specified the page index.
     * @param {string} objectId - Specified the object id.
     * @returns {void}
     */Drawing.prototype.refreshCanvasDiagramLayer=function(diagramLayer,pageIndex,objectId){if(!diagramLayer){diagramLayer=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);}if(diagramLayer){var zoom=this.pdfViewer.viewerBase.getZoomFactor();var width=diagramLayer.width/zoom;var height=diagramLayer.height/zoom;var ctx=diagramLayer.getContext('2d');ctx.lineCap="round";ctx.lineJoin="round";if(zoom<1){ctx.lineWidth=ctx.lineWidth/zoom;}var devicePixelRatio_1=this.pdfViewer.viewerBase.getWindowDevicePixelRatio();var zoomRatio=zoom*devicePixelRatio_1;if(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&zoom<=0.7){ctx.setTransform(zoomRatio,0,0,zoomRatio,0,0);}else{ctx.setTransform(zoom,0,0,zoom,0,0);}ctx.clearRect(0,0,width,height);var objects=this.getPageObjects(pageIndex);for(var i=0;i<objects.length;i++){// eslint-disable-next-line @typescript-eslint/no-explicit-any
var renderElement=void 0;if(diagramLayer.id===this.pdfViewer.dataId+'_print_annotation_layer_'+pageIndex){if(objects[i].isPrint){// eslint-disable-next-line @typescript-eslint/no-explicit-any
renderElement=this.pdfViewer.nameTable[objects[i].id].wrapper;if(!sf.base.isNullOrUndefined(renderElement)){sf.drawings.refreshDiagramElements(diagramLayer,[renderElement],this.renderer);}}}else{// eslint-disable-next-line
renderElement=this.pdfViewer.nameTable[objects[i].id].wrapper;sf.drawings.refreshDiagramElements(diagramLayer,[renderElement],this.renderer);}}}};/**
     * @private
     * @param {number} index - Specified the page index.
     * @returns {void}
     */Drawing.prototype.clearHighlighter=function(index){var adornerSvg=this.getAdornerLayerSvg(this.pdfViewer.dataId+index+'_diagramAdornerLayer',index);if(adornerSvg){var highlighter=adornerSvg.getElementById(adornerSvg.id+'_highlighter');if(highlighter){highlighter.parentNode.removeChild(highlighter);}}};/**
     * @private
     * @param {string} diagramId - Specified the diagram id.
     * @param {number} index - Specified the page index.
     * @returns {SVGSVGElement} Return the svg element.
     */Drawing.prototype.getSelectorElement=function(diagramId,index){var adornerLayer=null;var adornerSvg=this.getAdornerLayerSvg(diagramId,index);if(adornerSvg){adornerLayer=adornerSvg.getElementById(diagramId+'_SelectorElement');}return adornerLayer;};/**
     * @private
     * @param {string} diagramId - Specified the diagram id.
     * @param {number} index - Specified the page index.
     * @returns {SVGSVGElement} Return the svg element.
     */Drawing.prototype.getAdornerLayerSvg=function(diagramId,index){var adornerLayerSvg=null;var diagramElement=sf.drawings.getDiagramElement(diagramId+index+'_diagramAdornerLayer');// eslint-disable-next-line
var elementcoll;if(diagramElement){elementcoll=diagramElement.getElementsByClassName('e-adorner-layer'+index);adornerLayerSvg=elementcoll[0];}return adornerLayerSvg;};/**
     * @private
     * @param {number} index - Specified the page index.
     * @returns {void}
     */Drawing.prototype.clearSelectorLayer=function(index){var adornerSvg=this.getAdornerLayerSvg(this.pdfViewer.dataId,index);if(adornerSvg){var selectionRect=adornerSvg.getElementById(this.pdfViewer.adornerSvgLayer.id+'_selected_region');if(selectionRect){selectionRect.parentNode.removeChild(selectionRect);}this.clearHighlighter(index);var childNodes=this.getSelectorElement(this.pdfViewer.dataId,index).childNodes;var child=void 0;for(var i=childNodes.length;i>0;i--){child=childNodes[i-1];child.parentNode.removeChild(child);}}};/**
     * @private
     * @param {number} select - Specified the select value.
     * @param {AnnotationSelectorSettingsModel} currentSelector - Specified the annotation selector element.
     * @param {PdfAnnotationBaseModel} helper - Specified the annotation helper element.
     * @param {boolean} isSelect - Specified the is select or not.
     * @returns {void}
     */ // eslint-disable-next-line max-len
Drawing.prototype.renderSelector=function(select,currentSelector,helper,isSelect){if(!helper||isSelect){var size=new sf.drawings.Size();var selectorModel=this.pdfViewer.selectedItems;this.clearSelectorLayer(select);if(selectorModel.wrapper){selectorModel.wrapper.measure(size);var zoom=this.pdfViewer.viewerBase.getZoomFactor();selectorModel.wrapper.arrange(selectorModel.wrapper.desiredSize);selectorModel.width=selectorModel.wrapper.actualSize.width;selectorModel.height=selectorModel.wrapper.actualSize.height;selectorModel.offsetX=selectorModel.wrapper.offsetX;selectorModel.offsetY=selectorModel.wrapper.offsetY;if(selectorModel.annotations.length===1){selectorModel.rotateAngle=selectorModel.annotations[0].rotateAngle;selectorModel.wrapper.rotateAngle=selectorModel.annotations[0].rotateAngle;//selectorModel.pivot = selectorModel.annotations[0].pivot;
}var bounds=selectorModel.wrapper.bounds;// eslint-disable-next-line
var selectorElement=void 0;if(selectorModel.formFields.length){for(var i=0;i<selectorModel.formFields.length;i++){var node=selectorModel.formFields[i];selectorElement=this.getSelectorElement(this.pdfViewer.dataId,select);if(selectorElement&&node.pageIndex===select&&this.pdfViewer.designerMode){this.renderResizeHandle(node.wrapper.children[0],selectorElement,selectorModel.thumbsConstraints,zoom,undefined,undefined,undefined,false,true,null,null,currentSelector);}if(this.pdfViewer.formDesignerModule&&node.formFieldAnnotationType){// eslint-disable-next-line max-len
if(!this.pdfViewer.viewerBase.isFormFieldSelect&&!this.pdfViewer.viewerBase.isFormFieldMouseDown&&!this.pdfViewer.viewerBase.isFormFieldMouseMove){this.pdfViewer.viewerBase.isFormFieldSelect=true;var field={// eslint-disable-next-line
value:node.value,fontFamily:node.fontFamily,fontSize:node.fontSize,fontStyle:node.fontStyle,color:node.color,backgroundColor:node.backgroundColor,alignment:node.alignment,isReadonly:node.isReadonly,visibility:node.visibility,// eslint-disable-next-line
maxLength:node.maxLength,isRequired:node.isRequired,isPrint:node.isPrint,rotation:node.rotateAngle,tooltip:node.tooltip,// eslint-disable-next-line
options:node.options,isChecked:node.isChecked,isSelected:node.isSelected};this.pdfViewer.fireFormFieldSelectEvent('formFieldSelect',field,node.pageIndex,this.pdfViewer.formDesignerModule.isProgrammaticSelection);}}}}if(selectorModel.annotations.length){for(var j=0;j<selectorModel.annotations.length;j++){var node=selectorModel.annotations[j];selectorElement=this.getSelectorElement(this.pdfViewer.dataId,select);if(selectorElement&&node.pageIndex===select){if(node.shapeAnnotationType==='Distance'||node.shapeAnnotationType==='Line'||node.shapeAnnotationType==='LineWidthArrowHead'||node.shapeAnnotationType==='Polygon'){this.renderEndPointHandle(node,selectorElement,selectorModel.thumbsConstraints,{scale:zoom,tx:0,ty:0},undefined,undefined,true,currentSelector);}else{if(node.shapeAnnotationType==='StickyNotes'){this.renderResizeHandle(node.wrapper.children[0],selectorElement,selectorModel.thumbsConstraints,zoom,undefined,undefined,undefined,false,true,null,null,currentSelector);}else{if(this.pdfViewer.tool!=='Stamp'){// eslint-disable-next-line
var isSignature=node.shapeAnnotationType==='Path'||node.formFieldAnnotationType==='SignatureField'||node.formFieldAnnotationType==='InitialField';this.renderResizeHandle(node.wrapper.children[0],selectorElement,selectorModel.thumbsConstraints,zoom,undefined,undefined,undefined,node.shapeAnnotationType==='Stamp',false,isSignature,node.shapeAnnotationType==='FreeText'||node.shapeAnnotationType==='HandWrittenSignature'||node.shapeAnnotationType==='SignatureImage'||node.shapeAnnotationType==='Image'||node.shapeAnnotationType==='SignatureText',currentSelector);}}}if(!this.pdfViewer.viewerBase.isNewSignatureAdded){if(node.shapeAnnotationType==='HandWrittenSignature'){this.pdfViewer.annotationModule.selectSignature(node.signatureName,node.pageIndex,node);}if(node.shapeAnnotationType==='SignatureText'||node.shapeAnnotationType==='SignatureImage'||node.shapeAnnotationType==='Path'){this.pdfViewer.annotationModule.selectSignature(node.id,node.pageIndex,node);}}if(this.pdfViewer.formDesignerModule&&node.formFieldAnnotationType){// eslint-disable-next-line max-len
if(!this.pdfViewer.viewerBase.isFormFieldSelect&&!this.pdfViewer.viewerBase.isFormFieldMouseDown&&!this.pdfViewer.viewerBase.isFormFieldMouseMove){this.pdfViewer.viewerBase.isFormFieldSelect=true;var field={// eslint-disable-next-line
value:node.value,fontFamily:node.fontFamily,fontSize:node.fontSize,fontStyle:node.fontStyle,// eslint-disable-next-line
color:node.color,backgroundColor:node.backgroundColor,alignment:node.alignment,isReadonly:node.isReadonly,visibility:node.visibility,// eslint-disable-next-line
maxLength:node.maxLength,isRequired:node.isRequired,isPrint:node.isPrint,rotation:node.rotateAngle,tooltip:node.tooltip,// eslint-disable-next-line
options:node.options,isChecked:node.isChecked,isSelected:node.isSelected};this.pdfViewer.fireFormFieldSelectEvent('formFieldSelect',field,node.pageIndex,this.pdfViewer.formDesignerModule.isProgrammaticSelection);}}if(node.annotName!==''){if(helper&&node===helper&&!node.formFieldAnnotationType){// eslint-disable-next-line max-len
if(!this.pdfViewer.viewerBase.isAddComment&&!this.pdfViewer.viewerBase.isAnnotationSelect&&!this.pdfViewer.viewerBase.isAnnotationMouseDown&&!this.pdfViewer.viewerBase.isAnnotationMouseMove&&!this.pdfViewer.viewerBase.isInkAdded&&!this.pdfViewer.viewerBase.isNewStamp){this.pdfViewer.viewerBase.isAnnotationSelect=true;this.pdfViewer.annotationModule.annotationSelect(node.annotName,node.pageIndex,node);}}}}}}}}};/**
     * Rotates the given nodes/connectors by the given angle
     *
     * @private
     * @param {PdfAnnotationBaseModel | SelectorModel} obj - Specified the objects to be rotated.
     * @param {number} angle - Specified the angle by which the objects have to be rotated.
     * @param {PointModel} pivot - Specified the reference point with reference to which the objects have to be rotated.
     * @param {AnnotationSelectorSettingsModel} currentSelector - Specified the current selector value.
     * @returns {void}
     */ // eslint-disable-next-line max-len
Drawing.prototype.rotate=function(obj,angle,pivot,currentSelector){var checkBoundaryConstraints;if(obj){pivot=pivot||{x:obj.wrapper.offsetX,y:obj.wrapper.offsetY};if(obj instanceof Selector||!obj.shapeAnnotationType){obj.rotateAngle+=angle;obj.wrapper.rotateAngle+=angle;var objects=[];objects=objects.concat(obj.annotations);this.rotateObjects(obj,objects,angle,pivot,null,currentSelector);}else{this.rotateObjects(obj,[obj],angle,pivot);}}return checkBoundaryConstraints;};/**
     * @private
     * @param {PdfAnnotationBaseModel | SelectorModel} parent - Specified the annotation object.
     * @param {PdfAnnotationBaseModel[]} objects - Specified the annotation objects.
     * @param {number} angle - Specified the annotation angle.
     * @param {PointModel} pivot - Specified the pivot value.
     * @param {boolean} includeParent - Specified the include parent value.
     * @param {AnnotationSelectorSettingsModel} currentSelector - Specified the current selector value.
     * @returns {void}
     */Drawing.prototype.rotateObjects=function(parent,objects,angle,pivot,includeParent,currentSelector){pivot=pivot||{};var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,angle,pivot.x,pivot.y);for(var _i=0,objects_1=objects;_i<objects_1.length;_i++){var obj=objects_1[_i];if(obj instanceof PdfAnnotationBase){if(includeParent!==false||parent!==obj){obj.rotateAngle+=angle;obj.rotateAngle=(obj.rotateAngle+360)%360;var newOffset=sf.drawings.transformPointByMatrix(matrix,{x:obj.wrapper.offsetX,y:obj.wrapper.offsetY});obj.wrapper.offsetX=newOffset.x;obj.wrapper.offsetY=newOffset.y;this.nodePropertyChange(obj,{rotateAngle:obj.rotateAngle});}this.renderSelector(obj.pageIndex,currentSelector);}}};Drawing.prototype.getParentSvg=function(element,targetElement,canvas){if(element&&element.id){if(targetElement&&targetElement==='selector'){return this.pdfViewer.adornerSvgLayer;}}return canvas;};/**
     * @private
     * @param {DrawingElement} selector - Specified the annotation selector object.
     * @param {HTMLCanvasElement | SVGElement} canvas - Specified the canvas element.
     * @param {any} currentSelector - Specified the current selector value.
     * @param {Transforms} transform - Specfied the transform value.
     * @param {number} enableNode - Specified the node number.
     * @param {boolean} isBorderTickness - Specified is thickness or not.
     * @param {boolean} isSwimlane - Specified is swimlane annotation or not.
     * @param {boolean} isSticky - Specified is sticky annotation or not.
     * @returns {void}
     */ // eslint-disable-next-line
Drawing.prototype.renderBorder=function(selector,canvas,currentSelector,transform,enableNode,isBorderTickness,isSwimlane,isSticky){var wrapper=selector;var options=getBaseShapeAttributes(wrapper,transform);transform=transform||{scale:1,tx:0,ty:0};if(!isSticky){options.x*=transform.scale;options.y*=transform.scale;options.width*=transform.scale;options.height*=transform.scale;options.fill='transparent';// eslint-disable-next-line max-len
var shapeType=this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType;if(currentSelector&&_typeof(currentSelector)!=='object'&&currentSelector!==''){// eslint-disable-next-line
var annotationSelector=JSON.parse(currentSelector);var borderColor=annotationSelector.selectionBorderColor===''?'black':annotationSelector.selectionBorderColor;options.stroke=borderColor;options.strokeWidth=currentSelector.selectionBorderThickness===1?1:annotationSelector.selectionBorderThickness;// eslint-disable-next-line max-len
var lineDash=annotationSelector.selectorLineDashArray.length===0?[6,3]:annotationSelector.selectorLineDashArray;if(lineDash.length>2){lineDash=[lineDash[0],lineDash[1]];}options.dashArray=lineDash.toString();}else{if(!this.pdfViewer.designerMode){if(shapeType==='HandWrittenSignature'||shapeType==='SignatureText'||shapeType==='SignatureImage'||shapeType==='Ink'){// eslint-disable-next-line
var formField=this.pdfViewer.nameTable[selector.id.split('_')[0]];var isFormFieldSign=this.pdfViewer.viewerBase.checkSignatureFormField(selector.id);// if (isFormFieldSign && options.width + 21 !== formField.bounds.width && options.height + 21 !== formField.bounds.height) {
//     if (this.pdfViewer.signatureFitMode === 'Default') {
//         let selectorBounds: any = this.pdfViewer.formFieldsModule.getDefaultBoundsforSign(formField.bounds);
//         options.x = selectorBounds.x; options.y = selectorBounds.y; options.width = selectorBounds.width; options.height = selectorBounds.height;
//     } else {
//         options.x = formField.bounds.x; options.y = formField.bounds.y; options.width = formField.bounds.width; options.height = formField.bounds.height;
//     }
// }
this.getSignBorder(shapeType,options,isFormFieldSign);}else{this.getBorderSelector(shapeType,options);}}}options["class"]='e-pv-diagram-border';if(isSwimlane){options["class"]+=' e-diagram-lane';}options.id='borderRect';options.id='borderRect';if(!enableNode){options["class"]+=' e-disabled';}if(isBorderTickness){options["class"]+=' e-thick-border';}options.cornerRadius=0;}else{options.x*=transform.scale;options.y*=transform.scale;options.width*=transform.scale;options.height*=transform.scale;// eslint-disable-next-line max-len
var shapeType=this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType:this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType;if(currentSelector&&_typeof(currentSelector)!=='object'&&currentSelector!==''){var annotationSelector=JSON.parse(currentSelector);var borderColor=annotationSelector.selectionBorderColor===''?'black':annotationSelector.selectionBorderColor;options.stroke=borderColor;options.strokeWidth=currentSelector.selectionBorderThickness===1?1:annotationSelector.selectionBorderThickness;// eslint-disable-next-line max-len
var lineDash=annotationSelector.selectorLineDashArray.length===0?[6,3]:annotationSelector.selectorLineDashArray;if(lineDash.length>2){lineDash=[lineDash[0],lineDash[1]];}options.dashArray=lineDash.toString();}else{this.getBorderSelector(shapeType,options);}}var parentSvg=this.getParentSvg(selector,'selector');// eslint-disable-next-line max-len
this.svgRenderer.drawRectangle(canvas,options,this.pdfViewer.dataId,undefined,true,parentSvg);};/**
     * @private
     * @param {PdfAnnotationBaseModel} type - Specified the annotation object.
     * @param {BaseAttributes} options - Specified the options value.
     * @param {boolean} isFormFieldSign - Specified is form field sign or not.
     * @returns {void}
     */Drawing.prototype.getSignBorder=function(type,options,isFormFieldSign){if(!isFormFieldSign&&(type==='HandWrittenSignature'||type==='SignatureText'||type==='SignatureImage')&&this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings){var borderColor=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor===''?'#0000ff':this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash.length>2){lineDash=[lineDash[0],lineDash[1]];}options.dashArray=lineDash.toString();}else if(type==='Ink'&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings){var borderColor=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor===''?'#0000ff':this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash.length>2){lineDash=[lineDash[0],lineDash[1]];}options.dashArray=lineDash.toString();}else{var annotationSelector=this.pdfViewer.annotationSelectorSettings;var borderColor=annotationSelector.selectionBorderColor===''?'black':annotationSelector.selectionBorderColor;options.stroke=borderColor;options.strokeWidth=annotationSelector.selectionBorderThickness===1?1:annotationSelector.selectionBorderThickness;// eslint-disable-next-line max-len
var lineDash=annotationSelector.selectorLineDashArray.length===0?[6,3]:annotationSelector.selectorLineDashArray;if(lineDash.length>2){lineDash=[lineDash[0],lineDash[1]];}options.dashArray=lineDash.toString();}};/**
     * @private
     * @param {PdfAnnotationBaseModel} type - Specified the annotation object.
     * @param {BaseAttributes} options - Specified the base attributes.
     * @returns {void}
     */Drawing.prototype.getBorderSelector=function(type,options){var annotationSelector=this.pdfViewer.annotationSelectorSettings;var borderColor=sf.base.isNullOrUndefined(annotationSelector.selectionBorderColor)||annotationSelector.selectionBorderColor===''?'black':annotationSelector.selectionBorderColor;options.stroke=borderColor;// eslint-disable-next-line max-len
options.strokeWidth=sf.base.isNullOrUndefined(annotationSelector.selectionBorderThickness)||annotationSelector.selectionBorderThickness===1?1:annotationSelector.selectionBorderThickness;// eslint-disable-next-line max-len
var lineDash=sf.base.isNullOrUndefined(annotationSelector.selectorLineDashArray)||annotationSelector.selectorLineDashArray.length===0?[6,3]:annotationSelector.selectorLineDashArray;if(lineDash.length>2){lineDash=[lineDash[0],lineDash[1]];}options.dashArray=lineDash.toString();if(type==='Rectangle'&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){var borderColor_1=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor===''?'black':this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor_1;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash_1=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash_1.length>2){lineDash_1=[lineDash_1[0],lineDash_1[1]];}options.dashArray=lineDash_1.toString();}else if((type==='Textbox'||type==='Checkbox'||type==='RadioButton'||type==='SignatureField'||type==='InitialField'||type==='DropdownList'||type==='ListBox'||type==='PasswordField')&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){var borderColor_2=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor===''?'black':this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor_2;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash_2=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash_2.length>2){lineDash_2=[lineDash_2[0],lineDash_2[1]];}options.dashArray=lineDash_2.toString();}else if(type==='Ellipse'&&this.pdfViewer.circleSettings.annotationSelectorSettings){var borderColor_3=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor===''?'black':this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor_3;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash_3=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash_3.length>2){lineDash_3=[lineDash_3[0],lineDash_3[1]];}options.dashArray=lineDash_3.toString();}else if(type==='Radius'&&this.pdfViewer.radiusSettings.annotationSelectorSettings){var borderColor_4=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor===''?'black':this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor_4;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash_4=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash_4.length>2){lineDash_4=[lineDash_4[0],lineDash_4[1]];}options.dashArray=lineDash_4.toString();}else if(type==='FreeText'&&this.pdfViewer.freeTextSettings.annotationSelectorSettings){var borderColor_5=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor===''?'black':this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor_5;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash_5=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash_5.length>2){lineDash_5=[lineDash_5[0],lineDash_5[1]];}options.dashArray=lineDash_5.toString();}else if(type==='StickyNotes'&&this.pdfViewer.stickyNotesSettings.annotationSelectorSettings){var borderColor_6=sf.base.isNullOrUndefined(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor===''?'black':this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor_6;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash_6=sf.base.isNullOrUndefined(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[6,3]:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash_6.length>2){lineDash_6=[lineDash_6[0],lineDash_6[1]];}options.dashArray=lineDash_6.toString();}else if(type==='Stamp'&&this.pdfViewer.stampSettings.annotationSelectorSettings){var borderColor_7=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor===''?'#0000ff':this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor_7;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash_7=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash_7.length>2){lineDash_7=[lineDash_7[0],lineDash_7[1]];}options.dashArray=lineDash_7.toString();}else if(type==='Image'&&this.pdfViewer.customStampSettings.annotationSelectorSettings){var borderColor_8=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderColor===''?'#0000ff':this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor_8;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash_8=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.customStampSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.customStampSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash_8.length>2){lineDash_8=[lineDash_8[0],lineDash_8[1]];}options.dashArray=lineDash_8.toString();}};/**
     * @private
     * @param {string} id - Specified the annotaion id.
     * @param {DrawingElement} selector - Specified the drawing element.
     * @param {number} cx - Specified the cx number.
     * @param {number} cy - Specified the cy number.
     * @param {HTMLCanvasElement | SVGElement} canvas - Specified the html canvas element.
     * @param {boolean} visible - Specified the annotation visible or not.
     * @param {number} enableSelector - Specified the enable selector value.
     * @param {Transforms} t - Specified the transforms value.
     * @param {boolean} connected - Specified is connected or not.
     * @param {boolean} canMask - Specified is mask or not.
     * @param {Object} ariaLabel - Specified the aria label object.
     * @param {number} count - Specified the count value.
     * @param {string} className - Specified the class name.
     * @param {AnnotationSelectorSettingsModel} currentSelector - Specified the annotation selector settings.
     * @returns {void}
     */Drawing.prototype.renderCircularHandle=function(id,selector,cx,cy,canvas,visible,enableSelector,t,connected,canMask,ariaLabel,count,className,currentSelector){var wrapper=selector;var newPoint={x:cx,y:cy};t=t||{scale:1,tx:0,ty:0};if(wrapper.rotateAngle!==0||wrapper.parentTransform!==0){var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,wrapper.rotateAngle+wrapper.parentTransform,wrapper.offsetX,wrapper.offsetY);newPoint=sf.drawings.transformPointByMatrix(matrix,newPoint);}var options=getBaseShapeAttributes(wrapper);var shapeType;if(this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.selectedItems.annotations[0].measureType){shapeType=this.pdfViewer.selectedItems.annotations[0].measureType;}else if(this.pdfViewer.selectedItems.formFields.length>0){shapeType=this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType;}else{shapeType=this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType;}this.getResizerColors(shapeType,options,currentSelector,t);this.getShapeSize(shapeType,options,currentSelector,t);options.strokeWidth=1;if(count!==undefined){options.id='segmentEnd_'+count;}options.centerX=(newPoint.x+t.tx)*t.scale;options.centerY=(newPoint.y+t.ty)*t.scale;options.angle=0;options.id=id;options.visible=visible;options["class"]=className;options.opacity=1;if(connected){options["class"]+=' e-connected';}if(canMask){options.visible=false;}options.x=newPoint.x*t.scale-options.width/2;options.y=newPoint.y*t.scale-options.height/2;var parentSvg=this.getParentSvg(selector,'selector');if(this.getShape(shapeType,currentSelector)==='Square'){this.svgRenderer.drawRectangle(canvas,options,id,undefined,true,parentSvg);}else if(this.getShape(shapeType,currentSelector)==='Circle'){this.svgRenderer.drawCircle(canvas,options,1);}};/**
     * @private
     * @param {PdfAnnotationBaseModel} type - Specified the annotaion object.
     * @param {CircleAttributes} options - Specified the circle attributes value.
     * @param {any} currentSelector - Specified the current selector value.
     * @param {Transforms} t - Specified the transforms value.
     * @returns {void}
     */ // eslint-disable-next-line
Drawing.prototype.getShapeSize=function(type,options,currentSelector,t){if(currentSelector&&_typeof(currentSelector)!=='object'&&currentSelector!==''){// eslint-disable-next-line
var annotationSelector=JSON.parse(currentSelector);// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(annotationSelector.resizerSize)||annotationSelector.resizerSize===8?8:annotationSelector.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(annotationSelector.resizerSize)||annotationSelector.resizerSize===8?8:annotationSelector.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(annotationSelector.resizerSize)||annotationSelector.resizerSize===8?8:annotationSelector.resizerSize)*t.scale;}else{// eslint-disable-next-line
var annotationSelector=this.pdfViewer.annotationSelectorSettings;// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(annotationSelector.resizerSize)||annotationSelector.resizerSize===8?8:annotationSelector.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(annotationSelector.resizerSize)||annotationSelector.resizerSize===8?8:annotationSelector.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(annotationSelector.resizerSize)||annotationSelector.resizerSize===8?8:annotationSelector.resizerSize)*t.scale;if(type==='Line'&&this.pdfViewer.lineSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='LineWidthArrowHead'&&this.pdfViewer.arrowSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Rectangle'&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Ellipse'&&this.pdfViewer.circleSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Distance'&&this.pdfViewer.distanceSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Polygon'&&this.pdfViewer.polygonSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Radius'&&this.pdfViewer.radiusSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Stamp'&&this.pdfViewer.stampSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Image'&&this.pdfViewer.customStampSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='FreeText'&&this.pdfViewer.freeTextSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if((type==='HandWrittenSignature'||type==='SignatureText'||type==='SignatureImage')&&this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Perimeter'&&this.pdfViewer.perimeterSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Area'&&this.pdfViewer.areaSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Volume'&&this.pdfViewer.volumeSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Ink'&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)*t.scale;}}};/**
     * @private
     * @param {PdfAnnotationBaseModel} type - Specified the annotation object.
     * @param {any} currentSelector - Specified the current selector value.
     * @returns {AnnotationSelectorSettingsModel} - Specified the annotation selector settings model.
     */ // eslint-disable-next-line
Drawing.prototype.getShape=function(type,currentSelector){// eslint-disable-next-line
var shapeType;{if(currentSelector&&_typeof(currentSelector)!=='object'&&currentSelector!==''){// eslint-disable-next-line
var annotationSelector=JSON.parse(currentSelector);shapeType=sf.base.isNullOrUndefined(annotationSelector.resizerShape)||annotationSelector.resizerShape==='Square'?'Square':annotationSelector.resizerShape;}else{// eslint-disable-next-line
var annotationSelector=this.pdfViewer.annotationSelectorSettings;shapeType=sf.base.isNullOrUndefined(annotationSelector.resizerShape)||annotationSelector.resizerShape==='Square'?'Square':annotationSelector.resizerShape;if(type==='Line'&&this.pdfViewer.lineSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape;}else if(type==='LineWidthArrowHead'&&this.pdfViewer.arrowSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape;}else if(type==='Rectangle'&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape;}else if(type==='Ellipse'&&this.pdfViewer.circleSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape;}else if(type==='Polygon'&&this.pdfViewer.polygonSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape;}else if(type==='Distance'&&this.pdfViewer.distanceSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape;}else if(type==='Radius'&&this.pdfViewer.radiusSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape;}else if(type==='Stamp'&&this.pdfViewer.stampSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape;}else if(type==='Image'&&this.pdfViewer.customStampSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerShape;}else if(type==='FreeText'&&this.pdfViewer.freeTextSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape;}else if((type==='HandWrittenSignature'||type==='SignatureText'||type==='SignatureImage')&&this.pdfViewer.handWrittenSignatureSettings&&this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape;}else if(type==='Perimeter'&&this.pdfViewer.perimeterSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape;}else if(type==='Area'&&this.pdfViewer.areaSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape;}else if(type==='Volume'&&this.pdfViewer.volumeSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape;}else if(type==='Ink'&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape;}}return shapeType;}};/**
     * @private
     * @param {PdfAnnotationBaseModel} type - Specified the annotaion object.
     * @param {CircleAttributes} options - Specified the circle attributes value.
     * @param {any} currentSelector - Specified the current selector value.
     * @param {Transforms} t - Specified the transforms value.
     * @returns {void}
     */ // eslint-disable-next-line
Drawing.prototype.getResizerColors=function(type,options,currentSelector,t){if(currentSelector&&_typeof(currentSelector)!=='object'&&currentSelector!==''){// eslint-disable-next-line
var annotationSelector=JSON.parse(currentSelector);options.stroke=sf.base.isNullOrUndefined(annotationSelector.resizerBorderColor)||annotationSelector.resizerBorderColor==='black'?'black':annotationSelector.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(annotationSelector.resizerFillColor)||annotationSelector.resizerFillColor==='#FF4081'?'#FF4081':annotationSelector.resizerFillColor;}else{// eslint-disable-next-line
var annotationSelector=this.pdfViewer.annotationSelectorSettings;options.stroke=sf.base.isNullOrUndefined(annotationSelector.resizerBorderColor)||annotationSelector.resizerBorderColor==='black'?'black':annotationSelector.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(annotationSelector.resizerFillColor)||annotationSelector.resizerFillColor==='#FF4081'?'#FF4081':annotationSelector.resizerFillColor;if(type==='Line'&&this.pdfViewer.lineSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='LineWidthArrowHead'&&this.pdfViewer.arrowSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Rectangle'&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Ellipse'&&this.pdfViewer.circleSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Distance'&&this.pdfViewer.distanceSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Polygon'&&this.pdfViewer.polygonSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Radius'&&this.pdfViewer.radiusSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Stamp'&&this.pdfViewer.stampSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Image'&&this.pdfViewer.customStampSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='FreeText'&&this.pdfViewer.freeTextSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor;}else if((type==='HandWrittenSignature'||type==='SignatureText'||type==='SignatureImage')&&this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Perimeter'&&this.pdfViewer.perimeterSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Area'&&this.pdfViewer.areaSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Volume'&&this.pdfViewer.volumeSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Ink'&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor;}}};/**
     * @private
     * @param {DrawingElement} wrapper - Specified the drawing element.
     * @param {HTMLCanvasElement | SVGElement} canvas - Specified the canvas element.
     * @param {Transforms} transform - Specified the transform value.
     * @param {SelectorConstraints} selectorConstraints - Specified the selector constraints value.
     * @param {boolean} canMask - Specified the is mask or not.
     * @returns {void}
     */Drawing.prototype.renderRotateThumb=function(wrapper,canvas,transform,selectorConstraints,canMask){var element=new sf.drawings.PathElement();var newPoint;var top=wrapper.offsetY-wrapper.actualSize.height*wrapper.pivot.y;var left=wrapper.offsetX-wrapper.actualSize.width*wrapper.pivot.x;var pivotX=left+wrapper.pivot.x*wrapper.actualSize.width;var pivotY=top;pivotX=(pivotX+transform.tx)*transform.scale;pivotY=(pivotY+transform.ty)*transform.scale;newPoint={x:pivotX,y:pivotY-25};if(wrapper.rotateAngle!==0||wrapper.parentTransform!==0){var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,wrapper.rotateAngle+wrapper.parentTransform,(transform.tx+wrapper.offsetX)*transform.scale,(transform.ty+wrapper.offsetY)*transform.scale);newPoint=sf.drawings.transformPointByMatrix(matrix,newPoint);}var options=getBaseShapeAttributes(wrapper);options.stroke='black';options.strokeWidth=1;options.opacity=1;options.fill='#FF4081';options.centerX=newPoint.x;options.centerY=newPoint.y;options.radius=4;options.angle=0;options.visible=true;options["class"]='e-diagram-rotate-handle';options.id='rotateThumb';this.svgRenderer.drawCircle(canvas,options,sf.drawings.ThumbsConstraints.Rotate,{'aria-label':'Thumb to rotate the selected object'});};/**
     * @private
     * @param {DrawingElement} element - Specified the drawing element.
     * @param {HTMLCanvasElement | SVGElement} canvas - Specified the canvas element.
     * @param {ThumbsConstraints} constraints - Specified the thumbs constraints element.
     * @param {number} currentZoom - Specified the current zoom value.
     * @param {boolean} canMask - Specified the is mask or not.
     * @param {number} enableNode - Specified the node number.
     * @param {boolean} nodeConstraints - Specified the node constraints or not.
     * @param {boolean} isStamp - Specified is stamp or not.
     * @param {boolean} isSticky - Specified is sticky or not.
     * @param {boolean} isPath - Specified is path or not.
     * @param {boolean} isFreeText - Specified is free text or not.
     * @param {AnnotationSelectorSettingsModel} currentSelector - Specified the current selector settings value.
     * @returns {void}
     */Drawing.prototype.renderResizeHandle=function(element,canvas,constraints,currentZoom,canMask,enableNode,nodeConstraints,isStamp,isSticky,isPath,isFreeText,currentSelector){var left=element.offsetX-element.actualSize.width*element.pivot.x;var top=element.offsetY-element.actualSize.height*element.pivot.y;var height=element.actualSize.height;var width=element.actualSize.width;var transform={scale:currentZoom,tx:0,ty:0};if(isStamp){this.renderPivotLine(element,canvas,transform);this.renderRotateThumb(element,canvas,transform);}if(isFreeText){isStamp=true;}this.renderBorder(element,canvas,currentSelector,transform,enableNode,nodeConstraints,true,isSticky);var nodeWidth=element.actualSize.width*currentZoom;var nodeHeight=element.actualSize.height*currentZoom;// eslint-disable-next-line max-len
var shapeType=this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType:this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType;var allowPermission=false;if(!this.pdfViewer.formDesignerModule){// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[0];// eslint-disable-next-line
var allowedInteraction=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);var isLock=this.pdfViewer.annotationModule.checkIsLockSettings(annotation);if((isLock||annotation.annotationSettings.isLock)&&this.getAllowedInteractions(allowedInteraction)){allowPermission=true;}}var resizerLocation=this.getResizerLocation(shapeType,currentSelector);if(resizerLocation<1||resizerLocation>3){resizerLocation=3;}var isNodeShape=false;if(this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Ellipse'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Radius'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Rectangle'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Ink')){isNodeShape=true;}if(!this.pdfViewer.viewerBase.checkSignatureFormField(element.id)&&!nodeConstraints&&!isSticky&&!isPath&&!allowPermission){if(isStamp||isNodeShape&&nodeWidth>=40&&nodeHeight>=40&&(resizerLocation===1||resizerLocation===3)){//Hide corners when the size is less than 40
this.renderCircularHandle('resizeNorthWest',element,left,top,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeNorthWest,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on top left side direction'},undefined,'e-pv-diagram-resize-handle e-northwest',currentSelector);this.renderCircularHandle('resizeNorthEast',element,left+width,top,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeNorthEast,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on top right side direction'},undefined,'e-pv-diagram-resize-handle e-northeast',currentSelector);this.renderCircularHandle('resizeSouthWest',element,left,top+height,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeSouthWest,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on bottom left side direction'},undefined,'e-pv-diagram-resize-handle e-southwest',currentSelector);this.renderCircularHandle('resizeSouthEast',element,left+width,top+height,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeSouthEast,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on bottom right side direction'},undefined,'e-pv-diagram-resize-handle e-southeast',currentSelector);}// eslint-disable-next-line max-len
if(!isStamp&&!isNodeShape||isNodeShape&&(resizerLocation===2||resizerLocation===3||!(nodeWidth>=40&&nodeHeight>=40)&&resizerLocation===1)){this.renderCircularHandle('resizeNorth',element,left+width/2,top,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeNorth,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on top side direction'},undefined,'e-pv-diagram-resize-handle e-north',currentSelector);this.renderCircularHandle('resizeSouth',element,left+width/2,top+height,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeSouth,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on bottom side direction'},undefined,'e-pv-diagram-resize-handle e-south',currentSelector);this.renderCircularHandle('resizeWest',element,left,top+height/2,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeWest,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on left side direction'},undefined,'e-pv-diagram-resize-handle e-west',currentSelector);this.renderCircularHandle('resizeEast',element,left+width,top+height/2,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeEast,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on right side direction'},undefined,'e-pv-diagram-resize-handle e-east',currentSelector);}}if(shapeType==='Textbox'||shapeType==='Checkbox'||shapeType==='RadioButton'||shapeType==='SignatureField'||shapeType==='InitialField'||shapeType==='DropdownList'||shapeType==='ListBox'||shapeType==='PasswordField'){this.renderCircularHandle('resizeNorth',element,left+width/2,top,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeNorth,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on top side direction'},undefined,'e-pv-diagram-resize-handle e-north',currentSelector);this.renderCircularHandle('resizeSouth',element,left+width/2,top+height,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeSouth,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on bottom side direction'},undefined,'e-pv-diagram-resize-handle e-south',currentSelector);this.renderCircularHandle('resizeWest',element,left,top+height/2,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeWest,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on left side direction'},undefined,'e-pv-diagram-resize-handle e-west',currentSelector);this.renderCircularHandle('resizeEast',element,left+width,top+height/2,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeEast,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on right side direction'},undefined,'e-pv-diagram-resize-handle e-east',currentSelector);}};// eslint-disable-next-line
Drawing.prototype.getAllowedInteractions=function(allowedInteraction){if(allowedInteraction&&allowedInteraction.length>0){for(var i=0;i<allowedInteraction.length;i++){if(allowedInteraction[0]!=='None'&&allowedInteraction[i]==='Resize'){return false;}}}return true;};/**
     * @private
     * @param {PdfAnnotationBaseModel} type - Specified the annotation base model.
     * @param {any} currentSelector - Specified the current selector value
     * @returns {AnnotationResizerLocation} - Returns the annotation resizer location value.
     */ // eslint-disable-next-line
Drawing.prototype.getResizerLocation=function(type,currentSelector){// eslint-disable-next-line
var resizerLocation;{if(currentSelector&&_typeof(currentSelector)!=='object'&&currentSelector!==''){// eslint-disable-next-line
var annotationSelector=JSON.parse(currentSelector);// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(annotationSelector.resizerLocation)||annotationSelector.resizerLocation===3?3:annotationSelector.resizerLocation;}else{// eslint-disable-next-line
var annotationSelector=this.pdfViewer.annotationSelectorSettings;// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(annotationSelector.resizerLocation)||annotationSelector.resizerLocation===3?3:annotationSelector.resizerLocation;if(type==='Line'&&this.pdfViewer.lineSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation;}else if(type==='LineWidthArrowHead'&&this.pdfViewer.arrowSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation;}else if(type==='Rectangle'&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation;}else if(type==='Ellipse'&&this.pdfViewer.circleSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation;}else if(type==='Polygon'&&this.pdfViewer.polygonSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation;}else if(type==='Distance'){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation;}else if(type==='Radius'&&this.pdfViewer.radiusSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation;}else if(type==='Stamp'&&this.pdfViewer.stampSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation;}else if(type==='FreeText'&&this.pdfViewer.freeTextSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation;}else if((type==='HandWrittenSignature'||type==='SignatureText'||type==='SignatureImage')&&this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation;}else if(type==='Ink'&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation;}}return resizerLocation;}};/**
     * @private
     * @param {DrawingElement} element - Specified the drawing element.
     * @param {HTMLCanvasElement | SVGAElement} canvas - Specified the canvas element.
     * @param {Transforms} transform - Specified the transform values.
     * @param {SelectorConstraints} selectorConstraints - Specified the selector constraints value.
     * @param {boolean} canMask - Specified is mask value or not.
     * @returns {void}
     */Drawing.prototype.renderPivotLine=function(element,canvas,transform,selectorConstraints,canMask){var wrapper=element;var dashArray='2,3';var visible=true;if(canMask){visible=false;}var options=getBaseShapeAttributes(wrapper,transform);options.fill='None';options.stroke='black';options.strokeWidth=1;options.dashArray=dashArray;options.visible=visible;var scale=transform.scale;options.x*=scale;options.y*=scale;options.width*=scale;options.height*=scale;options.id='pivotLine';options["class"]='e-diagram-pivot-line';var startPoint={x:wrapper.actualSize.width*wrapper.pivot.x*scale,y:-20};var endPoint={x:wrapper.actualSize.width*wrapper.pivot.x*scale,y:0};options.startPoint=startPoint;options.endPoint=endPoint;this.svgRenderer.drawLine(canvas,options);};/**
     * @private
     * @param {PdfAnnotationBaseModel} selector - Specified the annotation element.
     * @param {HTMLCanvasElement | SVGAElement} canvas - Specified the canvas element.
     * @param {SelectorConstraints} constraints - Specified the selector constraints value.
     * @param {Transforms} transform - Specified the transform values.
     * @param {boolean} connectedSource - Specified is connected source or not.
     * @param {boolean} connectedTarget - Specified is connected target or not.
     * @param {boolean} isSegmentEditing - Specified is segment editing or not.
     * @param {AnnotationSelectorSettingsModel} currentSelector - Specified the current selector value.
     * @returns {void}
     */Drawing.prototype.renderEndPointHandle=function(selector,canvas,constraints,transform,connectedSource,connectedTarget,isSegmentEditing,currentSelector){transform=transform||{tx:0,ty:0,scale:1};var sourcePoint=selector.sourcePoint;var targetPoint=selector.targetPoint;var wrapper=selector.wrapper;var i;for(i=0;i<selector.vertexPoints.length;i++){var segment=selector.vertexPoints[i];this.renderCircularHandle('segementThumb_'+(i+1),wrapper,segment.x,segment.y,canvas,true,constraints&sf.drawings.ThumbsConstraints.ConnectorSource,transform,connectedSource,null,null,i,null,currentSelector);}var leaderCount=0;if(selector.shapeAnnotationType==='Distance'){for(i=0;i<selector.wrapper.children.length;i++){var segment=selector.wrapper.children[i];var newPoint1=void 0;var angle=sf.drawings.Point.findAngle(selector.sourcePoint,selector.targetPoint);if(segment.id.indexOf('leader')>-1){var center=selector.wrapper.children[0].bounds.center;if(leaderCount===0){newPoint1={x:selector.sourcePoint.x,y:selector.sourcePoint.y-selector.leaderHeight};center=sourcePoint;}else{newPoint1={x:selector.targetPoint.x,y:selector.targetPoint.y-selector.leaderHeight};center=targetPoint;}var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,angle,center.x,center.y);var rotatedPoint=sf.drawings.transformPointByMatrix(matrix,{x:newPoint1.x,y:newPoint1.y});this.renderCircularHandle('leaderThumb_'+(i+1),wrapper,rotatedPoint.x,rotatedPoint.y,canvas,true,constraints&sf.drawings.ThumbsConstraints.ConnectorSource,transform,connectedSource,null,null,i,null,currentSelector);leaderCount++;}}}};/**
     * @private
     * @returns {void}
     */Drawing.prototype.initSelectorWrapper=function(){var selectorModel=this.pdfViewer.selectedItems;// (selectorModel as Selector).init(this);
this.initWrapper(this);};/**
     * Initializes the UI of the container
     *
     * @param  {any} diagram - diagram element.
     * @returns {Container} - Returns the container element.
     */ // eslint-disable-next-line
Drawing.prototype.initWrapper=function(diagram){var container=new sf.drawings.Container();container.measureChildren=false;container.children=[];if(this.pdfViewer.selectedItems.formFields&&this.pdfViewer.selectedItems.formFields.length>0){for(var i=0;i<this.pdfViewer.selectedItems.formFields.length;i++){var node=diagram.pdfViewer.nameTable[this.pdfViewer.selectedItems.formFields[i].id];var wrapper=node.wrapper;container.children.push(wrapper);}}else if(this.pdfViewer.selectedItems.annotations){for(var i=0;i<this.pdfViewer.selectedItems.annotations.length;i++){if(!sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations[i])){var node=diagram.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[i].id];var wrapper=node.wrapper;container.children.push(wrapper);this.pdfViewer.selectedItems.wrapper=container;}}}this.pdfViewer.selectedItems.wrapper=container;return container;};/**
     * @private
     * @param {string[]} objArray - Specified the annotation object array.
     * @param {any} currentSelector - Specified the current selector value.
     * @param {boolean} multipleSelection - Specified the multiple selection or not.
     * @param {boolean} preventUpdate - Specified the prevent update or not.
     * @returns {void}
     */ // eslint-disable-next-line
Drawing.prototype.select=function(objArray,currentSelector,multipleSelection,preventUpdate){var selectorModel=this.pdfViewer.selectedItems;for(var i=0;i<objArray.length;i++){// eslint-disable-next-line
var obj=this.pdfViewer.nameTable[objArray[i]];if(obj.formFieldAnnotationType&&this.pdfViewer.designerMode){selectorModel.formFields.push(obj);this.initSelectorWrapper();selectorModel.wrapper.children.push(obj.wrapper);this.renderSelector(obj.pageIndex,currentSelector,obj,true);}else if(obj&&!obj.formFieldAnnotationType){if(!(obj instanceof Selector)&&obj.wrapper.visible){// eslint-disable-next-line
var annotationSettings=void 0;if(obj.annotationSettings){annotationSettings=obj.annotationSettings;annotationSettings.isLock=JSON.parse(annotationSettings.isLock);}else if(!obj.formFieldAnnotationType){annotationSettings=this.pdfViewer.annotationModule.findAnnotationSettings(obj,true);obj.annotationSettings=annotationSettings;}var isLock=!obj.formFieldAnnotationType?annotationSettings.isLock:false;if(annotationSettings&&annotationSettings.isLock&&this.pdfViewer.annotationModule.checkAllowedInteractions('Select',obj)){isLock=false;}if(!isLock){selectorModel.annotations.push(obj);this.initSelectorWrapper();selectorModel.wrapper.rotateAngle=selectorModel.rotateAngle=0;selectorModel.wrapper.children.push(obj.wrapper);if(!preventUpdate){this.renderSelector(obj.pageIndex,currentSelector,obj,true);}}}}}};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotaion object.
     * @param {number} tx - Specified the tx value.
     * @param {number} ty - Specified the ty value.
     * @param {number} pageIndex - Specified the page index value.
     * @param {any} currentSelector - Specified the current selector value.
     * @param {PdfAnnotationBaseModel} helper - Specified the helper object.
     * @returns {void}
     */ // eslint-disable-next-line
Drawing.prototype.dragSelectedObjects=function(tx,ty,pageIndex,currentSelector,helper){var obj=this.pdfViewer.selectedItems;this.drag(obj,tx,ty,currentSelector,helper);return true;};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotaion object.
     * @param {number} tx - Specified the tx value.
     * @param {number} ty - Specified the ty value.
     * @param {any} currentSelector - Specified the current selector value.
     * @param {PdfAnnotationBaseModel} helper - Specified the helper object.
     * @returns {void}
     */ // eslint-disable-next-line
Drawing.prototype.drag=function(obj,tx,ty,currentSelector,helper){if(obj instanceof Selector){if(obj.annotations.length){for(var _i=0,_a=obj.annotations;_i<_a.length;_i++){var node=_a[_i];this.drag(node,tx,ty,currentSelector,helper);this.renderSelector(node.pageIndex,currentSelector,helper);}}}else{this.dragAnnotation(obj.annotations[0],tx,ty);}};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotaion object.
     * @param {number} tx - Specified the tx value.
     * @param {number} ty - Specified the ty value.
     * @returns {void}
     */Drawing.prototype.dragAnnotation=function(obj,tx,ty){var oldValues={x:obj.wrapper.offsetX,y:obj.wrapper.offsetY};obj.wrapper.offsetX+=tx;obj.wrapper.offsetY+=ty;if(isLineShapes(obj)||obj.shapeAnnotationType==='Polygon'){if(obj.wrapper.children.length){var nodes=obj.wrapper.children;for(var i=0;i<nodes.length;i++){nodes[i].offsetX+=tx;nodes[i].offsetY+=ty;}}this.dragControlPoint(obj,tx,ty,true);}this.nodePropertyChange(obj,{bounds:{x:obj.wrapper.offsetX,y:obj.wrapper.offsetY}});obj.wrapper.measureChildren=false;var annotPageNumber=obj.pageIndex?obj.pageIndex:this.pdfViewer.selectedItems.annotations[0].pageIndex;// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+annotPageNumber);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvas,annotPageNumber);};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotaion object.
     * @param {number} tx - Specified the tx value.
     * @param {number} ty - Specified the ty value.
     * @param {boolean} preventUpdate - Specified the prevent update or not.
     * @param {number} segmentNumber - Specified the segment value.
     * @returns {boolean} - Returns true or false.
     */Drawing.prototype.dragControlPoint=function(obj,tx,ty,preventUpdate,segmentNumber){// eslint-disable-next-line
var connector=this.pdfViewer.nameTable[obj.id];for(var i=0;i<connector.vertexPoints.length;i++){connector.vertexPoints[i].x+=tx;connector.vertexPoints[i].y+=ty;}if(!preventUpdate){this.updateEndPoint(connector);}return true;};/**
     * @private
     * @param {PdfAnnotationBaseModel} connector - Specified the connector object.
     * @returns {void}
     */Drawing.prototype.updateEndPoint=function(connector){this.nodePropertyChange(connector,{vertexPoints:connector.vertexPoints});this.renderSelector(connector.pageIndex);};/**
     * @private
     * @param {PdfAnnotationBaseModel} actualObject - Specified the actual annotaion object.
     * @param {PdfAnnotationBaseModel} node - Specified the node annotation object.
     * @returns {void}
     */Drawing.prototype.nodePropertyChange=function(actualObject,node){var existingBounds=actualObject.wrapper.outerBounds;var existingInnerBounds=actualObject.wrapper.bounds;var i;if(node.bounds){if(node.bounds.width!==undefined){actualObject.bounds.width=actualObject.wrapper.width=node.bounds.width;}if(node.bounds.height!==undefined){actualObject.bounds.height=actualObject.wrapper.height=node.bounds.height;}if(node.bounds.x!==undefined){actualObject.bounds.x=node.bounds.x-actualObject.bounds.width*0.5;actualObject.wrapper.offsetX=node.bounds.x;}if(node.bounds.y!==undefined){actualObject.bounds.y=node.bounds.y-actualObject.bounds.height*0.5;actualObject.wrapper.offsetY=node.bounds.y;}if(node.leaderHeight!==undefined){actualObject.leaderHeight=node.leaderHeight;this.updateConnector(actualObject,actualObject.vertexPoints);}if(actualObject.wrapper.children.length){var children=actualObject.wrapper.children;for(var i_1=0;i_1<children.length;i_1++){if(children[i_1].id){var names=children[i_1].id.split('_');if(names.length&&(names.indexOf('perimeter')>-1||names.indexOf('radius')>-1)){this.setNodePosition(children[i_1],actualObject);}else if(names.length&&names.indexOf('srcDec')>-1){children[i_1].offsetX=actualObject.vertexPoints[0].x;children[i_1].offsetY=actualObject.vertexPoints[0].y;}else if(names.length&&names.indexOf('tarDec')>-1){children[i_1].offsetX=actualObject.vertexPoints[actualObject.vertexPoints.length-1].x;children[i_1].offsetY=actualObject.vertexPoints[actualObject.vertexPoints.length-1].y;}else if(names.length&&names.indexOf('stamp')>-1){// eslint-disable-next-line
var ratio=0;if(actualObject.wrapper.width!==undefined&&actualObject.wrapper.height!==undefined){ratio=20;}if(actualObject.isDynamicStamp){children[i_1].width=actualObject.bounds.width-ratio;children[i_1].height=actualObject.bounds.height/2-ratio;// eslint-disable-next-line
var element=children[1];// eslint-disable-next-line
var annotationSettings=this.pdfViewer.stampSettings?this.pdfViewer.stampSettings:this.pdfViewer.annotationSettings;// eslint-disable-next-line max-len
if(annotationSettings&&(annotationSettings.maxHeight||annotationSettings.maxWidth)&&actualObject.bounds.height>60){if(ratio!=0){element.style.fontSize=actualObject.bounds.width/ratio;}else{element.style.fontSize=actualObject.wrapper.bounds.width/20;}}else{if(ratio!=0){element.style.fontSize=this.fontSizeCalculation(actualObject,element,actualObject.bounds.width-20);}else{element.style.fontSize=this.fontSizeCalculation(actualObject,element,actualObject.wrapper.bounds.width-20);}}if(ratio!==0){element.margin.bottom=-(children[i_1].height/2);}}else{children[i_1].width=actualObject.bounds.width-ratio;children[i_1].height=actualObject.bounds.height-ratio;}children[i_1].offsetX=actualObject.wrapper.offsetX;children[i_1].offsetY=actualObject.wrapper.offsetX;children[i_1].isDirt=true;}}}}}if(node.sourceDecoraterShapes!==undefined){actualObject.sourceDecoraterShapes=node.sourceDecoraterShapes;this.updateConnector(actualObject,actualObject.vertexPoints);}if(node.isReadonly!==undefined&&actualObject.shapeAnnotationType==='FreeText'){actualObject.isReadonly=node.isReadonly;}if(node.taregetDecoraterShapes!==undefined){actualObject.taregetDecoraterShapes=node.taregetDecoraterShapes;this.updateConnector(actualObject,actualObject.vertexPoints);}if(node.fillColor!==undefined){actualObject.fillColor=node.fillColor;actualObject.wrapper.children[0].style.fill=node.fillColor;if((actualObject.enableShapeLabel||actualObject.measureType)&&actualObject.wrapper&&actualObject.wrapper.children){// eslint-disable-next-line
var children=actualObject.wrapper.children;for(var i_2=0;i_2<children.length;i_2++){if(children[i_2].textNodes){if(actualObject.enableShapeLabel){actualObject.labelFillColor=node.fillColor;children[i_2].style.fill=node.fillColor;}if(actualObject.measureType){children[i_2].style.fill=node.fillColor;}}}}}if(actualObject.enableShapeLabel&&node.labelFillColor!==undefined){if(actualObject.enableShapeLabel&&actualObject.wrapper&&actualObject.wrapper.children){// eslint-disable-next-line
var children=actualObject.wrapper.children;for(var i_3=0;i_3<children.length;i_3++){if(children[i_3].textNodes){actualObject.labelFillColor=node.labelFillColor;children[i_3].style.fill=node.labelFillColor;}}}}if(node.opacity!==undefined){if(actualObject.shapeAnnotationType==='Stamp'||actualObject.shapeAnnotationType==='FreeText'){actualObject.wrapper.children[1].style.opacity=node.opacity;if(actualObject.wrapper.children[2]){actualObject.wrapper.children[2].style.opacity=node.opacity;}actualObject.opacity=node.opacity;}else{if(actualObject.shapeAnnotationType==='StickyNotes'){// eslint-disable-next-line
this.pdfViewer.nameTable[actualObject.annotName].wrapper.children[0].style.opacity=node.opacity;}actualObject.opacity=node.opacity;}actualObject.wrapper.children[0].style.opacity=node.opacity;if(actualObject.enableShapeLabel&&actualObject.wrapper&&actualObject.wrapper.children){// eslint-disable-next-line
var children=actualObject.wrapper.children;for(var i_4=0;i_4<children.length;i_4++){if(children[i_4].textNodes){children[i_4].style.opacity=node.labelOpacity;}}}}if(actualObject.enableShapeLabel&&node.labelOpacity!==undefined){if(actualObject.enableShapeLabel&&actualObject.wrapper&&actualObject.wrapper.children){// eslint-disable-next-line
var children=actualObject.wrapper.children;for(var i_5=0;i_5<children.length;i_5++){if(children[i_5].textNodes){children[i_5].style.opacity=node.labelOpacity;}}}}if(node.rotateAngle!==undefined){actualObject.rotateAngle=node.rotateAngle;actualObject.wrapper.rotateAngle=node.rotateAngle;}if(node.strokeColor!==undefined){actualObject.strokeColor=node.strokeColor;actualObject.wrapper.children[0].style.strokeColor=node.strokeColor;}if(node.fontColor!==undefined){actualObject.fontColor=node.fontColor;if(actualObject.shapeAnnotationType==='FreeText'&&actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children;children[1].style.color=node.fontColor;if(actualObject.textAlign==='Justify'){children[1].horizontalAlignment='Center';}else{children[1].horizontalAlignment='Auto';}}if(actualObject.enableShapeLabel&&actualObject.wrapper&&actualObject.wrapper.children){// eslint-disable-next-line
var children=actualObject.wrapper.children;for(var i_6=0;i_6<children.length;i_6++){if(children[i_6].textNodes){children[i_6].style.color=node.fontColor;}}}}if(node.fontFamily!==undefined){actualObject.fontFamily=node.fontFamily;if(actualObject.shapeAnnotationType==='FreeText'&&actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children;children[1].style.fontFamily=node.fontFamily;}if(actualObject.enableShapeLabel&&actualObject.wrapper&&actualObject.wrapper.children){// eslint-disable-next-line
var children=actualObject.wrapper.children;for(var i_7=0;i_7<children.length;i_7++){if(children[i_7].textNodes){children[i_7].style.fontFamily=node.fontFamily;}}}}if(node.fontSize!==undefined){actualObject.fontSize=node.fontSize;if((actualObject.shapeAnnotationType==='FreeText'||actualObject.shapeAnnotationType==='SignatureText')&&actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children;children[1].style.fontSize=node.fontSize;if(actualObject.shapeAnnotationType==='SignatureText'){actualObject.wrapper.children[1].bounds.width=actualObject.bounds.width;actualObject.wrapper.children[1].desiredSize.width=actualObject.bounds.width;actualObject.wrapper.children[1].actualSize.width=actualObject.bounds.width;children[1].horizontalAlignment='Center';children[1].verticalAlignment='Center';children[1].setOffsetWithRespectToBounds(0,0,'Absolute');}}if(actualObject.enableShapeLabel&&actualObject.wrapper&&actualObject.wrapper.children){// eslint-disable-next-line
var children=actualObject.wrapper.children;for(var i_8=0;i_8<children.length;i_8++){if(children[i_8].textNodes){children[i_8].style.fontSize=node.fontSize;}}}}if(node.font!==undefined){if(actualObject.shapeAnnotationType==='FreeText'&&actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children;if(node.font.isBold!==undefined){children[1].style.bold=node.font.isBold;actualObject.font.isBold=node.font.isBold;}if(node.font.isItalic!==undefined){children[1].style.italic=node.font.isItalic;actualObject.font.isItalic=node.font.isItalic;}if(node.font.isUnderline!==undefined){if(node.font.isUnderline){actualObject.font.isStrikeout=false;}if(node.font.isUnderline===true){children[1].style.textDecoration='Underline';}else{if(!node.font.isStrikeout){children[1].style.textDecoration='None';}}actualObject.font.isUnderline=node.font.isUnderline;}if(node.font.isStrikeout!==undefined){if(node.font.isStrikeout){actualObject.font.isUnderline=false;}if(node.font.isStrikeout===true){children[1].style.textDecoration='LineThrough';}else{if(!node.font.isUnderline){children[1].style.textDecoration='None';}}actualObject.font.isStrikeout=node.font.isStrikeout;}}}if(node.textAlign!==undefined){actualObject.textAlign=node.textAlign;if(actualObject.shapeAnnotationType==='FreeText'&&actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children;children[1].style.textAlign=node.textAlign;if(children[1].childNodes.length===1){if(actualObject.textAlign==='Justify'){children[1].horizontalAlignment='Left';children[1].setOffsetWithRespectToBounds(0,0,null);}else if(actualObject.textAlign==='Right'){children[1].horizontalAlignment='Right';children[1].setOffsetWithRespectToBounds(0.97,0,null);}else if(actualObject.textAlign==='Left'){children[1].horizontalAlignment='Left';children[1].setOffsetWithRespectToBounds(0,0,null);}else if(actualObject.textAlign==='Center'){children[1].horizontalAlignment='Center';children[1].setOffsetWithRespectToBounds(0.46,0,null);}}else if(children[1].childNodes.length>1&&actualObject.textAlign==='Justify'){children[1].horizontalAlignment='Center';}else{children[1].horizontalAlignment='Auto';}}}if(node.thickness!==undefined){actualObject.thickness=node.thickness;actualObject.wrapper.children[0].style.strokeWidth=node.thickness;}if(node.borderDashArray!==undefined){actualObject.borderDashArray=node.borderDashArray;actualObject.wrapper.children[0].style.strokeDashArray=node.borderDashArray;}if(node.borderStyle!==undefined){actualObject.borderStyle=node.borderStyle;}if(node.author!==undefined){actualObject.author=node.author;}if(node.modifiedDate!==undefined){actualObject.modifiedDate=node.modifiedDate;}if(node.subject!==undefined){actualObject.subject=node.subject;}if(node.vertexPoints!==undefined){actualObject.vertexPoints=node.vertexPoints;// eslint-disable-next-line
this.pdfViewer.nameTable[actualObject.id].vertexPoints=node.vertexPoints;this.updateConnector(actualObject,node.vertexPoints);}if(node.leaderHeight!==undefined&&actualObject.shapeAnnotationType!=='Polygon'){actualObject.leaderHeight=node.leaderHeight;this.updateConnector(actualObject,actualObject.vertexPoints);}if(node.notes!==undefined){actualObject.notes=node.notes;}if(node.annotName!==undefined){actualObject.annotName=node.annotName;}if(actualObject.shapeAnnotationType==='Distance'){for(i=0;i<actualObject.wrapper.children.length;i++){// eslint-disable-next-line
var segment=actualObject.wrapper.children[i];// eslint-disable-next-line
var points=getConnectorPoints(actualObject);if(segment.id.indexOf('leader1')>-1){this.setLineDistance(actualObject,points,segment,false);}if(segment.id.indexOf('leader2')>-1){this.setLineDistance(actualObject,points,segment,true);}}this.updateConnector(actualObject,actualObject.vertexPoints);}if(actualObject.shapeAnnotationType==='Polygon'&&node.vertexPoints){actualObject.data=getPolygonPath(actualObject.vertexPoints);// eslint-disable-next-line
var path=actualObject.wrapper.children[0];path.data=actualObject.data;path.canMeasurePath=true;}if(isLineShapes(actualObject)){for(var i_9=0;i_9<actualObject.wrapper.children.length;i_9++){// eslint-disable-next-line
var childElement=actualObject.wrapper.children[i_9];if(!childElement.textNodes){setElementStype(actualObject,actualObject.wrapper.children[i_9]);}if(actualObject.enableShapeLabel===true){if(actualObject.wrapper.children[i_9]instanceof sf.drawings.TextElement){actualObject.wrapper.children[i_9].style.fill=actualObject.labelFillColor;}if(actualObject.wrapper.children[i_9]instanceof sf.drawings.PathElement&&actualObject.measureType==='Perimeter'){actualObject.wrapper.children[i_9].style.fill='transparent';}}else{if(actualObject.wrapper.children[i_9]instanceof sf.drawings.PathElement&&actualObject.measureType==='Perimeter'||actualObject.wrapper.children[i_9]instanceof sf.drawings.TextElement){actualObject.wrapper.children[i_9].style.fill='transparent';}}}}if(actualObject&&(actualObject.shapeAnnotationType==='FreeText'||actualObject.enableShapeLabel===true)){if(actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children;for(var i_10=0;i_10<children.length;i_10++){if(children[i_10].textNodes){if(actualObject.shapeAnnotationType==='FreeText'){if(node.dynamicText){children[i_10].content=node.dynamicText;actualObject.dynamicText=node.dynamicText;}else{children[i_10].content=actualObject.dynamicText;}children[i_10].width=actualObject.bounds.width;}else if(actualObject.enableShapeLabel===true&&actualObject.measureType){if(node.labelContent){children[i_10].content=node.labelContent;actualObject.labelContent=node.labelContent;}else{children[i_10].content=actualObject.labelContent;}actualObject.notes=children[i_10].content;}else if(actualObject.enableShapeLabel===true){if(node.labelContent){children[i_10].content=node.labelContent;actualObject.labelContent=node.labelContent;}else{children[i_10].content=actualObject.labelContent;}actualObject.notes=children[i_10].content;}children[i_10].isDirt=true;}/** set text node width less than the parent */}}}actualObject.wrapper.measure(new sf.drawings.Size(actualObject.wrapper.bounds.width,actualObject.wrapper.bounds.height));actualObject.wrapper.arrange(actualObject.wrapper.desiredSize);if(actualObject&&actualObject.formFieldAnnotationType){if(actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children[0];children.actualSize.width=actualObject.wrapper.desiredSize.width;children.actualSize.height=actualObject.wrapper.desiredSize.height;}}if(actualObject&&actualObject.shapeAnnotationType==='FreeText'&&actualObject.subject==='Text Box'){if(actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children;if(children[1].childNodes.length>1&&actualObject.textAlign==='Justify'){children[1].horizontalAlignment='Center';}else if(children[1].childNodes.length===1){if(actualObject.textAlign==='Justify'){children[1].horizontalAlignment='Left';children[1].setOffsetWithRespectToBounds(0,0,null);}else if(actualObject.textAlign==='Right'){children[1].horizontalAlignment='Right';children[1].setOffsetWithRespectToBounds(0.97,0,null);}else if(actualObject.textAlign==='Left'){children[1].horizontalAlignment='Left';children[1].setOffsetWithRespectToBounds(0,0,null);}else if(actualObject.textAlign==='Center'){children[1].horizontalAlignment='Center';children[1].setOffsetWithRespectToBounds(0.46,0,null);}}for(var i_11=0;i_11<children.length;i_11++){if(children[i_11].textNodes&&children[i_11].textNodes.length>0){children[i_11].isDirt=true;var childNodeHeight=children[i_11].textNodes.length*children[i_11].textNodes[0].dy;var heightDiff=actualObject.bounds.height-childNodeHeight;if(heightDiff>0&&heightDiff<children[i_11].textNodes[0].dy){childNodeHeight=childNodeHeight+children[i_11].textNodes[0].dy;}if(childNodeHeight>actualObject.bounds.height){var contString='';for(var index=0;index<children[i_11].textNodes.length;index++){// eslint-disable-next-line
var childHeight=children[i_11].textNodes[0].dy*(index+1);// eslint-disable-next-line
childHeight=childHeight;contString=contString+children[i_11].textNodes[index].text;}if(heightDiff<0){children[i_11].content=contString;}}}/** set text node width less than the parent */children[i_11].width=actualObject.bounds.width;}}actualObject.wrapper.measure(new sf.drawings.Size(actualObject.wrapper.bounds.width,actualObject.wrapper.bounds.height));actualObject.wrapper.arrange(actualObject.wrapper.desiredSize);}this.pdfViewer.renderDrawing(undefined,actualObject.pageIndex);if(actualObject&&actualObject.shapeAnnotationType==='FreeText'){if(actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children;if(children[1].childNodes.length===1&&actualObject.textAlign==='Justify'){children[1].horizontalAlignment='Left';children[1].setOffsetWithRespectToBounds(0.5,0,null);}else if(children[1].childNodes.length>1&&actualObject.textAlign==='Justify'){children[1].horizontalAlignment='Center';children[1].setOffsetWithRespectToBounds(0,0,null);}}}};Drawing.prototype.fontSizeCalculation=function(actualObject,element,boundsWidth){var canvas=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+actualObject.pageIndex);var context=canvas.getContext("2d");var textwidth=0;var newsize=0;var fontStyle='';if(element.style.italic&&element.style.bold){fontStyle='bold italic ';}else if(element.style.bold){fontStyle='bold ';}else if(element.style.italic){fontStyle='italic ';}while(boundsWidth>textwidth){context.font=fontStyle+newsize+'px '+element.style.fontFamily;textwidth=context.measureText(actualObject.dynamicText).width;newsize+=0.1;}newsize-=0.1;return newsize;};// eslint-disable-next-line
Drawing.prototype.setLineDistance=function(actualObject,points,segment,leader){var node1;if(leader){node1=initLeader(actualObject,points[1],points[0],leader);}else{node1=initLeader(actualObject,points[0],points[1],leader);}segment.data=node1.data;segment.offsetX=node1.offsetX;segment.offsetY=node1.offsetY;segment.rotateAngle=node1.rotateAngle;segment.width=node1.width;segment.height=node1.height;segment.pivot=node1.pivot;segment.canMeasurePath=true;segment.isDirt=true;};/**
     * @private
     * @param {number} sx - Specified the sx value.
     * @param {number} sy - Specified the sy value.
     * @param {PointModel} pivot - Specified the pivot value.
     * @returns {boolean} - Returns true or false.
     */Drawing.prototype.scaleSelectedItems=function(sx,sy,pivot){var obj=this.pdfViewer.selectedItems;return this.scale(obj,sx,sy,pivot);};/**
     * @private
     * @param {PdfAnnotationBaseModel | SelectorModel} obj - Specified the annotaion object.
     * @param {number} sx - Specified the sx value.
     * @param {number} sy - Specified the sy value.
     * @param {PointModel} pivot - Specified the pivot value.
     * @returns {boolean} - Returns true or false.
     */Drawing.prototype.scale=function(obj,sx,sy,pivot){var checkBoundaryConstraints=true;if(obj instanceof Selector){if(obj.annotations&&obj.annotations.length){for(var _i=0,_a=obj.annotations;_i<_a.length;_i++){var node=_a[_i];checkBoundaryConstraints=this.scaleAnnotation(node,sx,sy,pivot,obj);}}else if(obj.formFields&&obj.formFields.length){for(var _b=0,_c=obj.formFields;_b<_c.length;_b++){var node=_c[_b];checkBoundaryConstraints=this.scaleAnnotation(node,sx,sy,pivot,obj);}}}else{checkBoundaryConstraints=this.scaleAnnotation(obj.annotations[0],sx,sy,pivot,undefined);}return checkBoundaryConstraints;};/**
     * @private
     * @param {number} sw - Specified the sw value.
     * @param {number} sh - Specified the sh value.
     * @param {PointModel} pivot - Specified the pivot value.
     * @param {IElement} obj - Specified the annotation object.
     * @param {DrawingElement} element - Specified the annotation element.
     * @param {IElement} refObject - Specified the annotation reference object.
     * @returns {void}
     */Drawing.prototype.scaleObject=function(sw,sh,pivot,obj,element,refObject){sw=sw<0?1:sw;sh=sh<0?1:sh;if(sw!==1||sh!==1){var width=void 0;var height=void 0;if(!isLineShapes(obj)){var node=obj;var isResize=void 0;var bound=void 0;width=node.wrapper.actualSize.width*sw;height=node.wrapper.actualSize.height*sh;if(isResize){width=Math.max(width,bound.right-node.wrapper.bounds.x);height=Math.max(height,bound.bottom-node.wrapper.bounds.y);}sw=width/node.wrapper.actualSize.width;sh=height/node.wrapper.actualSize.height;}var matrix=sf.drawings.identityMatrix();if(!refObject){refObject=obj;}var refWrapper=refObject.wrapper;sf.drawings.rotateMatrix(matrix,-refWrapper.rotateAngle,pivot.x,pivot.y);sf.drawings.scaleMatrix(matrix,sw,sh,pivot.x,pivot.y);sf.drawings.rotateMatrix(matrix,refWrapper.rotateAngle,pivot.x,pivot.y);if(!isLineShapes(obj)){var node=obj;var newPosition=sf.drawings.transformPointByMatrix(matrix,{x:node.wrapper.offsetX,y:node.wrapper.offsetY});if(width>0){node.wrapper.width=width;node.wrapper.offsetX=newPosition.x;}if(height>0){node.wrapper.height=height;node.wrapper.offsetY=newPosition.y;}this.nodePropertyChange(obj,{bounds:{width:node.wrapper.width,height:node.wrapper.height,x:node.wrapper.offsetX,y:node.wrapper.offsetY}});obj.wrapper.measureChildren=false;var annotPageNumber=obj.pageIndex?obj.pageIndex:this.pdfViewer.selectedItems.annotations[0].pageIndex;// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+annotPageNumber);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvas,annotPageNumber);}}};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotaion object.
     * @param {number} sw - Specified the sw value.
     * @param {number} sh - Specified the sh value.
     * @param {PointModel} pivot - Specified the pivot value.
     * @param {IElement} refObject - Specified the reference object.
     * @returns {boolean} - Returns true or false.
     */Drawing.prototype.scaleAnnotation=function(obj,sw,sh,pivot,refObject){// eslint-disable-next-line
var node=this.pdfViewer.nameTable[obj.id];var element=node.wrapper;if(!refObject){refObject=obj;}var refWrapper=refObject.wrapper;var x=refWrapper.offsetX-refWrapper.actualSize.width*refWrapper.pivot.x;var y=refWrapper.offsetY-refWrapper.actualSize.height*refWrapper.pivot.y;var refPoint=this.getShapePoint(x,y,refWrapper.actualSize.width,refWrapper.actualSize.height,refWrapper.rotateAngle,refWrapper.offsetX,refWrapper.offsetY,pivot);if(element.actualSize.width!==undefined&&element.actualSize.height!==undefined){this.scaleObject(sw,sh,refPoint,node,element,refObject);}// eslint-disable-next-line max-len
var constraints=this.checkBoundaryConstraints(undefined,undefined,obj.pageIndex,obj.wrapper.bounds);if(!constraints){this.scaleObject(1/sw,1/sh,refPoint,node,element,refObject);}return constraints;};/**
     * @private
     * @param {number} tx - Specified the tx value.
     * @param {number} ty - Specified the ty value.
     * @param {number} pageIndex - Specified the page index value.
     * @param {Rect} nodeBounds - Specified the node bounds value.
     * @param {boolean} isStamp - Specified the annotation is stamp or not.
     * @param {boolean} isSkip - Specified the annotaion is skip or not.
     * @returns {boolean} - Returns true or false.
     */ // eslint-disable-next-line max-len
Drawing.prototype.checkBoundaryConstraints=function(tx,ty,pageIndex,nodeBounds,isStamp,isSkip){var selectorBounds=!nodeBounds?this.pdfViewer.selectedItems.wrapper.bounds:undefined;var bounds=nodeBounds;// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);var heightDifference=10;if(canvas){var width=canvas.clientWidth/this.pdfViewer.viewerBase.getZoomFactor();var height=canvas.clientHeight/this.pdfViewer.viewerBase.getZoomFactor();var right=(nodeBounds?bounds.right:selectorBounds.right)+(tx||0);var left=(nodeBounds?bounds.left:selectorBounds.left)+(tx||0);var top_1=(nodeBounds?bounds.top:selectorBounds.top)+(ty||0);var bottom=(nodeBounds?bounds.bottom:selectorBounds.bottom)+(ty||0);if(isStamp){heightDifference=50;if(this.pdfViewer.viewerBase.eventArgs&&this.pdfViewer.viewerBase.eventArgs.source){if(this.RestrictStamp(this.pdfViewer.viewerBase.eventArgs.source)){return false;}}}if(right<=width-10&&left>=10&&bottom<=height-10&&top_1>=heightDifference||isSkip){return true;}}return false;};// eslint-disable-next-line
Drawing.prototype.RestrictStamp=function(source){// eslint-disable-next-line max-len
if(source&&source.pageIndex!==undefined&&this.pdfViewer.viewerBase.activeElements&&source.pageIndex!==this.pdfViewer.viewerBase.activeElements.activePageID){return true;}return false;};/**
     * @private
     * @param {DrawingElement} shapeElement - Specified the shape element.
     * @returns {Rect} - Returns the rectangle object.
     */Drawing.prototype.getShapeBounds=function(shapeElement){var shapeBounds=new sf.drawings.Rect();var shapeCorners=sf.drawings.cornersPointsBeforeRotation(shapeElement);var shapeMiddleLeft=shapeCorners.middleLeft;var shapeTopCenter=shapeCorners.topCenter;var shapeBottomCenter=shapeCorners.bottomCenter;var shapeMiddleRight=shapeCorners.middleRight;var shapeTopLeft=shapeCorners.topLeft;var shapeTopRight=shapeCorners.topRight;var shapeBottomLeft=shapeCorners.bottomLeft;var shapeBottomRight=shapeCorners.bottomRight;shapeElement.corners={topLeft:shapeTopLeft,topCenter:shapeTopCenter,topRight:shapeTopRight,middleLeft:shapeMiddleLeft,middleRight:shapeMiddleRight,bottomLeft:shapeBottomLeft,bottomCenter:shapeBottomCenter,bottomRight:shapeBottomRight};if(shapeElement.rotateAngle!==0||shapeElement.parentTransform!==0){var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,shapeElement.rotateAngle+shapeElement.parentTransform,shapeElement.offsetX,shapeElement.offsetY);shapeElement.corners.topLeft=shapeTopLeft=sf.drawings.transformPointByMatrix(matrix,shapeTopLeft);shapeElement.corners.topCenter=shapeTopCenter=sf.drawings.transformPointByMatrix(matrix,shapeTopCenter);shapeElement.corners.topRight=shapeTopRight=sf.drawings.transformPointByMatrix(matrix,shapeTopRight);shapeElement.corners.middleLeft=shapeMiddleLeft=sf.drawings.transformPointByMatrix(matrix,shapeMiddleLeft);shapeElement.corners.middleRight=shapeMiddleRight=sf.drawings.transformPointByMatrix(matrix,shapeMiddleRight);shapeElement.corners.bottomLeft=shapeBottomLeft=sf.drawings.transformPointByMatrix(matrix,shapeBottomLeft);shapeElement.corners.bottomCenter=shapeBottomCenter=sf.drawings.transformPointByMatrix(matrix,shapeBottomCenter);shapeElement.corners.bottomRight=shapeBottomRight=sf.drawings.transformPointByMatrix(matrix,shapeBottomRight);//Set corners based on rotate angle
}shapeBounds=sf.drawings.Rect.toBounds([shapeTopLeft,shapeTopRight,shapeBottomLeft,shapeBottomRight]);shapeElement.corners.left=shapeBounds.left;shapeElement.corners.right=shapeBounds.right;shapeElement.corners.top=shapeBounds.top;shapeElement.corners.bottom=shapeBounds.bottom;shapeElement.corners.center=shapeBounds.center;shapeElement.corners.width=shapeBounds.width;shapeElement.corners.height=shapeBounds.height;return shapeBounds;};/**
     * @private
     * @param {number} x - Specified the x value.
     * @param {number} y - Specified the y value.
     * @param {number} w - Specified the w value.
     * @param {number} h - Specified the h value.
     * @param {number} angle - Specified the angle value.
     * @param {number} offsetX - Specified the offset x value.
     * @param {number} offsetY - Specified the offset y value.
     * @param {PointModel} cornerPoint - Specified the corner point value.
     * @returns {PointModel} - Returns the point model.
     */Drawing.prototype.getShapePoint=function(x,y,w,h,angle,offsetX,offsetY,cornerPoint){var pivotPoint={x:0,y:0};var transformMatrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(transformMatrix,angle,offsetX,offsetY);switch(cornerPoint.x){case 1:switch(cornerPoint.y){case 1:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x+w,y:y+h});break;case 0:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x+w,y:y});break;case 0.5:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x+w,y:y+h/2});break;}break;case 0:switch(cornerPoint.y){case 0.5:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x,y:y+h/2});break;case 1:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x,y:y+h});break;case 0:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x,y:y});break;}break;case 0.5:switch(cornerPoint.y){case 0:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x+w/2,y:y});break;case 0.5:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x+w/2,y:y+h/2});break;case 1:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x+w/2,y:y+h});break;}break;}return{x:pivotPoint.x,y:pivotPoint.y};};/**
     * @private
     * @param {string} endPoint - Specified the end point value.
     * @param {IElement} obj - Specified the annotaion object.
     * @param {PointModel} point - Specified the annotation points.
     * @param {PointModel} segment - Specified the annotaion segment.
     * @param {IElement} target - Specified the target element.
     * @param {string} targetPortId - Specified the target port id.
     * @param {any} currentSelector - Specified the current selector value.
     * @returns {boolean} - Returns true or false.
     */ // eslint-disable-next-line
Drawing.prototype.dragConnectorEnds=function(endPoint,obj,point,segment,target,targetPortId,currentSelector){var selectorModel;var connector;var tx;var ty;if(obj instanceof Selector){selectorModel=obj;connector=selectorModel.annotations[0];}else{connector=obj;}point={x:point.x/this.pdfViewer.viewerBase.getZoomFactor(),y:point.y/this.pdfViewer.viewerBase.getZoomFactor()};if(this.checkBoundaryConstraints(undefined,undefined,connector.pageIndex,connector.wrapper.bounds)){if(connector.shapeAnnotationType==='Distance'){var leader=isLeader(connector,endPoint);if(endPoint==='Leader0'){if(this.pdfViewer.viewerBase.tool instanceof LineTool){connector.vertexPoints[0].x=point.x;connector.vertexPoints[0].y=point.y;}else{tx=point.x-leader.point.x;ty=point.y-leader.point.y;connector.vertexPoints[0].x+=tx;connector.vertexPoints[0].y+=ty;}}else if(endPoint==='Leader1'){var length_2=connector.vertexPoints.length-1;if(this.pdfViewer.viewerBase.tool instanceof LineTool){connector.vertexPoints[length_2].x=point.x;connector.vertexPoints[length_2].y=point.y;}else{tx=point.x-leader.point.x;ty=point.y-leader.point.y;connector.vertexPoints[length_2].x+=tx;connector.vertexPoints[length_2].y+=ty;}}else{// eslint-disable-next-line
var angle=sf.drawings.Point.findAngle(connector.sourcePoint,connector.targetPoint);// eslint-disable-next-line
var center=obj.wrapper.children[0].bounds.center;// eslint-disable-next-line
var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,-angle,center.x,center.y);// eslint-disable-next-line
var rotatedPoint=sf.drawings.transformPointByMatrix(matrix,{x:point.x,y:point.y});if(endPoint.split('_')[0]==='ConnectorSegmentPoint'){// eslint-disable-next-line
var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,-angle,center.x,center.y);// eslint-disable-next-line
var rotatedPoint1=sf.drawings.transformPointByMatrix(matrix,connector.vertexPoints[0]);// eslint-disable-next-line
var rotatedPoint2=sf.drawings.transformPointByMatrix(matrix,connector.vertexPoints[connector.vertexPoints.length-1]);ty=rotatedPoint.y-rotatedPoint1.y;if(connector.leaderHeight===0&&connector.leaderHeight!=null){connector.leaderHeight=this.pdfViewer.distanceSettings.leaderLength;}else{connector.leaderHeight+=ty;rotatedPoint1.y+=ty;rotatedPoint2.y+=ty;// eslint-disable-next-line
var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,angle,center.x,center.y);connector.vertexPoints[0]=sf.drawings.transformPointByMatrix(matrix,rotatedPoint1);connector.vertexPoints[connector.vertexPoints.length-1]=sf.drawings.transformPointByMatrix(matrix,rotatedPoint2);}}}}else if(endPoint.split('_')[0]==='ConnectorSegmentPoint'){var i=Number(endPoint.split('_')[1]);tx=point.x-connector.vertexPoints[i].x;ty=point.y-connector.vertexPoints[i].y;connector.vertexPoints[i].x+=tx;connector.vertexPoints[i].y+=ty;if(connector.vertexPoints.length>2&&obj.measureType!=='Perimeter'){if(parseFloat(endPoint.split('_')[1])===0){connector.vertexPoints[connector.vertexPoints.length-1].x+=tx;connector.vertexPoints[connector.vertexPoints.length-1].y+=ty;}else if(parseFloat(endPoint.split('_')[1])===connector.vertexPoints.length-1){connector.vertexPoints[0].x+=tx;connector.vertexPoints[0].y+=ty;}}}this.nodePropertyChange(connector,{vertexPoints:connector.vertexPoints});this.renderSelector(connector.pageIndex,currentSelector);}this.pdfViewer.renderDrawing();return true;};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
     * @param {number} tx - Specified the tx value.
     * @param {number} ty - Specified the y value.
     * @param {number} i - Specified the index value.
     * @returns {boolean} - Returns true or false.
     */Drawing.prototype.dragSourceEnd=function(obj,tx,ty,i){// eslint-disable-next-line
var connector=this.pdfViewer.nameTable[obj.id];connector.vertexPoints[i].x+=tx;connector.vertexPoints[i].y+=ty;this.pdfViewer.renderDrawing();return true;};/**
     * @private
     * @param {PdfAnnotationBaseModel} connector - Specified the connector object.
     * @param {PointModel[]} points - Specified the points value.
     * @returns {void}
     */Drawing.prototype.updateConnector=function(connector,points){var targetPoint;connector.vertexPoints=points;updateSegmentElement(connector,points,connector.wrapper.children[0]);var srcPoint=connector.sourcePoint;var anglePoint=connector.vertexPoints;//  points = this.clipDecorators(connector, points);
var element=connector.wrapper.children[0];element.canMeasurePath=true;for(var i=0;i<connector.wrapper.children.length;i++){element=connector.wrapper.children[i];if(connector.shapeAnnotationType!=='Polygon'){if(element.id.indexOf('srcDec')>-1){updateDecoratorElement(connector,element,points[0],anglePoint[1],true);}targetPoint=connector.targetPoint;if(element.id.indexOf('tarDec')>-1){updateDecoratorElement(connector,element,points[points.length-1],anglePoint[anglePoint.length-2],false);}}}};/**
     * @private
     * @returns {Object} - Returns the object.
     */Drawing.prototype.copy=function(){this.pdfViewer.clipboardData.pasteIndex=1;this.pdfViewer.clipboardData.clipObject=this.copyObjects();return this.pdfViewer.clipboardData.clipObject;};/**
     * @private
     * @returns {Object[]} - Returns the object array.
     */Drawing.prototype.copyObjects=function(){var selectedItems=[];var obj=[];this.pdfViewer.clipboardData.childTable={};if(this.pdfViewer.selectedItems.annotations.length>0){selectedItems=this.pdfViewer.selectedItems.annotations;for(var j=0;j<selectedItems.length;j++){var element=cloneObject(selectedItems[j]);obj.push(element);}}if(this.pdfViewer.selectedItems.formFields.length>0){selectedItems=this.pdfViewer.selectedItems.formFields;for(var j=0;j<selectedItems.length;j++){var element=cloneObject(selectedItems[j]);obj.push(element);}}if(this.pdfViewer.clipboardData.pasteIndex===0){for(var _i=0,selectedItems_1=selectedItems;_i<selectedItems_1.length;_i++){var item=selectedItems_1[_i];// eslint-disable-next-line
if(this.pdfViewer.nameTable[item.id]){if(!item.formFieldAnnotationType){if(item.annotName)this.pdfViewer.annotationModule.deleteAnnotationById(item.annotName);else this.pdfViewer.annotationModule.deleteAnnotation();}else{this.pdfViewer.clearSelection(item.pageIndex);this.pdfViewer.formDesignerModule.deleteFormField(item.id);}}}//this.endGroupAction();
}this.sortByZIndex(obj,'zIndex');return obj;};Drawing.prototype.getNewObject=function(obj){var newObj;var newobjs=[];this.pdfViewer.clipboardData.pasteIndex=1;for(var i=0;i<obj.length;i++){newObj=cloneObject(obj[i]);newobjs.push(newObj);}return newobjs;};/**
     * @private
     * @param {PdfAnnotationBaseModel[]} obj - Specified the annotation object.
     * @param {number} index - Specified the annotation index.
     * @returns {void}
     */Drawing.prototype.paste=function(obj,index){var zoomfactor=this.pdfViewer.viewerBase.getZoomFactor();var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);if(obj||this.pdfViewer.clipboardData.clipObject){var copiedItems=obj?this.getNewObject(obj):this.pdfViewer.clipboardData.clipObject;if(copiedItems){var objectTable={};if(this.pdfViewer.clipboardData.pasteIndex!==0){this.pdfViewer.clearSelection(index);}for(var _i=0,copiedItems_1=copiedItems;_i<copiedItems_1.length;_i++){var copy=copiedItems_1[_i];// eslint-disable-next-line
objectTable[copy.id]=copy;}for(var j=0;j<copiedItems.length;j++){var copy=copiedItems[j];var pageDiv=this.pdfViewer.viewerBase.getElement('_pageDiv_'+copy.pageIndex);// eslint-disable-next-line
var events=event;if(events&&!events.clientX&&!events.clientY){events={clientX:this.pdfViewer.viewerBase.mouseLeft,clientY:this.pdfViewer.viewerBase.mouseTop};}if(sf.base.isBlazor()){events=this.pdfViewer.viewerBase.mouseDownEvent;}if(isLineShapes(copy)){this.calculateCopyPosition(copy,pageDiv,events);}else{if(pageDiv){var pageCurrentRect=pageDiv.getBoundingClientRect();copy.bounds.x=(events.clientX-pageCurrentRect.left)/zoomfactor;copy.bounds.y=(events.clientY-pageCurrentRect.top)/zoomfactor;}}var newNode=cloneObject(copy);if(this.pdfViewer.viewerBase.contextMenuModule.previousAction!=='Cut'){newNode.id+=sf.drawings.randomId();if(this.pdfViewer.annotationModule&&newNode.shapeAnnotationType!=='HandWrittenSignature'){newNode.annotName=newNode.id;// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationCollection(newNode,copiedItems[0],false);}if(newNode.shapeAnnotationType==='SignatureText'||newNode.shapeAnnotationType==='HandWrittenSignature'||newNode.shapeAnnotationType==='SignatureImage'){this.pdfViewer.viewerBase.signatureModule.storeSignatureData(newNode.pageIndex,newNode);}if(!newNode.formFieldAnnotationType){this.pdfViewer.annotation.addAction(newNode.pageIndex,null,newNode,'Addition','',newNode,newNode);}}else{if(this.pdfViewer.annotationModule){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationCollection(newNode,copiedItems[0],true);}if(newNode.shapeAnnotationType==='SignatureText'||newNode.shapeAnnotationType==='HandWrittenSignature'||newNode.shapeAnnotationType==='SignatureImage'){this.pdfViewer.viewerBase.signatureModule.storeSignatureData(newNode.pageIndex,newNode);}}var addedAnnot=this.add(newNode);if(this.pdfViewer.formDesigner&&addedAnnot.formFieldAnnotationType){this.pdfViewer.annotation.addAction(newNode.pageIndex,null,addedAnnot,'Addition','',addedAnnot,addedAnnot);}if((newNode.shapeAnnotationType==='FreeText'||newNode.enableShapeLabel)&&addedAnnot){this.nodePropertyChange(addedAnnot,{});}if(addedAnnot.formFieldAnnotationType&&addedAnnot.pageIndex===index){this.pdfViewer.formFieldCollection.push(addedAnnot);// eslint-disable-next-line max-len
var formField={id:addedAnnot.id,name:addedAnnot.name,value:addedAnnot.value,type:addedAnnot.formFieldAnnotationType,isReadOnly:addedAnnot.isReadonly,fontFamily:addedAnnot.fontFamily,// eslint-disable-next-line max-len
fontSize:addedAnnot.fontSize,fontStyle:addedAnnot.fontStyle,color:addedAnnot.color,backgroundColor:addedAnnot.backgroundColor,// eslint-disable-next-line max-len
alignment:addedAnnot.alignment,visibility:addedAnnot.visibility,maxLength:addedAnnot.maxLength,isRequired:addedAnnot.isRequired,// eslint-disable-next-line max-len
isPrint:addedAnnot.isPrint,isSelected:addedAnnot.isSelected,isChecked:addedAnnot.isChecked,tooltip:addedAnnot.tooltip,bounds:addedAnnot.bounds,thickness:addedAnnot.thickness,borderColor:addedAnnot.borderColor,signatureIndicatorSettings:addedAnnot.signatureIndicatorSettings};this.pdfViewer.formFieldCollections.push(formField);// eslint-disable-next-line max-len
this.pdfViewer.formDesigner.drawHTMLContent(addedAnnot.formFieldAnnotationType,addedAnnot.wrapper.children[0],addedAnnot,addedAnnot.pageIndex,this.pdfViewer);}this.pdfViewer.select([newNode.id],this.pdfViewer.annotationSelectorSettings);if(!addedAnnot.formFieldAnnotationType){this.pdfViewer.annotationModule.triggerAnnotationAddEvent(newNode);}}}this.pdfViewer.renderDrawing(undefined,index);this.pdfViewer.clipboardData.pasteIndex++;}this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);};Drawing.prototype.calculateCopyPosition=function(copy,pageDiv,events){var zoomfactor=this.pdfViewer.viewerBase.getZoomFactor();var x1;var y1;var x2;var y2;for(var i=0;i<copy.vertexPoints.length;i++){if(pageDiv){if(i===0){var pageCurrentRect=pageDiv.getBoundingClientRect();x1=copy.vertexPoints[i].x;y1=copy.vertexPoints[i].y;copy.vertexPoints[i].x=(events.clientX-pageCurrentRect.left)/zoomfactor;copy.vertexPoints[i].y=(events.clientY-pageCurrentRect.top)/zoomfactor;x2=copy.vertexPoints[i].x;y2=copy.vertexPoints[i].y;}else{copy.vertexPoints[i].x+=x2-x1;copy.vertexPoints[i].y+=y2-y1;}}}};/**
     * @private
     * @param {number} index - Specified the annotaion index.
     * @returns {void}
     */Drawing.prototype.cut=function(index){var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.removedAnnotationCollection=[];}this.pdfViewer.clipboardData.pasteIndex=0;this.pdfViewer.clipboardData.clipObject=this.copyObjects();this.pdfViewer.renderDrawing(undefined,index);this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);};/**
     * @private
     * @param {Object[]} nodeArray - Specified the node array.
     * @param {string} sortID - Specified the sort id.
     * @returns {Object[]} - Returns the node array.
     */Drawing.prototype.sortByZIndex=function(nodeArray,sortID){var id=sortID?sortID:'zIndex';nodeArray=nodeArray.sort(function(a,b){// eslint-disable-next-line
return a[id]-b[id];});return nodeArray;};return Drawing;}();/**
 * The `NavigationPane` module is used to handle navigation pane for thumbnail and bookmark navigation of PDF viewer.
 *
 * @hidden
 */var NavigationPane=/** @class */function(){/**
     * Initialize the constructor of navigationPane.
     *
     * @param { PdfViewer } viewer - Specified PdfViewer class.
     * @param { PdfViewerBase } base - The pdfViewerBase.
     */function NavigationPane(viewer,base){var _this=this;this.thumbnailWidthMin=200;this.contentContainerScrollWidth=33;this.closeButtonLeft=170;this.isTooltipCreated=false;this.isThumbnail=false;this.annotationContextMenu=[];this.isCommentPanelShow=false;this.commentPanelWidthMin=300;/**
         * @private
         */this.isNavigationToolbarVisible=false;/**
         * @private
         */this.isBookmarkListOpen=false;/**
         * @private
         */this.isNavigationPaneResized=false;/**
         * @private
         */this.isBookmarkOpen=false;/**
         * @private
         */this.isThumbnailOpen=false;/**
         * @private
         */this.restrictUpdateZoomValue=true;// eslint-disable-next-line
this.loadImportAnnotation=function(args){// eslint-disable-next-line
var upoadedFiles=args.target.files;if(args.target.files[0]!==null){var uploadedFile=upoadedFiles[0];if(uploadedFile){_this.pdfViewer.fireImportStart(uploadedFile);// eslint-disable-next-line
var uploadedFileType=uploadedFile.type;if(uploadedFile.name.split('.json').length>1&&uploadedFileType.includes('json')){var reader=new FileReader();reader.readAsDataURL(uploadedFile);// eslint-disable-next-line
reader.onload=function(e){if(e.currentTarget.result){var importFile=e.currentTarget.result.split(',')[1];// eslint-disable-next-line
var annotationData=atob(importFile);if(annotationData){// eslint-disable-next-line
var jsonData=JSON.parse(annotationData);var firstAnnotation=jsonData.pdfAnnotation[Object.keys(jsonData.pdfAnnotation)[0]];if(Object.keys(jsonData.pdfAnnotation).length>=1&&(firstAnnotation.textMarkupAnnotation||firstAnnotation.measureShapeAnnotation||firstAnnotation.freeTextAnnotation||firstAnnotation.stampAnnotations||firstAnnotation.signatureInkAnnotation||firstAnnotation.shapeAnnotation&&firstAnnotation.shapeAnnotation[0].Bounds)){_this.pdfViewerBase.isPDFViewerJson=true;_this.pdfViewerBase.importAnnotations(jsonData,AnnotationDataFormat.Json);}else{_this.pdfViewerBase.isPDFViewerJson=false;_this.pdfViewerBase.importAnnotations(importFile,AnnotationDataFormat.Json);}}}};}else if(uploadedFile.name.split('.xfdf').length>1&&(uploadedFileType.includes('xfdf')||args.target.accept.includes('xfdf'))){var reader=new FileReader();reader.readAsDataURL(uploadedFile);// eslint-disable-next-line
reader.onload=function(e){if(e.currentTarget.result){var importFile=e.currentTarget.result.split(',')[1];// eslint-disable-next-line
var annotationData=atob(importFile);if(annotationData){// eslint-disable-next-line max-len
_this.pdfViewerBase.importAnnotations(importFile,AnnotationDataFormat.Xfdf,true);}}};}else{_this.pdfViewer.fireImportFailed(uploadedFile,_this.pdfViewer.localeObj.getConstant('Import Failed'));if(sf.base.isBlazor()){var promise=_this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_ImportFailed');promise.then(function(value){_this.pdfViewerBase.openImportExportNotificationPopup(value);});}else{_this.pdfViewerBase.openImportExportNotificationPopup(_this.pdfViewer.localeObj.getConstant('Import Failed'));}}}}};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.resizeIconMouseOver=function(event){event.srcElement.style.cursor='e-resize';};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.resizePanelMouseDown=function(event){var proxy=null;proxy=_this;proxy.offset=[proxy.sideBarResizer.offsetLeft-event.clientX,proxy.sideBarResizer.offsetTop-event.clientY,proxy.sideBarResizer.offsetParent.clientWidth];_this.previousX=event.clientX;proxy.isDown=true;proxy.isNavigationPaneResized=true;proxy.pdfViewerBase.viewerContainer.style.cursor='e-resize';if(proxy.sideBarContentContainer){proxy.sideBarContentContainer.style.cursor='e-resize';}};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.resizeViewerMouseLeave=function(event){var proxy=null;proxy=_this;proxy.isDown=false;if(proxy.isNavigationPaneResized&&proxy.sideBarContentContainer){proxy.pdfViewerBase.viewerContainer.style.cursor='default';proxy.sideBarContentContainer.style.cursor='default';proxy.isNavigationPaneResized=false;}if(proxy.commentPanelContainer&&proxy.isCommentPanelShow){_this.commentPanelMouseLeave(event);proxy.isCommentPanelShow=false;}};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.resizePanelMouseMove=function(event){var proxy=null;proxy=_this;if(!_this.pdfViewerBase.getPopupNoteVisibleStatus()){var target=event.target;// eslint-disable-next-line max-len
if(_this.pdfViewerBase.skipPreventDefault(target)){event.preventDefault();}if(proxy.isDown&&_this.sideBarContentContainer){// prevent the sidebar from becoming too narrow, or from occupying more
// than half of the available viewer width.
if(_this.pdfViewer.enableRtl){var currentWidth=_this.previousX-event.clientX;var width=currentWidth+proxy.offset[2];var maxWidth=Math.floor(_this.outerContainerWidth/2);if(width>maxWidth){width=maxWidth;}if(width<_this.thumbnailWidthMin){width=_this.thumbnailWidthMin;}proxy.sideBarResizer.style.right=width+'px';proxy.sideBarContentContainer.style.width=width+'px';proxy.sideBarContent.style.width=width+'px';proxy.sideBarContentSplitter.style.width=width+'px';proxy.sideBarTitleContainer.style.width=width+'px';// eslint-disable-next-line max-len
proxy.pdfViewerBase.viewerContainer.style.right=proxy.getViewerContainerLeft()+'px';proxy.pdfViewerBase.viewerContainer.style.left=proxy.getViewerContainerRight()+'px';}else{var width=event.clientX+proxy.offset[0];var maxWidth=Math.floor(_this.outerContainerWidth/2);if(width>maxWidth){width=maxWidth;}if(width<_this.thumbnailWidthMin){width=_this.thumbnailWidthMin;}proxy.sideBarResizer.style.left=width+'px';proxy.closeDiv.style.left=width-proxy.contentContainerScrollWidth+'px';proxy.sideBarContentContainer.style.width=width+'px';proxy.sideBarContent.style.width=width+'px';proxy.sideBarContentSplitter.style.width=width+'px';proxy.sideBarTitleContainer.style.width=width+'px';// eslint-disable-next-line max-len
proxy.pdfViewerBase.viewerContainer.style.left=proxy.getViewerContainerLeft()+'px';proxy.pdfViewerBase.viewerContainer.style.right=proxy.getViewerContainerRight()+'px';}proxy.pdfViewer._dotnetInstance.invokeMethodAsync('ResizeTreeView');// eslint-disable-next-line max-len
var viewerWidth=proxy.pdfViewer.element.clientWidth-proxy.getViewerContainerLeft()-proxy.getViewerContainerRight();proxy.pdfViewerBase.viewerContainer.style.width=viewerWidth+'px';proxy.pdfViewerBase.pageContainer.style.width=proxy.pdfViewerBase.viewerContainer.clientWidth+'px';proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber-1);proxy.pdfViewerBase.updateZoomValue();if(!proxy.bookmarkButton.children[0].classList.contains('e-pv-bookmark-disable-icon')){proxy.pdfViewer.bookmarkViewModule.setBookmarkContentHeight();}}else if(proxy.isCommentPanelShow&&_this.commentPanelContainer){_this.updateCommentPanelContainer(event);}}};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.sideToolbarOnClose=function(event){var proxy=null;proxy=_this;proxy.removeThumbnailSelectionIconTheme();proxy.removeBookmarkSelectionIconTheme();proxy.updateViewerContainerOnClose();};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.sideToolbarOnClick=function(event){if(_this.pdfViewer&&_this.pdfViewer.cultureValue&&_this.pdfViewer.cultureValue.ThumbnailContent){_this.sideBarTitle.textContent=_this.pdfViewer.cultureValue.ThumbnailContent;}else{_this.sideBarTitle.textContent=_this.pdfViewer.localeObj.getConstant('Page Thumbnails');}_this.sideBarContent.setAttribute('aria-label','Thumbnail View Panel');var proxy=null;proxy=_this;var isblazor=sf.base.isBlazor();// eslint-disable-next-line max-len
var bookmarkPane=isblazor?_this.pdfViewer.element.querySelector('.e-pv-bookmark-view'):document.getElementById(_this.pdfViewer.dataId+'_bookmark_view');if(bookmarkPane){proxy.removeBookmarkSelectionIconTheme();bookmarkPane.style.display='none';}document.getElementById(_this.pdfViewer.dataId+'_thumbnail_view').style.display='flex';if(proxy.sideBarContentContainer){if(proxy.sideBarContentContainer.style.display!=='none'){if(proxy.isBookmarkOpen){proxy.isThumbnailOpen=true;proxy.setThumbnailSelectionIconTheme();_this.updateViewerContainerOnExpand();}else{proxy.isThumbnailOpen=false;proxy.removeThumbnailSelectionIconTheme();_this.updateViewerContainerOnClose();}}else{_this.sideBarContent.focus();proxy.isThumbnailOpen=true;proxy.setThumbnailSelectionIconTheme();_this.updateViewerContainerOnExpand();}}proxy.isBookmarkOpen=false;if(_this.pdfViewer.annotationModule&&_this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(_this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);_this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}};/**
         * @private
         * @returns {void}
         */this.openThumbnailPane=function(){var proxy=null;proxy=_this;var sideBarContent=document.getElementById(_this.pdfViewer.dataId+'_sideBarContent');var sideBarContentContainer=document.getElementById(_this.pdfViewer.dataId+'_sideBarContentContainer');var viewerContainer=document.getElementById(_this.pdfViewer.dataId+'_viewerContainer');var pageContainer=document.getElementById(_this.pdfViewer.dataId+'_pageViewContainer');document.getElementById(_this.pdfViewer.dataId+'_thumbnail_view').style.display='block';document.getElementById(_this.pdfViewer.dataId+'_sideBarResizer').style.display='none';document.getElementById(_this.pdfViewer.dataId+'_sideBarTitleContainer').style.display='none';document.getElementById(_this.pdfViewer.dataId+'_sideBarContentSplitter').style.display='none';sideBarContent.classList.add('e-thumbnail');sideBarContentContainer.classList.add('e-thumbnail');if(sideBarContentContainer){if(proxy.isThumbnail){sideBarContentContainer.style.display='none';viewerContainer.style.width=proxy.pdfViewer.element.clientWidth+'px';pageContainer.style.width=viewerContainer.clientWidth+'px';viewerContainer.style.left=sideBarContentContainer.clientWidth+'px';proxy.pdfViewerBase.updateZoomValue();proxy.isThumbnail=false;}else{sideBarContent.focus();sideBarContentContainer.style.display='block';// eslint-disable-next-line max-len
viewerContainer.style.width=proxy.pdfViewer.element.clientWidth-sideBarContentContainer.clientWidth+'px';pageContainer.style.width=viewerContainer.clientWidth+'px';viewerContainer.style.left=sideBarContentContainer.clientWidth+'px';proxy.pdfViewerBase.updateZoomValue();proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber-1);proxy.isThumbnail=true;}}if(_this.pdfViewer.annotationModule&&_this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(_this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);_this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.bookmarkButtonOnClick=function(event){_this.openBookmarkcontentInitially();};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.commentPanelMouseDown=function(event){var proxy=null;proxy=_this;proxy.offset=[proxy.commentPanelResizer.offsetLeft-event.clientX,proxy.commentPanelResizer.offsetTop-event.clientY,proxy.getViewerContainerRight()];_this.isCommentPanelShow=true;_this.previousX=event.clientX;proxy.pdfViewerBase.viewerContainer.style.cursor='e-resize';proxy.commentPanelResizer.style.cursor='e-resize';};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.updateCommentPanelContainer=function(event){var proxy=null;proxy=_this;// prevent the commentPanel from becoming too narrow, or from occupying more
// than half of the available viewer width.
if(_this.pdfViewer.enableRtl){var width=event.clientX+proxy.offset[0];var maxWidth=Math.floor(_this.outerContainerWidth/2);if(width>maxWidth){width=maxWidth;}if(width<_this.commentPanelWidthMin){width=_this.commentPanelWidthMin;}proxy.commentPanelResizer.style.left=width+'px';proxy.commentPanelContainer.style.width=width+'px';// eslint-disable-next-line max-len
proxy.pdfViewerBase.viewerContainer.style.left=proxy.getViewerContainerRight()+'px';proxy.pdfViewerBase.viewerContainer.style.right=proxy.getViewerContainerLeft()+'px';}else{var currentWidth=_this.previousX-event.clientX;var width=currentWidth+proxy.offset[2];var maxWidth=Math.floor(_this.outerContainerWidth/2);if(width>maxWidth){width=maxWidth;}if(width<_this.commentPanelWidthMin){width=_this.commentPanelWidthMin;}proxy.commentPanelResizer.style.right=width+'px';proxy.commentPanelContainer.style.width=width+'px';// eslint-disable-next-line max-len
proxy.pdfViewerBase.viewerContainer.style.right=proxy.getViewerContainerRight()+'px';proxy.pdfViewerBase.viewerContainer.style.left=proxy.getViewerContainerLeft()+'px';}_this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop();// eslint-disable-next-line max-len
var viewerWidth=proxy.pdfViewer.element.clientWidth-proxy.getViewerContainerLeft()-proxy.getViewerContainerRight();proxy.pdfViewerBase.viewerContainer.style.width=viewerWidth+'px';proxy.pdfViewerBase.pageContainer.style.width=proxy.pdfViewerBase.viewerContainer.clientWidth+'px';proxy.pdfViewerBase.updateZoomValue();};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.commentPanelMouseLeave=function(event){var proxy=null;proxy=_this;if(proxy.commentPanelContainer){proxy.pdfViewerBase.viewerContainer.style.cursor='default';proxy.commentPanelContainer.style.cursor='default';}};this.pdfViewer=viewer;this.pdfViewerBase=base;}/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.initializeNavigationPane=function(){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.createNavigationPane();}else{// eslint-disable-next-line max-len
this.commentPanelContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_commantPanel',className:'e-pv-mobile-comments-container'});this.pdfViewerBase.mainContainer.appendChild(this.commentPanelContainer);if(this.pdfViewer.enableRtl){this.commentPanelContainer.style.left=0+'px';}else{this.commentPanelContainer.style.right=0+'px';}this.commentPanelContainer.style.bottom=0+'px';this.commentPanelContainer.style.display='none';// eslint-disable-next-line max-len
this.commentsContentContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_commentscontentcontainer',className:'e-pv-comments-content-container'});this.commentPanelContainer.appendChild(this.commentsContentContainer);this.createFileElement(this.commentPanelContainer);this.createXFdfFileElement(this.commentPanelContainer);}};NavigationPane.prototype.createNavigationPane=function(){var isblazor=sf.base.isBlazor();if(!isblazor){// eslint-disable-next-line max-len
this.sideBarToolbar=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_sideBarToolbar',className:'e-pv-sidebar-toolbar',attrs:{'role':'toolbar','aria-orientation':'vertical','tabindex':'-1'}});// eslint-disable-next-line max-len
this.sideBarToolbarSplitter=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_sideBarToolbarSplitter',className:'e-pv-sidebar-toolbar-splitter'});// eslint-disable-next-line max-len
this.sideBarContentContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_sideBarContentContainer',className:'e-pv-sidebar-content-container'});// eslint-disable-next-line max-len
this.sideBarContentSplitter=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_sideBarContentSplitter',className:'e-pv-sidebar-content-splitter'});// eslint-disable-next-line max-len
this.sideBarContent=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_sideBarContent',className:'e-pv-sidebar-content',attrs:{'tabindex':'0'}});// eslint-disable-next-line max-len
this.sideBarTitleContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_sideBarTitleContainer',className:'e-pv-sidebar-title-container'});// eslint-disable-next-line max-len
this.sideBarTitle=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_sideBarTitle',className:'e-pv-sidebar-title',attrs:{'tabindex':'-1'}});// eslint-disable-next-line max-len
this.sideBarResizer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_sideBarResizer',className:'e-pv-sidebar-resizer'});}else{this.sideBarToolbar=this.pdfViewer.element.querySelector('.e-pv-sidebar-toolbar');this.sideBarToolbarSplitter=this.pdfViewer.element.querySelector('.e-pv-sidebar-toolbar-splitter');this.sideBarContentContainer=this.pdfViewer.element.querySelector('.e-pv-sidebar-content-container');this.sideBarContentSplitter=this.pdfViewer.element.querySelector('.e-pv-sidebar-content-splitter');this.sideBarContent=this.pdfViewer.element.querySelector('.e-pv-sidebar-content');this.sideBarTitleContainer=this.pdfViewer.element.querySelector('.e-pv-sidebar-title-container');this.sideBarTitle=this.pdfViewer.element.querySelector('.e-pv-sidebar-title');this.sideBarResizer=this.pdfViewer.element.querySelector('.e-pv-sidebar-resizer');}this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar);if(this.pdfViewer.enableRtl){this.sideBarToolbar.style.cssFloat='right';this.sideBarToolbar.style.right=1+'px';this.sideBarToolbar.style.position='relative';}this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbarSplitter);if(this.pdfViewer.enableRtl){this.sideBarToolbarSplitter.classList.add('e-right');}else{this.sideBarToolbarSplitter.classList.add('e-left');}if(this.pdfViewer.enableRtl){this.sideBarContentContainer.classList.add('e-right');}else{this.sideBarContentContainer.classList.add('e-left');}this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer);if(this.pdfViewer.enableRtl){this.sideBarContentSplitter.style.right=0+'px';}this.sideBarContentContainer.appendChild(this.sideBarContentSplitter);if(this.pdfViewer.enableRtl){this.sideBarContent.style.right=0+'px';this.sideBarContent.style.direction='rtl';}this.sideBarContentContainer.appendChild(this.sideBarContent);if(this.pdfViewer.enableRtl){this.sideBarTitleContainer.style.right=0+'px';}if(this.pdfViewer.enableRtl){this.sideBarTitle.classList.add('e-right');}else{this.sideBarTitle.classList.add('e-left');}this.sideBarTitleContainer.appendChild(this.sideBarTitle);this.sideBarContentContainer.appendChild(this.sideBarTitleContainer);this.sideBarResizer.addEventListener('mousedown',this.resizePanelMouseDown);this.pdfViewerBase.mainContainer.addEventListener('mousemove',this.resizePanelMouseMove);this.pdfViewerBase.mainContainer.addEventListener('mouseup',this.resizeViewerMouseLeave);if(this.pdfViewer.enableRtl){this.sideBarResizer.classList.add('e-right');}else{this.sideBarResizer.classList.add('e-left');}this.sideBarContentContainer.appendChild(this.sideBarResizer);this.createCommentPanel();var controlLeft=this.getViewerContainerLeft();var controlRight=this.getViewerContainerRight();if(!this.pdfViewer.enableRtl&&this.pdfViewer.enableNavigationToolbar){this.pdfViewerBase.viewerContainer.style.left=controlLeft+'px';this.pdfViewerBase.viewerContainer.style.right=controlRight+'px';}// eslint-disable-next-line max-len
this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-controlLeft-this.commentPanelContainer.clientWidth+'px';this.sideBarContentContainer.style.display='none';this.createSidebarToolBar();this.createSidebarTitleCloseButton();this.createResizeIcon();this.sideBarToolbar.addEventListener('mouseup',this.sideToolbarOnMouseup.bind(this));this.sideBarContentContainer.addEventListener('mouseup',this.sideBarTitleOnMouseup.bind(this));};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.adjustPane=function(){if(sf.base.isBlazor()){var splitterElement=this.pdfViewer.element.querySelector('.e-pv-sidebar-toolbar-splitter');var sideToolbarElement=this.pdfViewer.element.querySelector('.e-pv-sidebar-toolbar');var sideToolbarContent=this.pdfViewer.element.querySelector('.e-pv-sidebar-content-container');var toolbarContainer=this.pdfViewer.element.querySelector('.e-pv-toolbar');var toolbarHeight=toolbarContainer.getBoundingClientRect().height;if(toolbarHeight===0){// eslint-disable-next-line
toolbarHeight=parseFloat(window.getComputedStyle(toolbarContainer)['height'])+1;}if(!this.pdfViewer.enableToolbar){toolbarHeight=0;}sideToolbarElement.style.top=toolbarHeight+'px';sideToolbarContent.style.top=toolbarHeight+'px';splitterElement.style.top=toolbarHeight+'px';sideToolbarElement.style.height=this.getSideToolbarHeight(toolbarHeight);sideToolbarContent.style.height=this.getSideToolbarHeight(toolbarHeight);splitterElement.style.height=this.getSideToolbarHeight(toolbarHeight);this.pdfViewerBase.viewerContainer.style.height=this.getSideToolbarHeight(toolbarHeight);}else{var splitterElement=this.pdfViewerBase.getElement('_sideBarToolbarSplitter');var toolbarContainer=this.pdfViewerBase.getElement('_toolbarContainer');var toolbarHeight=toolbarContainer.getBoundingClientRect().height;if(toolbarHeight===0){// eslint-disable-next-line
toolbarHeight=parseFloat(window.getComputedStyle(toolbarContainer)['height'])+1;}// eslint-disable-next-line max-len
this.sideBarToolbar.style.top=toolbarHeight+'px';this.sideBarContentContainer.style.top=toolbarHeight+'px';splitterElement.style.top=toolbarHeight+'px';}};NavigationPane.prototype.getSideToolbarHeight=function(toolbarHeight){var height=this.pdfViewer.element.getBoundingClientRect().height;return height!==0?height-toolbarHeight+'px':'';};NavigationPane.prototype.createCommentPanel=function(){this.commentPanelContainer=document.getElementById(this.pdfViewer.dataId+'_commantPanel');this.commentsContentContainer=document.getElementById(this.pdfViewer.dataId+'_commentscontentcontainer');this.createFileElement(this.commentPanelContainer);this.createXFdfFileElement(this.commentPanelContainer);};NavigationPane.prototype.createCommentPanelTitleContainer=function(){// eslint-disable-next-line max-len
var commentPanelTitleContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_commentPanelTitleContainer',className:'e-pv-comment-panel-title-container'});// eslint-disable-next-line max-len
var commentpanelTilte=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_commentPanelTitle',className:'e-pv-comment-panel-title',attrs:{'tabindex':'-1'}});if(sf.base.isBlazor()){var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_Comments');promise.then(function(value){commentpanelTilte.innerText=value;});}else{commentpanelTilte.innerText=this.pdfViewer.localeObj.getConstant('Comments');}var annotationButton=sf.base.createElement('button',{id:this.pdfViewer.dataId+'_annotations_btn'});annotationButton.setAttribute('aria-label','annotation button');annotationButton.setAttribute('type','button');annotationButton.className='e-btn e-pv-tbar-btn e-pv-comment-panel-title-close-div e-btn';// eslint-disable-next-line max-len
var moreOptionButtonSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_annotation_more_icon',className:'e-pv-more-icon e-pv-icon'});annotationButton.appendChild(moreOptionButtonSpan);if(sf.base.Browser.isDevice&&!sf.base.isBlazor()){var commentCloseIconDiv=sf.base.createElement('button');commentCloseIconDiv.setAttribute('aria-label','annotation button');commentCloseIconDiv.setAttribute('type','button');commentCloseIconDiv.style.borderColor='transparent';commentCloseIconDiv.style.paddingTop='11px';commentCloseIconDiv.style.paddingBottom='11px';commentCloseIconDiv.style.backgroundColor='#fafafa';commentCloseIconDiv.addEventListener('click',this.closeCommentPanelContainer.bind(this));commentpanelTilte.style.left='37px';var commentCloseIcon=sf.base.createElement('span',{className:'e-pv-annotation-tools-close-icon e-pv-icon'});commentCloseIconDiv.appendChild(commentCloseIcon);commentPanelTitleContainer.appendChild(commentCloseIconDiv);}commentPanelTitleContainer.appendChild(commentpanelTilte);commentPanelTitleContainer.appendChild(annotationButton);this.commentPanelContainer.appendChild(commentPanelTitleContainer);this.createAnnotationContextMenu();annotationButton.addEventListener('click',this.openAnnotationContextMenu.bind(this));};NavigationPane.prototype.createCommentPanelResizeIcon=function(){// eslint-disable-next-line max-len
this.commentPanelResizeIcon=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_resize',className:'e-pv-resize-icon e-pv-icon'});this.setCommentPanelResizeIconTop();this.commentPanelResizeIcon.style.position='absolute';this.commentPanelResizer.appendChild(this.commentPanelResizeIcon);};// eslint-disable-next-line
NavigationPane.prototype.openAnnotationContextMenu=function(event){this.annotationMenuObj.open(event.clientY,event.clientX,event.currentTarget);};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.createAnnotationContextMenu=function(){// eslint-disable-next-line max-len
this.annotationContextMenu=[{text:this.pdfViewer.localeObj.getConstant('Export Annotations')},{text:this.pdfViewer.localeObj.getConstant('Import Annotations')},{text:this.pdfViewer.localeObj.getConstant('Export XFDF')},{text:this.pdfViewer.localeObj.getConstant('Import XFDF')}];var annotationMenuElement=sf.base.createElement('ul',{id:this.pdfViewer.dataId+'_annotation_context_menu'});this.pdfViewer.element.appendChild(annotationMenuElement);this.annotationMenuObj=new sf.navigations.ContextMenu({target:'#'+this.pdfViewer.dataId+'_annotations_btn',items:this.annotationContextMenu,select:this.annotationMenuItemSelect.bind(this)});if(this.pdfViewer.enableRtl){this.annotationMenuObj.enableRtl=true;}this.annotationMenuObj.appendTo(annotationMenuElement);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.annotationMenuObj.animationSettings.effect='ZoomIn';}else{this.annotationMenuObj.animationSettings.effect='SlideDown';}};// eslint-disable-next-line
NavigationPane.prototype.annotationMenuItemSelect=function(args){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}if(args.item){switch(args.item.text){case this.pdfViewer.localeObj.getConstant('Export Annotations'):this.pdfViewerBase.exportAnnotations(AnnotationDataFormat.Json);break;case this.pdfViewer.localeObj.getConstant('Import Annotations'):this.importAnnotationIconClick(args);break;case this.pdfViewer.localeObj.getConstant('Export XFDF'):this.pdfViewerBase.exportAnnotations(AnnotationDataFormat.Xfdf);break;case this.pdfViewer.localeObj.getConstant('Import XFDF'):this.importXFdfAnnotationIconClick(args);break;default:break;}}};NavigationPane.prototype.createFileElement=function(toolbarElement){// eslint-disable-next-line max-len
this.annotationInputElement=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_annotationUploadElement',styles:'position:fixed; left:-100em',attrs:{'type':'file','aria-label':'upload elements'}});this.annotationInputElement.setAttribute('accept','.json');toolbarElement.appendChild(this.annotationInputElement);this.annotationInputElement.addEventListener('change',this.loadImportAnnotation);};NavigationPane.prototype.createXFdfFileElement=function(toolbarElement){// eslint-disable-next-line max-len
this.annotationXFdfInputElement=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_annotationXFdfUploadElement',styles:'position:fixed; left:-100em',attrs:{'type':'file','aria-label':'upload elements'}});this.annotationXFdfInputElement.setAttribute('accept','.xfdf');toolbarElement.appendChild(this.annotationXFdfInputElement);this.annotationXFdfInputElement.addEventListener('change',this.loadImportAnnotation);};NavigationPane.prototype.importAnnotationIconClick=function(args){this.annotationInputElement.click();};NavigationPane.prototype.importXFdfAnnotationIconClick=function(args){this.annotationXFdfInputElement.click();};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.closeCommentPanelContainer=function(){var proxy=null;proxy=this;var viewerContainer=document.getElementById(this.pdfViewer.dataId+'_viewerContainer');var pageContainer=document.getElementById(this.pdfViewer.dataId+'_pageViewContainer');var commentPanel=document.getElementById(this.pdfViewer.dataId+'_commantPanel');if(commentPanel){commentPanel.style.display='none';if(proxy.commentPanelResizer){proxy.commentPanelResizer.style.display='none';}if(viewerContainer){if(this.pdfViewer.enableRtl){viewerContainer.style.left=proxy.getViewerContainerRight()+'px';}else{viewerContainer.style.right=proxy.getViewerContainerRight()+'px';}// eslint-disable-next-line max-len
viewerContainer.style.width=proxy.pdfViewer.element.clientWidth-proxy.getViewerContainerLeft()-proxy.getViewerContainerRight()+'px';pageContainer.style.width=proxy.pdfViewerBase.viewerContainer.offsetWidth-proxy.getViewerContainerScrollbarWidth()+'px';}if(proxy.pdfViewerBase){proxy.pdfViewerBase.updateZoomValue();}if(this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule){this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(true);}}};/**
     * @private
     * @param {string} option - The option.
     * @returns {void}
     */NavigationPane.prototype.createNavigationPaneMobile=function(option){var _this=this;this.isNavigationToolbarVisible=true;this.toolbarElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_navigationToolbar',className:'e-pv-nav-toolbar'});this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement,this.pdfViewerBase.viewerContainer);var items;if(option==='search'){var searchTemplate='<div class="e-input-group e-pv-search-input-mobile" id="'+this.pdfViewer.dataId+'_search_input_container"><input class="e-input" type="text" placeholder="'+this.pdfViewer.localeObj.getConstant('Find in document')+'" id="'+this.pdfViewer.dataId+'_search_input"></input></div>';items=[// eslint-disable-next-line max-len
{prefixIcon:'e-pv-backward-icon e-pv-icon',tooltipText:this.pdfViewer.localeObj.getConstant('Go Back'),id:this.pdfViewer.dataId+'_backward',click:this.goBackToToolbar.bind(this)},{template:searchTemplate},{prefixIcon:'e-pv-search-icon e-pv-icon',id:this.pdfViewer.dataId+'_search_box-icon',click:function click(){var iconElement=_this.pdfViewerBase.getElement('_search_box-icon').firstElementChild;if(iconElement.classList.contains('e-pv-search-close')){_this.enableSearchItems(false);}_this.pdfViewer.textSearchModule.searchButtonClick(iconElement,_this.searchInput);}},{prefixIcon:'e-pv-prev-search-icon e-pv-icon',id:this.pdfViewer.dataId+'_prev_occurrence',click:function click(args){_this.pdfViewer.textSearchModule.searchPrevious();}},{prefixIcon:'e-pv-next-search-icon e-pv-icon',id:this.pdfViewer.dataId+'_next_occurrence',click:function click(args){_this.pdfViewer.textSearchModule.searchNext();}}];}else{items=[// eslint-disable-next-line max-len
{prefixIcon:'e-pv-backward-icon e-pv-icon',id:this.pdfViewer.dataId+'_backward',click:this.goBackToToolbar.bind(this)},{text:this.pdfViewer.localeObj.getConstant('Bookmarks')}];}this.toolbar=new sf.navigations.Toolbar({items:items,width:'',height:'',overflowMode:'Popup'});if(this.pdfViewer.enableRtl){this.toolbar.enableRtl=true;}this.toolbar.isStringTemplate=true;this.toolbar.appendTo(this.toolbarElement);if(option==='search'){this.initiateSearchBox();}else{this.initiateBookmarks();}};NavigationPane.prototype.initiateSearchBox=function(){var _this=this;this.searchInput=this.pdfViewerBase.getElement('_search_input');this.pdfViewer.textSearchModule.searchBtn=this.pdfViewerBase.getElement('_search_box-icon').firstElementChild;this.searchInput.addEventListener('keyup',function(event){_this.enableSearchItems(true);var searchString=_this.searchInput.value;if(event.which===13){_this.initiateTextSearch();}else{_this.pdfViewer.textSearchModule.resetVariables();}});this.pdfViewer.textSearchModule.searchInput=this.searchInput;this.setSearchInputWidth();this.enableSearchItems(false);this.searchInput.focus();};NavigationPane.prototype.enableSearchItems=function(isEnable){if(!sf.base.isBlazor()){this.toolbar.enableItems(this.pdfViewerBase.getElement('_prev_occurrence').parentElement,isEnable);this.toolbar.enableItems(this.pdfViewerBase.getElement('_next_occurrence').parentElement,isEnable);}};NavigationPane.prototype.initiateBookmarks=function(){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewerBase.mobileScrollerContainer.style.display='none';// eslint-disable-next-line
var mobileTool=document.querySelectorAll('.e-pv-mobile-annotation-toolbar');for(var i=0;i<mobileTool.length;i++){mobileTool[i].style.display='none';}}var bookmarkContainer=this.pdfViewerBase.getElement('_bookmarks_container');if(bookmarkContainer){bookmarkContainer.style.width='100%';bookmarkContainer.style.height='100%';if(this.pdfViewer.element&&this.pdfViewer.element.clientHeight>0){bookmarkContainer.style.height=this.pdfViewer.element.clientHeight+'px';}}};NavigationPane.prototype.initiateTextSearch=function(){var inputString=this.searchInput.value;this.pdfViewer.textSearchModule.initiateSearch(inputString);};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.goBackToToolbar=function(){this.isNavigationToolbarVisible=false;if(sf.base.isBlazor()&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)||!sf.base.isBlazor()){this.pdfViewer.textSearchModule.cancelTextSearch();}this.searchInput=null;if(this.pdfViewer.bookmarkViewModule.childNavigateCount!==0){this.pdfViewer.bookmarkViewModule.bookmarkList.back();this.pdfViewer.bookmarkViewModule.childNavigateCount--;}else{if(this.toolbar!=null){this.toolbar.destroy();this.toolbar=null;}var bookmarkContainer=this.pdfViewerBase.getElement('_bookmarks_container');if(bookmarkContainer){bookmarkContainer.parentElement.removeChild(bookmarkContainer);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewerBase.mobileScrollerContainer.style.display='';}}if(this.toolbarElement&&this.toolbarElement.parentElement!=null){this.toolbarElement.parentElement.removeChild(this.toolbarElement);}this.pdfViewerBase.viewerContainer.style.display='block';this.isBookmarkListOpen=false;if(!sf.base.isBlazor()){if(!this.pdfViewer.toolbar.annotationToolbarModule.isMobileAnnotEnabled){this.pdfViewer.toolbarModule.showToolbar(true);}}else{this.pdfViewerBase.onWindowResize();}}};NavigationPane.prototype.setSearchInputWidth=function(){var searchInputParent=this.searchInput.parentElement;var padding=window.getComputedStyle(searchInputParent.parentElement,null).getPropertyValue('padding-left');if(sf.base.isBlazor()&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.toolbarElement=this.pdfViewerBase.getElement('_navigationToolbar');}// eslint-disable-next-line max-len
var width=this.toolbarElement.clientWidth-this.getParentElementSearchBox('_backward').clientWidth-this.getParentElementSearchBox('_search_box-icon').clientWidth-this.getParentElementSearchBox('_prev_occurrence').clientWidth-this.getParentElementSearchBox('_next_occurrence').clientWidth-6;if(padding!==''){width=width-parseFloat(padding)*2;}searchInputParent.style.width=width+'px';};NavigationPane.prototype.getParentElementSearchBox=function(idString){return this.pdfViewerBase.getElement(idString).parentElement;};/**
     * @param text
     * @private
     */NavigationPane.prototype.createTooltipMobile=function(text,isSearch){var _this=this;if(sf.base.isBlazor()){var tooltipDiv_1=document.getElementById(this.pdfViewer.dataId+'_container_tooltip');var tooltipChild_1=tooltipDiv_1.firstElementChild;if(tooltipChild_1){tooltipChild_1.style.width='auto';tooltipChild_1.firstElementChild.firstElementChild.textContent=text;}else{var width=0;if(tooltipDiv_1){width=tooltipDiv_1.clientWidth;}var x_1=(this.pdfViewer.element.clientWidth-width)/2;var y_1=this.pdfViewer.element.clientHeight/2;setTimeout(function(){tooltipDiv_1=document.getElementById(_this.pdfViewer.dataId+'_container_tooltip');tooltipChild_1=tooltipDiv_1.firstElementChild;if(tooltipChild_1&&!isSearch){tooltipChild_1.style.width='auto';tooltipChild_1.firstElementChild.firstElementChild.textContent=text;}else{_this.pdfViewer._dotnetInstance.invokeMethodAsync('ShowToastTooltip',text,x_1,y_1,isSearch?isSearch:false);}},300);}}else{if(!this.isTooltipCreated){//boolean to prevent again toast creation.
this.createMobileTooltip(text);}else{if(this.toastObject){this.toastObject.title=text;var tooltipElement=this.pdfViewerBase.getElement('_container_tooltip');var tooltipChild=tooltipElement.firstElementChild;if(tooltipChild){tooltipChild.style.width='auto';tooltipChild.firstElementChild.firstElementChild.textContent=text;}else{this.isTooltipCreated=false;var tooltipElement_1=this.pdfViewerBase.getElement('_container_tooltip');if(this.toastObject){this.toastObject.destroy();}tooltipElement_1.parentElement.removeChild(tooltipElement_1);this.toastObject=null;this.createMobileTooltip(text);}}}}};NavigationPane.prototype.createMobileTooltip=function(text){// eslint-disable-next-line max-len
var tooltipDiv=sf.base.createElement('div',{className:'e-pv-container-tooltip',id:this.pdfViewer.dataId+'_container_tooltip'});this.pdfViewer.element.appendChild(tooltipDiv);// eslint-disable-next-line max-len
this.toastObject=new sf.notifications.Toast({title:text,target:this.pdfViewer.element,close:this.onTooltipClose.bind(this),position:{X:0,Y:0},animation:{hide:{duration:200,effect:'FadeOut'}}});this.toastObject.appendTo(tooltipDiv);var y=this.pdfViewer.element.clientHeight*0.65;var x=(this.pdfViewer.element.clientWidth-tooltipDiv.clientWidth)/2;this.isTooltipCreated=true;this.toastObject.show({position:{X:x,Y:y}});var tooltipChild=tooltipDiv.firstElementChild;if(tooltipChild){tooltipChild.style.width='auto';}};NavigationPane.prototype.onTooltipClose=function(args){if(this.pdfViewer.textSearchModule){this.isTooltipCreated=false;var tooltipElement=this.pdfViewerBase.getElement('_container_tooltip');this.pdfViewer.textSearchModule.isMessagePopupOpened=false;if(this.toastObject){this.toastObject.destroy();}tooltipElement.parentElement.removeChild(tooltipElement);this.toastObject=null;}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.toolbarResize=function(){if(this.searchInput){this.searchInput.style.width='auto';this.setSearchInputWidth();}};NavigationPane.prototype.createSidebarToolBar=function(){if(!sf.base.isBlazor()){// eslint-disable-next-line max-len
this.thumbnailButton=sf.base.createElement('button',{id:this.pdfViewer.dataId+'_thumbnail-view',attrs:{'disabled':'disabled','aria-label':'Page Thumbnails','tabindex':'-1'}});this.thumbnailButton.className='e-pv-tbar-btn e-pv-thumbnail-view-button e-btn';this.thumbnailButton.setAttribute('type','button');// eslint-disable-next-line max-len
var thumbnailButtonSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_thumbnail-view'+'_icon',className:'e-pv-thumbnail-view-disable-icon e-pv-icon'});this.thumbnailButton.appendChild(thumbnailButtonSpan);// eslint-disable-next-line max-len
var thumbnailTooltip=new sf.popups.Tooltip({content:this.pdfViewer.localeObj.getConstant('Page Thumbnails'),opensOn:'Hover',beforeOpen:this.onTooltipBeforeOpen.bind(this)});thumbnailTooltip.appendTo(this.thumbnailButton);// eslint-disable-next-line max-len
this.bookmarkButton=sf.base.createElement('button',{id:this.pdfViewer.dataId+'_bookmark',attrs:{'disabled':'disabled','aria-label':'Bookmarks','tabindex':'-1'}});this.bookmarkButton.setAttribute('type','button');this.bookmarkButton.className='e-pv-tbar-btn e-pv-bookmark-button e-btn';// eslint-disable-next-line max-len
var buttonSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_bookmark'+'_icon',className:'e-pv-bookmark-disable-icon e-pv-icon'});this.bookmarkButton.appendChild(buttonSpan);// eslint-disable-next-line max-len
var bookMarkTooltip=new sf.popups.Tooltip({content:this.pdfViewer.localeObj.getConstant('Bookmarks'),opensOn:'Hover',beforeOpen:this.onTooltipBeforeOpen.bind(this)});bookMarkTooltip.appendTo(this.bookmarkButton);this.sideBarToolbar.appendChild(this.thumbnailButton);this.sideBarToolbar.appendChild(this.bookmarkButton);}else{this.thumbnailButton=this.pdfViewer.element.querySelector('.e-pv-thumbnail-view-button');this.bookmarkButton=this.pdfViewer.element.querySelector('.e-pv-bookmark-button');}this.thumbnailButton.addEventListener('click',this.sideToolbarOnClick);this.bookmarkButton.addEventListener('click',this.bookmarkButtonOnClick);};NavigationPane.prototype.onTooltipBeforeOpen=function(args){if(!this.pdfViewer.toolbarSettings.showTooltip){args.cancel=true;}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.enableThumbnailButton=function(){if(this.thumbnailButton){this.thumbnailButton.removeAttribute('disabled');this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-disable-icon');this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.enableBookmarkButton=function(){if(this.bookmarkButton){this.bookmarkButton.removeAttribute('disabled');this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-disable-icon');this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');}};NavigationPane.prototype.createSidebarTitleCloseButton=function(){this.closeDiv=sf.base.createElement('button',{id:this.pdfViewer.dataId+'_close_btn'});this.closeDiv.setAttribute('aria-label','close button');this.closeDiv.setAttribute('type','button');this.closeDiv.className='e-btn e-pv-tbar-btn e-pv-title-close-div e-btn';if(this.pdfViewer.enableRtl){this.closeDiv.style.left=8+'px';}else{this.closeDiv.style.left=this.closeButtonLeft+'px';}// eslint-disable-next-line max-len
var buttonSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_close'+'_icon',className:'e-pv-title-close-icon e-pv-icon'});this.closeDiv.appendChild(buttonSpan);this.sideBarTitleContainer.appendChild(this.closeDiv);this.closeDiv.addEventListener('click',this.sideToolbarOnClose);};NavigationPane.prototype.createResizeIcon=function(){// eslint-disable-next-line max-len
this.resizeIcon=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_resize',className:'e-pv-resize-icon e-pv-icon'});this.setResizeIconTop();this.resizeIcon.style.position='absolute';this.resizeIcon.addEventListener('click',this.sideToolbarOnClose);this.resizeIcon.addEventListener('mouseover',this.resizeIconMouseOver);this.sideBarResizer.appendChild(this.resizeIcon);};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.setResizeIconTop=function(){// eslint-disable-next-line max-len
if(this.sideBarToolbar&&this.sideBarToolbar.clientHeight&&this.resizeIcon.style.top===''){this.resizeIcon.style.top=this.sideBarToolbar.clientHeight/2+'px';}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.setCommentPanelResizeIconTop=function(){// eslint-disable-next-line max-len
if(this.commentPanelContainer&&this.commentPanelContainer.clientHeight&&this.commentPanelResizeIcon&&this.commentPanelResizeIcon.style.top===''){this.commentPanelResizeIcon.style.top=this.commentPanelContainer.clientHeight/2+'px';}};Object.defineProperty(NavigationPane.prototype,"outerContainerWidth",{/**
         * @private
         * @returns {number} - Returns the number.
         */get:function get(){if(!this.mainContainerWidth){this.mainContainerWidth=this.pdfViewerBase.mainContainer.clientWidth;}return this.mainContainerWidth;},enumerable:true,configurable:true});/**
     * @private
     * @returns {number} - Returns the number.
     */NavigationPane.prototype.getViewerContainerScrollbarWidth=function(){// eslint-disable-next-line max-len
return this.pdfViewerBase.viewerContainer.offsetWidth+this.pdfViewerBase.viewerContainer.offsetLeft-(this.pdfViewerBase.viewerContainer.clientWidth+this.pdfViewerBase.viewerContainer.offsetLeft);};Object.defineProperty(NavigationPane.prototype,"sideToolbarWidth",{/**
         * @private
         * @returns {number} - Returns the number.
         */get:function get(){if(this.sideBarToolbar){return this.sideBarToolbar.clientWidth;}else{return 0;}},enumerable:true,configurable:true});Object.defineProperty(NavigationPane.prototype,"sideBarContentContainerWidth",{/**
         * @private
         * @returns {number} - Returns the number.
         */get:function get(){if(this.sideBarContentContainer){return this.sideBarContentContainer.clientWidth;}else{return 0;}},enumerable:true,configurable:true});Object.defineProperty(NavigationPane.prototype,"commentPanelContainerWidth",{/**
         * @private
         * @returns {number} - Returns the number.
         */get:function get(){if(this.commentPanelContainer){return this.commentPanelContainer.offsetWidth;}else{return 0;}},enumerable:true,configurable:true});/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.updateViewerContainerOnClose=function(){var proxy=null;proxy=this;if(proxy.sideBarContentContainer){proxy.sideBarContentContainer.style.display='none';if(this.pdfViewer.enableRtl){proxy.pdfViewerBase.viewerContainer.style.right=proxy.sideToolbarWidth+'px';}else{proxy.pdfViewerBase.viewerContainer.style.left=proxy.sideToolbarWidth+'px';}// eslint-disable-next-line max-len
proxy.pdfViewerBase.viewerContainer.style.width=proxy.pdfViewer.element.clientWidth-proxy.sideToolbarWidth-proxy.getViewerContainerRight()+'px';// eslint-disable-next-line max-len
proxy.pdfViewerBase.pageContainer.style.width=proxy.pdfViewerBase.viewerContainer.offsetWidth-proxy.getViewerContainerScrollbarWidth()+'px';if(this.restrictUpdateZoomValue){proxy.pdfViewerBase.updateZoomValue();}}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.updateViewerContainerOnExpand=function(){var proxy=null;proxy=this;if(proxy.sideBarContentContainer){proxy.sideBarContentContainer.style.display='block';this.pdfViewer._dotnetInstance.invokeMethodAsync('ResizeTreeView');if(this.pdfViewer.enableRtl){// eslint-disable-next-line max-len
proxy.pdfViewerBase.viewerContainer.style.right=proxy.getViewerContainerLeft()+'px';}else{// eslint-disable-next-line max-len
proxy.pdfViewerBase.viewerContainer.style.left=proxy.getViewerContainerLeft()+'px';}// eslint-disable-next-line max-len
proxy.pdfViewerBase.viewerContainer.style.width=proxy.pdfViewer.element.clientWidth-this.getViewerContainerLeft()-this.getViewerContainerRight()+'px';proxy.pdfViewerBase.pageContainer.style.width=proxy.pdfViewerBase.viewerContainer.clientWidth+'px';proxy.pdfViewerBase.updateZoomValue();if(proxy.pdfViewer.enableThumbnail){proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber-1);}}};/**
     * @private
     * @returns {number} - Returns the number.
     */NavigationPane.prototype.getViewerContainerLeft=function(){if(this.sideToolbarWidth){return this.sideToolbarWidth+this.sideBarContentContainerWidth;}else{return 0;}};/**
     * @private
     * @returns {number} - Returns the number.
     */NavigationPane.prototype.getViewerContainerRight=function(){this.commentPanelResizer=document.getElementById(this.pdfViewer.dataId+'_commentPanelResizer');if(this.commentPanelResizer){return this.commentPanelContainerWidth+this.commentPanelResizer.clientWidth;}else{return 0;}};/**
     * @private
     * @returns {number} - Returns the number.
     */NavigationPane.prototype.getViewerMainContainerWidth=function(){return this.pdfViewer.element.clientWidth-this.sideToolbarWidth;};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.setThumbnailSelectionIconTheme=function(){if(this.thumbnailButton){this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-selection-icon');this.thumbnailButton.classList.add('e-pv-thumbnail-view-button-selection');}};NavigationPane.prototype.removeThumbnailSelectionIconTheme=function(){if(this.thumbnailButton&&this.thumbnailButton.children[0]){this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-selection-icon');this.thumbnailButton.classList.remove('e-pv-thumbnail-view-button-selection');}};NavigationPane.prototype.resetThumbnailIcon=function(){if(this.thumbnailButton&&this.thumbnailButton.children[0]){this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-disable-icon');}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.resetThumbnailView=function(){if(this.sideBarContentContainer){this.sideBarContentContainer.style.display='none';if(this.pdfViewer.enableRtl){this.pdfViewerBase.viewerContainer.style.left=1+'px';}else{this.pdfViewerBase.viewerContainer.style.left=this.sideToolbarWidth+'px';}// eslint-disable-next-line max-len
this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.sideToolbarWidth-this.getViewerContainerRight()+'px';if(this.pdfViewerBase.pageContainer){this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+'px';}this.thumbnailButton.setAttribute('disabled','disabled');this.removeThumbnailSelectionIconTheme();this.resetThumbnailIcon();}};NavigationPane.prototype.setBookmarkSelectionIconTheme=function(){if(this.bookmarkButton){this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-icon');this.bookmarkButton.children[0].classList.add('e-pv-bookmark-selection-icon');this.bookmarkButton.classList.add('e-pv-bookmark-button-selection');}};NavigationPane.prototype.removeBookmarkSelectionIconTheme=function(){if(this.bookmarkButton&&this.bookmarkButton.children[0]){this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-selection-icon');this.bookmarkButton.classList.remove('e-pv-bookmark-button-selection');}};NavigationPane.prototype.sideToolbarOnMouseup=function(event){if(event.target===this.sideBarToolbar){this.pdfViewerBase.focusViewerContainer();}};NavigationPane.prototype.sideBarTitleOnMouseup=function(event){this.pdfViewerBase.focusViewerContainer();};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.openBookmarkcontentInitially=function(){var proxy=null;proxy=this;if(document.getElementById(this.pdfViewer.dataId+'_thumbnail_view')){document.getElementById(this.pdfViewer.dataId+'_thumbnail_view').style.display='none';}this.removeThumbnailSelectionIconTheme();if(this.pdfViewer&&this.pdfViewer.cultureValue&&this.pdfViewer.cultureValue.BookmarkContent){this.sideBarTitle.textContent=this.pdfViewer.cultureValue.BookmarkContent;}else{this.sideBarTitle.textContent=this.pdfViewer.localeObj.getConstant('Bookmarks');}this.sideBarContent.setAttribute('aria-label','Bookmark View Panel');this.pdfViewer.bookmarkViewModule.renderBookmarkcontent();if(this.sideBarContentContainer){if(proxy.sideBarContentContainer.style.display!=='none'){if(this.isThumbnailOpen){this.setBookmarkSelectionIconTheme();this.isBookmarkOpen=true;this.updateViewerContainerOnExpand();}else{this.removeBookmarkSelectionIconTheme();this.isBookmarkOpen=false;this.updateViewerContainerOnClose();}}else{this.sideBarContent.focus();this.setBookmarkSelectionIconTheme();this.isBookmarkOpen=true;this.updateViewerContainerOnExpand();}}this.isThumbnailOpen=false;if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.disableBookmarkButton=function(){if(this.sideBarContentContainer&&this.bookmarkButton&&this.bookmarkButton.children[0]){this.sideBarContentContainer.style.display='none';this.bookmarkButton.setAttribute('disabled','disabled');this.bookmarkButton.children[0].classList.add('e-pv-bookmark-disable-icon');}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.clear=function(){if(!sf.base.Browser.isDevice){this.removeBookmarkSelectionIconTheme();this.removeThumbnailSelectionIconTheme();this.closeCommentPanelContainer();}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.destroy=function(){var bookmarkButtonInstance=this.bookmarkButton;var thumbnailButtonInstance=this.thumbnailButton;if(bookmarkButtonInstance&&bookmarkButtonInstance.ej2_instances&&bookmarkButtonInstance.ej2_instances.length>0){bookmarkButtonInstance.ej2_instances[0].destroy();}if(thumbnailButtonInstance&&thumbnailButtonInstance.ej2_instances&&thumbnailButtonInstance.ej2_instances.length>0){thumbnailButtonInstance.ej2_instances[0].destroy();}if(this.annotationMenuObj){var annotationMenuElement=this.annotationMenuObj.element;annotationMenuElement&&annotationMenuElement.ej2_instances&&annotationMenuElement.ej2_instances.length>0?this.annotationMenuObj.destroy():null;}};/**
     * @returns {string} - Returns the string.
     */NavigationPane.prototype.getModuleName=function(){return'NavigationPane';};return NavigationPane;}();/**
 * @param {ClientRect} bounds - Specified the bounds of the annotation.
 * @param {string} commonStyle  - Specified the annotation styles.
 * @param {HTMLElement} cavas  - Specified the annotation canvas element.
 * @param {number} index - Specified the page index value.
 * @param {PdfViewer} pdfViewer - Specified the pdfviewer element.
 * @hidden
 * @returns {void}
 */function renderAdornerLayer(bounds,commonStyle,cavas,index,pdfViewer){var divElement=sf.drawings.createHtmlElement('div',{'id':pdfViewer.element.id+index+'_diagramAdornerLayer','style':'width:'+bounds.width+'px;height:'+bounds.height+'px;'+commonStyle});if(!sf.drawings.getDiagramElement(divElement.id)){var nextElement=pdfViewer.viewerBase.getElement('_pageDiv_'+index);var pageBound=nextElement.getBoundingClientRect();var svgAdornerSvg=createSvg(pdfViewer.element.id+index+'_diagramAdorner_svg',pageBound.width,pageBound.height);svgAdornerSvg.setAttribute('class','e-adorner-layer'+index);svgAdornerSvg.setAttribute('style','pointer-events:none;');pdfViewer.adornerSvgLayer=sf.drawings.createSvgElement('g',{'id':pdfViewer.element.id+'_diagramAdorner'});pdfViewer.adornerSvgLayer.setAttribute('style',' pointer-events: all; ');svgAdornerSvg.appendChild(pdfViewer.adornerSvgLayer);divElement.appendChild(svgAdornerSvg);divElement.style.width=pageBound.width+'px';divElement.style.height=pageBound.height+'px';if(nextElement){nextElement.insertBefore(divElement,nextElement.childNodes[0]);}else{cavas.parentElement.appendChild(divElement);}var svgSelector=sf.drawings.createSvgElement('g',{'id':pdfViewer.element.id+'_SelectorElement'});pdfViewer.adornerSvgLayer.appendChild(svgSelector);sf.drawings.setAttributeSvg(svgAdornerSvg,{style:'pointer-events:none;'});}pdfViewer.viewerBase.applyElementStyles(divElement,index);}/**
 * @param {string} id - Specified the Id of the svg element.
 * @param {string | number} width - Specified the width of the svg element.
 * @param {string | number} height - Specified the height of the svg element.
 * @hidden
 * @returns {SVGElement} - Returns the svg element.
 */function createSvg(id,width,height){var svgObj=document.createElementNS('http://www.w3.org/2000/svg','svg');sf.drawings.setAttributeSvg(svgObj,{'id':id,'width':width,'height':height});return svgObj;}/**
 * Enum for comment status of the annotation
 */var CommentStatus;(function(CommentStatus){CommentStatus[CommentStatus["None"]=1]="None";CommentStatus[CommentStatus["Accepted"]=2]="Accepted";CommentStatus[CommentStatus["Canceled"]=3]="Canceled";CommentStatus[CommentStatus["Completed"]=4]="Completed";CommentStatus[CommentStatus["Rejected"]=5]="Rejected";})(CommentStatus||(CommentStatus={}));/**
 * Enum for font styles
 */var FontStyle;(function(FontStyle){FontStyle[FontStyle["None"]=0]="None";FontStyle[FontStyle["Bold"]=1]="Bold";FontStyle[FontStyle["Italic"]=2]="Italic";FontStyle[FontStyle["Underline"]=4]="Underline";FontStyle[FontStyle["Strikethrough"]=8]="Strikethrough";})(FontStyle||(FontStyle={}));/**
 * enum for context menu items
 */var ContextMenuItem;(function(ContextMenuItem){ContextMenuItem[ContextMenuItem["Copy"]=0]="Copy";ContextMenuItem[ContextMenuItem["Highlight"]=1]="Highlight";ContextMenuItem[ContextMenuItem["Cut"]=2]="Cut";ContextMenuItem[ContextMenuItem["Underline"]=4]="Underline";ContextMenuItem[ContextMenuItem["Paste"]=8]="Paste";ContextMenuItem[ContextMenuItem["Delete"]=16]="Delete";ContextMenuItem[ContextMenuItem["ScaleRatio"]=32]="ScaleRatio";ContextMenuItem[ContextMenuItem["Strikethrough"]=64]="Strikethrough";ContextMenuItem[ContextMenuItem["Properties"]=128]="Properties";ContextMenuItem[ContextMenuItem["Comment"]=256]="Comment";})(ContextMenuItem||(ContextMenuItem={}));/**
 * Enum for signature type
 */var SignatureType;(function(SignatureType){SignatureType["Draw"]="Draw";SignatureType["Type"]="Type";SignatureType["Image"]="Image";})(SignatureType||(SignatureType={}));/**
 * Enum for annotation resizer location
 */var AnnotationResizerLocation;(function(AnnotationResizerLocation){AnnotationResizerLocation[AnnotationResizerLocation["Corners"]=1]="Corners";AnnotationResizerLocation[AnnotationResizerLocation["Edges"]=2]="Edges";})(AnnotationResizerLocation||(AnnotationResizerLocation={}));var DisplayMode;(function(DisplayMode){/** Draw - Display only the draw option in the signature dialog. */DisplayMode[DisplayMode["Draw"]=1]="Draw";/** Text - Display only the type option in the signature dialog. */DisplayMode[DisplayMode["Text"]=2]="Text";/** Upload - Display only the upload option in the signature dialog. */DisplayMode[DisplayMode["Upload"]=4]="Upload";})(DisplayMode||(DisplayMode={}));/**
 * Enum for cursor type
 */var CursorType;(function(CursorType){CursorType["auto"]="auto";CursorType["crossHair"]="crosshair";// eslint-disable-next-line
CursorType["e_resize"]="e-resize";// eslint-disable-next-line
CursorType["ew_resize"]="ew-resize";CursorType["grab"]="grab";CursorType["grabbing"]="grabbing";CursorType["move"]="move";// eslint-disable-next-line
CursorType["n_resize"]="n-resize";// eslint-disable-next-line
CursorType["ne_resize"]="ne-resize";// eslint-disable-next-line
CursorType["ns_resize"]="ns-resize";// eslint-disable-next-line
CursorType["nw_resize"]="nw-resize";CursorType["pointer"]="pointer";// eslint-disable-next-line
CursorType["s_resize"]="s-resize";// eslint-disable-next-line
CursorType["se_resize"]="se-resize";// eslint-disable-next-line
CursorType["sw_resize"]="sw-resize";CursorType["text"]="text";// eslint-disable-next-line
CursorType["w_resize"]="w-resize";})(CursorType||(CursorType={}));/**
 * Enum type for Dynamic Stamp Items
 */var DynamicStampItem;(function(DynamicStampItem){DynamicStampItem["Revised"]="Revised";DynamicStampItem["Reviewed"]="Reviewed";DynamicStampItem["Received"]="Received";DynamicStampItem["Approved"]="Approved";DynamicStampItem["Confidential"]="Confidential";DynamicStampItem["NotApproved"]="NotApproved";})(DynamicStampItem||(DynamicStampItem={}));/**
 * Enum type for Sign Stamp Items
 */var SignStampItem;(function(SignStampItem){SignStampItem["Witness"]="Witness";SignStampItem["InitialHere"]="InitialHere";SignStampItem["SignHere"]="SignHere";SignStampItem["Accepted"]="Accepted";SignStampItem["Rejected"]="Rejected";})(SignStampItem||(SignStampItem={}));/**
 * Enum type for Standard Business Stamp Items
 */var StandardBusinessStampItem;(function(StandardBusinessStampItem){StandardBusinessStampItem["Approved"]="Approved";StandardBusinessStampItem["NotApproved"]="NotApproved";StandardBusinessStampItem["Draft"]="Draft";StandardBusinessStampItem["Final"]="Final";StandardBusinessStampItem["Completed"]="Completed";StandardBusinessStampItem["Confidential"]="Confidential";StandardBusinessStampItem["ForPublicRelease"]="ForPublicRelease";StandardBusinessStampItem["NotForPublicRelease"]="NotForPublicRelease";StandardBusinessStampItem["ForComment"]="ForComment";StandardBusinessStampItem["Void"]="Void";StandardBusinessStampItem["PreliminaryResults"]="PreliminaryResults";StandardBusinessStampItem["InformationOnly"]="InformationOnly";})(StandardBusinessStampItem||(StandardBusinessStampItem={}));/**
 * Enum type for allowed interactions for locked annotations
 */var AllowedInteraction;(function(AllowedInteraction){AllowedInteraction["Select"]="Select";AllowedInteraction["Move"]="Move";AllowedInteraction["Resize"]="Resize";AllowedInteraction["Delete"]="Delete";AllowedInteraction["None"]="None";AllowedInteraction["PropertyChange"]="PropertyChange";})(AllowedInteraction||(AllowedInteraction={}));/**
 * Enum type for export annotation file types
 */var AnnotationDataFormat;(function(AnnotationDataFormat){AnnotationDataFormat["Json"]="Json";AnnotationDataFormat["Xfdf"]="Xfdf";})(AnnotationDataFormat||(AnnotationDataFormat={}));/**
* @private
*/var PdfViewerBlazorAction;(function(PdfViewerBlazorAction){PdfViewerBlazorAction[PdfViewerBlazorAction["Default"]=0]="Default";PdfViewerBlazorAction[PdfViewerBlazorAction["AnnotationAdding"]=2]="AnnotationAdding";})(PdfViewerBlazorAction||(PdfViewerBlazorAction={}));/**
 * ContextMenu module is used to handle the context menus used in the control.
 *
 * @hidden
 */var BlazorContextMenu=/** @class */function(){/**
     * Initialize the constructor of blazorcontext
     *
     * @param { PdfViewer } pdfViewer - Specified PdfViewer class.
     * @param { PdfViewerBase } pdfViewerBase - The pdfViewerBase.
     */function BlazorContextMenu(pdfViewer,pdfViewerBase){this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * Create the context menu.
     * @returns {void}
     */BlazorContextMenu.prototype.createContextMenu=function(){var htmlCollection=document.getElementsByClassName(this.pdfViewer.dataId+'_context_menu');if(htmlCollection){this.contextMenuElement=htmlCollection[0];if(this.contextMenuElement.children&&this.contextMenuElement.children.length>0){var htmlElement=this.contextMenuElement.children[0];htmlElement.className=htmlElement.className+' '+'e-pv-context-menu';}}};/**
     * open the context menu.
     * @param {number} top - The top.
     * @param {number} left - The left.
     * @param {HTMLElement} target - The target.
     * @returns {void}
     */BlazorContextMenu.prototype.open=function(top,left,target){this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenContextMenu',top,left);};/**
     * close the context menu.
     * @returns {void}
     */BlazorContextMenu.prototype.close=function(){this.pdfViewer._dotnetInstance.invokeMethodAsync('CloseContextMenu');};/**
     * destroy the context menu.
     * @returns {void}
     */BlazorContextMenu.prototype.destroy=function(){this.previousAction='';this.contextMenuElement=null;};// eslint-disable-next-line
BlazorContextMenu.prototype.OnItemSelected=function(selectedMenu){if(typeof selectedMenu==='string'){this.pdfViewerBase.OnItemSelected(selectedMenu);}else{this.pdfViewerBase.OnItemSelected(selectedMenu[0]);}};return BlazorContextMenu;}();var globalTimeOut={};var spinTemplate=null;var spinCSSClass=null;var DEFT_MAT_WIDTH=30;var DEFT_MAT3_WIDTH=30;var DEFT_FAB_WIDTH=30;var DEFT_BOOT_WIDTH=30;var DEFT_BOOT4_WIDTH=36;var CLS_SHOWSPIN='e-spin-show';var CLS_HIDESPIN='e-spin-hide';var CLS_MATERIALSPIN='e-spin-material';var CLS_MATERIAL3SPIN='e-spin-material3';var CLS_FABRICSPIN='e-spin-fabric';var CLS_BOOTSPIN='e-spin-bootstrap';var CLS_BOOT4SPIN='e-spin-bootstrap4';var CLS_BOOT5SPIN='e-spin-bootstrap5';var CLS_TAILWIND='e-spin-tailwind';var CLS_HIGHCONTRASTSPIN='e-spin-high-contrast';var CLS_FLUENT='e-spin-fluent';var CLS_SPINWRAP='e-spinner-pane';var CLS_SPININWRAP='e-spinner-inner';var CLS_SPINCIRCLE='e-path-circle';var CLS_SPINARC='e-path-arc';var CLS_SPINLABEL='e-spin-label';var CLS_SPINTEMPLATE='e-spin-template';/**
 * Function to change the Spinners in a page globally from application end.
 * ```
 * E.g : blazorSpinner({ action: "Create", options: {target: targetElement}, type: "" });
 * ```
 *
 * @private
 * @param {string} action - The action.
 * @param {CreateArgs} options - The options
 * @param {string} target - The target
 * @param {string} type - the type
 * @returns {void}
 */ /**
 * Create a spinner for the specified target element.
 * ```
 * E.g : createSpinner({ target: targetElement, width: '34px', label: 'Loading..' });
 * ```
 * @private
 * @param  {SpinnerArgs} args - The SpinnerArgs.
 * @param {createElementParams} internalCreateElement - The internalCreateElement
 * @returns {void}
 */function createSpinner(args,internalCreateElement){if(!args.target){return;}var radius;var makeElement=!sf.base.isNullOrUndefined(internalCreateElement)?internalCreateElement:sf.base.createElement;var container=createSpinnerContainer(args.target,makeElement);if(!sf.base.isNullOrUndefined(args.cssClass)){container.wrap.classList.add(args.cssClass);}if(!sf.base.isNullOrUndefined(args.template)||!sf.base.isNullOrUndefined(spinTemplate)){var template=!sf.base.isNullOrUndefined(args.template)?args.template:spinTemplate;container.wrap.classList.add(CLS_SPINTEMPLATE);replaceContent(container.wrap,template,spinCSSClass);}else{var theme=!sf.base.isNullOrUndefined(args.type)?args.type:getTheme(container.wrap);var width=!sf.base.isNullOrUndefined(args.width)?args.width:undefined;radius=calculateRadius(width,theme);setTheme(theme,container.wrap,radius,makeElement);if(!sf.base.isNullOrUndefined(args.label)){createLabel(container.innerWrap,args.label,makeElement);}}container.wrap.classList.add(CLS_HIDESPIN);container=null;}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} label - The label.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {HTMLElement} - Returns HTMLElement.
 */function createLabel(container,label,makeElement){var labelEle=makeElement('div',{});labelEle.classList.add(CLS_SPINLABEL);labelEle.textContent=label;container.appendChild(labelEle);return labelEle;}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createMaterialSpinner(container,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'Material',radius:radius};createMaterialElement(container,uniqueID,makeElement,CLS_MATERIALSPIN);matCalculateAttributes(radius,container,'Material',CLS_MATERIALSPIN);}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createMaterial3Spinner(container,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'Material3',radius:radius};createMaterialElement(container,uniqueID,makeElement,CLS_MATERIAL3SPIN);matCalculateAttributes(radius,container,'Material3',CLS_MATERIAL3SPIN);}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createBootstrap4Spinner(container,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'Bootstrap4',radius:radius};createMaterialElement(container,uniqueID,makeElement,CLS_BOOT4SPIN);matCalculateAttributes(radius,container,'Bootstrap4',CLS_BOOT4SPIN);}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createBootstrap5Spinner(container,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'Bootstrap5',radius:radius};createMaterialElement(container,uniqueID,makeElement,CLS_BOOT5SPIN);matCalculateAttributes(radius,container,'Bootstrap5',CLS_BOOT5SPIN);}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createTailwindSpinner(container,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'Tailwind',radius:radius};createFabricElement(container,uniqueID,CLS_TAILWIND,makeElement);fbCalculateAttributes(radius,container,CLS_TAILWIND);}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {string} uniqueID - The uniqueID.
 * @param {number} radius - The radius.
 * @returns {void}
 */function startMatAnimate(container,uniqueID,radius){var globalObject={};var timeOutVar=0;globalTimeOut[uniqueID].timeOut=0;globalObject[uniqueID]=globalVariables(uniqueID,radius,0,0);var spinnerInfo={uniqueID:uniqueID,container:container,globalInfo:globalObject,timeOutVar:timeOutVar};animateMaterial(spinnerInfo);}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createFabricSpinner(container,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'Fabric',radius:radius};createFabricElement(container,uniqueID,CLS_FABRICSPIN,makeElement);fbCalculateAttributes(radius,container,CLS_FABRICSPIN);}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createHighContrastSpinner(container,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'HighContrast',radius:radius};createFabricElement(container,uniqueID,CLS_HIGHCONTRASTSPIN,makeElement);fbCalculateAttributes(radius,container,CLS_HIGHCONTRASTSPIN);}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createFluentSpinner(container,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'Fluent',radius:radius};createFabricElement(container,uniqueID,CLS_FLUENT,makeElement);fbCalculateAttributes(radius,container,CLS_FLUENT);}/**
 * @param {HTMLElement} container - The container
 * @returns {string} - Returns the string
 */function getTheme(container){var theme=window.getComputedStyle(container,':after').getPropertyValue('content');return theme.replace(/['"]+/g,'');}/**
 * @param {string} theme - The theme.
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function setTheme(theme,container,radius,makeElement){var innerContainer=container.querySelector('.'+CLS_SPININWRAP);var svg=innerContainer.querySelector('svg');if(!sf.base.isNullOrUndefined(svg)){innerContainer.removeChild(svg);}switch(theme){case'Material':createMaterialSpinner(innerContainer,radius,makeElement);break;case'Material3':createMaterial3Spinner(innerContainer,radius,makeElement);break;case'Fabric':createFabricSpinner(innerContainer,radius,makeElement);break;case'Bootstrap':createBootstrapSpinner(innerContainer,radius,makeElement);break;case'HighContrast':createHighContrastSpinner(innerContainer,radius,makeElement);break;case'Bootstrap4':createBootstrap4Spinner(innerContainer,radius,makeElement);break;case'Bootstrap5':createBootstrap5Spinner(innerContainer,radius,makeElement);break;case'Tailwind':createTailwindSpinner(innerContainer,radius,makeElement);break;case'Fluent':createFluentSpinner(innerContainer,radius,makeElement);break;}}/**
 * @param {HTMLElement} innerContainer - The innerContainer.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createBootstrapSpinner(innerContainer,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'Bootstrap',radius:radius};createBootstrapElement(innerContainer,uniqueID,makeElement);bootCalculateAttributes(innerContainer,radius);}/**
 * @param {HTMLElement} innerContainer - The HTMLElement.
 * @param {string} uniqueID - The uniqueID.
 * @param {createElementParams} makeElement - The createElementParams.
 * @returns {void}
 */function createBootstrapElement(innerContainer,uniqueID,makeElement){var svgBoot=document.createElementNS('http://www.w3.org/2000/svg','svg');var viewBoxValue=64;var trans=32;var defaultRadius=2;svgBoot.setAttribute('id',uniqueID);svgBoot.setAttribute('class',CLS_BOOTSPIN);svgBoot.setAttribute('viewBox','0 0 '+viewBoxValue+' '+viewBoxValue);innerContainer.insertBefore(svgBoot,innerContainer.firstChild);for(var item=0;item<=7;item++){var bootCircle=document.createElementNS('http://www.w3.org/2000/svg','circle');bootCircle.setAttribute('class',CLS_SPINCIRCLE+'_'+item);bootCircle.setAttribute('r',defaultRadius+'');bootCircle.setAttribute('transform','translate('+trans+','+trans+')');svgBoot.appendChild(bootCircle);}}/**
 * @param {HTMLElement} innerContainer - The innerContainer.
 * @param {number} radius - The radius.
 * @returns {void}
 */function bootCalculateAttributes(innerContainer,radius){var svg=innerContainer.querySelector('svg.e-spin-bootstrap');svg.style.width=svg.style.height=radius+'px';var x=0;var y=0;var rad=24;var startArc=90;for(var item=0;item<=7;item++){var start=defineArcPoints(x,y,rad,startArc);var circleEle=svg.querySelector('.'+CLS_SPINCIRCLE+'_'+item);circleEle.setAttribute('cx',start.x+'');circleEle.setAttribute('cy',start.y+'');startArc=startArc>=360?0:startArc;startArc=startArc+45;}}/**
 * @param {number} begin - The begin.
 * @param {number} stop - The stop.
 * @returns {number[]} - Returns the number.
 */function generateSeries(begin,stop){var series=[];var start=begin;var end=stop;var increment=false;var count=1;formSeries(start);/**
     * @param {number} i - The number
     * @returns {void}
     */function formSeries(i){series.push(i);if(i!==end||count===1){if(i<=start&&i>1&&!increment){i=parseFloat((i-0.2).toFixed(2));}else if(i===1){i=7;i=parseFloat((i+0.2).toFixed(2));increment=true;}else if(i<8&&increment){i=parseFloat((i+0.2).toFixed(2));if(i===8){increment=false;}}else if(i<=8&&!increment){i=parseFloat((i-0.2).toFixed(2));}++count;formSeries(i);}}return series;}/**
 * @param {HTMLElement} innerContainer - The innerContainer.
 * @returns {void}
 */function animateBootstrap(innerContainer){var svg=innerContainer.querySelector('svg.e-spin-bootstrap');var id=svg.getAttribute('id');for(var i=1;i<=8;i++){var circleEle=innerContainer.getElementsByClassName('e-path-circle_'+(i===8?0:i))[0];rotation(circleEle,i,i,generateSeries(i,i),id);}/**
     * @param {SVGCircleElement} circle - The circle.
     * @param {number} start - The start.
     * @param {number} end - The end.
     * @param {number[]} series - The series
     * @param {string} id - The id.
     * @returns {void}
     */function rotation(circle,start,end,series,id){var count=0;bootAnimate(start);/**
         * @param {number} radius - The radisu.
         * @returns {void}
         */function bootAnimate(radius){if(globalTimeOut[id].isAnimate){++count;circle.setAttribute('r',radius+'');if(count>=series.length){count=0;}globalTimeOut[id].timeOut=setTimeout(bootAnimate.bind(null,series[count]),18);}}}}/**
 * @param {HTMLElement} container - The container.
 * @param {string} template - The template.
 * @param {string} cssClass - The cssClass.
 * @returns {void}
 */function replaceContent(container,template,cssClass){if(!sf.base.isNullOrUndefined(cssClass)){container.classList.add(cssClass);}var inner=container.querySelector('.e-spinner-inner');inner.innerHTML=template;}/**
 * @param {string | number} width - The width
 * @param {string} theme - The theme.
 * @returns {number} - Returns the number.
 */function calculateRadius(width,theme){var defaultSize;switch(theme){case'Material':defaultSize=DEFT_MAT_WIDTH;break;case'Material3':defaultSize=DEFT_MAT3_WIDTH;break;case'Fabric':defaultSize=DEFT_FAB_WIDTH;break;case'Bootstrap4':defaultSize=DEFT_BOOT4_WIDTH;break;default:defaultSize=DEFT_BOOT_WIDTH;}width=width?parseFloat(width+''):defaultSize;return theme==='Bootstrap'?width:width/2;}/**
 * @param {string} id - The id.
 * @param {number} radius - The radius.
 * @param {number} count - The count.
 * @param {number} previousId - The previousId.
 * @returns {GlobalVariables} - Returns GlobalVariables.
 */function globalVariables(id,radius,count,previousId){return{radius:radius,count:count,previousId:previousId};}/**
 * @returns {string} - Returns string.
 */function randomGenerator(){var random='';var combine='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';for(var i=0;i<5;i++){random+=combine.charAt(Math.floor(Math.random()*combine.length));}return random;}/**
 * @param {HTMLElement} innerCon - The innerContainer.
 * @param {string} uniqueID - The uniqueID.
 * @param {string} themeClass - The themeClass
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createFabricElement(innerCon,uniqueID,themeClass,makeElement){var svgFabric=document.createElementNS('http://www.w3.org/2000/svg','svg');svgFabric.setAttribute('id',uniqueID);svgFabric.setAttribute('class',themeClass);var fabricCirclePath=document.createElementNS('http://www.w3.org/2000/svg','path');fabricCirclePath.setAttribute('class',CLS_SPINCIRCLE);var fabricCircleArc=document.createElementNS('http://www.w3.org/2000/svg','path');fabricCircleArc.setAttribute('class',CLS_SPINARC);innerCon.insertBefore(svgFabric,innerCon.firstChild);svgFabric.appendChild(fabricCirclePath);svgFabric.appendChild(fabricCircleArc);}/**
 * @param {HTMLElement} innerContainer - The innerContainer.
 * @param {string} uniqueID - The uniqueID.
 * @param {createElementParams} makeElement - The makeElement.
 * @param {string} cls - The class
 * @returns {void}
 */function createMaterialElement(innerContainer,uniqueID,makeElement,cls){var svgMaterial=document.createElementNS('http://www.w3.org/2000/svg','svg');svgMaterial.setAttribute('class',cls);svgMaterial.setAttribute('id',uniqueID);var matCirclePath=document.createElementNS('http://www.w3.org/2000/svg','path');matCirclePath.setAttribute('class',CLS_SPINCIRCLE);innerContainer.insertBefore(svgMaterial,innerContainer.firstChild);svgMaterial.appendChild(matCirclePath);}/**
 * @param {HTMLElement} target - The target.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {HTMLElement;HTMLElement} - Retruns the HTMLElement.
 */function createSpinnerContainer(target,makeElement){var spinnerContainer=makeElement('div',{});spinnerContainer.classList.add(CLS_SPINWRAP);var spinnerInnerContainer=makeElement('div',{});spinnerInnerContainer.classList.add(CLS_SPININWRAP);target.appendChild(spinnerContainer);spinnerContainer.appendChild(spinnerInnerContainer);return{wrap:spinnerContainer,innerWrap:spinnerInnerContainer};}/**
 * @param {SpinnerInfo} spinnerInfo - The SpinnerInfo.
 * @returns {void}
 */function animateMaterial(spinnerInfo){var start=1;var end=149;var duration=1333;var max=75;createCircle(start,end,easeAnimation,duration,spinnerInfo.globalInfo[spinnerInfo.uniqueID].count,max,spinnerInfo);spinnerInfo.globalInfo[spinnerInfo.uniqueID].count=++spinnerInfo.globalInfo[spinnerInfo.uniqueID].count%4;}/**
 * @param {number} start - The start.
 * @param {number} end - The end.
 * @param {Function} easing - The easing.
 * @param {number} duration - The duration.
 * @param {number} count - The count.
 * @param {number} max - The max.
 * @param {SpinnerInfo} spinnerInfo - The SpinnerInfo.
 * @returns {void}
 */function createCircle(start,end,easing,duration,count,max,spinnerInfo){var id=++spinnerInfo.globalInfo[spinnerInfo.uniqueID].previousId;var startTime=new Date().getTime();var change=end-start;var diameter=getSize(spinnerInfo.globalInfo[spinnerInfo.uniqueID].radius*2+'');var strokeSize=getStrokeSize(diameter);var rotate=-90*(spinnerInfo.globalInfo[spinnerInfo.uniqueID].count||0);matAnimation(spinnerInfo);/**
     * @param {SpinnerInfo} spinnerInfo - The SpinnerInfo.
     * @returns {void}
     */function matAnimation(spinnerInfo){var currentTime=Math.max(0,Math.min(new Date().getTime()-startTime,duration));updatePath(easing(currentTime,start,change,duration),spinnerInfo.container);if(id===spinnerInfo.globalInfo[spinnerInfo.uniqueID].previousId&&currentTime<duration){globalTimeOut[spinnerInfo.uniqueID].timeOut=setTimeout(matAnimation.bind(null,spinnerInfo),1);}else{animateMaterial(spinnerInfo);}}/**
     * @param {number} value - The value.
     * @param {HTMLElement} container - The container.
     * @returns {void}
     */function updatePath(value,container){if(!sf.base.isNullOrUndefined(container.querySelector('svg.e-spin-material'))||!sf.base.isNullOrUndefined(container.querySelector('svg.e-spin-material3'))){var svg=void 0;if(!sf.base.isNullOrUndefined(container.querySelector('svg.e-spin-material'))&&!sf.base.isNullOrUndefined(container.querySelector('svg.e-spin-material').querySelector('path.e-path-circle'))){svg=container.querySelector('svg.e-spin-material');}else if(!sf.base.isNullOrUndefined(container.querySelector('svg.e-spin-material3'))&&!sf.base.isNullOrUndefined(container.querySelector('svg.e-spin-material3').querySelector('path.e-path-circle'))){svg=container.querySelector('svg.e-spin-material3');}if(!sf.base.isNullOrUndefined(svg)){var path=svg.querySelector('path.e-path-circle');path.setAttribute('stroke-dashoffset',getDashOffset(diameter,strokeSize,value,max)+'');path.setAttribute('transform','rotate('+rotate+' '+diameter/2+' '+diameter/2+')');}}}}/**
 * @param {number} radius - The radius.
 * @param {HTMLElement} container - The container.
 * @param {string} type - The type.
 * @param {string} cls - The class
 * @returns {void}
 */function matCalculateAttributes(radius,container,type,cls){var diameter=radius*2;var svg=container.querySelector('svg.'+cls);var path=svg.querySelector('path.e-path-circle');var strokeSize=getStrokeSize(diameter);var transformOrigin=diameter/2+'px';svg.setAttribute('viewBox','0 0 '+diameter+' '+diameter);svg.style.width=svg.style.height=diameter+'px';svg.style.transformOrigin=transformOrigin+' '+transformOrigin+' '+transformOrigin;path.setAttribute('d',drawArc(diameter,strokeSize));if(type==='Material'||type==='Material3'){path.setAttribute('stroke-width',strokeSize+'');path.setAttribute('stroke-dasharray',(diameter-strokeSize)*Math.PI*0.75+'');path.setAttribute('stroke-dashoffset',getDashOffset(diameter,strokeSize,1,75)+'');}}/**
 * @param {string} value - The value.
 * @returns {number} - Returns number.
 */function getSize(value){var parsed=parseFloat(value);return parsed;}/**
 * @param {number} diameter - The diameter.
 * @param {number} strokeSize - The strokeSize.
 * @returns {string} - Returns string.
 */function drawArc(diameter,strokeSize){var radius=diameter/2;var offset=strokeSize/2;return'M'+radius+','+offset+'A'+(radius-offset)+','+(radius-offset)+' 0 1 1 '+offset+','+radius;}/**
 * @param {number} diameter - The diameter.
 * @returns {number} - Returns number.
 */function getStrokeSize(diameter){return 10/100*diameter;}/**
 * @param {number} diameter - The diameter.
 * @param {number} strokeSize - The strokeSize.
 * @param {number} value - The value.
 * @param {number} max - The max.
 * @returns {number} - Returns number.
 */function getDashOffset(diameter,strokeSize,value,max){return(diameter-strokeSize)*Math.PI*(3*max/100-value/100);}/**
 * @param {number} current - The current.
 * @param {number} start - The start.
 * @param {number} change - The change.
 * @param {number} duration - The duration
 * @returns {number} - Returns number.
 */function easeAnimation(current,start,change,duration){var timestamp=(current/=duration)*current;var timecount=timestamp*current;return start+change*(6*timecount*timestamp+-15*timestamp*timestamp+10*timecount);}/**
 * @param {number} radius - The radius.
 * @param {HTMLElement} innerConainer - The innerConainer.
 * @param {string} trgClass - The trgClass.
 * @returns {void}
 */function fbCalculateAttributes(radius,innerConainer,trgClass){var centerX=radius;var centerY=radius;var diameter=radius*2;var startArc=315;var endArc=45;var svg=innerConainer.querySelector('.'+trgClass);var circle=svg.querySelector('.e-path-circle');var path=svg.querySelector('.e-path-arc');var transformOrigin=diameter/2+'px';circle.setAttribute('d',defineCircle(centerX,centerY,radius));path.setAttribute('d',defineArc(centerX,centerY,radius,startArc,endArc));svg.setAttribute('viewBox','0 0 '+diameter+' '+diameter);svg.style.transformOrigin=transformOrigin+' '+transformOrigin+' '+transformOrigin;svg.style.width=svg.style.height=diameter+'px';}/**
 * @param {number} centerX - The centerX.
 * @param {number} centerY - The centerY.
 * @param {number} radius - The radius.
 * @param {number} angle - The angle.
 * @returns {number;number} - Returns number.
 */function defineArcPoints(centerX,centerY,radius,angle){var radians=(angle-90)*Math.PI/180.0;return{x:centerX+radius*Math.cos(radians),y:centerY+radius*Math.sin(radians)};}/**
 * @param {number} x - The x.
 * @param {number} y - The y.
 * @param {number} radius - The radius.
 * @param {number} startArc - The startArc.
 * @param {number} endArc - The endArc.
 * @returns {string} - Returns string.
 */function defineArc(x,y,radius,startArc,endArc){var start=defineArcPoints(x,y,radius,endArc);var end=defineArcPoints(x,y,radius,startArc);var d=['M',start.x,start.y,'A',radius,radius,0,0,0,end.x,end.y].join(' ');return d;}/**
 * @param {number} x - The x.
 * @param {number} y - The y.
 * @param {number} radius - The radius.
 * @returns {void}
 */function defineCircle(x,y,radius){var d=['M',x,y,'m',-radius,0,'a',radius,radius,0,1,0,radius*2,0,'a',radius,radius,0,1,0,-radius*2,0].join(' ');return d;}/**
 * Function to show the Spinner.
 * @private
 * @param {HTMLElement} container - The container.
 * @returns {void}
 */function showSpinner(container){showHideSpinner(container,false);container=null;}/**
 * @param {HTMLElement} container - The container.
 * @param {boolean} isHide - To show or hide.
 * @returns {void}
 */function showHideSpinner(container,isHide){var spinnerWrap;if(container){spinnerWrap=container.classList.contains(CLS_SPINWRAP)?container:container.querySelector('.'+CLS_SPINWRAP);}if(container&&spinnerWrap){var inner=spinnerWrap.querySelector('.'+CLS_SPININWRAP);// eslint-disable-next-line max-len
var spinCheck=isHide?!spinnerWrap.classList.contains(CLS_SPINTEMPLATE)&&!spinnerWrap.classList.contains(CLS_HIDESPIN):!spinnerWrap.classList.contains(CLS_SPINTEMPLATE)&&!spinnerWrap.classList.contains(CLS_SHOWSPIN);if(spinCheck){var svgEle=spinnerWrap.querySelector('svg');if(sf.base.isNullOrUndefined(svgEle)){return;}var id=svgEle.getAttribute('id');globalTimeOut[id].isAnimate=!isHide;switch(globalTimeOut[id].type){case'Material':case'Material3':// eslint-disable-next-line
isHide?clearTimeout(globalTimeOut[id].timeOut):startMatAnimate(inner,id,globalTimeOut[id].radius);break;case'Bootstrap':// eslint-disable-next-line
isHide?clearTimeout(globalTimeOut[id].timeOut):animateBootstrap(inner);break;}}// eslint-disable-next-line
isHide?sf.base.classList(spinnerWrap,[CLS_HIDESPIN],[CLS_SHOWSPIN]):sf.base.classList(spinnerWrap,[CLS_SHOWSPIN],[CLS_HIDESPIN]);container=null;}}/**
 * Function to hide the Spinner.
 * @private
 * @param {HTMLElement} container - Specify the target of the Spinner.
 * @returns {void}
 */function hideSpinner(container){showHideSpinner(container,true);container=null;}/**
 * Function to change the Spinners in a page globally from application end.
 * ```
 * E.g : setSpinner({ cssClass: 'custom-css'; type: 'Material' });
 * ```
 * @private
 * @param {SetSpinnerArgs} args - The args.
 * @param {createElementParams} internalCreateElement - The internalCreateElement.
 * @returns {void}
 */var __awaiter$3=undefined&&undefined.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value);}).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var __generator$3=undefined&&undefined.__generator||function(thisArg,body){var _={label:0,sent:function sent(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break;}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}if(t[2])_.ops.pop();_.trys.pop();continue;}op=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}};/**
 * The `BlazorUIAdaptor` module is used to handle the UI update of native components.
 * @hidden
 */var BlazorUiAdaptor=/** @class */function(){/**
     * Initialize the constructor of blazorUIadapater.
     *
     * @param { PdfViewer } pdfviewer - Specified PdfViewer class.
     * @param { PdfViewerBase } pdfViewerBase - The pdfViewerBase.
     */function BlazorUiAdaptor(pdfviewer,pdfViewerBase){this.pdfViewer=null;this.pdfViewerBase=null;/**
         * @private
         */this.totalPageElement=null;this.currentPageBoxElementContainer=null;this.currentPageBoxElement=null;this.firstPageElement=null;this.previousPageElement=null;this.nextPageElement=null;this.lastPageElement=null;/**
        * @private
        */this.zommOutElement=null;/**
        * @private
        */this.zoomInElement=null;/**
        * @private
        */this.zoomDropDownElement=null;this.selectToolElement=null;this.handToolElement=null;this.undoElement=null;this.redoElement=null;this.commentElement=null;this.submitFormButton=null;this.searchElement=null;this.annotationElement=null;this.printElement=null;this.downloadElement=null;this.highlightElement=null;this.underlineElement=null;this.strikeThroughElement=null;this.shapeElement=null;this.calibrateElement=null;this.stampElement=null;this.freeTextElement=null;this.signatureElement=null;this.inkElement=null;this.annotationFontSizeInputElement=null;this.annotationFontFamilyInputElement=null;this.annotationColorElement=null;this.annotationStrokeColorElement=null;this.annotationThicknessElement=null;this.annotationOpacityElement=null;this.annotationFontColorElement=null;this.annotationFontFamilyElement=null;this.annotationFontSizeElement=null;this.annotationTextAlignElement=null;this.annotationTextColorElement=null;this.annotationTextPropertiesElement=null;this.annotationDeleteElement=null;this.annotationCloseElement=null;this.annotationCommentPanelElement=null;this.mobileToolbarContainerElement=null;this.mobileSearchPreviousOccurenceElement=null;this.mobileSearchNextOccurenceElement=null;/**
        * @private
        */this.cssClass='e-overlay';this.disableClass=' e-overlay';this.editAnnotationButtonElement=null;this.pdfViewer=pdfviewer;this.pdfViewerBase=pdfViewerBase;this.findToolbarElements();}BlazorUiAdaptor.prototype.findToolbarElements=function(){if(this.pdfViewerBase.getElement('_totalPage')){this.totalPageElement=this.pdfViewerBase.getElement('_totalPage').children[0];}this.currentPageBoxElementContainer=this.pdfViewerBase.getElement('_currentPageInput');if(this.pdfViewerBase.getElement('_currentPageInput')){this.currentPageBoxElement=this.pdfViewerBase.getElement('_currentPageInput').children[0].children[0];}this.firstPageElement=this.pdfViewerBase.getElement('_firstPage');this.previousPageElement=this.pdfViewerBase.getElement('_previousPage');this.nextPageElement=this.pdfViewerBase.getElement('_nextPage');this.lastPageElement=this.pdfViewerBase.getElement('_lastPage');this.zommOutElement=this.pdfViewerBase.getElement('_zoomOut');this.zoomInElement=this.pdfViewerBase.getElement('_zoomIn');this.zoomDropDownElement=this.pdfViewerBase.getElement('_zoomDropDown');this.selectToolElement=this.pdfViewerBase.getElement('_selectTool');this.handToolElement=this.pdfViewerBase.getElement('_handTool');this.undoElement=this.pdfViewerBase.getElement('_undo');this.redoElement=this.pdfViewerBase.getElement('_redo');this.commentElement=this.pdfViewerBase.getElement('_comment');this.submitFormButton=this.pdfViewerBase.getElement('_submitFormButton');this.searchElement=this.pdfViewerBase.getElement('_search');this.annotationElement=this.pdfViewerBase.getElement('_annotation');if(this.annotationElement){this.editAnnotationButtonElement=this.annotationElement.children[0];}if(this.editAnnotationButtonElement){this.editAnnotationButtonElement.classList.add('e-pv-tbar-btn');}this.printElement=this.pdfViewerBase.getElement('_print');this.downloadElement=this.pdfViewerBase.getElement('_download');this.highlightElement=this.pdfViewerBase.getElement('_highLight');this.underlineElement=this.pdfViewerBase.getElement('_underline');this.strikeThroughElement=this.pdfViewerBase.getElement('_strikethrough');this.shapeElement=this.pdfViewerBase.getElement('_annotation_shapes');this.calibrateElement=this.pdfViewerBase.getElement('_annotation_calibrate');this.stampElement=this.pdfViewerBase.getElement('_annotation_stamp');this.freeTextElement=this.pdfViewerBase.getElement('_annotation_freeTextEdit');this.signatureElement=this.pdfViewerBase.getElement('_annotation_signature');this.inkElement=this.pdfViewerBase.getElement('_annotation_ink');if(this.pdfViewerBase.getElement('_annotation_fontsize')){// tslint:disable-next-line:max-line-length
this.annotationFontSizeInputElement=this.pdfViewerBase.getElement('_annotation_fontsize').children[0].children[0];}if(this.pdfViewerBase.getElement('_annotation_fontsize')){// tslint:disable-next-line:max-line-length
this.annotationFontFamilyInputElement=this.pdfViewerBase.getElement('_annotation_fontname').children[0].children[0];}this.annotationColorElement=this.pdfViewerBase.getElement('_annotation_color');this.annotationStrokeColorElement=this.pdfViewerBase.getElement('_annotation_stroke');this.annotationThicknessElement=this.pdfViewerBase.getElement('_annotation_thickness');this.annotationOpacityElement=this.pdfViewerBase.getElement('_annotation_opacity');this.annotationFontColorElement=this.pdfViewerBase.getElement('_annotation_textcolor');this.annotationFontFamilyElement=this.pdfViewerBase.getElement('_annotation_fontname');this.annotationFontSizeElement=this.pdfViewerBase.getElement('_annotation_fontsize');this.annotationTextAlignElement=this.pdfViewerBase.getElement('_annotation_textalign');this.annotationTextColorElement=this.pdfViewerBase.getElement('_annotation_textcolor');this.annotationTextPropertiesElement=this.pdfViewerBase.getElement('_annotation_textproperties');this.annotationDeleteElement=this.pdfViewerBase.getElement('_annotation_delete');this.annotationCommentPanelElement=this.pdfViewerBase.getElement('_annotation_commentPanel');this.annotationCloseElement=this.pdfViewerBase.getElement('_annotation_close');this.mobileToolbarContainerElement=this.pdfViewerBase.getElement('_mobileToolbarContainer');this.mobileSearchPreviousOccurenceElement=this.pdfViewerBase.getElement('_prev_occurrence');this.mobileSearchNextOccurenceElement=this.pdfViewerBase.getElement('_next_occurrence');};/**
     * Update the total page.
     * @returns {void}
     */BlazorUiAdaptor.prototype.updateTotalPage=function(){if(this.totalPageElement){this.totalPageElement.textContent=this.pdfViewer.localeObj.getConstant('of')+this.pdfViewerBase.pageCount.toString();}};/**
     * Update current page.
     * @param {number} pageNumber - The pageNumber.
     * @returns {void}
     */BlazorUiAdaptor.prototype.updateCurrentPage=function(pageNumber){if(this.currentPageBoxElement){this.currentPageBoxElement.value=pageNumber.toString();}};/**
     * Load the PDF document.
     * @returns {void}
     */BlazorUiAdaptor.prototype.loadDocument=function(){return __awaiter$3(this,void 0,void 0,function(){var Of;return __generator$3(this,function(_a){switch(_a.label){case 0:if(!this.pdfViewer.enableNavigation)return[3/*break*/,3];if(this.currentPageBoxElementContainer){this.currentPageBoxElementContainer.classList.remove(this.cssClass);}if(this.currentPageBoxElement){this.currentPageBoxElement.value='1';}if(!this.totalPageElement)return[3/*break*/,2];return[4/*yield*/,this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Of")];case 1:Of=_a.sent();this.totalPageElement.textContent=Of+" "+this.pdfViewerBase.pageCount.toString();_a.label=2;case 2:if(this.firstPageElement&&!this.isEnabled(this.firstPageElement)){this.firstPageElement.className+=this.disableClass;}if(this.previousPageElement&&!this.isEnabled(this.previousPageElement)){this.previousPageElement.className+=this.disableClass;}if(this.nextPageElement){this.nextPageElement.classList.remove(this.cssClass);}if(this.lastPageElement){this.lastPageElement.classList.remove(this.cssClass);}if(this.pdfViewerBase.pageCount===1){if(this.nextPageElement&&!this.nextPageElement.classList.contains(this.cssClass)){this.nextPageElement.className+=this.disableClass;}if(this.lastPageElement&&!this.lastPageElement.classList.contains(this.cssClass)){this.lastPageElement.className+=this.disableClass;}}_a.label=3;case 3:if(this.pdfViewer.enableMagnification){if(this.zoomInElement){this.zoomInElement.classList.remove(this.cssClass);}if(this.zommOutElement){this.zommOutElement.classList.remove(this.cssClass);}if(this.zoomDropDownElement){this.zoomDropDownElement.classList.remove(this.cssClass);}}if(this.pdfViewer.enableTextSelection&&this.selectToolElement&&this.pdfViewer.toolbar){this.selectToolElement.classList.remove(this.cssClass);this.selectItem(this.pdfViewer.toolbar.SelectToolElement);}if(this.handToolElement){this.handToolElement.classList.remove(this.cssClass);}if(this.pdfViewer.enableStickyNotesAnnotation&&this.commentElement){this.commentElement.classList.remove(this.cssClass);}if(this.pdfViewer.enableTextSearch&&this.searchElement){this.searchElement.classList.remove(this.cssClass);}if(this.pdfViewer.isFormFieldDocument&&this.submitFormButton){this.submitFormButton.classList.remove(this.cssClass);}if(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableAnnotationToolbar&&this.annotationElement){this.annotationElement.classList.remove(this.cssClass);}if(this.pdfViewer.enablePrint&&this.printElement){this.printElement.classList.remove(this.cssClass);}if(this.pdfViewer.enableDownload&&this.downloadElement){this.downloadElement.classList.remove(this.cssClass);}if(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableTextMarkupAnnotation){if(this.highlightElement){this.highlightElement.classList.remove(this.cssClass);}if(this.underlineElement){this.underlineElement.classList.remove(this.cssClass);}if(this.strikeThroughElement){this.strikeThroughElement.classList.remove(this.cssClass);}}if(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableShapeAnnotation&&this.shapeElement){this.shapeElement.classList.remove(this.cssClass);}if(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableMeasureAnnotation&&this.calibrateElement){this.calibrateElement.classList.remove(this.cssClass);}if(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableStampAnnotations&&this.stampElement){this.stampElement.classList.remove(this.cssClass);}if(this.pdfViewer.enableFreeText&&this.freeTextElement){this.freeTextElement.classList.remove(this.cssClass);}if(this.pdfViewer.enableHandwrittenSignature&&this.signatureElement){this.signatureElement.classList.remove(this.cssClass);}if(this.pdfViewer.enableInkAnnotation&&this.inkElement){this.inkElement.classList.remove(this.cssClass);}if(this.annotationCommentPanelElement&&this.pdfViewer.enableCommentPanel){this.annotationCommentPanelElement.classList.remove(this.cssClass);}return[2/*return*/];}});});};BlazorUiAdaptor.prototype.selectItem=function(element){if(element){element.classList.add("e-pv-select");}};BlazorUiAdaptor.prototype.deselectItem=function(element){if(element){element.classList.remove("e-pv-select");}};BlazorUiAdaptor.prototype.showAnnotationToolbar=function(isToolbarVisible){if(this.pdfViewer.toolbar){this.pdfViewer.toolbar.annotationToolbarModule.adjustViewer(isToolbarVisible);if(isToolbarVisible){this.pdfViewer.toolbar.selectItem(this.editAnnotationButtonElement);}else{this.pdfViewer.toolbar.deSelectItem(this.editAnnotationButtonElement);this.pdfViewerBase.focusViewerContainer();}}};BlazorUiAdaptor.prototype.closeAnnotationToolbar=function(){if(this.pdfViewer.toolbar){this.pdfViewer.toolbar.deSelectItem(this.editAnnotationButtonElement);if(this.pdfViewer.toolbar.annotationToolbarModule){this.pdfViewer.toolbar.annotationToolbarModule.adjustViewer(false);}}this.pdfViewerBase.navigationPane.closeCommentPanelContainer();};/**
     * Reset the toolbar.
     * @returns {void}
     */BlazorUiAdaptor.prototype.resetToolbar=function(){if(this.pdfViewer.enableToolbar){if(this.currentPageBoxElement){this.currentPageBoxElement.value='0';}if(this.totalPageElement){this.totalPageElement.textContent=this.pdfViewer.localeObj.getConstant('of')+'0';}if(this.currentPageBoxElementContainer&&!this.isEnabled(this.currentPageBoxElementContainer)){this.currentPageBoxElementContainer.className+=this.disableClass;}if(this.firstPageElement&&!this.isEnabled(this.firstPageElement)){this.firstPageElement.className+=this.disableClass;}if(this.previousPageElement&&!this.isEnabled(this.previousPageElement)){this.previousPageElement.className+=this.disableClass;}if(this.nextPageElement&&!this.isEnabled(this.nextPageElement)){this.nextPageElement.className+=this.disableClass;}if(this.lastPageElement&&!this.isEnabled(this.lastPageElement)){this.lastPageElement.className+=this.disableClass;}if(this.zoomInElement&&!this.isEnabled(this.zoomInElement)){this.zoomInElement.className+=this.disableClass;}if(this.zommOutElement&&!this.isEnabled(this.zommOutElement)){this.zommOutElement.className+=this.disableClass;}if(this.zoomDropDownElement&&!this.isEnabled(this.zoomDropDownElement)){this.zoomDropDownElement.className+=this.disableClass;}if(this.selectToolElement&&!this.isEnabled(this.selectToolElement)){this.selectToolElement.className+=this.disableClass;}if(this.handToolElement&&!this.isEnabled(this.handToolElement)){this.handToolElement.className+=this.disableClass;}if(this.undoElement&&!this.isEnabled(this.undoElement)){this.undoElement.className+=this.disableClass;}if(this.redoElement&&!this.isEnabled(this.redoElement)){this.redoElement.className+=this.disableClass;}if(this.commentElement&&!this.isEnabled(this.commentElement)){this.commentElement.className+=this.disableClass;}if(this.searchElement&&!this.isEnabled(this.searchElement)){this.searchElement.className+=this.disableClass;}if(this.submitFormButton&&!this.isEnabled(this.submitFormButton)){this.submitFormButton.className+=this.disableClass;}if(this.annotationElement&&!this.isEnabled(this.annotationElement)){this.annotationElement.className+=this.disableClass;}if(this.printElement&&!this.isEnabled(this.printElement)){this.printElement.className+=this.disableClass;}if(this.downloadElement&&!this.isEnabled(this.downloadElement)){this.downloadElement.className+=this.disableClass;}}if(this.pdfViewer.enableAnnotationToolbar){if(this.highlightElement&&!this.isEnabled(this.highlightElement)){this.highlightElement.className+=this.disableClass;}if(this.underlineElement&&!this.isEnabled(this.underlineElement)){this.underlineElement.className+=this.disableClass;}if(this.strikeThroughElement&&!this.isEnabled(this.strikeThroughElement)){this.strikeThroughElement.className+=this.disableClass;}if(this.shapeElement&&!this.isEnabled(this.shapeElement)){this.shapeElement.className+=this.disableClass;}if(this.calibrateElement&&!this.isEnabled(this.calibrateElement)){this.calibrateElement.className+=this.disableClass;}if(this.stampElement&&!this.isEnabled(this.stampElement)){this.stampElement.className+=this.disableClass;}if(this.freeTextElement&&!this.isEnabled(this.freeTextElement)){this.freeTextElement.className+=this.disableClass;}if(this.signatureElement&&!this.isEnabled(this.signatureElement)){this.signatureElement.className+=this.disableClass;}if(this.inkElement&&!this.isEnabled(this.inkElement)){this.inkElement.className+=this.disableClass;}if(this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)){this.annotationFontFamilyElement.className+=this.disableClass;}if(this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)){this.annotationFontSizeElement.className+=this.disableClass;}if(this.annotationTextColorElement&&!this.isEnabled(this.annotationTextColorElement)){this.annotationTextColorElement.className+=this.disableClass;}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;}if(this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)){this.annotationColorElement.className+=this.disableClass;}if(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)){this.annotationStrokeColorElement.className+=this.disableClass;}if(this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)){this.annotationThicknessElement.className+=this.disableClass;}if(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)){this.annotationOpacityElement.className+=this.disableClass;}if(this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)){this.annotationDeleteElement.className+=this.disableClass;}if(this.annotationCommentPanelElement&&!this.isEnabled(this.annotationCommentPanelElement)){this.annotationCommentPanelElement.className+=this.disableClass;}}};/**
     * When annotation selection changed.
     * @param {boolean} currentPageNumber - The current page number.
     * @returns {void}
     */BlazorUiAdaptor.prototype.EnableDeleteOption=function(isEnable){if(this.annotationDeleteElement!==null){if(isEnable){this.annotationDeleteElement.classList.remove(this.cssClass);}else{if(!this.isEnabled(this.annotationDeleteElement)){this.annotationDeleteElement.className+=this.disableClass;}}}};/**
     * when the page changes.
     * @param {number} currentPageNumber - The current page number.
     * @returns {void}
     */BlazorUiAdaptor.prototype.pageChanged=function(currentPageNumber){if(this.pdfViewer.enableNavigation&&this.currentPageBoxElement&&this.currentPageBoxElement.value){this.currentPageBoxElement.value=currentPageNumber.toString();}if(currentPageNumber===this.pdfViewer.pageCount){if(this.nextPageElement&&!this.isEnabled(this.nextPageElement)){this.nextPageElement.className+=this.disableClass;}if(this.previousPageElement){this.previousPageElement.classList.remove(this.cssClass);}if(this.lastPageElement&&!this.isEnabled(this.lastPageElement)){this.lastPageElement.className+=this.disableClass;}if(this.firstPageElement){this.firstPageElement.classList.remove(this.cssClass);}}if(currentPageNumber<this.pdfViewer.pageCount&&currentPageNumber!==1){if(this.firstPageElement){this.firstPageElement.classList.remove(this.cssClass);}if(this.previousPageElement){this.previousPageElement.classList.remove(this.cssClass);}if(this.nextPageElement){this.nextPageElement.classList.remove(this.cssClass);}if(this.lastPageElement){this.lastPageElement.classList.remove(this.cssClass);}}if(currentPageNumber===1){if(this.nextPageElement){this.nextPageElement.classList.remove(this.cssClass);}if(this.lastPageElement){this.lastPageElement.classList.remove(this.cssClass);}if(this.firstPageElement&&!this.isEnabled(this.firstPageElement)){this.firstPageElement.className+=this.disableClass;}if(this.previousPageElement&&!this.isEnabled(this.previousPageElement)){this.previousPageElement.className+=this.disableClass;}}};/**
     * @private
     */BlazorUiAdaptor.prototype.canUndoRedo=function(){var canUndo=this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.actionCollection&&this.pdfViewer.annotationModule.actionCollection.length>0?true:false;var canRedo=this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.redoCollection&&this.pdfViewer.annotationModule.redoCollection.length>0?true:false;this.pdfViewer._dotnetInstance.invokeMethodAsync('updateUndoRedoState',canUndo,canRedo);};/**
     * @param {string} item - The current item.
     * @param {boolean} enable - To enable the item or not.
     * @returns {void}
     */BlazorUiAdaptor.prototype.updateUndoRedoButton=function(item,enable){if(item==='undo'){if(enable&&this.undoElement){this.undoElement.classList.remove(this.cssClass);}else{if(this.undoElement&&!this.isEnabled(this.undoElement)){this.undoElement.className+=this.disableClass;}}}if(item==='redo'){if(enable&&this.redoElement){this.redoElement.classList.remove(this.cssClass);}else{if(this.redoElement&&!this.isEnabled(this.redoElement)){this.redoElement.className+=this.disableClass;}}this.canUndoRedo();}};/**
     * @returns {void}
     */BlazorUiAdaptor.prototype.disableUndoRedoButton=function(){if(this.undoElement&&!this.isEnabled(this.undoElement)){this.undoElement.className+=this.disableClass;}if(this.redoElement&&!this.isEnabled(this.redoElement)){this.redoElement.className+=this.disableClass;}};/**
     * @returns {void}
     */BlazorUiAdaptor.prototype.enableTextMarkupAnnotationPropertiesTools=function(isEnable){if(isEnable){if(this.annotationColorElement){this.annotationColorElement.classList.remove(this.cssClass);}if(this.annotationOpacityElement){this.annotationOpacityElement.classList.remove(this.cssClass);}}else{if(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)){this.annotationOpacityElement.className+=this.disableClass;}if(this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)){this.annotationColorElement.className+=this.disableClass;}}if(this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)){this.annotationFontColorElement.className+=this.disableClass;}if(this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)){this.annotationFontFamilyElement.className+=this.disableClass;}if(this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)){this.annotationFontSizeElement.className+=this.disableClass;}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;}if(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)){this.annotationStrokeColorElement.className+=this.disableClass;}if(this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)){this.annotationThicknessElement.className+=this.disableClass;}};/**
     * @param {boolean} isEnable - To enable the item or not.
     * @param {boolean} isProperitiesChange - To enable the item or not.
     * @returns {void}
     */BlazorUiAdaptor.prototype.enableAnnotationPropertiesTool=function(isEnable,isProperitiesChange){if(isProperitiesChange){if(isEnable){if(this.annotationColorElement&&this.pdfViewer.selectedItems.annotations[0].measureType!=="Perimeter"){this.annotationColorElement.classList.remove(this.cssClass);}if(this.annotationStrokeColorElement){this.annotationStrokeColorElement.classList.remove(this.cssClass);}if(this.annotationThicknessElement){this.annotationThicknessElement.classList.remove(this.cssClass);}if(this.annotationOpacityElement){this.annotationOpacityElement.classList.remove(this.cssClass);}if(this.pdfViewer.enableShapeLabel){if(this.annotationFontColorElement){this.annotationFontColorElement.classList.remove(this.cssClass);}if(this.annotationFontFamilyElement){this.annotationFontFamilyElement.classList.remove(this.cssClass);}if(this.annotationFontSizeElement){this.annotationFontSizeElement.classList.remove(this.cssClass);}}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;}}else{if(this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)){this.annotationColorElement.className+=this.disableClass;}if(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)){this.annotationStrokeColorElement.className+=this.disableClass;}if(this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)){this.annotationThicknessElement.className+=this.disableClass;}if(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)){this.annotationOpacityElement.className+=this.disableClass;}if(this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)){this.annotationDeleteElement.className+=this.disableClass;}}}};/**
     * @param {boolean} isEnable - To enable the item or not.
     * @param {boolean} isProperitiesChange - To enable the item or not.
     * @returns {void}
     */BlazorUiAdaptor.prototype.enableFreeTextAnnotationPropertiesTools=function(isEnable,isProperitiesChange){if(isProperitiesChange&&isEnable){if(this.annotationColorElement){this.annotationColorElement.classList.remove(this.cssClass);}if(this.annotationStrokeColorElement){this.annotationStrokeColorElement.classList.remove(this.cssClass);}if(this.annotationThicknessElement){this.annotationThicknessElement.classList.remove(this.cssClass);}if(this.annotationOpacityElement){this.annotationOpacityElement.classList.remove(this.cssClass);}if(this.annotationFontColorElement){this.annotationFontColorElement.classList.remove(this.cssClass);}if(this.annotationFontFamilyElement){this.annotationFontFamilyElement.classList.remove(this.cssClass);}if(this.annotationFontSizeElement){this.annotationFontSizeElement.classList.remove(this.cssClass);}if(this.annotationTextAlignElement){this.annotationTextAlignElement.classList.remove(this.cssClass);}if(this.annotationTextPropertiesElement){this.annotationTextPropertiesElement.classList.remove(this.cssClass);}if(this.annotationDeleteElement){this.annotationDeleteElement.classList.remove(this.cssClass);}if(this.annotationCommentPanelElement){this.annotationCommentPanelElement.classList.remove(this.cssClass);}}};/**
     * @param {boolean} isEnable - To enable the item or not.
     * @param {boolean} isPropertiesChange - To enable the item or not.
     * @returns {void}
     */BlazorUiAdaptor.prototype.enableStampAnnotationPropertiesTools=function(isEnable,isPropertiesChange){if(isEnable){if(this.annotationOpacityElement){this.annotationOpacityElement.classList.remove(this.cssClass);}if(this.annotationDeleteElement){this.annotationDeleteElement.classList.remove(this.cssClass);}if(this.annotationCommentPanelElement){this.annotationCommentPanelElement.classList.remove(this.cssClass);}}else{if(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)){this.annotationOpacityElement.className+=this.disableClass;}if(this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)){this.annotationDeleteElement.className+=this.disableClass;}if(this.annotationCommentPanelElement&&!this.isEnabled(this.annotationCommentPanelElement)){this.annotationCommentPanelElement.className+=this.disableClass;}}if(this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)){this.annotationColorElement.className+=this.disableClass;}if(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)){this.annotationStrokeColorElement.className+=this.disableClass;}if(this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)){this.annotationThicknessElement.className+=this.disableClass;}if(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)){this.annotationOpacityElement.className+=this.disableClass;}if(this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)){this.annotationFontColorElement.className+=this.disableClass;}if(this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)){this.annotationFontFamilyElement.className+=this.disableClass;}if(this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)){this.annotationFontSizeElement.className+=this.disableClass;}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;}};/**
     * @param {boolean} isEnable - To enable the item or not.
     * @param {boolean} isProperitiesChange - To enable the item or not.
     * @returns {void}
     */BlazorUiAdaptor.prototype.enableSignaturePropertiesTools=function(isEnable,isProperitiesChange){if(isEnable){if(this.annotationStrokeColorElement){this.annotationStrokeColorElement.classList.remove(this.cssClass);}if(this.annotationThicknessElement){this.annotationThicknessElement.classList.remove(this.cssClass);}if(this.annotationOpacityElement){this.annotationOpacityElement.classList.remove(this.cssClass);}if(this.annotationDeleteElement){this.annotationDeleteElement.classList.remove(this.cssClass);}if(this.annotationCommentPanelElement){this.annotationCommentPanelElement.classList.remove(this.cssClass);}}else{if(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)){this.annotationStrokeColorElement.className+=this.disableClass;}if(this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)){this.annotationThicknessElement.className+=this.disableClass;}if(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)){this.annotationOpacityElement.className+=this.disableClass;}if(this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)){this.annotationDeleteElement.className+=this.disableClass;}if(this.annotationCommentPanelElement&&!this.isEnabled(this.annotationCommentPanelElement)){this.annotationCommentPanelElement.className+=this.disableClass;}}if(this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)){this.annotationColorElement.className+=this.disableClass;}if(this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)){this.annotationFontColorElement.className+=this.disableClass;}if(this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)){this.annotationFontFamilyElement.className+=this.disableClass;}if(this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)){this.annotationFontSizeElement.className+=this.disableClass;}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;}};/**
     * @returns {void}
     */BlazorUiAdaptor.prototype.annotationAdd=function(){if(this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)){this.annotationColorElement.className+=this.disableClass;}if(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)){this.annotationStrokeColorElement.className+=this.disableClass;}if(this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)){this.annotationThicknessElement.className+=this.disableClass;}if(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)){this.annotationOpacityElement.className+=this.disableClass;}if(this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)){this.annotationFontColorElement.className+=this.disableClass;}if(this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)){this.annotationFontFamilyElement.className+=this.disableClass;}if(this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)){this.annotationFontSizeElement.className+=this.disableClass;}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;}};/**
     * @returns {void}
     */BlazorUiAdaptor.prototype.annotationUnSelect=function(){if(this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)){this.annotationColorElement.className+=this.disableClass;}if(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)){this.annotationStrokeColorElement.className+=this.disableClass;}if(this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)){this.annotationThicknessElement.className+=this.disableClass;}if(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)){this.annotationOpacityElement.className+=this.disableClass;}if(this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)){this.annotationFontColorElement.className+=this.disableClass;}if(this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)){this.annotationFontFamilyElement.className+=this.disableClass;}if(this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)){this.annotationFontSizeElement.className+=this.disableClass;}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;}if(this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)){this.annotationDeleteElement.className+=this.disableClass;}};/**
     * @param {string} annotationType - The annotationType.
     * @returns {void}
     */BlazorUiAdaptor.prototype.annotationSelect=function(annotationType){if(annotationType==='FreeText'){if(this.annotationColorElement){this.annotationColorElement.classList.remove(this.cssClass);}if(this.annotationStrokeColorElement){this.annotationStrokeColorElement.classList.remove(this.cssClass);}if(this.annotationThicknessElement){this.annotationThicknessElement.classList.remove(this.cssClass);}if(this.annotationOpacityElement){this.annotationOpacityElement.classList.remove(this.cssClass);}if(this.annotationFontColorElement){this.annotationFontColorElement.classList.remove(this.cssClass);}if(this.annotationFontFamilyElement){this.annotationFontFamilyElement.classList.remove(this.cssClass);}if(this.annotationFontSizeElement){this.annotationFontSizeElement.classList.remove(this.cssClass);}if(this.annotationTextAlignElement){this.annotationTextAlignElement.classList.remove(this.cssClass);}if(this.annotationTextPropertiesElement){this.annotationTextPropertiesElement.classList.remove(this.cssClass);}}if(annotationType==='Shape'||annotationType==='Measure'){if(this.annotationColorElement&&this.pdfViewer.selectedItems.annotations[0].measureType!=="Perimeter"){this.annotationColorElement.classList.remove(this.cssClass);}if(this.annotationStrokeColorElement){this.annotationStrokeColorElement.classList.remove(this.cssClass);}if(this.annotationThicknessElement){this.annotationThicknessElement.classList.remove(this.cssClass);}if(this.annotationOpacityElement){this.annotationOpacityElement.classList.remove(this.cssClass);}if(this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)){this.annotationFontColorElement.className+=this.disableClass;}if(this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)){this.annotationFontFamilyElement.className+=this.disableClass;}if(this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)){this.annotationFontSizeElement.className+=this.disableClass;}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;}}if(annotationType==='TextMarkup'){if(this.annotationColorElement){this.annotationColorElement.classList.remove(this.cssClass);}if(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)){this.annotationStrokeColorElement.className+=this.disableClass;}if(this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)){this.annotationThicknessElement.className+=this.disableClass;}if(this.annotationOpacityElement){this.annotationOpacityElement.classList.remove(this.cssClass);}if(this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)){this.annotationFontColorElement.className+=this.disableClass;}if(this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)){this.annotationFontFamilyElement.className+=this.disableClass;}if(this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)){this.annotationFontSizeElement.className+=this.disableClass;}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;}}if(this.annotationDeleteElement){this.annotationDeleteElement.classList.remove(this.cssClass);}if(this.annotationCommentPanelElement){this.annotationCommentPanelElement.classList.remove(this.cssClass);}};/**
     * @param {string} fontFamily - The fontFamily.
     * @returns {void}
     */BlazorUiAdaptor.prototype.updateFontFamilyInIcon=function(fontFamily){if(this.annotationFontFamilyInputElement){this.annotationFontFamilyInputElement.value=fontFamily;}};/**
     * @param {number} fontSize - The fontSize.
     * @returns {void}
     */BlazorUiAdaptor.prototype.updateFontSizeInIcon=function(fontSize){var fontValue=fontSize.toString()+'px';if(this.annotationFontSizeInputElement){this.annotationFontSizeInputElement.value=fontValue;}};/**
     * @param {boolean} isEnable - To enable or disable.
     * @returns {void}
     */BlazorUiAdaptor.prototype.enableSearchItems=function(isEnable){if(isEnable&&this.mobileSearchPreviousOccurenceElement&&this.mobileSearchNextOccurenceElement){this.mobileSearchPreviousOccurenceElement.classList.remove(this.cssClass);this.mobileSearchNextOccurenceElement.classList.remove(this.cssClass);}else{if(this.mobileSearchPreviousOccurenceElement&&!this.isEnabled(this.mobileSearchPreviousOccurenceElement)){this.mobileSearchPreviousOccurenceElement.className+=this.disableClass;}if(this.mobileSearchNextOccurenceElement&&!this.isEnabled(this.mobileSearchNextOccurenceElement)){this.mobileSearchNextOccurenceElement.className+=this.disableClass;}}};/**
     * @param {boolean} isTapHidden - To enable or disable.
     * @returns {void}
     */BlazorUiAdaptor.prototype.tapOnMobileDevice=function(isTapHidden){if(this.mobileToolbarContainerElement!=null){if(isTapHidden){this.mobileToolbarContainerElement.style.display='none';}else{this.mobileToolbarContainerElement.style.display='block';}}};/**
     * @param {HTMLElement} element - The HTMLElement.
     * @returns {boolean} - Returns trur or false.
     */BlazorUiAdaptor.prototype.isEnabled=function(element){if(element){return element.classList.contains(this.cssClass);}else{return true;}};return BlazorUiAdaptor;}();var __awaiter$2=undefined&&undefined.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value);}).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var __generator$2=undefined&&undefined.__generator||function(thisArg,body){var _={label:0,sent:function sent(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break;}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}if(t[2])_.ops.pop();_.trys.pop();continue;}op=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}};/**
 * The `PdfViewerBase` module is used to handle base methods of PDF viewer.
 *
 * @hidden
 */var PdfViewerBase=/** @class */function(){/**
     * Initialize the constructor of PDFViewerBase
     *
     * @param { PdfViewer } viewer - Specified PdfViewer class.
     */function PdfViewerBase(viewer){var _this=this;/**
         * @private
         */this.hyperlinkAndLinkAnnotation={};/**
         * @private
         */this.pageTextDetails={};/**
         * @private
         */this.pageImageDetails={};/**
         * @private
         */this.pageSize=[];/**
         * @private
         */this.pageCount=0;/**
         * @private
         */this.printScaleFactor=1;/**
         * @private
         */this.isReRenderRequired=true;/**
         * @private
         */this.currentPageNumber=0;/**
         * @private
         */this.activeElements=new ActiveElements();/**
         * @private
         */this.mouseDownEvent=null;/**
         * @private
         */this.isDocumentLoaded=false;/**
         * @private
         */this.renderedPagesList=[];/**
         * @private
         */this.pageGap=8;/**
         * @private
         */this.signatureAdded=false;/**
         * @private
         */this.isFreeTextSelected=false;this.pageLeft=5;this.sessionLimit=1000;this.pageStopValue=300;/**
         * @private
         */this.toolbarHeight=56;this.pageLimit=0;this.previousPage=0;this.isViewerMouseDown=false;this.isViewerMouseWheel=false;this.scrollPosition=0;this.sessionStorage=[];/**
         * @private
         */this.isLoadedFormFieldAdded=false;this.pointerCount=0;this.pointersForTouch=[];/**
         * @private
         */this.isPasswordAvailable=false;/**
         * @private
         */this.passwordData='';/**
         * @private
         */this.reRenderedCount=0;this.mouseX=0;this.mouseY=0;/**
         * @private
         */this.mouseLeft=0;/**
         * @private
         */this.mouseTop=0;this.touchClientX=0;this.touchClientY=0;this.previousTime=0;this.currentTime=0;this.isTouchScrolled=false;this.isLongTouchPropagated=false;// eslint-disable-next-line
this.longTouchTimer=null;this.isViewerContainerDoubleClick=false;// eslint-disable-next-line
this.dblClickTimer=null;/**
         * @private
         */this.pinchZoomStorage=[];/**
         * @private
         */this.isTextSelectionDisabled=false;/**
         * @private
         */this.isPanMode=false;this.dragX=0;this.dragY=0;this.isScrollbarMouseDown=false;this.scrollX=0;this.scrollY=0;this.ispageMoved=false;this.isThumb=false;this.isTapHidden=false;// eslint-disable-next-line
this.singleTapTimer=null;this.tapCount=0;this.inputTapCount=0;/**
         * @private
         */this.isInitialLoaded=false;this.annotationPageList=[];this.importPageList=[];/**
         * @private
         */this.isImportAction=false;this.isImportedAnnotation=false;/**
         * @private
         */this.isAnnotationCollectionRemoved=false;/**
         * @private
         */this.tool=null;// eslint-disable-next-line
this.action='Select';/**
         * @private
         */this.eventArgs=null;/**
         * @private
         */this.inAction=false;/**
         * @private
         */this.isMouseDown=false;/**
         * @private
         */this.isStampMouseDown=false;/**
         * @private
         */this.stampAdded=false;/**
         * @private
         */this.customStampCount=0;/**
         * @private
         */this.isDynamicStamp=false;/**
         * @private
         */this.isMixedSizeDocument=false;/**
         * @private
         */this.highestWidth=0;/**
         * @private
         */this.highestHeight=0;/**
         * @private
         */this.customStampCollection=[];/**
         * @private
         */this.isAlreadyAdded=false;/**
         * @private
         */this.isWebkitMobile=false;/**
         * @private
         */this.isFreeTextContextMenu=false;/**
         * @private
         */this.isSelection=false;/**
         * @private
         */this.isAddAnnotation=false;/**
         * @private
         */ // eslint-disable-next-line
this.annotationComments=null;/**
         * @private
         */this.isToolbarSignClicked=false;/**
         * @private
         */this.signatureCount=0;/**
         * @private
         */this.isSignatureAdded=false;/**
         * @private
         */this.isNewSignatureAdded=false;/**
         * @private
         */this.isInitialPageMode=false;/**
         * @private
         */ // eslint-disable-next-line
this.documentAnnotationCollections=null;/**
         * @private
         */this.annotationRenderredList=[];/**
         * @private
         */ // eslint-disable-next-line
this.annotationStorage={};/**
         * @private
         */ // eslint-disable-next-line
this.formFieldStorage={};/**
         * @private
         */this.isStorageExceed=false;/**
         * @private
         */this.isNewStamp=false;/**
         * @private
         */ // eslint-disable-next-line
this.downloadCollections={};/**
         * @private
         */this.isAnnotationAdded=false;/**
         * @private
         */ // eslint-disable-next-line
this.annotationEvent=null;/**
         * @private
        */this.isAnnotationDrawn=false;/**
         * @private
         */this.isAnnotationSelect=false;/**
         * @private
         */this.isAnnotationMouseDown=false;/**
         * @private
         */this.isAnnotationMouseMove=false;/**
         * @private
         */this.validateForm=false;/**
         * @private
         */this.isMinimumZoom=false;/**
         * @private
         */this.documentLoaded=false;this.tileRenderCount=0;this.tileRequestCount=0;/**
         * @private
         */this.isTileImageRendered=false;this.isDataExits=false;this.requestLists=[];this.tilerequestLists=[];/**
         * @private
         */this.isInkAdded=false;/**
         * @private
         */this.inkCount=0;/**
         * @private
         */this.isAddedSignClicked=false;/**
         * @private
         */this.imageCount=0;/**
         * @private
         */this.isMousedOver=false;/**
         * @private
         */this.isFormFieldSelect=false;/**
         * @private
         */this.isFormFieldMouseDown=false;/**
         * @private
         */this.isFormFieldMouseMove=false;/**
         * @private
         */this.isFormFieldMousedOver=false;/**
         * @private
         */this.isPassword=false;/**
         * @private
         */ // eslint-disable-next-line
this.isDigitalSignaturePresent=false;this.isDrawnCompletely=false;/**
         * @private
         */this.isAddComment=false;/**
         * @private
         */this.drawSignatureWithTool=false;/**
         * @private
         */ // eslint-disable-next-line
this.formFieldCollection=[];/**
         * @private
         */ // eslint-disable-next-line
this.nonFillableFields={};/**
         * @private
         */this.isInitialField=false;/**
         * @private
         */this.isTouchDesignerMode=false;/**
         * @private
         */this.isPrint=false;/**
         * @private
         */this.isPDFViewerJson=false;/**
         * @private
         */this.isJsonImported=false;/**
         * @private
         */this.isJsonExported=false;/**
         * @private
         */this.isPageRotated=false;this.downloadFileName='';/**
        * @private
        */ // eslint-disable-next-line
this.isFocusField=false;/**
         * @private
        */this.isAnnotationPresent=false;/**
         * @private
         */ // eslint-disable-next-line
this.isTouchPad=false;/**
         * @private
         */ // eslint-disable-next-line
this.isMacGestureActive=false;/**
         * @private
         */ // eslint-disable-next-line
this.macGestureStartScale=0;/**
         * @private
         */ // eslint-disable-next-line
this.zoomInterval=5;/**
         * @private
         */ // eslint-disable-next-line
this.focusField=[];/**
         * @private
         */ // eslint-disable-next-line
this.isWebAssembly=false;/**
         * @private
         */ /**
         * EJ2CORE-813 - This flag is represent current device is 'iPad' or 'iPhone' or'iPod' device.
         * @private
         */ // eslint-disable-next-line
this.isDeviceiOS=['iPad Simulator','iPhone Simulator','iPod Simulator','iPad','iPhone','iPod'].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document;/**
         * @private
         */ // eslint-disable-next-line
this.isMacSafari=navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1&&!this.isDeviceiOS;/**
         * @returns {void}
         */this.clearSessionStorage=function(){var documentId='';if(sf.base.Browser.isIE||sf.base.Browser.info.name==='edge'){documentId=decodeURI(window.sessionStorage.getItem('hashId'));}else{documentId=window.sessionStorage.getItem('hashId');}var documentLiveCount=window.sessionStorage.getItem('documentLiveCount');if(documentId!==null){// eslint-disable-next-line max-len
var jsonObject={hashId:documentId,documentLiveCount:documentLiveCount,action:'Unload',elementId:_this.pdfViewer.dataId};var actionName=window.sessionStorage.getItem('unload');var serviceUrl=window.sessionStorage.getItem('serviceURL');if(serviceUrl&&serviceUrl!=='undefined'&&serviceUrl!=='null'){// eslint-disable-next-line
var browserSupportsKeepalive=('keepalive'in new Request(''));if(browserSupportsKeepalive){// eslint-disable-next-line
var headerValue=_this.setUnloadRequestHeaders();var credentialsData=_this.pdfViewer.ajaxRequestSettings.withCredentials?'include':'omit';fetch(serviceUrl+'/'+actionName,{method:'POST',credentials:credentialsData,headers:headerValue,body:JSON.stringify(jsonObject)});}}else if(sf.base.isBlazor()){_this.clearCache(actionName,jsonObject,_this);}}window.sessionStorage.removeItem(_this.documentId+'_annotations_textMarkup');window.sessionStorage.removeItem(_this.documentId+'_annotations_shape');window.sessionStorage.removeItem(_this.documentId+'_annotations_shape_measure');window.sessionStorage.removeItem(_this.documentId+'_annotations_stamp');window.sessionStorage.removeItem(_this.documentId+'_annotations_sticky');window.sessionStorage.removeItem(_this.documentId+'_annotations_freetext');window.sessionStorage.removeItem(_this.documentId+'_formfields');window.sessionStorage.removeItem(_this.documentId+'_formDesigner');window.sessionStorage.removeItem(_this.documentId+'_annotations_sign');window.sessionStorage.removeItem(_this.documentId+'_pagedata');window.sessionStorage.removeItem('hashId');window.sessionStorage.removeItem('documentLiveCount');window.sessionStorage.removeItem('currentDocument');window.sessionStorage.removeItem('serviceURL');window.sessionStorage.removeItem('unload');};/**
         * @private
         * @param {MouseEvent} event - Mouse event.
         * @returns {void}
         */this.onWindowResize=function(event){var proxy=null;proxy=_this;if(_this.pdfViewer.enableRtl){// eslint-disable-next-line max-len
proxy.viewerContainer.style.right=(proxy.navigationPane.sideBarToolbar?proxy.navigationPane.getViewerContainerLeft():0)+'px';// eslint-disable-next-line max-len
proxy.viewerContainer.style.left=(proxy.navigationPane.commentPanelContainer?proxy.navigationPane.commentPanelContainer.offsetWidth:0)+'px';}else{// eslint-disable-next-line max-len
proxy.viewerContainer.style.left=(proxy.navigationPane.sideBarToolbar?proxy.navigationPane.getViewerContainerLeft():0)+'px';// eslint-disable-next-line max-len
proxy.viewerContainer.style.right=(proxy.navigationPane.commentPanelContainer?proxy.navigationPane.commentPanelContainer.offsetWidth:0)+'px';}// eslint-disable-next-line
var viewerElementWidth=proxy.pdfViewer.element.clientWidth>0?proxy.pdfViewer.element.clientWidth:proxy.pdfViewer.element.style.width;// eslint-disable-next-line
var viewerWidth=viewerElementWidth-(proxy.navigationPane.sideBarToolbar?proxy.navigationPane.getViewerContainerLeft():0)-(proxy.navigationPane.commentPanelContainer?proxy.navigationPane.getViewerContainerRight():0);proxy.viewerContainer.style.width=viewerWidth+'px';if(proxy.pdfViewer.toolbarModule){// eslint-disable-next-line
var toolbarContainer=proxy.pdfViewer.element.querySelector('.e-pv-toolbar');var toolbarHeight=0;if(toolbarContainer){toolbarHeight=toolbarContainer.getBoundingClientRect().height;}var annotationToolbarContainer=proxy.pdfViewer.element.querySelector('.e-pv-annotation-toolbar');if(annotationToolbarContainer){var annotationToolbarHeight=0;annotationToolbarHeight=annotationToolbarContainer.getBoundingClientRect().height;proxy.viewerContainer.style.height=proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height,toolbarHeight+annotationToolbarHeight);}else{proxy.viewerContainer.style.height=proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height,toolbarHeight);}}else{proxy.viewerContainer.style.height=proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height,0);}if(proxy.pdfViewer.bookmarkViewModule&&sf.base.Browser.isDevice&&!_this.pdfViewer.enableDesktopMode){var bookmarkContainer=proxy.getElement('_bookmarks_container');if(bookmarkContainer){bookmarkContainer.style.height=proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height,0);}}if(proxy.viewerContainer.style.height==='0px'){if(proxy.pdfViewer.height.toString()==='auto'){proxy.pdfViewer.height=500;proxy.viewerContainer.style.height=proxy.pdfViewer.height+'px';}else{proxy.viewerContainer.style.height=proxy.pdfViewer.element.style.height;}}if(proxy.viewerContainer.style.width==='0px'){if(proxy.pdfViewer.width.toString()==='auto'){proxy.pdfViewer.width=500;proxy.viewerContainer.style.width=proxy.pdfViewer.width+'px';}else{proxy.viewerContainer.style.width=proxy.pdfViewer.element.style.width;}}proxy.pageContainer.style.width=proxy.viewerContainer.clientWidth+'px';if(proxy.viewerContainer.clientWidth===0){proxy.pageContainer.style.width=proxy.pdfViewer.element.style.width;}if(!sf.base.isBlazor()){if(proxy.pdfViewer.toolbarModule){// eslint-disable-next-line max-len
proxy.pdfViewer.toolbarModule.onToolbarResize(proxy.navigationPane.sideBarToolbar?proxy.navigationPane.getViewerMainContainerWidth():proxy.pdfViewer.element.clientWidth);}}if(_this.pdfViewer.enableToolbar&&_this.pdfViewer.thumbnailViewModule){proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber-1);}if(proxy.pdfViewer.textSearchModule&&(!sf.base.Browser.isDevice||_this.pdfViewer.enableDesktopMode)){proxy.pdfViewer.textSearchModule.textSearchBoxOnResize();}if(viewerWidth!==0){if(!proxy.navigationPane.isBookmarkListOpen){proxy.updateZoomValue();}}if(sf.base.Browser.isDevice&&!_this.pdfViewer.enableDesktopMode){proxy.mobileScrollerContainer.style.left=viewerWidth-parseFloat(proxy.mobileScrollerContainer.style.width)+'px';proxy.mobilePageNoContainer.style.left=viewerWidth/2-parseFloat(proxy.mobilePageNoContainer.style.width)/2+'px';proxy.mobilePageNoContainer.style.top=proxy.pdfViewer.element.clientHeight/2+'px';proxy.updateMobileScrollerPosition();}else{proxy.navigationPane.setResizeIconTop();proxy.navigationPane.setCommentPanelResizeIconTop();if(event&&event.type==='resize'){proxy.signatureModule.updateCanvasSize();}}if(proxy.navigationPane.sideBarToolbar){proxy.navigationPane.sideBarToolbar.style.height=proxy.viewerContainer.style.height;}};/**
         * @param {MouseEvent} event - The MouseEvent.
         * @returns {void}
         */this.viewerContainerOnMousedown=function(event){_this.isFreeTextContextMenu=false;var isUpdate=false;_this.isSelection=true;_this.pdfViewer.blazorAction&=~PdfViewerBlazorAction.AnnotationAdding;if(event.button===0&&!_this.getPopupNoteVisibleStatus()&&!_this.isClickedOnScrollBar(event,false)){_this.isViewerMouseDown=true;// eslint-disable-next-line
var target=event.target;if(event.detail===1&&target.className!=='e-pdfviewer-formFields'&&target.className!=='free-text-input'){isUpdate=true;_this.focusViewerContainer(true);}_this.scrollPosition=_this.viewerContainer.scrollTop/_this.getZoomFactor();_this.mouseX=event.clientX;_this.mouseY=event.clientY;_this.mouseLeft=event.clientX;_this.mouseTop=event.clientY;// eslint-disable-next-line
var isIE=!!document.documentMode;if(_this.pdfViewer.textSelectionModule&&!_this.isClickedOnScrollBar(event,true)&&!_this.isTextSelectionDisabled){if(!isIE&&target.className!=='e-pdfviewer-formFields'&&target.className!=='e-pdfviewer-ListBox'&&target.className!=='e-pv-formfield-dropdown'&&target.className!=='e-pv-formfield-listbox'){event.preventDefault();}if(target.className!=='e-pv-droplet'){_this.pdfViewer.textSelectionModule.clearTextSelection();}}}if(_this.isClickedOnScrollBar(event,false)){_this.isViewerMouseDown=true;}if(_this.isPanMode){_this.dragX=event.pageX;_this.dragY=event.pageY;// eslint-disable-next-line max-len
if(_this.viewerContainer.contains(event.target)&&event.target!==_this.viewerContainer&&event.target!==_this.pageContainer&&_this.isPanMode){_this.viewerContainer.style.cursor='grabbing';}}if(_this.isShapeBasedAnnotationsEnabled()){_this.diagramMouseDown(event);}if(_this.pdfViewer.annotation&&_this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer){if(!isUpdate){_this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isEditableElement=false;_this.updateCommentPanel();isUpdate=true;}}if(sf.base.isBlazor()){_this.mouseDownHandler(event);}};/**
         * @param {MouseEvent} event - The MouseEvent.
         * @returns {void}
         */this.viewerContainerOnMouseup=function(event){if(_this.pdfViewer.lastAnnotation&&isNaN(_this.pdfViewer.lastAnnotation.wrapper.offsetX)&&isNaN(_this.pdfViewer.lastAnnotation.wrapper.offsetY)&&isNaN(_this.pdfViewer.lastAnnotation.wrapper.bounds.height)&&isNaN(_this.pdfViewer.lastAnnotation.wrapper.bounds.width)){_this.pdfViewer.remove(_this.pdfViewer.lastAnnotation);}_this.pdfViewer.lastAnnotation=null;if(!_this.getPopupNoteVisibleStatus()){if(_this.isViewerMouseDown){if(_this.scrollHoldTimer){clearTimeout(_this.scrollHoldTimer);_this.scrollHoldTimer=null;}if(_this.scrollPosition*_this.getZoomFactor()!==_this.viewerContainer.scrollTop){_this.pageViewScrollChanged(_this.currentPageNumber);}}var isSignatureFieldReadOnly=false;if(event.target){if(event.target.className=='e-pv-show-designer-name'&&event.target.id.split('_',1)!=''){isSignatureFieldReadOnly=document.getElementById(event.target.id.split('_',1)).disabled;}if(event.target.className=='foreign-object'&&event.target.children[0]){isSignatureFieldReadOnly=event.target.children[0].disabled;}}if(isSignatureFieldReadOnly&&_this.pdfViewer.annotation){_this.pdfViewer.annotation.clearSelection();}if(_this.isShapeBasedAnnotationsEnabled()&&!isSignatureFieldReadOnly){_this.diagramMouseUp(event);if(_this.pdfViewer.annotation){_this.pdfViewer.annotation.onAnnotationMouseUp();}}if(_this.pdfViewer.selectedItems.formFields.length>0){// eslint-disable-next-line max-len
if(!sf.base.isNullOrUndefined(_this.pdfViewer.toolbar)&&!sf.base.isNullOrUndefined(_this.pdfViewer.toolbar.formDesignerToolbarModule)&&!sf.base.Browser.isDevice){_this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(true);}}else{// eslint-disable-next-line max-len
if(!sf.base.isNullOrUndefined(_this.pdfViewer.toolbar)&&!sf.base.isNullOrUndefined(_this.pdfViewer.toolbar.formDesignerToolbarModule)&&!sf.base.Browser.isDevice){_this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(false);}}_this.isSelection=false;// eslint-disable-next-line max-len
var commentElement=document.getElementById(_this.pdfViewer.dataId+'_commantPanel');if(commentElement&&commentElement.style.display==='block'){if(_this.pdfViewer.selectedItems){if(_this.pdfViewer.selectedItems.annotations.length!==0){// eslint-disable-next-line
var commentsDiv=document.getElementById(_this.pdfViewer.selectedItems.annotations[0].annotName);if(commentsDiv){if(!commentsDiv.classList.contains('e-pv-comments-border')){if(commentsDiv.firstElementChild){commentsDiv.firstElementChild.click();}}}}}}if(event.button===0&&!_this.isClickedOnScrollBar(event,false)){// 0 is for left button.
var eventTarget=event.target;var offsetX=event.clientX;var offsetY=event.clientY;var zoomFactor=_this.getZoomFactor();var pageIndex=_this.currentPageNumber;if(eventTarget){// eslint-disable-next-line
var pageString=eventTarget.id.split('_text_')[1]||eventTarget.id.split('_textLayer_')[1]||eventTarget.id.split('_annotationCanvas_')[1]||eventTarget.id.split('_pageDiv_')[1];// eslint-disable-next-line
pageIndex=parseInt(pageString);}var pageDiv=_this.getElement('_pageDiv_'+pageIndex);if(pageDiv){var pageCurrentRect=pageDiv.getBoundingClientRect();offsetX=(event.clientX-pageCurrentRect.left)/zoomFactor;offsetY=(event.clientY-pageCurrentRect.top)/zoomFactor;}// eslint-disable-next-line max-len
if(eventTarget&&eventTarget.classList&&!eventTarget.classList.contains('e-pv-hyperlink')&&!eventTarget.classList.contains('e-pv-page-container')){// eslint-disable-next-line
_this.pdfViewer.firePageClick(offsetX,offsetY,pageIndex+1);if(_this.pdfViewer.formFieldsModule&&!_this.pdfViewer.formDesignerModule){_this.pdfViewer.formFieldsModule.removeFocus();}}if(_this.isTextMarkupAnnotationModule()&&!_this.isToolbarInkClicked){_this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(event);}if(_this.pdfViewer.formDesignerModule&&!_this.pdfViewer.annotationModule){_this.pdfViewer.formDesignerModule.updateCanvas(pageIndex);}// eslint-disable-next-line max-len
if(_this.viewerContainer.contains(event.target)&&event.target!==_this.viewerContainer&&event.target!==_this.pageContainer&&_this.isPanMode){_this.viewerContainer.style.cursor='move';_this.viewerContainer.style.cursor='-webkit-grab';_this.viewerContainer.style.cursor='-moz-grab';_this.viewerContainer.style.cursor='grab';}}_this.isViewerMouseDown=false;}};/**
         *  * @param {any} event - The Wheel event.
         * @returns {void}
         */this.detectTouchPad=function(event){// eslint-disable-next-line max-len
_this.isTouchPad=event.wheelDeltaY?event.wheelDeltaY===event.deltaY*-3?true:Math.abs(event.deltaY)<60:event.deltaMode===0;};/**
         * @param {any} event - The Wheel event.
         * @returns {void}
         */this.handleMacGestureStart=function(event){event.preventDefault();event.stopPropagation();_this.macGestureStartScale=_this.pdfViewer.magnification.zoomFactor;};/**
         * @param {any} event - The Wheel event.
         * @returns {void}
         */this.handleMacGestureChange=function(event){event.preventDefault();event.stopPropagation();var macX=event.clientX;var macY=event.clientY;var scale=Number((_this.macGestureStartScale*event.scale).toFixed(2));if(!_this.isMacGestureActive){_this.isMacGestureActive=true;_this.pdfViewer.magnification.initiateMouseZoom(macX,macY,scale*100);setTimeout(function(){_this.isMacGestureActive=false;},70);}};/**
         * @param {any} event - The Wheel event.
         * @returns {void}
         */this.handleMacGestureEnd=function(event){event.preventDefault();event.stopPropagation();};/**     * @param {WheelEvent} event - The MouseEvent.
         * @returns {void}
         */this.viewerContainerOnMouseWheel=function(event){_this.isViewerMouseWheel=true;if(_this.getRerenderCanvasCreated()){event.preventDefault();}if(event.ctrlKey){var zoomDifference=25;if(_this.pdfViewer.magnification.zoomFactor<1){zoomDifference=10;}if(_this.pdfViewer.magnification.zoomFactor>=2){zoomDifference=50;}if(_this.isTouchPad&&!_this.isMacSafari){zoomDifference=zoomDifference/_this.zoomInterval;}// eslint-disable-next-line
if(event.wheelDelta>0){_this.pdfViewer.magnification.initiateMouseZoom(event.x,event.y,_this.pdfViewer.magnification.zoomFactor*100+zoomDifference);}else{_this.pdfViewer.magnification.initiateMouseZoom(event.x,event.y,_this.pdfViewer.magnification.zoomFactor*100-zoomDifference);}_this.isTouchPad=false;}if(_this.pdfViewer.magnificationModule){_this.pdfViewer.magnificationModule.pageRerenderOnMouseWheel();if(event.ctrlKey){event.preventDefault();}_this.pdfViewer.magnificationModule.fitPageScrollMouseWheel(event);}if(_this.pdfViewer.textSelectionModule&&!_this.isTextSelectionDisabled){if(_this.isViewerMouseDown){if(!event.target.classList.contains('e-pv-text')){_this.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(_this.currentPageNumber-1);}}}};/**
         * @param {KeyboardEvent} event - The KeyboardEvent.
         * @returns {void}
         */this.onWindowKeyDown=function(event){var isMac=navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)?true:false;var isCommandKey=isMac?event.metaKey:false;if(_this.isFreeTextAnnotationModule()&&_this.pdfViewer.annotationModule&&(_this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus===true||_this.pdfViewer.annotationModule.inputElementModule.isInFocus===true)){return;}if(!event.ctrlKey||!isCommandKey){switch(event.keyCode){case 27:if(_this.pdfViewer.toolbar){_this.pdfViewer.toolbar.addInkAnnotation();_this.pdfViewer.toolbar.deSelectCommentAnnotation();_this.pdfViewer.toolbar.updateStampItems();if(_this.pdfViewer.toolbar.annotationToolbarModule){if(sf.base.isBlazor()){_this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItemsInBlazor();}else{_this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems();}}_this.pdfViewer.tool='';_this.focusViewerContainer();}break;case 9:if(event.target&&event.target.id&&_this.pdfViewer.formFieldCollections){{var nextField=void 0;var fieldIndex=void 0;var currentTarget_1=event.target;var id=void 0;currentTarget_1=event.target;id=currentTarget_1.id.split("_input")[0];if(!(currentTarget_1.className==='e-pdfviewer-formFields')){if(currentTarget_1.className==='e-pv-viewer-container e-enable-text-selection'){if(event.shiftKey&&event.key==="Tab"){fieldIndex=_this.pdfViewer.formFieldCollections.findIndex(function(field){return field.id===currentTarget_1.id;});nextField=fieldIndex>0?_this.pdfViewer.formFieldCollections[fieldIndex-1]:_this.pdfViewer.formFieldCollections[_this.pdfViewer.formFieldCollections.length-1];}else{fieldIndex=_this.pdfViewer.formFieldCollections.findIndex(function(field){return field.id===currentTarget_1.id;});nextField=fieldIndex+1<_this.pdfViewer.formFieldCollections.length?_this.pdfViewer.formFieldCollections[fieldIndex+1]:_this.pdfViewer.formFieldCollections[0];}_this.pdfViewer.focusFormField(nextField);event.preventDefault();}}}}if(event.target&&event.target.id&&_this.pdfViewer.formFields){for(var i=0;i<_this.pdfViewer.formFields.length;i++){var formField=_this.pdfViewer.formFields[parseInt(i.toString(),10)];if(event.target.id===formField.id){// eslint-disable-next-line
var field={value:formField.value,fontFamily:formField.fontFamily,fontSize:formField.fontSize,fontStyle:formField.fontStyle,// eslint-disable-next-line
color:formField.color,backgroundColor:formField.backgroundColor,alignment:formField.alignment,isReadonly:formField.isReadonly,visibility:formField.visibility,// eslint-disable-next-line
maxLength:formField.maxLength,isRequired:formField.isRequired,isPrint:formField.isPrint,rotation:formField.rotateAngle,tooltip:formField.tooltip,// eslint-disable-next-line
options:formField.options,isChecked:formField.isChecked,isSelected:formField.isSelected};_this.pdfViewer.fireFocusOutFormField(field,formField.pageIndex);}}}break;}}};/**
         * @param {KeyboardEvent} event - The KeyboardEvent.
         * @returns {void}
         */this.viewerContainerOnKeyDown=function(event){var isMac=navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)?true:false;var isCommandKey=isMac?event.metaKey:false;if(_this.isFreeTextAnnotationModule()&&_this.pdfViewer.annotationModule&&(_this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus===true||_this.pdfViewer.annotationModule.inputElementModule.isInFocus===true)){return;}if(event.ctrlKey||isCommandKey){// add keycodes if shift key is used.
if(event.shiftKey&&!isMac||isMac&&!event.shiftKey){switch(event.keyCode){case 38:// up arrow
case 33:// page up
event.preventDefault();if(_this.currentPageNumber!==1){_this.updateScrollTop(0);}break;case 40:// down arrow
case 34:// page down
event.preventDefault();if(_this.currentPageNumber!==_this.pageCount){_this.updateScrollTop(_this.pageCount-1);}break;default:break;}}switch(event.keyCode){case 79:// o key
if(_this.pdfViewer.toolbarModule&&_this.pdfViewer.enableToolbar){_this.pdfViewer.toolbarModule.openFileDialogBox(event);}break;case 67:// c key
if(_this.pdfViewer.textSelectionModule&&_this.pdfViewer.enableTextSelection&&!_this.isTextSelectionDisabled){event.preventDefault();_this.pdfViewer.textSelectionModule.copyText();}if(_this.pdfViewer.selectedItems.annotations.length||_this.pdfViewer.selectedItems.formFields.length){_this.pdfViewer.copy();_this.contextMenuModule.previousAction='Copy';}break;case 70:// f key
if(_this.pdfViewer.textSearchModule&&_this.pdfViewer.enableTextSearch){event.preventDefault();_this.pdfViewer.toolbarModule.textSearchButtonHandler();}break;case 80:// p key
if(_this.pdfViewer.printModule&&_this.pdfViewer.enablePrint){event.preventDefault();_this.pdfViewer.print.print();}break;case 90://z key
if(_this.pdfViewer.annotationModule){_this.pdfViewer.annotationModule.undo();}break;case 88://x key
if(_this.pdfViewer.selectedItems.annotations.length||_this.pdfViewer.selectedItems.formFields.length){_this.pdfViewer.cut();_this.contextMenuModule.previousAction='Cut';}break;case 89://y key
if(_this.pdfViewer.annotationModule){_this.pdfViewer.annotationModule.redo();}break;case 86://v key
// eslint-disable-next-line max-len
if(_this.pdfViewer.annotation&&_this.pdfViewer.annotation.isShapeCopied||_this.pdfViewer.formFields&&_this.pdfViewer.formDesigner.isShapeCopied){_this.pdfViewer.paste();_this.contextMenuModule.previousAction='Paste';}break;default:break;}}else{switch(event.keyCode){case 46:if(event.target.className!='e-pdfviewer-formFields')_this.DeleteKeyPressed(event);break;}}if(_this.pdfViewer.magnificationModule){_this.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(event);}};/**
         * @param {MouseEvent} event - The MouseEvent.
         * @returns {void}
         */this.viewerContainerOnMousemove=function(event){_this.mouseX=event.clientX;_this.mouseY=event.clientY;// eslint-disable-next-line
var isIE=!!document.documentMode;var target=event.target;if(_this.action==='Drag'){event.preventDefault();}// eslint-disable-next-line max-len
if(_this.isViewerMouseDown&&!(_this.action==='Perimeter'||_this.action==='Polygon'||_this.action==='Line'||_this.action==='DrawTool'||_this.action==='Distance')){// eslint-disable-next-line max-len
if(_this.pdfViewer.textSelectionModule&&_this.pdfViewer.enableTextSelection&&!_this.isTextSelectionDisabled&&!_this.getPopupNoteVisibleStatus()){// text selection won't perform if we start the selection from hyperlink content by commenting this line.
// this region block the toc/hyperlink navigation on sometimes.
// if ((event.target as HTMLElement).classList.contains('e-pv-hyperlink') && this.pdfViewer.linkAnnotationModule) {
// this.pdfViewer.linkAnnotationModule.modifyZindexForHyperlink((event.target as HTMLElement), true);
// }
if(!isIE){if(event.target.className!='e-pdfviewer-formFields')event.preventDefault();_this.mouseX=event.clientX;_this.mouseY=event.clientY;// eslint-disable-next-line
var annotationModule=_this.pdfViewer.annotationModule;// eslint-disable-next-line max-len
if(annotationModule&&annotationModule.textMarkupAnnotationModule&&annotationModule.textMarkupAnnotationModule.isDropletClicked&&annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)){annotationModule.textMarkupAnnotationModule.textSelect(event.target,_this.mouseX,_this.mouseY);}else{_this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(event.target,_this.mouseX,_this.mouseY);}}else{var selection=window.getSelection();if(!selection.type&&!selection.isCollapsed&&selection.anchorNode!==null){_this.pdfViewer.textSelectionModule.isTextSelection=true;}}}else if(_this.skipPreventDefault(target)){event.preventDefault();}}if(_this.isTextMarkupAnnotationModule()&&!_this.getPopupNoteVisibleStatus()){_this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(event);}if(_this.isPanMode){_this.panOnMouseMove(event);}if(_this.isShapeBasedAnnotationsEnabled()){var canvas=void 0;// eslint-disable-next-line max-len
if(event.target&&(event.target.id.indexOf('_text')>-1||event.target.parentElement.classList.contains('foreign-object')||event.target.id.indexOf('_annotationCanvas')>-1||event.target.classList.contains('e-pv-hyperlink')||event.target.classList.contains('e-pdfviewer-formFields')||event.target.classList.contains('e-pdfviewer-signatureformfields'))&&_this.pdfViewer.annotation){var pageIndex=_this.pdfViewer.annotation.getEventPageNumber(event);var diagram=document.getElementById(_this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);if(diagram){var canvas1=diagram.getBoundingClientRect();var left=canvas1.x?canvas1.x:canvas1.left;var top_1=canvas1.y?canvas1.y:canvas1.top;// eslint-disable-next-line max-len
if(_this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation&&_this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType==='Image'){canvas=new sf.drawings.Rect(left,top_1,canvas1.width-10,canvas1.height-10);}else{canvas=new sf.drawings.Rect(left+10,top_1+10,canvas1.width-10,canvas1.height-10);}}}else if(!_this.pdfViewer.annotationModule&&_this.pdfViewer.formDesignerModule){var pageIndex=_this.pdfViewer.formDesignerModule.getEventPageNumber(event);var diagram=document.getElementById(_this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);if(diagram){var canvas1=diagram.getBoundingClientRect();var left=canvas1.x?canvas1.x:canvas1.left;var top_2=canvas1.y?canvas1.y:canvas1.top;canvas=new sf.drawings.Rect(left+10,top_2+10,canvas1.width-10,canvas1.height-10);}}// eslint-disable-next-line max-len
var stampModule=_this.pdfViewer.annotationModule?_this.pdfViewer.annotationModule.stampAnnotationModule:null;if(canvas&&canvas.containsPoint({x:_this.mouseX,y:_this.mouseY})&&!(stampModule&&stampModule.isStampAnnotSelected)){_this.diagramMouseMove(event);_this.annotationEvent=event;}else{_this.diagramMouseLeave(event);if(_this.isAnnotationDrawn&&_this.action!=='Ink'){_this.diagramMouseUp(event);_this.isAnnotationAdded=true;}}if(_this.pdfViewer.enableStampAnnotations){if(stampModule&&stampModule.isStampAnnotSelected){_this.pdfViewer.tool='Stamp';_this.tool=new StampTool(_this.pdfViewer,_this);_this.isMouseDown=true;stampModule.isStampAnnotSelected=false;stampModule.isNewStampAnnot=true;}}if(_this.isSignatureAdded&&_this.pdfViewer.enableHandwrittenSignature){_this.pdfViewer.tool='Stamp';_this.tool=new StampTool(_this.pdfViewer,_this);_this.isMouseDown=true;_this.isSignatureAdded=false;_this.isNewSignatureAdded=true;}}};/**
         * @param {MouseEvent} event - The MouseEvent.
         * @returns {void}
         */this.panOnMouseMove=function(event){var isStampMode=false;// eslint-disable-next-line max-len
if(_this.action==='Ink'||_this.action==="Line"||_this.action==='Perimeter'||_this.action==='Polygon'||_this.action==='DrawTool'||_this.action==='Drag'||_this.action.indexOf('Rotate')!==-1||_this.action.indexOf('Resize')!==-1){isStampMode=true;}// eslint-disable-next-line max-len
if(_this.viewerContainer.contains(event.target)&&event.target!==_this.viewerContainer&&event.target!==_this.pageContainer&&!isStampMode){if(_this.isViewerMouseDown){var deltaX=_this.dragX-event.pageX;var deltaY=_this.dragY-event.pageY;_this.viewerContainer.scrollTop=_this.viewerContainer.scrollTop+deltaY;_this.viewerContainer.scrollLeft=_this.viewerContainer.scrollLeft+deltaX;_this.viewerContainer.style.cursor='move';_this.viewerContainer.style.cursor='-webkit-grabbing';_this.viewerContainer.style.cursor='-moz-grabbing';_this.viewerContainer.style.cursor='grabbing';_this.dragX=event.pageX;_this.dragY=event.pageY;}else{if(!_this.navigationPane.isNavigationPaneResized){_this.viewerContainer.style.cursor='move';_this.viewerContainer.style.cursor='-webkit-grab';_this.viewerContainer.style.cursor='-moz-grab';_this.viewerContainer.style.cursor='grab';}}}else{if(!_this.navigationPane.isNavigationPaneResized){_this.viewerContainer.style.cursor='auto';}}};/**
         * @param {MouseEvent} event - The MouseEvent.
         * @returns {void}
         */this.viewerContainerOnMouseLeave=function(event){if(_this.isViewerMouseDown){if(_this.pdfViewer.textSelectionModule&&!_this.isTextSelectionDisabled){_this.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(event);}}if(_this.pdfViewer.textSelectionModule&&_this.pdfViewer.textSelectionModule.isTextSelection){event.preventDefault();}};/**
         * @param {MouseEvent} event - The MouseEvent.
         * @returns {void}
         */this.viewerContainerOnMouseEnter=function(event){if(_this.pdfViewer.textSelectionModule&&!_this.isTextSelectionDisabled){_this.pdfViewer.textSelectionModule.clear();}};/**
         * @param {MouseEvent} event - The MouseEvent.
         * @returns {void}
         */this.viewerContainerOnMouseOver=function(event){// eslint-disable-next-line
var isIE=!!document.documentMode;if(_this.isViewerMouseDown){if(!isIE){event.preventDefault();}}};/**
         * @param {MouseEvent} event - The MouseEvent.
         * @returns {void}
         */this.viewerContainerOnClick=function(event){if(event.type==='dblclick'){if(_this.pdfViewer.textSelectionModule&&!_this.isTextSelectionDisabled&&!_this.getCurrentTextMarkupAnnotation()){if(event.target.classList.contains('e-pv-text')){_this.isViewerContainerDoubleClick=true;if(!_this.getTextMarkupAnnotationMode()){var pageNumber=parseFloat(event.target.id.split('_')[2]);_this.pdfViewer.fireTextSelectionStart(pageNumber+1);}_this.pdfViewer.textSelectionModule.selectAWord(event.target,event.clientX,event.clientY,false);if(_this.pdfViewer.contextMenuSettings.contextMenuAction==='MouseUp'){_this.pdfViewer.textSelectionModule.calculateContextMenuPosition(event.clientY,event.clientX);}if(!_this.getTextMarkupAnnotationMode()){_this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true,false);_this.dblClickTimer=setTimeout(function(){_this.applySelection();},100);_this.pdfViewer.textSelectionModule.fireTextSelectEnd();}else if(_this.isTextMarkupAnnotationModule()&&_this.getTextMarkupAnnotationMode()){// eslint-disable-next-line max-len
_this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);}}}else if(_this.getCurrentTextMarkupAnnotation()){// this.pdfViewer.annotationModule.showAnnotationPopup(event);
}if(_this.action&&(_this.action==='Perimeter'||_this.action==='Polygon')&&_this.tool){_this.eventArgs.position=_this.currentPosition;_this.getMouseEventArgs(_this.currentPosition,_this.eventArgs,event,_this.eventArgs.source);var ctrlKey=_this.isMetaKey(event);var info={ctrlKey:event.ctrlKey,shiftKey:event.shiftKey};_this.eventArgs.info=info;_this.eventArgs.clickCount=event.detail;_this.tool.mouseUp(_this.eventArgs,true);}if(_this.pdfViewer.selectedItems||_this.pdfViewer.annotation&&_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){if(_this.pdfViewer.selectedItems.annotations.length!==0){// eslint-disable-next-line
var currentAnnotation=_this.pdfViewer.selectedItems.annotations[0];// eslint-disable-next-line max-len
if(_this.pdfViewer.annotationModule&&!currentAnnotation.formFieldAnnotationType){// eslint-disable-next-line max-len
_this.pdfViewer.annotationModule.annotationSelect(currentAnnotation.annotName,currentAnnotation.pageIndex,currentAnnotation,null,true);if(_this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus===false){if(_this.isFreeTextAnnotation(_this.pdfViewer.selectedItems.annotations)===true){var elmtPosition={};elmtPosition.x=_this.pdfViewer.selectedItems.annotations[0].bounds.x;elmtPosition.y=_this.pdfViewer.selectedItems.annotations[0].bounds.y;// eslint-disable-next-line max-len
_this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(elmtPosition,_this.pdfViewer.selectedItems.annotations[0]);}else if(_this.pdfViewer.selectedItems.annotations[0].enableShapeLabel===true){var elmtPosition={};elmtPosition.x=_this.pdfViewer.selectedItems.annotations[0].bounds.x;elmtPosition.y=_this.pdfViewer.selectedItems.annotations[0].bounds.y;// eslint-disable-next-line max-len
_this.pdfViewer.annotation.inputElementModule.editLabel(elmtPosition,_this.pdfViewer.selectedItems.annotations[0]);}else{// eslint-disable-next-line
var commentsDiv=document.getElementById(_this.pdfViewer.selectedItems.annotations[0].annotName);if(commentsDiv){if(!commentsDiv.classList.contains('e-pv-comments-border')){_this.pdfViewer.annotationModule.showCommentsPanelInBlazor();}}}}}}else{// eslint-disable-next-line max-len
if(_this.pdfViewer.annotation&&_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){// eslint-disable-next-line
var annotation=_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;// eslint-disable-next-line max-len
_this.pdfViewer.annotationModule.annotationSelect(annotation.annotName,_this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage,annotation,null,true);// eslint-disable-next-line
var comments=document.getElementById(annotation.annotName);if(comments&&comments.firstElementChild){comments.firstElementChild.click();}}}}if(_this.pdfViewer.designerMode&&_this.pdfViewer.selectedItems.formFields.length>0){var eventArgs={name:"formFieldDoubleClick",field:_this.pdfViewer.selectedItems.formFields[0],cancel:false};_this.pdfViewer.fireFormFieldDoubleClickEvent(eventArgs);if(!eventArgs.cancel){_this.pdfViewer.formDesigner.createPropertiesWindow();}}}else{if(event.detail===3){if(_this.isViewerContainerDoubleClick){clearTimeout(_this.dblClickTimer);_this.isViewerContainerDoubleClick=false;}if(_this.pdfViewer.textSelectionModule&&!_this.isTextSelectionDisabled&&!_this.getTextMarkupAnnotationMode()){_this.pdfViewer.textSelectionModule.selectEntireLine(event);_this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true,false);_this.pdfViewer.textSelectionModule.fireTextSelectEnd();_this.applySelection();}}}};/**
         * @param {DragEvent} event - The DragEvent.
         * @returns {void}
         */this.viewerContainerOnDragStart=function(event){// eslint-disable-next-line
var isIE=!!document.documentMode;if(!isIE){event.preventDefault();}};// eslint-disable-next-line
this.viewerContainerOnContextMenuClick=function(event){_this.isViewerMouseDown=false;};// eslint-disable-next-line
this.onWindowMouseUp=function(event){_this.isFreeTextContextMenu=false;_this.isNewStamp=false;_this.signatureAdded=false;// eslint-disable-next-line
var annotationModule=_this.pdfViewer.annotationModule;// eslint-disable-next-line max-len
if(annotationModule&&annotationModule.textMarkupAnnotationModule&&annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)){// eslint-disable-next-line
var modules=annotationModule.textMarkupAnnotationModule;modules.isLeftDropletClicked=false;modules.isDropletClicked=false;modules.isRightDropletClicked=false;if(!modules.currentTextMarkupAnnotation&&window.getSelection().anchorNode===null){modules.showHideDropletDiv(true);}else if(!modules.currentTextMarkupAnnotation&&modules.currentTextMarkupAddMode===''){modules.isTextMarkupAnnotationMode=false;}}if(!_this.getPopupNoteVisibleStatus()){if(event.button===0){// eslint-disable-next-line max-len
if(_this.isNewFreeTextAnnotation()){if(_this.pdfViewer.textSelectionModule&&!_this.isTextSelectionDisabled&&!_this.getTextMarkupAnnotationMode()){// eslint-disable-next-line max-len
if(event.detail===1&&!_this.viewerContainer.contains(event.target)&&!_this.contextMenuModule.contextMenuElement.contains(event.target)){if(window.getSelection().anchorNode!==null){_this.pdfViewer.textSelectionModule.textSelectionOnMouseup(event);}}// eslint-disable-next-line
var target=event.target;if(_this.viewerContainer.contains(event.target)&&target.className!=='e-pdfviewer-formFields'){if(!_this.isClickedOnScrollBar(event,true)&&!_this.isScrollbarMouseDown){_this.pdfViewer.textSelectionModule.textSelectionOnMouseup(event);}else{if(window.getSelection().anchorNode!==null){_this.pdfViewer.textSelectionModule.applySpanForSelection();}}}}else if(_this.getTextMarkupAnnotationMode()){// eslint-disable-next-line
var viewerElement=_this.pdfViewer.element;// eslint-disable-next-line
var targetElement=event.target;if(viewerElement&&targetElement&&annotationModule){if(viewerElement.id.split('_')[0]===targetElement.id.split('_')[0]){// eslint-disable-next-line max-len
_this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);}}}}}else if(event.button===2){if(_this.viewerContainer.contains(event.target)&&_this.skipPreventDefault(event.target)){if(_this.checkIsNormalText()){window.getSelection().removeAllRanges();}}}if(annotationModule){var collectionLength=annotationModule.actionCollection.length-1;if(annotationModule.actionCollection[collectionLength-1]){if(annotationModule.actionCollection[collectionLength-1].annotation){if(annotationModule.actionCollection[collectionLength-1].annotation.shapeAnnotationType==="FreeText"&&_this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode){_this.pdfViewer.drawingObject=new PdfAnnotationBase();}}}}if(_this.isViewerMouseDown){_this.isViewerMouseDown=false;if(_this.pdfViewer.textSelectionModule&&!_this.isTextSelectionDisabled){_this.pdfViewer.textSelectionModule.clear();_this.pdfViewer.textSelectionModule.selectionStartPage=null;}event.preventDefault();event.stopPropagation();return false;}else{return true;}}};/**
         * @param {TouchEvent} event - The DragEvent.
         * @returns {void}
         */this.onWindowTouchEnd=function(event){_this.signatureAdded=false;// eslint-disable-next-line max-len
if(!_this.pdfViewer.element.contains(event.target)&&!_this.contextMenuModule.contextMenuElement.contains(event.target)){if(_this.pdfViewer.textSelectionModule&&!_this.isTextSelectionDisabled){_this.pdfViewer.textSelectionModule.clearTextSelection();}}};/**
         * @param {TouchEvent} event - The TouchEvent.
         * @returns {void}
         */this.viewerContainerOnTouchStart=function(event){var touchPoints=event.touches;if(_this.pdfViewer.magnificationModule){_this.pdfViewer.magnificationModule.setTouchPoints(touchPoints[0].clientX,touchPoints[0].clientY);}var target=event.target;// eslint-disable-next-line max-len
if(touchPoints.length===1&&!target.classList.contains('e-pv-hyperlink')&&_this.skipPreventDefault(target)){_this.preventTouchEvent(event);}if(event.touches.length===1&&_this.isTextMarkupAnnotationModule()&&!_this.getPopupNoteVisibleStatus()){if(!_this.isToolbarInkClicked){_this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);}}_this.touchClientX=touchPoints[0].clientX;_this.touchClientY=touchPoints[0].clientY;_this.scrollY=touchPoints[0].clientY;_this.previousTime=new Date().getTime();// eslint-disable-next-line max-len
if(touchPoints.length===1&&!(event.target.classList.contains('e-pv-touch-select-drop')||event.target.classList.contains('e-pv-touch-ellipse'))){if(sf.base.Browser.isDevice&&!_this.pdfViewer.enableDesktopMode&&_this.pageCount>0&&!_this.isThumb&&!event.target.classList.contains('e-pv-hyperlink')){_this.handleTaps(touchPoints,event);}if(!sf.base.isBlazor()||!sf.base.Browser.isDevice||_this.pdfViewer.enableDesktopMode){_this.handleTextBoxTaps(touchPoints);}var designerMode=_this.isDesignerMode(target);if(designerMode){_this.contextMenuModule.close();// event.preventDefault();
if(!_this.isLongTouchPropagated){_this.longTouchTimer=setTimeout(function(){_this.isTouchDesignerMode=true;_this.contextMenuModule.open(_this.touchClientY,_this.touchClientX,_this.viewerContainer);},1000);}_this.isLongTouchPropagated=true;}else if(_this.pdfViewer.textSelectionModule&&!_this.isTextSelectionDisabled){_this.pdfViewer.textSelectionModule.clearTextSelection();_this.contextMenuModule.close();// event.preventDefault();
if(!_this.isLongTouchPropagated){_this.longTouchTimer=setTimeout(function(){_this.viewerContainerOnLongTouch(event);},1000);}_this.isLongTouchPropagated=true;}}// eslint-disable-next-line
var toolbarModule=_this.pdfViewer.toolbarModule?_this.pdfViewer.toolbarModule.annotationToolbarModule:'null';if(target.classList.contains('e-pv-text')&&(!toolbarModule||!toolbarModule.textMarkupToolbarElement||toolbarModule.textMarkupToolbarElement.children.length===0)){target.classList.add('e-pv-text-selection-none');}_this.diagramMouseDown(event);// eslint-disable-next-line max-len
if(_this.action==='Perimeter'||_this.action==='Polygon'||_this.action==='DrawTool'||_this.action==='Drag'||_this.action.indexOf('Rotate')!==-1||_this.action.indexOf('Resize')!==-1){event.preventDefault();}};/**
         * @param {TouchEvent} event - The TouchEvent.
         * @returns {void}
         */this.viewerContainerOnLongTouch=function(event){_this.touchClientX=event.touches[0].clientX;_this.touchClientY=event.touches[0].clientY;event.preventDefault();if(_this.pdfViewer.textSelectionModule){var target=event.target;if(target.classList.contains('e-pv-text-selection-none')){target.classList.remove('e-pv-text-selection-none');}_this.pdfViewer.textSelectionModule.initiateTouchSelection(event,_this.touchClientX,_this.touchClientY);if(sf.base.Browser.isDevice&&!_this.pdfViewer.enableDesktopMode){clearTimeout(_this.singleTapTimer);_this.tapCount=0;}}};/**
         * @param {PointerEvent} event - The PointerEvent.
         * @returns {void}
         */this.viewerContainerOnPointerDown=function(event){if(event.pointerType==='touch'){_this.pointerCount++;if(_this.pointerCount<=2){event.preventDefault();_this.pointersForTouch.push(event);if(_this.pointerCount===2){_this.pointerCount=0;}if(_this.pdfViewer.magnificationModule){_this.pdfViewer.magnificationModule.setTouchPoints(event.clientX,event.clientY);}}}};/**
         * @param {TouchEvent} event - The TouchEvent.
         * @returns {void}
         */this.viewerContainerOnTouchMove=function(event){if(sf.base.Browser.isDevice&&!_this.pdfViewer.enableDesktopMode){clearTimeout(_this.singleTapTimer);_this.singleTapTimer=null;_this.tapCount=0;}_this.preventTouchEvent(event);if(_this.isToolbarInkClicked){event.preventDefault();}var touchPoints=event.touches;if(_this.pdfViewer.magnificationModule){_this.isTouchScrolled=true;if(touchPoints.length>1&&_this.pageCount>0){if(sf.base.Browser.isDevice&&!_this.pdfViewer.enableDesktopMode){_this.isTouchScrolled=false;}if(_this.pdfViewer.enablePinchZoom){// eslint-disable-next-line max-len
_this.pdfViewer.magnificationModule.initiatePinchMove(touchPoints[0].clientX,touchPoints[0].clientY,touchPoints[1].clientX,touchPoints[1].clientY);}}else if(touchPoints.length===1&&_this.getPagesPinchZoomed()){if(sf.base.Browser.isDevice&&!_this.pdfViewer.enableDesktopMode){_this.isTouchScrolled=false;}_this.pdfViewer.magnificationModule.pinchMoveScroll();}}_this.mouseX=touchPoints[0].clientX;_this.mouseY=touchPoints[0].clientY;var canvas;// eslint-disable-next-line max-len
if(event.target&&(event.target.id.indexOf('_text')>-1||event.target.id.indexOf('_annotationCanvas')>-1||event.target.classList.contains('e-pv-hyperlink'))&&_this.pdfViewer.annotation){var pageIndex=_this.pdfViewer.annotation.getEventPageNumber(event);var diagram=document.getElementById(_this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);if(diagram){var canvas1=diagram.getBoundingClientRect();var left=canvas1.x?canvas1.x:canvas1.left;var top_3=canvas1.y?canvas1.y:canvas1.top;canvas=new sf.drawings.Rect(left+10,top_3+10,canvas1.width-10,canvas1.height-10);}}if(canvas&&canvas.containsPoint({x:_this.mouseX,y:_this.mouseY})){_this.diagramMouseMove(event);_this.annotationEvent=event;}else{_this.diagramMouseLeave(event);if(_this.isAnnotationDrawn){_this.diagramMouseUp(event);_this.isAnnotationAdded=true;}}touchPoints=null;};/**
         * @param {PointerEvent} event - The TouchEvent.
         * @returns {void}
         */this.viewerContainerOnPointerMove=function(event){if(event.pointerType==='touch'&&_this.pageCount>0){event.preventDefault();if(_this.pointersForTouch.length===2){for(var i=0;i<_this.pointersForTouch.length;i++){if(event.pointerId===_this.pointersForTouch[i].pointerId){_this.pointersForTouch[i]=event;break;}}if(_this.pdfViewer.magnificationModule&&_this.pdfViewer.enablePinchZoom){// eslint-disable-next-line max-len
_this.pdfViewer.magnificationModule.initiatePinchMove(_this.pointersForTouch[0].clientX,_this.pointersForTouch[0].clientY,_this.pointersForTouch[1].clientX,_this.pointersForTouch[1].clientY);}}}};/**
         * @param {TouchEvent} event - The TouchEvent.
         * @returns {void}
         */this.viewerContainerOnTouchEnd=function(event){if(_this.pdfViewer.magnificationModule){_this.pdfViewer.magnificationModule.pinchMoveEnd();}if(event.cancelable&&!event.target.classList.contains('e-pv-touch-ellipse')&&_this.pdfViewer.textSelectionModule&&_this.pdfViewer.textSelectionModule.isTextSelection){event.preventDefault();}_this.isLongTouchPropagated=false;clearInterval(_this.longTouchTimer);_this.longTouchTimer=null;if(sf.base.Browser.isDevice&&!_this.pdfViewer.enableDesktopMode&&_this.isTouchScrolled){_this.currentTime=new Date().getTime();var duration=_this.currentTime-_this.previousTime;// eslint-disable-next-line
var difference=_this.scrollY-event.changedTouches[0].pageY;// eslint-disable-next-line
var speed=difference/duration;if(Math.abs(speed)>1.5){// eslint-disable-next-line
var scrollTop=difference+duration*speed;_this.viewerContainer.scrollTop+=scrollTop;_this.updateMobileScrollerPosition();}}_this.diagramMouseUp(event);_this.renderStampAnnotation(event);};/**
         * @param {PointerEvent} event - The PointerEvent.
         * @returns {void}
         */this.viewerContainerOnPointerEnd=function(event){if(event.pointerType==='touch'){event.preventDefault();if(_this.pdfViewer.magnificationModule){_this.pdfViewer.magnificationModule.pinchMoveEnd();}_this.pointersForTouch=[];_this.pointerCount=0;}};// eslint-disable-next-line
this.viewerContainerOnScroll=function(event){var proxy=null;proxy=_this;var allowServerDataBind=proxy.pdfViewer.allowServerDataBinding;proxy.pdfViewer.enableServerDataBinding(false);var scrollposX=0;var scrollposY=0;if(event.touches&&sf.base.Browser.isDevice&&!_this.pdfViewer.enableDesktopMode){// eslint-disable-next-line
var ratio=(_this.viewerContainer.scrollHeight-_this.viewerContainer.clientHeight)/(_this.viewerContainer.clientHeight-_this.toolbarHeight);if(_this.isThumb){_this.ispageMoved=true;event.preventDefault();_this.mobilePageNoContainer.style.display='block';scrollposX=event.touches[0].pageX-_this.scrollX;scrollposY=event.touches[0].pageY-_this.viewerContainer.offsetTop;_this.viewerContainer.scrollTop=scrollposY*ratio;// eslint-disable-next-line
var containerValue=event.touches[0].pageY;// eslint-disable-next-line
var toolbarHeight=_this.pdfViewer.toolbarModule?0:50;if(_this.viewerContainer.scrollTop!==0&&containerValue<=_this.viewerContainer.clientHeight-toolbarHeight){_this.mobileScrollerContainer.style.top=containerValue+'px';}}else if(event.touches[0].target.className!=='e-pv-touch-ellipse'){if(!(_this.isWebkitMobile&&sf.base.Browser.isDevice&&!_this.pdfViewer.enableDesktopMode)){_this.mobilePageNoContainer.style.display='none';scrollposY=_this.touchClientY-event.touches[0].pageY;scrollposX=_this.touchClientX-event.touches[0].pageX;_this.viewerContainer.scrollTop=_this.viewerContainer.scrollTop+scrollposY;_this.viewerContainer.scrollLeft=_this.viewerContainer.scrollLeft+scrollposX;}// eslint-disable-next-line
_this.updateMobileScrollerPosition();_this.touchClientY=event.touches[0].pageY;_this.touchClientX=event.touches[0].pageX;}}if(_this.scrollHoldTimer){clearTimeout(_this.scrollHoldTimer);}var pageIndex=_this.currentPageNumber;_this.scrollHoldTimer=null;_this.contextMenuModule.close();var verticalScrollValue=_this.viewerContainer.scrollTop;// eslint-disable-next-line max-len
for(var i=0;i<_this.pageCount;i++){if(_this.pageSize[i]!=null){var pageHeight=_this.getPageHeight(i);if(pageHeight<150){_this.pageStopValue=75;}else if(pageHeight>=150&&pageHeight<300){_this.pageStopValue=125;}else if(pageHeight>=300&&pageHeight<500){_this.pageStopValue=200;}else{_this.pageStopValue=300;}// eslint-disable-next-line max-len
if(verticalScrollValue+_this.pageStopValue<=_this.getPageTop(i)+pageHeight){_this.currentPageNumber=i+1;_this.pdfViewer.currentPageNumber=i+1;_this.pdfViewer.updatePdfViewerOptions("CurrentPageNumber",_this.pdfViewer.currentPageNumber);break;}}}// eslint-disable-next-line max-len
if(_this.pdfViewer.magnificationModule&&_this.pdfViewer.magnificationModule.fitType==='fitToPage'&&_this.currentPageNumber>0){if(_this.pageSize[_this.currentPageNumber-1]){_this.viewerContainer.scrollTop=_this.pageSize[_this.currentPageNumber-1].top*_this.getZoomFactor();}}_this.renderElementsVirtualScroll(_this.currentPageNumber);// eslint-disable-next-line max-len
if(!_this.isViewerMouseDown&&!_this.getPinchZoomed()&&!_this.getPinchScrolled()&&!_this.getPagesPinchZoomed()||_this.isViewerMouseWheel){_this.pageViewScrollChanged(_this.currentPageNumber);_this.isViewerMouseWheel=false;}else{_this.showPageLoadingIndicator(_this.currentPageNumber-1,false);}if(_this.pdfViewer.toolbarModule){if(!sf.base.isBlazor()){_this.pdfViewer.toolbarModule.updateCurrentPage(_this.currentPageNumber);}_this.viewerContainer.setAttribute('aria-labelledby',_this.pdfViewer.dataId+'_pageDiv_'+(_this.currentPageNumber-1));if(!sf.base.isBlazor()){if(!sf.base.Browser.isDevice||_this.pdfViewer.enableDesktopMode){_this.pdfViewer.toolbarModule.updateNavigationButtons();}}}if(sf.base.Browser.isDevice&&!_this.pdfViewer.enableDesktopMode){_this.mobileSpanContainer.innerHTML=_this.currentPageNumber.toString();_this.mobilecurrentPageContainer.innerHTML=_this.currentPageNumber.toString();}if(pageIndex!==_this.currentPageNumber){if(proxy.pdfViewer.thumbnailViewModule&&(!sf.base.Browser.isDevice||_this.pdfViewer.enableDesktopMode)){proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber-1);proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked=false;}_this.pdfViewer.firePageChange(pageIndex);}if(_this.pdfViewer.magnificationModule){_this.pdfViewer.magnificationModule.updatePagesForFitPage(_this.currentPageNumber-1);}var currentPage=_this.getElement('_pageDiv_'+(_this.currentPageNumber-1));if(currentPage){currentPage.style.visibility='visible';}if(_this.isViewerMouseDown){if(_this.getRerenderCanvasCreated()&&!_this.isPanMode){_this.pdfViewer.magnificationModule.clearIntervalTimer();}// eslint-disable-next-line
var data=_this.getLinkInformation(_this.currentPageNumber);if(data){_this.isDataExits=true;_this.initiatePageViewScrollChanged();_this.isDataExits=false;}else{// eslint-disable-next-line max-len
var timer=_this.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll?_this.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll:100;_this.scrollHoldTimer=setTimeout(function(){_this.initiatePageViewScrollChanged();},timer);}}if(_this.pdfViewer.annotation&&_this.navigationPane.commentPanelContainer){_this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelScrollTop(_this.currentPageNumber);}// eslint-disable-next-line max-len
if(sf.base.Browser.isDevice&&!_this.pdfViewer.enableDesktopMode&&event.touches&&event.touches[0].target.className!=='e-pv-touch-ellipse'){setTimeout(function(){_this.updateMobileScrollerPosition();},500);}proxy.pdfViewer.enableServerDataBinding(allowServerDataBind,true);};this.pdfViewer=viewer;this.navigationPane=new NavigationPane(this.pdfViewer,this);this.textLayer=new TextLayer(this.pdfViewer,this);this.signatureModule=new Signature(this.pdfViewer,this);this.isWebkitMobile=/Chrome/.test(navigator.userAgent)||/Google Inc/.test(navigator.vendor)||navigator.userAgent.indexOf('Safari')!==-1;}/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.initializeComponent=function(){var element=document.getElementById(this.pdfViewer.dataId);if(element){this.blazorUIAdaptor=sf.base.isBlazor()?new BlazorUiAdaptor(this.pdfViewer,this):null;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewer.element.classList.add('e-pv-mobile-view');}var controlWidth='100%';var toolbarDiv=void 0;this.viewerMainContainer=sf.base.isBlazor()?element.querySelector('.e-pv-viewer-main-container'):sf.base.createElement('div',{id:this.pdfViewer.dataId+'_viewerMainContainer',className:'e-pv-viewer-main-container'});this.viewerContainer=sf.base.isBlazor()?element.querySelector('.e-pv-viewer-container'):sf.base.createElement('div',{id:this.pdfViewer.dataId+'_viewerContainer',className:'e-pv-viewer-container',attrs:{'aria-label':'pdfviewer scroll view'}});if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.createMobilePageNumberContainer();}// eslint-disable-next-line
this.viewerContainer.tabIndex=0;if(this.pdfViewer.enableRtl){this.viewerContainer.style.direction='rtl';}element.style.touchAction='pan-x pan-y';this.setMaximumHeight(element);this.mainContainer=sf.base.isBlazor()?element.querySelector('.e-pv-main-container'):sf.base.createElement('div',{id:this.pdfViewer.dataId+'_mainContainer',className:'e-pv-main-container'});this.mainContainer.appendChild(this.viewerMainContainer);element.appendChild(this.mainContainer);this.applyViewerHeight(this.mainContainer);if(this.pdfViewer.toolbarModule){this.navigationPane.initializeNavigationPane();toolbarDiv=this.pdfViewer.toolbarModule.intializeToolbar(controlWidth);}else{if(sf.base.isBlazor()){this.navigationPane.initializeNavigationPane();toolbarDiv=this.pdfViewer.element.querySelector('.e-pv-toolbar');if(!this.pdfViewer.enableToolbar){this.toolbarHeight=0;toolbarDiv.style.display='none';}if(!this.pdfViewer.enableNavigationToolbar&&(sf.base.Browser.isDevice&&this.pdfViewer.enableDesktopMode||!sf.base.Browser.isDevice)){this.navigationPane.sideBarToolbar.style.display='none';this.navigationPane.sideBarToolbarSplitter.style.display='none';if(this.navigationPane.isBookmarkOpen||this.navigationPane.isThumbnailOpen){this.navigationPane.updateViewerContainerOnClose();}}}}if(toolbarDiv){var toolbarHeight=toolbarDiv.clientHeight;this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,toolbarHeight);}else{this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,0);}var viewerWidth=this.pdfViewer.element.clientWidth;if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){viewerWidth=viewerWidth-(this.navigationPane.sideBarToolbar?this.navigationPane.getViewerContainerLeft():0)-(this.navigationPane.commentPanelContainer?this.navigationPane.getViewerContainerRight():0);}this.viewerContainer.style.width=viewerWidth+'px';this.viewerMainContainer.appendChild(this.viewerContainer);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.mobileScrollerContainer.style.left=viewerWidth-parseFloat(this.mobileScrollerContainer.style.width)+'px';this.mobilePageNoContainer.style.left=viewerWidth/2-parseFloat(this.mobilePageNoContainer.style.width)/2+'px';this.mobilePageNoContainer.style.top=this.pdfViewer.element.clientHeight/2+'px';this.mobilePageNoContainer.style.display='none';this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer);this.mobilePageNoContainer.appendChild(this.mobilenumberContainer);this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer);this.viewerContainer.appendChild(this.mobilePageNoContainer);this.viewerMainContainer.appendChild(this.mobileScrollerContainer);this.mobileScrollerContainer.appendChild(this.mobileSpanContainer);}this.pageContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_pageViewContainer',className:'e-pv-page-container',attrs:{'tabindex':'0','aria-label':'pdfviewer Page View'}});if(this.pdfViewer.enableRtl){this.pageContainer.style.direction='ltr';}this.viewerContainer.appendChild(this.pageContainer);this.pageContainer.style.width=this.viewerContainer.clientWidth+'px';if(toolbarDiv&&this.pdfViewer.thumbnailViewModule&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)){this.pdfViewer.thumbnailViewModule.createThumbnailContainer();}this.createPrintPopup();if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&!sf.base.isBlazor()){this.createGoToPagePopup();}var waitingPopup=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_loadingIndicator'});this.viewerContainer.appendChild(waitingPopup);createSpinner({target:waitingPopup,cssClass:'e-spin-center'});this.setLoaderProperties(waitingPopup);if(sf.base.isBlazor()){this.contextMenuModule=new BlazorContextMenu(this.pdfViewer,this);// eslint-disable-next-line
var spinnerElement=document.getElementsByClassName(this.pdfViewer.dataId+'_spinner');if(spinnerElement&&spinnerElement[0]&&!spinnerElement[0].classList.contains('e-spin-hide')){spinnerElement[0].classList.remove('e-spin-show');spinnerElement[0].classList.add('e-spin-hide');}}else{this.contextMenuModule=new ContextMenu$1(this.pdfViewer,this);}this.contextMenuModule.createContextMenu();this.createFileInputElement();this.wireEvents();if(this.pdfViewer.textSearchModule&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)){this.pdfViewer.textSearchModule.createTextSearchBox();}if(this.pdfViewer.documentPath){if(sf.base.isBlazor()){this.pdfViewer.viewerBase.showLoadingIndicator(true);var isDocumentLoaded=false;if(this.pdfViewer.documentPath.includes(';base64,')){isDocumentLoaded=true;this.pdfViewer.toolbarModule.uploadedFile=this.pdfViewer.documentPath;}this.pdfViewer._dotnetInstance.invokeMethodAsync('LoadDocumentFromClient',this.pdfViewer.documentPath,isDocumentLoaded);}else{this.pdfViewer.load(this.pdfViewer.documentPath,null);}}if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.initializeCollection();}}};PdfViewerBase.prototype.createMobilePageNumberContainer=function(){this.mobilePageNoContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_mobilepagenoContainer',className:'e-pv-mobilepagenoscroll-container'});this.mobilecurrentPageContainer=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_mobilecurrentpageContainer',className:'e-pv-mobilecurrentpage-container'});this.mobilenumberContainer=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_mobiledashedlineContainer',className:'e-pv-mobiledashedline-container'});this.mobiletotalPageContainer=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_mobiletotalpageContainer',className:'e-pv-mobiletotalpage-container'});this.mobileScrollerContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_mobilescrollContainer',className:'e-pv-mobilescroll-container'});this.mobileSpanContainer=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_mobilespanContainer',className:'e-pv-mobilespanscroll-container'});this.mobileSpanContainer.innerHTML='1';this.mobilecurrentPageContainer.innerHTML='1';this.mobilenumberContainer.innerHTML='&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;';this.mobileScrollerContainer.style.cssFloat='right';this.mobileScrollerContainer.style.width='40px';this.mobileScrollerContainer.style.height='32px';this.mobileScrollerContainer.style.zIndex='100';this.mobilePageNoContainer.style.width='120px';this.mobilePageNoContainer.style.height='100px';this.mobilePageNoContainer.style.zIndex='100';this.mobilePageNoContainer.style.position='fixed';this.mobileScrollerContainer.addEventListener('touchstart',this.mobileScrollContainerDown.bind(this));this.mobileScrollerContainer.addEventListener('touchend',this.mobileScrollContainerEnd.bind(this));this.mobileScrollerContainer.style.display='none';};/**
     * @private
     * @param  {string} documentData - file name or base64 string.
     * @param {string} password - password of the PDF document.
     * @returns {void}
     */PdfViewerBase.prototype.initiatePageRender=function(documentData,password){this.pdfViewer.unload();this.loadedData=documentData;this.documentId=this.createGUID();if(this.viewerContainer){this.viewerContainer.scrollTop=0;}this.showLoadingIndicator(true);this.hashId=' ';this.isFileName=false;this.saveDocumentInfo();if(this.pdfViewer.interactionMode==='Pan'){this.initiatePanning();}documentData=this.checkDocumentData(documentData);var isbase64=this.loadedData.includes('pdf;base64,');if(isbase64){this.pdfViewer.fileByteArray=this.convertBase64(documentData);}this.setFileName();if(this.pdfViewer.downloadFileName){this.downloadFileName=this.pdfViewer.downloadFileName;}else{this.downloadFileName=this.pdfViewer.fileName;}var jsonObject=this.constructJsonObject(documentData,password,isbase64);this.createAjaxRequest(jsonObject,documentData,password);};/**
     * @private
     */PdfViewerBase.prototype.initiateLoadDocument=function(documentId,isFileName,fileName){if(documentId){this.documentId=documentId;}if(this.viewerContainer){this.viewerContainer.scrollTop=0;}this.showLoadingIndicator(true);this.hashId=' ';this.isFileName=isFileName;this.saveDocumentInfo();if(this.pdfViewer.interactionMode==='Pan'){this.initiatePanning();}this.setFileName();if(this.pdfViewer.fileName===null){if(isFileName&&fileName){this.pdfViewer.fileName=fileName;this.jsonDocumentId=this.pdfViewer.fileName;}else{this.pdfViewer.fileName='undefined.pdf';this.jsonDocumentId=null;}}if(this.pdfViewer.downloadFileName){this.downloadFileName=this.pdfViewer.downloadFileName;}else{this.downloadFileName=this.pdfViewer.fileName;}};PdfViewerBase.prototype.convertBase64=function(base64){base64=base64.replace('data:application/pdf;base64,','');return new Uint8Array(atob(base64).split('').map(function(_char){return _char.charCodeAt(0);}));};/**
     * @private
     */PdfViewerBase.prototype.loadSuccess=function(documentDetails,password){// eslint-disable-next-line
var data=documentDetails;if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){this.onControlError(500,data,this.pdfViewer.serverActionSettings.load);data=null;}}if(data){while(_typeof(data)!=='object'){data=JSON.parse(data);// eslint-disable-next-line
if(typeof parseInt(data)==='number'&&!isNaN(parseInt(data))){// eslint-disable-next-line
data=parseInt(data);break;}}if(data.StatusText&&data.StatusText==='File Does not Exist'){this.showLoadingIndicator(false);}// eslint-disable-next-line
if(data.uniqueId===this.documentId||typeof parseInt(data)==='number'&&!isNaN(parseInt(data))){this.updateFormFieldName(data);this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load,data);this.requestSuccess(data,null,password);}}}};// eslint-disable-next-line
PdfViewerBase.prototype.updateFormFieldName=function(data){if(data&&data.PdfRenderedFormFields&&data.PdfRenderedFormFields.length>0){var field=void 0;for(var i=0;i<data.PdfRenderedFormFields.length;i++){field=data.PdfRenderedFormFields[i];if(field){if(field.ActualFieldName){field.FieldName=field.ActualFieldName;}}}}};// eslint-disable-next-line
PdfViewerBase.prototype.mobileScrollContainerDown=function(event){this.ispageMoved=false;this.isThumb=true;if(this.isTextMarkupAnnotationModule()){// eslint-disable-next-line max-len
if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage!=null&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var pageNumber=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null;this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(pageNumber);this.pdfViewer.toolbar.showToolbar(true);}}this.mobileScrollerContainer.addEventListener('touchmove',this.viewerContainerOnScroll.bind(this),true);};/**
     * @private
     * @param {MouseEvent} e - default mouse event.
     * @returns {PointModel} - retuns the bounds.
     */PdfViewerBase.prototype.relativePosition=function(e){// eslint-disable-next-line
var currentRect=this.viewerContainer.getBoundingClientRect();var left=e.clientX-currentRect.left;var top=e.clientY-currentRect.top;return{x:left,y:top};};// eslint-disable-next-line
PdfViewerBase.prototype.setMaximumHeight=function(element){// eslint-disable-next-line
var currentRect=element.getBoundingClientRect();if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode||currentRect&&currentRect.height===0){element.style.minHeight='500px';}this.updateWidth();this.updateHeight();};// eslint-disable-next-line
PdfViewerBase.prototype.applyViewerHeight=function(element){// eslint-disable-next-line
var currentRect=element.getBoundingClientRect();if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&currentRect&&currentRect.height===0){element.style.minHeight='500px';}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.updateWidth=function(){if(this.pdfViewer.width.toString()!=='auto'){// eslint-disable-next-line
this.pdfViewer.element.style.width=this.pdfViewer.width;}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.updateHeight=function(){if(this.pdfViewer.height.toString()!=='auto'){// eslint-disable-next-line
this.pdfViewer.element.style.height=this.pdfViewer.height;}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.updateViewerContainer=function(){var sideBarContentContainer=this.getElement('_sideBarContentContainer');if(sideBarContentContainer&&sideBarContentContainer.style.display==='none'){this.navigationPane.updateViewerContainerOnClose();}else if(sideBarContentContainer&&sideBarContentContainer.style.display==='block'){this.navigationPane.updateViewerContainerOnExpand();}else{this.updateViewerContainerSize();}// eslint-disable-next-line
var toolbarModule=this.pdfViewer.toolbarModule;if(toolbarModule){if(sf.base.isBlazor()){if(this.pdfViewer.enableToolbar||this.pdfViewer.enableAnnotationToolbar){this.pdfViewer._dotnetInstance.invokeMethodAsync('RefreshToolbarItems');}}else{if(this.pdfViewer.enableToolbar){toolbarModule.toolbar.refreshOverflow();}if(this.pdfViewer.enableAnnotationToolbar&&toolbarModule.annotationToolbarModule){toolbarModule.annotationToolbarModule.toolbar.refreshOverflow();}}}};PdfViewerBase.prototype.updateViewerContainerSize=function(){this.viewerContainer.style.width=this.pdfViewer.element.clientWidth+'px';this.pageContainer.style.width=this.viewerContainer.offsetWidth+'px';this.updateZoomValue();};// eslint-disable-next-line
PdfViewerBase.prototype.mobileScrollContainerEnd=function(event){if(!this.ispageMoved){if(!sf.base.isBlazor()){this.goToPagePopup.show();}else{this.pdfViewer._dotnetInstance.invokeMethodAsync('ShowPageDialog',null);}}this.isThumb=false;this.ispageMoved=false;this.mobileScrollerContainer.removeEventListener('touchmove',this.viewerContainerOnScroll.bind(this),true);this.mobilePageNoContainer.style.display='none';};// eslint-disable-next-line
PdfViewerBase.prototype.createAjaxRequest=function(jsonObject,documentData,password){var proxy=null;proxy=this;if(this.pdfViewer.serverActionSettings){this.loadRequestHandler=new AjaxHandler(this.pdfViewer);this.loadRequestHandler.url=this.pdfViewer.serviceUrl+'/'+this.pdfViewer.serverActionSettings.load;this.loadRequestHandler.responseType='json';this.loadRequestHandler.mode=true;// eslint-disable-next-line
jsonObject['action']='Load';// eslint-disable-next-line
jsonObject['elementId']=this.pdfViewer.dataId;this.loadRequestHandler.send(jsonObject);// eslint-disable-next-line
this.loadRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){proxy.onControlError(500,data,this.pdfViewer.serverActionSettings.load);data=null;}}if(data){while(_typeof(data)!=='object'){data=JSON.parse(data);// eslint-disable-next-line
if(typeof parseInt(data)==='number'&&!isNaN(parseInt(data))){// eslint-disable-next-line
data=parseInt(data);break;}}// eslint-disable-next-line
if(data.uniqueId===proxy.documentId||typeof parseInt(data)==='number'&&!isNaN(parseInt(data))){proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load,data);proxy.requestSuccess(data,documentData,password);}}else{proxy.showLoadingIndicator(false);}}};// eslint-disable-next-line
this.loadRequestHandler.onFailure=function(result){var statusString=result.status.toString().split('')[0];if(statusString==='4'){proxy.openNotificationPopup('Client error');}else{proxy.openNotificationPopup();}proxy.showLoadingIndicator(false);proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.load);};// eslint-disable-next-line
this.loadRequestHandler.onError=function(result){proxy.openNotificationPopup();proxy.showLoadingIndicator(false);// eslint-disable-next-line
proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.load);};}};/**
     * @private
     * @param {string} errorString - The message to be displayed.
     * @returns {void}
     */PdfViewerBase.prototype.openNotificationPopup=function(errorString){var _this=this;if(this.pdfViewer.showNotificationDialog){if(errorString==='Client error'){if(sf.base.isBlazor()){var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_Clienterror');promise.then(function(value){_this.textLayer.createNotificationPopup(value);});}else{this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Client error'));}}else{if(sf.base.isBlazor()){var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_Servererror');promise.then(function(value){_this.textLayer.createNotificationPopup(value);});}else{this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Server error'));}}if(this.getElement('_notify')){this.getElement('_notify').classList.add('e-pv-notification-large-content');}}};/**
     * @private
     * @param {string} errorString - The message to be shown.
     * @returns {void}
     */PdfViewerBase.prototype.showNotificationPopup=function(errorString){if(!this.pdfViewer.showNotificationDialog&&errorString!==''){this.textLayer.createNotificationPopup(errorString);if(this.getElement('_notify')){this.getElement('_notify').classList.add('e-pv-notification-large-content');}}};// eslint-disable-next-line
PdfViewerBase.prototype.requestSuccess=function(data,documentData,password){if(data.fileByteArray){this.pdfViewer.fileByteArray=this.convertBase64(data.fileByteArray);}else if(!this.pdfViewer.fileByteArray&&this.pdfViewer.toolbarModule.uploadedFile){this.pdfViewer.fileByteArray=this.convertBase64(this.pdfViewer.toolbarModule.uploadedFile);}if(data&&data.pageCount!==undefined){if(sf.base.isBlazor()&&this.isPassword){this.isPassword=false;this.isPasswordAvailable=false;this.pdfViewer._dotnetInstance.invokeMethodAsync('ClosePasswordDialog');}if(password&&password!=''){this.passwordData=password;}this.pdfViewer.allowServerDataBinding=false;this.pageCount=data.pageCount;this.pdfViewer.pageCount=data.pageCount;this.pdfViewer.updatePdfViewerOptions("PageCount",data.pageCount);this.hashId=data.hashId;this.documentLiveCount=data.documentLiveCount;this.isAnnotationCollectionRemoved=false;this.saveDocumentHashData();this.saveFormfieldsData(data);this.pdfViewer.allowServerDataBinding=true;this.isDigitalSignaturePresent=data.isDigitalSignaturePresent;this.pageRender(data);// eslint-disable-next-line
var pageData={pageCount:data.pageCount,pageSizes:data.pageSizes};window.sessionStorage.setItem(this.documentId+'_pagedata',JSON.stringify(pageData));if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.mobileScrollerContainer.style.display='';// eslint-disable-next-line
var toolbarHeight=this.pdfViewer.toolbarModule?this.toolbarHeight:0;this.mobileScrollerContainer.style.top=toolbarHeight+'px';}this.restrictionList=data.RestrictionSummary;this.RestrictionEnabled(this.restrictionList,false);}else{this.pageCount=0;this.currentPageNumber=0;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.mobileScrollerContainer.style.display='none';}if(data===4){if(!sf.base.isBlazor()){// 4 is error code for encrypted document.
this.renderPasswordPopup(documentData,password);}}else if(data===3){if(!sf.base.isBlazor()){// 3 is error code for corrupted document.
this.renderCorruptPopup();}}if(this.pdfViewer.toolbarModule){this.pdfViewer.toolbarModule.updateToolbarItems();}}// eslint-disable-next-line
var annotationModule=this.pdfViewer.annotationModule;// eslint-disable-next-line max-len
if(annotationModule&&annotationModule.textMarkupAnnotationModule&&annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)){annotationModule.textMarkupAnnotationModule.createAnnotationSelectElement();}};// eslint-disable-next-line
PdfViewerBase.prototype.RestrictionEnabled=function(restrictionSummary,isEnable){if(restrictionSummary){for(var i=0;i<restrictionSummary.length;i++){this.EnableRestriction(restrictionSummary[i],isEnable);if(!sf.base.isBlazor()){if(this.pdfViewer.toolbarModule){this.pdfViewer.toolbarModule.DisableToolbarItems(restrictionSummary[i],isEnable);}}else{if(this.pdfViewer.toolbarModule){this.pdfViewer._dotnetInstance.invokeMethodAsync('RestrictToolbarItems',restrictionSummary,isEnable);}}}}};// eslint-disable-next-line
PdfViewerBase.prototype.EnableRestriction=function(restrictionSummary,isEnable){switch(restrictionSummary){case'Print':this.pdfViewer.enablePrint=isEnable;break;case'CopyContent':this.pdfViewer.enableTextSelection=isEnable;break;case'FillFields':this.pdfViewer.enableFormFields=isEnable;this.enableFormFieldButton(isEnable);break;case'EditAnnotations':this.pdfViewer.enableAnnotation=isEnable;break;}};// eslint-disable-next-line
PdfViewerBase.prototype.pageRender=function(data){this.document=null;this.passwordDialogReset();if(this.passwordPopup){this.passwordPopup.hide();}var pageIndex=0;this.initPageDiv(data);this.currentPageNumber=pageIndex+1;this.pdfViewer.currentPageNumber=pageIndex+1;this.pdfViewer.updatePdfViewerOptions("CurrentPageNumber",this.pdfViewer.currentPageNumber);this.previousZoomValue=this.pdfViewer.zoomValue;var isZoomMode=false;if(this.pdfViewer.magnificationModule){this.pdfViewer.magnificationModule.isAutoZoom=true;if(this.pdfViewer.zoomValue&&this.pdfViewer.zoomValue>0){if(this.pdfViewer.zoomValue!==100){isZoomMode=true;}this.isInitialPageMode=true;this.pdfViewer.magnification.zoomTo(this.pdfViewer.zoomValue);}if(this.pdfViewer.zoomMode==='FitToWidth'){this.isInitialPageMode=true;this.pdfViewer.magnificationModule.fitToWidth();}else if(this.pdfViewer.zoomMode==='FitToPage'){this.isInitialPageMode=true;this.pdfViewer.magnificationModule.fitToPage();}this.documentLoaded=true;this.pdfViewer.magnificationModule.isInitialLoading=true;this.onWindowResize();this.documentLoaded=false;this.pdfViewer.magnificationModule.isInitialLoading=false;}if(this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isAutoZoom){this.pdfViewer.updatePdfViewerOptions("ZoomValue",100);}else{this.pdfViewer.updatePdfViewerOptions("ZoomValue",this.pdfViewer.zoomValue);}this.isDocumentLoaded=true;// eslint-disable-next-line
var proxy=null;proxy=this;var pageWidth=this.pageSize[pageIndex].width;var fileByteArray=this.pdfViewer.fileByteArray;this.pdfViewerRunner.postMessage({uploadedFile:fileByteArray,message:'LoadPageCollection',password:proxy.passwordData,pageIndex:pageIndex,isZoomMode:isZoomMode});this.showLoadingIndicator(false);if(!sf.base.isBlazor()){if(this.pdfViewer.toolbarModule){this.pdfViewer.toolbarModule.uploadedDocumentName=null;this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber);this.pdfViewer.toolbarModule.updateToolbarItems();if(this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule){this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationAddTools(true);}// eslint-disable-next-line max-len
this.viewerContainer.setAttribute('aria-labelledby',this.pdfViewer.dataId+'_pageDiv_'+(this.currentPageNumber-1));}}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.mobileSpanContainer.innerHTML=this.currentPageNumber.toString();this.mobilecurrentPageContainer.innerHTML=this.currentPageNumber.toString();}};PdfViewerBase.prototype.PageloadedOnMessage=function(event){if(event.data.message==='PageLoaded'){if(this.renderedPagesList.indexOf(event.data.pageIndex)===-1&&!event.data.isZoomMode){this.createRequestForRender(event.data.pageIndex);var pageNumber=event.data.pageIndex+1;if(pageNumber<this.pageCount){this.createRequestForRender(pageNumber);pageNumber=pageNumber+1;}if(this.pageSize[pageNumber]){var pageTop=this.getPageTop(pageNumber);var viewerHeight=this.viewerContainer.clientHeight;while(viewerHeight>pageTop){if(this.pageSize[pageNumber]){this.renderPageElement(pageNumber);this.createRequestForRender(pageNumber);pageTop=this.getPageTop(pageNumber);pageNumber=pageNumber+1;}else{break;}}}}}};PdfViewerBase.prototype.renderPasswordPopup=function(documentData,password){var _this=this;if(!sf.base.isBlazor()){if(!this.isPasswordAvailable){if(this.isFileName){this.document=documentData;}else{this.document='data:application/pdf;base64,'+documentData;}this.isPasswordAvailable=true;this.createPasswordPopup();this.pdfViewer.fireDocumentLoadFailed(true,null);this.passwordPopup.show();}else{this.pdfViewer.fireDocumentLoadFailed(true,password);this.promptElement.classList.add('e-pv-password-error');this.promptElement.textContent=this.pdfViewer.localeObj.getConstant('Invalid Password');this.promptElement.focus();if(this.isFileName){this.document=documentData;}else{this.document='data:application/pdf;base64,'+documentData;}this.passwordPopup.show();}}else{// eslint-disable-next-line
var promptElement_1=document.getElementById(this.pdfViewer.dataId+'_prompt');var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_EnterPassword');promise.then(function(value){promptElement_1.textContent=value;});// eslint-disable-next-line
var passwordInput_1=document.querySelector('#'+this.pdfViewer.dataId+'_password_input');passwordInput_1.addEventListener('keyup',function(){if(passwordInput_1.value===''){_this.passwordDialogReset();}});passwordInput_1.addEventListener('focus',function(){passwordInput_1.parentElement.classList.add('e-input-focus');});passwordInput_1.addEventListener('blur',function(){passwordInput_1.parentElement.classList.remove('e-input-focus');});if(!this.isPasswordAvailable){if(this.isFileName){this.document=documentData;}else{this.document='data:application/pdf;base64,'+documentData;}this.isPasswordAvailable=true;this.pdfViewer.fireDocumentLoadFailed(true,null);}else{this.pdfViewer.fireDocumentLoadFailed(true,password);promptElement_1.classList.add('e-pv-password-error');var promise_1=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_InvalidPassword');promise_1.then(function(value){promptElement_1.textContent=value;});promptElement_1.focus();if(this.isFileName){this.document=documentData;}else{this.document='data:application/pdf;base64,'+documentData;}}this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenPasswordDialog');}};PdfViewerBase.prototype.renderCorruptPopup=function(){this.pdfViewer.fireDocumentLoadFailed(false,null);this.documentId=null;if(this.pdfViewer.showNotificationDialog){if(!sf.base.isBlazor()){this.createCorruptedPopup();this.corruptPopup.show();}else{this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenCorruptedDialog');}}};PdfViewerBase.prototype.constructJsonObject=function(documentData,password,isBase64String){var jsonObject;if(password){this.isPasswordAvailable=true;this.passwordData=password;// eslint-disable-next-line max-len
jsonObject={document:documentData,password:password,isClientsideLoading:isBase64String,zoomFactor:1,isFileName:this.isFileName,uniqueId:this.documentId,showDigitalSignatureAppearance:this.pdfViewer.showDigitalSignatureAppearance};}else{this.isPasswordAvailable=false;this.passwordData='';jsonObject={document:documentData,zoomFactor:1,isClientsideLoading:isBase64String,isFileName:this.isFileName,uniqueId:this.documentId,showDigitalSignatureAppearance:this.pdfViewer.showDigitalSignatureAppearance};}return jsonObject;};PdfViewerBase.prototype.checkDocumentData=function(documentData){var base64String=documentData.split('base64,')[1];if(base64String===undefined){this.isFileName=true;this.jsonDocumentId=documentData;if(this.pdfViewer.fileName===null){// eslint-disable-next-line max-len
var documentStringArray=documentData.indexOf('\\')!==-1?documentData.split('\\'):documentData.split('/');this.pdfViewer.fileName=documentStringArray[documentStringArray.length-1];this.jsonDocumentId=this.pdfViewer.fileName;base64String=documentData;}}else{this.jsonDocumentId=null;}return base64String;};PdfViewerBase.prototype.setFileName=function(){if(this.pdfViewer.fileName===null){if(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.uploadedDocumentName){this.pdfViewer.fileName=this.pdfViewer.toolbarModule.uploadedDocumentName;this.jsonDocumentId=this.pdfViewer.fileName;}else{this.pdfViewer.fileName='undefined.pdf';this.jsonDocumentId=null;}}};PdfViewerBase.prototype.saveDocumentInfo=function(){window.sessionStorage.setItem('currentDocument',this.documentId);window.sessionStorage.setItem('serviceURL',this.pdfViewer.serviceUrl);if(this.pdfViewer.serverActionSettings){window.sessionStorage.setItem('unload',this.pdfViewer.serverActionSettings.unload);}};PdfViewerBase.prototype.saveDocumentHashData=function(){var hashId='';if(sf.base.Browser.isIE||sf.base.Browser.info.name==='edge'){hashId=encodeURI(this.hashId);}else{hashId=this.hashId;}window.sessionStorage.setItem('hashId',hashId);if(this.documentLiveCount){window.sessionStorage.setItem('documentLiveCount',this.documentLiveCount.toString());}};// eslint-disable-next-line
PdfViewerBase.prototype.saveFormfieldsData=function(data){this.pdfViewer.isFormFieldDocument=false;this.pdfViewer.updatePdfViewerOptions("IsFormFieldDocument",this.pdfViewer.isFormFieldDocument);this.enableFormFieldButton(false);if(data&&data.PdfRenderedFormFields&&this.pdfViewer.formFieldsModule&&data.PdfRenderedFormFields.length>0){if(this.formfieldvalue){if(this.pdfViewer.formFieldsModule){this.setItemInSessionStorage(this.formfieldvalue,'_formfields');}this.formfieldvalue=null;}else if(this.pdfViewer.formFieldsModule){this.setItemInSessionStorage(data.PdfRenderedFormFields,'_formfields');}if(this.pdfViewer.enableFormFields&&!this.pdfViewer.formDesignerModule){this.pdfViewer.formFieldCollections=[];this.pdfViewer.formFieldsModule.formFieldCollections();}if(this.pdfViewer.formFieldCollections.length>0){this.pdfViewer.isFormFieldDocument=true;this.pdfViewer.updatePdfViewerOptions("IsFormFieldDocument",this.pdfViewer.isFormFieldDocument);this.enableFormFieldButton(true);}}};/**
     * @param {boolean} isEnable - Enable or disable the toolbar itema.
     * @returns {void}
     * @private
     */PdfViewerBase.prototype.enableFormFieldButton=function(isEnable){if(isEnable){this.pdfViewer.isFormFieldDocument=true;this.pdfViewer.updatePdfViewerOptions("IsFormFieldDocument",this.pdfViewer.isFormFieldDocument);}if(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.submitItem){this.pdfViewer.toolbarModule.toolbar.enableItems(this.pdfViewer.toolbarModule.submitItem.parentElement,isEnable);}};PdfViewerBase.prototype.updateWaitingPopup=function(pageNumber){if(this.pageSize[pageNumber].top!=null){// eslint-disable-next-line max-len
var pageCurrentRect=this.getElement('_pageDiv_'+pageNumber).getBoundingClientRect();var waitingPopup=this.getElement('_pageDiv_'+pageNumber).firstChild.firstChild;if(pageCurrentRect.top<0){if(this.toolbarHeight+this.viewerContainer.clientHeight/2-pageCurrentRect.top<pageCurrentRect.height){waitingPopup.style.top=this.viewerContainer.clientHeight/2-pageCurrentRect.top-this.toolbarHeight+'px';}else{if(this.toolbarHeight+pageCurrentRect.bottom/2-pageCurrentRect.top<pageCurrentRect.height){waitingPopup.style.top=pageCurrentRect.bottom/2-pageCurrentRect.top-this.toolbarHeight+'px';}}}else{waitingPopup.style.top=this.viewerContainer.clientHeight/2+'px';}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&pageCurrentRect.width>this.viewerContainer.clientWidth){waitingPopup.style.left=this.viewerContainer.clientWidth/2+this.viewerContainer.scrollLeft+'px';}else if(this.getZoomFactor()>1.25&&pageCurrentRect.width>this.viewerContainer.clientWidth){waitingPopup.style.left=this.viewerContainer.clientWidth/2+'px';}else{waitingPopup.style.left=pageCurrentRect.width/2+'px';}}};/**
     * @private
     * @returns {number} - returned the page value.
     */PdfViewerBase.prototype.getActivePage=function(isPageNumber){if(this.activeElements&&!sf.base.isNullOrUndefined(this.activeElements.activePageID)){if(isPageNumber){return this.activeElements.activePageID+1;}else{return this.activeElements.activePageID;}}else{if(isPageNumber){return this.currentPageNumber;}else{return this.currentPageNumber-1;}}};PdfViewerBase.prototype.createWaitingPopup=function(pageNumber){// eslint-disable-next-line max-len
var waitingPopup=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+pageNumber);if(waitingPopup){createSpinner({target:waitingPopup});this.setLoaderProperties(waitingPopup);}};/**
     * @param {boolean} isShow - Show or hide loading indicator.
     * @returns {void}
     * @private
     */PdfViewerBase.prototype.showLoadingIndicator=function(isShow){var waitingPopup=this.getElement('_loadingIndicator');if(waitingPopup){if(isShow){waitingPopup.style.display='block';showSpinner(waitingPopup);}else{waitingPopup.style.display='none';hideSpinner(waitingPopup);}}};PdfViewerBase.prototype.showPageLoadingIndicator=function(pageIndex,isShow){var waitingPopup=this.getElement('_pageDiv_'+pageIndex);if(waitingPopup!=null){if(isShow){showSpinner(waitingPopup);}else{hideSpinner(waitingPopup);}this.updateWaitingPopup(pageIndex);}};/**
     * @param {boolean} isShow - Show or hide print loading indicator.
     * @returns {void}
     * @private
     */PdfViewerBase.prototype.showPrintLoadingIndicator=function(isShow){var printWaitingPopup=this.getElement('_printLoadingIndicator');if(printWaitingPopup!=null){if(isShow){this.printMainContainer.style.display='block';showSpinner(printWaitingPopup);}else{this.printMainContainer.style.display='none';hideSpinner(printWaitingPopup);}}};PdfViewerBase.prototype.setLoaderProperties=function(element){var spinnerElement=element.firstChild.firstChild.firstChild;if(spinnerElement){spinnerElement.style.height='48px';spinnerElement.style.width='48px';spinnerElement.style.transformOrigin='24px 24px 24px';}};/**
     * @param {number} pageNumber - Specify the pageNumber.
     * @returns {void}
     * @private
     */PdfViewerBase.prototype.updateScrollTop=function(pageNumber){var _this=this;// eslint-disable-next-line
if(this.pageSize[pageNumber]!=null){this.renderElementsVirtualScroll(pageNumber);this.viewerContainer.scrollTop=this.getPageTop(pageNumber);if(this.renderedPagesList.indexOf(pageNumber)===-1){this.createRequestForRender(pageNumber);}setTimeout(function(){var currentPageNumber=pageNumber+1;if(currentPageNumber!==_this.currentPageNumber){_this.pdfViewer.currentPageNumber=currentPageNumber;_this.currentPageNumber=currentPageNumber;_this.pdfViewer.updatePdfViewerOptions("CurrentPageNumber",_this.pdfViewer.currentPageNumber);if(_this.pdfViewer.toolbarModule){_this.pdfViewer.toolbarModule.updateCurrentPage(currentPageNumber);}}},100);}};/**
     * @private
     * @returns {number} - Returns the zoom factor value.
     */PdfViewerBase.prototype.getZoomFactor=function(){if(this.pdfViewer.magnificationModule){return this.pdfViewer.magnificationModule.zoomFactor;}else{// default value
return 1;}};/**
     * @private
     * @returns {boolean} - Returns whether the pinch zoom is performed or not.
     */PdfViewerBase.prototype.getPinchZoomed=function(){if(this.pdfViewer.magnificationModule){return this.pdfViewer.magnificationModule.isPinchZoomed;}else{// default value
return false;}};/**
     * @private
     * @returns {boolean} -Returns whether the zoom is performed or not.
     */PdfViewerBase.prototype.getMagnified=function(){if(this.pdfViewer.magnificationModule){return this.pdfViewer.magnificationModule.isMagnified;}else{// default value
return false;}};PdfViewerBase.prototype.getPinchScrolled=function(){if(this.pdfViewer.magnificationModule){return this.pdfViewer.magnificationModule.isPinchScrolled;}else{// default value
return false;}};PdfViewerBase.prototype.getPagesPinchZoomed=function(){if(this.pdfViewer.magnificationModule){return this.pdfViewer.magnificationModule.isPagePinchZoomed;}else{// default value
return false;}};PdfViewerBase.prototype.getPagesZoomed=function(){if(this.pdfViewer.magnificationModule){return this.pdfViewer.magnificationModule.isPagesZoomed;}else{// default value
return false;}};PdfViewerBase.prototype.getRerenderCanvasCreated=function(){if(this.pdfViewer.magnificationModule){return this.pdfViewer.magnificationModule.isRerenderCanvasCreated;}else{// default value
return false;}};/**
     * @private
     * @returns {string} - retrun the docuumentid.
     */PdfViewerBase.prototype.getDocumentId=function(){return this.documentId;};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.download=function(){if(this.pageCount>0){this.createRequestForDownload();}};/**
     * @private
     * @returns {promise<Blob>} - Returns the blob object.
     */PdfViewerBase.prototype.saveAsBlob=function(){var _this=this;if(this.pageCount>0){return new Promise(function(resolve,reject){_this.saveAsBlobRequest().then(function(value){resolve(value);});});}return null;};PdfViewerBase.prototype.saveAsBlobRequest=function(){var _this=this;var proxy=null;proxy=this;var promise=new Promise(function(resolve,reject){// eslint-disable-next-line
var jsonObject=proxy.constructJsonDownload();_this.dowonloadRequestHandler=new AjaxHandler(_this.pdfViewer);_this.dowonloadRequestHandler.url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.download;_this.dowonloadRequestHandler.responseType='text';_this.dowonloadRequestHandler.send(jsonObject);// eslint-disable-next-line
_this.dowonloadRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)==='object'){data=JSON.parse(data);}if(_typeof(data)!=='object'&&data.indexOf('data:application/pdf')===-1){proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.download);data=null;}if(data){proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.download,data);var blobUrl=proxy.createBlobUrl(data.split('base64,')[1],'application/pdf');resolve(blobUrl);}}};// eslint-disable-next-line
_this.dowonloadRequestHandler.onFailure=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.download);};// eslint-disable-next-line
_this.dowonloadRequestHandler.onError=function(result){proxy.openNotificationPopup();proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.download);};});return promise;};/**
     * @param {boolean} isTriggerEvent - check to trigger the event.
     * @returns {void}
     * @private
     */PdfViewerBase.prototype.clear=function(isTriggerEvent){var proxy=this;var pdfViewer=proxy.pdfViewer;var printModule=pdfViewer.printModule;var textSearchModule=pdfViewer.textSearchModule;var bookmarkViewModule=pdfViewer.bookmarkViewModule;var thumbnailViewModule=pdfViewer.thumbnailView;var annotationModule=pdfViewer.annotation;var magnificationModule=pdfViewer.magnificationModule;var textSelectionModule=pdfViewer.textSelectionModule;var formFieldsModule=pdfViewer.formFieldsModule;var signatureModule=proxy.signatureModule;proxy.isPasswordAvailable=false;proxy.isDocumentLoaded=false;proxy.isInitialLoaded=false;proxy.isImportAction=false;proxy.annotationPageList=[];if(proxy.annotationComments){this.pdfViewer._dotnetInstance.invokeMethodAsync('ResetCommentCollection');}proxy.annotationComments=null;pdfViewer.annotationCollection=[];pdfViewer.signatureCollection=[];pdfViewer.formFieldCollection=[];proxy.isAnnotationCollectionRemoved=false;proxy.documentAnnotationCollections=null;proxy.isAnnotationPresent=false;proxy.isDrawnCompletely=false;proxy.annotationRenderredList=[];proxy.isImportAction=false;proxy.isImportedAnnotation=false;proxy.importedAnnotation=[];proxy.isStorageExceed=false;proxy.annotationStorage={};proxy.formFieldStorage={};proxy.downloadCollections={};proxy.annotationEvent=null;proxy.highestWidth=0;proxy.highestHeight=0;proxy.requestLists=[];proxy.tilerequestLists=[];proxy.isToolbarInkClicked=false;pdfViewer.formFieldCollections=[];proxy.passwordData='';proxy.updateDocumentEditedProperty(false);if(pdfViewer.formDesignerModule){pdfViewer.formDesignerModule.formFieldIndex=0;}proxy.initiateTextSelectMode();proxy.RestrictionEnabled(proxy.restrictionList,true);proxy.restrictionList=null;if(!sf.base.Browser.isDevice||pdfViewer.enableDesktopMode){if(proxy.navigationPane.sideBarToolbar){proxy.navigationPane.clear();}}if(!sf.base.isBlazor()&&sf.base.Browser.isDevice||!pdfViewer.enableDesktopMode){proxy.navigationPane.clear();}if(thumbnailViewModule){thumbnailViewModule.clear();}if(bookmarkViewModule){bookmarkViewModule.clear();}if(magnificationModule){magnificationModule.isMagnified=false;magnificationModule.clearIntervalTimer();}if(textSelectionModule){textSelectionModule.clearTextSelection();}if(textSearchModule){textSearchModule.resetTextSearch();}if(annotationModule){annotationModule.clear();annotationModule.initializeCollection();}if(formFieldsModule){formFieldsModule.readOnlyCollection=[];formFieldsModule.signatureFieldCollection=[];formFieldsModule.currentTarget=null;}if(signatureModule){signatureModule.signaturecollection=[];signatureModule.outputcollection=[];}if(proxy.pageSize){proxy.pageSize=[];}if(proxy.renderedPagesList){proxy.renderedPagesList=[];}if(proxy.pageContainer){while(proxy.pageContainer.hasChildNodes()){proxy.pageContainer.removeChild(proxy.pageContainer.lastChild);}}if(proxy.pageCount>0){proxy.unloadDocument(proxy);// eslint-disable-next-line
proxy.textLayer.characterBound=new Array();proxy.loadRequestHandler&&proxy.loadRequestHandler.clear();proxy.virtualLoadRequestHandler&&proxy.virtualLoadRequestHandler.clear();proxy.pageRequestHandler&&proxy.pageRequestHandler.clear();proxy.dowonloadRequestHandler&&proxy.dowonloadRequestHandler.clear();proxy.importAnnotationRequestHandler&&proxy.importAnnotationRequestHandler.clear();proxy.exportAnnotationRequestHandler&&proxy.exportAnnotationRequestHandler.clear();proxy.importFormFieldsRequestHandler&&proxy.importFormFieldsRequestHandler.clear();proxy.exportFormFieldsRequestHandler&&proxy.exportFormFieldsRequestHandler.clear();if(printModule&&printModule.printRequestHandler){printModule.printRequestHandler.clear();}}proxy.windowSessionStorageClear();if(proxy.pinchZoomStorage){proxy.pinchZoomStorage=[];}if((proxy.previousZoomValue||proxy.previousZoomValue===0)&&proxy.previousZoomValue!==pdfViewer.zoomValue){if(this.pdfViewer.zoomMode!=="Default"){pdfViewer.zoomValue=100;this.pdfViewer.updatePdfViewerOptions("ZoomValue",100);}else{pdfViewer.zoomValue=proxy.previousZoomValue;this.pdfViewer.updatePdfViewerOptions("ZoomValue",this.pdfViewer.zoomValue);}}if(isTriggerEvent&&proxy.pageCount>0){pdfViewer.fireDocumentUnload(this.pdfViewer.fileName);}this.pdfViewer.fileName=null;if(this.pdfViewer.documentPath!==null&&this.pdfViewer.documentPath!==undefined){this.pdfViewer.documentPath=null;}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.destroy=function(){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewer.element.classList.remove('e-pv-mobile-view');}this.unWireEvents();this.clear(false);this.pageContainer.parentNode?this.pageContainer.parentNode.removeChild(this.pageContainer):null;this.viewerContainer.parentNode?this.viewerContainer.parentNode.removeChild(this.viewerContainer):null;if(this.contextMenuModule){var contextMenuElement=this.contextMenuModule.contextMenuElement;contextMenuElement&&contextMenuElement.ej2_instances&&contextMenuElement.ej2_instances.length>0?this.contextMenuModule.destroy():null;}if(this.pdfViewer.toolbarModule){this.navigationPane.destroy();}var measureElement=document.getElementById('measureElement');if(measureElement){measureElement=undefined;}};/**
     * @param {PdfViewerBase} proxy - PdfviewerBase class.
     * @returns {void}
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.unloadDocument=function(proxy){var documentId='';if(sf.base.Browser.isIE||sf.base.Browser.info.name==='edge'){documentId=decodeURI(window.sessionStorage.getItem('hashId'));}else{documentId=window.sessionStorage.getItem('hashId');}var documentLiveCount=window.sessionStorage.getItem('documentLiveCount');if(documentId!==null){// eslint-disable-next-line max-len
var jsonObject={hashId:documentId,documentLiveCount:documentLiveCount,action:'Unload',elementId:proxy.pdfViewer.element.id};var actionName=window.sessionStorage.getItem('unload');if(window.sessionStorage.getItem('serviceURL')&&window.sessionStorage.getItem('serviceURL')!=='undefined'&&window.sessionStorage.getItem('serviceURL')!=='null'){try{// eslint-disable-next-line
var browserSupportsKeepalive=('keepalive'in new Request(''));if(browserSupportsKeepalive){// eslint-disable-next-line
var headerValue=this.setUnloadRequestHeaders();var credentialsData=this.pdfViewer.ajaxRequestSettings.withCredentials?'include':'omit';fetch(window.sessionStorage.getItem('serviceURL')+'/'+actionName,{method:'POST',credentials:credentialsData,headers:headerValue,body:JSON.stringify(jsonObject)});}}catch(error){this.unloadRequestHandler=new AjaxHandler(this.pdfViewer);this.unloadRequestHandler.send(jsonObject);}}else if(sf.base.isBlazor()){this.clearCache(actionName,jsonObject,proxy);}}if(this.pdfViewer.magnificationModule){this.pdfViewer.magnificationModule.zoomFactor=1;}this.formFieldCollection=[];window.sessionStorage.removeItem('hashId');window.sessionStorage.removeItem('documentLiveCount');if(this.documentId){window.sessionStorage.removeItem(this.documentId+'_formfields');window.sessionStorage.removeItem(this.documentId+'_formDesigner');window.sessionStorage.removeItem(this.documentId+'_annotations_shape');window.sessionStorage.removeItem(this.documentId+'_annotations_shape_measure');window.sessionStorage.removeItem(this.documentId+'_annotations_stamp');window.sessionStorage.removeItem(this.documentId+'_annotations_sticky');window.sessionStorage.removeItem(this.documentId+'_annotations_textMarkup');window.sessionStorage.removeItem(this.documentId+'_annotations_freetext');window.sessionStorage.removeItem(this.documentId+'_formfields');window.sessionStorage.removeItem(this.documentId+'_annotations_sign');window.sessionStorage.removeItem(this.documentId+'_annotations_ink');}};PdfViewerBase.prototype.clearCache=function(actionName,jsonObject,proxy){this.unloadRequestHandler=new AjaxHandler(this.pdfViewer);this.unloadRequestHandler.url=window.sessionStorage.getItem('serviceURL')+'/'+actionName;this.unloadRequestHandler.mode=false;this.unloadRequestHandler.responseType=null;this.unloadRequestHandler.send(jsonObject);// eslint-disable-next-line
this.unloadRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'){if(data.indexOf('Document')===-1){proxy.onControlError(500,data,actionName);data=null;}}if(data){proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.unload,data);}}};// eslint-disable-next-line
this.unloadRequestHandler.onFailure=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,actionName);};// eslint-disable-next-line
this.unloadRequestHandler.onError=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,actionName);};};// eslint-disable-next-line
PdfViewerBase.prototype.setUnloadRequestHeaders=function(){// eslint-disable-next-line
var myHeaders=new Headers();myHeaders.append('Content-Type','application/json;charset=UTF-8');for(var i=0;i<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;i++){// eslint-disable-next-line max-len
myHeaders.append(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerValue);}return myHeaders;};PdfViewerBase.prototype.windowSessionStorageClear=function(){window.sessionStorage.removeItem('currentDocument');window.sessionStorage.removeItem('serviceURL');window.sessionStorage.removeItem('unload');for(var i=0;i<this.sessionStorage.length;i++){window.sessionStorage.removeItem(this.sessionStorage[i]);}};PdfViewerBase.prototype.updateCommentPanelAfterloading=function(){var proxy=this;setTimeout(function(){proxy.updateCommentPanel();},1000);};PdfViewerBase.prototype.updateCommentPanel=function(){// eslint-disable-next-line
var moreOptionsButton=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');for(var i=0;i<moreOptionsButton.length;i++){moreOptionsButton[i].style.visibility='hidden';}// eslint-disable-next-line
// let commentTextBox: any = document.querySelectorAll('.e-pv-new-comments-div');
// for (let j: number = 0; j < commentTextBox.length; j++) {
//     commentTextBox[j].style.display = 'none';
// }
// eslint-disable-next-line
var commentContainer=document.querySelectorAll('.e-pv-comments-border');for(var j=0;j<commentContainer.length;j++){commentContainer[j].classList.remove('e-pv-comments-border');}// eslint-disable-next-line
var editableElement=document.querySelectorAll('.e-editable-inline');for(var j=0;j<editableElement.length;j++){editableElement[j].style.display='none';}// eslint-disable-next-line
var commentSelect=document.querySelectorAll('.e-pv-comments-select');for(var z=0;z<commentSelect.length;z++){commentSelect[z].classList.remove('e-pv-comments-select');}// eslint-disable-next-line
var commentsDiv=document.querySelectorAll('.e-pv-comments-div');for(var j=0;j<commentsDiv.length;j++){commentsDiv[j].style.minHeight=60+'px';}};/**
     * @param {boolean} isMouseDown - check whether the mouse down is triggered.
     * @returns {void}
     * @private
     */PdfViewerBase.prototype.focusViewerContainer=function(isMouseDown){var scrollX=window.scrollX;var scrollY=window.scrollY;// eslint-disable-next-line
var parentNode=this.getScrollParent(this.viewerContainer);var scrollNodeX=0;var scrollNodeY=0;if(parentNode!==null){scrollNodeX=parentNode.scrollLeft;scrollNodeY=parentNode.scrollTop;}this.viewerContainer.focus();if(this.currentPageNumber>0){this.viewerContainer.setAttribute('aria-labelledby',this.pdfViewer.dataId+'_pageDiv_'+(this.currentPageNumber-1));}if(this.pdfViewer.annotation&&this.pdfViewer.annotation.stickyNotesAnnotationModule){this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+this.currentPageNumber);if(this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer||this.pdfViewer.annotation){this.updateCommentPanel();}}// eslint-disable-next-line max-len
if((navigator.userAgent.indexOf('MSIE')!==-1||navigator.appVersion.indexOf('Trident/')>-1||navigator.userAgent.indexOf('Edge')!==-1)&&parentNode!==null){parentNode.scrollLeft=scrollNodeX;parentNode.scrollTop=scrollNodeY;}else if(parentNode!==null){parentNode.scrollTo(scrollNodeX,scrollNodeY);}window.scrollTo(scrollX,scrollY);};// eslint-disable-next-line
PdfViewerBase.prototype.getScrollParent=function(node){if(node===null||node.nodeName==='HTML'){return null;}var style=getComputedStyle(node);if(this.viewerContainer.id!==node.id&&(style.overflowY==='scroll'||style.overflowY==='auto')){return node;}else{return this.getScrollParent(node.parentNode);}};PdfViewerBase.prototype.createCorruptedPopup=function(){var _this=this;// eslint-disable-next-line max-len
var popupElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_corrupted_popup',className:'e-pv-corrupted-popup'});this.pageContainer.appendChild(popupElement);this.corruptPopup=new sf.popups.Dialog({showCloseIcon:true,closeOnEscape:true,isModal:true,// eslint-disable-next-line max-len
header:'<div class="e-pv-corrupted-popup-header"> '+this.pdfViewer.localeObj.getConstant('File Corrupted')+'</div>',visible:false,// eslint-disable-next-line max-len
buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant('OK'),isPrimary:true},click:this.closeCorruptPopup.bind(this)}],target:this.pdfViewer.element,beforeClose:function beforeClose(){_this.corruptPopup.destroy();_this.getElement('_corrupted_popup').remove();_this.corruptPopup=null;var waitingPopup=_this.getElement('_loadingIndicator');if(waitingPopup!=null){hideSpinner(waitingPopup);}}});if(this.pdfViewer.enableRtl){// eslint-disable-next-line max-len
this.corruptPopup.content='<div id="templatertl" class="e-pv-notification-icon-rtl"> <div class="e-pv-corrupted-popup-content-rtl" tabindex="0">'+this.pdfViewer.localeObj.getConstant('File Corrupted Content')+'</div></div>';this.corruptPopup.enableRtl=true;}else{// eslint-disable-next-line max-len
this.corruptPopup.content='<div id="template" class="e-pv-notification-icon"> <div class="e-pv-corrupted-popup-content" tabindex="0">'+this.pdfViewer.localeObj.getConstant('File Corrupted Content')+'</div></div>';}this.corruptPopup.appendTo(popupElement);};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.hideLoadingIndicator=function(){var waitingPopup=this.getElement('_loadingIndicator');if(waitingPopup!==null){hideSpinner(waitingPopup);}};PdfViewerBase.prototype.closeCorruptPopup=function(){this.corruptPopup.hide();var waitingPopup=this.getElement('_loadingIndicator');if(waitingPopup!==null){hideSpinner(waitingPopup);}};PdfViewerBase.prototype.createPrintPopup=function(){var element=document.getElementById(this.pdfViewer.dataId);this.printMainContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_printcontainer',className:'e-pv-print-popup-container'});element.appendChild(this.printMainContainer);this.printMainContainer.style.display='none';var printWaitingPopup=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_printLoadingIndicator',className:'e-pv-print-loading-container'});this.printMainContainer.appendChild(printWaitingPopup);createSpinner({target:printWaitingPopup,cssClass:'e-spin-center'});this.setLoaderProperties(printWaitingPopup);};PdfViewerBase.prototype.createGoToPagePopup=function(){var _this=this;// eslint-disable-next-line max-len
var popupElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_goTopage_popup',className:'e-pv-gotopage-popup'});this.goToPageElement=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_prompt'});this.goToPageElement.textContent=this.pdfViewer.localeObj.getConstant('Enter pagenumber');popupElement.appendChild(this.goToPageElement);var inputContainer=sf.base.createElement('span',{className:'e-pv-text-input'});// eslint-disable-next-line max-len
this.goToPageInput=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_page_input',className:'e-input'});this.goToPageInput.type='text';this.goToPageInput.style.maxWidth='80%';this.pageNoContainer=sf.base.createElement('span',{className:'.e-pv-number-ofpages'});inputContainer.appendChild(this.goToPageInput);inputContainer.appendChild(this.pageNoContainer);popupElement.appendChild(inputContainer);this.pageContainer.appendChild(popupElement);this.goToPagePopup=new sf.popups.Dialog({showCloseIcon:true,closeOnEscape:false,isModal:true,header:this.pdfViewer.localeObj.getConstant('GoToPage'),visible:false,buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Cancel')},click:this.GoToPageCancelClick.bind(this)},// eslint-disable-next-line max-len
{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Apply'),disabled:true,cssClass:'e-pv-gotopage-apply-btn',isPrimary:true},click:this.GoToPageApplyClick.bind(this)}],close:this.closeGoToPagePopUp.bind(this)});if(this.pdfViewer.enableRtl){this.goToPagePopup.enableRtl=true;}this.goToPagePopup.appendTo(popupElement);if(!sf.base.isBlazor()){var goToPageTextBox=new sf.inputs.NumericTextBox({format:'##',showSpinButton:false});goToPageTextBox.appendTo(this.goToPageInput);}this.goToPageInput.addEventListener('keyup',function(){// eslint-disable-next-line
var inputValue=_this.goToPageInput.value;if(inputValue!==''&&parseFloat(inputValue)>0&&_this.pdfViewer.pageCount+1>parseFloat(inputValue)){_this.EnableApplyButton();}else{_this.DisableApplyButton();}});};PdfViewerBase.prototype.closeGoToPagePopUp=function(){this.goToPageInput.value='';this.DisableApplyButton();};PdfViewerBase.prototype.EnableApplyButton=function(){// eslint-disable-next-line
var popupElements=document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];popupElements.removeAttribute('disabled');};PdfViewerBase.prototype.DisableApplyButton=function(){// eslint-disable-next-line
var popupElements=document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];popupElements.setAttribute('disabled',true);};PdfViewerBase.prototype.GoToPageCancelClick=function(){this.goToPagePopup.hide();};PdfViewerBase.prototype.GoToPageApplyClick=function(){this.goToPagePopup.hide();// eslint-disable-next-line
var pageNumber=this.goToPageInput.value;this.pdfViewer.navigation.goToPage(pageNumber);this.updateMobileScrollerPosition();};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.updateMobileScrollerPosition=function(){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.mobileScrollerContainer){// eslint-disable-next-line
var ratio=(this.viewerContainer.scrollHeight-this.viewerContainer.clientHeight)/(this.viewerContainer.clientHeight-56);// eslint-disable-next-line
var differenceRatio=this.viewerContainer.scrollTop/ratio;// eslint-disable-next-line
var toolbarHeight=this.pdfViewer.toolbarModule?this.toolbarHeight:0;this.mobileScrollerContainer.style.top=toolbarHeight+differenceRatio+'px';}};PdfViewerBase.prototype.createPasswordPopup=function(){var _this=this;// eslint-disable-next-line max-len
var popupElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_password_popup',className:'e-pv-password-popup',attrs:{'tabindex':'-1'}});this.promptElement=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_prompt',attrs:{'tabindex':'-1'}});this.promptElement.textContent=this.pdfViewer.localeObj.getConstant('Enter Password');popupElement.appendChild(this.promptElement);var inputContainer=sf.base.createElement('span',{className:'e-input-group e-pv-password-input'});// eslint-disable-next-line max-len
this.passwordInput=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_password_input',className:'e-input'});this.passwordInput.type='password';this.passwordInput.name='Required';inputContainer.appendChild(this.passwordInput);popupElement.appendChild(inputContainer);this.pageContainer.appendChild(popupElement);this.passwordPopup=new sf.popups.Dialog({showCloseIcon:true,closeOnEscape:false,isModal:true,header:this.pdfViewer.localeObj.getConstant('Password Protected'),visible:false,close:this.passwordCancel.bind(this),target:this.pdfViewer.element,beforeClose:function beforeClose(){_this.passwordPopup.destroy();_this.getElement('_password_popup').remove();_this.passwordPopup=null;var waitingPopup=_this.getElement('_loadingIndicator');if(waitingPopup!=null){hideSpinner(waitingPopup);}}});if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.passwordPopup.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant('OK'),isPrimary:true},click:this.applyPassword.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Cancel')},click:this.passwordCancelClick.bind(this)}];}else{this.passwordPopup.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Cancel')},click:this.passwordCancelClick.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant('OK'),isPrimary:true},click:this.applyPassword.bind(this)}];}if(this.pdfViewer.enableRtl){this.passwordPopup.enableRtl=true;}this.passwordPopup.appendTo(popupElement);this.passwordInput.addEventListener('keyup',function(){if(_this.passwordInput.value===''){_this.passwordDialogReset();}});this.passwordInput.addEventListener('focus',function(){_this.passwordInput.parentElement.classList.add('e-input-focus');});this.passwordInput.addEventListener('blur',function(){_this.passwordInput.parentElement.classList.remove('e-input-focus');});};// eslint-disable-next-line
PdfViewerBase.prototype.passwordCancel=function(args){if(args.isInteraction){this.clear(false);this.passwordDialogReset();this.passwordInput.value='';}var waitingPopup=this.getElement('_loadingIndicator');if(waitingPopup!==null){hideSpinner(waitingPopup);}};PdfViewerBase.prototype.passwordCancelClick=function(){this.clear(false);this.passwordDialogReset();this.passwordPopup.hide();var waitingPopup=this.getElement('_loadingIndicator');if(waitingPopup!==null){hideSpinner(waitingPopup);}};PdfViewerBase.prototype.passwordDialogReset=function(){if(!sf.base.isBlazor()){if(this.promptElement){this.promptElement.classList.remove('e-pv-password-error');this.promptElement.textContent=this.pdfViewer.localeObj.getConstant('Enter Password');this.passwordInput.value='';}}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.applyPassword=function(){if(!sf.base.isBlazor()){var password=this.passwordInput.value;if(password!==''){this.pdfViewer.load(this.document,password);}}this.focusViewerContainer();};PdfViewerBase.prototype.createFileInputElement=function(){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){// eslint-disable-next-line max-len
if(this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule){this.pdfViewer.toolbarModule.annotationToolbarModule.createCustomStampElement();}if(this.signatureModule){this.signatureModule.createSignatureFileElement();}}};PdfViewerBase.prototype.wireEvents=function(){var _this=this;this.viewerContainer.addEventListener('scroll',this.viewerContainerOnScroll,true);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.viewerContainer.addEventListener('touchmove',this.viewerContainerOnScroll,true);}this.viewerContainer.addEventListener('mousedown',this.viewerContainerOnMousedown);this.viewerContainer.addEventListener('mouseup',this.viewerContainerOnMouseup);this.viewerContainer.addEventListener("wheel",this.detectTouchPad,false);this.viewerContainer.addEventListener('wheel',this.viewerContainerOnMouseWheel);if(this.isMacSafari){window.addEventListener('gesturestart',function(e){return e.preventDefault();});window.addEventListener('gesturechange',function(e){return e.preventDefault();});window.addEventListener('gestureend',function(e){return e.preventDefault();});this.viewerContainer.addEventListener('gesturestart',this.handleMacGestureStart,false);this.viewerContainer.addEventListener('gesturechange',this.handleMacGestureChange,false);this.viewerContainer.addEventListener('gestureend',this.handleMacGestureEnd,false);}this.viewerContainer.addEventListener('mousemove',this.viewerContainerOnMousemove);this.viewerContainer.addEventListener('mouseleave',this.viewerContainerOnMouseLeave);this.viewerContainer.addEventListener('mouseenter',this.viewerContainerOnMouseEnter);this.viewerContainer.addEventListener('mouseover',this.viewerContainerOnMouseOver);this.viewerContainer.addEventListener('click',this.viewerContainerOnClick);this.viewerContainer.addEventListener('dblclick',this.viewerContainerOnClick);this.viewerContainer.addEventListener('dragstart',this.viewerContainerOnDragStart);this.pdfViewer.element.addEventListener('keydown',this.viewerContainerOnKeyDown);window.addEventListener('keydown',this.onWindowKeyDown);window.addEventListener('mouseup',this.onWindowMouseUp);window.addEventListener('touchend',this.onWindowTouchEnd);this.unload=function(){return _this.pdfViewerRunner.terminate();};this.unloadDocument(this);window.addEventListener('unload',this.unload);window.addEventListener('beforeunload',this.clearSessionStorage);window.addEventListener('resize',this.onWindowResize);// eslint-disable-next-line max-len
if(navigator.userAgent.indexOf('MSIE')!==-1||navigator.userAgent.indexOf('Edge')!==-1||navigator.userAgent.indexOf('Trident')!==-1){this.viewerContainer.addEventListener('pointerdown',this.viewerContainerOnPointerDown);this.viewerContainer.addEventListener('pointermove',this.viewerContainerOnPointerMove);this.viewerContainer.addEventListener('pointerup',this.viewerContainerOnPointerEnd);this.viewerContainer.addEventListener('pointerleave',this.viewerContainerOnPointerEnd);}else{this.viewerContainer.addEventListener('touchstart',this.viewerContainerOnTouchStart);if(this.isWebkitMobile&&this.isDeviceiOS){// eslint-disable-next-line max-len
this.viewerContainer.addEventListener("touchmove",function(e){if(e.scale!==1){e.preventDefault();}},{passive:false});}this.viewerContainer.addEventListener('touchmove',this.viewerContainerOnTouchMove);this.viewerContainer.addEventListener('touchend',this.viewerContainerOnTouchEnd);this.viewerContainer.addEventListener('touchleave',this.viewerContainerOnTouchEnd);this.viewerContainer.addEventListener('touchcancel',this.viewerContainerOnTouchEnd);}};PdfViewerBase.prototype.unWireEvents=function(){this.viewerContainer.removeEventListener('scroll',this.viewerContainerOnScroll,true);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.viewerContainer.removeEventListener('touchmove',this.viewerContainerOnScroll,true);}this.viewerContainer.removeEventListener('mousedown',this.viewerContainerOnMousedown);this.viewerContainer.removeEventListener('mouseup',this.viewerContainerOnMouseup);this.viewerContainer.removeEventListener("wheel",this.detectTouchPad,false);this.viewerContainer.removeEventListener('wheel',this.viewerContainerOnMouseWheel);if(this.isMacSafari){window.removeEventListener('gesturestart',function(e){return e.preventDefault();});window.removeEventListener('gesturechange',function(e){return e.preventDefault();});window.removeEventListener('gestureend',function(e){return e.preventDefault();});this.viewerContainer.removeEventListener('gesturestart',this.handleMacGestureStart,false);this.viewerContainer.removeEventListener('gesturechange',this.handleMacGestureChange,false);this.viewerContainer.removeEventListener('gestureend',this.handleMacGestureEnd,false);}this.viewerContainer.removeEventListener('mousemove',this.viewerContainerOnMousemove);this.viewerContainer.removeEventListener('mouseleave',this.viewerContainerOnMouseLeave);this.viewerContainer.removeEventListener('mouseenter',this.viewerContainerOnMouseEnter);this.viewerContainer.removeEventListener('mouseover',this.viewerContainerOnMouseOver);this.viewerContainer.removeEventListener('click',this.viewerContainerOnClick);this.viewerContainer.removeEventListener('dragstart',this.viewerContainerOnDragStart);this.viewerContainer.removeEventListener('contextmenu',this.viewerContainerOnContextMenuClick);this.pdfViewer.element.removeEventListener('keydown',this.viewerContainerOnKeyDown);window.addEventListener('keydown',this.onWindowKeyDown);window.removeEventListener('mouseup',this.onWindowMouseUp);window.removeEventListener('unload',this.unload);window.removeEventListener('resize',this.onWindowResize);// eslint-disable-next-line max-len
if(navigator.userAgent.indexOf('MSIE')!==-1||navigator.userAgent.indexOf('Edge')!==-1||navigator.userAgent.indexOf('Trident')!==-1){this.viewerContainer.removeEventListener('pointerdown',this.viewerContainerOnPointerDown);this.viewerContainer.removeEventListener('pointermove',this.viewerContainerOnPointerMove);this.viewerContainer.removeEventListener('pointerup',this.viewerContainerOnPointerEnd);this.viewerContainer.removeEventListener('pointerleave',this.viewerContainerOnPointerEnd);}else{this.viewerContainer.removeEventListener('touchstart',this.viewerContainerOnTouchStart);if(this.isWebkitMobile&&this.isDeviceiOS){// eslint-disable-next-line max-len
this.viewerContainer.removeEventListener("touchmove",function(e){if(e.scale!==1){e.preventDefault();}},false);}this.viewerContainer.removeEventListener('touchmove',this.viewerContainerOnTouchMove);this.viewerContainer.removeEventListener('touchend',this.viewerContainerOnTouchEnd);this.viewerContainer.removeEventListener('touchleave',this.viewerContainerOnTouchEnd);this.viewerContainer.removeEventListener('touchcancel',this.viewerContainerOnTouchEnd);}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.updateZoomValue=function(){if(this.pdfViewer.magnificationModule){if(this.pdfViewer.magnificationModule.isAutoZoom){this.pdfViewer.magnificationModule.fitToAuto();}else if(this.pdfViewer.zoomMode!=='FitToWidth'&&this.pdfViewer.magnificationModule.fitType==='fitToWidth'){this.pdfViewer.magnificationModule.fitToWidth();}else if(this.pdfViewer.magnificationModule.fitType==='fitToPage'){this.pdfViewer.magnificationModule.fitToPage();}}for(var i=0;i<this.pageCount;i++){this.applyLeftPosition(i);}};/**
     * @private
     * @param {any} annotation - The annotation type of any.
     * @returns {void}
     */ // eslint-disable-next-line
PdfViewerBase.prototype.updateFreeTextProperties=function(annotation){if(this.pdfViewer.enableShapeLabel){if(this.pdfViewer.shapeLabelSettings.fillColor){annotation.labelFillColor=this.pdfViewer.shapeLabelSettings.fillColor;}if(this.pdfViewer.shapeLabelSettings.fontColor){annotation.fontColor=this.pdfViewer.shapeLabelSettings.fontColor;}if(this.pdfViewer.shapeLabelSettings.fontSize){annotation.fontSize=this.pdfViewer.shapeLabelSettings.fontSize;}if(this.pdfViewer.shapeLabelSettings.fontFamily){annotation.fontFamily=this.pdfViewer.shapeLabelSettings.fontFamily;}if(this.pdfViewer.shapeLabelSettings.opacity){annotation.labelOpacity=this.pdfViewer.shapeLabelSettings.opacity;}if(this.pdfViewer.shapeLabelSettings.labelContent){annotation.labelContent=this.pdfViewer.shapeLabelSettings.labelContent;}}};/**
     * @private
     * @param {MouseEvent} event - The mouse event.
     * @returns {void}
     */ // eslint-disable-next-line
PdfViewerBase.prototype.mouseDownHandler=function(event){var isEnableDelete=false;var isCancel;var hidenItems=[];var disabledItems=[];if(event&&event.target){this.mouseDownEvent=event;this.contextMenuModule.currentTarget=event.target;}if(this.pdfViewer.annotationModule){isEnableDelete=this.pdfViewer.annotationModule.isEnableDelete();}if(!isEnableDelete){disabledItems.push('DeleteContext');}if(this.pdfViewer.contextMenuOption==='None'){isCancel=true;}else if(this.pdfViewer.textSelectionModule||this.isShapeBasedAnnotationsEnabled()){if(event){var isClickWithinSelectionBounds=this.isClickWithinSelectionBounds(event);// eslint-disable-next-line max-len
if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus){this.isFreeTextContextMenu=true;// eslint-disable-next-line max-len
if(this.pdfViewer.annotation.freeTextAnnotationModule&&!this.pdfViewer.annotation.freeTextAnnotationModule.isTextSelected){disabledItems.push('Cut');disabledItems.push('Copy');}// eslint-disable-next-line max-len
if(this.pdfViewer.annotation.freeTextAnnotationModule&&this.pdfViewer.annotation.freeTextAnnotationModule.selectedText===''){disabledItems.push('Paste');}hidenItems.push('HighlightContext');hidenItems.push('UnderlineContext');hidenItems.push('StrikethroughContext');hidenItems.push('ScaleRatio');hidenItems.push('Properties');hidenItems.push('Comment');hidenItems.push('DeleteContext');}else if(isClickWithinSelectionBounds&&this.pdfViewer.textSelectionModule){// eslint-disable-next-line max-len
if(!event.target.classList.contains('e-pv-maintaincontent')&&event.target.classList.contains('e-pv-text')||event.target.classList.contains('e-pv-text-layer')){if(this.checkIsNormalText()){isCancel=true;}// eslint-disable-next-line max-len
}else if((sf.base.Browser.isIE||sf.base.Browser.info.name==='edge')&&event.target.classList.contains('e-pv-page-container')){isCancel=true;}hidenItems.push('Cut');hidenItems.push('Paste');hidenItems.push('DeleteContext');hidenItems.push('ScaleRatio');hidenItems.push('Comment');hidenItems.push('Properties');// eslint-disable-next-line max-len
}else if(this.pdfViewer.selectedItems.annotations.length!==0&&(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='HandWrittenSignature'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureText'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureImage')){this.shapeMenuItems(hidenItems,disabledItems,false,true);// eslint-disable-next-line max-len
}else if(this.pdfViewer.selectedItems.annotations.length!==0&&this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType!=='Path'){this.shapeMenuItems(hidenItems,disabledItems,true);}else{// eslint-disable-next-line max-len
if(this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(event.target.classList.contains('e-pv-text-layer')||event.target.classList.contains('e-pv-text'))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){hidenItems.push('Properties');this.shapeMenuItems(hidenItems,disabledItems,false);// eslint-disable-next-line max-len
}else if(this.isCalibrateAnnotationModule()&&this.pdfViewer.annotationModule.measureAnnotationModule.currentAnnotationMode){hidenItems.push('HighlightContext');hidenItems.push('UnderlineContext');hidenItems.push('StrikethroughContext');hidenItems.push('Properties');disabledItems.push('Cut');disabledItems.push('Copy');disabledItems.push('Paste');disabledItems.push('DeleteContext');disabledItems.push('Comment');// eslint-disable-next-line max-len
}else if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){hidenItems.push('HighlightContext');hidenItems.push('UnderlineContext');hidenItems.push('StrikethroughContext');hidenItems.push('Properties');hidenItems.push('Cut');hidenItems.push('Copy');hidenItems.push('Paste');hidenItems.push('ScaleRatio');}else{isCancel=true;}}}else if(this.pdfViewer.textSelectionModule&&this.pdfViewer.contextMenuOption==='MouseUp'){hidenItems.push('Cut');hidenItems.push('Paste');hidenItems.push('DeleteContext');hidenItems.push('ScaleRatio');hidenItems.push('Comment');hidenItems.push('Properties');}else if(this.pdfViewer.selectedItems.annotations.length===0){hidenItems.push('Cut');hidenItems.push('Paste');hidenItems.push('DeleteContext');hidenItems.push('ScaleRatio');hidenItems.push('Properties');}if(!this.pdfViewer.enableCommentPanel){disabledItems.push('Comment');}}else{isCancel=true;}var eventArgs={hidenItems:hidenItems,disabledItems:disabledItems,isCancel:isCancel};this.pdfViewer._dotnetInstance.invokeMethodAsync('MouseDownHandler',eventArgs);};/**
     * @private
     * @param {string} selectedMenu - The selected menu.
     * @returns {void}
     */ // eslint-disable-next-line
PdfViewerBase.prototype.OnItemSelected=function(selectedMenu){// eslint-disable-next-line
var target=this.contextMenuModule.currentTarget;switch(selectedMenu){case this.pdfViewer.localeObj.getConstant('Copy'):this.CopyItemSelected();break;case this.pdfViewer.localeObj.getConstant('Highlight context'):this.TextMarkUpSelected('Highlight');break;case this.pdfViewer.localeObj.getConstant('Underline context'):this.TextMarkUpSelected('Underline');break;case this.pdfViewer.localeObj.getConstant('Strikethrough context'):this.TextMarkUpSelected('Strikethrough');break;case this.pdfViewer.localeObj.getConstant('Properties'):this.PropertiesItemSelected();break;case this.pdfViewer.localeObj.getConstant('Cut'):this.CutItemSelected(target);break;case this.pdfViewer.localeObj.getConstant('Paste'):this.pasteItemSelected(target);break;case this.pdfViewer.localeObj.getConstant('Delete Context'):this.DeleteItemSelected();break;case this.pdfViewer.localeObj.getConstant('Scale Ratio'):this.ScaleRatioSelected();break;case this.pdfViewer.localeObj.getConstant('Comment'):this.CommentItemSelected();break;default:break;}};PdfViewerBase.prototype.CommentItemSelected=function(){if(this.pdfViewer.annotation){this.pdfViewer.annotation.showCommentsPanel();if(this.pdfViewer.selectedItems.annotations.length!==0||this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){// eslint-disable-next-line
var currentAnnotation=void 0;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){currentAnnotation=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;}else{currentAnnotation=this.pdfViewer.selectedItems.annotations[0];}// eslint-disable-next-line
var accordionExpand=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+this.pdfViewer.currentPageNumber);if(accordionExpand){accordionExpand.ej2_instances[0].expandItem(true);}// eslint-disable-next-line
var commentsDiv=document.getElementById(currentAnnotation.annotName);if(commentsDiv){if(!commentsDiv.classList.contains('e-pv-comments-border')){commentsDiv.firstElementChild.click();}}}}};PdfViewerBase.prototype.ScaleRatioSelected=function(){if(this.isCalibrateAnnotationModule()){this.pdfViewer.annotation.measureAnnotationModule.createScaleRatioWindow();}};PdfViewerBase.prototype.DeleteItemSelected=function(){if(this.pdfViewer.formDesignerModule&&this.pdfViewer.selectedItems.formFields.length!==0){this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id);}else if(this.pdfViewer.annotation){this.pdfViewer.annotation.deleteAnnotation();}};// eslint-disable-next-line
PdfViewerBase.prototype.pasteItemSelected=function(target){// eslint-disable-next-line max-len
if(this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&target&&target.className==='free-text-input'&&target.tagName==='TEXTAREA'){this.pdfViewer.annotation.freeTextAnnotationModule.pasteSelectedText(target);this.contextMenuModule.close();}else{this.pdfViewer.paste();this.contextMenuModule.previousAction='Paste';}};// eslint-disable-next-line
PdfViewerBase.prototype.CutItemSelected=function(target){// eslint-disable-next-line max-len
if(this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&target&&target.className==='free-text-input'&&target.tagName==='TEXTAREA'){this.pdfViewer.annotation.freeTextAnnotationModule.cutSelectedText(target);this.contextMenuModule.close();}else if(this.pdfViewer.selectedItems.annotations.length===1){var pageIndex=this.pdfViewer.selectedItems.annotations[0].pageIndex;this.pdfViewer.cut();this.contextMenuModule.previousAction='Cut';}else if(this.pdfViewer.selectedItems.formFields.length===1){this.pdfViewer.cut();this.contextMenuModule.previousAction='Cut';}};PdfViewerBase.prototype.CopyItemSelected=function(){var isSkip=false;// eslint-disable-next-line max-len
if(this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus){this.pdfViewer.annotation.freeTextAnnotationModule.copySelectedText();this.contextMenuModule.close();isSkip=true;}else if(this.pdfViewer.textSelectionModule){this.pdfViewer.textSelectionModule.copyText();this.contextMenuModule.close();}if(this.pdfViewer.selectedItems.annotations.length&&!isSkip){this.pdfViewer.copy();this.contextMenuModule.previousAction='Copy';}else if(this.pdfViewer.selectedItems.formFields.length>0){this.pdfViewer.copy();this.contextMenuModule.previousAction='Copy';}};PdfViewerBase.prototype.PropertiesItemSelected=function(){// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations.length!==0&&(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Line'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='LineWidthArrowHead'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Distance')){this.pdfViewer.annotation.createPropertiesWindow();// eslint-disable-next-line max-len
}else if(this.pdfViewer.selectedItems.formFields.length!==0&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType){this.pdfViewer.formDesigner.createPropertiesWindow();}};PdfViewerBase.prototype.TextMarkUpSelected=function(type){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule){this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained=false;this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations(type);this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode=false;this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode='';this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained=true;}};PdfViewerBase.prototype.shapeMenuItems=function(hidenItems,disabledItems,enableProperties,isSignature){if(this.pdfViewer.annotation&&!this.pdfViewer.annotation.isShapeCopied){disabledItems.push('Paste');}hidenItems.push('HighlightContext');hidenItems.push('UnderlineContext');hidenItems.push('StrikethroughContext');hidenItems.push('ScaleRatio');if(enableProperties){// eslint-disable-next-line max-len
if(!(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Line'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='LineWidthArrowHead'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Distance')){hidenItems.push('Properties');}}else if(isSignature){hidenItems.push('Properties');hidenItems.push('Comment');}else{hidenItems.push('Cut');hidenItems.push('Copy');hidenItems.push('DeleteContext');hidenItems.push('Comment');}};PdfViewerBase.prototype.checkIsRtlText=function(text){// eslint-disable-next-line max-len
var ltrChars="A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF"+"\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF";var rtlChars="\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC";// eslint-disable-next-line
var rtlDirCheck=new RegExp('^[^'+ltrChars+']*['+rtlChars+']');return rtlDirCheck.test(text);};/**
     * @private
     * @param {any} event - Specifies the event.
     * @returns {boolean} - retruned the beolean value.
     */ // eslint-disable-next-line
PdfViewerBase.prototype.isClickWithinSelectionBounds=function(event){var isWithin=false;if(this.pdfViewer.textSelectionModule){var bounds=this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.currentPageNumber-1);if(bounds){var currentBound=bounds;if(this.getHorizontalValue(currentBound.left)<event.clientX&&this.getHorizontalValue(currentBound.right)>event.clientX&&this.getVerticalValue(currentBound.top)<event.clientY&&this.getVerticalValue(currentBound.bottom)>event.clientY){isWithin=true;}}if((sf.base.Browser.isIE||sf.base.Browser.info.name==='edge')&&bounds){isWithin=true;}}return isWithin;};PdfViewerBase.prototype.getHorizontalClientValue=function(value){var pageDiv=this.getElement('_pageDiv_'+(this.currentPageNumber-1));var pageBounds=pageDiv.getBoundingClientRect();return value-pageBounds.left;};PdfViewerBase.prototype.getVerticalClientValue=function(value){var pageDiv=this.getElement('_pageDiv_'+(this.currentPageNumber-1));var pageBounds=pageDiv.getBoundingClientRect();return value-pageBounds.top;};PdfViewerBase.prototype.getHorizontalValue=function(value){var pageDiv=this.getElement('_pageDiv_'+(this.currentPageNumber-1));var pageBounds=pageDiv.getBoundingClientRect();return value*this.getZoomFactor()+pageBounds.left;};PdfViewerBase.prototype.getVerticalValue=function(value){var pageDiv=this.getElement('_pageDiv_'+(this.currentPageNumber-1));var pageBounds=pageDiv.getBoundingClientRect();return value*this.getZoomFactor()+pageBounds.top;};/**
     * @private
     * @returns {boolean} - retruned the beolean value.
     */PdfViewerBase.prototype.checkIsNormalText=function(){var isText=true;var currentText='';// eslint-disable-next-line
var textSelectionModule=this.pdfViewer.textSelectionModule;if(textSelectionModule&&textSelectionModule.selectionRangeArray&&textSelectionModule.selectionRangeArray.length===1){currentText=textSelectionModule.selectionRangeArray[0].textContent;}else if(window.getSelection()&&window.getSelection().anchorNode){currentText=window.getSelection().toString();}if(currentText!==''&&this.checkIsRtlText(currentText)){isText=false;}return isText;};PdfViewerBase.prototype.DeleteKeyPressed=function(event){if(this.pdfViewer.formDesignerModule&&this.pdfViewer.designerMode&&this.pdfViewer.selectedItems.formFields.length!==0){this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id);}else if(this.pdfViewer.annotation&&!this.pdfViewer.designerMode){if(this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()){this.pdfViewer.annotationModule.deleteAnnotation();}if(this.pdfViewer.selectedItems.annotations.length>0){// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[0];var isReadOnly=true;var type=annotation.shapeAnnotationType;if(type==='Path'||annotation.formFieldAnnotationType==='SignatureField'||annotation.formFieldAnnotationType==='InitialField'||type==='HandWrittenSignature'||type==='SignatureText'||type==='SignatureImage'){var inputFields=document.getElementById(annotation.id);if(inputFields&&inputFields.disabled){isReadOnly=true;}}if(!isReadOnly){if(annotation.annotationSettings&&annotation.annotationSettings.isLock){if(this.pdfViewer.annotationModule.checkAllowedInteractions('Delete',annotation)){this.pdfViewer.remove(annotation);this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(event));}}else{this.pdfViewer.remove(annotation);this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(event));}}}}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.initiatePanning=function(){this.isPanMode=true;this.textLayer.modifyTextCursor(false);this.disableTextSelectionMode();if(this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule){this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems();}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.initiateTextSelectMode=function(){this.isPanMode=false;if(this.viewerContainer){this.viewerContainer.style.cursor='auto';if(this.pdfViewer.textSelectionModule){this.textLayer.modifyTextCursor(true);this.pdfViewer.textSelectionModule.enableTextSelectionMode();}if((!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)&&!sf.base.isBlazor()){this.enableAnnotationAddTools(true);}}};/**
     * @private
     * @returns {void}
    */PdfViewerBase.prototype.initiateTextSelection=function(){if(this.pdfViewer.toolbar&&!this.pdfViewer.toolbar.isSelectionToolDisabled){this.initiateTextSelectMode();this.pdfViewer.toolbar.updateInteractionTools(true);}};PdfViewerBase.prototype.enableAnnotationAddTools=function(isEnable){if(this.pdfViewer.toolbarModule){if(this.pdfViewer.toolbarModule.annotationToolbarModule){this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(isEnable);}}};PdfViewerBase.prototype.applySelection=function(){if(window.getSelection().anchorNode!==null){this.pdfViewer.textSelectionModule.applySpanForSelection();}this.isViewerContainerDoubleClick=false;};// eslint-disable-next-line
PdfViewerBase.prototype.isDesignerMode=function(target){var isDesignerMode=false;if(this.pdfViewer.selectedItems.annotations.length!==0&&(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='HandWrittenSignature'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureText'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureImage')){isDesignerMode=true;// eslint-disable-next-line max-len
}else if(this.pdfViewer.selectedItems.annotations.length!==0&&this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType!=='Path'){isDesignerMode=true;// eslint-disable-next-line max-len
}else if(this.pdfViewer.selectedItems.formFields.length!==0&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&this.pdfViewer.designerMode){isDesignerMode=true;}else{// eslint-disable-next-line max-len
if(this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(target.classList.contains('e-pv-text-layer')||// eslint-disable-next-line max-len
target.classList.contains('e-pv-text'))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){isDesignerMode=true;// eslint-disable-next-line max-len
}else if(this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isShapeCopied&&(target.classList.contains('e-pv-text-layer')||target.classList.contains('e-pv-text'))){isDesignerMode=true;}}this.designerModetarget=target;return isDesignerMode;};PdfViewerBase.prototype.handleTaps=function(touchPoints,event){var _this=this;//EJ2CORE-813 - Implemented focus removing logic for iOS devices
if(this.isDeviceiOS){var obj=findActiveElement(event,this,this.pdfViewer);// eslint-disable-next-line
var isRemoveFocus_1=!this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot&&(obj&&this.pdfViewer.selectedItems.annotations[0]?obj.id!==this.pdfViewer.selectedItems.annotations[0].id:true)&&document.activeElement.classList.contains('free-text-input')&&this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations);if(!this.singleTapTimer){this.singleTapTimer=setTimeout(function(){if(isRemoveFocus_1){_this.pdfViewer.clearSelection(_this.pdfViewer.selectedItems.annotations[0].pageIndex);_this.focusViewerContainer(true);}_this.onSingleTap(touchPoints);// eslint-disable-next-line
},300);this.tapCount++;}else{if(this.pdfViewer.enablePinchZoom){this.tapCount++;clearTimeout(this.singleTapTimer);this.singleTapTimer=null;this.onDoubleTap(touchPoints);}}}else{if(!this.singleTapTimer){this.singleTapTimer=setTimeout(function(){_this.onSingleTap(touchPoints);// eslint-disable-next-line
},300);this.tapCount++;}else{if(this.pdfViewer.enablePinchZoom){this.tapCount++;clearTimeout(this.singleTapTimer);this.singleTapTimer=null;this.onDoubleTap(touchPoints);}}}};PdfViewerBase.prototype.handleTextBoxTaps=function(touchPoints){var _this=this;setTimeout(function(){_this.inputTapCount=0;},300);this.inputTapCount++;if(this.isDeviceiOS){// eslint-disable-next-line
this.onTextBoxDoubleTap(touchPoints);}else{var timer=setTimeout(function(){_this.onTextBoxDoubleTap(touchPoints);},200);}if(this.inputTapCount>2){this.inputTapCount=0;}};PdfViewerBase.prototype.onTextBoxDoubleTap=function(touches){var target=touches[0].target;if(this.inputTapCount===2){if(this.pdfViewer.selectedItems.annotations.length!==0){if(this.pdfViewer.annotationModule){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];if(this.isDeviceiOS&&document.activeElement.classList.contains('free-text-input')&&this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations)){this.focusViewerContainer(true);}this.pdfViewer.annotationModule.annotationSelect(currentAnnotation.annotName,currentAnnotation.pageIndex,currentAnnotation,null,true);}if(this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations)===true){var elmtPosition={};elmtPosition.x=this.pdfViewer.selectedItems.annotations[0].bounds.x;elmtPosition.y=this.pdfViewer.selectedItems.annotations[0].bounds.y;// eslint-disable-next-line max-len
this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(elmtPosition,this.pdfViewer.selectedItems.annotations[0]);}else if(this.pdfViewer.selectedItems.annotations[0].enableShapeLabel===true){var elmtPosition={};elmtPosition.x=this.pdfViewer.selectedItems.annotations[0].bounds.x;elmtPosition.y=this.pdfViewer.selectedItems.annotations[0].bounds.y;this.pdfViewer.annotation.inputElementModule.editLabel(elmtPosition,this.pdfViewer.selectedItems.annotations[0]);}}}};PdfViewerBase.prototype.onSingleTap=function(touches){var target=touches[0].target;var isFormfields=false;this.singleTapTimer=null;if(target&&(target.classList.contains('e-pdfviewer-formFields')||target.classList.contains('e-pdfviewer-ListBox')||target.classList.contains('e-pdfviewer-signatureformfields'))){isFormfields=true;}if(!this.isLongTouchPropagated&&!this.navigationPane.isNavigationToolbarVisible&&!isFormfields){if(this.pdfViewer.toolbarModule){if(this.touchClientX>=touches[0].clientX-10&&this.touchClientX<=touches[0].clientX+10&&this.touchClientY>=touches[0].clientY-10&&this.touchClientY<=touches[0].clientY+10){if(!this.isTapHidden){if(sf.base.isBlazor()){// eslint-disable-next-line max-len
this.viewerContainer.scrollTop-=this.pdfViewer.element.querySelector('.e-pv-mobile-toolbar').clientHeight*this.getZoomFactor();}if(this.pdfViewer.toolbar.moreDropDown){var dropDown=this.getElement('_more_option-popup');if(dropDown.firstElementChild){dropDown.classList.remove('e-popup-open');dropDown.classList.add('e-popup-close');dropDown.removeChild(dropDown.firstElementChild);}}}else{if(sf.base.isBlazor()){// eslint-disable-next-line max-len
this.viewerContainer.scrollTop+=this.pdfViewer.element.querySelector('.e-pv-mobile-toolbar').clientHeight*this.getZoomFactor();}}if(this.isTapHidden&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.mobileScrollerContainer.style.display='';this.updateMobileScrollerPosition();// eslint-disable-next-line max-len
}else if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.getSelectTextMarkupCurrentPage()==null){this.mobileScrollerContainer.style.display='none';}if(this.getSelectTextMarkupCurrentPage()==null){if(!sf.base.isBlazor()){if(this.pdfViewer.enableToolbar){this.pdfViewer.toolbarModule.showToolbar(true);}}else{//this.pdfViewer._dotnetInstance.invokeMethodAsync('TapOnMobileDevice', this.isTapHidden);
this.blazorUIAdaptor.tapOnMobileDevice(this.isTapHidden);}this.isTapHidden=!this.isTapHidden;}}this.tapCount=0;}}};PdfViewerBase.prototype.onDoubleTap=function(touches){var target=touches[0].target;var isFormfields=false;if(target&&(target.classList.contains('e-pdfviewer-formFields')||target.classList.contains('e-pdfviewer-ListBox')||target.classList.contains('e-pdfviewer-signatureformfields'))){isFormfields=true;}if(this.tapCount===2&&!isFormfields){this.tapCount=0;/**
             * Sometimes the values gets differ by some decimal points. So converted the decimal points values to Integer values.
             */ // eslint-disable-next-line
if(this.touchClientX>=parseInt((touches[0].clientX-10).toString())&&this.touchClientX<=touches[0].clientX+10&&this.touchClientY>=touches[0].clientY-10&&this.touchClientY<=touches[0].clientY+30){if(this.pdfViewer.magnification&&this.pdfViewer.selectedItems.annotations.length!==1){this.pdfViewer.magnification.onDoubleTapMagnification();}this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,0);this.isTapHidden=false;clearTimeout(this.singleTapTimer);this.singleTapTimer=null;}}};PdfViewerBase.prototype.preventTouchEvent=function(event){if(this.pdfViewer.textSelectionModule){// eslint-disable-next-line max-len
if(!this.isPanMode&&this.pdfViewer.enableTextSelection&&!this.isTextSelectionDisabled&&this.getSelectTextMarkupCurrentPage()==null){if(!(this.isWebkitMobile&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode)){event.preventDefault();event.stopPropagation();}}}};PdfViewerBase.prototype.renderStampAnnotation=function(event){if(this.pdfViewer.annotation){var zoomFactor=this.getZoomFactor();var pageIndex=this.pdfViewer.annotation.getEventPageNumber(event);var pageDiv=this.getElement('_pageDiv_'+pageIndex);if(this.pdfViewer.enableStampAnnotations){var stampModule=this.pdfViewer.annotationModule.stampAnnotationModule;if(stampModule&&stampModule.isStampAnnotSelected){if(pageDiv){var pageCurrentRect=pageDiv.getBoundingClientRect();// eslint-disable-next-line max-len
if(sf.base.Browser.isDevice&&event.type==='touchend'&&this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType==='Image'){var currentStampObj=this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation;currentStampObj.pageIndex=pageIndex;currentStampObj.bounds.x=(event.changedTouches[0].clientX-pageCurrentRect.left)/zoomFactor;currentStampObj.bounds.y=(event.changedTouches[0].clientY-pageCurrentRect.top)/zoomFactor;stampModule.updateDeleteItems(pageIndex,currentStampObj,currentStampObj.opacity);this.pdfViewer.add(currentStampObj);}else{// eslint-disable-next-line max-len
stampModule.renderStamp((event.changedTouches[0].clientX-pageCurrentRect.left)/zoomFactor,(event.changedTouches[0].clientY-pageCurrentRect.top)/zoomFactor,null,null,pageIndex,null,null,null,null);}stampModule.isStampAnnotSelected=false;}}this.pdfViewer.annotation.onAnnotationMouseDown();}if(this.pdfViewer.enableHandwrittenSignature&&this.isSignatureAdded&&pageDiv){var pageCurrentRect=pageDiv.getBoundingClientRect();this.currentSignatureAnnot.pageIndex=pageIndex;// eslint-disable-next-line max-len
this.signatureModule.renderSignature((event.changedTouches[0].clientX-pageCurrentRect.left)/zoomFactor,(event.changedTouches[0].clientY-pageCurrentRect.top)/zoomFactor);this.isSignatureAdded=false;}if(event.touches.length===1&&this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()){this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);}}};// eslint-disable-next-line
PdfViewerBase.prototype.initPageDiv=function(pageValues){if(!sf.base.isBlazor()){if(this.pdfViewer.toolbarModule){this.pdfViewer.toolbarModule.updateTotalPage();}}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.mobiletotalPageContainer){this.mobiletotalPageContainer.innerHTML=this.pageCount.toString();if(this.pageNoContainer){this.pageNoContainer.innerHTML='(1-'+this.pageCount.toString()+')';}}if(this.pageCount>0){var topValue=0;var pageLimit=this.pageCount;this.isMixedSizeDocument=false;var isPortrait=false;var isLandscape=false;var differentPageSize=false;for(var i=0;i<pageLimit;i++){if(_typeof(pageValues.pageSizes[i])!=='object'){var pageSize=pageValues.pageSizes[i].split(',');if(pageValues.pageSizes[i-1]!==null&&i!==0){var previousPageHeight=pageValues.pageSizes[i-1].split(',');topValue=this.pageGap+parseFloat(previousPageHeight[1])+topValue;}else{topValue=this.pageGap;}var size={width:parseFloat(pageSize[0]),height:parseFloat(pageSize[1]),top:topValue};this.pageSize.push(size);}else{if(pageValues.pageSizes[i-1]!==null&&i!==0){// eslint-disable-next-line
var previousPageHeight=pageValues.pageSizes[i-1];topValue=this.pageGap+parseFloat(previousPageHeight.Height)+topValue;}else{topValue=this.pageGap;}var size={width:pageValues.pageSizes[i].Width,height:pageValues.pageSizes[i].Height,top:topValue};this.pageSize.push(size);}if(this.pageSize[i].height>this.pageSize[i].width){isPortrait=true;}if(this.pageSize[i].width>this.pageSize[i].height){isLandscape=true;}if(i>0&&this.pageSize[i].width!==this.pageSize[i-1].width){differentPageSize=true;}var pageWidth=this.pageSize[i].width;if(pageWidth>this.highestWidth){this.highestWidth=pageWidth;}var pageHeight=this.pageSize[i].height;if(pageHeight>this.highestHeight){this.highestHeight=pageHeight;}}if(isPortrait&&isLandscape||differentPageSize){this.isMixedSizeDocument=true;}var limit=this.pageCount<10?this.pageCount:10;for(var i=0;i<limit;i++){this.renderPageContainer(i,this.getPageWidth(i),this.getPageHeight(i),this.getPageTop(i));}// eslint-disable-next-line max-len
this.pageContainer.style.height=this.getPageTop(this.pageSize.length-1)+this.getPageHeight(this.pageSize.length-1)+'px';this.pageContainer.style.position='relative';if(this.pageLimit===100){var pageDiv=this.getElement('_pageDiv_'+this.pageLimit);if(pageDiv===null&&this.pageLimit<this.pageCount){Promise.all([this.renderPagesVirtually()]);}}}};PdfViewerBase.prototype.renderElementsVirtualScroll=function(pageNumber){var lowerLimit=1;if(this.pageStopValue<=200){lowerLimit=4;}else{lowerLimit=2;}var pageValue=pageNumber+lowerLimit;if(pageValue>this.pageCount){pageValue=this.pageCount;}for(var i=pageNumber-1;i<=pageValue;i++){if(i!==-1){this.renderPageElement(i);}}var lowerPageValue=pageNumber-3;if(lowerPageValue<0){lowerPageValue=0;}for(var i=pageNumber-1;i>=lowerPageValue;i--){if(i!==-1){this.renderPageElement(i);}}for(var j=0;j<this.pageCount;j++){if(!(lowerPageValue<=j&&j<=pageValue)){var pageDiv=this.getElement('_pageDiv_'+j);var pageCanvas=this.getElement('_pageCanvas_'+j);var textLayer=this.getElement('_textLayer_'+j);if(pageCanvas){pageCanvas.parentNode.removeChild(pageCanvas);if(textLayer){if(this.pdfViewer.textSelectionModule&&textLayer.childNodes.length!==0&&!this.isTextSelectionDisabled){this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(j,true);}textLayer.parentNode.removeChild(textLayer);}var indexInArray=this.renderedPagesList.indexOf(j);if(indexInArray!==-1){this.renderedPagesList.splice(indexInArray,1);}}if(pageDiv){pageDiv.parentNode.removeChild(pageDiv);var indexInArray=this.renderedPagesList.indexOf(j);if(indexInArray!==-1){this.renderedPagesList.splice(indexInArray,1);}}}}if(sf.base.isBlazor())this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateCurrentPageNumber',this.currentPageNumber);};PdfViewerBase.prototype.renderPageElement=function(i){var pageDiv=this.getElement('_pageDiv_'+i);var canvas=this.getElement('_pageCanvas_'+i);if(canvas==null&&pageDiv==null&&i<this.pageSize.length){// eslint-disable-next-line
this.renderPageContainer(i,this.getPageWidth(i),this.getPageHeight(i),this.getPageTop(i));}};PdfViewerBase.prototype.renderPagesVirtually=function(){return __awaiter$2(this,void 0,void 0,function(){var proxy;var _this=this;return __generator$2(this,function(_a){proxy=this;setTimeout(function(){_this.initiateRenderPagesVirtually(proxy);},500);return[2/*return*/];});});};// eslint-disable-next-line
PdfViewerBase.prototype.initiateRenderPagesVirtually=function(proxy){var jsonObject={hashId:proxy.hashId,isClientsideLoading:true,isCompletePageSizeNotReceived:true,action:'VirtualLoad',elementId:proxy.pdfViewer.element.id,uniqueId:proxy.documentId,password:proxy.passwordData};if(proxy.jsonDocumentId){// eslint-disable-next-line
jsonObject.documentId=proxy.jsonDocumentId;}this.virtualLoadRequestHandler=new AjaxHandler(this.pdfViewer);this.virtualLoadRequestHandler.url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.load;this.virtualLoadRequestHandler.responseType='json';this.virtualLoadRequestHandler.mode=true;this.virtualLoadRequestHandler.send(jsonObject);// eslint-disable-next-line
this.virtualLoadRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){proxy.onControlError(500,data,'VirtualLoad');}}}if(data){while(_typeof(data)!=='object'){data=JSON.parse(data);}if(proxy.documentId===data.uniqueId){proxy.pdfViewer.fireAjaxRequestSuccess('VirtualLoad',data);// eslint-disable-next-line
var pageValues=data;if(proxy.pageSize[proxy.pageLimit-1]){var topValue=proxy.pageSize[proxy.pageLimit-1].top;for(var i=proxy.pageLimit;i<proxy.pageCount;i++){if(_typeof(pageValues.pageSizes[i])!=='object'){var pageSize=pageValues.pageSizes[i].split(',');if(proxy.pageSize[i-1]!==null&&i!==0){var previousPageHeight=proxy.pageSize[i-1].height;topValue=proxy.pageGap+parseFloat(previousPageHeight)+topValue;}var size={width:parseFloat(pageSize[0]),height:parseFloat(pageSize[1]),top:topValue};proxy.pageSize.push(size);}else{if(proxy.pageSize[i-1]!==null&&i!==0){var previousPageHeight=proxy.pageSize[i-1].height;topValue=proxy.pageGap+parseFloat(previousPageHeight)+topValue;}var size={width:parseFloat(pageValues.pageSizes[i].Width),height:parseFloat(pageValues.pageSizes[i].Height),top:topValue};proxy.pageSize.push(size);}}// eslint-disable-next-line max-len
proxy.pageContainer.style.height=proxy.getPageTop(proxy.pageSize.length-1)+proxy.getPageHeight(proxy.pageSize.length-1)+'px';// eslint-disable-next-line
var pageData=window.sessionStorage.getItem(proxy.documentId+'_pagedata');if(proxy.pageCount>100){proxy.pdfViewer.fireDocumentLoad(pageData);var linkAnnotationModule=proxy.pdfViewer.linkAnnotationModule;if(linkAnnotationModule&&linkAnnotationModule.linkAnnotation&&linkAnnotationModule.linkAnnotation.length>0&&linkAnnotationModule.linkPage.length>0){linkAnnotationModule.renderDocumentLink(linkAnnotationModule.linkAnnotation,linkAnnotationModule.linkPage,linkAnnotationModule.annotationY,proxy.currentPageNumber-1);}}}}}};// eslint-disable-next-line
this.virtualLoadRequestHandler.onFailure=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText);};// eslint-disable-next-line
this.virtualLoadRequestHandler.onError=function(result){proxy.openNotificationPopup();proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText);};};// eslint-disable-next-line
PdfViewerBase.prototype.tileRenderPage=function(data,pageIndex){var _this=this;var proxy=null;proxy=this;if(data&&this.pageSize[pageIndex]){var pageWidth=this.getPageWidth(pageIndex);var pageHeight=this.getPageHeight(pageIndex);// eslint-disable-next-line max-len
var canvas_1=this.getElement('_pageCanvas_'+pageIndex);var pageDiv_1=this.getElement('_pageDiv_'+pageIndex);var tileX=data.tileX?data.tileX:0;var tileY=data.tileY?data.tileY:0;if(pageDiv_1){pageDiv_1.style.width=pageWidth+'px';pageDiv_1.style.height=pageHeight+'px';pageDiv_1.style.background='#fff';pageDiv_1.style.top=this.getPageTop(pageIndex)+'px';if(this.pdfViewer.enableRtl){pageDiv_1.style.right=this.updateLeftPosition(pageIndex)+'px';}else{pageDiv_1.style.left=this.updateLeftPosition(pageIndex)+'px';}}if(canvas_1){canvas_1.style.background='#fff';}var imageData=data['image'];var zoomFactor=this.retrieveCurrentZoomFactor();if(this.isReRenderRequired){if(data.zoomFactor){zoomFactor=data.zoomFactor;}var currentString=this.documentId+'_'+pageIndex+'_'+zoomFactor+'_'+data.tileX+'_'+data.tileY;// eslint-disable-next-line max-len
this.tilerequestLists.push(currentString);// eslint-disable-next-line
var matrix=data['transformationMatrix'];// eslint-disable-next-line
var width=data['width'];if(imageData){var tileX_1=data.tileX?data.tileX:0;var tileY_1=data.tileY?data.tileY:0;var scaleFactor=!sf.base.isNullOrUndefined(data.scaleFactor)?data.scaleFactor:1.5;var image=document.getElementById(this.pdfViewer.dataId+'_tileimg_'+pageIndex+'_'+this.getZoomFactor()+'_'+tileX_1+'_'+tileY_1);if(!image){image=new Image();image.id=this.pdfViewer.dataId+'_tileimg_'+pageIndex+'_'+this.getZoomFactor()+'_'+tileX_1+'_'+tileY_1;pageDiv_1.append(image);}image.src=imageData;image.onload=function(){if(data.noTileX===data.tileX+1&&data.noTileY===data.tileY+1){proxy.showPageLoadingIndicator(pageIndex,false);_this.blazorUIAdaptor.zoomDropDownElement.classList.remove(_this.blazorUIAdaptor.cssClass);_this.blazorUIAdaptor.zoomInElement.classList.remove(_this.blazorUIAdaptor.cssClass);_this.blazorUIAdaptor.zommOutElement.classList.remove(_this.blazorUIAdaptor.cssClass);}proxy.tileRenderCount=proxy.tileRenderCount+1;if(tileX_1===0&&tileY_1===0){if(pageIndex===0&&_this.isDocumentLoaded){proxy.renderPDFInformations();proxy.isInitialLoaded=true;// eslint-disable-next-line
var pageData=window.sessionStorage.getItem(proxy.documentId+'_pagedata');if(proxy.pageCount<=100){proxy.pdfViewer.fireDocumentLoad(pageData);}proxy.isDocumentLoaded=false;if(proxy.pdfViewer.textSearch&&proxy.pdfViewer.isExtractText){proxy.pdfViewer.textSearchModule.getPDFDocumentTexts();}}}if(proxy.tileRenderCount===proxy.tileRequestCount){if(proxy.isTextMarkupAnnotationModule()){proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(pageIndex);}canvas_1.style.display='none';canvas_1.src='#';var oldPageDiv=document.querySelectorAll('img[id*="'+proxy.pdfViewer.element.id+'_oldCanvas"]');for(var i=0;i<oldPageDiv.length;i++){pageDiv_1.removeChild(oldPageDiv[i]);}proxy.isTileImageRendered=false;proxy.tileRenderCount=0;if(proxy.pdfViewer.magnificationModule){proxy.pdfViewer.magnificationModule.rerenderCountIncrement();}proxy.isDrawnCompletely=true;}};var currentImageWidth=width*this.getZoomFactor()/zoomFactor/scaleFactor;var matrixElements=matrix.Elements?matrix.Elements:matrix.Values;var currentImageTop=matrixElements[5]*this.getZoomFactor()/zoomFactor/scaleFactor;var currentImageLeft=matrixElements[4]*this.getZoomFactor()/zoomFactor/scaleFactor;image.width=currentImageWidth;image.style.width=currentImageWidth+'px';image.style.top=currentImageTop+'px';image.style.left=currentImageLeft+'px';image.style.position='absolute';}if(tileX===0&&tileY===0){this.onPageRender(data,pageIndex,pageDiv_1);}}else{var oldCanvases=document.querySelectorAll('img[id*="'+proxy.pdfViewer.element.id+'_tileimg_'+pageIndex+'_"]');for(var l=0;l<oldCanvases.length;l++){var tileImgId=oldCanvases[l].id.split('_');var zoomFactor_1=proxy.retrieveCurrentZoomFactor();// eslint-disable-next-line
var tileData=JSON.parse(proxy.getStoredTileImageDetails(pageIndex,parseFloat(tileImgId[tileImgId.length-2]),parseFloat(tileImgId[tileImgId.length-1]),zoomFactor_1));if(tileData&&tileData.zoomFactor){zoomFactor_1=tileData.zoomFactor;}if(parseFloat(tileImgId[tileImgId.length-4])===pageIndex){var node=oldCanvases[l];// Make sure it's really an Element
if(node.nodeType==Node.ELEMENT_NODE){node.onload=function(){proxy.showPageLoadingIndicator(pageIndex,false);proxy.tileRenderCount=proxy.tileRenderCount+1;if(tileX_2===0&&tileY_2===0){if(pageIndex===0&&_this.isDocumentLoaded){_this.renderPDFInformations();_this.isInitialLoaded=true;// eslint-disable-next-line
var pageData=window.sessionStorage.getItem(proxy.documentId+'_pagedata');if(proxy.pageCount<=100){proxy.pdfViewer.fireDocumentLoad(pageData);}proxy.isDocumentLoaded=false;if(proxy.pdfViewer.textSearch&&proxy.pdfViewer.isExtractText){proxy.pdfViewer.textSearchModule.getPDFDocumentTexts();}}}if(proxy.tileRenderCount===proxy.tileRequestCount){canvas_1.style.display='none';canvas_1.src='#';if(proxy.isTextMarkupAnnotationModule()){proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(pageIndex);}var oldPageDiv=document.querySelectorAll('img[id*="'+proxy.pdfViewer.element.id+'_oldCanvas"]');for(var i=0;i<oldPageDiv.length;i++){pageDiv_1.removeChild(oldPageDiv[i]);}proxy.isTileImageRendered=false;proxy.tileRenderCount=0;if(proxy.pdfViewer.magnificationModule){proxy.pdfViewer.magnificationModule.rerenderCountIncrement();}proxy.isDrawnCompletely=true;}};if(tileData)node.src=tileData.image;}}}var tileX_2=data.tileX?data.tileX:0;var tileY_2=data.tileY?data.tileY:0;if(tileX_2===0&&tileY_2===0){this.onPageRender(data,pageIndex,pageDiv_1);}}}};PdfViewerBase.prototype.renderTileCanvas=function(pageWidth,pageHeight,pageIndex,pageDiv,zoomFactor,scaleFactor){var pageCanvas=this.getElement('_pageTileCanvas_'+pageIndex);if(!pageCanvas){pageCanvas=sf.base.createElement('canvas',{id:this.pdfViewer.dataId+'_pageTileCanvas_'+pageIndex,className:'e-pv-pageTile-canvas'});pageCanvas.style.width=pageWidth+'px';pageCanvas.style.height=pageHeight+'px';pageCanvas.style.display='none';pageCanvas.style.backgroundColor='#fff';if(this.isMixedSizeDocument&&this.highestWidth>0){pageCanvas.style.marginLeft='auto';pageCanvas.style.marginRight='auto';}pageDiv.appendChild(pageCanvas);}return pageCanvas;};PdfViewerBase.prototype.calculateImageWidth=function(pageWidth,zoomFactor,scaleFactor,imageWidth){var width=pageWidth/this.getZoomFactor()*zoomFactor*scaleFactor;// eslint-disable-next-line
if(parseInt(imageWidth.toString())===parseInt(width.toString())){imageWidth=width;}imageWidth=imageWidth*this.getZoomFactor()/zoomFactor;return imageWidth;};// eslint-disable-next-line
PdfViewerBase.prototype.renderPage=function(data,pageIndex){var _this=this;var proxy=this;if(data&&this.pageSize[pageIndex]){var pageWidth=this.getPageWidth(pageIndex);var pageHeight=this.getPageHeight(pageIndex);// eslint-disable-next-line max-len
var canvas_2=this.getElement('_pageCanvas_'+pageIndex);var pageDiv_2=this.getElement('_pageDiv_'+pageIndex);if(pageDiv_2){pageDiv_2.style.width=pageWidth+'px';pageDiv_2.style.height=pageHeight+'px';pageDiv_2.style.top=this.getPageTop(pageIndex)+'px';if(this.pdfViewer.enableRtl){pageDiv_2.style.right=this.updateLeftPosition(pageIndex)+'px';}else{pageDiv_2.style.left=this.updateLeftPosition(pageIndex)+'px';}}if(canvas_2){canvas_2.style.background='#fff';canvas_2.style.display='block';canvas_2.style.width=pageWidth+'px';canvas_2.style.height=pageHeight+'px';if(pageWidth<parseFloat(pageDiv_2.style.width)){pageDiv_2.style.boxShadow='none';}// eslint-disable-next-line
var imageData=data['image'];if(imageData){canvas_2.onload=function(){var oldCanvases=document.querySelectorAll('img[id*="'+proxy.pdfViewer.element.id+'_tileimg_'+pageIndex+'_"]');var pageCanvas=proxy.getElement('_pageDiv_'+pageIndex);for(var i=0;i<oldCanvases.length;i++){var tileImgId=oldCanvases[i].id.split('_');if(parseFloat(tileImgId[tileImgId.length-3])!=proxy.getZoomFactor())pageCanvas.removeChild(oldCanvases[i]);}var oldPageDiv=document.querySelectorAll('img[id*="'+proxy.pdfViewer.element.id+'_oldCanvas"]');for(var i=0;i<oldPageDiv.length;i++){pageDiv_2.removeChild(oldPageDiv[i]);}if(_this.pdfViewer.magnificationModule){_this.pdfViewer.magnificationModule.rerenderCountIncrement();}_this.showPageLoadingIndicator(pageIndex,false);if(pageIndex===0&&_this.isDocumentLoaded){_this.renderPDFInformations();_this.isInitialLoaded=true;// eslint-disable-next-line
var pageData=window.sessionStorage.getItem(_this.documentId+'_pagedata');_this.pdfViewer.fireDocumentLoad(pageData);_this.isDocumentLoaded=false;if(_this.pdfViewer.textSearch&&_this.pdfViewer.isExtractText){_this.pdfViewer.textSearchModule.getPDFDocumentTexts();}}if(_this.pdfViewer.magnificationModule){_this.pdfViewer.magnificationModule.pushImageObjects(canvas_2);}};canvas_2.src=imageData;}this.onPageRender(data,pageIndex,pageDiv_2);}}};// eslint-disable-next-line
PdfViewerBase.prototype.onPageRender=function(data,pageIndex,pageDiv){// eslint-disable-next-line
var aElement=pageDiv.getElementsByTagName('a');var isAnnotationRendered=false;if(this.pdfViewer.textSearchModule||this.pdfViewer.textSelectionModule||this.pdfViewer.annotationModule){this.renderTextContent(data,pageIndex);}if(this.pdfViewer.formFieldsModule&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed){this.pdfViewer.formFieldsModule.renderFormFields(pageIndex);}if(this.pdfViewer.formDesignerModule&&!this.isDocumentLoaded){this.pdfViewer.formDesignerModule.rerenderFormFields(pageIndex);}if(this.pdfViewer.formFieldsModule&&!this.isDocumentLoaded){this.pdfViewer.formFieldsModule.renderFormFields(pageIndex);}if(this.pdfViewer.formDesignerModule&&this.isDocumentLoaded&&this.pdfViewer.magnificationModule.isFormFieldPageZoomed){this.pdfViewer.formFieldsModule.renderFormFields(pageIndex);this.pdfViewer.magnificationModule.isFormFieldPageZoomed=false;}if(this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled){this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(pageIndex);}if(this.documentAnnotationCollections){var isAnnotationAdded=false;for(var i=0;i<this.annotationRenderredList.length;i++){if(this.annotationRenderredList[i]===pageIndex){isAnnotationAdded=true;}}// eslint-disable-next-line
var pageAnnotations=this.documentAnnotationCollections[pageIndex];if(pageAnnotations&&!isAnnotationAdded){data.shapeAnnotation=pageAnnotations.shapeAnnotation;data.measureShapeAnnotation=pageAnnotations.measureShapeAnnotation;data.textMarkupAnnotation=pageAnnotations.textMarkupAnnotation;data.freeTextAnnotation=pageAnnotations.freeTextAnnotation;data.stampAnnotations=pageAnnotations.stampAnnotations;data.stickyNotesAnnotation=pageAnnotations.stickyNotesAnnotation;data.signatureInkAnnotation=pageAnnotations.signatureInkAnnotation;this.annotationRenderredList.push(pageIndex);}}if(this.isImportAction){// eslint-disable-next-line
var pageAnnotations=this.checkDocumentCollectionData(pageIndex);if(pageAnnotations){data.shapeAnnotation=pageAnnotations.shapeAnnotation;data.measureShapeAnnotation=pageAnnotations.measureShapeAnnotation;data.textMarkupAnnotation=pageAnnotations.textMarkupAnnotation;data.freeTextAnnotation=pageAnnotations.freeTextAnnotation;data.stampAnnotations=pageAnnotations.stampAnnotations;data.stickyNotesAnnotation=pageAnnotations.stickyNotesAnnotation;data.signatureInkAnnotation=pageAnnotations.signatureInkAnnotation;isAnnotationRendered=true;}}if(this.pdfViewer.annotationModule&&(this.isTextMarkupAnnotationModule()||this.isShapeBasedAnnotationsEnabled())){if(this.isStampAnnotationModule()){// eslint-disable-next-line
var stampData=data['stampAnnotations'];if(isAnnotationRendered){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(stampData,pageIndex,null,true);}else{// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(stampData,pageIndex);}}if(isAnnotationRendered){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.renderAnnotations(pageIndex,data.shapeAnnotation,data.measureShapeAnnotation,data.textMarkupAnnotation,null,true);}else{// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.renderAnnotations(pageIndex,data.shapeAnnotation,data.measureShapeAnnotation,data.textMarkupAnnotation);}this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(data.stickyNotesAnnotation,pageIndex);}if(this.pdfViewer.formDesignerModule&&!this.pdfViewer.annotationModule){this.pdfViewer.formDesignerModule.updateCanvas(pageIndex);}if(this.pdfViewer.textSearchModule){if(this.pdfViewer.textSearchModule.isTextSearch){this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);}}if(this.isShapeBasedAnnotationsEnabled()){var canvas1=this.getElement('_annotationCanvas_'+pageIndex);var commonStyle='position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000';if(canvas1){var bounds=canvas1.getBoundingClientRect();renderAdornerLayer(bounds,commonStyle,canvas1,pageIndex,this.pdfViewer);this.pdfViewer.renderSelector(pageIndex,this.pdfViewer.annotationSelectorSettings);}}if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(pageIndex);}if(this.isFreeTextAnnotationModule()&&data.freeTextAnnotation){if(isAnnotationRendered){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(data.freeTextAnnotation,pageIndex,true);}else{this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(data.freeTextAnnotation,pageIndex);}}if(this.isInkAnnotationModule()&&data&&data.signatureInkAnnotation){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(data.signatureInkAnnotation,pageIndex,isAnnotationRendered);}// eslint-disable-next-line max-len
if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isAnnotationSelected&&this.pdfViewer.annotationModule.annotationPageIndex===pageIndex){this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind();}this.isLoadedFormFieldAdded=false;};/**
     * @private
     * @param {number} pageIndex - page index for rendering the annotation.
     * @returns {void}
     */PdfViewerBase.prototype.renderAnnotations=function(pageIndex){// eslint-disable-next-line
var data={};if(this.documentAnnotationCollections){var isAnnotationAdded=false;for(var i=0;i<this.annotationRenderredList.length;i++){if(this.annotationRenderredList[i]===pageIndex){isAnnotationAdded=true;}}// eslint-disable-next-line
var pageAnnotations=this.documentAnnotationCollections[pageIndex];if(pageAnnotations&&!isAnnotationAdded){data.shapeAnnotation=pageAnnotations.shapeAnnotation;data.measureShapeAnnotation=pageAnnotations.measureShapeAnnotation;data.textMarkupAnnotation=pageAnnotations.textMarkupAnnotation;data.freeTextAnnotation=pageAnnotations.freeTextAnnotation;data.stampAnnotations=pageAnnotations.stampAnnotations;data.stickyNotesAnnotation=pageAnnotations.stickyNotesAnnotation;data.signatureAnnotation=pageAnnotations.signatureAnnotation;data.signatureInkAnnotation=pageAnnotations.signatureInkAnnotation;this.annotationRenderredList.push(pageIndex);}}if(this.isAnnotationCollectionRemoved){data.shapeAnnotation=[];data.measureShapeAnnotation=[];data.textMarkupAnnotation=[];data.freeTextAnnotation=[];data.stampAnnotations=[];data.stickyNotesAnnotation=[];data.signatureInkAnnotation=[];}if(this.isTextMarkupAnnotationModule()||this.isShapeBasedAnnotationsEnabled()){if(this.isStampAnnotationModule()){// eslint-disable-next-line
var stampData=data['stampAnnotations'];// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(stampData,pageIndex);}// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.renderAnnotations(pageIndex,data.shapeAnnotation,data.measureShapeAnnotation,data.textMarkupAnnotation);this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(data.stickyNotesAnnotation,pageIndex);}if(this.pdfViewer.textSearchModule){if(this.pdfViewer.textSearchModule.isTextSearch){this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);}}if(this.isImportAction){var isAnnotationAdded=false;for(var i=0;i<this.annotationPageList.length;i++){if(this.annotationPageList[i]===pageIndex){isAnnotationAdded=true;}}if(!isAnnotationAdded){if(this.importedAnnotation){this.drawPageAnnotations(this.importedAnnotation,pageIndex,true);this.annotationPageList[this.annotationPageList.length]=pageIndex;}}}if(this.isShapeBasedAnnotationsEnabled()){var canvas1=this.getElement('_annotationCanvas_'+pageIndex);var commonStyle='position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000';if(canvas1){var bounds=canvas1.getBoundingClientRect();renderAdornerLayer(bounds,commonStyle,canvas1,pageIndex,this.pdfViewer);this.pdfViewer.renderSelector(pageIndex);}}if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(pageIndex);}if(this.isFreeTextAnnotationModule()&&data.freeTextAnnotation){this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(data.freeTextAnnotation,pageIndex);}if(data&&data.signatureAnnotation){this.signatureModule.renderExistingSignature(data.signatureAnnotation,pageIndex,false);}if(this.isInkAnnotationModule()&&data&&data.signatureInkAnnotation){this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(data.signatureInkAnnotation,pageIndex,false);}if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isAnnotationSelected){this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind();}};// eslint-disable-next-line
PdfViewerBase.prototype.renderTextContent=function(data,pageIndex){// eslint-disable-next-line
var texts=data['textContent'];// eslint-disable-next-line
var bounds=data['textBounds'];// eslint-disable-next-line
var rotation=data['rotation'];var textLayer=this.getElement('_textLayer_'+pageIndex);if(!textLayer){// eslint-disable-next-line max-len
textLayer=this.textLayer.addTextLayer(pageIndex,this.getPageWidth(pageIndex),this.getPageHeight(pageIndex),this.getElement('_pageDiv_'+pageIndex));}if(textLayer&&texts&&bounds){textLayer.style.display='block';if(textLayer.childNodes.length===0){this.textLayer.renderTextContents(pageIndex,texts,bounds,rotation);}else{this.textLayer.resizeTextContents(pageIndex,texts,bounds,rotation,true);}}};PdfViewerBase.prototype.renderPageContainer=function(pageNumber,pageWidth,pageHeight,topValue){// eslint-disable-next-line max-len
var pageDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_pageDiv_'+pageNumber,className:'e-pv-page-div',attrs:{'tabindex':'0'}});pageDiv.style.width=pageWidth+'px';pageDiv.style.height=pageHeight+'px';if(this.pdfViewer.enableRtl){pageDiv.style.right=this.updateLeftPosition(pageNumber)+'px';}else{pageDiv.style.left=this.updateLeftPosition(pageNumber)+'px';}pageDiv.style.top=topValue+'px';this.pageContainer.appendChild(pageDiv);this.pageContainer.style.width=this.viewerContainer.clientWidth+'px';this.createWaitingPopup(pageNumber);this.orderPageDivElements(pageDiv,pageNumber);this.renderPageCanvas(pageDiv,pageWidth,pageHeight,pageNumber,'block');if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&!this.isThumb){this.updateMobileScrollerPosition();}};PdfViewerBase.prototype.renderPDFInformations=function(){if(this.pdfViewer.thumbnailViewModule&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)){this.pdfViewer.thumbnailViewModule.createRequestForThumbnails();}if(this.pdfViewer.bookmarkViewModule){this.pdfViewer.bookmarkViewModule.createRequestForBookmarks();}if(this.pdfViewer.annotationModule){if(this.pdfViewer.toolbarModule){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.initializeAcccordionContainer();}if(this.pdfViewer.isCommandPanelOpen||this.pdfViewer.commentPanelVisible){this.pdfViewer.annotation.showCommentsPanel();this.pdfViewer.updatePdfViewerOptions("CommentPanelVisible",true);}this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createRequestForComments();}};PdfViewerBase.prototype.orderPageDivElements=function(pageDiv,pageIndex){var nextElement=this.getElement('_pageDiv_'+(pageIndex+1));if(nextElement){this.pageContainer.insertBefore(pageDiv,nextElement);}else{this.pageContainer.appendChild(pageDiv);}};/**
     * @param pageDiv
     * @param pageWidth
     * @param pageHeight
     * @param pageNumber
     * @param displayMode
     * @param pageDiv
     * @param pageWidth
     * @param pageHeight
     * @param pageNumber
     * @param displayMode
     * @param pageDiv
     * @param pageWidth
     * @param pageHeight
     * @param pageNumber
     * @param displayMode
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.renderPageCanvas=function(pageDiv,pageWidth,pageHeight,pageNumber,displayMode){if(pageDiv){// eslint-disable-next-line
var pageCanvas=this.getElement('_pageCanvas_'+pageNumber);if(pageCanvas){pageCanvas.width=pageWidth;pageCanvas.height=pageHeight;pageCanvas.style.display='block';if(this.isMixedSizeDocument&&this.highestWidth>0){pageCanvas.style.marginLeft='auto';pageCanvas.style.marginRight='auto';}}else{// eslint-disable-next-line max-len
pageCanvas=sf.base.createElement('img',{id:this.pdfViewer.dataId+'_pageCanvas_'+pageNumber,className:'e-pv-page-canvas'});pageCanvas.width=pageWidth;pageCanvas.height=pageHeight;pageCanvas.style.display=displayMode;if(this.isMixedSizeDocument&&this.highestWidth>0){pageCanvas.style.marginLeft='auto';pageCanvas.style.marginRight='auto';}pageDiv.appendChild(pageCanvas);}if(this.pdfViewer.annotationModule&&this.pdfViewer.annotation){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.createAnnotationLayer(pageDiv,pageWidth,pageHeight,pageNumber,displayMode);}if(this.pdfViewer.textSearchModule||this.pdfViewer.textSelectionModule||this.pdfViewer.annotationModule){this.textLayer.addTextLayer(pageNumber,pageWidth,pageHeight,pageDiv);}if(this.pdfViewer.formDesignerModule&&!this.pdfViewer.annotationModule){this.pdfViewer.formDesignerModule.createAnnotationLayer(pageDiv,pageWidth,pageHeight,pageNumber,displayMode);}return pageCanvas;}};/**
     * @private
     * @param {any} pageCanvas - The canvas for rendering the page.
     * @param {any} pageNumber - The page number for adding styles.
     * @returns {void}
     */ // eslint-disable-next-line
PdfViewerBase.prototype.applyElementStyles=function(pageCanvas,pageNumber){if(this.isMixedSizeDocument&&pageCanvas){var canvasElement=document.getElementById(this.pdfViewer.dataId+'_pageCanvas_'+pageNumber);var oldCanvas=document.getElementById(this.pdfViewer.dataId+'_oldCanvas_'+pageNumber);if(pageCanvas&&canvasElement&&canvasElement.offsetLeft>0){pageCanvas.style.marginLeft=canvasElement.offsetLeft+'px';pageCanvas.style.marginRight=canvasElement.offsetLeft+'px';}else if(oldCanvas&&oldCanvas.offsetLeft>0){pageCanvas.style.marginLeft=oldCanvas.offsetLeft+'px';pageCanvas.style.marginRight=oldCanvas.offsetLeft+'px';}else{pageCanvas.style.marginLeft='auto';pageCanvas.style.marginRight='auto';}}};/**
     * @private
     * @param  {number} pageIndex - page index for updating positon.
     * @returns {void}
     */PdfViewerBase.prototype.updateLeftPosition=function(pageIndex){var leftPosition;var width=this.viewerContainer.getBoundingClientRect().width;if(width===0){width=parseFloat(this.pdfViewer.width.toString());}// eslint-disable-next-line max-len
if(this.isMixedSizeDocument&&this.highestWidth>0){if(this.viewerContainer.clientWidth>0){leftPosition=(this.viewerContainer.clientWidth-this.highestWidth*this.getZoomFactor())/2;}else{leftPosition=(width-this.highestWidth*this.getZoomFactor())/2;}var pageDiff=(this.highestWidth*this.getZoomFactor()-this.getPageWidth(pageIndex))/2;if(leftPosition>0){leftPosition+=pageDiff;}else{leftPosition=pageDiff;}}else{if(this.viewerContainer.clientWidth>0){leftPosition=(this.viewerContainer.clientWidth-this.getPageWidth(pageIndex))/2;}else{leftPosition=(width-this.getPageWidth(pageIndex))/2;}}if(this.pageSize[pageIndex].width>this.pageSize[pageIndex].height){}// eslint-disable-next-line max-len
if(leftPosition<0||(this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||this.pdfViewer.magnificationModule.fitType==='fitToWidth':false)){var leftValue=leftPosition;if(leftPosition>0&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){// eslint-disable-next-line
leftPosition=leftValue;}else{leftPosition=this.pageLeft;}if(leftPosition>0&&this.isMixedSizeDocument){if(leftValue>0){leftPosition=leftValue;}}}return leftPosition;};/**
     * @private
     * @param {number} pageIndex - The page index for positon.
     * @returns {void}
     */PdfViewerBase.prototype.applyLeftPosition=function(pageIndex){var leftPosition;if(this.pageSize[pageIndex]){if(this.isMixedSizeDocument&&this.highestWidth>0){if(this.viewerContainer.clientWidth>0){// eslint-disable-next-line max-len
leftPosition=(this.viewerContainer.clientWidth-this.highestWidth*this.getZoomFactor())/2;}else{// eslint-disable-next-line max-len
leftPosition=(this.viewerContainer.getBoundingClientRect().width-this.highestWidth*this.getZoomFactor())/2;}var pageDiff=(this.highestWidth*this.getZoomFactor()-this.getPageWidth(pageIndex))/2;if(leftPosition>0){leftPosition+=pageDiff;}else{leftPosition=pageDiff;}}else{if(this.viewerContainer.clientWidth>0){// eslint-disable-next-line max-len
leftPosition=(this.viewerContainer.clientWidth-this.pageSize[pageIndex].width*this.getZoomFactor())/2;}else{// eslint-disable-next-line max-len
leftPosition=(this.viewerContainer.getBoundingClientRect().width-this.pageSize[pageIndex].width*this.getZoomFactor())/2;}}if(this.pageSize[pageIndex].width>this.pageSize[pageIndex].height){}// eslint-disable-next-line max-len
if(leftPosition<0||(this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||this.pdfViewer.magnificationModule.fitType==='fitToWidth':false)){var leftValue=leftPosition;leftPosition=this.pageLeft;// eslint-disable-next-line max-len
if(leftValue>0&&this.isMixedSizeDocument){leftPosition=leftValue;}}// eslint-disable-next-line max-len
var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+pageIndex);if(pageDiv){if(!this.pdfViewer.enableRtl){pageDiv.style.left=leftPosition+'px';}else{pageDiv.style.right=leftPosition+'px';}}}};PdfViewerBase.prototype.updatePageHeight=function(viewerHeight,toolbarHeight){return(viewerHeight-toolbarHeight)/viewerHeight*100+'%';};PdfViewerBase.prototype.initiatePageViewScrollChanged=function(){if(this.scrollHoldTimer){clearTimeout(this.scrollHoldTimer);}this.scrollHoldTimer=null;if(this.scrollPosition*this.getZoomFactor()!==this.viewerContainer.scrollTop){this.scrollPosition=this.viewerContainer.scrollTop;this.pageViewScrollChanged(this.currentPageNumber);}};PdfViewerBase.prototype.renderCountIncrement=function(){if(this.pdfViewer.magnificationModule){this.pdfViewer.magnificationModule.renderCountIncrement();}};/**
     * @private
     * @param {number} currentPageNumber - The current pagenumber.
     * @returns {void}
     */PdfViewerBase.prototype.pageViewScrollChanged=function(currentPageNumber){if(this.isPanMode){if(this.renderedPagesList.indexOf(currentPageNumber-1)===-1){this.reRenderedCount=0;}}else{this.reRenderedCount=0;}var currentPageIndex=currentPageNumber-1;if(currentPageNumber!==this.previousPage&&currentPageNumber<=this.pageCount){var isSkip=false;if(this.isDataExits&&!this.getLinkInformation(currentPageIndex)){isSkip=true;}if(this.renderedPagesList.indexOf(currentPageIndex)===-1&&!this.getMagnified()&&!isSkip){this.renderCountIncrement();this.createRequestForRender(currentPageIndex);}}if(!(this.getMagnified()||this.getPagesPinchZoomed())){var previous=currentPageIndex-1;var isSkip=false;var canvas=this.getElement('_pageCanvas_'+previous);if(this.isDataExits&&!this.getLinkInformation(previous)){isSkip=true;}if(canvas!==null&&!isSkip){if(this.renderedPagesList.indexOf(previous)===-1&&!this.getMagnified()){this.renderCountIncrement();this.createRequestForRender(previous);}}if(this.isMinimumZoom){this.renderPreviousPagesInScroll(previous);}var next=currentPageIndex+1;var pageHeight=0;if(next<this.pageCount){pageHeight=this.getPageHeight(next);if(this.renderedPagesList.indexOf(next)===-1&&!this.getMagnified()&&pageHeight){this.createRequestForRender(next);this.renderCountIncrement();while(this.viewerContainer.clientHeight>pageHeight){next=next+1;if(next<this.pageCount){this.renderPageElement(next);this.createRequestForRender(next);pageHeight+=this.getPageHeight(next);this.renderCountIncrement();}else{break;}}}}}};PdfViewerBase.prototype.renderPreviousPagesInScroll=function(pageIndex){var next=pageIndex-1;var pageNumber=next-1;if(next>0){if(this.renderedPagesList.indexOf(next)===-1&&!this.getMagnified()){this.createRequestForRender(next);this.renderCountIncrement();}if(pageNumber>0){if(this.renderedPagesList.indexOf(pageNumber)===-1&&!this.getMagnified()){this.createRequestForRender(pageNumber);this.renderCountIncrement();}}}};PdfViewerBase.prototype.downloadDocument=function(blobUrl){// eslint-disable-next-line
var Url=URL||webkitURL;blobUrl=Url.createObjectURL(blobUrl);var anchorElement=sf.base.createElement('a');if(anchorElement.click){anchorElement.href=blobUrl;anchorElement.target='_parent';if('download'in anchorElement){anchorElement.download=this.downloadFileName;}(document.body||document.documentElement).appendChild(anchorElement);anchorElement.click();anchorElement.parentNode.removeChild(anchorElement);}else{if(window.top===window&&blobUrl.split('#')[0]===window.location.href.split('#')[0]){var padCharacter=blobUrl.indexOf('?')===-1?'?':'&';blobUrl=blobUrl.replace(/#|$/,padCharacter+'$&');}window.open(blobUrl,'_parent');}};PdfViewerBase.prototype.downloadExportAnnotationJson=function(blobUrl,isForm){// eslint-disable-next-line
var Url=URL||webkitURL;blobUrl=Url.createObjectURL(blobUrl);var anchorElement=sf.base.createElement('a');if(anchorElement.click){anchorElement.href=blobUrl;anchorElement.target='_parent';if('download'in anchorElement){if(this.pdfViewer.exportAnnotationFileName!==null){anchorElement.download=this.pdfViewer.exportAnnotationFileName.split('.')[0]+'.json';}else{anchorElement.download=this.pdfViewer.fileName.split('.')[0]+'.json';}}(document.body||document.documentElement).appendChild(anchorElement);anchorElement.click();anchorElement.parentNode.removeChild(anchorElement);if(isForm){this.pdfViewer.fireFormExportSuccess(blobUrl,anchorElement.download);}else{this.pdfViewer.fireExportSuccess(blobUrl,anchorElement.download);}}else{if(window.top===window&&blobUrl.split('#')[0]===window.location.href.split('#')[0]){var padCharacter=blobUrl.indexOf('?')===-1?'?':'&';blobUrl=blobUrl.replace(/#|$/,padCharacter+'$&');}window.open(blobUrl,'_parent');if(isForm){this.pdfViewer.fireFormExportSuccess(blobUrl,this.pdfViewer.fileName.split('.')[0]+'.json');}else{this.pdfViewer.fireExportSuccess(blobUrl,this.pdfViewer.fileName.split('.')[0]+'.json');}}};PdfViewerBase.prototype.downloadExportedXFdfAnnotation=function(blobUrl){// eslint-disable-next-line
var Url=URL||webkitURL;blobUrl=Url.createObjectURL(blobUrl);var anchorElement=sf.base.createElement('a');if(anchorElement.click){anchorElement.href=blobUrl;anchorElement.target='_parent';if('download'in anchorElement){if(this.pdfViewer.exportAnnotationFileName!==null){anchorElement.download=this.pdfViewer.exportAnnotationFileName.split('.')[0]+'.xfdf';}else{anchorElement.download=this.pdfViewer.fileName.split('.')[0]+'.xfdf';}}(document.body||document.documentElement).appendChild(anchorElement);anchorElement.click();anchorElement.parentNode.removeChild(anchorElement);this.pdfViewer.fireExportSuccess(blobUrl,anchorElement.download);}};/**
     * @private
     * @param {string} path - The path for exporting the fields.
     * @returns {void}
     */PdfViewerBase.prototype.exportFormFields=function(path){this.createRequestForExportFormfields(false,path);};/**
     * @param source
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.importFormFields=function(source){this.createRequestForImportingFormfields(source);};/**
     * @param isObject
     * @param path
     * @param formFieldDataFormat
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.createRequestForExportFormfields=function(isObject,path,formFieldDataFormat){var _this=this;var proxy=null;proxy=this;var promise=new Promise(function(resolve,reject){// eslint-disable-next-line
var jsonObject=proxy.createFormfieldsJsonData();proxy.pdfViewer.fireFormExportStarted(jsonObject.pdfAnnotation);jsonObject.action='ExportFormFields';// eslint-disable-next-line
jsonObject['hashId']=proxy.hashId;// eslint-disable-next-line
jsonObject['fileName']=proxy.pdfViewer.fileName;if(path&&path!==''&&!isObject){// eslint-disable-next-line
jsonObject['filePath']=path;}// eslint-disable-next-line
jsonObject['elementId']=_this.pdfViewer.dataId;// eslint-disable-next-line max-len
if(proxy.jsonDocumentId){// eslint-disable-next-line
jsonObject.document=proxy.jsonDocumentId;}if(formFieldDataFormat){jsonObject.formFieldDataFormat=formFieldDataFormat;}var url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.exportFormFields;proxy.exportFormFieldsRequestHandler=new AjaxHandler(_this.pdfViewer);proxy.exportFormFieldsRequestHandler.url=url;proxy.exportFormFieldsRequestHandler.mode=true;proxy.exportFormFieldsRequestHandler.responseType='text';proxy.exportFormFieldsRequestHandler.send(jsonObject);// eslint-disable-next-line
proxy.exportFormFieldsRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(data){proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.exportFormFields,data);if(isObject||formFieldDataFormat){var exportObject=data;if(isObject){exportObject=decodeURIComponent(escape(atob(data.split(',')[1])));}resolve(exportObject);proxy.pdfViewer.fireFormExportSuccess(exportObject,proxy.pdfViewer.fileName);}else if(data.split('base64,')[1]){var blobUrl=proxy.createBlobUrl(data.split('base64,')[1],'application/json');if(sf.base.Browser.isIE||sf.base.Browser.info.name==='edge'){window.navigator.msSaveOrOpenBlob(blobUrl,proxy.pdfViewer.fileName.split('.')[0]+'.json');}else{proxy.downloadExportAnnotationJson(blobUrl,true);}}}}};// eslint-disable-next-line
proxy.exportFormFieldsRequestHandler.onFailure=function(result){proxy.pdfViewer.fireFormExportFailed(jsonObject.pdfAnnotation,result.statusText);};// eslint-disable-next-line
proxy.exportFormFieldsRequestHandler.onError=function(result){proxy.pdfViewer.fireFormExportFailed(jsonObject.pdfAnnotation,result.statusText);};});if(isObject||formFieldDataFormat){return promise;}else{return true;}};/**
     * @param source
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.createRequestForImportingFormfields=function(source,formFieldDataFormat){var proxy=null;proxy=this;// eslint-disable-next-line
var jsonObject={};if(_typeof(source)==='object'){jsonObject.data=JSON.stringify(source);}else{jsonObject.data=source;if(source.split('.')[1]==='json'){// eslint-disable-next-line
jsonObject['fileName']=proxy.pdfViewer.fileName;}}proxy.pdfViewer.fireFormImportStarted(source);// eslint-disable-next-line
jsonObject.action='ImportFormFields';// eslint-disable-next-line
jsonObject['hashId']=proxy.hashId;// eslint-disable-next-line
jsonObject['elementId']=this.pdfViewer.dataId;// eslint-disable-next-line max-len
if(proxy.jsonDocumentId){// eslint-disable-next-line
jsonObject.document=proxy.jsonDocumentId;}if(formFieldDataFormat){jsonObject.formFieldDataFormat=formFieldDataFormat;}var url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.importFormFields;proxy.importFormFieldsRequestHandler=new AjaxHandler(this.pdfViewer);proxy.importFormFieldsRequestHandler.url=url;proxy.importFormFieldsRequestHandler.mode=true;proxy.importFormFieldsRequestHandler.responseType='text';proxy.importFormFieldsRequestHandler.send(jsonObject);// eslint-disable-next-line
proxy.importFormFieldsRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data&&data!=='null'){if(_typeof(data)!=='object'){try{data=JSON.parse(data);if(_typeof(data)!=='object'){proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.importFormFields);proxy.pdfViewer.fireFormImportFailed(source,result.statusText);data=null;}}catch(error){proxy.pdfViewer.fireFormImportFailed(source,proxy.pdfViewer.localeObj.getConstant('File not found'));if(sf.base.isBlazor()){var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_FileNotFound');promise.then(function(value){proxy.openImportExportNotificationPopup(value);});}else{proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('File not found'));}proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.importFormFields);data=null;}}proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.importFormFields,data);proxy.pdfViewer.fireFormImportSuccess(source);window.sessionStorage.removeItem(this.documentId+'_formfields');this.pdfViewer.formFieldsModule.removeExistingFormFields();window.sessionStorage.removeItem(this.documentId+'_formDesigner');proxy.saveFormfieldsData(data);for(var i=0;i<proxy.renderedPagesList.length;i++){this.pdfViewer.formFieldsModule.renderFormFields(proxy.renderedPagesList[i]);}}else{proxy.pdfViewer.fireFormImportFailed(source,result.statusText);if(sf.base.isBlazor()){var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_FileNotFound');promise.then(function(value){proxy.openImportExportNotificationPopup(value);});}else{proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('File not found'));}}};// eslint-disable-next-line
proxy.importFormFieldsRequestHandler.onFailure=function(result){proxy.pdfViewer.fireFormImportFailed(source,result.statusText);};// eslint-disable-next-line
proxy.importFormFieldsRequestHandler.onError=function(result){proxy.pdfViewer.fireFormImportFailed(source,result.statusText);};};/**
     * @public
     * @returns {any} - Returns the Json data.
     */ // eslint-disable-next-line
PdfViewerBase.prototype.createFormfieldsJsonData=function(){// eslint-disable-next-line
var jsonObject={};if(this.pdfViewer.formDesignerModule){var fieldsData=this.pdfViewer.formDesignerModule.downloadFormDesigner();// eslint-disable-next-line
jsonObject['formDesigner']=fieldsData;}else if(this.pdfViewer.formFieldsModule){var fieldsData=this.pdfViewer.formFieldsModule.downloadFormFieldsData();// eslint-disable-next-line
jsonObject['fieldsData']=fieldsData;}return jsonObject;};// eslint-disable-next-line
PdfViewerBase.prototype.constructJsonDownload=function(){// eslint-disable-next-line
var jsonObject={hashId:this.hashId};if(this.jsonDocumentId){jsonObject.documentId=this.jsonDocumentId;}jsonObject.uniqueId=this.documentId;this.importPageList=[];if(this.pdfViewer.annotationModule){this.saveImportedAnnotations();}if(this.isTextMarkupAnnotationModule()){this.isJsonExported=false;// eslint-disable-next-line max-len
var textMarkupAnnotationCollection=this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();// eslint-disable-next-line
jsonObject['textMarkupAnnotations']=textMarkupAnnotationCollection;}if(this.isShapeAnnotationModule()){this.isJsonExported=false;// eslint-disable-next-line max-len
var shapeAnnotations=this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();// eslint-disable-next-line
jsonObject['shapeAnnotations']=shapeAnnotations;}if(this.isCalibrateAnnotationModule()){this.isJsonExported=false;// eslint-disable-next-line max-len
var calibrateAnnotations=this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();// eslint-disable-next-line
jsonObject['measureShapeAnnotations']=calibrateAnnotations;}if(this.isStampAnnotationModule()){// eslint-disable-next-line max-len
var stampAnnotationCollection=this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();// eslint-disable-next-line
jsonObject['stampAnnotations']=stampAnnotationCollection;}if(this.isCommentAnnotationModule()){// eslint-disable-next-line max-len
var stickyAnnotationCollection=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();// eslint-disable-next-line
jsonObject['stickyNotesAnnotation']=stickyAnnotationCollection;}if(this.isImportAction){var importList=JSON.stringify(this.importPageList);// eslint-disable-next-line
jsonObject['importPageList']=importList;}if(this.pdfViewer.formDesignerModule){var fieldsData=this.pdfViewer.formDesignerModule.downloadFormDesigner();// eslint-disable-next-line
jsonObject['formDesigner']=fieldsData;}else if(this.pdfViewer.formFieldsModule){var fieldsData=this.pdfViewer.formFieldsModule.downloadFormFieldsData();// eslint-disable-next-line
jsonObject['fieldsData']=fieldsData;}var signatureData=this.signatureModule.saveSignature();// eslint-disable-next-line
jsonObject['signatureData']=signatureData;if(this.pdfViewer.isSignatureEditable){// eslint-disable-next-line
jsonObject['isSignatureEdited']=this.pdfViewer.isSignatureEditable;}if(this.isFreeTextAnnotationModule()){// eslint-disable-next-line max-len
var freeTextAnnotationCollection=this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations();// eslint-disable-next-line
jsonObject['freeTextAnnotation']=freeTextAnnotationCollection;}if(this.isInkAnnotationModule()){var inkSignatureData=this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();// eslint-disable-next-line
jsonObject['inkSignatureData']=inkSignatureData;}// eslint-disable-next-line
jsonObject['action']='Download';// eslint-disable-next-line
jsonObject['elementId']=this.pdfViewer.dataId;if(this.pdfViewer.annotationModule){var annotationsPageList=this.getAnnotationsPageList();jsonObject['isAnnotationsExist']=this.isAnnotationsExist(jsonObject["textMarkupAnnotations"])||this.isAnnotationsExist(jsonObject["shapeAnnotations"])||this.isAnnotationsExist(jsonObject["measureShapeAnnotations"])||this.isAnnotationsExist(jsonObject["stampAnnotations"])||this.isAnnotationsExist(jsonObject["stickyNotesAnnotation"])||this.isAnnotationsExist(jsonObject["signatureData"])||this.isAnnotationsExist(jsonObject["freeTextAnnotation"])||this.isAnnotationsExist(jsonObject["inkSignatureData"])||annotationsPageList.length>0;jsonObject['annotationsPageList']=JSON.stringify(annotationsPageList);}if(this.pdfViewer.formFieldsModule){var formFieldsPageList=this.getFormFieldsPageList();jsonObject['isFormFieldAnnotationsExist']=this.isAnnotationsExist(jsonObject["formDesigner"])||this.isFieldsDataExist(jsonObject["fieldsData"])||formFieldsPageList.length>0;jsonObject['formFieldsPageList']=JSON.stringify(formFieldsPageList);}if(this.pdfViewer.annotationCollection){jsonObject['annotationCollection']=JSON.stringify(this.pdfViewer.annotationCollection);}return jsonObject;};/**
    * @private
    * @returns {boolean} - Returns whether annotation is present.
    */PdfViewerBase.prototype.isAnnotationsExist=function(annotationInfo){// eslint-disable-next-line max-len
return!sf.base.isNullOrUndefined(annotationInfo)?JSON.parse(annotationInfo).flat(1).length>0:false;};/**
     * @private
     * @returns {boolean} - Returns whether fields data is present.
     */PdfViewerBase.prototype.isFieldsDataExist=function(fieldsData){// eslint-disable-next-line max-len
return!sf.base.isNullOrUndefined(fieldsData)?Object.entries(JSON.parse(fieldsData)).length!==0:false;};/**
     * @private
     * @returns {boolean} - Returns annotations page number list.
     */PdfViewerBase.prototype.getAnnotationsPageList=function(){// eslint-disable-next-line max-len
var annotCollection=this.pdfViewer.annotationCollection.map(function(a){return a.pageNumber;});var annotActionCollection=this.pdfViewer.annotationModule.actionCollection.filter(function(value,index,self){return value.annotation.propName!=="formFields"&&value.annotation.formFieldAnnotationType==undefined;}).map(function(a){return a.pageIndex;});var fullPageList=annotCollection.concat(annotActionCollection);return fullPageList.filter(function(value,index,self){return self.indexOf(value)===index&&value!==undefined;});};/**
     * @private
     * @returns {boolean} - Returns form fields page number list.
     */PdfViewerBase.prototype.getFormFieldsPageList=function(){// eslint-disable-next-line max-len
var formFieldsCollection=this.pdfViewer.formFieldCollection.map(function(item){if(!sf.base.isNullOrUndefined(item.properties)){return item.properties.pageNumber;}else{return item.pageNumber+1;}});var annotActionCollection=!sf.base.isNullOrUndefined(this.pdfViewer.annotationModule)?this.pdfViewer.annotationModule.actionCollection.filter(function(value,index,self){return value.annotation.propName=="formFields"||value.annotation.formFieldAnnotationType!=undefined;}).map(function(a){return a.pageIndex;}):[];var fullPageList=formFieldsCollection.concat(annotActionCollection);return fullPageList.filter(function(value,index,self){return self.indexOf(value)===index&&value!==undefined;});};/**
     * @private
     * @param {string} annotationID - The annotationID.
     * @returns {any} - Returns collection of type.
     */ // eslint-disable-next-line
PdfViewerBase.prototype.checkFormFieldCollection=function(annotationID){var isFormFieldAnnotation=false;// eslint-disable-next-line
var formDesignerData=null;formDesignerData=this.getItemFromSessionStorage('_formDesigner');if(formDesignerData){// eslint-disable-next-line
var formFieldsData=JSON.parse(formDesignerData);for(var i=0;i<formFieldsData.length;i++){if(formFieldsData[i].FormField.formFieldAnnotationType==='RadioButton'){for(var j=0;j<formFieldsData[i].FormField.radiobuttonItem.length;j++){if(annotationID===formFieldsData[i].FormField.radiobuttonItem[j].id.split('_')[0]){isFormFieldAnnotation=true;break;}}}else if(formFieldsData[i].Key.split('_')[0]===annotationID){isFormFieldAnnotation=true;break;}}}return isFormFieldAnnotation;};/**
     * @private
     * @returns {boolean} - Returns whether freetext module is enabled.
     */PdfViewerBase.prototype.isFreeTextAnnotationModule=function(){// eslint-disable-next-line max-len
if(this.pdfViewer.annotation){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule){return true;}else{return false;}}else{return false;}};// eslint-disable-next-line
PdfViewerBase.prototype.createRequestForDownload=function(){var proxy=null;proxy=this;proxy.pdfViewer.fireDownloadStart(proxy.downloadFileName);// eslint-disable-next-line
var jsonObject=this.constructJsonDownload();if(proxy.isDigitalSignaturePresent){if(proxy.pdfViewer.isDocumentEdited){jsonObject['digitalSignatureDocumentEdited']=true;}else{jsonObject['digitalSignatureDocumentEdited']=false;}}this.dowonloadRequestHandler=new AjaxHandler(this.pdfViewer);this.dowonloadRequestHandler.url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.download;this.dowonloadRequestHandler.responseType='text';if(this.validateForm&&this.pdfViewer.enableFormFieldsValidation){this.pdfViewer.fireValidatedFailed(proxy.pdfViewer.serverActionSettings.download);this.validateForm=false;}else{this.dowonloadRequestHandler.send(jsonObject);}// eslint-disable-next-line
this.dowonloadRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'&&data.indexOf('data:application/pdf')===-1){proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.download);data=null;}if(_typeof(data)==='object'){data=JSON.parse(data);}if(data){if(proxy.pdfViewer.downloadFileName&&proxy.pdfViewer.downloadFileName!==proxy.downloadFileName){proxy.downloadFileName=proxy.pdfViewer.downloadFileName;}proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.download,data);var blobUrl=proxy.createBlobUrl(data.split('base64,')[1],'application/pdf');if(sf.base.Browser.isIE||sf.base.Browser.info.name==='edge'){window.navigator.msSaveOrOpenBlob(blobUrl,proxy.downloadFileName);}else{proxy.downloadDocument(blobUrl);}proxy.pdfViewer.fireDownloadEnd(proxy.downloadFileName,data);}proxy.updateDocumentAnnotationCollections();}else{proxy.pdfViewer.fireDownloadEnd(proxy.downloadFileName,'PDF Document saved in server side successfully');}};// eslint-disable-next-line
this.dowonloadRequestHandler.onFailure=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.download);};// eslint-disable-next-line
this.dowonloadRequestHandler.onError=function(result){proxy.openNotificationPopup();proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.download);};};/**
     * @param pageWidth
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.getTileCount=function(pageWidth){if(pageWidth&&typeof pageWidth==='number'){var defaultWidth=816;var tileCount=1;if(this.getZoomFactor()>2&&pageWidth<=1200){tileCount=2;}else{tileCount=pageWidth/defaultWidth;}// eslint-disable-next-line radix
var tileValue=parseInt(tileCount.toFixed());if(tileValue<=0){return 1;}else{if(this.pdfViewer.tileRenderingSettings.enableTileRendering){return tileValue;}else{return 1;}}}else{return 1;}};PdfViewerBase.prototype.renderHyperlink=function(data,pageIndex){if(this.pdfViewer.enableHyperlink&&this.pdfViewer.linkAnnotationModule){this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(data,pageIndex);}};PdfViewerBase.prototype.createRequestForRender=function(pageIndex){var proxy=null;proxy=this;var canvas=proxy.getElement('_pageCanvas_'+pageIndex);var oldCanvas=proxy.getElement('_oldCanvas_'+pageIndex);if(this.pageSize&&this.pageSize[pageIndex]){var pageWidth_1=this.pageSize[pageIndex].width;var pageHeight=this.pageSize[pageIndex].height;var tilecanvas=this.getElement('_pageCanvas_'+pageIndex);// eslint-disable-next-line
var viewPortWidth=1200;// On diving the value greater than 1200 we will get the tile count as 2.
// eslint-disable-next-line
var viewPortHeight=proxy.pdfViewer.element.clientHeight>0?proxy.pdfViewer.element.clientHeight:proxy.pdfViewer.element.style.height;// eslint-disable-next-line radix
viewPortWidth=parseInt(viewPortWidth);// eslint-disable-next-line radix
viewPortHeight=parseInt(viewPortHeight)?parseInt(viewPortHeight):500;//we have applied minimum-height as 500.
var noTileX=void 0;var noTileY=void 0;var tileCount=this.getTileCount(pageWidth_1);if(canvas){if(!isNaN(parseFloat(canvas.style.width))||oldCanvas){if(proxy.isInitialLoaded){proxy.showPageLoadingIndicator(pageIndex,false);}}// eslint-disable-next-line
var data=proxy.getLinkInformation(pageIndex);noTileX=noTileY=tileCount;var tileSettings=proxy.pdfViewer.tileRenderingSettings;if(tileSettings.enableTileRendering&&tileSettings.x>0&&tileSettings.y>0){if(viewPortWidth<pageWidth_1||this.getZoomFactor()>2){noTileX=tileSettings.x;noTileY=tileSettings.y;}}proxy.tileRequestCount=noTileX*noTileY;var zoomFactor=this.retrieveCurrentZoomFactor();var isPageRequestSent=void 0;if(tileCount===1){data=proxy.getLinkInformation(pageIndex);isPageRequestSent=proxy.pageRequestSent(pageIndex,0,0);}else{// eslint-disable-next-line
var tileData=proxy.getLinkInformation(pageIndex);if(tileData){data=tileData;}}if(data&&data.uniqueId===proxy.documentId){canvas.style.backgroundColor='#fff';if(proxy.pdfViewer.magnification&&proxy.pdfViewer.magnification.isPinchZoomed||!this.pageSize[pageIndex]){return;}var zoomFactor_2=this.retrieveCurrentZoomFactor();if(zoomFactor_2>2&&pageWidth_1<=1200){viewPortWidth=700;}else{viewPortWidth=1200;}if(!proxy.pdfViewer.tileRenderingSettings.enableTileRendering){viewPortWidth=1200;}if(viewPortWidth>=pageWidth_1||!proxy.pdfViewer.tileRenderingSettings.enableTileRendering){proxy.renderPage(data,pageIndex);proxy.renderHyperlink(data,pageIndex);}else{proxy.isTileImageRendered=true;proxy.tileRenderCount=0;proxy.tileRenderPage(data,pageIndex);proxy.renderHyperlink(data,pageIndex);for(var k=0;k<noTileX;k++){for(var l=0;l<noTileY;l++){if(k===0&&l===0){continue;}data=JSON.parse(this.getStoredTileImageDetails(pageIndex,k,l,zoomFactor_2));if(data){proxy.tileRenderPage(data,pageIndex);}}}}data=null;}else if(data===null||!isPageRequestSent){if(this.getPagesPinchZoomed()){proxy.showPageLoadingIndicator(pageIndex,false);}else{proxy.showPageLoadingIndicator(pageIndex,true);}if(proxy.getPagesZoomed()){if(proxy.isInitialLoaded){proxy.showPageLoadingIndicator(pageIndex,false);}}if(proxy.pdfViewer.magnification&&proxy.pdfViewer.magnification.isPinchZoomed){return;}if(!proxy.pdfViewer.tileRenderingSettings.enableTileRendering){noTileX=1;noTileY=1;}proxy.tileRenderCount=0;proxy.isTileImageRendered=true;for(var x=0;x<noTileX;x++){for(var y=0;y<noTileY;y++){var jsonObject=null;var zoomFactor_3=this.retrieveCurrentZoomFactor();if(zoomFactor_3>2&&pageWidth_1<=1200){viewPortWidth=700;}else{viewPortWidth=1200;}if(!proxy.pdfViewer.tileRenderingSettings.enableTileRendering){viewPortWidth=1200;}// eslint-disable-next-line max-len
jsonObject={xCoordinate:x,yCoordinate:y,viewPortWidth:viewPortWidth,viewPortHeight:viewPortHeight,pageNumber:pageIndex,hashId:proxy.hashId,tilecount:tileCount,tileXCount:noTileX,tileYCount:noTileY,// eslint-disable-next-line max-len
zoomFactor:zoomFactor_3,action:'RenderPdfPages',uniqueId:this.documentId,elementId:proxy.pdfViewer.element.id};if(this.jsonDocumentId){// eslint-disable-next-line
jsonObject.documentId=this.jsonDocumentId;}proxy.pageRequestHandler=new AjaxHandler(this.pdfViewer);// eslint-disable-next-line max-len
proxy.pageRequestHandler.url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.renderPages;proxy.pageRequestHandler.responseType='json';var hyperlinkId=proxy.documentId+'_'+pageIndex+'_hyperlinkAndLinkAnnotation';if(proxy.hyperlinkAndLinkAnnotation[hyperlinkId]){var data_1=JSON.parse(proxy.hyperlinkAndLinkAnnotation[hyperlinkId]);proxy.renderHyperlink(data_1,pageIndex);}else{proxy.pageRequestHandler.send(jsonObject);}proxy.requestLists.push(proxy.documentId+'_'+pageIndex+'_'+x+'_'+y+'_'+zoomFactor_3);// eslint-disable-next-line
proxy.pageRequestHandler.onSuccess=function(result){// eslint-disable-next-line max-len
if(proxy.pdfViewer.magnification&&proxy.pdfViewer.magnification.isPinchZoomed||!proxy.pageSize[pageIndex]){return;}// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.renderPages);data=null;}}}if(data){try{while(_typeof(data)!=='object'){data=JSON.parse(data);}}catch(error){data=null;}if(data&&data.uniqueId===proxy.documentId){var currentPageWidth=data.pageWidth&&data.pageWidth>0?data.pageWidth:pageWidth_1;proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages,data);var pageNumber=data.pageNumber!==undefined?data.pageNumber:pageIndex;var storeObject={hyperlinks:data['hyperlinks'],hyperlinkBounds:data['hyperlinkBounds'],linkAnnotation:data['linkAnnotation'],linkPage:data['linkPage'],annotationLocation:data['annotationLocation'],// eslint-disable-next-line
width:data['width'],rotation:data['rotation'],scaleFactor:data['scaleFactor'],uniqueId:data['uniqueId'],zoomFactor:data['zoomFactor']};if(proxy.pageSize[pageNumber]){// eslint-disable-next-line
proxy.pageSize[pageNumber].rotation=parseFloat(data['rotation']);}proxy.hyperlinkAndLinkAnnotation[proxy.documentId+'_'+pageNumber+'_hyperlinkAndLinkAnnotation']=JSON.stringify(storeObject);proxy.renderHyperlink(data,pageNumber);}}};// eslint-disable-next-line
this.pageRequestHandler.onFailure=function(result){// eslint-disable-next-line max-len
proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.renderPages);};// eslint-disable-next-line
this.pageRequestHandler.onError=function(result){proxy.openNotificationPopup();// eslint-disable-next-line max-len
proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.renderPages);};var textDetailsId=proxy.documentId+'_'+pageIndex+'_textDetails';var isTextNeed=proxy.pageTextDetails?proxy.pageTextDetails[textDetailsId]?false:true:true;if(viewPortWidth>=pageWidth_1||!proxy.pdfViewer.tileRenderingSettings.enableTileRendering){this.pdfViewerRunner.postMessage({pageIndex:pageIndex,message:'renderPage',zoomFactor:zoomFactor_3,isTextNeed:isTextNeed,textDetailsId:textDetailsId});}else{this.showPageLoadingIndicator(pageIndex,true);this.blazorUIAdaptor.zoomDropDownElement.classList.add(this.blazorUIAdaptor.cssClass);this.blazorUIAdaptor.zoomInElement.classList.add(this.blazorUIAdaptor.cssClass);this.blazorUIAdaptor.zommOutElement.classList.add(this.blazorUIAdaptor.cssClass);this.pdfViewerRunner.postMessage({pageIndex:pageIndex,message:'renderImageAsTile',zoomFactor:zoomFactor_3,tileX:x,tileY:y,tileXCount:noTileX,tileYCount:noTileY,isTextNeed:isTextNeed,textDetailsId:textDetailsId});}}}}proxy.renderedPagesList.push(pageIndex);}}};PdfViewerBase.prototype.CommonOnMessage=function(event){switch(event.data.message){case'imageRendered':if(event.data.message==='imageRendered'){var canvas=document.createElement('canvas');var _a=event.data,value=_a.value,width=_a.width,height=_a.height,pageIndex=_a.pageIndex;canvas.width=width;canvas.height=height;var canvasContext=canvas.getContext('2d');var imageData=canvasContext.createImageData(width,height);imageData.data.set(value);canvasContext.putImageData(imageData,0,0);var imageUrl=canvas.toDataURL();var textBounds=event.data.textBounds;var textContent=event.data.textContent;var pageText=event.data.pageText;var rotation=event.data.rotation;var characterBounds=event.data.characterBounds;var data={image:imageUrl,pageNumber:pageIndex,uniqueId:this.documentId,pageWidth:width,zoomFactor:event.zoomFactor};if(event.data.isTextNeed){data.textBounds=textBounds;data.textContent=textContent;data.rotation=rotation;data.pageText=pageText;this.storeTextDetails(pageIndex,textBounds,textContent,pageText,rotation,characterBounds);}else{var textDetails=JSON.parse(this.pageTextDetails[event.data.textDetailsId]);data.textBounds=textDetails.textBounds;data.textContent=textDetails.textContent;data.rotation=textDetails.rotation;data.pageText=textDetails.pageText;}if(data&&data.image&&data.uniqueId===this.documentId){var currentPageWidth=data.pageWidth&&data.pageWidth>0?data.pageWidth:event.pageWidth;this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,data);var pageNumber=data.pageNumber!==undefined?data.pageNumber:pageIndex;var blobObj=this.createBlobUrl(data.image.split('base64,')[1],'image/png');var Url=URL||webkitURL;var blobUrl=Url.createObjectURL(blobObj);var storeObject={// eslint-disable-next-line
image:blobUrl,width:data.pageWidth,uniqueId:data.uniqueId,zoomFactor:data.zoomFactor};this.storeImageData(pageNumber,storeObject);this.renderPage(data,pageNumber);}}break;case'renderTileImage':if(event.data.message==='renderTileImage'){var canvas=document.createElement('canvas');var _b=event.data,value=_b.value,w=_b.w,h=_b.h,noTileX=_b.noTileX,noTileY=_b.noTileY,x=_b.x,y=_b.y,pageIndex=_b.pageIndex;canvas.setAttribute('height',h);canvas.setAttribute('width',w);canvas.width=w;canvas.height=h;var canvasContext=canvas.getContext('2d');var imageData=canvasContext.createImageData(w,h);imageData.data.set(value);canvasContext.putImageData(imageData,0,0);var imageUrl=canvas.toDataURL();var tileWidth=w;var tileHeight=h;var textBounds=event.data.textBounds;var textContent=event.data.textContent;var pageText=event.data.pageText;var rotation=event.data.rotation;var characterBounds=event.data.characterBounds;var tileData={image:imageUrl,noTileX:noTileX,noTileY:noTileY,pageNumber:pageIndex,tileX:x,tileY:y,uniqueId:this.documentId,pageWidth:event.pageWidth,width:tileWidth,transformationMatrix:{Values:[1,0,0,1,tileWidth*x,tileHeight*y,0,0,0]},zoomFactor:this.retrieveCurrentZoomFactor()};if(tileData&&tileData.image&&tileData.uniqueId===this.documentId){var currentPageWidth=tileData.pageWidth&&tileData.pageWidth>0?tileData.pageWidth:event.pageWidth;this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,tileData);var pageNumber=tileData.pageNumber!==undefined?tileData.pageNumber:pageIndex;if(x==0&&y==0){var blobObj=this.createBlobUrl(tileData.image.split('base64,')[1],'image/png');var Url=URL||webkitURL;var blobUrl=Url.createObjectURL(blobObj);var storeObject={// eslint-disable-next-line
image:blobUrl,width:tileData.pageWidth,uniqueId:tileData.uniqueId,tileX:tileData.tileX,tileY:tileData.tileY,zoomFactor:tileData.zoomFactor};if(event.data.isTextNeed){tileData.textBounds=textBounds;tileData.textContent=textContent;tileData.rotation=rotation;tileData.pageText=pageText;this.storeTextDetails(pageIndex,textBounds,textContent,pageText,rotation,characterBounds);}else{var textDetails=JSON.parse(this.pageTextDetails[event.data.textDetailsId]);tileData.textBounds=textDetails.textBounds;tileData.textContent=textDetails.textContent;tileData.rotation=textDetails.rotation;tileData.pageText=textDetails.pageText;}this.storeImageData(pageNumber,storeObject,tileData.tileX,tileData.tileY);}else{var blobObj=this.createBlobUrl(tileData.image.split('base64,')[1],'image/png');var Url=URL||webkitURL;var blobUrl=Url.createObjectURL(blobObj);var storeObject={// eslint-disable-next-line
image:blobUrl,width:tileData.pageWidth,uniqueId:tileData.uniqueId,tileX:tileData.tileX,tileY:tileData.tileY,zoomFactor:tileData.zoomFactor};this.storeImageData(pageNumber,storeObject,tileData.tileX,tileData.tileY);}this.tileRenderPage(tileData,pageNumber);}}break;case'renderThumbnail':this.pdfViewer.thumbnailViewModule.thumbnailOnmessage(event);break;case'printImage':this.pdfViewer.printModule.printOnmessage(event);break;case'PageLoaded':this.pdfViewer.viewerBase.PageloadedOnMessage(event);break;case'loaded':this.pdfViewer.LoadedOnMessage(event);break;default:console.log('Unknown message type:',event.data.message);}};PdfViewerBase.prototype.pageRequestSent=function(pageIndex,tileX,tileY){var zoomFactor=this.retrieveCurrentZoomFactor();var currentString=this.documentId+'_'+pageIndex+'_'+tileX+'_'+tileY+'_'+zoomFactor;if(this.requestLists&&this.requestLists.indexOf(currentString)>-1){return true;}return false;};/**
     * @private
     * @param {string} status - The status message.
     * @param {string} errorMessage - The error message.
     * @param {string} action - The action.
     * @returns {void}
     */PdfViewerBase.prototype.onControlError=function(status,errorMessage,action){this.openNotificationPopup();this.pdfViewer.fireAjaxRequestFailed(status,errorMessage,action);};/**
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.getStoredData=function(pageIndex,isTextSearch){var zoomFactor=this.retrieveCurrentZoomFactor();if(this.pdfViewer.restrictZoomRequest&&!this.pdfViewer.tileRenderingSettings.enableTileRendering){zoomFactor=1;}// eslint-disable-next-line
var storedData=this.getWindowSessionStorage(pageIndex,zoomFactor)?this.getWindowSessionStorage(pageIndex,zoomFactor):this.getPinchZoomPage(pageIndex);if(!storedData&&isTextSearch){// eslint-disable-next-line
var storedTileData=this.getStoredTileImageDetails(pageIndex,0,0,zoomFactor);if(storedTileData){storedData=storedTileData;}}// eslint-disable-next-line
var data=null;if(storedData){// eslint-disable-next-line
data=storedData;if(!this.isPinchZoomStorage){data=JSON.parse(storedData);}this.isPinchZoomStorage=false;}return data;};/**
     * @private
     * @param  {any} data - The data.
     * @param {number} pageIndex - The pageIndex.
     * @param {number} tileX - The tileX.
     * @param {number} tileY - The tileY.
     * @returns {void}
     */ // eslint-disable-next-line
PdfViewerBase.prototype.storeWinData=function(data,pageIndex,tileX,tileY){// eslint-disable-next-line
var blobObj=this.createBlobUrl(data['image'].split('base64,')[1],'image/png');// eslint-disable-next-line
var Url=URL||webkitURL;var blobUrl=Url.createObjectURL(blobObj);// eslint-disable-next-line
var storeObject;if(isNaN(tileX)&&isNaN(tileY)||tileX===0&&tileY===0){storeObject={// eslint-disable-next-line
image:blobUrl,transformationMatrix:data['transformationMatrix'],hyperlinks:data['hyperlinks'],hyperlinkBounds:data['hyperlinkBounds'],linkAnnotation:data['linkAnnotation'],linkPage:data['linkPage'],annotationLocation:data['annotationLocation'],// eslint-disable-next-line
textContent:data['textContent'],width:data['width'],textBounds:data['textBounds'],pageText:data['pageText'],rotation:data['rotation'],scaleFactor:data['scaleFactor'],uniqueId:data['uniqueId'],zoomFactor:data['zoomFactor'],tileX:tileX,tileY:tileY};if(this.pageSize[pageIndex]){// eslint-disable-next-line
this.pageSize[pageIndex].rotation=parseFloat(data['rotation']);}// eslint-disable-next-line
this.textLayer.characterBound[pageIndex]=data['characterBounds'];}else{storeObject={// eslint-disable-next-line
image:blobUrl,transformationMatrix:data['transformationMatrix'],tileX:tileX,tileY:tileY,width:data['width'],zoomFactor:data['zoomFactor']};}// eslint-disable-next-line
var pageWidth=0;if(this.pageSize[pageIndex]){pageWidth=this.pageSize[pageIndex].width;}this.manageSessionStorage(pageIndex,storeObject,tileX,tileY);};/**
     * @private
     * @param {XMLHttpRequest} request - The Xml request.
     * @returns {void}
     */PdfViewerBase.prototype.setCustomAjaxHeaders=function(request){for(var i=0;i<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;i++){// eslint-disable-next-line max-len
request.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerValue);}};/**
     * @private
     * @param {number} pageIndex - Page index.
     * @returns {object}
     */PdfViewerBase.prototype.getPinchZoomPage=function(pageIndex){// eslint-disable-next-line
for(var key in this.pinchZoomStorage){// eslint-disable-next-line
if(this.pinchZoomStorage.hasOwnProperty(key)){if(this.pinchZoomStorage[key].index===pageIndex){this.isPinchZoomStorage=true;return this.pinchZoomStorage[key].pinchZoomStorage;}}}return null;};/**
     * @private
     * @param {number} pageIndex - current page index.
     * @param {number} zoomFactor - cuurent zoom factor
     * @returns {string}
     */PdfViewerBase.prototype.getWindowSessionStorage=function(pageIndex,zoomFactor){return window.sessionStorage.getItem(this.documentId+'_'+pageIndex+'_'+zoomFactor);};/**
     * @private
     * @param {number} pageIndex - current page index.
     * @param {number} tileX - cuurent tile x
     * @param {number} tileY - cuurent tile y
     * @param {number} zoomFactor - cuurent zoom factor
     * @returns {string}
     */PdfViewerBase.prototype.getStoredTileImageDetails=function(pageIndex,tileX,tileY,zoomFactor){return this.pageImageDetails[this.documentId+'_'+pageIndex+'_'+tileX+'_'+tileY+'_'+zoomFactor+'_imageUrl'];};/**
     * @private
     * @returns {number}
     */PdfViewerBase.prototype.retrieveCurrentZoomFactor=function(){var zoomFactor=this.getZoomFactor();if(this.pdfViewer.enableZoomOptimization){if(zoomFactor<=1){zoomFactor=1;}else if(zoomFactor>1&&zoomFactor<=2){zoomFactor=2;}else if(zoomFactor>2&&zoomFactor<=3){zoomFactor=3;}else if(zoomFactor>3&&zoomFactor<=4){zoomFactor=4;}return zoomFactor;}else{if(zoomFactor<=0){zoomFactor=1;}return zoomFactor;}};PdfViewerBase.prototype.storeTextDetails=function(pageNumber,textBounds,textContent,pageText,rotation,characterBounds){var textObject={textBounds:textBounds,textContent:textContent,rotation:rotation,pageText:pageText};if(this.pageSize[pageNumber]){this.pageSize[pageNumber].rotation=rotation;}this.textLayer.characterBound[pageNumber]=characterBounds;this.pageTextDetails[this.documentId+'_'+pageNumber+'_textDetails']=JSON.stringify(textObject);};PdfViewerBase.prototype.storeImageData=function(pageNumber,storeObject,tileX,tileY){var zoomFactor=this.retrieveCurrentZoomFactor();if(isNaN(tileX)&&isNaN(tileY)){this.pageImageDetails[this.documentId+'_'+pageNumber+'_'+zoomFactor+'_imageUrl']=JSON.stringify(storeObject);}else{this.pageImageDetails[this.documentId+'_'+pageNumber+'_'+tileX+'_'+tileY+'_'+zoomFactor+'_imageUrl']=JSON.stringify(storeObject);}};// eslint-disable-next-line
PdfViewerBase.prototype.manageSessionStorage=function(pageIndex,storeObject,tileX,tileY){// eslint-disable-next-line
var sessionSize=Math.round(JSON.stringify(window.sessionStorage).length/1024);var maxSessionSize=5000;if(sessionSize>=maxSessionSize){if(!this.isStorageExceed){// eslint-disable-next-line
var annotationList=[];for(var i=0;i<window.sessionStorage.length;i++){if(window.sessionStorage.key(i)&&window.sessionStorage.key(i).split('_')[3]){if(window.sessionStorage.key(i).split('_')[3]==='annotations'){// eslint-disable-next-line max-len
this.annotationStorage[window.sessionStorage.key(i)]=window.sessionStorage.getItem(window.sessionStorage.key(i));annotationList.push(window.sessionStorage.key(i));}}}if(annotationList){for(var i=0;i<annotationList.length;i++){window.sessionStorage.removeItem(annotationList[i]);}}}this.isStorageExceed=true;sessionSize=Math.round(JSON.stringify(window.sessionStorage).length/1024);if(sessionSize>=5000){var storageLength=window.sessionStorage.length;if(storageLength>200){storageLength=200;}for(var i=0;i<storageLength;i++){if(window.sessionStorage.key(i)&&window.sessionStorage.key(i).split('_')[3]){if(window.sessionStorage.key(i).split('_')[3]!=='annotations'){window.sessionStorage.removeItem(window.sessionStorage.key(i));}}}}}var zoomFactor=this.retrieveCurrentZoomFactor();if(isNaN(tileX)&&isNaN(tileY)){// eslint-disable-next-line max-len
window.sessionStorage.setItem(this.documentId+'_'+pageIndex+'_'+zoomFactor+'_imageUrl',JSON.stringify(storeObject));this.sessionStorage.push(this.documentId+'_'+pageIndex+'_'+zoomFactor+'_imageUrl');}else{this.sessionStorage.push(this.documentId+'_'+pageIndex+'_'+tileX+'_'+tileY+'_'+zoomFactor+'_imageUrl');// eslint-disable-next-line max-len
window.sessionStorage.setItem(this.documentId+'_'+pageIndex+'_'+tileX+'_'+tileY+'_'+zoomFactor+'_imageUrl',JSON.stringify(storeObject));}};PdfViewerBase.prototype.createBlobUrl=function(base64String,contentType){var sliceSize=512;var byteCharacters=atob(base64String);// eslint-disable-next-line
var byteArrays=[];for(var offset=0;offset<byteCharacters.length;offset+=sliceSize){var slice=byteCharacters.slice(offset,offset+sliceSize);// eslint-disable-next-line
var byteNumbers=new Array(slice.length);for(var i=0;i<slice.length;i++){byteNumbers[i]=slice.charCodeAt(i);}// eslint-disable-next-line
var byteArray=new Uint8Array(byteNumbers);byteArrays.push(byteArray);}// eslint-disable-next-line
var blob=new Blob(byteArrays,{type:contentType});return blob;};PdfViewerBase.prototype.getRandomNumber=function(){// eslint-disable-next-line
return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){// eslint-disable-next-line
var random=Math.random()*16|0;return random.toString(16);});};PdfViewerBase.prototype.createGUID=function(){// eslint-disable-next-line max-len
return'Sync_PdfViewer_'+this.getRandomNumber();};/**
     * @private
     * @param {MouseEvent} event - The mouse event.
     * @param {boolean} isNeedToSet - Is need to test.
     * @returns {boolean} - Returns true or false.
     */PdfViewerBase.prototype.isClickedOnScrollBar=function(event,isNeedToSet){var isScrollBar=false;if(isNeedToSet){this.setScrollDownValue(event.type,false);}// eslint-disable-next-line max-len
if(this.viewerContainer.clientWidth+this.viewerContainer.offsetLeft<event.clientX&&event.clientX<this.viewerContainer.offsetWidth+this.viewerContainer.offsetLeft){isScrollBar=true;if(isNeedToSet){this.setScrollDownValue(event.type,true);}}// eslint-disable-next-line max-len
if(this.viewerContainer.clientHeight+this.viewerContainer.offsetTop<event.clientY&&event.clientY<this.viewerContainer.offsetHeight+this.viewerContainer.offsetTop){isScrollBar=true;if(isNeedToSet){this.setScrollDownValue(event.type,true);}}return isScrollBar;};PdfViewerBase.prototype.setScrollDownValue=function(eventType,boolValue){if(eventType==='mousedown'){this.isScrollbarMouseDown=boolValue;}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.disableTextSelectionMode=function(){this.isTextSelectionDisabled=true;this.viewerContainer.classList.remove('e-enable-text-selection');if(this.pdfViewer.textSelectionModule){this.pdfViewer.textSelectionModule.clearTextSelection();}this.viewerContainer.classList.add('e-disable-text-selection');this.viewerContainer.addEventListener('selectstart',function(){return false;});};/**
     * @private
     * @param {string} idString - The Id string.
     * @returns {HTMLElement} - The html element.
     */PdfViewerBase.prototype.getElement=function(idString){return document.getElementById(this.pdfViewer.dataId+idString);};/**
     * @private
     * @param {number} pageIndex - The pageIndex
     * @returns {number} - Returns number
     */PdfViewerBase.prototype.getPageWidth=function(pageIndex){if(this.pageSize[pageIndex]){return this.pageSize[pageIndex].width*this.getZoomFactor();}else{return 0;}};/**
     * @private
     * @param {number} pageIndex - The pageIndex
     * @returns {number} - Returns number
     */PdfViewerBase.prototype.getPageHeight=function(pageIndex){if(this.pageSize[pageIndex]){return this.pageSize[pageIndex].height*this.getZoomFactor();}else{return 0;}};/**
     * @private
     * @param {number} pageIndex - The pageIndex.
     * @returns {number} - Returns number
     */PdfViewerBase.prototype.getPageTop=function(pageIndex){if(this.pageSize[pageIndex]){return this.pageSize[pageIndex].top*this.getZoomFactor();}else{return 0;}};PdfViewerBase.prototype.isAnnotationToolbarHidden=function(){if(this.pdfViewer.toolbarModule.annotationToolbarModule){return this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden;}else{return true;}};PdfViewerBase.prototype.isFormDesignerToolbarHidded=function(){var formDesignerToolbar=this.pdfViewer.toolbarModule.formDesignerToolbarModule;if(formDesignerToolbar){return formDesignerToolbar.isToolbarHidden;}else{return true;}};/**
     * @private
     * @returns {boolean} - Returns true or false.
     */PdfViewerBase.prototype.getTextMarkupAnnotationMode=function(){if(this.isTextMarkupAnnotationModule()){return this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode;}else{return false;}};PdfViewerBase.prototype.isNewFreeTextAnnotation=function(){// eslint-disable-next-line max-len
if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule){if(!this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot){return true;}else{return false;}}else{return true;}};PdfViewerBase.prototype.getCurrentTextMarkupAnnotation=function(){if(this.isTextMarkupAnnotationModule()){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){return true;}else{return false;}}else{return false;}};/**
     * @private
     * @returns {number} - Returns page number.
     */PdfViewerBase.prototype.getSelectTextMarkupCurrentPage=function(){if(this.isTextMarkupAnnotationModule()){return this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;}else{return null;}};/**
     * @private
     * @returns {boolean} - Retunrs true or false.
     */PdfViewerBase.prototype.getAnnotationToolStatus=function(){if(this.pdfViewer.toolbarModule){return this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled();}else{return false;}};/**
     * @private
     * @returns {boolean} - Retunrs true or false.
     */PdfViewerBase.prototype.getPopupNoteVisibleStatus=function(){if(this.pdfViewer.annotationModule){return this.pdfViewer.annotationModule.isPopupNoteVisible;}else{return false;}};/**
     * @private
     * @returns {TextMarkupAnnotation} - TextMarkupAnnotation.
     */PdfViewerBase.prototype.isTextMarkupAnnotationModule=function(){if(this.pdfViewer.annotationModule){return this.pdfViewer.annotationModule.textMarkupAnnotationModule;}else{return null;}};/**
     * @private
     * @returns {boolean} - Returns true or false.
     */PdfViewerBase.prototype.isShapeAnnotationModule=function(){if(this.pdfViewer.annotation){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.shapeAnnotationModule){return true;}else{return false;}}else{return false;}};/**
     * @private
     * @returns {boolean} - Retunrs true or false.
     */PdfViewerBase.prototype.isFormDesignerModule=function(){if(this.pdfViewer.formDesignerModule){return true;}else{return false;}};/**
     * @private
     * @returns {boolean} - Retunrs true or false.
     */PdfViewerBase.prototype.isCalibrateAnnotationModule=function(){if(this.pdfViewer.annotation){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.measureAnnotationModule){return true;}else{return false;}}else{return false;}};/**
     * @private
     * @returns {boolean} - Retunrs true or false.
     */PdfViewerBase.prototype.isStampAnnotationModule=function(){if(this.pdfViewer.annotation){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.stampAnnotationModule){return true;}else{return false;}}else{return false;}};/**
     * @private
     * @returns {boolean} - Retunrs true or false.
     */PdfViewerBase.prototype.isInkAnnotationModule=function(){if(this.pdfViewer.annotation){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.inkAnnotationModule){return true;}else{return false;}}else{return false;}};/**
     * @private
     * @returns {boolean} - Retunrs true or false.
     */PdfViewerBase.prototype.isCommentAnnotationModule=function(){if(this.pdfViewer.annotation){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.stickyNotesAnnotationModule){return true;}else{return false;}}else{return false;}};/**
     * @private
     * @returns {boolean} - Retunrs true or false.
     */PdfViewerBase.prototype.isShapeBasedAnnotationsEnabled=function(){// eslint-disable-next-line max-len
if(this.isShapeAnnotationModule()||this.isCalibrateAnnotationModule()||this.isStampAnnotationModule()||this.isCommentAnnotationModule()||this.isFormDesignerModule()){return true;}else{return false;}};/**
     * @private
     * @param {MouseEvent | PointerEvent | TouchEvent} e - Returns event.
     * @returns {PointModel} - Returns points.
     */PdfViewerBase.prototype.getMousePosition=function(e){var touchArg;var offsetX;var offsetY;if(e.type.indexOf('touch')!==-1){touchArg=e;if(this.pdfViewer.annotation){var pageDiv=this.getElement('_pageDiv_'+this.pdfViewer.annotation.getEventPageNumber(e));if(pageDiv){var pageCurrentRect=pageDiv.getBoundingClientRect();offsetX=touchArg.changedTouches[0].clientX-pageCurrentRect.left;offsetY=touchArg.changedTouches[0].clientY-pageCurrentRect.top;}}}else{if(e.target.classList.contains('e-pv-hyperlink')){offsetX=e.offsetX+e.target.offsetLeft;offsetY=e.offsetY+e.target.offsetTop;}else if((e.target.classList.contains('e-pv-text')||e.target.classList.contains('e-pdfviewer-formFields')&&e.target.attributes[0].nodeValue!="text"||e.target.classList.contains('e-pdfviewer-signatureformfields'))&&e.target.parentElement){var targetParentRect=e.target.parentElement.getBoundingClientRect();offsetX=e.clientX-targetParentRect.left;offsetY=e.clientY-targetParentRect.top;// eslint-disable-next-line
}else if(e.target.classList.contains('e-pdfviewer-formFields')&&e.target.attributes[0].nodeValue=="text"){var targetParentRect=e.target.parentElement.parentElement.getBoundingClientRect();offsetX=e.clientX-targetParentRect.left;offsetY=e.clientY-targetParentRect.top;// eslint-disable-next-line
}else if(e.target&&e&&e.path&&e.target.parentElement&&e.target.parentElement.classList.contains('foreign-object')){// eslint-disable-next-line
var targetParentRect=e.path[4].getBoundingClientRect();offsetX=e.clientX-targetParentRect.left;offsetY=e.clientY-targetParentRect.top;// eslint-disable-next-line
}else if(e.target&&e&&e.path&&e.target.parentElement&&e.target.parentElement.parentElement.classList.contains('foreign-object')){// eslint-disable-next-line
var targetParentRect=e.path[4].getBoundingClientRect();offsetX=e.clientX-targetParentRect.left;offsetY=e.clientY-targetParentRect.top;}else if(e.target&&e.target.parentElement&&e.target.parentElement.classList.contains('foreign-object')){// eslint-disable-next-line
var targetParentRect=e.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();offsetX=e.clientX-targetParentRect.left;offsetY=e.clientY-targetParentRect.top;// eslint-disable-next-line
}else{offsetX=e.offsetX;offsetY=e.offsetY;}}return{x:offsetX,y:offsetY};};PdfViewerBase.prototype.getMouseEventArgs=function(position,args,evt,source){args.position=position;var obj;if(!source){if(this.action==='Drag'||this.action==='ConnectorSourceEnd'||this.action==='SegmentEnd'||this.action==='OrthoThumb'||this.action==='BezierSourceThumb'||this.action==='BezierTargetThumb'||this.action==='ConnectorTargetEnd'||this.action.indexOf('Rotate')!==-1||this.action.indexOf('Resize')!==-1){obj=this.pdfViewer.selectedItems;if(this.action==='Drag'&&obj&&this.pdfViewer.selectedItems.annotations.length>0){obj=findActiveElement(evt,this,this.pdfViewer);}else if(this.action==='Drag'&&obj&&this.pdfViewer.selectedItems.formFields.length>0){obj=findActiveElement(evt,this,this.pdfViewer);}}else{obj=findActiveElement(evt,this,this.pdfViewer);}}else{//   objects = this.diagram.findObjectsUnderMouse(this.currentPosition, source);
obj=findActiveElement(evt,this,this.pdfViewer);}var wrapper;if(obj){wrapper=obj.wrapper;}if(!source){args.source=obj;args.sourceWrapper=wrapper;}else{args.target=obj;args.targetWrapper=wrapper;}args.actualObject=this.eventArgs.actualObject;//args.startTouches = this.touchStartList;
//args.moveTouches = this.touchMoveList;
return args;};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - The object.
     * @param {PointModel} position - The position.
     * @returns {Actions | string} - Returns the string.
     */PdfViewerBase.prototype.findToolToActivate=function(obj,position){position={x:position.x/this.getZoomFactor(),y:position.y/this.getZoomFactor()};var element=this.pdfViewer.selectedItems.wrapper;if(element&&obj){var selectorBnds=element.bounds;//let handle: SelectorModel = diagram.selectedItems;
var paddedBounds=new sf.drawings.Rect(selectorBnds.x,selectorBnds.y,selectorBnds.width,selectorBnds.height);if(obj.shapeAnnotationType==='Line'||obj.shapeAnnotationType==='LineWidthArrowHead'||obj.shapeAnnotationType==='Distance'||obj.shapeAnnotationType==='Polygon'){var conn=this.pdfViewer.selectedItems.annotations[0];if(conn){for(var i=0;i<conn.vertexPoints.length;i++){if(sf.drawings.contains(position,conn.vertexPoints[i],10)&&conn.leaderHeight!==0){return'ConnectorSegmentPoint_'+i;}}}}if(obj.shapeAnnotationType==='Distance'){var leaderCount=0;var newPoint1=void 0;if(obj&&obj.wrapper){for(var i=0;i<obj.wrapper.children.length;i++){var elementAngle=sf.drawings.Point.findAngle(obj.sourcePoint,obj.targetPoint);// eslint-disable-next-line
var segment=obj.wrapper.children[i];if(segment.id.indexOf('leader')>-1){var centerPoint=obj.wrapper.children[0].bounds.center;if(leaderCount===0){newPoint1={x:obj.sourcePoint.x,y:obj.sourcePoint.y-obj.leaderHeight};centerPoint=obj.sourcePoint;}else{newPoint1={x:obj.targetPoint.x,y:obj.targetPoint.y-obj.leaderHeight};centerPoint=obj.targetPoint;}var matrix_1=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix_1,elementAngle,centerPoint.x,centerPoint.y);var rotatedPoint=sf.drawings.transformPointByMatrix(matrix_1,{x:newPoint1.x,y:newPoint1.y});if(sf.drawings.contains(position,rotatedPoint,10)){return'Leader'+leaderCount;}leaderCount++;}}}}var ten=10/this.getZoomFactor();var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,obj.rotateAngle+element.parentTransform,element.offsetX,element.offsetY);//check for resizing tool
var x=element.offsetX-element.pivot.x*element.actualSize.width;var y=element.offsetY-element.pivot.y*element.actualSize.height;var rotateThumb={x:x+(element.pivot.x===0.5?element.pivot.x*2:element.pivot.x)*element.actualSize.width/2,y:y-30/this.getZoomFactor()};rotateThumb=sf.drawings.transformPointByMatrix(matrix,rotateThumb);if(obj.shapeAnnotationType==='Stamp'&&sf.drawings.contains(position,rotateThumb,ten)){return'Rotate';}paddedBounds=this.inflate(ten,paddedBounds);if(paddedBounds.containsPoint(position,0)){var action=this.checkResizeHandles(this.pdfViewer,element,position,matrix,x,y);if(action){return action;}}if(this.pdfViewer.selectedItems.annotations.indexOf(obj)>-1){return'Drag';}else if(this.pdfViewer.selectedItems.formFields.indexOf(obj)>-1&&this.pdfViewer.designerMode){return'Drag';}return'Select';}return this.pdfViewer.tool||'Select';};PdfViewerBase.prototype.inflate=function(padding,bound){bound.x-=padding;bound.y-=padding;bound.width+=padding*2;bound.height+=padding*2;return bound;};PdfViewerBase.prototype.checkResizeHandles=function(diagram,element,position,matrix,x,y){var action;if(!action){action=this.checkForResizeHandles(diagram,element,position,matrix,x,y);}if(action){return action;}return null;};PdfViewerBase.prototype.checkForResizeHandles=function(diagram,element,position,matrix,x,y){var forty=40/1;var ten=10/1;if(element.actualSize.width<40||element.actualSize.height<40){ten=5*this.getZoomFactor()/1;}var selectedItems=diagram.selectedItems;var isStamp=false;var isSticky=false;var isNodeShape=false;var isInk=false;var resizerLocation=this.pdfViewer.annotationSelectorSettings.resizerLocation;if(resizerLocation<1||resizerLocation>3){resizerLocation=3;}// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Stamp'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='FreeText'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Image'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='HandWrittenSignature'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureText'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureImage')){isStamp=true;}// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0]&&this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='StickyNotes'){isSticky=true;}// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0]&&this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Ink'){isInk=true;}// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Ellipse'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Radius'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Rectangle')){isNodeShape=true;}if(!isSticky){// eslint-disable-next-line max-len
if(isInk||isStamp||this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='HandWrittenSignature'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureText'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureImage')||element.actualSize.width>=forty&&element.actualSize.height>=forty&&isNodeShape&&(resizerLocation===1||resizerLocation===3)){if(sf.drawings.contains(position,sf.drawings.transformPointByMatrix(matrix,{x:x+element.actualSize.width,y:y+element.actualSize.height}),ten)){return'ResizeSouthEast';}if(sf.drawings.contains(position,sf.drawings.transformPointByMatrix(matrix,{x:x,y:y+element.actualSize.height}),ten)){return'ResizeSouthWest';}if(sf.drawings.contains(position,sf.drawings.transformPointByMatrix(matrix,{x:x+element.actualSize.width,y:y}),ten)){return'ResizeNorthEast';}if(sf.drawings.contains(position,sf.drawings.transformPointByMatrix(matrix,{x:x,y:y}),ten)){return'ResizeNorthWest';}}// eslint-disable-next-line max-len
if(isInk||!isNodeShape||isNodeShape&&(resizerLocation===2||resizerLocation===3||!(element.actualSize.width>=forty&&element.actualSize.height>=forty)&&resizerLocation===1)){if(sf.drawings.contains(// eslint-disable-next-line max-len
position,sf.drawings.transformPointByMatrix(matrix,{x:x+element.actualSize.width,y:y+element.actualSize.height/2}),ten)&&!isStamp){return'ResizeEast';}// eslint-disable-next-line max-len
if(sf.drawings.contains(position,sf.drawings.transformPointByMatrix(matrix,{x:x,y:y+element.actualSize.height/2}),ten)&&!isStamp){return'ResizeWest';}if(sf.drawings.contains(// eslint-disable-next-line max-len
position,sf.drawings.transformPointByMatrix(matrix,{x:x+element.actualSize.width/2,y:y+element.actualSize.height}),ten)&&!isStamp){return'ResizeSouth';}// eslint-disable-next-line max-len
if(sf.drawings.contains(position,sf.drawings.transformPointByMatrix(matrix,{x:x+element.actualSize.width/2,y:y}),ten)&&!isStamp){return'ResizeNorth';}}}return null;};/**
     * @private
     * @param {string} fieldID - The fieldID
     * @returns {boolean} - Returns true or false.
     */PdfViewerBase.prototype.checkSignatureFormField=function(fieldID){var isFormFieldSign=false;// eslint-disable-next-line
var formField=this.pdfViewer.nameTable[fieldID];if(formField){if(formField.formFieldAnnotationType==='SignatureField'||formField.formFieldAnnotationType==='InitialField'||formField.annotName==='SignatureField'){isFormFieldSign=true;}}return isFormFieldSign;};/**
     * @private
     * @param {MouseEvent | TouchEvent} evt - The event.
     * @returns {void}
     */PdfViewerBase.prototype.diagramMouseMove=function(evt){var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);this.currentPosition=this.getMousePosition(evt);this.pdfViewer.firePageMouseover(this.currentPosition.x,this.currentPosition.y);if(this.pdfViewer.annotation){this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(evt);}else if(this.pdfViewer.formDesignerModule){this.activeElements.activePageID=this.pdfViewer.formDesignerModule.getEventPageNumber(evt);}var obj=findActiveElement(evt,this,this.pdfViewer);if(this.tool instanceof NodeDrawingTool||this.tool instanceof LineTool){obj=this.pdfViewer.drawingObject;}var target;var isFormFieldSign=this.pdfViewer.selectedItems.annotations.length>0?this.checkSignatureFormField(this.pdfViewer.selectedItems.annotations[0].id):false;if(sf.drawings.Point.equals(this.currentPosition,this.prevPosition)===false||this.inAction){if(this.isMouseDown===false){this.eventArgs={};var sourceDrawingElement=null;if(obj){this.tool=this.getTool(this.action);if(obj.wrapper){sourceDrawingElement=obj.wrapper.children[0];if(sourceDrawingElement){target=obj;}}}var eventTarget=evt.target;this.action=this.findToolToActivate(obj,this.currentPosition);// eslint-disable-next-line
if(obj&&obj.annotationSettings&&obj.annotationSettings.isLock){if(this.action==='Select'){if(!this.pdfViewer.annotationModule.checkAllowedInteractions('Select',obj)){this.action='';}}if(this.action==='Drag'){if(!this.pdfViewer.annotationModule.checkAllowedInteractions('Move',obj)){this.action='Select';}}// eslint-disable-next-line max-len
if(this.action==='ResizeSouthEast'||this.action==='ResizeNorthEast'||this.action==='ResizeNorthWest'||this.action==='ResizeSouthWest'||// eslint-disable-next-line max-len
this.action==='ResizeNorth'||this.action==='ResizeWest'||this.action==='ResizeEast'||this.action==='ResizeSouth'||this.action.includes('ConnectorSegmentPoint')||this.action.includes('Leader')){if(!this.pdfViewer.annotationModule.checkAllowedInteractions('Resize',obj)){this.action='Select';}}}// eslint-disable-next-line max-len
if(!this.pdfViewer.designerMode&&(!sf.base.isNullOrUndefined(target)&&!sf.base.isNullOrUndefined(target.formFieldAnnotationType)||isFormFieldSign)){if(this.action==='ResizeSouthEast'||this.action==='ResizeNorthEast'||this.action==='ResizeNorthWest'||this.action==='ResizeSouthWest'||// eslint-disable-next-line max-len
this.action==='ResizeNorth'||this.action==='Drag'||this.action==='ResizeWest'||this.action==='ResizeEast'||this.action==='ResizeSouth'||this.action.includes('ConnectorSegmentPoint')||this.action.includes('Leader')){this.action='';}}this.tool=this.getTool(this.action);this.setCursor(eventTarget,evt);if(this.pdfViewer.linkAnnotationModule){this.pdfViewer.linkAnnotationModule.disableHyperlinkNavigationUnderObjects(eventTarget,evt,this);}}else{if(!this.tool&&this.action&&this.action==='Rotate'){this.tool=this.getTool(this.action);if(evt.target){this.setCursor(evt.target,evt);}}// eslint-disable-next-line max-len
if(!this.pdfViewer.designerMode&&(!sf.base.isNullOrUndefined(target)&&!sf.base.isNullOrUndefined(target.formFieldAnnotationType)||isFormFieldSign)){if(this.action==='ResizeSouthEast'||this.action==='ResizeNorthEast'||this.action==='ResizeNorthWest'||this.action==='ResizeSouthWest'||// eslint-disable-next-line max-len
this.action==='ResizeNorth'||this.action==='Drag'||this.action==='ResizeWest'||this.action==='ResizeEast'||this.action==='ResizeSouth'||this.action.includes('ConnectorSegmentPoint')||this.action.includes('Leader')){this.action='';this.tool=null;}}if(this.eventArgs&&this.eventArgs.source){var eventTarget=evt.target;this.updateDefaultCursor(this.eventArgs.source,eventTarget,evt);}else{this.setCursor(evt.target,evt);}this.diagramMouseActionHelper(evt);if(this.tool){var currentObject=obj;if(currentObject&&currentObject.shapeAnnotationType==='FreeText'){if(this.pdfViewer.freeTextSettings.allowEditTextOnly&&this.action!=="Ink"&&this.eventArgs.source&&this.eventArgs.source.shapeAnnotationType==="FreeText"){var eventTarget=event.target;eventTarget.style.cursor='default';this.tool=null;}}if(this.tool!=null){this.tool.mouseMove(this.eventArgs);}}}if(this.pdfViewer.drawingObject&&this.pdfViewer.drawingObject.formFieldAnnotationType&&this.action!=='Drag'){if(!(this.tool instanceof ResizeTool)){this.tool=this.getTool(this.action);if(this.tool instanceof NodeDrawingTool){var obj_1=this.pdfViewer.drawingObject;// eslint-disable-next-line
var bounds=this.pdfViewer.formDesignerModule.updateFormFieldInitialSize(obj_1,obj_1.formFieldAnnotationType);var pageWidth=this.pageContainer.firstElementChild.clientWidth-bounds.width;var pageHeight=this.pageContainer.firstElementChild.clientHeight-bounds.height;if(this.pdfViewer.formDesignerModule&&obj_1.formFieldAnnotationType&&this.currentPosition.x<pageWidth&&this.currentPosition.y<pageHeight){// eslint-disable-next-line
var formFieldElement=document.getElementById('FormField_helper_html_element');if(!formFieldElement){// eslint-disable-next-line max-len
this.pdfViewer.formDesignerModule.drawHelper(obj_1.formFieldAnnotationType,obj_1,evt);}else if(formFieldElement){// eslint-disable-next-line
var point=this.getMousePosition(event);if(obj_1.formFieldAnnotationType==='Checkbox'){formFieldElement.firstElementChild.firstElementChild.lastElementChild.style.visibility='visible';}else if(obj_1.formFieldAnnotationType==='SignatureField'||obj_1.formFieldAnnotationType==='InitialField'){formFieldElement.firstElementChild.firstElementChild.style.visibility='visible';formFieldElement.firstElementChild.lastElementChild.style.visibility='visible';}else{formFieldElement.firstElementChild.firstElementChild.style.visibility='visible';}formFieldElement.setAttribute('style','height:'+bounds.height+'px; width:'+bounds.width+'px;left:'+point.x+'px; top:'+point.y+'px;'+'position:absolute;opacity: 0.5;');}}else if(this.currentPosition.x>pageWidth||this.currentPosition.y>pageHeight){// eslint-disable-next-line
var formFieldElement=document.getElementById('FormField_helper_html_element');if(!formFieldElement){// eslint-disable-next-line max-len
this.pdfViewer.formDesignerModule.drawHelper(obj_1.formFieldAnnotationType,obj_1,evt);}else if(formFieldElement){// eslint-disable-next-line
var point=this.getMousePosition(event);formFieldElement.setAttribute('style','height:'+bounds.height+'px; width:'+bounds.width+'px;left:'+point.x+'px; top:'+point.y+'px;'+'position:absolute;opacity: 0.5;');if(obj_1.formFieldAnnotationType==='Checkbox'){formFieldElement.firstElementChild.firstElementChild.lastElementChild.style.visibility='hidden';}else if(obj_1.formFieldAnnotationType==='SignatureField'||obj_1.formFieldAnnotationType==='InitialField'){formFieldElement.firstElementChild.firstElementChild.style.visibility='hidden';formFieldElement.firstElementChild.lastElementChild.style.visibility='hidden';}else{formFieldElement.firstElementChild.firstElementChild.style.visibility='hidden';}}}}}}this.prevPosition=this.currentPosition;}this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);};// eslint-disable-next-line
PdfViewerBase.prototype.updateDefaultCursor=function(source,target,event){// eslint-disable-next-line max-len
if(source&&source.pageIndex!==undefined&&source.pageIndex!==this.activeElements.activePageID&&target){// eslint-disable-next-line
this.isPanMode?target.style.cursor='grab':target.style.cursor='default';}else{this.setCursor(target,event);}};/**
     * @private
     * @param {MouseEvent | TouchEvent} evt - The event.
     * @returns {void}
     */PdfViewerBase.prototype.diagramMouseLeave=function(evt){this.currentPosition=this.getMousePosition(evt);if(this.pdfViewer.annotation){this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(evt);}var shapeElement=findActiveElement(evt,this,this.pdfViewer);var mouseMoveforce=false;if(sf.drawings.Point.equals(this.currentPosition,this.prevPosition)===false||this.inAction){if(this.isMouseDown===false||mouseMoveforce){this.eventArgs={};var sourceElement=null;if(shapeElement){sourceElement=shapeElement.wrapper.children[0];mouseMoveforce=false;}}else{this.diagramMouseActionHelper(evt);// eslint-disable-next-line max-len
if(this.tool&&this.action!=='Drag'&&this.pdfViewer.tool!=='Stamp'&&this.tool.currentElement&&this.tool.currentElement.shapeAnnotationType!=='Stamp'){this.tool.mouseLeave(this.eventArgs);this.tool=null;if(this.pdfViewer.annotation){this.pdfViewer.annotationModule.renderAnnotations(this.previousPage,null,null,null);}}}this.prevPosition=this.currentPosition;}};PdfViewerBase.prototype.diagramMouseActionHelper=function(evt){this.eventArgs.position=this.currentPosition;if(this.action==='Drag'&&this.eventArgs.source instanceof Selector){this.getMouseEventArgs(this.currentPosition,this.eventArgs,evt);}this.getMouseEventArgs(this.currentPosition,this.eventArgs,evt,this.eventArgs.source);this.inAction=true;this.initialEventArgs=null;};// eslint-disable-next-line
PdfViewerBase.prototype.setCursor=function(eventTarget,event){// eslint-disable-next-line max-len
var freeTextAnnotModule=this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.freeTextAnnotationModule:null;var cursorType;if(this.tool instanceof ResizeTool){if(this.tool.corner==='ResizeNorthWest'){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'nw-resize':cursorType;}else if(this.tool.corner==='ResizeNorthEast'){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'ne-resize':cursorType;}else if(this.tool.corner==='ResizeSouthWest'){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'sw-resize':cursorType;}else if(this.tool.corner==='ResizeSouthEast'){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'se-resize':cursorType;}else if(this.tool.corner==='ResizeNorth'){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'n-resize':cursorType;}else if(this.tool.corner==='ResizeWest'){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'w-resize':cursorType;}else if(this.tool.corner==='ResizeEast'){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'e-resize':cursorType;}else if(this.tool.corner==='ResizeSouth'){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'s-resize':cursorType;}}else if(this.isCommentIconAdded&&this.isAddComment){eventTarget.style.cursor='crosshair';}else if(this.pdfViewer.enableHandwrittenSignature&&this.isNewSignatureAdded&&this.tool instanceof StampTool){eventTarget.style.cursor='crosshair';}else if(this.tool instanceof MoveTool){eventTarget.style.cursor='move';// eslint-disable-next-line max-len
}else if(this.tool instanceof NodeDrawingTool||this.tool instanceof LineTool||this.tool instanceof PolygonDrawingTool||freeTextAnnotModule&&freeTextAnnotModule.isNewAddedAnnot||this.tool instanceof InkDrawingTool){eventTarget.style.cursor='crosshair';}else if(this.tool instanceof ConnectTool){if(this.tool.endPoint&&this.tool.endPoint.indexOf('Leader0')){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'nw-resize':cursorType;}else if(this.tool.endPoint&&this.tool.endPoint.indexOf('Leader1')){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'ne-resize':cursorType;}else if(this.tool.endPoint&&this.tool.endPoint.indexOf('ConnectorSegmentPoint')){eventTarget.style.cursor='sw-resize';}}else{if(eventTarget.classList.contains('e-pv-text')){eventTarget.style.cursor='text';}else if(eventTarget.classList.contains('e-pv-hyperlink')){eventTarget.style.cursor='pointer';}else if(this.isPanMode){if(this.isViewerMouseDown&&event.type==='mousemove'){eventTarget.style.cursor='grabbing';}else{var obj=findActiveElement(event,this,this.pdfViewer);if(obj&&event.type==='mousemove'){eventTarget.style.cursor='pointer';// eslint-disable-next-line max-len
var currentObject=obj;// eslint-disable-next-line
var currentPosition=this.getMousePosition(event);// eslint-disable-next-line
var relativePosition=this.relativePosition(event);// eslint-disable-next-line
var viewerPositions={left:relativePosition.x,top:relativePosition.y};// eslint-disable-next-line
var mousePositions={left:currentPosition.x,top:currentPosition.y};// eslint-disable-next-line
var annotationSettings={opacity:currentObject.opacity,fillColor:currentObject.fillColor,strokeColor:currentObject.strokeColor,thicknes:currentObject.thickness,author:currentObject.author,subject:currentObject.subject,modifiedDate:currentObject.modifiedDate};// eslint-disable-next-line max-len
this.isMousedOver=true;var isFormField=this.checkSignatureFormField(currentObject.id);if(currentObject.formFieldAnnotationType){this.isFormFieldMousedOver=true;var field_1={// eslint-disable-next-line
value:currentObject.value,fontFamily:currentObject.fontFamily,fontSize:currentObject.fontSize,fontStyle:currentObject.fontStyle,// eslint-disable-next-line max-len
color:currentObject.color,backgroundColor:currentObject.backgroundColor,borderColor:currentObject.borderColor,// eslint-disable-next-line
thickness:currentObject.thickness,alignment:currentObject.alignment,isReadonly:currentObject.isReadonly,visibility:currentObject.visibility,// eslint-disable-next-line
maxLength:currentObject.maxLength,isRequired:currentObject.isRequired,isPrint:currentObject.isPrint,rotation:currentObject.rotateAngle,tooltip:currentObject.tooltip,options:currentObject.options,// eslint-disable-next-line
isChecked:currentObject.isChecked,isSelected:currentObject.isSelected};this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover',field_1,currentObject.pageIndex,relativePosition.x,relativePosition.y,currentPosition.x,currentPosition.y);}else{if(!isFormField)// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationMouseover(currentObject.annotName,currentObject.pageIndex,currentObject.shapeAnnotationType,currentObject.bounds,annotationSettings,mousePositions,viewerPositions);}}else{eventTarget.style.cursor='grab';if(this.isMousedOver){var pageIndex=void 0;if(this.pdfViewer.formDesignerModule){pageIndex=this.pdfViewer.formDesignerModule.getEventPageNumber(event);}else{pageIndex=this.pdfViewer.annotation.getEventPageNumber(event);}if(this.isFormFieldMousedOver){this.pdfViewer.fireFormFieldMouseLeaveEvent('formFieldMouseLeave',null,pageIndex);}else{this.pdfViewer.fireAnnotationMouseLeave(pageIndex);}this.isMousedOver=false;this.isFormFieldMousedOver=false;}}}}else{var obj=findActiveElement(event,this,this.pdfViewer);if(obj&&this.pdfViewer.selectedItems.annotations.length===0&&event.type==='mousemove'){var currentObject=obj;// eslint-disable-next-line
var annotationObject=this.pdfViewer.nameTable[currentObject.id];// eslint-disable-next-line max-len
if(annotationObject.shapeAnnotationType!=='HandWrittenSignature'&&annotationObject.shapeAnnotationType!=='Ink'&&annotationObject.annotationSettings&&annotationObject.annotationSettings.isLock!==undefined){annotationObject.annotationSettings.isLock=JSON.parse(annotationObject.annotationSettings.isLock);}if(annotationObject.annotationSettings&&annotationObject.annotationSettings.isLock){eventTarget.style.cursor='default';}else{eventTarget.style.cursor='pointer';}// eslint-disable-next-line
var currentPosition=this.getMousePosition(event);// eslint-disable-next-line
var relativePosition=this.relativePosition(event);// eslint-disable-next-line
var viewerPositions={left:relativePosition.x,top:relativePosition.y};// eslint-disable-next-line
var mousePositions={left:currentPosition.x,top:currentPosition.y};// eslint-disable-next-line
var annotationSettings={opacity:currentObject.opacity,fillColor:currentObject.fillColor,strokeColor:currentObject.strokeColor,thicknes:currentObject.thickness,author:currentObject.author,subject:currentObject.subject,modifiedDate:currentObject.modifiedDate};// eslint-disable-next-line max-len
this.isMousedOver=true;var isFormField=this.checkSignatureFormField(currentObject.id);if(currentObject.formFieldAnnotationType){this.isFormFieldMousedOver=true;var field_2={// eslint-disable-next-line
value:currentObject.value,fontFamily:currentObject.fontFamily,fontSize:currentObject.fontSize,fontStyle:currentObject.fontStyle,// eslint-disable-next-line max-len
color:currentObject.color,backgroundColor:currentObject.backgroundColor,borderColor:currentObject.borderColor,// eslint-disable-next-line
thickness:currentObject.thickness,alignment:currentObject.alignment,isReadonly:currentObject.isReadonly,visibility:currentObject.visibility,// eslint-disable-next-line
maxLength:currentObject.maxLength,isRequired:currentObject.isRequired,isPrint:currentObject.isPrint,rotation:currentObject.rotateAngle,tooltip:currentObject.tooltip,options:currentObject.options,// eslint-disable-next-line
isChecked:currentObject.isChecked,isSelected:currentObject.isSelected};this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover',field_2,currentObject.pageIndex,relativePosition.x,relativePosition.y,currentPosition.x,currentPosition.y);}else{if(!isFormField)// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationMouseover(currentObject.annotName,currentObject.pageIndex,currentObject.shapeAnnotationType,currentObject.bounds,annotationSettings,mousePositions,viewerPositions);}}else if(!this.pdfViewer.formDesignerModule&&(event.target.classList.contains('e-pdfviewer-formFields')||event.target.classList.contains('e-pdfviewer-signatureformfields'))){var pageIndex=this.pdfViewer.annotation.getEventPageNumber(event);var currentPosition=this.getMousePosition(event);var relativePosition=this.relativePosition(event);var viewerPositions={left:relativePosition.x,top:relativePosition.y};var mousePositions={left:currentPosition.x,top:currentPosition.y};var dataJson=this.getItemFromSessionStorage('_formfields');var data=JSON.parse(dataJson);for(var i=0;i<data.length;i++){if(data[i].FieldName===event.target.name){var field={name:data[i].FieldName};}}this.isMousedOver=true;this.isFormFieldMousedOver=true;this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover',field,pageIndex,relativePosition.x,relativePosition.y,currentPosition.x,currentPosition.y);}else{if(this.isMousedOver){var pageIndex=void 0;if(this.pdfViewer.formDesignerModule){pageIndex=this.pdfViewer.formDesignerModule.getEventPageNumber(event);}else{pageIndex=this.pdfViewer.annotation.getEventPageNumber(event);}if(this.isFormFieldMousedOver){this.pdfViewer.fireFormFieldMouseLeaveEvent('formFieldMouseLeave',null,pageIndex);}else{this.pdfViewer.fireAnnotationMouseLeave(pageIndex);}this.isMousedOver=false;this.isFormFieldMousedOver=false;eventTarget.style.cursor='default';}if(obj&&this.pdfViewer.selectedItems.annotations.length===1&&event.type==='mousemove'){eventTarget.style.cursor='pointer';}else{eventTarget.style.cursor='default';}}}}};PdfViewerBase.prototype.setResizerCursorType=function(){var cursorType;// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0]&&sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType)){if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='FreeText'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings)?this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Stamp'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings)?this.pdfViewer.stampSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='HandWrittenSignature'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureText'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureImage'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings)?this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Ink'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings)?this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerCursorType:null;}else if(!this.pdfViewer.selectedItems.annotations[0].measureType){if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Line'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings)?this.pdfViewer.lineSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='LineWidthArrowHead'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings)?this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Rectangle'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings)?this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Ellipse'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings)?this.pdfViewer.circleSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Polygon'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings)?this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerCursorType:null;}}else if(this.pdfViewer.selectedItems.annotations[0].measureType){if(this.pdfViewer.selectedItems.annotations[0].subject==='Distance calculation'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings)?this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].subject==='Perimeter calculation'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings)?this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].subject==='Area calculation'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings)?this.pdfViewer.areaSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].subject==='Radius calculation'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings)?this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].subject==='Volume calculation'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings)?this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerCursorType:null;}}}else{if(this.pdfViewer.selectedItems.annotations[0]){cursorType=this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType;}}if(!cursorType){cursorType=this.pdfViewer.annotationSelectorSettings.resizerCursorType;}return cursorType;};/**
     * @private
     * @param {Actions | string} action - The actions.
     * @returns {ToolBase} - Returns tools.
     */PdfViewerBase.prototype.getTool=function(action){switch(action){case'Select':return new SelectTool(this.pdfViewer,this);case'Drag':return new MoveTool(this.pdfViewer,this);case'ResizeSouthEast':case'ResizeSouthWest':case'ResizeNorthEast':case'ResizeNorthWest':case'ResizeSouth':case'ResizeNorth':case'ResizeWest':case'ResizeEast':return new ResizeTool(this.pdfViewer,this,action);case'ConnectorSourceEnd':case'ConnectorTargetEnd':case'Leader':case'ConnectorSegmentPoint':return new ConnectTool(this.pdfViewer,this,action);case'DrawTool':return new NodeDrawingTool(this.pdfViewer,this,this.pdfViewer.drawingObject);case'Polygon':return new PolygonDrawingTool(this.pdfViewer,this,'Polygon');case'Distance':return new LineTool(this.pdfViewer,this,'Leader1',undefined);case'Line':return new LineTool(this.pdfViewer,this,'ConnectorSegmentPoint_1',this.pdfViewer.drawingObject);case'Perimeter':return new PolygonDrawingTool(this.pdfViewer,this,'Perimeter');case'Rotate':return new RotateTool(this.pdfViewer,this);case'Stamp':return new StampTool(this.pdfViewer,this);case'Ink':return new InkDrawingTool(this.pdfViewer,this,this.pdfViewer.drawingObject);}if(action.indexOf('ConnectorSegmentPoint')>-1||action.indexOf('Leader')>-1){return new ConnectTool(this.pdfViewer,this,action);}return null;};/**
     * @private
     * @param {MouseEvent | TouchEvent} evt - The events.
     * @returns {void}
     */PdfViewerBase.prototype.diagramMouseUp=function(evt){var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);var touches;if(this.tool){if(!this.inAction&&evt.which!==3){if(this.action==='Drag'){this.action='Select';var obj=findActiveElement(evt,this,this.pdfViewer);}}if(!(this.tool instanceof PolygonDrawingTool)&&!(this.tool instanceof LineTool)&&!(this.tool instanceof NodeDrawingTool)){this.inAction=false;this.isMouseDown=false;}this.currentPosition=this.getMousePosition(evt);if(this.tool){this.eventArgs.position=this.currentPosition;this.getMouseEventArgs(this.currentPosition,this.eventArgs,evt,this.eventArgs.source);var ctrlKey=this.isMetaKey(evt);var info={ctrlKey:evt.ctrlKey,shiftKey:evt.shiftKey};this.eventArgs.info=info;this.eventArgs.clickCount=evt.detail;this.tool.mouseUp(this.eventArgs);this.isAnnotationMouseDown=false;this.isFormFieldMouseDown=false;// eslint-disable-next-line max-len
if((this.tool instanceof NodeDrawingTool||this.tool instanceof LineTool||this.tool instanceof PolygonDrawingTool)&&!this.tool.dragging){this.inAction=false;this.isMouseDown=false;}var obj=findActiveElement(evt,this,this.pdfViewer);// eslint-disable-next-line max-len
if(this.isShapeAnnotationModule()&&this.isCalibrateAnnotationModule()){this.pdfViewer.annotation.onShapesMouseup(obj,evt);}this.isAnnotationDrawn=false;}}var target=evt.target;// eslint-disable-next-line max-len
if(!touches&&evt.cancelable&&this.skipPreventDefault(target)&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)){evt.preventDefault();}this.eventArgs={};this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);};/**
     * @private
     * @param {HTMLElement} target - The target.
     * @returns {boolean} - Returns true or false.
     */PdfViewerBase.prototype.skipPreventDefault=function(target){var isSkipped=false;var isSkip=false;// eslint-disable-next-line max-len
if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus){isSkip=true;}// eslint-disable-next-line max-len
if(target.parentElement&&target.parentElement.className!=='foreign-object'&&!target.classList.contains('e-pv-radio-btn')&&!target.classList.contains('e-pv-radiobtn-span')&&!target.classList.contains('e-pv-checkbox-div')&&!target.classList.contains('e-pdfviewer-formFields')&&!target.classList.contains('e-pdfviewer-ListBox')&&!target.classList.contains('e-pdfviewer-signatureformfields')&&!(target.className==='free-text-input'&&target.tagName==='TEXTAREA')&&!isSkip&&!(target.className==='e-pv-hyperlink')){isSkipped=true;}return isSkipped;};PdfViewerBase.prototype.isMetaKey=function(evt){return navigator.platform.match('Mac')?evt.metaKey:evt.ctrlKey;};/**
     * @private
     * @param {MouseEvent | TouchEvent} evt - The events.
     * @returns {void}
     */PdfViewerBase.prototype.diagramMouseDown=function(evt){var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);var touches=null;touches=evt.touches;this.isMouseDown=true;this.isAnnotationAdded=false;this.currentPosition=this.prevPosition=this.getMousePosition(evt);this.eventArgs={};var isStamp=false;if(this.pdfViewer.tool==='Stamp'){this.pdfViewer.tool='';isStamp=true;}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.annotation){this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(evt);}var obj=findActiveElement(evt,this,this.pdfViewer);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&obj&&!(obj instanceof PdfFormFieldBase)){evt.preventDefault();}if(this.pdfViewer.annotation&&this.pdfViewer.enableStampAnnotations){var stampModule=this.pdfViewer.annotationModule.stampAnnotationModule;if(stampModule&&stampModule.isNewStampAnnot){var stampObj=obj;if(!stampObj&&this.pdfViewer.selectedItems.annotations[0]){stampObj=this.pdfViewer.selectedItems.annotations[0];}if(stampObj){this.isViewerMouseDown=false;stampObj.opacity=this.pdfViewer.stampSettings.opacity;this.isNewStamp=true;var opacity=void 0;if(stampObj.shapeAnnotationType==='Image'){opacity=this.pdfViewer.customStampSettings.opacity;}else{opacity=this.pdfViewer.stampSettings.opacity;}// eslint-disable-next-line max-len
this.pdfViewer.nodePropertyChange(stampObj,{opacity:opacity});this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=false;if(stampObj.shapeAnnotationType==='Image'&&!this.isAlreadyAdded){this.stampAdded=true;var stampName=stampObj.id;if(stampModule.currentStampAnnotation&&stampModule.currentStampAnnotation.signatureName){stampName=stampModule.currentStampAnnotation.signatureName;}var isSkip=false;for(var i=0;i<this.customStampCollection.length;i++){if(this.customStampCollection[i].customStampName===stampName){isSkip=true;break;}}if(isSkip){stampName=stampObj.id;}stampName=stampModule.customStampName?stampModule.customStampName:stampModule.currentStampAnnotation.signatureName;this.customStampCollection.push({customStampName:stampName,customStampImageSource:stampObj.data});}if(this.pdfViewer.customStampSettings.enableCustomStamp&&this.pdfViewer.customStampSettings.isAddToMenu){this.stampAdded=true;}this.isAlreadyAdded=false;stampModule.updateDeleteItems(stampObj.pageIndex,stampObj,stampObj.opacity);stampModule.resetAnnotation();stampModule.isNewStampAnnot=false;}}}if(this.isNewSignatureAdded){this.signatureCount++;this.currentSignatureAnnot=null;var signObject=obj;if(sf.base.isNullOrUndefined(signObject)&&this.pdfViewer.selectedItems.annotations[0]){signObject=this.pdfViewer.selectedItems.annotations[0];}if(signObject){this.signatureAdded=true;this.signatureModule.storeSignatureData(signObject.pageIndex,signObject);// eslint-disable-next-line
var bounds={left:signObject.bounds.x,top:signObject.bounds.y,width:signObject.bounds.width,height:signObject.bounds.height};// eslint-disable-next-line max-len
this.pdfViewer.fireSignatureAdd(signObject.pageIndex,signObject.signatureName,signObject.shapeAnnotationType,bounds,signObject.opacity,signObject.strokeColor,signObject.thickness,this.signatureModule.saveImageString);}this.isNewSignatureAdded=false;}if(this.pdfViewer.annotationModule){var freeTextAnnotModule=this.pdfViewer.annotationModule.freeTextAnnotationModule;var canvasPaddingLeft=5,canvasPaddingWidth=10;// eslint-disable-next-line
if(freeTextAnnotModule.isNewFreeTextAnnot===true){var canvas=void 0;// eslint-disable-next-line max-len
if(evt.target&&(evt.target.id.indexOf('_text')>-1||evt.target.id.indexOf('_annotationCanvas')>-1||evt.target.classList.contains('e-pv-hyperlink'))&&this.pdfViewer.annotation){var pageIndex=this.pdfViewer.annotation.getEventPageNumber(evt);var diagram=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);if(diagram){var canvas1=diagram.getBoundingClientRect();var left=canvas1.x?canvas1.x:canvas1.left;var top_4=canvas1.y?canvas1.y:canvas1.top;canvas=new sf.drawings.Rect(left+canvasPaddingLeft,top_4+canvasPaddingLeft,canvas1.width-canvasPaddingWidth,canvas1.height-canvasPaddingWidth);}}if(touches){this.mouseX=touches[0].clientX;this.mouseY=touches[0].clientY;}if(canvas&&canvas.containsPoint({x:this.mouseX,y:this.mouseY})&&freeTextAnnotModule.isNewAddedAnnot){var pageIndex=this.pdfViewer.annotation.getEventPageNumber(evt);if(!this.pdfViewer.freeTextSettings.enableAutoFit){var zoomFactor=this.getZoomFactor();var width=this.currentPosition.x+freeTextAnnotModule.defautWidth*zoomFactor;var pageWidth=this.getPageWidth(pageIndex);if(width>=pageWidth){this.currentPosition.x=pageWidth-freeTextAnnotModule.defautWidth*zoomFactor;this.currentPosition.x<=0?this.currentPosition.x=canvasPaddingLeft:this.currentPosition.x;freeTextAnnotModule.defautWidth=freeTextAnnotModule.defautWidth*zoomFactor>=pageWidth?pageWidth-canvasPaddingWidth:freeTextAnnotModule.defautWidth;}}freeTextAnnotModule.addInuptElemet(this.currentPosition,null,pageIndex);if(this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule){// eslint-disable-next-line
var annotModule=this.pdfViewer.toolbar.annotationToolbarModule;if(!sf.base.isBlazor()){annotModule.primaryToolbar.deSelectItem(annotModule.freeTextEditItem);}}evt.preventDefault();freeTextAnnotModule.isNewAddedAnnot=false;}}}var sourceElement=null;if(obj){sourceElement=obj.wrapper.children[0];}if(!this.tool||this.tool&&!this.tool.drawingObject){if(!isStamp){this.action=this.findToolToActivate(obj,this.currentPosition);// eslint-disable-next-line
if(obj&&obj.annotationSettings&&obj.annotationSettings.isLock){if(this.action==='Select'){if(!this.pdfViewer.annotationModule.checkAllowedInteractions('Select',obj)){this.action='';}}if(this.action==='Drag'){if(!this.pdfViewer.annotationModule.checkAllowedInteractions('Move',obj)){this.action='Select';}}if(this.action==='Rotate'){this.action='Select';}// eslint-disable-next-line max-len
if(this.action==='ResizeSouthEast'||this.action==='ResizeNorthEast'||this.action==='ResizeNorthWest'||this.action==='ResizeSouthWest'||this.action==='ResizeSouth'||// eslint-disable-next-line max-len
this.action==='ResizeNorth'||this.action==='ResizeWest'||this.action==='ResizeEast'||this.action.includes('ConnectorSegmentPoint')||this.action.includes('Leader')){if(!this.pdfViewer.annotationModule.checkAllowedInteractions('Resize',obj)){this.action='Select';}}}this.tool=this.getTool(this.action);if(!this.tool){this.action=this.pdfViewer.tool||'Select';this.tool=this.getTool(this.action);}}else{this.action='Select';this.tool=this.getTool(this.action);}}this.getMouseEventArgs(this.currentPosition,this.eventArgs,evt);this.eventArgs.position=this.currentPosition;if(this.tool){this.isAnnotationMouseDown=false;this.isFormFieldMouseDown=false;this.isAnnotationMouseMove=false;this.isFormFieldMouseMove=false;this.tool.mouseDown(this.eventArgs);this.isAnnotationDrawn=true;this.signatureAdded=true;}if(this.pdfViewer.annotation){this.pdfViewer.annotation.onAnnotationMouseDown();}if(this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.formFields.length===1){if(!sf.base.isNullOrUndefined(this.pdfViewer.toolbar)&&!sf.base.isNullOrUndefined(this.pdfViewer.toolbar.formDesignerToolbarModule)){this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(true);}}var signatureFieldAnnotation=this.pdfViewer.selectedItems.annotations.length===1?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split('_')[0]+'_content']:null;if(!signatureFieldAnnotation){signatureFieldAnnotation=this.pdfViewer.selectedItems.annotations.length===1?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id]:null;}// eslint-disable-next-line max-len
if(this.eventArgs&&this.eventArgs.source&&(this.eventArgs.source.formFieldAnnotationType||signatureFieldAnnotation)&&!this.pdfViewer.designerMode){var currentObject=void 0;if(signatureFieldAnnotation){currentObject=this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split('_')[0]];}else{currentObject=this.eventArgs.source;}if(!currentObject){currentObject=this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function(el){return el.id===signatureFieldAnnotation.id;})];}if(currentObject){// eslint-disable-next-line
var field={// eslint-disable-next-line max-len
id:currentObject.id,fontFamily:currentObject.fontFamily,fontSize:currentObject.fontSize,fontStyle:currentObject.fontStyle,// eslint-disable-next-line
color:currentObject.color,value:currentObject.value,type:currentObject.formFieldAnnotationType?currentObject.formFieldAnnotationType:currentObject.type,backgroundColor:currentObject.backgroundColor,alignment:currentObject.alignment};var target_1=document.getElementById(currentObject.id);target_1=target_1?target_1:document.getElementById(currentObject.id+'_content_html_element')?document.getElementById(currentObject.id+'_content_html_element').children[0].children[0]:null;if(target_1){this.currentTarget=target_1;this.pdfViewer.fireFormFieldClickEvent('formFieldClicked',field,false,evt.button===0);}}}this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper};this.initialEventArgs.position=this.currentPosition;this.initialEventArgs.info=this.eventArgs.info;this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);};/**
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.exportAnnotationsAsObject=function(){var _this=this;if(this.pdfViewer.annotationModule){var isAnnotations=this.updateExportItem();if(isAnnotations){return new Promise(function(resolve,reject){_this.createRequestForExportAnnotations(true,AnnotationDataFormat.Json).then(function(value){resolve(value);});});}}};/**
     * @private
     * @param {string} type - The type.
     */ // eslint-disable-next-line
PdfViewerBase.prototype.getItemFromSessionStorage=function(type){if(this.isStorageExceed){return this.formFieldStorage[this.documentId+type];}else{return window.sessionStorage.getItem(this.documentId+type);}};/**
     * @param textDiv
     * @param left
     * @param top
     * @param fontHeight
     * @param width
     * @param height
     * @param isPrint
     * @param textDiv
     * @param left
     * @param top
     * @param fontHeight
     * @param width
     * @param height
     * @param isPrint
     * @param textDiv
     * @param left
     * @param top
     * @param fontHeight
     * @param width
     * @param height
     * @param isPrint
     * @param textDiv
     * @param left
     * @param top
     * @param fontHeight
     * @param width
     * @param height
     * @param isPrint
     * @param textDiv
     * @param left
     * @param top
     * @param fontHeight
     * @param width
     * @param height
     * @param isPrint
     * @private
     */ // eslint-disable-next-line max-len
PdfViewerBase.prototype.setStyleToTextDiv=function(textDiv,left,top,fontHeight,width,height,isPrint,isParentDiv,insertSpaceValue){var zoomvalue=this.getZoomFactor();if(isPrint){zoomvalue=1;textDiv.style.position='absolute';}textDiv.style.left=left*zoomvalue+'px';textDiv.style.top=top*zoomvalue+'px';textDiv.style.height=height*zoomvalue+'px';textDiv.style.width=width*zoomvalue+'px';textDiv.style.margin='0px';var floatProp='float';textDiv.style[floatProp]='left';if(fontHeight>0&&(!isParentDiv||!insertSpaceValue)){textDiv.style.fontSize=fontHeight*zoomvalue+'px';}};/**
     * @param number
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.ConvertPointToPixel=function(number){return number*(96/72);};/**
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.setItemInSessionStorage=function(formFieldsData,type){// eslint-disable-next-line
var formFieldsSize=Math.round(JSON.stringify(formFieldsData).length/1024);if(formFieldsSize>4500){this.isStorageExceed=true;if(this.pdfViewer.formFieldsModule){this.pdfViewer.formFieldsModule.clearFormFieldStorage();}}if(this.isStorageExceed){this.formFieldStorage[this.documentId+type]=JSON.stringify(formFieldsData);}else{window.sessionStorage.setItem(this.documentId+type,JSON.stringify(formFieldsData));}};/**
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.exportFormFieldsAsObject=function(){var _this=this;if(this.pdfViewer.formFieldsModule){return new Promise(function(resolve,reject){_this.createRequestForExportFormfields(true).then(function(value){resolve(value);});});}};/**
     * @param importData
     * @param annotationDataFormat
     * @param isXfdf
     * @param importData
     * @param annotationDataFormat
     * @param isXfdf
     * @param importData
     * @param annotationDataFormat
     * @param isXfdf
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.importAnnotations=function(importData,annotationDataFormat,isXfdf){if(this.pdfViewer.annotationModule){this.createRequestForImportAnnotations(importData,annotationDataFormat,isXfdf);var xfdfFileObj=document.getElementById(this.pdfViewer.dataId+"_annotationXFdfUploadElement");xfdfFileObj.value="";var jsonFileObj=document.getElementById(this.pdfViewer.dataId+"_annotationUploadElement");jsonFileObj.value="";}};/**
     * @private
     * @param {AnnotationDataFormat} annotationDataFormat - The annotationDataFormat.
     * @returns {void}
     */PdfViewerBase.prototype.exportAnnotations=function(annotationDataFormat){if(this.pdfViewer.annotationModule){var isAnnotations=this.updateExportItem();if(isAnnotations){this.createRequestForExportAnnotations(false,annotationDataFormat);}}};/**
     * @param isObject
     * @param annotationDataFormat
     * @param isBase64String
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.createRequestForExportAnnotations=function(isObject,annotationDataFormat,isBase64String){var _this=this;var proxy=null;proxy=this;var promise=new Promise(function(resolve,reject){// eslint-disable-next-line
var jsonObject;jsonObject=_this.constructJsonDownload();jsonObject.annotationDataFormat=annotationDataFormat;// eslint-disable-next-line
jsonObject['action']='ExportAnnotations';proxy.pdfViewer.fireExportStart(jsonObject);if(proxy.jsonDocumentId){// eslint-disable-next-line
jsonObject.document=proxy.jsonDocumentId;}var url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.exportAnnotations;proxy.exportAnnotationRequestHandler=new AjaxHandler(_this.pdfViewer);proxy.exportAnnotationRequestHandler.url=url;proxy.exportAnnotationRequestHandler.mode=true;proxy.exportAnnotationRequestHandler.responseType='text';proxy.exportAnnotationRequestHandler.send(jsonObject);// eslint-disable-next-line
proxy.exportAnnotationRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)==='object'){data=JSON.parse(data);}if(data){var isCancel=proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.exportAnnotations,data);if(isObject||isBase64String&&!sf.base.isBlazor()){if(data.split('base64,')[1]){var exportObject=data;// eslint-disable-next-line 
var annotationJson=atob(data.split(',')[1]);if(isObject){if(jsonObject.annotationDataFormat==='Json'){exportObject=JSON.parse(annotationJson);}else{exportObject=annotationJson;}}if(proxy.pdfViewer.exportAnnotationFileName!==null){proxy.pdfViewer.fireExportSuccess(exportObject,proxy.pdfViewer.exportAnnotationFileName);}else{proxy.pdfViewer.fireExportSuccess(exportObject,proxy.pdfViewer.fileName);}proxy.updateDocumentAnnotationCollections();if(isBase64String){resolve(data);}else{resolve(annotationJson);}}else{// eslint-disable-next-line max-len
proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation,proxy.pdfViewer.localeObj.getConstant('Export Failed'));}}else{if(annotationDataFormat==='Json'){if(data.split('base64,')[1]){if(!isCancel){var blobUrl=proxy.createBlobUrl(data.split('base64,')[1],'application/json');if(sf.base.Browser.isIE||sf.base.Browser.info.name==='edge'){if(proxy.pdfViewer.exportAnnotationFileName!==null){// eslint-disable-next-line max-len
window.navigator.msSaveOrOpenBlob(blobUrl,proxy.pdfViewer.exportAnnotationFileName.split('.')[0]+'.json');}else{window.navigator.msSaveOrOpenBlob(blobUrl,proxy.pdfViewer.fileName.split('.')[0]+'.json');}}else{proxy.downloadExportAnnotationJson(blobUrl);}proxy.updateDocumentAnnotationCollections();}else{return data;}}else{if(sf.base.isBlazor()){var promise_2=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_ExportFailed');promise_2.then(function(value){proxy.openImportExportNotificationPopup(value);});}else{proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('Export Failed'));}// eslint-disable-next-line max-len
proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation,proxy.pdfViewer.localeObj.getConstant('Export Failed'));}}else{if(data.split('base64,')[1]){if(!isCancel){var blobUrl=proxy.createBlobUrl(data.split('base64,')[1],'application/vnd.adobe.xfdf');if(sf.base.Browser.isIE||sf.base.Browser.info.name==='edge'){window.navigator.msSaveOrOpenBlob(blobUrl,proxy.pdfViewer.fileName.split('.')[0]+'.xfdf');}else{proxy.downloadExportedXFdfAnnotation(blobUrl);}}else{return data;}}else{if(sf.base.isBlazor()){var promise_3=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_ExportFailed');promise_3.then(function(value){proxy.openImportExportNotificationPopup(value);});}else{proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('Export Failed'));}// eslint-disable-next-line max-len
proxy.pdfViewer.fireExportFailed(jsonObject,proxy.pdfViewer.localeObj.getConstant('Export Failed'));}}}}if(typeof data!=='string'){try{if(typeof data==='string'){proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.exportAnnotations);data=null;}}catch(error){// eslint-disable-next-line max-len
proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation,proxy.pdfViewer.localeObj.getConstant('Export Failed'));proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.exportAnnotations);data=null;}}}else{var fileName=void 0;if(proxy.pdfViewer.exportAnnotationFileName!==null){fileName=proxy.pdfViewer.exportAnnotationFileName;}else{fileName=proxy.pdfViewer.fileName;}proxy.pdfViewer.fireExportSuccess('Exported data saved in server side successfully',fileName);}};// eslint-disable-next-line
proxy.exportAnnotationRequestHandler.onFailure=function(result){proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation,result.statusText);};// eslint-disable-next-line
proxy.exportAnnotationRequestHandler.onError=function(result){proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation,result.statusText);};});if(isObject||isBase64String){return promise;}else{return true;}};/**
        * @private
        */PdfViewerBase.prototype.updateModifiedDateToLocalDate=function(newData,annotationType){if(newData[annotationType]&&newData[annotationType].length>0){var data=newData[annotationType];if(data){for(var j=0;j<data.length;j++){data[j].ModifiedDate=this.convertUTCDateToLocalDate(data[j].ModifiedDate);if(data[j].Comments){for(var i=0;i<data[j].Comments.length;i++){data[j].Comments[i].ModifiedDate=this.convertUTCDateToLocalDate(data[j].Comments[i].ModifiedDate);}}}}}};/**
     * @private
     */PdfViewerBase.prototype.convertUTCDateToLocalDate=function(date){var dateTime=new Date(Date.parse(date+' '+'UTC'));this.globalize=new sf.base.Internationalization(this.pdfViewer.locale);var timeValue=dateTime.toLocaleTimeString("en-us");var newDate=dateTime.toLocaleDateString("en-us");var dateTimeValue=newDate+','+' '+timeValue;return dateTimeValue;};// eslint-disable-next-line
PdfViewerBase.prototype.createRequestForImportAnnotations=function(importData,annotationDataFormat,isXfdf){var jsonObject;var proxy=null;proxy=this;if(!isXfdf&&proxy.isPDFViewerJson){this.isJsonImported=true;}else{this.isJsonImported=false;}if(_typeof(importData)==='object'){if(importData&&importData.pdfAnnotation){var newArray=Object.keys(importData.pdfAnnotation);for(var i=0;i<newArray.length;i++){var newData=importData.pdfAnnotation[newArray[i]];this.updateModifiedDateToLocalDate(newData,"freeTextAnnotation");this.updateModifiedDateToLocalDate(newData,"measureShapeAnnotation");this.updateModifiedDateToLocalDate(newData,"shapeAnnotation");this.updateModifiedDateToLocalDate(newData,"signatureAnnotation");this.updateModifiedDateToLocalDate(newData,"signatureInkAnnotation");this.updateModifiedDateToLocalDate(newData,"stampAnnotations");this.updateModifiedDateToLocalDate(newData,"stickyNotesAnnotation");this.updateModifiedDateToLocalDate(newData,"textMarkupAnnotation");}}proxy.reRenderAnnotations(importData.pdfAnnotation);proxy.isImportedAnnotation=true;proxy.updateDocumentEditedProperty(true);if(!this.isAddAnnotation){proxy.pdfViewer.fireImportSuccess(importData.pdfAnnotation);}}else{proxy.pdfViewer.fireImportStart(importData);if(annotationDataFormat==='Json'){// eslint-disable-next-line max-len
if(proxy.isPDFViewerJson){jsonObject={fileName:importData,action:'ImportAnnotations',elementId:proxy.pdfViewer.element.id,hashId:proxy.hashId,uniqueId:proxy.documentId};}else{jsonObject={importedData:importData,action:'ImportAnnotations',elementId:proxy.pdfViewer.element.id,hashId:proxy.hashId,uniqueId:proxy.documentId,annotationDataFormat:annotationDataFormat};}}else{if(!isXfdf){importData=btoa(importData);}importData=importData.split(',')[1]?importData.split(',')[1]:importData.split(',')[0];// eslint-disable-next-line max-len
jsonObject={importedData:importData,action:'ImportAnnotations',elementId:proxy.pdfViewer.element.id,hashId:proxy.hashId,uniqueId:proxy.documentId,annotationDataFormat:annotationDataFormat};}jsonObject=Object.assign(jsonObject,this.constructJsonDownload());jsonObject["action"]='ImportAnnotations';if(proxy.jsonDocumentId){// eslint-disable-next-line
if(jsonObject.documentId){delete jsonObject['documentId'];}jsonObject.document=proxy.jsonDocumentId;}var url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.importAnnotations;proxy.importAnnotationRequestHandler=new AjaxHandler(proxy.pdfViewer);proxy.importAnnotationRequestHandler.url=url;proxy.importAnnotationRequestHandler.mode=true;proxy.importAnnotationRequestHandler.responseType='text';proxy.importAnnotationRequestHandler.send(jsonObject);// eslint-disable-next-line
proxy.importAnnotationRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);if(_typeof(data)!=='object'){proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.importAnnotations);data=null;}}catch(error){proxy.pdfViewer.fireImportFailed(importData,proxy.pdfViewer.localeObj.getConstant('File not found'));if(sf.base.isBlazor()){var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_FileNotFound');promise.then(function(value){proxy.openImportExportNotificationPopup(value);});}else{proxy.openImportExportNotificationPopup(proxy.pdfViewer.localeObj.getConstant('File not found'));}proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.importAnnotations);data=null;}}if(data){proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.importAnnotations,data);if(data.pdfAnnotation){for(var i=0;i<Object.keys(data.pdfAnnotation).length;i++){var newData=data.pdfAnnotation[i];proxy.updateModifiedDateToLocalDate(newData,"freeTextAnnotation");proxy.updateModifiedDateToLocalDate(newData,"measureShapeAnnotation");proxy.updateModifiedDateToLocalDate(newData,"shapeAnnotation");proxy.updateModifiedDateToLocalDate(newData,"signatureAnnotation");proxy.updateModifiedDateToLocalDate(newData,"signatureInkAnnotation");proxy.updateModifiedDateToLocalDate(newData,"stampAnnotations");proxy.updateModifiedDateToLocalDate(newData,"stickyNotesAnnotation");proxy.updateModifiedDateToLocalDate(newData,"textMarkupAnnotation");}proxy.reRenderAnnotations(data.pdfAnnotation);proxy.isImportedAnnotation=true;proxy.updateDocumentEditedProperty(true);proxy.pdfViewer.fireImportSuccess(data.pdfAnnotation);}}}};// eslint-disable-next-line
proxy.importAnnotationRequestHandler.onFailure=function(result){proxy.pdfViewer.fireImportFailed(importData,result.statusText);};// eslint-disable-next-line
proxy.importAnnotationRequestHandler.onError=function(result){proxy.pdfViewer.fireImportFailed(importData,result.statusText);};}};/**
     * @private
     * @param {string} errorDetails - The error details.
     * @returns {void}
     */PdfViewerBase.prototype.openImportExportNotificationPopup=function(errorDetails){if(this.pdfViewer.showNotificationDialog){this.textLayer.createNotificationPopup(errorDetails);}};// eslint-disable-next-line
PdfViewerBase.prototype.reRenderAnnotations=function(annotation){if(annotation){this.isImportAction=true;var count=void 0;if(this.isImportedAnnotation){this.importedAnnotation=this.combineImportedData(this.importedAnnotation,annotation);}else{if(this.pageCount>0){this.importedAnnotation=annotation;}}if(!this.isImportedAnnotation){count=0;}var lastValue=Object.keys(annotation).pop();var isLastPage=false;for(var i=0;i<this.pageCount;i++){if(annotation[i]){if(lastValue===i.toString()){isLastPage=true;}// eslint-disable-next-line
var importPageCollections=[];// eslint-disable-next-line
var pageCollections=[];// eslint-disable-next-line
var textMarkupObject=window.sessionStorage.getItem(this.documentId+'_annotations_textMarkup');// eslint-disable-next-line
var shapeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape');// eslint-disable-next-line
var measureShapeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape_measure');// eslint-disable-next-line
var stampObject=window.sessionStorage.getItem(this.documentId+'_annotations_stamp');// eslint-disable-next-line
var stickyObject=window.sessionStorage.getItem(this.documentId+'_annotations_sticky');// eslint-disable-next-line
var freeTextObject=window.sessionStorage.getItem(this.documentId+'_annotations_freetext');// eslint-disable-next-line
var signatureObject=window.sessionStorage.getItem(this.documentId+'_annotations_sign');// eslint-disable-next-line
var inkObject=window.sessionStorage.getItem(this.documentId+'_annotations_ink');// eslint-disable-next-line
var pageRotations=this.pageSize[i].rotation;if(this.isStorageExceed){textMarkupObject=this.annotationStorage[this.documentId+'_annotations_textMarkup'];shapeObject=this.annotationStorage[this.documentId+'_annotations_shape'];measureShapeObject=this.annotationStorage[this.documentId+'_annotations_shape_measure'];stampObject=this.annotationStorage[this.documentId+'_annotations_stamp'];stickyObject=this.annotationStorage[this.documentId+'_annotations_sticky'];freeTextObject=this.annotationStorage[this.documentId+'_annotations_freetext'];inkObject=this.annotationStorage[this.documentId+'_annotations_ink'];}var annotationCanvas=this.getElement('_annotationCanvas_'+i);if(annotationCanvas&&pageRotations!==undefined){this.drawPageAnnotations(annotation[i],i);if(this.isImportedAnnotation){var isAdded=false;for(var j=0;j<this.annotationPageList.length;j++){if(this.annotationPageList[j]===i){isAdded=true;}}if(isAdded){this.annotationPageList[count]=i;count=count+1;}}else{this.annotationPageList[count]=i;count=count+1;}}if(annotation[i].textMarkupAnnotation&&annotation[i].textMarkupAnnotation.length!==0){if(textMarkupObject){var annotObject=JSON.parse(textMarkupObject);// eslint-disable-next-line max-len
annotation[i].textMarkupAnnotation=this.checkAnnotationCollections(annotObject,annotation[i].textMarkupAnnotation,i);}annotation[i].textMarkupAnnotation=this.checkAnnotationCommentsCollections(annotation[i].textMarkupAnnotation,i);importPageCollections.textMarkupAnnotation=annotation[i].textMarkupAnnotation;if(annotation[i].textMarkupAnnotation.length!==0){for(var j=0;j<annotation[i].textMarkupAnnotation.length;j++){// eslint-disable-next-line max-len
pageCollections.push(annotation[i].textMarkupAnnotation[j]);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(annotation[i].textMarkupAnnotation[j],i));}}}if(annotation[i].shapeAnnotation&&annotation[i].shapeAnnotation.length!==0){if(shapeObject){var annotObject=JSON.parse(shapeObject);annotation[i].shapeAnnotation=this.checkAnnotationCollections(annotObject,annotation[i].shapeAnnotation,i);}annotation[i].shapeAnnotation=this.checkAnnotationCommentsCollections(annotation[i].shapeAnnotation,i);importPageCollections.shapeAnnotation=annotation[i].shapeAnnotation;if(annotation[i].shapeAnnotation.length!==0){for(var j=0;j<annotation[i].shapeAnnotation.length;j++){// eslint-disable-next-line max-len
pageCollections.push(annotation[i].shapeAnnotation[j]);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(annotation[i].shapeAnnotation[j],i));}}}if(annotation[i].measureShapeAnnotation&&annotation[i].measureShapeAnnotation.length!==0){if(measureShapeObject){var annotObject=JSON.parse(measureShapeObject);// eslint-disable-next-line max-len
annotation[i].measureShapeAnnotation=this.checkAnnotationCollections(annotObject,annotation[i].measureShapeAnnotation,i);}// eslint-disable-next-line max-len
annotation[i].measureShapeAnnotation=this.checkAnnotationCommentsCollections(annotation[i].measureShapeAnnotation,i);importPageCollections.measureShapeAnnotation=annotation[i].measureShapeAnnotation;if(annotation[i].measureShapeAnnotation.length!==0){for(var j=0;j<annotation[i].measureShapeAnnotation.length;j++){// eslint-disable-next-line max-len
pageCollections.push(annotation[i].measureShapeAnnotation[j]);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(annotation[i].measureShapeAnnotation[j],i));}}}if(annotation[i].stampAnnotations&&annotation[i].stampAnnotations.length!==0){if(stampObject){var annotObject=JSON.parse(stampObject);// eslint-disable-next-line max-len
annotation[i].stampAnnotations=this.checkAnnotationCollections(annotObject,annotation[i].stampAnnotations,i);}annotation[i].stampAnnotations=this.checkAnnotationCommentsCollections(annotation[i].stampAnnotations,i);importPageCollections.stampAnnotations=annotation[i].stampAnnotations;if(annotation[i].stampAnnotations.length!==0){for(var j=0;j<annotation[i].stampAnnotations.length;j++){// eslint-disable-next-line max-len
pageCollections.push(annotation[i].stampAnnotations[j]);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(annotation[i].stampAnnotations[j],i));}}}if(annotation[i].stickyNotesAnnotation&&annotation[i].stickyNotesAnnotation.length!==0){if(stickyObject){var annotObject=JSON.parse(stickyObject);// eslint-disable-next-line max-len
annotation[i].stickyNotesAnnotation=this.checkAnnotationCollections(annotObject,annotation[i].stickyNotesAnnotation,i);}// eslint-disable-next-line max-len
annotation[i].stickyNotesAnnotation=this.checkAnnotationCommentsCollections(annotation[i].stickyNotesAnnotation,i);importPageCollections.stickyNotesAnnotation=annotation[i].stickyNotesAnnotation;if(annotation[i].stickyNotesAnnotation.length!==0){for(var j=0;j<annotation[i].stickyNotesAnnotation.length;j++){// eslint-disable-next-line max-len
pageCollections.push(annotation[i].stickyNotesAnnotation[j]);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateStickyNotesAnnotationCollections(annotation[i].stickyNotesAnnotation[j],i));}}}if(annotation[i].freeTextAnnotation&&annotation[i].freeTextAnnotation.length!==0){if(freeTextObject){var annotObject=JSON.parse(freeTextObject);// eslint-disable-next-line max-len
annotation[i].freeTextAnnotation=this.checkAnnotationCollections(annotObject,annotation[i].freeTextAnnotation,i);}annotation[i].freeTextAnnotation=this.checkAnnotationCommentsCollections(annotation[i].freeTextAnnotation,i);importPageCollections.freeTextAnnotation=annotation[i].freeTextAnnotation;if(annotation[i].freeTextAnnotation.length!==0){for(var j=0;j<annotation[i].freeTextAnnotation.length;j++){// eslint-disable-next-line max-len
pageCollections.push(annotation[i].freeTextAnnotation[j]);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(annotation[i].freeTextAnnotation[j],i));}}}if(annotation[i].signatureAnnotation&&annotation[i].signatureAnnotation.length!==0){if(signatureObject){var annotObject=JSON.parse(signatureObject);// eslint-disable-next-line max-len
annotation[i].signatureAnnotation=this.checkSignatureCollections(annotObject,annotation[i].signatureAnnotation,i);}importPageCollections.signatureAnnotation=annotation[i].signatureAnnotation;if(annotation[i].signatureAnnotation.length!==0){for(var j=0;j<annotation[i].signatureAnnotation.length;j++){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.signatureModule.updateSignatureCollections(annotation[i].signatureAnnotation[j],i),true);}}}if(annotation[i].signatureInkAnnotation&&annotation[i].signatureInkAnnotation.length!==0){if(inkObject){var annotObject=JSON.parse(inkObject);// eslint-disable-next-line max-len
annotation[i].signatureInkAnnotation=this.checkAnnotationCollections(annotObject,annotation[i].signatureInkAnnotation,i);}// eslint-disable-next-line max-len
annotation[i].signatureInkAnnotation=this.checkAnnotationCommentsCollections(annotation[i].signatureInkAnnotation,i);importPageCollections.signatureInkAnnotation=annotation[i].signatureInkAnnotation;if(annotation[i].signatureInkAnnotation.length!==0){for(var j=0;j<annotation[i].signatureInkAnnotation.length;j++){// eslint-disable-next-line max-len
pageCollections.push(annotation[i].signatureInkAnnotation[j]);// eslint-disable-next-line max-len
// this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(annotation[i].freeTextAnnotation[j], i));
}}}if(pageCollections.length!==0&&this.pdfViewer.enableCommentPanel){this.pdfViewer._dotnetInstance.invokeMethodAsync('RenderAnnotationComments',pageCollections,i,isLastPage);}this.updateImportedAnnotationsInDocumentCollections(importPageCollections,i);}}if(this.pageCount>0){// eslint-disable-next-line max-len
if(this.pdfViewer.annotationModule.stickyNotesAnnotationModule&&!this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isAnnotationRendered){// eslint-disable-next-line
var annotationCollection=this.createAnnotationsCollection();if(annotationCollection){// eslint-disable-next-line max-len
this.documentAnnotationCollections=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationsInDocumentCollections(this.importedAnnotation,annotationCollection);}}}}};/**
     * @param importedAnnotations
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.updateImportedAnnotationsInDocumentCollections=function(importedAnnotations,pageNumber){if(this.documentAnnotationCollections){// eslint-disable-next-line
var documentAnnotationCollection=this.documentAnnotationCollections;// eslint-disable-next-line
var pageCollections=documentAnnotationCollection[pageNumber];if(pageCollections){if(importedAnnotations.textMarkupAnnotation&&importedAnnotations.textMarkupAnnotation.length!==0){for(var i=0;i<importedAnnotations.textMarkupAnnotation.length;i++){pageCollections.textMarkupAnnotation.push(importedAnnotations.textMarkupAnnotation[i]);}}if(importedAnnotations.shapeAnnotation&&importedAnnotations.shapeAnnotation.length!==0){for(var i=0;i<importedAnnotations.shapeAnnotation.length;i++){pageCollections.shapeAnnotation.push(importedAnnotations.shapeAnnotation[i]);}}if(importedAnnotations.measureShapeAnnotation&&importedAnnotations.measureShapeAnnotation.length!==0){for(var i=0;i<importedAnnotations.measureShapeAnnotation.length;i++){pageCollections.measureShapeAnnotation.push(importedAnnotations.measureShapeAnnotation[i]);}}if(importedAnnotations.stampAnnotations&&importedAnnotations.stampAnnotations.length!==0){for(var i=0;i<importedAnnotations.stampAnnotations.length;i++){pageCollections.stampAnnotations.push(importedAnnotations.stampAnnotations[i]);}}if(importedAnnotations.stickyNotesAnnotation&&importedAnnotations.stickyNotesAnnotation.length!==0){for(var i=0;i<importedAnnotations.stickyNotesAnnotation.length;i++){pageCollections.stickyNotesAnnotation.push(importedAnnotations.stickyNotesAnnotation[i]);}}if(importedAnnotations.freeTextAnnotation&&importedAnnotations.freeTextAnnotation.length!==0){for(var i=0;i<importedAnnotations.freeTextAnnotation.length;i++){pageCollections.freeTextAnnotation.push(importedAnnotations.freeTextAnnotation[i]);}}if(importedAnnotations.signatureAnnotation&&importedAnnotations.signatureAnnotation.length!==0){for(var i=0;i<importedAnnotations.signatureAnnotation.length;i++){pageCollections.signatureAnnotation.push(importedAnnotations.signatureAnnotation[i]);}}if(importedAnnotations.signatureInkAnnotation&&importedAnnotations.signatureInkAnnotation.length!==0){for(var i=0;i<importedAnnotations.signatureInkAnnotation.length;i++){pageCollections.signatureInkAnnotation.push(importedAnnotations.signatureInkAnnotation[i]);}}this.documentAnnotationCollections[pageNumber]=pageCollections;}}};/**
     * @param pageIndex
     * @param pageCollections
     * @param pageIndex
     * @param pageCollections
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.checkDocumentCollectionData=function(pageIndex,pageCollections){// eslint-disable-next-line
var importPageCollections;if(pageCollections){importPageCollections=pageCollections;}else if(this.documentAnnotationCollections){// eslint-disable-next-line
var documetCollections=this.documentAnnotationCollections[pageIndex];if(documetCollections){importPageCollections=cloneObject(documetCollections);}}if(importPageCollections){// eslint-disable-next-line
var textMarkupObject=window.sessionStorage.getItem(this.documentId+'_annotations_textMarkup');// eslint-disable-next-line
var shapeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape');// eslint-disable-next-line
var measureShapeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape_measure');// eslint-disable-next-line
var stampObject=window.sessionStorage.getItem(this.documentId+'_annotations_stamp');// eslint-disable-next-line
var stickyObject=window.sessionStorage.getItem(this.documentId+'_annotations_sticky');// eslint-disable-next-line
var freeTextObject=window.sessionStorage.getItem(this.documentId+'_annotations_freetext');// eslint-disable-next-line
var inkObject=window.sessionStorage.getItem(this.documentId+'_annotations_ink');// eslint-disable-next-line
var signatureObject=window.sessionStorage.getItem(this.documentId+'_annotations_sign');if(this.isStorageExceed){textMarkupObject=this.annotationStorage[this.documentId+'_annotations_textMarkup'];shapeObject=this.annotationStorage[this.documentId+'_annotations_shape'];measureShapeObject=this.annotationStorage[this.documentId+'_annotations_shape_measure'];stampObject=this.annotationStorage[this.documentId+'_annotations_stamp'];stickyObject=this.annotationStorage[this.documentId+'_annotations_sticky'];freeTextObject=this.annotationStorage[this.documentId+'_annotations_freetext'];inkObject=this.annotationStorage[this.documentId+'_annotations_ink'];signatureObject=this.annotationStorage[this.documentId+'_annotations_sign'];}if(importPageCollections.textMarkupAnnotation&&importPageCollections.textMarkupAnnotation.length!==0){if(textMarkupObject){var annotationObject=JSON.parse(textMarkupObject);if(annotationObject){// eslint-disable-next-line max-len
importPageCollections.textMarkupAnnotation=this.findImportedAnnotations(annotationObject,importPageCollections.textMarkupAnnotation,pageIndex);}}}if(importPageCollections.shapeAnnotation&&importPageCollections.shapeAnnotation.length!==0){if(shapeObject){var annotationObject=JSON.parse(shapeObject);if(annotationObject){// eslint-disable-next-line max-len
importPageCollections.shapeAnnotation=this.findImportedAnnotations(annotationObject,importPageCollections.shapeAnnotation,pageIndex);}}}if(importPageCollections.measureShapeAnnotation&&importPageCollections.measureShapeAnnotation.length!==0){if(measureShapeObject){var annotationObject=JSON.parse(measureShapeObject);if(annotationObject){// eslint-disable-next-line max-len
importPageCollections.measureShapeAnnotation=this.findImportedAnnotations(annotationObject,importPageCollections.measureShapeAnnotation,pageIndex);}}}if(importPageCollections.stampAnnotations&&importPageCollections.stampAnnotations.length!==0){if(stampObject){var annotationObject=JSON.parse(stampObject);if(annotationObject){// eslint-disable-next-line max-len
importPageCollections.stampAnnotations=this.findImportedAnnotations(annotationObject,importPageCollections.stampAnnotations,pageIndex);}}}if(importPageCollections.stickyNotesAnnotation&&importPageCollections.stickyNotesAnnotation.length!==0){if(stickyObject){var annotationObject=JSON.parse(stickyObject);if(annotationObject){// eslint-disable-next-line max-len
importPageCollections.stickyNotesAnnotation=this.findImportedAnnotations(annotationObject,importPageCollections.stickyNotesAnnotation,pageIndex);}}}if(importPageCollections.freeTextAnnotation&&importPageCollections.freeTextAnnotation.length!==0){if(freeTextObject){var annotationObject=JSON.parse(freeTextObject);if(annotationObject){// eslint-disable-next-line max-len
importPageCollections.freeTextAnnotation=this.findImportedAnnotations(annotationObject,importPageCollections.freeTextAnnotation,pageIndex);}}}if(importPageCollections.signatureInkAnnotation&&importPageCollections.signatureInkAnnotation.length!==0){if(inkObject){var annotationObject=JSON.parse(inkObject);if(annotationObject){// eslint-disable-next-line max-len
importPageCollections.signatureInkAnnotation=this.findImportedAnnotations(annotationObject,importPageCollections.signatureInkAnnotation,pageIndex);}}}if(importPageCollections.signatureAnnotation&&importPageCollections.signatureAnnotation.length!==0){if(signatureObject){var annotationObject=JSON.parse(inkObject);if(annotationObject){// eslint-disable-next-line max-len
importPageCollections.signatureAnnotation=this.findImportedAnnotations(annotationObject,importPageCollections.signatureAnnotation,pageIndex);}}}return importPageCollections;}};// eslint-disable-next-line
PdfViewerBase.prototype.findImportedAnnotations=function(annotationCollection,importAnnotations,pageNumber){// eslint-disable-next-line
var pageCollections=null;for(var a=0;a<annotationCollection.length;a++){if(annotationCollection[a].pageIndex===pageNumber){pageCollections=annotationCollection[a].annotations;}}if(pageCollections){for(var i=0;i<pageCollections.length;i++){for(var j=0;j<importAnnotations.length;j++){if(pageCollections[i].annotName===importAnnotations[j].AnnotName){importAnnotations.splice(j,1);j=j-1;}}}}pageCollections=null;return importAnnotations;};// eslint-disable-next-line
PdfViewerBase.prototype.drawPageAnnotations=function(annotation,pageIndex,isNewlyAdded){if(isNewlyAdded){annotation=annotation[pageIndex];}if(annotation){if(annotation.textMarkupAnnotation&&annotation.textMarkupAnnotation.length!==0){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.documentId+'_annotations_textMarkup');if(this.isStorageExceed){storeObject=this.annotationStorage[this.documentId+'_annotations_textMarkup'];}if(storeObject){var annotObject=JSON.parse(storeObject);if(annotObject){// eslint-disable-next-line max-len
annotation.textMarkupAnnotation=this.checkAnnotationCollections(annotObject,annotation.textMarkupAnnotation,pageIndex);}}annotation.textMarkupAnnotation=this.checkAnnotationCommentsCollections(annotation.textMarkupAnnotation,pageIndex);if(annotation.textMarkupAnnotation.length!==0){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.renderAnnotations(pageIndex,null,null,annotation.textMarkupAnnotation,null,true);}}if(annotation.shapeAnnotation&&annotation.shapeAnnotation.length!==0){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape');if(this.isStorageExceed){storeObject=this.annotationStorage[this.documentId+'_annotations_shape'];}if(storeObject){var annotObject=JSON.parse(storeObject);annotation.shapeAnnotation=this.checkAnnotationCollections(annotObject,annotation.shapeAnnotation,pageIndex);}annotation.shapeAnnotation=this.checkAnnotationCommentsCollections(annotation.shapeAnnotation,pageIndex);if(annotation.shapeAnnotation.length!==0){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.renderAnnotations(pageIndex,annotation.shapeAnnotation,null,null,null,true);}}if(annotation.measureShapeAnnotation&&annotation.measureShapeAnnotation.length!==0){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape_measure');if(this.isStorageExceed){storeObject=this.annotationStorage[this.documentId+'_annotations_shape_measure'];}if(storeObject){var annotObject=JSON.parse(storeObject);// eslint-disable-next-line max-len
annotation.measureShapeAnnotation=this.checkAnnotationCollections(annotObject,annotation.measureShapeAnnotation,pageIndex);}annotation.measureShapeAnnotation=this.checkAnnotationCommentsCollections(annotation.measureShapeAnnotation,pageIndex);if(annotation.measureShapeAnnotation.length!==0){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.renderAnnotations(pageIndex,null,annotation.measureShapeAnnotation,null,null,true);}}if(annotation.stampAnnotations&&annotation.stampAnnotations.length!==0){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.documentId+'_annotations_stamp');if(this.isStorageExceed){storeObject=this.annotationStorage[this.documentId+'_annotations_stamp'];}if(storeObject){var annotObject=JSON.parse(storeObject);annotation.stampAnnotations=this.checkAnnotationCollections(annotObject,annotation.stampAnnotations,pageIndex);}annotation.stampAnnotations=this.checkAnnotationCommentsCollections(annotation.stampAnnotations,pageIndex);if(annotation.stampAnnotations.length!==0){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(annotation.stampAnnotations,pageIndex,null,true);}}if(annotation.stickyNotesAnnotation&&annotation.stickyNotesAnnotation.length!==0){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.documentId+'_annotations_sticky');if(this.isStorageExceed){storeObject=this.annotationStorage[this.documentId+'_annotations_sticky'];}if(storeObject){var annotObject=JSON.parse(storeObject);// eslint-disable-next-line max-len
annotation.stickyNotesAnnotation=this.checkAnnotationCollections(annotObject,annotation.stickyNotesAnnotation,pageIndex);}annotation.stickyNotesAnnotation=this.checkAnnotationCommentsCollections(annotation.stickyNotesAnnotation,pageIndex);if(annotation.stickyNotesAnnotation.length!==0){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(annotation.stickyNotesAnnotation,pageIndex);}}if(annotation.freeTextAnnotation&&annotation.freeTextAnnotation.length!==0){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.documentId+'_annotations_freetext');if(this.isStorageExceed){storeObject=this.annotationStorage[this.documentId+'_annotations_freetext'];}if(storeObject){var annotObject=JSON.parse(storeObject);annotation.freeTextAnnotation=this.checkAnnotationCollections(annotObject,annotation.freeTextAnnotation,pageIndex);}annotation.freeTextAnnotation=this.checkAnnotationCommentsCollections(annotation.freeTextAnnotation,pageIndex);if(annotation.freeTextAnnotation.length!==0){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(annotation.freeTextAnnotation,pageIndex,true);}}if(annotation.signatureAnnotation&&annotation.signatureAnnotation.length!==0){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.documentId+'_annotations_sign');var annotObject=JSON.parse(storeObject);if(annotObject){annotation.signatureAnnotation=this.checkSignatureCollections(annotObject,annotation.signatureAnnotation,pageIndex);}this.signatureModule.renderExistingSignature(annotation.signatureAnnotation,pageIndex,true);}if(annotation.signatureInkAnnotation&&annotation.signatureInkAnnotation.length!==0){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.documentId+'_annotations_ink');if(this.isStorageExceed){storeObject=this.annotationStorage[this.documentId+'_annotations_ink'];}if(storeObject){var annotObject=JSON.parse(storeObject);// eslint-disable-next-line max-len
annotation.signatureInkAnnotation=this.checkAnnotationCollections(annotObject,annotation.signatureInkAnnotation,pageIndex);}annotation.signatureInkAnnotation=this.checkAnnotationCommentsCollections(annotation.signatureInkAnnotation,pageIndex);if(annotation.signatureInkAnnotation.length!==0){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(annotation.signatureInkAnnotation,pageIndex,true);}}}};// eslint-disable-next-line
PdfViewerBase.prototype.checkSignatureCollections=function(annotationCollection,annotation,pageNumber){// eslint-disable-next-line
var pageCollections=null;for(var a=0;a<annotationCollection.length;a++){if(annotationCollection[a].pageIndex===pageNumber){pageCollections=annotationCollection[a].annotations;}}if(pageCollections){for(var i=0;i<pageCollections.length;i++){for(var j=0;j<annotation.length;j++){if(pageCollections[i].signatureName===annotation[j].SignatureName){annotation.splice(j,1);j=j-1;}}}}pageCollections=null;return annotation;};// eslint-disable-next-line
PdfViewerBase.prototype.checkAnnotationCollections=function(annotationCollection,annotation,pageNumber){// eslint-disable-next-line
var pageCollections=null;for(var a=0;a<annotationCollection.length;a++){if(annotationCollection[a].pageIndex===pageNumber){pageCollections=annotationCollection[a].annotations;}}if(pageCollections){for(var i=0;i<pageCollections.length;i++){for(var j=0;j<annotation.length;j++){if(pageCollections[i].annotName===annotation[j].AnnotName){annotation.splice(j,1);j=j-1;}}}}pageCollections=null;return annotation;};// eslint-disable-next-line
PdfViewerBase.prototype.checkAnnotationCommentsCollections=function(annotation,pageNumber){if(this.annotationComments){// eslint-disable-next-line
var annotationCollections=this.annotationComments[pageNumber];annotationCollections=this.selectAnnotationCollections(annotationCollections);if(annotationCollections){for(var i=0;i<annotationCollections.length;i++){for(var j=0;j<annotation.length;j++){if(annotationCollections[i].AnnotName===annotation[j].AnnotName){annotationCollections[i].isAlreadyAdded=true;annotation.splice(j,1);j=j-1;}}}}annotationCollections=null;}return annotation;};// eslint-disable-next-line
PdfViewerBase.prototype.selectAnnotationCollections=function(pageAnnotations){// eslint-disable-next-line
var pageCollections=[];if(pageAnnotations){if(pageAnnotations.textMarkupAnnotation&&pageAnnotations.textMarkupAnnotation.length!==0){for(var i=0;i<pageAnnotations.textMarkupAnnotation.length;i++){pageCollections.push(pageAnnotations.textMarkupAnnotation[i]);}}if(pageAnnotations.shapeAnnotation&&pageAnnotations.shapeAnnotation.length!==0){for(var i=0;i<pageAnnotations.shapeAnnotation.length;i++){pageCollections.push(pageAnnotations.shapeAnnotation[i]);}}if(pageAnnotations.measureShapeAnnotation&&pageAnnotations.measureShapeAnnotation.length!==0){for(var i=0;i<pageAnnotations.measureShapeAnnotation.length;i++){pageCollections.push(pageAnnotations.measureShapeAnnotation[i]);}}if(pageAnnotations.stampAnnotations&&pageAnnotations.stampAnnotations.length!==0){for(var i=0;i<pageAnnotations.stampAnnotations.length;i++){pageCollections.push(pageAnnotations.stampAnnotations[i]);}}if(pageAnnotations.stickyNotesAnnotation&&pageAnnotations.stickyNotesAnnotation.length!==0){for(var i=0;i<pageAnnotations.stickyNotesAnnotation.length;i++){pageCollections.push(pageAnnotations.stickyNotesAnnotation[i]);}}if(pageAnnotations.freeTextAnnotation&&pageAnnotations.freeTextAnnotation.length!==0){for(var i=0;i<pageAnnotations.freeTextAnnotation.length;i++){pageCollections.push(pageAnnotations.freeTextAnnotation[i]);}}if(pageAnnotations.signatureInkAnnotation&&pageAnnotations.signatureInkAnnotation.length!==0){for(var i=0;i<pageAnnotations.signatureInkAnnotation.length;i++){pageCollections.push(pageAnnotations.signatureInkAnnotation[i]);}}}return pageCollections;};PdfViewerBase.prototype.saveImportedAnnotations=function(){// eslint-disable-next-line
var textMarkupObject=window.sessionStorage.getItem(this.documentId+'_annotations_textMarkup');// eslint-disable-next-line
var shapeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape');// eslint-disable-next-line
var measureShapeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape_measure');// eslint-disable-next-line
var stampObject=window.sessionStorage.getItem(this.documentId+'_annotations_stamp');// eslint-disable-next-line
var stickyObject=window.sessionStorage.getItem(this.documentId+'_annotations_sticky');// eslint-disable-next-line
var freeTextObject=window.sessionStorage.getItem(this.documentId+'_annotations_freetext');// eslint-disable-next-line
var inkObject=window.sessionStorage.getItem(this.documentId+'_annotations_ink');// eslint-disable-next-line
var signatureObject=window.sessionStorage.getItem(this.documentId+'_annotations_sign');if(this.isStorageExceed){textMarkupObject=this.annotationStorage[this.documentId+'_annotations_textMarkup'];shapeObject=this.annotationStorage[this.documentId+'_annotations_shape'];measureShapeObject=this.annotationStorage[this.documentId+'_annotations_shape_measure'];stampObject=this.annotationStorage[this.documentId+'_annotations_stamp'];stickyObject=this.annotationStorage[this.documentId+'_annotations_sticky'];freeTextObject=this.annotationStorage[this.documentId+'_annotations_freetext'];inkObject=this.annotationStorage[this.documentId+'_annotations_ink'];signatureObject=this.annotationStorage[this.documentId+'_annotations_sign'];}// eslint-disable-next-line max-len
this.downloadCollections={textMarkupObject:textMarkupObject,shapeObject:shapeObject,measureShapeObject:measureShapeObject,stampObject:stampObject,stickyObject:stickyObject,freeTextObject:freeTextObject,inkObject:inkObject,signatureObject:signatureObject};if(this.documentAnnotationCollections){for(var i=0;i<this.pageCount;i++){if(this.documentAnnotationCollections[i]){// eslint-disable-next-line
var pageCollections=cloneObject(this.documentAnnotationCollections[i]);pageCollections=this.checkDocumentCollectionData(i,pageCollections);this.savePageAnnotations(pageCollections,i);}}}};// eslint-disable-next-line
PdfViewerBase.prototype.savePageAnnotations=function(annotation,pageIndex){if(annotation.textMarkupAnnotation.length!==0){for(var s=0;s<annotation.textMarkupAnnotation.length;s++){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveImportedTextMarkupAnnotations(annotation.textMarkupAnnotation[s],pageIndex);}}if(annotation.shapeAnnotation.length!==0){for(var s=0;s<annotation.shapeAnnotation.length;s++){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.shapeAnnotationModule.saveImportedShapeAnnotations(annotation.shapeAnnotation[s],pageIndex);}}if(annotation.measureShapeAnnotation.length!==0){for(var s=0;s<annotation.measureShapeAnnotation.length;s++){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.measureAnnotationModule.saveImportedMeasureAnnotations(annotation.measureShapeAnnotation[s],pageIndex);}}if(annotation.stampAnnotations.length!==0){for(var s=0;s<annotation.stampAnnotations.length;s++){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stampAnnotationModule.saveImportedStampAnnotations(annotation.stampAnnotations[s],pageIndex);}}if(annotation.stickyNotesAnnotation.length!==0){for(var s=0;s<annotation.stickyNotesAnnotation.length;s++){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveImportedStickyNotesAnnotations(annotation.stickyNotesAnnotation[s],pageIndex);}}if(annotation.freeTextAnnotation.length!==0){for(var s=0;s<annotation.freeTextAnnotation.length;s++){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.freeTextAnnotationModule.saveImportedFreeTextAnnotations(annotation.freeTextAnnotation[s],pageIndex);}}if(annotation.signatureInkAnnotation.length!==0){for(var s=0;s<annotation.signatureInkAnnotation.length;s++){this.pdfViewer.annotationModule.inkAnnotationModule.saveImportedInkAnnotation(annotation.signatureInkAnnotation[s],pageIndex);}}};PdfViewerBase.prototype.updateDocumentAnnotationCollections=function(){window.sessionStorage.removeItem(this.documentId+'_annotations_textMarkup');window.sessionStorage.removeItem(this.documentId+'_annotations_shape');window.sessionStorage.removeItem(this.documentId+'_annotations_shape_measure');window.sessionStorage.removeItem(this.documentId+'_annotations_stamp');window.sessionStorage.removeItem(this.documentId+'_annotations_sticky');window.sessionStorage.removeItem(this.documentId+'_annotations_freetext');window.sessionStorage.removeItem(this.documentId+'_annotations_ink');if(this.downloadCollections){if(this.isStorageExceed){this.annotationStorage[this.documentId+'_annotations_textMarkup']=this.downloadCollections.textMarkupObject;this.annotationStorage[this.documentId+'_annotations_shape']=this.downloadCollections.shapeObject;this.annotationStorage[this.documentId+'_annotations_shape_measure']=this.downloadCollections.measureShapeObject;this.annotationStorage[this.documentId+'_annotations_stamp']=this.downloadCollections.stampObject;this.annotationStorage[this.documentId+'_annotations_sticky']=this.downloadCollections.stickyObject;this.annotationStorage[this.documentId+'_annotations_freetext']=this.downloadCollections.freeTextObject;this.annotationStorage[this.documentId+'_annotations_ink']=this.downloadCollections.inkObject;}else{if(this.downloadCollections.textMarkupObject){window.sessionStorage.setItem(this.documentId+'_annotations_textMarkup',this.downloadCollections.textMarkupObject);}if(this.downloadCollections.shapeObject){window.sessionStorage.setItem(this.documentId+'_annotations_shape',this.downloadCollections.shapeObject);}if(this.downloadCollections.measureShapeObject){window.sessionStorage.setItem(this.documentId+'_annotations_shape_measure',this.downloadCollections.measureShapeObject);}if(this.downloadCollections.stampObject){window.sessionStorage.setItem(this.documentId+'_annotations_stamp',this.downloadCollections.stampObject);}if(this.downloadCollections.stickyObject){window.sessionStorage.setItem(this.documentId+'_annotations_sticky',this.downloadCollections.stickyObject);}if(this.downloadCollections.freeTextObject){window.sessionStorage.setItem(this.documentId+'_annotations_freetext',this.downloadCollections.freeTextObject);}if(this.downloadCollections.inkObject){window.sessionStorage.setItem(this.documentId+'_annotations_ink',this.downloadCollections.inkObject);}}}};/**
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.createAnnotationJsonData=function(){// eslint-disable-next-line
var annotationCollection={};var textMarkupAnnotationCollection;var shapeAnnotations;var calibrateAnnotations;var stampAnnotationCollection;var stickyAnnotationCollection;var freeTextAnnotationCollection;var signaturCollection;var signaturInkCollection;this.saveImportedAnnotations();if(this.isTextMarkupAnnotationModule()){this.isJsonExported=true;// eslint-disable-next-line max-len
textMarkupAnnotationCollection=this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();}if(this.isShapeAnnotationModule()){this.isJsonExported=true;// eslint-disable-next-line max-len
shapeAnnotations=this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();}if(this.isCalibrateAnnotationModule()){this.isJsonExported=true;// eslint-disable-next-line max-len
calibrateAnnotations=this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();}if(this.isStampAnnotationModule()){// eslint-disable-next-line max-len
stampAnnotationCollection=this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();}if(this.isCommentAnnotationModule()){// eslint-disable-next-line max-len
stickyAnnotationCollection=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();}if(this.isFreeTextAnnotationModule()){// eslint-disable-next-line max-len
freeTextAnnotationCollection=this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations();}if(this.isInkAnnotationModule()){// eslint-disable-next-line
signaturInkCollection=this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();}if(this.pdfViewer.isSignatureEditable){// eslint-disable-next-line
signaturCollection=this.signatureModule.saveSignature();}else{// eslint-disable-next-line
var annotations=new Array();for(var j=0;j<this.pageCount;j++){annotations[j]=[];}signaturCollection=JSON.stringify(annotations);}for(var s=0;s<this.pageCount;s++){// eslint-disable-next-line max-len
var annotation={textMarkupAnnotation:JSON.parse(textMarkupAnnotationCollection)[s],shapeAnnotation:JSON.parse(shapeAnnotations)[s],measureShapeAnnotation:JSON.parse(calibrateAnnotations)[s],stampAnnotations:JSON.parse(stampAnnotationCollection)[s],// eslint-disable-next-line max-len
stickyNotesAnnotation:JSON.parse(stickyAnnotationCollection)[s],freeTextAnnotation:JSON.parse(freeTextAnnotationCollection)[s],signatureAnnotation:JSON.parse(signaturCollection)[s],signatureInkAnnotation:JSON.parse(signaturInkCollection)[s]};annotationCollection[s]=annotation;}return JSON.stringify(annotationCollection);};// eslint-disable-next-line
PdfViewerBase.prototype.combineImportedData=function(excistingImportAnnotation,newlyImportAnnotation){for(var i=0;i<this.pageCount;i++){if(newlyImportAnnotation[i]){if(excistingImportAnnotation[i]){if(newlyImportAnnotation[i].textMarkupAnnotation&&newlyImportAnnotation[i].textMarkupAnnotation.length!==0){if(excistingImportAnnotation[i].textMarkupAnnotation){// eslint-disable-next-line max-len
newlyImportAnnotation[i].textMarkupAnnotation=this.checkImportedData(excistingImportAnnotation[i].textMarkupAnnotation,newlyImportAnnotation[i].textMarkupAnnotation,i);if(newlyImportAnnotation[i].textMarkupAnnotation.length!==0){// eslint-disable-next-line max-len
excistingImportAnnotation[i].textMarkupAnnotation=excistingImportAnnotation[i].textMarkupAnnotation.concat(newlyImportAnnotation[i].textMarkupAnnotation);}}else{excistingImportAnnotation[i].textMarkupAnnotation=newlyImportAnnotation[i].textMarkupAnnotation;}}if(newlyImportAnnotation[i].shapeAnnotation&&newlyImportAnnotation[i].shapeAnnotation.length!==0){if(excistingImportAnnotation[i].shapeAnnotation){// eslint-disable-next-line max-len
newlyImportAnnotation[i].shapeAnnotation=this.checkImportedData(excistingImportAnnotation[i].shapeAnnotation,newlyImportAnnotation[i].shapeAnnotation,i);if(newlyImportAnnotation[i].shapeAnnotation.length!==0){// eslint-disable-next-line max-len
excistingImportAnnotation[i].shapeAnnotation=excistingImportAnnotation[i].shapeAnnotation.concat(newlyImportAnnotation[i].shapeAnnotation);}}else{excistingImportAnnotation[i].shapeAnnotation=newlyImportAnnotation[i].shapeAnnotation;}}if(newlyImportAnnotation[i].measureShapeAnnotation&&newlyImportAnnotation[i].measureShapeAnnotation.length!==0){if(excistingImportAnnotation[i].measureShapeAnnotation){// eslint-disable-next-line max-len
newlyImportAnnotation[i].measureShapeAnnotation=this.checkImportedData(excistingImportAnnotation[i].measureShapeAnnotation,newlyImportAnnotation[i].measureShapeAnnotation,i);if(newlyImportAnnotation[i].measureShapeAnnotation.length!==0){// eslint-disable-next-line max-len
excistingImportAnnotation[i].measureShapeAnnotation=excistingImportAnnotation[i].measureShapeAnnotation.concat(newlyImportAnnotation[i].measureShapeAnnotation);}}else{excistingImportAnnotation[i].measureShapeAnnotation=newlyImportAnnotation[i].measureShapeAnnotation;}}if(newlyImportAnnotation[i].stampAnnotations&&newlyImportAnnotation[i].stampAnnotations.length!==0){if(excistingImportAnnotation[i].stampAnnotations){// eslint-disable-next-line max-len
newlyImportAnnotation[i].stampAnnotations=this.checkImportedData(excistingImportAnnotation[i].stampAnnotations,newlyImportAnnotation[i].stampAnnotations,i);if(newlyImportAnnotation[i].stampAnnotations.length!==0){// eslint-disable-next-line max-len
excistingImportAnnotation[i].stampAnnotations=excistingImportAnnotation[i].stampAnnotations.concat(newlyImportAnnotation[i].stampAnnotations);}}else{excistingImportAnnotation[i].stampAnnotations=newlyImportAnnotation[i].stampAnnotations;}}if(newlyImportAnnotation[i].stickyNotesAnnotation&&newlyImportAnnotation[i].stickyNotesAnnotation.length!==0){if(excistingImportAnnotation[i].stickyNotesAnnotation){// eslint-disable-next-line max-len
newlyImportAnnotation[i].stickyNotesAnnotation=this.checkImportedData(excistingImportAnnotation[i].stickyNotesAnnotation,newlyImportAnnotation[i].stickyNotesAnnotation,i);if(newlyImportAnnotation[i].stickyNotesAnnotation.length!==0){// eslint-disable-next-line max-len
excistingImportAnnotation[i].stickyNotesAnnotation=excistingImportAnnotation[i].stickyNotesAnnotation.concat(newlyImportAnnotation[i].stickyNotesAnnotation);}}else{excistingImportAnnotation[i].stickyNotesAnnotation=newlyImportAnnotation[i].stickyNotesAnnotation;}}if(newlyImportAnnotation[i].freeTextAnnotation&&newlyImportAnnotation[i].freeTextAnnotation.length!==0){if(excistingImportAnnotation[i].freeTextAnnotation){// eslint-disable-next-line max-len
newlyImportAnnotation[i].freeTextAnnotation=this.checkImportedData(excistingImportAnnotation[i].freeTextAnnotation,newlyImportAnnotation[i].freeTextAnnotation,i);if(newlyImportAnnotation[i].freeTextAnnotation.length!==0){// eslint-disable-next-line max-len
excistingImportAnnotation[i].freeTextAnnotation=excistingImportAnnotation[i].freeTextAnnotation.concat(newlyImportAnnotation[i].freeTextAnnotation);}}else{excistingImportAnnotation[i].freeTextAnnotation=newlyImportAnnotation[i].freeTextAnnotation;}}if(newlyImportAnnotation[i].signatureInkAnnotation&&newlyImportAnnotation[i].signatureInkAnnotation.length!==0){if(excistingImportAnnotation[i].signatureInkAnnotation){// eslint-disable-next-line max-len
newlyImportAnnotation[i].signatureInkAnnotation=this.checkImportedData(excistingImportAnnotation[i].signatureInkAnnotation,newlyImportAnnotation[i].signatureInkAnnotation,i);if(newlyImportAnnotation[i].signatureInkAnnotation.length!==0){// eslint-disable-next-line max-len
excistingImportAnnotation[i].signatureInkAnnotation=excistingImportAnnotation[i].signatureInkAnnotation.concat(newlyImportAnnotation[i].signatureInkAnnotation);}}else{excistingImportAnnotation[i].signatureInkAnnotation=newlyImportAnnotation[i].signatureInkAnnotation;}}}else{// eslint-disable-next-line max-len
var annotation={// eslint-disable-next-line max-len
textMarkupAnnotation:newlyImportAnnotation[i].textMarkupAnnotation,shapeAnnotation:newlyImportAnnotation[i].shapeAnnotation,// eslint-disable-next-line max-len
measureShapeAnnotation:newlyImportAnnotation[i].measureShapeAnnotation,stampAnnotations:newlyImportAnnotation[i].stampAnnotations,// eslint-disable-next-line max-len
stickyNotesAnnotation:newlyImportAnnotation[i].stickyNotesAnnotation,freeTextAnnotation:newlyImportAnnotation[i].freeTextAnnotation,signatureInkAnnotation:newlyImportAnnotation[i].signatureInkAnnotation};excistingImportAnnotation[i]=annotation;}}}return excistingImportAnnotation;};/**
     * @private
     * @returns {boolean} - Returns true or false.
     */PdfViewerBase.prototype.updateExportItem=function(){// eslint-disable-next-line
var shapeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape');// eslint-disable-next-line
var measureObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape_measure');// eslint-disable-next-line
var stampObject=window.sessionStorage.getItem(this.documentId+'_annotations_stamp');// eslint-disable-next-line
var stickyObject=window.sessionStorage.getItem(this.documentId+'_annotations_sticky');// eslint-disable-next-line
var textMarkupObject=window.sessionStorage.getItem(this.documentId+'_annotations_textMarkup');// eslint-disable-next-line
var freeTextObject=window.sessionStorage.getItem(this.documentId+'_annotations_freetext');var isSignatureEditable=false;// eslint-disable-next-line
var inkAnnotationObjct=window.sessionStorage.getItem(this.documentId+'_annotations_ink');if(this.pdfViewer.isSignatureEditable){// eslint-disable-next-line
var signatureObject=window.sessionStorage.getItem(this.documentId+'_annotations_sign');if(signatureObject){isSignatureEditable=true;}}// eslint-disable-next-line max-len
if(shapeObject||measureObject||stampObject||stickyObject||textMarkupObject||freeTextObject||this.isImportAction||this.isStorageExceed||isSignatureEditable||inkAnnotationObjct||this.isAnnotationPresent){return true;}else{return false;}};PdfViewerBase.prototype.isFreeTextAnnotation=function(annotations){var resut=false;if(annotations&&annotations.length>0){resut=annotations.some(function(s){return s.shapeAnnotationType==='FreeText'&&s.subject==='Text Box';});}return resut;};// eslint-disable-next-line
PdfViewerBase.prototype.checkImportedData=function(existingCollection,newCollection,pageIndex){for(var i=0;i<existingCollection.length;i++){for(var j=0;j<newCollection.length;j++){if(existingCollection[i].AnnotName===newCollection[j].AnnotName){newCollection.splice(j,1);j=j-1;}}}if(this.annotationComments){// eslint-disable-next-line
var annotationCollections=this.annotationComments[pageIndex];annotationCollections=this.selectAnnotationCollections(annotationCollections);if(annotationCollections){for(var i=0;i<annotationCollections.length;i++){for(var j=0;j<newCollection.length;j++){if(annotationCollections[i].AnnotName===newCollection[j].AnnotName){newCollection.splice(j,1);j=j-1;}}}}}return newCollection;};/**
     * @param points
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.checkAnnotationWidth=function(points){var width=0;var height=0;var minWidth;var maxWidth;var minHeight;var maxHeight;for(var i=0;i<points.length;i++){if(!minWidth){minWidth=points[i].x;maxWidth=points[i].x;minHeight=points[i].y;maxHeight=points[i].y;}else{if(minWidth>points[i].x){minWidth=points[i].x;}else if(maxWidth<points[i].x){maxWidth=points[i].x;}if(minHeight>points[i].y){minHeight=points[i].y;}else if(maxHeight<points[i].y){maxHeight=points[i].y;}}}width=maxWidth-minWidth;height=maxHeight-minHeight;return{width:width,height:height};};PdfViewerBase.prototype.deleteAnnotations=function(){if(this.pdfViewer.annotationModule){this.pdfViewer.annotations=[];this.pdfViewer.zIndexTable=[];this.pdfViewer.annotationCollection=[];this.pdfViewer.signatureCollection=[];// eslint-disable-next-line
var annotationCollection=this.createAnnotationsCollection();this.annotationComments=annotationCollection;this.documentAnnotationCollections=annotationCollection;this.annotationRenderredList=[];window.sessionStorage.removeItem(this.documentId+'_annotations_shape');window.sessionStorage.removeItem(this.documentId+'_annotations_shape_measure');window.sessionStorage.removeItem(this.documentId+'_annotations_stamp');window.sessionStorage.removeItem(this.documentId+'_annotations_sticky');window.sessionStorage.removeItem(this.documentId+'_annotations_textMarkup');window.sessionStorage.removeItem(this.documentId+'_annotations_freetext');window.sessionStorage.removeItem(this.documentId+'_annotations_sign');window.sessionStorage.removeItem(this.documentId+'_annotations_ink');for(var i=0;i<this.pageCount;i++){this.pdfViewer.annotationModule.renderAnnotations(i,null,null,null);this.pdfViewer.renderDrawing(undefined,i);this.pdfViewer.clearSelection(i);var accordionContent=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+(i+1));// eslint-disable-next-line max-len
var accordionContentContainer=document.getElementById(this.pdfViewer.dataId+'_accordionContentContainer');if(accordionContentContainer){if(accordionContentContainer.childElementCount===0){accordionContentContainer.style.display='none';if(document.getElementById(this.pdfViewer.dataId+'_commentsPanelText')){// eslint-disable-next-line max-len
this.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')],false);document.getElementById(this.pdfViewer.dataId+'_commentsPanelText').style.display='block';}}}}this.isImportedAnnotation=false;this.isImportAction=false;this.importedAnnotation=[];this.annotationPageList=[];this.pdfViewer.annotationModule.freeTextAnnotationModule.freeTextPageNumbers=[];this.pdfViewer.annotationModule.stampAnnotationModule.stampPageNumber=[];this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex=[];this.isAnnotationCollectionRemoved=true;}};/**
     * @param pageNumber
     * @param isObject
     * @param pageNumber
     * @param isObject
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.createAnnotationsCollection=function(pageNumber,isObject){// eslint-disable-next-line
var annotationCollectionList=[];if(!isObject){for(var i=0;i<this.pageCount;i++){var annotation={// eslint-disable-next-line max-len
textMarkupAnnotation:[],shapeAnnotation:[],measureShapeAnnotation:[],stampAnnotations:[],stickyNotesAnnotation:[],freeTextAnnotation:[],signatureAnnotation:[],signatureInkAnnotation:[]};annotationCollectionList.push(annotation);}}else{annotationCollectionList={};var annotation={// eslint-disable-next-line max-len
textMarkupAnnotation:[],shapeAnnotation:[],measureShapeAnnotation:[],stampAnnotations:[],stickyNotesAnnotation:[],freeTextAnnotation:[],signatureAnnotation:[],signatureInkAnnotation:[]};annotationCollectionList[pageNumber]=annotation;}return annotationCollectionList;};/**
     * @param importAnnotation
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.addAnnotation=function(importAnnotation){// eslint-disable-next-line
var pdfAnnotation={};// eslint-disable-next-line
var documentCollections;if(importAnnotation){var isAnnotationObject=false;var annotationCount=1;if(importAnnotation.shapeAnnotationType||importAnnotation.author){isAnnotationObject=true;documentCollections=this.createAnnotationsCollection(importAnnotation.pageNumber,true);}else{if(importAnnotation.length){annotationCount=importAnnotation.length;documentCollections=this.createAnnotationsCollection();}else{isAnnotationObject=true;documentCollections=this.createAnnotationsCollection(importAnnotation.pageNumber,true);}}for(var a=0;a<annotationCount;a++){// eslint-disable-next-line
var annotation=void 0;if(isAnnotationObject){annotation=importAnnotation;}else{annotation=importAnnotation[a];}// eslint-disable-next-line
var newAnnotation={};newAnnotation.ShapeAnnotationType=annotation.shapeAnnotationType;newAnnotation.AnnotationAddMode=annotation.annotationAddMode;newAnnotation.Author=annotation.author;newAnnotation.AnnotationSelectorSettings=annotation.annotationSelectorSettings;newAnnotation.AnnotationSettings=annotation.annotationSettings;newAnnotation.PageNumber=annotation.pageNumber;newAnnotation.ModifiedDate=annotation.modifiedDate;newAnnotation.Subject=annotation.subject;newAnnotation.Note=annotation.note;newAnnotation.AnnotName=annotation.annotationId;newAnnotation.IsCommentLock=annotation.isCommentLock;newAnnotation.Comments=annotation.comments;if(annotation.comments&&annotation.comments.length>0){// eslint-disable-next-line
var comments=[];for(var i=0;i<annotation.comments.length;i++){comments.push(this.updateComments(annotation,annotation.comments[i]));}newAnnotation.Comments=comments;}if(annotation.review){newAnnotation.State=annotation.review.state;newAnnotation.StateModel=annotation.review.stateModel;}newAnnotation.CustomData=annotation.customData;newAnnotation.Opacity=annotation.opacity;if(annotation.shapeAnnotationType==='textMarkup'){newAnnotation.AnnotType='textMarkup';newAnnotation.Color=annotation.color;newAnnotation.IsMultiSelect=annotation.isMultiSelect;newAnnotation.TextMarkupAnnotationType=annotation.textMarkupAnnotationType;newAnnotation.TextMarkupContent=annotation.textMarkupContent;newAnnotation.TextMarkupStartIndex=annotation.textMarkupStartIndex;newAnnotation.TextMarkupEndIndex=annotation.textMarkupEndIndex;if(annotation.rect){newAnnotation.Rect=this.convertBounds(annotation.rect,true);}if(annotation.bounds&&annotation.bounds.length>=1){// eslint-disable-next-line
var bounds=new Array();for(var i=0;i<annotation.bounds.length;i++){bounds.push(this.convertBounds(annotation.bounds[i]));}newAnnotation.Bounds=bounds;}documentCollections[annotation.pageNumber].textMarkupAnnotation.push(newAnnotation);}else if(annotation.shapeAnnotationType==='sticky'){newAnnotation.AnnotType='sticky';newAnnotation.Icon='Comment';newAnnotation.Bounds=this.convertBounds(annotation.bounds);newAnnotation.StrokeColor=annotation.strokeColor;newAnnotation.Color=annotation.color;documentCollections[annotation.pageNumber].stickyNotesAnnotation.push(newAnnotation);}else if(annotation.shapeAnnotationType==='FreeText'){newAnnotation.AnnotType='freeText';newAnnotation.Name=annotation.annotationId;newAnnotation.MarkupText=annotation.dynamicText;newAnnotation.Text=annotation.dynamicText;newAnnotation.Note=annotation.dynamicText;newAnnotation.TextAlign=annotation.textAlign;newAnnotation.Thickness=annotation.thicknes;newAnnotation.StrokeColor=annotation.strokeColor;newAnnotation.FillColor=annotation.fillColor;newAnnotation.FontColor=annotation.fontColor;newAnnotation.FontSize=annotation.fontSize;newAnnotation.FontFamily=annotation.fontFamily;newAnnotation.Rotate=annotation.rotateAngle;newAnnotation.Bounds=this.convertBounds(annotation.bounds);// eslint-disable-next-line max-len
newAnnotation.Font={'Name':annotation.fontFamily,'Size':annotation.fontSize,'Bold':annotation.font.isBold,'Italic':annotation.font.isItalic,'Strikeout':annotation.font.isStrikeout,'Underline':annotation.font.isUnderline};documentCollections[annotation.pageNumber].freeTextAnnotation.push(newAnnotation);}else if(annotation.shapeAnnotationType==='stamp'){newAnnotation.AnnotType='stamp';newAnnotation.Icon=annotation.icon;newAnnotation.isDynamic=false;newAnnotation.Rect=this.convertBounds(annotation.bounds,false,true);newAnnotation.RotateAngle=annotation.rotateAngle;newAnnotation.FillColor=annotation.fillColor;newAnnotation.StrokeColor=annotation.strokeColor;newAnnotation.StampAnnotationType=annotation.stampAnnotationType;newAnnotation.CreationDate=annotation.creationDate;if(annotation.stampAnnotationType==='image'){// eslint-disable-next-line
var apperarance=[];// eslint-disable-next-line
var imageData={'imagedata':annotation.stampAnnotationPath};apperarance.push(imageData);newAnnotation.Apperarance=apperarance;}if(annotation.isDynamicStamp){newAnnotation.IsDynamic=true;newAnnotation.StrokeColor=annotation.stampFillcolor;// eslint-disable-next-line
var apperarance=[];// eslint-disable-next-line
var imageData={'type':'string','text':annotation.dynamicText,'currentFontname':'95b303ab-d397-438a-83af-e2ff8a9900f1','baseFontName':'Helvetica-BoldOblique','fontSize':10,'isImport':true};apperarance.push(imageData);newAnnotation.Apperarance=apperarance;}documentCollections[annotation.pageNumber].stampAnnotations.push(newAnnotation);}else if(annotation.shapeAnnotationType==='Ink'||annotation.shapeAnnotationType==='Signature'){newAnnotation.StrokeColor=annotation.strokeColor;newAnnotation.FillColor=annotation.fillColor;newAnnotation.Thickness=annotation.thickness;newAnnotation.Bounds=this.convertBounds(annotation.bounds);newAnnotation.PathData=annotation.data;newAnnotation.pageIndex=annotation.pageNumber;if(annotation.shapeAnnotationType==='Ink'){newAnnotation.AnnotType='Ink';newAnnotation.IsPathData=true;documentCollections[annotation.pageNumber].signatureInkAnnotation.push(newAnnotation);}if(annotation.shapeAnnotationType==='Signature'){newAnnotation.AnnotType='Signature';newAnnotation.SignatureName=annotation.annotationId;newAnnotation.IsSignature=true;documentCollections[annotation.pageNumber].signatureAnnotation.push(newAnnotation);}}else{// eslint-disable-next-line max-len
if(annotation.shapeAnnotationType==='Line'||annotation.shapeAnnotationType==='LineWidthArrowHead'||annotation.shapeAnnotationType==='Polyline'||annotation.shapeAnnotationType==='Polygon'||annotation.shapeAnnotationType==='Polyline'||annotation.shapeAnnotationType==='Circle'||annotation.shapeAnnotationType==='Oval'||annotation.shapeAnnotationType==='Rectangle'||annotation.shapeAnnotationType==='Square'||annotation.shapeAnnotationType==='Ellipse'){newAnnotation.AnnotType='shape';newAnnotation.StrokeColor=annotation.strokeColor;newAnnotation.FillColor=annotation.fillColor;newAnnotation.Thickness=annotation.thickness;newAnnotation.BorderStyle=annotation.borderStyle;newAnnotation.BorderDashArray=annotation.borderDashArray;newAnnotation.RotateAngle=annotation.rotateAngle;newAnnotation.IsCloudShape=annotation.isCloudShape;newAnnotation.CloudIntensity=annotation.cloudIntensity;newAnnotation.RectangleDifference=annotation.rectangleDifference;newAnnotation.LineHeadStart=annotation.lineHeadStart;newAnnotation.LineHeadEnd=annotation.lineHeadEnd;newAnnotation.IsLocked=annotation.isLocked;newAnnotation.EnableShapeLabel=annotation.enableShapeLabel;newAnnotation.LabelContent=annotation.labelContent;newAnnotation.LabelFillColor=annotation.labelFillColor;newAnnotation.LabelBorderColor=annotation.labelBorderColor;newAnnotation.FontColor=annotation.fontColor;newAnnotation.FontSize=annotation.fontSize;newAnnotation.LabelBounds=this.convertBounds(annotation.labelBounds);newAnnotation.LabelSettings=annotation.labelSettings;newAnnotation.Bounds=this.convertBounds(annotation.bounds);newAnnotation.LeaderLength=annotation.leaderLength;newAnnotation.LeaderLineExtenstion=annotation.leaderLineExtension;if(annotation.vertexPoints&&annotation.vertexPoints.length>=1){// eslint-disable-next-line
var points=new Array();for(var i=0;i<annotation.vertexPoints.length;i++){points.push(this.convertVertexPoints(annotation.vertexPoints[i]));}newAnnotation.VertexPoints=points;}newAnnotation.EnableShapeLabel=annotation.enableShapeLabel;// eslint-disable-next-line max-len
if(annotation.subject==='Distance calculation'||annotation.subject==='Perimeter calculation'||annotation.subject==='Area calculation'||annotation.subject==='Radius calculation'||annotation.subject==='Volume calculation'){newAnnotation.AnnotType='shape_measure';// eslint-disable-next-line
var calibrate=annotation.calibrate;if(calibrate){// eslint-disable-next-line
newAnnotation.Calibrate={'Ratio':calibrate.ratio,'X':[{'Unit':calibrate.x[0].unit,'ConversionFactor':calibrate.x[0].conversionFactor,'FractionalType':calibrate.x[0].fractionalType,'Denominator':calibrate.x[0].denominator,'FormatDenominator':calibrate.x[0].formatDenominator}],// eslint-disable-next-line
'Distance':[{'Unit':calibrate.distance[0].unit,'ConversionFactor':calibrate.distance[0].conversionFactor,'FractionalType':calibrate.distance[0].fractionalType,'Denominator':calibrate.distance[0].denominator,'FormatDenominator':calibrate.distance[0].formatDenominator}],// eslint-disable-next-line
'Area':[{'Unit':calibrate.area[0].unit,'ConversionFactor':calibrate.area[0].conversionFactor,'FractionalType':calibrate.area[0].fractionalType,'Denominator':calibrate.area[0].denominator,'FormatDenominator':calibrate.area[0].formatDenominator}],// eslint-disable-next-line
'Angle':null,'Volume':null,'TargetUnitConversion':calibrate.targetUnitConversion,'Depth':calibrate.depth};}newAnnotation.Indent=annotation.indent;newAnnotation.Caption=annotation.caption;newAnnotation.CaptionPosition=annotation.captionPosition;newAnnotation.LeaderLineExtension=annotation.leaderLineExtension;newAnnotation.LeaderLength=annotation.leaderLength;newAnnotation.LeaderLineOffset=annotation.leaderLineOffset;documentCollections[annotation.pageNumber].measureShapeAnnotation.push(newAnnotation);}else{documentCollections[annotation.pageNumber].shapeAnnotation.push(newAnnotation);}}}}pdfAnnotation.pdfAnnotation=documentCollections;this.pdfViewer.importAnnotation(pdfAnnotation);}};/**
     * @param bounds
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.convertBounds=function(bounds,isRect,isStamp){if(bounds){if(isRect){var left=bounds.left?bounds.left:bounds.Left?bounds.Left:0;var right=bounds.right?bounds.right:bounds.Right?bounds.Right:0;var bottom=bounds.bottom?bounds.bottom:bounds.Bottom?bounds.Bottom:0;var top_5=bounds.top?bounds.top:bounds.Top?bounds.Top:0;return{left:left,right:right,bottom:bottom,top:top_5};}else{var x=bounds.x?bounds.x:bounds.left?bounds.left:bounds.Left?bounds.Left:0;var y=bounds.y?bounds.y:bounds.top?bounds.top:bounds.Top?bounds.Top:0;var width=bounds.width?bounds.width:bounds.Width?bounds.Width:0;var height=bounds.height?bounds.height:bounds.Height?bounds.Height:0;if(isStamp){return{X:this.ConvertPixelToPoint(x),Y:this.ConvertPixelToPoint(y),Left:this.ConvertPixelToPoint(x),Top:this.ConvertPixelToPoint(y),Height:this.ConvertPixelToPoint(height),Width:this.ConvertPixelToPoint(width)};}else{return{X:x,Y:y,Left:x,Top:y,Height:height,Width:width};}}}};// eslint-disable-next-line
PdfViewerBase.prototype.ConvertPixelToPoint=function(number){return number*(72/96);};// eslint-disable-next-line
PdfViewerBase.prototype.convertVertexPoints=function(points){if(points){var x=points.x?points.x:points.X?points.X:0;var y=points.y?points.y:points.Y?points.Y:0;return{X:x,Y:y,Left:x,Top:y};}};// eslint-disable-next-line
PdfViewerBase.prototype.updateComments=function(annotation,comments){if(annotation&&comments){// eslint-disable-next-line
var newAnnotation={};newAnnotation.ShapeAnnotationType=annotation.shapeAnnotationType;newAnnotation.Author=comments.author;newAnnotation.AnnotationSelectorSettings=annotation.annotationSelectorSettings;newAnnotation.AnnotationSettings=annotation.annotationSettings;newAnnotation.PageNumber=annotation.pageNumber;newAnnotation.ModifiedDate=comments.modifiedDate;newAnnotation.Subject=annotation.subject;newAnnotation.Note=comments.note;newAnnotation.AnnotName=comments.annotName;newAnnotation.Comments=comments.comments;newAnnotation.State=comments.review.state;newAnnotation.StateModel=comments.review.stateModel;newAnnotation.CustomData=annotation.customData;newAnnotation.IsLock=comments.isLock;return newAnnotation;}};/**
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.removeFocus=function(){if(sf.base.isBlazor()){// eslint-disable-next-line
var currentPageContainer=this.pdfViewer.element.querySelector('#'+this.pdfViewer.dataId+'_totalPage');// eslint-disable-next-line max-len
if(currentPageContainer&&currentPageContainer.firstElementChild&&currentPageContainer.firstElementChild.firstElementChild){currentPageContainer.firstElementChild.firstElementChild.blur();}}};/**
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.updateDocumentEditedProperty=function(isEdited){this.pdfViewer.allowServerDataBinding=true;this.pdfViewer.isDocumentEdited=isEdited;this.pdfViewer.updatePdfViewerOptions("IsDocumentEdited",isEdited);this.pdfViewer.allowServerDataBinding=false;};/**
    * @private
    */PdfViewerBase.prototype.getWindowDevicePixelRatio=function(){var devicePixelRatio=window.devicePixelRatio;if(!sf.base.Browser.isDevice){return devicePixelRatio;}else{return devicePixelRatio=2;}};/**
    * @private
    */PdfViewerBase.prototype.getZoomRatio=function(zoom){var zoomFactor=this.getZoomFactor();var zoomValue=zoom?zoom:1;var ratio;var devicePixelRatio=this.getWindowDevicePixelRatio();if(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&zoomFactor<=0.7){ratio=zoomValue*devicePixelRatio;}else{ratio=zoomValue;}return ratio;};/**
    * @private
    */PdfViewerBase.prototype.importJsonForRotatedDocuments=function(Rotate,pageNumber,bounds,originalRotation){// eslint-disable-next-line
var rotateAngle=Math.abs(Rotate);var pageDetails=this.pageSize[pageNumber];//originalRotation = !isNullOrUndefined(originalRotation) ? originalRotation : pageDetails.rotation;
if(originalRotation!==pageDetails.rotation){rotateAngle=this.getRotationAngle(originalRotation,pageNumber);this.isPageRotated=true;}else{rotateAngle=0;this.isPageRotated=false;}if(rotateAngle===1){return{X:pageDetails.width-bounds.Y-bounds.Height,Y:bounds.X,Height:bounds.Width,Width:bounds.Height};}else if(rotateAngle===2){return{X:pageDetails.width-bounds.X-bounds.Width,Y:pageDetails.height-bounds.Y-bounds.Height,Height:bounds.Height,Width:bounds.Width};}else if(rotateAngle===3){return{X:bounds.Y,Y:pageDetails.height-bounds.X-bounds.Width,Height:bounds.Width,Width:bounds.Height};}else{return bounds;}};/**
    * @private
    */PdfViewerBase.prototype.getRotationAngle=function(originalRotation,pageNumber){var pageDetails=this.pageSize[pageNumber];originalRotation=Math.abs(originalRotation);var rotateAngle;if(originalRotation===0){return rotateAngle=pageDetails.rotation;}else if(originalRotation===1||originalRotation===90){if(pageDetails.rotation==0){return rotateAngle=3;}else if(pageDetails.rotation===2){return rotateAngle=1;}else if(pageDetails.rotation===3){return rotateAngle=2;}}else if(originalRotation===2||originalRotation===180){if(pageDetails.rotation==0){return rotateAngle=2;}else if(pageDetails.rotation===1){return rotateAngle=3;}else if(pageDetails.rotation===3){return rotateAngle=1;}}else if(originalRotation===3||originalRotation===270){if(pageDetails.rotation==0){return rotateAngle=1;}else if(pageDetails.rotation===2){return rotateAngle=3;}else if(pageDetails.rotation===1){return rotateAngle=2;}}};/**
    * @private
    */PdfViewerBase.prototype.calculateVertexPoints=function(Rotate,pageNumber,vertexPoints,originalRotation){// eslint-disable-next-line
var rotateAngle=Math.abs(Rotate);var vPoints=[];var pageDetails=this.pageSize[pageNumber];var x;var y;var point;//originalRotation = !isNullOrUndefined(originalRotation) ? originalRotation : pageDetails.rotation;
if(originalRotation!==pageDetails.rotation){rotateAngle=this.getRotationAngle(originalRotation,pageNumber);}else{rotateAngle=0;}for(var j=0;j<vertexPoints.length;j++){if(rotateAngle===1){x=vertexPoints[j].Y?pageDetails.width-vertexPoints[j].Y:pageDetails.width-vertexPoints[j].y;y=vertexPoints[j].X?vertexPoints[j].X:vertexPoints[j].x;point={x:x,y:y};vPoints.push(point);}else if(rotateAngle===2){x=vertexPoints[j].X?pageDetails.width-vertexPoints[j].X:pageDetails.width-vertexPoints[j].x;y=vertexPoints[j].Y?pageDetails.height-vertexPoints[j].Y:pageDetails.height-vertexPoints[j].y;var point_1={x:x,y:y};vPoints.push(point_1);}else if(rotateAngle==3){x=vertexPoints[j].Y?vertexPoints[j].Y:vertexPoints[j].y;y=vertexPoints[j].X?pageDetails.height-vertexPoints[j].X:pageDetails.height-vertexPoints[j].x;point={x:x,y:y};vPoints.push(point);}else{x=vertexPoints[j].X?vertexPoints[j].X:vertexPoints[j].x;y=vertexPoints[j].Y?vertexPoints[j].Y:vertexPoints[j].y;var point_2={x:x,y:y};vPoints.push(point_2);}}return vPoints;};/**
    * @private
    */PdfViewerBase.prototype.setLinksInClientSide=function(links){var data=JSON.parse(links);if(data){for(var i=data.startIndex;i<data.endIndex;i++){var hyperlinkId=this.documentId+'_'+i+'_hyperlinkAndLinkAnnotation';if(this.hyperlinkAndLinkAnnotation&&!this.hyperlinkAndLinkAnnotation[hyperlinkId]){var hyperlink=JSON.parse(data.hyperlinikCollection[i]);var storeObject={hyperlinks:hyperlink['hyperlinks'],hyperlinkBounds:hyperlink['hyperlinkBounds'],linkAnnotation:hyperlink['linkAnnotation'],linkPage:hyperlink['linkPage'],annotationLocation:hyperlink['annotationLocation'],textContent:hyperlink['textContent'],width:hyperlink['width'],textBounds:hyperlink['textBounds'],pageText:hyperlink['pageText'],rotation:hyperlink['rotation'],scaleFactor:hyperlink['scaleFactor'],uniqueId:hyperlink['uniqueId'],zoomFactor:hyperlink['zoomFactor']};if(this.pageSize[i]){// eslint-disable-next-line
this.pageSize[i].rotation=parseFloat(hyperlink['rotation']);}this.hyperlinkAndLinkAnnotation[hyperlinkId]=JSON.stringify(storeObject);}}}};/**
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.getLinkInformation=function(pageIndex,isTextSearch){var zoomFactor=this.retrieveCurrentZoomFactor();if(this.pdfViewer.restrictZoomRequest&&!this.pdfViewer.tileRenderingSettings.enableTileRendering){zoomFactor=1;}var id=this.documentId+'_'+pageIndex;var storedImage=this.pageImageDetails?this.pageImageDetails[id+'_'+zoomFactor+'_imageUrl']?this.pageImageDetails[id+'_'+zoomFactor+'_imageUrl']:this.getPinchZoomPage(pageIndex):this.getPinchZoomPage(pageIndex);var storedHyperlink=this.hyperlinkAndLinkAnnotation?this.hyperlinkAndLinkAnnotation[id+'_hyperlinkAndLinkAnnotation']?this.hyperlinkAndLinkAnnotation[id+'_hyperlinkAndLinkAnnotation']:this.getPinchZoomPage(pageIndex):this.getPinchZoomPage(pageIndex);var storedTextDetails=this.pageTextDetails?this.pageTextDetails[id+'_textDetails']?this.pageTextDetails[id+'_textDetails']:this.getPinchZoomPage(pageIndex):this.getPinchZoomPage(pageIndex);if(!storedImage){// eslint-disable-next-line
var storedTileData=this.getStoredTileImageDetails(pageIndex,0,0,zoomFactor);if(storedTileData){storedImage=storedTileData;}}// eslint-disable-next-line
var imageUrl=null;var linkAnnotation=null;var textDetails=null;var mergedObj=null;if(storedImage&&storedHyperlink){// eslint-disable-next-line
imageUrl=JSON.parse(storedImage);linkAnnotation=JSON.parse(storedHyperlink);textDetails=JSON.parse(storedTextDetails);mergedObj=Object.assign({},imageUrl,linkAnnotation,textDetails);this.isPinchZoomStorage=false;}return mergedObj;};return PdfViewerBase;}();/**
 * TextLayer module is used to handle the text content on the control.
 *
 * @hidden
 */var TextLayer=/** @class */function(){/**
     * @param {PdfViewer} pdfViewer - The PdfViewer.
     * @param {PdfViewerBase} pdfViewerBase - The PdfViewerBase.
     * @private
     */function TextLayer(pdfViewer,pdfViewerBase){var _this=this;// eslint-disable-next-line
this.textBoundsArray=[];/**
         * @private
         */ // eslint-disable-next-line
this.characterBound=[];/**
         * @returns {void}
         */this.closeNotification=function(){_this.notifyDialog.hide();};this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @param {number} pageNumber - The pageNumber.
     * @param {number} pageWidth - The pageWidth.
     * @param {number} pageHeight - The pageHeight.
     * @param {HTMLElement} pageDiv - The pageDiv.
     * @returns {HTMLElement} - The HTMLElement.
     * @private
     */TextLayer.prototype.addTextLayer=function(pageNumber,pageWidth,pageHeight,pageDiv){var textDiv=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageNumber);var textLayer;if(!textDiv){textLayer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_textLayer_'+pageNumber,className:'e-pv-text-layer'});textLayer.style.width=pageWidth+'px';textLayer.style.height=pageHeight+'px';pageDiv.appendChild(textLayer);}this.pdfViewerBase.applyElementStyles(textLayer,pageNumber);return textLayer;};/**
     * @param {number} pageNumber - The pageNumber.
     * @param {any} textContents - The textContents.
     * @param {any} textBounds - The textBounds.
     * @param {any} rotation - The rotation.
     * @returns {void}
     * @private
     */ // eslint-disable-next-line
TextLayer.prototype.renderTextContents=function(pageNumber,textContents,textBounds,rotation){var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageNumber);var canvasElement=sf.base.createElement("canvas");var isRTLText=false;if(canvasElement&&textLayer.childNodes.length===0){for(var i=0;i<textContents.length;i++){// eslint-disable-next-line
var bounds=textBounds[i];// eslint-disable-next-line max-len
var textDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_text_'+pageNumber+'_'+i,className:'e-pv-text',attrs:{'tabindex':'0'}});var textContent=textContents[i];textDiv.textContent=textContent.replace(/&nbsp;/g,' ');// eslint-disable-next-line
var newLine=textContents[i].replace(/  +/g,' ');if(newLine!==' '){textDiv.style.whiteSpace='pre';}if(textContent===' '){textDiv.style.whiteSpace='pre';}if(!sf.base.isNullOrUndefined(textDiv.textContent)&&textContent!==" "){isRTLText=this.pdfViewerBase.checkIsRtlText(textDiv.textContent);textDiv.style.direction=isRTLText?'rtl':'ltr';}else{textDiv.style.direction=isRTLText?'rtl':'ltr';}if(bounds){this.setStyleToTextDiv(textDiv,bounds.X,bounds.Y,bounds.Bottom,bounds.Width,bounds.Height,bounds.Rotation);}this.setTextElementProperties(textDiv);var context=canvasElement.getContext('2d');context.font=textDiv.style.fontSize+' '+textDiv.style.fontFamily;var contextWidth=context.measureText(textContents[i].replace(/(\r\n|\n|\r)/gm,'')).width;if(bounds){var scale=void 0;if(bounds.Rotation===90||bounds.Rotation===270){scale=bounds.Height*this.pdfViewerBase.getZoomFactor()/contextWidth;}else{scale=bounds.Width*this.pdfViewerBase.getZoomFactor()/contextWidth;}this.applyTextRotation(scale,textDiv,rotation,bounds.Rotation,bounds);}textLayer.appendChild(textDiv);this.resizeExcessDiv(textLayer,textDiv);// eslint-disable-next-line max-len
if(this.pdfViewer.textSelectionModule&&this.pdfViewer.enableTextSelection&&!this.pdfViewerBase.isTextSelectionDisabled&&textDiv.className!=='e-pdfviewer-formFields'&&textDiv.className!=='e-pdfviewer-signatureformfields'&&textDiv.className!=='e-pdfviewer-signatureformfields-signature'){textDiv.classList.add('e-pv-cursor');}}}};/**
     * @param pageNumber
     * @param textContents
     * @param textBounds
     * @param rotation
     * @param isTextSearch
     * @param pageNumber
     * @param textContents
     * @param textBounds
     * @param rotation
     * @param isTextSearch
     * @private
     */ // eslint-disable-next-line
TextLayer.prototype.resizeTextContents=function(pageNumber,textContents,textBounds,rotation,isTextSearch){var textLayer=this.pdfViewerBase.getElement('_textLayer_'+pageNumber);var canvasElement=sf.base.createElement("canvas");if(canvasElement){for(var i=0;i<textLayer.childNodes.length;i++){// eslint-disable-next-line
var bounds=void 0;var textDiv=this.pdfViewerBase.getElement('_text_'+pageNumber+'_'+i);if(sf.base.isNullOrUndefined(textDiv)){break;}if(textBounds){bounds=textBounds[i];if(bounds){this.setStyleToTextDiv(textDiv,bounds.X,bounds.Y,bounds.Bottom,bounds.Width,bounds.Height,bounds.Rotation);}}this.setTextElementProperties(textDiv);var context=canvasElement.getContext('2d');context.font=textDiv.style.fontSize+' '+textDiv.style.fontFamily;var contextWidth=void 0;if(textContents){var textContent=textContents[i];if(textContent){contextWidth=context.measureText(textContent.replace(/(\r\n|\n|\r)/gm,'')).width;}}else{contextWidth=context.measureText(textDiv.textContent.replace(/(\r\n|\n|\r)/gm,'')).width;}if(bounds){var scale=void 0;if(bounds.Rotation===90||bounds.Rotation===270){scale=bounds.Height*this.pdfViewerBase.getZoomFactor()/contextWidth;}else{scale=bounds.Width*this.pdfViewerBase.getZoomFactor()/contextWidth;}this.applyTextRotation(scale,textDiv,rotation,bounds.Rotation,bounds);}this.resizeExcessDiv(textLayer,textDiv);}}else{textLayer.parentElement.removeChild(textLayer);}if(this.pdfViewer.textSearch){if(!isTextSearch){this.pdfViewer.textSearch.resizeSearchElements(pageNumber);}}};TextLayer.prototype.applyTextRotation=function(scale,textDiv,rotation,textRotation,bounds){var scaleString='scaleX('+scale+')';if(rotation===0){if(textRotation===0){textDiv.style.transform=scaleString;}else if(textRotation===90){textDiv.style.left=(bounds.X+bounds.Width)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=bounds.Y*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotation+'deg) '+scaleString;}else if(textRotation===180){textDiv.style.left=(bounds.X+bounds.Width)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=(bounds.Y+bounds.Height)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotation+'deg) '+scaleString;}else if(textRotation===270){textDiv.style.left=bounds.X*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=(bounds.Y+bounds.Height)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotation+'deg) '+scaleString;}else{textDiv.style.transform=scaleString;}}else if(rotation===1){var textRotationAngle=textRotation+90;if(textRotationAngle>=360){textRotationAngle-=360;}if(textRotation===0){textDiv.style.transform='rotate(90deg) '+scaleString;}else if(textRotation===90){textDiv.style.left=bounds.X*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=(bounds.Y+bounds.Width)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else if(textRotation===180){textDiv.style.left=(bounds.X-bounds.Height)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=(bounds.Y+bounds.Width)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else if(textRotation===270){textDiv.style.left=(bounds.X-bounds.Height)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=bounds.Y*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else{textDiv.style.transform='rotate(90deg) '+scaleString;}}else if(rotation===2){var textRotationAngle=textRotation+180;if(textRotationAngle>=360){textRotationAngle-=360;}if(textRotation===0){textDiv.style.transform='rotate(180deg) '+scaleString;}else if(textRotation===90){textDiv.style.left=(bounds.X-bounds.Width)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=bounds.Y*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else if(textRotation===180){textDiv.style.left=(bounds.X-bounds.Width)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=(bounds.Y-bounds.Height)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else if(textRotation===270){textDiv.style.left=bounds.X*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=(bounds.Y-bounds.Height)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else{textDiv.style.transform='rotate(180deg) '+scaleString;}}else if(rotation===3){var textRotationAngle=textRotation+270;if(textRotationAngle>=360){textRotationAngle-=360;}if(textRotation===0){textDiv.style.transform='rotate(270deg) '+scaleString;}else if(textRotation===90){textDiv.style.left=bounds.X*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=(bounds.Y-bounds.Width)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else if(textRotation===180){textDiv.style.left=(bounds.X+bounds.Height)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=(bounds.Y-bounds.Width)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else if(textRotation===270){textDiv.style.left=(bounds.X+bounds.Height)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=bounds.Y*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else{textDiv.style.transform='rotate(270deg) '+scaleString;}}};TextLayer.prototype.setTextElementProperties=function(textDiv){textDiv.style.fontFamily='serif';textDiv.style.transformOrigin='0% 0%';};/**
     * @param {number} pageNumber - The pageNumber.
     * @returns {void}
     * @private
     */TextLayer.prototype.resizeTextContentsOnZoom=function(pageNumber){// eslint-disable-next-line max-len
var renderObject=window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId()+'_'+pageNumber+'_'+this.getPreviousZoomFactor());// eslint-disable-next-line
var textBounds=[];var textContents=[];// eslint-disable-next-line
var rotation;if(renderObject){// eslint-disable-next-line
var data=JSON.parse(renderObject);// eslint-disable-next-line
textBounds=data['textBounds'];// eslint-disable-next-line
textContents=data['textContent'];// eslint-disable-next-line
rotation=data['rotation'];}if(textBounds.length!==0){this.textBoundsArray.push({pageNumber:pageNumber,textBounds:textBounds});this.resizeTextContents(pageNumber,textContents,textBounds,rotation);}else{// eslint-disable-next-line
var textElements=this.textBoundsArray.filter(function(obj){return obj.pageNumber===pageNumber;});if(textElements){if(textElements.length!==0){// eslint-disable-next-line
textBounds=textElements[0]['textBounds'];this.resizeTextContents(pageNumber,null,textBounds,rotation);}}}};TextLayer.prototype.resizeExcessDiv=function(textLayer,textDiv){var textLayerPosition=textLayer.getBoundingClientRect();var textDivPosition=textDiv.getBoundingClientRect();// eslint-disable-next-line max-len
if(textDivPosition.width+textDivPosition.left>=textLayerPosition.width+textLayerPosition.left||textDivPosition.width>textLayerPosition.width){// 'auto' width is set to reset the size of the div to its contents.
textDiv.style.width='auto';// Client width gets reset by 'auto' width property which has the width of the content.
textDiv.style.width=textDiv.clientWidth+'px';}};/**
     * @private
     * @param {boolean} isPinchZoomed - The isPinchZoomed.
     * @returns {void}
     */TextLayer.prototype.clearTextLayers=function(isPinchZoomed){var lowerPageValue=this.pdfViewerBase.currentPageNumber-3;lowerPageValue=lowerPageValue>0?lowerPageValue:0;var higherPageValue=this.pdfViewerBase.currentPageNumber+1;higherPageValue=higherPageValue<this.pdfViewerBase.pageCount?higherPageValue:this.pdfViewerBase.pageCount-1;var textLayers=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_textLayer_"]');for(var i=0;i<textLayers.length;i++){textLayers[i].style.display='block';if(this.pdfViewerBase.getMagnified()&&(this.getTextSelectionStatus()||this.getTextSearchStatus())){// eslint-disable-next-line radix
var pageNumber=parseInt(textLayers[i].id.split('_textLayer_')[1]);if(!(lowerPageValue+1<=pageNumber&&pageNumber<=higherPageValue-1)){this.removeElement(textLayers[i],isPinchZoomed);}}else if(this.pdfViewerBase.getPinchZoomed()){this.removeElement(textLayers[i],isPinchZoomed);}else{this.removeElement(textLayers[i],isPinchZoomed);}}};TextLayer.prototype.removeElement=function(element,isPinchZoomed){if(isPinchZoomed){this.removeForeignObjects(element);}else{if(sf.base.Browser.isIE){if(element.parentElement){element.parentElement.removeChild(element);}else if(element.parentNode){element.parentNode.removeChild(element);}}else{element.remove();}}};TextLayer.prototype.removeForeignObjects=function(element){// eslint-disable-next-line
var childElement=element.getElementsByClassName('foreign-object');if(childElement){for(var i=0;i<childElement.length;i++){if(childElement[i].parentElement.className==='e-pv-text-layer'){element.removeChild(childElement[0]);}}}};/**
     * @param pageNumber
     * @param divId
     * @param fromOffset
     * @param toOffset
     * @param textString
     * @param className
     * @private
     */ // eslint-disable-next-line max-len
TextLayer.prototype.convertToSpan=function(pageNumber,divId,fromOffset,toOffset,textString,className,isRTLText){var textDiv=this.pdfViewerBase.getElement('_text_'+pageNumber+'_'+divId);var textContent=textString.substring(fromOffset,toOffset);var node=document.createTextNode(textContent);if(className){var spanElement=sf.base.createElement('span');spanElement.className=className+' e-pv-text';if(isRTLText){if(toOffset===textString.length){spanElement.style.left=0+'px';spanElement.style.top=0+'px';}else{if(textDiv.style.direction=='rtl'){var currentText=textDiv.textContent;textDiv.textContent=textString.substring(toOffset,textString.length);var textBounds=textDiv.getBoundingClientRect();spanElement.style.left=textBounds.width+'px';spanElement.style.top=0+'px';textDiv.textContent=currentText;}}}spanElement.appendChild(node);textDiv.appendChild(spanElement);}else{textDiv.appendChild(node);}};/**
     * @param startPage
     * @param endPage
     * @param anchorOffsetDiv
     * @param focusOffsetDiv
     * @param anchorOffset
     * @param focusOffset
     * @private
     */ // eslint-disable-next-line max-len
TextLayer.prototype.applySpanForSelection=function(startPage,endPage,anchorOffsetDiv,focusOffsetDiv,anchorOffset,focusOffset){if(this.pdfViewer.textSelectionModule){for(var i=startPage;i<=endPage;i++){var storedData=JSON.parse(this.pdfViewerBase.pageTextDetails[this.pdfViewerBase.documentId+'_'+i+'_textDetails']);var pageText=storedData["pageText"];var isRTLText=this.pdfViewerBase.checkIsRtlText(pageText);var startId=void 0;var endId=void 0;// eslint-disable-next-line
var textDivs=this.pdfViewerBase.getElement('_textLayer_'+i).childNodes;if(i===startPage){startId=anchorOffsetDiv;endId=textDivs.length-1;}else if(i===endPage){startId=0;endId=focusOffsetDiv;}else{startId=0;endId=textDivs.length-1;}if(startPage===endPage){startId=anchorOffsetDiv;endId=focusOffsetDiv;}for(var j=startId;j<=endId;j++){var textDiv=this.pdfViewerBase.getElement('_text_'+i+'_'+j);var initId=void 0;var lastId=void 0;var length_1=void 0;if(textDiv&&textDiv.textContent){length_1=textDiv.textContent.length;var textContent=textDiv.textContent;textDiv.textContent='';if(j===startId){if(i===startPage){initId=anchorOffset;}else{initId=0;}lastId=length_1;this.convertToSpan(i,j,0,initId,textContent,null,isRTLText);}else if(j===endId&&i===endPage){initId=0;lastId=focusOffset;}else{initId=0;lastId=length_1;}if(startId===endId&&startPage===endPage){initId=anchorOffset;lastId=focusOffset;}this.convertToSpan(i,j,initId,lastId,textContent,'e-pv-maintaincontent',isRTLText);if(j===endId&&i===endPage){this.convertToSpan(i,j,lastId,textContent.length,textContent,null,isRTLText);}}}}}};/**
     * @private
     * @returns {void}
     */TextLayer.prototype.clearDivSelection=function(){var textLayers=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_textLayer_"]');for(var i=0;i<textLayers.length;i++){var childNodes=textLayers[i].childNodes;for(var j=0;j<childNodes.length;j++){var textDiv=childNodes[j];// eslint-disable-next-line max-len
if(textDiv.className!=='e-pdfviewer-formFields'&&textDiv.className!=='e-pdfviewer-signatureformfields'&&textDiv.className!=='e-pdfviewer-signatureformfields-signature'){var textContent=textDiv.textContent;// eslint-disable-next-line max-len
if(textDiv.childNodes.length>1||textDiv.childNodes.length===1&&textDiv.childNodes[0].tagName==='SPAN'){textDiv.textContent='';textDiv.textContent=textContent;}}}}};// eslint-disable-next-line
TextLayer.prototype.setStyleToTextDiv=function(textDiv,left,top,bottom,width,height,rotation){textDiv.style.left=left*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.top=top*this.pdfViewerBase.getZoomFactor()+'px';var textHeight;if(rotation===90||rotation===270){textHeight=width*this.pdfViewerBase.getZoomFactor();}else{textHeight=height*this.pdfViewerBase.getZoomFactor();}textDiv.style.height=textHeight+'px';textDiv.style.fontSize=textHeight+'px';};TextLayer.prototype.getTextSelectionStatus=function(){if(this.pdfViewer.textSelectionModule){return this.pdfViewer.textSelectionModule.isTextSelection;}else{return false;}};/**
     * @param {boolean} isAdd - The isAdd.
     * @returns {void}
     * @private
     */TextLayer.prototype.modifyTextCursor=function(isAdd){var textLayerList=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_textLayer_"]');for(var i=0;i<textLayerList.length;i++){var childNodes=textLayerList[i].childNodes;for(var j=0;j<childNodes.length;j++){var textElement=childNodes[j];// eslint-disable-next-line max-len
if(isAdd&&textElement.className!=='e-pdfviewer-formFields'&&textElement.className!=='e-pdfviewer-signatureformfields'&&textElement.className!=='e-pdfviewer-signatureformfields-signature'){textElement.classList.add('e-pv-cursor');}else{textElement.classList.remove('e-pv-cursor');}}}};/**
     * @param {Selection} selection - The Selection.
     * @returns {boolean} - Returns true or false.
     * @private
     */TextLayer.prototype.isBackWardSelection=function(selection){var position=selection.anchorNode.compareDocumentPosition(selection.focusNode);var backward=false;if(!position&&selection.anchorOffset>selection.focusOffset||position===Node.DOCUMENT_POSITION_PRECEDING){backward=true;}return backward;};/**
     * @param {Node} element - The element.
     * @returns {number} - Returns number.
     * @private
     */TextLayer.prototype.getPageIndex=function(element){var pageId;// eslint-disable-next-line
var parentElement=element.parentElement;if(!parentElement){parentElement=element.parentNode;}if(parentElement.className==='e-pv-text-layer'){// eslint-disable-next-line radix
pageId=parseInt(element.id.split('_text_')[1]);}else{// eslint-disable-next-line radix
pageId=parseInt(parentElement.id.split('_text_')[1]);}return pageId;};/**
     * @param {Node} element - The element.
     * @param {number} pageIndex - The pageIndex.
     * @returns {number} - Returns number.
     * @private
     */TextLayer.prototype.getTextIndex=function(element,pageIndex){var textIndex;// eslint-disable-next-line
var parentElement=element.parentElement;if(!parentElement){parentElement=element.parentNode;}if(parentElement.className==='e-pv-text-layer'){// eslint-disable-next-line radix
textIndex=parseInt(element.id.split('_text_'+pageIndex+'_')[1]);}else{// eslint-disable-next-line radix
textIndex=parseInt(parentElement.id.split('_text_'+pageIndex+'_')[1]);}return textIndex;};TextLayer.prototype.getPreviousZoomFactor=function(){if(this.pdfViewer.magnificationModule){return this.pdfViewer.magnificationModule.previousZoomFactor;}else{return 1;}};/**
     * @private
     * @returns {boolean} - Returns true or false.
     */TextLayer.prototype.getTextSearchStatus=function(){if(this.pdfViewer.textSearchModule){return this.pdfViewer.textSearchModule.isTextSearch;}else{return false;}};/**
     * @param {string} text - The text.
     * @returns {void}
     * @private
     */TextLayer.prototype.createNotificationPopup=function(text){var _this=this;if(!this.isMessageBoxOpen){if(!sf.base.isBlazor()){// eslint-disable-next-line max-len
var popupElement_1=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_notify',className:'e-pv-notification-popup'});this.pdfViewerBase.viewerContainer.appendChild(popupElement_1);this.notifyDialog=new sf.popups.Dialog({showCloseIcon:true,closeOnEscape:false,isModal:true,header:this.pdfViewer.localeObj.getConstant('PdfViewer'),buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant('OK'),isPrimary:true},click:this.closeNotification.bind(this)}],// eslint-disable-next-line max-len
content:'<div class="e-pv-notification-popup-content" tabindex = "0">'+text+'</div>',target:this.pdfViewer.element,beforeClose:function beforeClose(){_this.notifyDialog.destroy();if(_this.pdfViewer.element){try{_this.pdfViewer.element.removeChild(popupElement_1);}catch(error){popupElement_1.parentElement.removeChild(popupElement_1);}}if(_this.pdfViewer.textSearchModule){_this.pdfViewer.textSearch.isMessagePopupOpened=false;}_this.isMessageBoxOpen=false;}});if(this.pdfViewer.enableRtl){this.notifyDialog.enableRtl=true;}this.notifyDialog.appendTo(popupElement_1);this.isMessageBoxOpen=true;}else{// eslint-disable-next-line
var notificationElement=document.getElementById(this.pdfViewer.dataId+'_notification_popup_content');if(notificationElement){notificationElement.textContent=text;notificationElement.innerHTML=text;}if(this.pdfViewer.textSearchModule){this.pdfViewer.textSearch.isMessagePopupOpened=false;}this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenNotificationPopup',text);}}};return TextLayer;}();/**
 * ContextMenu module is used to handle the context menus used in the control.
 *
 * @hidden
 */var ContextMenu$1=/** @class */function(){/**
     * Initialize the constructor of ontextmenu
     *
     * @param { PdfViewer } pdfViewer - Specified PdfViewer class.
     * @param { PdfViewerBase } pdfViewerBase - The pdfViewerBase.
     */function ContextMenu$$1(pdfViewer,pdfViewerBase){this.copyContextMenu=[];this.contextMenuList=[];this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;this.copyContextMenu=[{text:this.pdfViewer.localeObj.getConstant('Cut'),iconCss:'e-pv-cut-icon'},{text:this.pdfViewer.localeObj.getConstant('Copy'),iconCss:'e-pv-copy-icon'},{text:this.pdfViewer.localeObj.getConstant('Highlight context'),iconCss:'e-pv-highlight-icon'},{text:this.pdfViewer.localeObj.getConstant('Underline context'),iconCss:'e-pv-underline-icon'},{text:this.pdfViewer.localeObj.getConstant('Strikethrough context'),iconCss:'e-pv-strikethrough-icon'},{text:this.pdfViewer.localeObj.getConstant('Paste'),iconCss:'e-pv-paste-icon'},{text:this.pdfViewer.localeObj.getConstant('Delete Context'),iconCss:'e-pv-delete-icon'},{text:this.pdfViewer.localeObj.getConstant('Scale Ratio'),iconCss:'e-pv-scale-ratio-icon'},{separator:true,id:pdfViewer.element.id+'_context_menu_comment_separator'},{text:this.pdfViewer.localeObj.getConstant('Comment'),iconCss:'e-pv-comment-icon'},{separator:true,id:pdfViewer.element.id+'_context_menu_separator'},{text:this.pdfViewer.localeObj.getConstant('Properties'),iconCss:'e-pv-property-icon'}];}/**
     * @private
     * @returns {void}
     */ContextMenu$$1.prototype.createContextMenu=function(){this.contextMenuElement=sf.base.createElement('ul',{id:this.pdfViewer.dataId+'_context_menu',className:'e-pv-context-menu'});this.pdfViewer.element.appendChild(this.contextMenuElement);this.contextMenuObj=new sf.navigations.ContextMenu({target:'#'+this.pdfViewerBase.viewerContainer.id,items:this.copyContextMenu,beforeOpen:this.contextMenuOnBeforeOpen.bind(this),select:this.onMenuItemSelect.bind(this),created:this.contextMenuOnCreated.bind(this)});if(this.pdfViewer.enableRtl){this.contextMenuObj.enableRtl=true;}this.contextMenuObj.appendTo(this.contextMenuElement);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.contextMenuObj.animationSettings.effect='ZoomIn';}else{this.contextMenuObj.animationSettings.effect='SlideDown';}};ContextMenu$$1.prototype.contextMenuOnCreated=function(args){// eslint-disable-next-line max-len
var items=[this.pdfViewer.localeObj.getConstant('Highlight context'),this.pdfViewer.localeObj.getConstant('Underline context'),this.pdfViewer.localeObj.getConstant('Strikethrough context')];if(this.pdfViewer.annotationModule){if(!this.pdfViewer.annotationModule.textMarkupAnnotationModule){this.contextMenuObj.enableItems(items,false);}}else{this.contextMenuObj.enableItems(items,false);}};ContextMenu$$1.prototype.setTarget=function(args){var target=null;if(args.event&&args.event.target){target=args.event.target;this.currentTarget=target;}return target;};ContextMenu$$1.prototype.contextMenuOnBeforeOpen=function(args){var target=this.setTarget(args);var currentAnnotSettings=this.pdfViewer.selectedItems.annotations.length!==0?this.pdfViewer.selectedItems.annotations[0].annotationSettings:null;// eslint-disable-next-line max-len
if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&target&&target.className==='free-text-input'&&target.tagName==='TEXTAREA'){this.pdfViewerBase.isFreeTextContextMenu=true;}// eslint-disable-next-line max-len
this.contextMenuObj.showItems([this.pdfViewer.localeObj.getConstant('Cut'),this.pdfViewer.localeObj.getConstant('Copy'),this.pdfViewer.localeObj.getConstant('Paste'),// eslint-disable-next-line max-len
this.pdfViewer.localeObj.getConstant('Highlight context'),this.pdfViewer.localeObj.getConstant('Underline context'),this.pdfViewer.localeObj.getConstant('Strikethrough context'),// eslint-disable-next-line max-len
this.pdfViewer.localeObj.getConstant('Delete Context'),this.pdfViewer.localeObj.getConstant('Scale Ratio'),this.pdfViewer.localeObj.getConstant('Comment'),this.pdfViewer.localeObj.getConstant('Properties')]);this.pdfViewerBase.getElement('_context_menu_separator').classList.remove('e-menu-hide');this.pdfViewerBase.getElement('_context_menu_comment_separator').classList.remove('e-menu-hide');// eslint-disable-next-line max-len
this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Cut'),this.pdfViewer.localeObj.getConstant('Copy'),this.pdfViewer.localeObj.getConstant('Paste'),this.pdfViewer.localeObj.getConstant('Delete Context')],true);if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.checkContextMenuDeleteItem(this.contextMenuObj);}if(this.pdfViewer.textSelectionModule||this.pdfViewerBase.isShapeBasedAnnotationsEnabled()){if(args.event||this.pdfViewerBase.isTouchDesignerMode){var isClickWithinSelectionBounds=this.pdfViewerBase.isClickWithinSelectionBounds(args.event);// eslint-disable-next-line max-len
if(this.pdfViewerBase.isFreeTextContextMenu){this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant('Highlight context'),this.pdfViewer.localeObj.getConstant('Underline context'),this.pdfViewer.localeObj.getConstant('Strikethrough context'),this.pdfViewer.localeObj.getConstant('Properties'),this.pdfViewer.localeObj.getConstant('Comment'),this.pdfViewer.localeObj.getConstant('Scale Ratio'),this.pdfViewer.localeObj.getConstant('Delete Context')]);this.pdfViewerBase.getElement('_context_menu_separator').classList.add('e-menu-hide');this.pdfViewerBase.getElement('_context_menu_comment_separator').classList.add('e-menu-hide');// eslint-disable-next-line max-len
if(this.pdfViewer.annotation.freeTextAnnotationModule&&this.pdfViewer.annotation.freeTextAnnotationModule.isTextSelected){this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Copy')],true);this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Cut')],true);}else{this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Copy')],false);this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Cut')],false);window.getSelection().removeAllRanges();}// eslint-disable-next-line max-len
if(this.pdfViewer.annotation.freeTextAnnotationModule&&this.pdfViewer.annotation.freeTextAnnotationModule.selectedText!==''){this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Paste')],true);}else{this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Paste')],false);}}else if(isClickWithinSelectionBounds&&this.pdfViewer.textSelectionModule){// eslint-disable-next-line max-len
if(!args.event.target.classList.contains('e-pv-maintaincontent')&&args.event.target.classList.contains('e-pv-text')||args.event.target.classList.contains('e-pv-text-layer')){if(this.pdfViewerBase.checkIsNormalText()){args.cancel=true;}// eslint-disable-next-line max-len
}else if((sf.base.Browser.isIE||sf.base.Browser.info.name==='edge')&&args.event.target.classList.contains('e-pv-page-container')){args.cancel=true;}// eslint-disable-next-line max-len
this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant('Cut'),this.pdfViewer.localeObj.getConstant('Paste'),this.pdfViewer.localeObj.getConstant('Delete Context'),this.pdfViewer.localeObj.getConstant('Scale Ratio'),this.pdfViewer.localeObj.getConstant('Comment'),this.pdfViewer.localeObj.getConstant('Properties')]);this.pdfViewerBase.getElement('_context_menu_separator').classList.add('e-menu-hide');this.pdfViewerBase.getElement('_context_menu_comment_separator').classList.add('e-menu-hide');// eslint-disable-next-line max-len
}else if(this.pdfViewer.selectedItems.annotations.length!==0&&(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='HandWrittenSignature'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureText'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureImage')){this.onOpeningForShape(false,true);// eslint-disable-next-line max-len
}else if(this.pdfViewer.selectedItems.annotations.length!==0&&this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType!=='Path'&&!currentAnnotSettings.isLock){this.onOpeningForShape(true);// eslint-disable-next-line max-len
}else if(this.pdfViewer.selectedItems.formFields.length!==0&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&this.pdfViewer.designerMode){this.onOpeningForShape(true);// eslint-disable-next-line max-len
if(!sf.base.isNullOrUndefined(this.pdfViewer.toolbar)&&!sf.base.isNullOrUndefined(this.pdfViewer.toolbar.formDesignerToolbarModule)){this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(true);}}else{// eslint-disable-next-line
var target_1=this.pdfViewerBase.designerModetarget;if(args.event&&args.event.target){target_1=args.event.target;}// eslint-disable-next-line max-len
if(this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(target_1.classList.contains('e-pv-text-layer')||target_1.classList.contains('e-pv-text'))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){this.onOpeningForShape(false);// eslint-disable-next-line max-len
}else if(this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isShapeCopied&&(target_1.classList.contains('e-pv-text-layer')||target_1.classList.contains('e-pv-text'))){this.onOpeningForShape(false);// eslint-disable-next-line max-len
}else if(this.pdfViewerBase.isCalibrateAnnotationModule()&&this.pdfViewer.annotationModule.measureAnnotationModule.currentAnnotationMode&&!currentAnnotSettings){// eslint-disable-next-line max-len
this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant('Highlight context'),this.pdfViewer.localeObj.getConstant('Underline context'),this.pdfViewer.localeObj.getConstant('Strikethrough context'),this.pdfViewer.localeObj.getConstant('Properties')]);this.pdfViewerBase.getElement('_context_menu_separator').classList.add('e-menu-hide');this.pdfViewerBase.getElement('_context_menu_comment_separator').classList.remove('e-menu-hide');// eslint-disable-next-line max-len
this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Cut'),this.pdfViewer.localeObj.getConstant('Copy'),this.pdfViewer.localeObj.getConstant('Paste'),this.pdfViewer.localeObj.getConstant('Delete Context'),this.pdfViewer.localeObj.getConstant('Comment')],false);// eslint-disable-next-line max-len
}else if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.annotationSettings.isLock){// eslint-disable-next-line max-len
this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant('Highlight context'),this.pdfViewer.localeObj.getConstant('Underline context'),this.pdfViewer.localeObj.getConstant('Strikethrough context'),this.pdfViewer.localeObj.getConstant('Properties'),this.pdfViewer.localeObj.getConstant('Cut'),this.pdfViewer.localeObj.getConstant('Copy'),this.pdfViewer.localeObj.getConstant('Paste'),this.pdfViewer.localeObj.getConstant('Scale Ratio')]);this.pdfViewerBase.getElement('_context_menu_separator').classList.add('e-menu-hide');this.pdfViewerBase.getElement('_context_menu_comment_separator').classList.remove('e-menu-hide');// eslint-disable-next-line max-len
this.contextMenuObj.showItems([this.pdfViewer.localeObj.getConstant('Delete Context'),this.pdfViewer.localeObj.getConstant('Comment')],false);}else{args.cancel=true;}}}else if(this.pdfViewer.textSelectionModule&&this.pdfViewer.contextMenuOption==='MouseUp'){// eslint-disable-next-line max-len
this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant('Cut'),this.pdfViewer.localeObj.getConstant('Paste'),this.pdfViewer.localeObj.getConstant('Delete Context'),this.pdfViewer.localeObj.getConstant('Scale Ratio'),this.pdfViewer.localeObj.getConstant('Comment'),this.pdfViewer.localeObj.getConstant('Properties')]);this.pdfViewerBase.getElement('_context_menu_separator').classList.add('e-menu-hide');this.pdfViewerBase.getElement('_context_menu_comment_separator').classList.add('e-menu-hide');}else{this.hideContextItems();}this.enableCommentPanelItem();}else{args.cancel=true;}if(this.pdfViewer.contextMenuOption==='None'){args.cancel=true;}else{this.contextMenuItems(args);}if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.restrictContextMenu()){args.cancel=true;}this.pdfViewerBase.isTouchDesignerMode=false;};ContextMenu$$1.prototype.contextMenuItems=function(args){if(this.pdfViewer.contextMenuSettings.contextMenuItems.length){var hideMenuItems=[];var contextMenuList=this.contextMenuCollection();var ul=this.contextMenuObj.getRootElement();for(var j=0;j<this.pdfViewer.contextMenuSettings.contextMenuItems.length;j++){for(var i=0;i<this.contextMenuList.length;i++){var menuItem=this.contextMenuList[i].text;switch(menuItem){case'Highlight':menuItem='Highlight context';break;case'Underline':menuItem='Underline context';break;case'Strikethrough':menuItem='Strikethrough context';break;case'Delete':menuItem='Delete Context';break;case'Scale Ratio':menuItem='Scale Ratio';break;case'Comment':this.pdfViewerBase.getElement('_context_menu_comment_separator').classList.add('e-menu-hide');break;case'Properties':this.pdfViewerBase.getElement('_context_menu_separator').classList.add('e-menu-hide');break;}var menuName=this.contextMenuList[i].text;if(j===0&&menuName!==ContextMenuItem[this.pdfViewer.contextMenuSettings.contextMenuItems[j]]){hideMenuItems.push(menuName);}if(j>0&&menuName===ContextMenuItem[this.pdfViewer.contextMenuSettings.contextMenuItems[j]]){for(var k=0;k<hideMenuItems.length;k++){if(hideMenuItems[k]===menuName){if(this.pdfViewer.disableContextMenuItems&&this.pdfViewer.disableContextMenuItems.length>0){var isDisabled=false;for(var l=0;l<this.pdfViewer.disableContextMenuItems.length;l++){if(hideMenuItems[k]===ContextMenuItem[this.pdfViewer.disableContextMenuItems[l]]){isDisabled=true;}}if(!isDisabled){hideMenuItems.splice(k,1);}}else{hideMenuItems.splice(k,1);}}}}}}var hideLocaleItem=this.processLocaleContent(hideMenuItems);this.contextMenuObj.hideItems(hideLocaleItem);if(this.getEnabledItemCount(ul)===0){args.cancel=true;}}};ContextMenu$$1.prototype.processLocaleContent=function(hideMenuItems){var contextMenuLocaleContent=[];if(hideMenuItems.length>0){for(var i=0;i<hideMenuItems.length;i++){var menuItem=hideMenuItems[i];switch(menuItem){case'Highlight':menuItem='Highlight context';break;case'Underline':menuItem='Underline context';break;case'Strikethrough':menuItem='Strikethrough context';break;case'Delete':menuItem='Delete Context';break;case'ScaleRatio':menuItem='Scale Ratio';break;}contextMenuLocaleContent.push(this.pdfViewer.localeObj.getConstant(menuItem));}}return contextMenuLocaleContent;};ContextMenu$$1.prototype.contextMenuCollection=function(){return this.contextMenuList=[{text:'Cut'},{text:'Copy'},{text:'Highlight'},{text:'Underline'},{text:'Strikethrough'},{text:'Paste'},{text:'Delete'},{text:'ScaleRatio'},{text:'Comment'},{text:'Properties'}];};ContextMenu$$1.prototype.getEnabledItemCount=function(ul){var enabledItemCount=this.copyContextMenu.length;var liCollection=ul.children;for(var i=0;i<liCollection.length;i++){// eslint-disable-next-line
var li=liCollection[i];if(li.classList.contains('e-menu-hide')||li.classList.contains('e-disabled')){enabledItemCount=enabledItemCount-1;}}return enabledItemCount;};ContextMenu$$1.prototype.hideContextItems=function(){if(this.pdfViewer.selectedItems.annotations.length===0){// eslint-disable-next-line max-len
this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant('Cut'),this.pdfViewer.localeObj.getConstant('Paste'),this.pdfViewer.localeObj.getConstant('Delete Context'),this.pdfViewer.localeObj.getConstant('Scale Ratio'),this.pdfViewer.localeObj.getConstant('Properties')]);this.pdfViewerBase.getElement('_context_menu_separator').classList.add('e-menu-hide');}};ContextMenu$$1.prototype.enableCommentPanelItem=function(){if(this.pdfViewer.enableCommentPanel){this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Comment')],true);}else{this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Comment')],false);}if(this.pdfViewer.selectedItems.formFields.length!==0){this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Comment')],false);}};ContextMenu$$1.prototype.onOpeningForShape=function(isProp,isSignature){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied){this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Paste')],true);}else if(this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isShapeCopied){this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Paste')],true);}else{this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Paste')],false);}// eslint-disable-next-line max-len
this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant('Highlight context'),this.pdfViewer.localeObj.getConstant('Underline context'),this.pdfViewer.localeObj.getConstant('Strikethrough context'),this.pdfViewer.localeObj.getConstant('Scale Ratio')]);if(isProp){// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations.length!==0&&(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Line'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='LineWidthArrowHead'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Distance')){this.contextMenuObj.showItems([this.pdfViewer.localeObj.getConstant('Properties')]);// eslint-disable-next-line max-len
}else if(this.pdfViewer.selectedItems.formFields.length!==0&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType){this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant('Comment')]);this.pdfViewerBase.getElement('_context_menu_separator').classList.add('e-menu-hide');this.contextMenuObj.showItems([this.pdfViewer.localeObj.getConstant('Properties')]);}else{this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant('Properties')]);this.pdfViewerBase.getElement('_context_menu_separator').classList.add('e-menu-hide');}}else if(isSignature){// eslint-disable-next-line max-len
this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant('Properties'),this.pdfViewer.localeObj.getConstant('Comment')]);// eslint-disable-next-line max-len
this.pdfViewerBase.getElement('_context_menu_separator').classList.add('e-menu-hide');this.pdfViewerBase.getElement('_context_menu_comment_separator').classList.add('e-menu-hide');}else{this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant('Cut'),this.pdfViewer.localeObj.getConstant('Copy'),// eslint-disable-next-line max-len
this.pdfViewer.localeObj.getConstant('Delete Context'),this.pdfViewer.localeObj.getConstant('Properties'),this.pdfViewer.localeObj.getConstant('Comment')]);this.pdfViewerBase.getElement('_context_menu_separator').classList.add('e-menu-hide');this.pdfViewerBase.getElement('_context_menu_comment_separator').classList.add('e-menu-hide');}};ContextMenu$$1.prototype.OnItemSelected=function(selectedMenu){this.pdfViewerBase.OnItemSelected(selectedMenu);};ContextMenu$$1.prototype.onMenuItemSelect=function(args){this.pdfViewerBase.OnItemSelected(args.item.text);};/**
     * @private
     * @returns {void}
     */ContextMenu$$1.prototype.destroy=function(){if(this.contextMenuObj){this.previousAction='';this.contextMenuObj.destroy();}};/**
     * @private
     * @returns {void}
     */ContextMenu$$1.prototype.close=function(){this.contextMenuObj.close();};/**
     * open the context menu.
     * @param {number} top - The top.
     * @param {number} left - The left.
     * @param {HTMLElement} target - The target.
     * @returns {void}
     */ContextMenu$$1.prototype.open=function(top,left,target){this.contextMenuObj.open(top,left,target);};return ContextMenu$$1;}();/**
 * @hidden
 */var AjaxHandler=/** @class */function(){/**
     * Constructor for Ajax class
     * @param  {PdfViewer} pdfviewer - The pdfviewer.
     * @private
     */function AjaxHandler(pdfviewer){/**
         * Specifies the URL to which request to be sent.
         *
         * @default 'POST'
         */this.type='POST';/**
         * A boolean value indicating whether the request should be sent asynchronous or not.
         *
         * @default true
         * @private
         */this.mode=true;/**
         * Specifies the ContentType to which request to be sent
         *
         * @default null
         * @private
         */this.contentType='application/json;charset=UTF-8';this.pdfViewer=pdfviewer;this.retryCount=pdfviewer.retryCount;}/**
     * Send the request to server
     *
     * @param  {object} jsonObj - To send to service
     * @returns {void}
     * @private
     */AjaxHandler.prototype.send=function(jsonObj){var _this=this;this.httpRequest=new XMLHttpRequest();if(!this.mode){setTimeout(function(){_this.sendRequest(jsonObj);});}else{this.sendRequest(jsonObj);}this.httpRequest.onreadystatechange=function(){var isSkip=false;// eslint-disable-next-line
var viewerBase=_this.pdfViewer.viewerBase;if(viewerBase&&viewerBase.isPasswordAvailable&&viewerBase.passwordData===''){isSkip=true;_this.retryCount=0;}if(_this.retryCount>0){isSkip=_this.resendRequest(_this,jsonObj);}if(!isSkip){_this.stateChange(_this);}};this.httpRequest.onerror=function(){_this.error(_this);};};/**
     * Clear the http request
     * @returns {void}
     * @private
     */AjaxHandler.prototype.clear=function(){this.httpRequest&&this.httpRequest.abort();this.onSuccess=null;this.onFailure=null;this.onError=null;};// eslint-disable-next-line
AjaxHandler.prototype.resendRequest=function(proxy,jsonObj){var isSkip=false;var status=proxy.httpRequest.status;var statusString=status.toString().split('')[0];if(proxy.httpRequest.readyState===4&&status===200){// eslint-disable-next-line
var data=void 0;if(this.responseType!==null){data=proxy.httpRequest.response;}else{data=proxy.httpRequest.responseText;}if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){// eslint-disable-next-line max-len
if(data==='Document stream does not exist in the cache'||data==='Document Reference pointer does not exist in the cache'){isSkip=true;}}}}}if(statusString==='5'||isSkip){isSkip=true;this.retryCount--;proxy.pdfViewer.fireAjaxRequestFailed(status,proxy.httpRequest.statusText,jsonObj.action,true);proxy.send(jsonObj);}return isSkip;};AjaxHandler.prototype.sendRequest=function(jsonObj){this.httpRequest.open(this.type,this.url,this.mode);this.httpRequest.withCredentials=this.pdfViewer.ajaxRequestSettings.withCredentials;this.httpRequest.setRequestHeader('Content-Type',this.contentType);jsonObj=this.addExtraData(jsonObj);this.setCustomAjaxHeaders();if(this.responseType!==null){this.httpRequest.responseType=this.responseType;}this.httpRequest.send(JSON.stringify(jsonObj));// jshint ignore:line
};AjaxHandler.prototype.addExtraData=function(jsonObject){this.pdfViewer.viewerBase.ajaxData='';this.pdfViewer.fireAjaxRequestInitiate(jsonObject);if(this.pdfViewer.viewerBase.ajaxData&&this.pdfViewer.viewerBase.ajaxData!==''){jsonObject=this.pdfViewer.viewerBase.ajaxData;}return jsonObject;};AjaxHandler.prototype.stateChange=function(proxy){var status=proxy.httpRequest.status;var statusString=status.toString().split('')[0];if(proxy.httpRequest.readyState===4&&status===200){// eslint-disable-next-line
var data=void 0;if(this.responseType!==null){data=proxy.httpRequest.response;}else{data=proxy.httpRequest.responseText;}// eslint-disable-next-line
var result={name:'onSuccess',data:data,readyState:proxy.httpRequest.readyState,status:proxy.httpRequest.status};proxy.successHandler(result);}else if(proxy.httpRequest.readyState===4&&(statusString==='4'||statusString==='5')){// jshint ignore:line)
// For handling 4xx and 5xx errors.
// eslint-disable-next-line
var result={name:'onFailure',status:proxy.httpRequest.status,statusText:proxy.httpRequest.statusText};proxy.failureHandler(result);}};AjaxHandler.prototype.error=function(proxy){// eslint-disable-next-line
var result={name:'onError',status:this.httpRequest.status,statusText:this.httpRequest.statusText};proxy.errorHandler(result);};/**
     * @private
     */ // eslint-disable-next-line
AjaxHandler.prototype.successHandler=function(response){if(this.onSuccess){this.onSuccess(response);}return response;};// eslint-disable-next-line
AjaxHandler.prototype.failureHandler=function(response){if(this.onFailure){this.onFailure(response);}return response;};// eslint-disable-next-line
AjaxHandler.prototype.errorHandler=function(response){if(this.onError){this.onError(response);}return response;};AjaxHandler.prototype.setCustomAjaxHeaders=function(){for(var i=0;i<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;i++){// eslint-disable-next-line max-len
this.httpRequest.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerValue);}};return AjaxHandler;}();/**
 * @hidden
 */var Signature=/** @class */function(){/**
     * Initialize the constructor of blazorUIadapater.
     * @private
     * @param { PdfViewer } pdfViewer - Specified PdfViewer class.
     * @param { PdfViewerBase } pdfViewerBase - The pdfViewerBase.
     */function Signature(pdfViewer,pdfViewerBase){var _this=this;// eslint-disable-next-line
this.newObject=[];/**
         * @private
         */this.outputString='';/**
         * @private
         */ // eslint-disable-next-line
this.signaturecollection=[];/**
         * @private
         */ // eslint-disable-next-line
this.outputcollection=[];// eslint-disable-next-line
this.fontsign=[];// eslint-disable-next-line
this.signfontStyle=[];this.isSaveSignature=false;this.isInitialFiledSaveSignature=false;this.isSignatureFieldsSaveSignature=false;// eslint-disable-next-line
this.saveSignatureString='';/**
         * @private
         */ // eslint-disable-next-line
this.saveImageString='';this.signatureImageString='';/**
         * @private
         */ // eslint-disable-next-line
this.maxSaveLimit=5;// eslint-disable-next-line
this.addStampImage=function(args){// eslint-disable-next-line
var upoadedFiles=args.target.files;if(args.target.files[0]!==null){var uploadedFile=upoadedFiles[0];if(uploadedFile.type.split('/')[0]==='image'){var reader=new FileReader();// eslint-disable-next-line
reader.onload=function(e){// eslint-disable-next-line
var canvas=document.getElementById(_this.pdfViewer.dataId+'_signatureuploadCanvas_');// eslint-disable-next-line
var context=canvas.getContext('2d');// eslint-disable-next-line
var image=new Image();// eslint-disable-next-line
var proxy=_this;image.onload=function(){// eslint-disable-next-line
var signbutton=document.getElementById(_this.pdfViewer.dataId+'_e-pv-upload-button');signbutton.style.visibility='hidden';context.drawImage(image,0,0,canvas.width,canvas.height);proxy.enableCreateButton(false);proxy.outputString=image.src;};image.src=e.currentTarget.result;proxy.outputString=e.currentTarget.result;};reader.readAsDataURL(uploadedFile);}}args.target.value='';args.currentTarget.value='';};this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @private
     * @returns {void}
     */Signature.prototype.createSignaturePanel=function(){var _this=this;var maximumWidth=750;if(!sf.base.isBlazor()){var elementID=this.pdfViewer.dataId;var dialogDiv=sf.base.createElement('div',{id:elementID+'_signature_window',className:'e-pv-signature-window'});dialogDiv.style.display='block';this.pdfViewerBase.pageContainer.appendChild(dialogDiv);var appearanceTab=this.createSignatureCanvas();var signaturePanelHeader=void 0;if(!this.pdfViewerBase.isToolbarSignClicked){if(this.pdfViewerBase.isInitialField){signaturePanelHeader=this.pdfViewer.localeObj.getConstant('HandwrittenInitialDialogHeaderText');}else{signaturePanelHeader=this.pdfViewer.localeObj.getConstant('HandwrittenSignatureDialogHeaderText');}}else{if(this.pdfViewerBase.isInitialField){signaturePanelHeader=this.pdfViewer.localeObj.getConstant('InitialFieldDialogHeaderText');}else{signaturePanelHeader=this.pdfViewer.localeObj.getConstant('SignatureFieldDialogHeaderText');}}if(this.signatureDialog){this.signatureDialog.content=appearanceTab;}else{this.signatureDialog=new sf.popups.Dialog({// eslint-disable-next-line max-len
showCloseIcon:true,closeOnEscape:false,isModal:true,header:signaturePanelHeader,cssClass:'e-pv-signature-dialog-height',target:this.pdfViewer.element,content:appearanceTab,width:'750px',visible:true,allowDragging:true,beforeClose:function beforeClose(){_this.clearSignatureCanvas();_this.signatureDialog.destroy();_this.signatureDialog=null;if(_this.tabObj){_this.tabObj.destroy();}// eslint-disable-next-line
var signatureWindow=document.getElementById(_this.pdfViewer.dataId+'_signature_window');if(signatureWindow){// eslint-disable-next-line
signatureWindow.parentNode?signatureWindow.parentNode.removeChild(signatureWindow):signatureWindow.parentElement.removeChild(signatureWindow);}// eslint-disable-next-line max-len
if(!_this.pdfViewerBase.isToolbarSignClicked&&!_this.pdfViewerBase.drawSignatureWithTool&&!sf.base.isNullOrUndefined(_this.pdfViewer.formFieldsModule.currentTarget)){_this.pdfViewer.fireFocusOutFormField(_this.pdfViewer.formFieldsModule.currentTarget.name,'');}_this.pdfViewerBase.isToolbarSignClicked=false;_this.pdfViewer.formFieldsModule.setFocus();}});this.signatureDialog.buttons=[// eslint-disable-next-line max-len
{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Clear'),disabled:true,cssClass:'e-pv-clearbtn'},click:this.clearSignatureCanvas.bind(this)},// eslint-disable-next-line max-len
{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Cancel')},click:this.closeSignaturePanel.bind(this)},// eslint-disable-next-line max-len
{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Create'),isPrimary:true,disabled:true,cssClass:'e-pv-createbtn'},click:this.addSignatureInPage.bind(this)}];this.signatureDialog.appendTo(dialogDiv);}if(this.pdfViewer.element.offsetWidth<maximumWidth)this.updateCanvasSize();if(this.pdfViewer.enableRtl){this.signatureDialog.enableRtl=this.pdfViewer.enableRtl;}var checkboxItem=this.signatureDialog.content.ej2_instances[0].items[0];if(checkboxItem.header.label==='DRAW'){var drawCheckbox=document.getElementById("checkbox");this.hideSignatureCheckbox(drawCheckbox);}else if(checkboxItem.header.label==='TYPE'){var typeCheckbox=document.getElementById("checkbox1");this.hideSignatureCheckbox(typeCheckbox);}else{var imageCheckbox=document.getElementById("checkbox2");this.hideSignatureCheckbox(imageCheckbox);}}else{// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');if(canvas){if(!this.pdfViewerBase.pageContainer.querySelector('.e-pv-signature-window')){var elementID=this.pdfViewer.dataId;// eslint-disable-next-line max-len
var dialogDiv=sf.base.createElement('div',{id:elementID+'_signature_window',className:'e-pv-signature-window'});dialogDiv.style.display='block';this.pdfViewerBase.pageContainer.appendChild(dialogDiv);}canvas.addEventListener('mousedown',this.signaturePanelMouseDown.bind(this));canvas.addEventListener('mousemove',this.signaturePanelMouseMove.bind(this));canvas.addEventListener('mouseup',this.signaturePanelMouseUp.bind(this));canvas.addEventListener('mouseleave',this.signaturePanelMouseUp.bind(this));canvas.addEventListener('touchstart',this.signaturePanelMouseDown.bind(this));canvas.addEventListener('touchmove',this.signaturePanelMouseMove.bind(this));canvas.addEventListener('touchend',this.signaturePanelMouseUp.bind(this));this.clearSignatureCanvas();}this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenSignaturePanel',this.pdfViewerBase.isToolbarSignClicked);}this.drawSavedSignature();};Signature.prototype.drawSavedSignature=function(){if(!this.pdfViewerBase.isToolbarSignClicked&&this.isSaveSignature){this.outputString=this.saveSignatureString;// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');// eslint-disable-next-line
var context_1;if(canvas){context_1=canvas.getContext('2d');}// eslint-disable-next-line
var image_1=new Image();image_1.onload=function(){if(context_1){context_1.drawImage(image_1,0,0);}};image_1.src=this.signatureImageString;// eslint-disable-next-line
var checkbox=document.getElementById(this.pdfViewer.dataId+'_signatureCheckBox');if(checkbox){checkbox.checked=true;}this.enableCreateButton(false);this.enableClearbutton(false);}};Signature.prototype.hideSignatureCheckbox=function(checkbox){if(this.pdfViewerBase.isToolbarSignClicked){if(this.pdfViewerBase.isInitialField){if(this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.hideSaveSignature){this.hideCheckboxParent(checkbox);}}else if(this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.hideSaveSignature){this.hideCheckboxParent(checkbox);}}else{if(this.pdfViewerBase.isInitialField){if(this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature){this.hideCheckboxParent(checkbox);}}else{if(this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature){this.hideCheckboxParent(checkbox);}}}};Signature.prototype.saveSignatureCheckbox=function(){if(this.pdfViewerBase.isToolbarSignClicked){return false;}else{if(this.pdfViewerBase.isInitialField){if(this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature){return false;}else{return this.isInitialFiledSaveSignature;}}else{if(this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature){return false;}else{return this.isSignatureFieldsSaveSignature;}}}};Signature.prototype.hideCheckboxParent=function(checkbox){if(checkbox){checkbox.parentElement.style.display='none';}};Signature.prototype.saveSignatureImage=function(){// eslint-disable-next-line
var checkbox=document.getElementById(this.pdfViewer.dataId+'_signatureCheckBox');if(checkbox&&checkbox.checked){if(this.outputString!==''){this.isSaveSignature=true;this.saveSignatureString=this.outputString;// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');this.saveImageString=canvas.toDataURL();this.signatureImageString=this.saveImageString;}}else{if(this.isSaveSignature){this.isSaveSignature=false;this.saveSignatureString='';this.saveImageString='';this.signatureImageString='';}this.clearSignatureCanvas();}};/**
     * @param type
     * @private
     */ // eslint-disable-next-line
Signature.prototype.addSignature=function(type){var annot;if(this.pdfViewerBase.isToolbarSignClicked){var annotationName=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null;this.pdfViewerBase.isSignatureAdded=true;var pageIndex=this.pdfViewerBase.currentPageNumber-1;// eslint-disable-next-line max-len
var thickness=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1;// eslint-disable-next-line max-len
var opacity=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1;// eslint-disable-next-line max-len
var strokeColor=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:'#000000';// eslint-disable-next-line
var signatureBounds=this.pdfViewer.formFieldsModule.updateSignatureAspectRatio(this.outputString,true);// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');this.saveImageString=canvas.toDataURL();this.signatureImageString=this.saveImageString;annot={// eslint-disable-next-line max-len
id:'sign'+this.pdfViewerBase.signatureCount,bounds:signatureBounds,pageIndex:pageIndex,data:this.outputString,shapeAnnotationType:'HandWrittenSignature',opacity:opacity,strokeColor:strokeColor,thickness:thickness,signatureName:annotationName};this.pdfViewerBase.currentSignatureAnnot=annot;// eslint-disable-next-line
var checkbox=void 0;if(sf.base.isBlazor()){checkbox=document.getElementById(this.pdfViewer.dataId+'_signatureCheckBox');}else{checkbox=document.getElementById('checkbox');}if(checkbox&&checkbox.checked){this.addSignatureCollection();}this.hideSignaturePanel();this.pdfViewerBase.isToolbarSignClicked=false;}else{// eslint-disable-next-line
var checkbox=void 0;if(sf.base.isBlazor()){checkbox=document.getElementById(this.pdfViewer.dataId+'_signatureCheckBox');}else{checkbox=document.getElementById('checkbox');}var isSignatureAdded=false;if(sf.base.isBlazor()&&type){if(type==='Image'){this.imageAddSignature();isSignatureAdded=true;this.outputString='';}else if(type==='Type'){this.typeAddSignature();isSignatureAdded=true;this.outputString='';}}if(!isSignatureAdded){// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');this.saveImageString=canvas.toDataURL();if(checkbox&&checkbox.checked){this.isSaveSignature=true;this.saveSignatureString=this.outputString;this.checkSaveFiledSign(this.pdfViewerBase.isInitialField,true);}else{this.isSaveSignature=false;this.saveSignatureString='';this.checkSaveFiledSign(this.pdfViewerBase.isInitialField,false);}this.signatureImageString=this.saveImageString;this.pdfViewer.formFieldsModule.drawSignature(null,null,this.pdfViewerBase.currentTarget,null);isSignatureAdded=true;}}};Signature.prototype.checkSaveFiledSign=function(initialField,saveSign){if(initialField){this.isInitialFiledSaveSignature=saveSign;}else{this.isSignatureFieldsSaveSignature=saveSign;}};Signature.prototype.addSignatureInPage=function(){if(this.signaturetype==='Draw'){this.addSignature();}else if(this.signaturetype==='Type'){this.typeAddSignature();}else{this.imageAddSignature();}};Signature.prototype.typeAddSignature=function(){if(this.pdfViewerBase.isToolbarSignClicked){var zoomvalue=this.pdfViewerBase.getZoomFactor();// eslint-disable-next-line
var annot=null;var annotationName=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null;this.pdfViewerBase.isSignatureAdded=true;var pageIndex=this.pdfViewerBase.currentPageNumber-1;var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+pageIndex);var currentLeft=0;var currentTop=0;var currentHeight=65;var currentWidth=200;currentLeft=(parseFloat(pageDiv.style.width)/2-currentWidth/2)/zoomvalue;currentTop=(parseFloat(pageDiv.style.height)/2-currentHeight/2)/zoomvalue;var zoomFactor=this.pdfViewerBase.getZoomFactor();if(!this.signtypevalue){this.updateSignatureTypeValue(true);}var inputValue=this.signtypevalue;annot={// eslint-disable-next-line max-len
id:'Typesign'+this.pdfViewerBase.signatureCount,bounds:{left:currentLeft/zoomFactor,top:currentTop/zoomFactor,x:currentLeft/zoomFactor,// eslint-disable-next-line max-len
y:currentTop/zoomFactor,width:currentWidth,height:currentHeight},pageIndex:pageIndex,dynamicText:inputValue,data:this.pdfViewerBase.signatureModule.outputString,shapeAnnotationType:'SignatureText',fontFamily:this.fontName,signatureName:annotationName};this.pdfViewerBase.currentSignatureAnnot=annot;// eslint-disable-next-line
var checkbox=void 0;if(sf.base.isBlazor()){checkbox=document.getElementById(this.pdfViewer.dataId+'_signatureCheckBox');}else{checkbox=document.getElementById('checkbox1');}if(checkbox&&checkbox.checked){this.addSignatureCollection();}this.signtypevalue='';this.hideSignaturePanel();this.pdfViewerBase.isToolbarSignClicked=false;}else{if(this.outputString===''){this.updateSignatureTypeValue();}this.pdfViewer.formFieldsModule.drawSignature('Type','',this.pdfViewerBase.currentTarget);this.hideSignaturePanel();}};Signature.prototype.imageAddSignature=function(){if(this.pdfViewerBase.isToolbarSignClicked){var zoomvalue=this.pdfViewerBase.getZoomFactor();// eslint-disable-next-line
var annot=null;var annotationName=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null;this.pdfViewerBase.isSignatureAdded=true;var pageIndex=this.pdfViewerBase.currentPageNumber-1;var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+pageIndex);var currentLeft=0;var currentTop=0;var currentHeight=65;//15arseFloat(this.signHeight);
var currentWidth=200;//parseFloat(this.signWidth);
currentLeft=(parseFloat(pageDiv.style.width)/2-currentWidth/2)/zoomvalue;currentTop=(parseFloat(pageDiv.style.height)/2-currentHeight/2)/zoomvalue;var zoomFactor=this.pdfViewerBase.getZoomFactor();var inputValue=this.signtypevalue;annot={// eslint-disable-next-line max-len
id:'Typesign'+this.pdfViewerBase.signatureCount,bounds:{left:currentLeft/zoomFactor,top:currentTop/zoomFactor,x:currentLeft/zoomFactor,// eslint-disable-next-line max-len
y:currentTop/zoomFactor,width:currentWidth,height:currentHeight},pageIndex:pageIndex,dynamicText:inputValue,data:this.pdfViewerBase.signatureModule.outputString,shapeAnnotationType:'SignatureImage',fontFamily:this.fontName,signatureName:annotationName};this.pdfViewerBase.currentSignatureAnnot=annot;// eslint-disable-next-line
var checkbox=void 0;if(sf.base.isBlazor()){checkbox=document.getElementById(this.pdfViewer.dataId+'_signatureCheckBox');}else{checkbox=document.getElementById('checkbox2');}if(checkbox&&checkbox.checked){this.addSignatureCollection();}this.hideSignaturePanel();this.pdfViewerBase.isToolbarSignClicked=false;}else{this.pdfViewer.formFieldsModule.drawSignature('Image','',this.pdfViewerBase.currentTarget);this.hideSignaturePanel();}};Signature.prototype.updateSignatureTypeValue=function(isType){// eslint-disable-next-line
var fontElements=document.querySelectorAll('.e-pv-font-sign');if(fontElements){for(var j=0;j<fontElements.length;j++){if(fontElements[j]&&fontElements[j].style.borderColor==='red'){if(isType){this.signtypevalue=fontElements[j].textContent;this.outputString=fontElements[j].textContent;}else{this.outputString=fontElements[j].textContent;}try{this.fontName=JSON.parse(fontElements[j].style.fontFamily);}catch(e){this.fontName=fontElements[j].style.fontFamily;}}}}};/**
     * @private
     * @returns {void}
     */Signature.prototype.hideSignaturePanel=function(){if(this.signatureDialog){this.signatureDialog.hide();}};Signature.prototype.bindTypeSignatureClickEvent=function(){if(sf.base.isBlazor()){for(var i=0;i<4;i++){// eslint-disable-next-line
var fontElement=document.querySelector('#'+this.pdfViewer.dataId+'_font_signature'+i);if(fontElement){fontElement.addEventListener('click',this.typeSignatureclicked.bind(this));}}}};Signature.prototype.bindDrawSignatureClickEvent=function(){// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');if(canvas){canvas.addEventListener('mousedown',this.signaturePanelMouseDown.bind(this));canvas.addEventListener('mousemove',this.signaturePanelMouseMove.bind(this));canvas.addEventListener('mouseup',this.signaturePanelMouseUp.bind(this));canvas.addEventListener('mouseleave',this.signaturePanelMouseUp.bind(this));canvas.addEventListener('touchstart',this.signaturePanelMouseDown.bind(this));canvas.addEventListener('touchmove',this.signaturePanelMouseMove.bind(this));canvas.addEventListener('touchend',this.signaturePanelMouseUp.bind(this));}};// eslint-disable-next-line
Signature.prototype.typeSignatureclicked=function(event){var eventTarget=event.target;if(eventTarget){for(var i=0;i<4;i++){// eslint-disable-next-line
var fontElement=document.querySelector('#'+this.pdfViewer.dataId+'_font_signature'+i);if(fontElement){fontElement.style.borderColor='';}}eventTarget.style.borderColor='red';this.outputString=eventTarget.textContent;try{this.fontName=JSON.parse(eventTarget.style.fontFamily);}catch(e){this.fontName=eventTarget.style.fontFamily;}this.enableCreateButton(false);}};// eslint-disable-next-line
Signature.prototype.createSignatureCanvas=function(){// eslint-disable-next-line
var previousField=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');// eslint-disable-next-line
var field=document.getElementById(this.pdfViewer.dataId+'Signature_appearance');if(previousField){previousField.remove();}if(field){field.remove();}// eslint-disable-next-line max-len
var appearanceDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'Signature_appearance',className:'e-pv-signature-apperance',styles:'margin-top:30px'});// eslint-disable-next-line max-len
var canvas=sf.base.createElement('canvas',{id:this.pdfViewer.dataId+'_signatureCanvas_',className:'e-pv-signature-canvas'});if(this.pdfViewer.element.offsetWidth>750){canvas.width=714;}else{canvas.width=this.pdfViewer.element.offsetWidth-35;}canvas.classList.add('e-pv-canvas-signature');canvas.height=305;canvas.style.height='305px';canvas.style.border='1px dotted #bdbdbd';canvas.style.backgroundColor='white';canvas.style.boxSizing='border-box';canvas.style.borderRadius='2px';canvas.addEventListener('mousedown',this.signaturePanelMouseDown.bind(this));canvas.addEventListener('mousemove',this.signaturePanelMouseMove.bind(this));canvas.addEventListener('mouseup',this.signaturePanelMouseUp.bind(this));canvas.addEventListener('mouseleave',this.signaturePanelMouseUp.bind(this));canvas.addEventListener('touchstart',this.signaturePanelMouseDown.bind(this));canvas.addEventListener('touchmove',this.signaturePanelMouseMove.bind(this));canvas.addEventListener('touchend',this.signaturePanelMouseUp.bind(this));appearanceDiv.appendChild(canvas);// eslint-disable-next-line
var checkBoxObj;// eslint-disable-next-line
var input;var saveCheckBoxContent;if(this.pdfViewerBase.isToolbarSignClicked&&!this.pdfViewerBase.isInitialField){saveCheckBoxContent=this.pdfViewer.localeObj.getConstant('Save Signature');}else{saveCheckBoxContent=this.pdfViewerBase.isInitialField?this.pdfViewer.localeObj.getConstant('Save Initial'):this.pdfViewer.localeObj.getConstant('Save Signature');}if(!this.pdfViewer.hideSaveSignature){// eslint-disable-next-line
input=document.createElement('input');input.type='checkbox';input.id='checkbox';appearanceDiv.appendChild(input);checkBoxObj=new sf.buttons.CheckBox({label:saveCheckBoxContent,disabled:false,checked:false});checkBoxObj.appendTo(input);}this.isSaveSignature=this.saveSignatureCheckbox();if(this.isSaveSignature){checkBoxObj.checked=true;}//if (!this.pdfViewerBase.isToolbarSignClicked) {
// eslint-disable-next-line
var typeDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'type_appearance',className:'e-pv-signature-apperance',styles:'margin-top:6px'});// eslint-disable-next-line
var inputText=document.createElement('input');inputText.type='text';inputText.id=this.pdfViewer.dataId+'_e-pv-Signtext-box';typeDiv.appendChild(inputText);// eslint-disable-next-line
var inputobj=new sf.inputs.TextBox({placeholder:this.pdfViewer.localeObj.getConstant('Enter Signature as Name'),floatLabelType:'Auto'});inputobj.appendTo(inputText);// eslint-disable-next-line
var fontDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_font_appearance',className:'e-pv-font-appearance-style'});fontDiv.classList.add('e-pv-canvas-signature');fontDiv.style.height='270px';fontDiv.style.border='1px dotted #bdbdbd';fontDiv.style.boxSizing='border-box';fontDiv.style.borderRadius='2px';fontDiv.style.backgroundColor='white';fontDiv.style.color='black';fontDiv.style.marginTop='8px';typeDiv.appendChild(fontDiv);input=document.createElement('input');input.type='checkbox';input.id='checkbox1';typeDiv.appendChild(input);checkBoxObj=new sf.buttons.CheckBox({label:saveCheckBoxContent,disabled:false,checked:false});checkBoxObj.appendTo(input);inputobj.addEventListener('input',this.renderSignatureText.bind(this));this.enableCreateButton(true);// eslint-disable-next-line
var tab=sf.base.createElement('div',{id:this.pdfViewer.dataId+'Signature_tab'});var uploadDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'upload_appearance',className:'e-pv-signature-apperance',styles:'padding-top:30px'});// eslint-disable-next-line
var button=document.createElement('div');button.id=this.pdfViewer.dataId+'_e-pv-upload-button';uploadDiv.appendChild(button);// eslint-disable-next-line
var uploadButton=new sf.buttons.Button({cssClass:'e-pv-sign-upload',content:this.pdfViewer.localeObj.getConstant('Browse Signature Image')});uploadButton.appendTo(button);uploadButton.element.style.position='absolute';// eslint-disable-next-line max-len
var uploadCanvas=sf.base.createElement('canvas',{id:this.pdfViewer.dataId+'_signatureuploadCanvas_',className:'e-pv-signature-uploadcanvas'});if(this.pdfViewer.element.offsetWidth>750){uploadCanvas.width=714;}else{uploadCanvas.width=this.pdfViewer.element.offsetWidth-35;}uploadCanvas.classList.add('e-pv-canvas-signature');uploadCanvas.height=305;uploadCanvas.style.height='305px';uploadButton.element.style.left=uploadCanvas.width/2-50+'px';uploadButton.element.style.top=parseFloat(uploadCanvas.style.height)/2+20+'px';uploadCanvas.style.border='1px dotted #bdbdbd';uploadCanvas.style.backgroundColor='white';uploadCanvas.style.boxSizing='border-box';uploadCanvas.style.borderRadius='2px';uploadCanvas.style.zIndex='0';uploadDiv.appendChild(uploadCanvas);input=document.createElement('input');input.type='checkbox';input.id='checkbox2';uploadDiv.appendChild(input);checkBoxObj=new sf.buttons.CheckBox({label:saveCheckBoxContent,disabled:false,checked:false});checkBoxObj.appendTo(input);button.addEventListener('click',this.uploadSignatureImage.bind(this));// eslint-disable-next-line max-len
this.signfontStyle=[{FontName:'Helvetica'},{FontName:'Times New Roman'},{FontName:'Courier'},{FontName:'Symbol'}];// eslint-disable-next-line
var fontSignature=[];if(this.pdfViewerBase.isToolbarSignClicked&&!sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts)){for(var j=0;j<4;j++){if(!sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[j])){this.signfontStyle[j].FontName=this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[j];}}}for(var i=0;i<this.signfontStyle.length;i++){fontSignature[i]=document.createElement('div');fontSignature[i].id='_font_signature'+i+'';fontSignature[i].classList.add('e-pv-font-sign');}this.fontsign=fontSignature;// eslint-disable-next-line
var proxy=this;var items=[];if(this.pdfViewerBase.isToolbarSignClicked){if(this.pdfViewerBase.isInitialField){items=this.showHideSignatureTab(this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.displayMode,appearanceDiv,typeDiv,uploadDiv);}else{items=this.showHideSignatureTab(this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.displayMode,appearanceDiv,typeDiv,uploadDiv);}}else{if(this.pdfViewerBase.isInitialField){items=this.showHideSignatureTab(this.pdfViewer.initialFieldSettings.initialDialogSettings.displayMode,appearanceDiv,typeDiv,uploadDiv);}else{items=this.showHideSignatureTab(this.pdfViewer.signatureFieldSettings.signatureDialogSettings.displayMode,appearanceDiv,typeDiv,uploadDiv);}}// eslint-disable-next-line
this.tabObj=new sf.navigations.Tab({selected:function selected(args){proxy.handleSelectEvent(args);},items:items});this.tabObj.appendTo(tab);if(tab&&tab.lastElementChild){tab.lastElementChild.style.overflow='hidden';}if(items[0].header.label==='DRAW'){this.signaturetype='Draw';}else if(items[0].header.label==='TYPE'){this.signaturetype='Type';}else{this.signaturetype='Image';}return tab;// } else {
//     return appearanceDiv;
// }
};Signature.prototype.handleSelectEvent=function(e){// eslint-disable-next-line
var headerText='';var maximumWidth=750;var tabInstance=document.getElementById(this.pdfViewer.dataId+'Signature_tab').ej2_instances[0];if(tabInstance){if(tabInstance.items.length>0){for(var i=0;i<tabInstance.items.length;i++){var headerValue=tabInstance.items[i].header.text;if(headerValue===e.selectedItem.textContent){headerText=tabInstance.items[i].header.label;}}}}var checkbox=document.getElementById('checkbox');if(checkbox&&checkbox.checked){if(e.previousIndex===0&&this.outputString!==''){this.isSaveSignature=true;this.saveSignatureString=this.outputString;// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');this.saveImageString=canvas.toDataURL();this.signatureImageString=this.saveImageString;}}else{if(this.isSaveSignature){this.isSaveSignature=false;this.saveSignatureString='';this.saveImageString='';this.signatureImageString='';}this.clearSignatureCanvas();}// eslint-disable-next-line
if(headerText.toLocaleLowerCase()==='draw'){this.signaturetype='Draw';if(this.isSaveSignature){this.enableCreateButton(false);}var drawCheckbox=document.getElementById("checkbox");this.hideSignatureCheckbox(drawCheckbox);}else if(headerText.toLocaleLowerCase()==='type'){this.outputString='';this.signaturetype='Type';// eslint-disable-next-line
this.enableCreateButton(true);var typeCheckbox=document.getElementById("checkbox1");this.hideSignatureCheckbox(typeCheckbox);}else if(headerText.toLocaleLowerCase()==='upload'){this.signaturetype='Image';this.enableCreateButton(true);var imageCheckbox=document.getElementById("checkbox2");this.hideSignatureCheckbox(imageCheckbox);}if(this.pdfViewer.element.offsetWidth<maximumWidth)this.updateCanvasSize();};Signature.prototype.showHideSignatureTab=function(displayMode,appearanceDiv,typeDiv,uploadDiv){var items=[];if(displayMode&DisplayMode.Draw){items.push({header:{'text':this.pdfViewer.localeObj.getConstant('Draw-hand Signature'),'label':'DRAW'},content:appearanceDiv});}if(displayMode&DisplayMode.Text){items.push({header:{'text':this.pdfViewer.localeObj.getConstant('Type Signature'),'label':'TYPE'},content:typeDiv});}if(displayMode&DisplayMode.Upload){items.push({header:{'text':this.pdfViewer.localeObj.getConstant('Upload Signature'),'label':'UPLOAD'},content:uploadDiv});}return items;};/**
     * @private
     * @returns {void}
     */Signature.prototype.createSignatureFileElement=function(){// eslint-disable-next-line
var signImage=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_signElement',attrs:{'type':'file'}});signImage.setAttribute('accept','.jpg,.jpeg,.png');signImage.style.position='absolute';signImage.style.left='0px';signImage.style.top='0px';signImage.style.visibility='hidden';document.body.appendChild(signImage);signImage.addEventListener('change',this.addStampImage);};Signature.prototype.uploadSignatureImage=function(){// eslint-disable-next-line
var signImage=document.getElementById(this.pdfViewer.dataId+'_signElement');if(signImage){signImage.click();}};Signature.prototype.renderSignatureText=function(){var maximumWidth=750;// eslint-disable-next-line
var fontDiv=document.getElementById(this.pdfViewer.dataId+'_font_appearance');// eslint-disable-next-line
var textBox=document.getElementById(this.pdfViewer.dataId+'_e-pv-Signtext-box');for(var i=0;i<this.signfontStyle.length;i++){this.fontsign[i].innerHTML=textBox.value;this.fontsign[i].style.fontFamily=this.signfontStyle[i].FontName;if(this.signfontStyle[i].FontName==='Helvetica'){this.fontsign[i].style.borderColor='red';}fontDiv.appendChild(this.fontsign[i]);}for(var i=0;i<this.signfontStyle.length;i++){// eslint-disable-next-line
var clickSign=document.getElementById('_font_signature'+i+'');clickSign.addEventListener('click',this.typeSignatureclick.bind(this));}this.enableCreateButton(false);this.enableClearbutton(false);if(this.pdfViewer.element.offsetWidth<maximumWidth)this.updateCanvasSize();};Signature.prototype.typeSignatureclick=function(){var eventTarget=event.target;// eslint-disable-next-line
var createButton=document.getElementsByClassName('e-pv-createbtn')[0];createButton.disabled=false;for(var i=0;i<4;i++){// eslint-disable-next-line
var fontElement=document.getElementById('_font_signature'+i+'');if(fontElement){fontElement.style.borderColor='';}}eventTarget.style.borderColor='red';this.outputString=eventTarget.textContent;try{this.fontName=JSON.parse(eventTarget.style.fontFamily);}catch(e){this.fontName=eventTarget.style.fontFamily;}};/**
     * @param bounds
     * @param position
     * @private
     */ // eslint-disable-next-line
Signature.prototype.addSignatureCollection=function(bounds,position){var minimumX=-1;var minimumY=-1;var maximumX=-1;var maximumY=-1;// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(this.outputString);// eslint-disable-next-line
var newCanvas=document.createElement('canvas');// eslint-disable-next-line
var context=newCanvas.getContext('2d');// eslint-disable-next-line
var imageString;var signatureType=this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType;if(signatureType==='HandWrittenSignature'){if(collectionData.length!==0){// eslint-disable-next-line
for(var k=0;k<collectionData.length;k++){// eslint-disable-next-line
var val=collectionData[k];if(minimumX===-1){// eslint-disable-next-line
minimumX=val['x'];// eslint-disable-next-line
maximumX=val['x'];// eslint-disable-next-line
minimumY=val['y'];// eslint-disable-next-line
maximumY=val['y'];}else{// eslint-disable-next-line
var point1=val['x'];// eslint-disable-next-line
var point2=val['y'];if(minimumX>=point1){minimumX=point1;}if(minimumY>=point2){minimumY=point2;}if(maximumX<=point1){maximumX=point1;}if(maximumY<=point2){maximumY=point2;}}}var newdifferenceX=maximumX-minimumX;var newdifferenceY=maximumY-minimumY;var differenceX=newdifferenceX/100;var differenceY=newdifferenceY/100;var left=0;var top_1=0;if(bounds){newCanvas.width=position.currentWidth;newCanvas.height=position.currentHeight;differenceX=newdifferenceX/bounds.width;differenceY=newdifferenceY/bounds.height;left=bounds.x-position.currentLeft;top_1=bounds.y-position.currentTop;}else{newCanvas.width=100;newCanvas.height=100;}context.beginPath();for(var n=0;n<collectionData.length;n++){// eslint-disable-next-line
var val=collectionData[n];// eslint-disable-next-line
var point1=(val['x']-minimumX)/differenceX+left;// eslint-disable-next-line
var point2=(val['y']-minimumY)/differenceY+top_1;// eslint-disable-next-line
if(val['command']==='M'){context.moveTo(point1,point2);// eslint-disable-next-line
}else if(val['command']==='L'){context.lineTo(point1,point2);}}context.stroke();context.closePath();imageString=newCanvas.toDataURL();}}else if(signatureType==='SignatureText'){imageString=this.outputString;}else{imageString=this.outputString;}if(bounds){this.saveImageString=imageString;}else{// eslint-disable-next-line
var signCollection={};signCollection['sign_'+this.pdfViewerBase.imageCount]=this.outputString;this.outputcollection.push(signCollection);// eslint-disable-next-line
var signature=[];signature.push({id:'sign_'+this.pdfViewerBase.imageCount,imageData:imageString,signatureType:signatureType,fontFamily:this.pdfViewerBase.currentSignatureAnnot.fontFamily});this.signaturecollection.push({image:signature,isInitial:this.pdfViewerBase.isInitialField});this.pdfViewerBase.imageCount++;}};/**
     * @private]
     * @param {number} limit - The limit.
     * @returns {number} - Returns number.
     */Signature.prototype.getSaveLimit=function(limit){if(limit>this.maxSaveLimit){limit=this.maxSaveLimit;}else if(limit<1){limit=1;}return limit;};/**
     * @private
     * @returns {void}
     */Signature.prototype.RenderSavedSignature=function(){this.pdfViewerBase.signatureCount++;var zoomvalue=this.pdfViewerBase.getZoomFactor();var annot;if(this.pdfViewerBase.isAddedSignClicked){var annotationName=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null;this.pdfViewerBase.isSignatureAdded=true;var pageIndex=this.pdfViewerBase.currentPageNumber-1;var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+pageIndex);var currentLeft=0;var currentTop=0;// eslint-disable-next-line max-len
var currentWidth=this.pdfViewer.handWrittenSignatureSettings.width?this.pdfViewer.handWrittenSignatureSettings.width:100;// eslint-disable-next-line max-len
var currentHeight=this.pdfViewer.handWrittenSignatureSettings.height?this.pdfViewer.handWrittenSignatureSettings.height:100;// eslint-disable-next-line max-len
var thickness=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1;// eslint-disable-next-line max-len
var opacity=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1;// eslint-disable-next-line max-len
var strokeColor=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:'#000000';currentLeft=(parseFloat(pageDiv.style.width)/2-currentWidth/2)/zoomvalue;// eslint-disable-next-line max-len
currentTop=(parseFloat(pageDiv.style.height)/2-currentHeight/2)/zoomvalue;var keyString='';var signatureType=void 0;var signatureFontFamily=void 0;for(var collection=0;collection<this.outputcollection.length;collection++){// eslint-disable-next-line
var collectionAddedsign=this.outputcollection[collection];// eslint-disable-next-line
var eventTarget=event.target;// eslint-disable-next-line max-len
if(eventTarget&&eventTarget.id==='sign_'+collection||eventTarget&&eventTarget.id==='sign_border'+collection){keyString=collectionAddedsign['sign_'+collection];break;}}for(var signatureIndex=0;signatureIndex<this.signaturecollection.length;signatureIndex++){var eventTarget=event.target;var signatureId=this.signaturecollection[signatureIndex].image[0].id.split('_')[1];if(eventTarget&&eventTarget.id==='sign_'+signatureId||eventTarget&&eventTarget.id==='sign_border'+signatureId){signatureType=this.signaturecollection[signatureIndex].image[0].signatureType;signatureFontFamily=this.signaturecollection[signatureIndex].image[0].fontFamily;break;}}if(signatureType==='HandWrittenSignature'){// eslint-disable-next-line
var signatureBounds=this.pdfViewer.formFieldsModule.updateSignatureAspectRatio(keyString,true);// eslint-disable-next-line max-len
currentWidth=signatureBounds.width?signatureBounds.width:currentWidth;// eslint-disable-next-line max-len
currentHeight=signatureBounds.height?signatureBounds.height:currentHeight;}else{currentWidth=currentWidth===150?200:this.pdfViewer.handWrittenSignatureSettings.width;// eslint-disable-next-line max-len
currentHeight=currentHeight===100?65:this.pdfViewer.handWrittenSignatureSettings.height;}annot={// eslint-disable-next-line max-len
id:'sign'+this.pdfViewerBase.signatureCount,bounds:{x:currentLeft,y:currentTop,width:currentWidth,height:currentHeight},pageIndex:pageIndex,data:keyString,// eslint-disable-next-line max-len
shapeAnnotationType:signatureType,opacity:opacity,fontFamily:signatureFontFamily,strokeColor:strokeColor,thickness:thickness,signatureName:annotationName};this.pdfViewerBase.currentSignatureAnnot=annot;this.pdfViewerBase.isAddedSignClicked=false;}else{this.pdfViewer.formFieldsModule.drawSignature();}};/**
     * @private
     * @returns {void}
     */Signature.prototype.updateCanvasSize=function(){// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');this.setTabItemWidth(canvas);var uploadCanvas=document.getElementById(this.pdfViewer.dataId+'_signatureuploadCanvas_');this.setTabItemWidth(uploadCanvas);var fontAppearance=document.getElementById(this.pdfViewer.dataId+'_font_appearance');this.setTabItemWidth(fontAppearance);};Signature.prototype.setTabItemWidth=function(canvas){var padding=2;var maximumWidth=750;var canvasWidth=714;var margin=50;var elem=document.querySelector('.e-dlg-content');if(elem){var style=getComputedStyle(elem);padding=padding+parseInt(style.paddingLeft,10)+parseInt(style.paddingRight,10);}if(canvas&&this.signatureDialog&&this.signatureDialog.visible){if(this.pdfViewer.element.offsetWidth>maximumWidth){canvas.width=canvasWidth;canvas.style.width=canvasWidth+'px';}else{canvas.width=this.pdfViewer.element.offsetWidth-padding;canvas.style.width=canvas.width+'px';}}var fontInnerDiv=document.getElementsByClassName('e-pv-font-sign');if(canvas&&fontInnerDiv&&fontInnerDiv.length>0){for(var i=0;i<fontInnerDiv.length;i++){var fontDiv=fontInnerDiv[i];fontDiv.style.width=canvas.width/2-margin+'px';}}};Signature.prototype.signaturePanelMouseDown=function(e){if(e.type!=='contextmenu'){e.preventDefault();this.findMousePosition(e);this.mouseDetection=true;this.oldX=this.mouseX;this.oldY=this.mouseY;this.newObject=[];this.drawMousePosition(e);}};Signature.prototype.enableCreateButton=function(isEnable){// eslint-disable-next-line
var createbtn=document.getElementsByClassName('e-pv-createbtn')[0];if(createbtn){createbtn.disabled=isEnable;}this.enableClearbutton(isEnable);};Signature.prototype.enableClearbutton=function(isEnable){// eslint-disable-next-line
var clearbtn=document.getElementsByClassName('e-pv-clearbtn')[0];if(clearbtn){clearbtn.disabled=isEnable;}};Signature.prototype.signaturePanelMouseMove=function(e){if(this.mouseDetection){this.findMousePosition(e);this.enableCreateButton(false);this.drawMousePosition(e);}};Signature.prototype.findMousePosition=function(event){if(event.type.indexOf('touch')!==-1){event=event;var element=event.target;// eslint-disable-next-line
var currentRect=element.getBoundingClientRect();this.mouseX=event.touches[0].pageX-currentRect.left;this.mouseY=event.touches[0].pageY-currentRect.top;}else{event=event;this.mouseX=event.offsetX;this.mouseY=event.offsetY;}};Signature.prototype.drawMousePosition=function(event){if(this.mouseDetection){this.drawSignatureInCanvas();this.oldX=this.mouseX;this.oldY=this.mouseY;}};Signature.prototype.drawSignatureInCanvas=function(){// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');// eslint-disable-next-line
var context=canvas.getContext('2d');context.beginPath();context.moveTo(this.oldX,this.oldY);context.lineTo(this.mouseX,this.mouseY);context.stroke();context.lineWidth=2;context.arc(this.oldX,this.oldY,2/2,0,Math.PI*2,true);context.closePath();this.newObject.push(this.mouseX,this.mouseY);};Signature.prototype.signaturePanelMouseUp=function(){if(this.mouseDetection){this.convertToPath(this.newObject);}this.mouseDetection=false;};// eslint-disable-next-line
Signature.prototype.convertToPath=function(newObject){this.movePath(newObject[0],newObject[1]);this.linePath(newObject[0],newObject[1]);for(var n=2;n<newObject.length;n=n+2){this.linePath(newObject[n],newObject[n+1]);}};Signature.prototype.linePath=function(x,y){this.outputString+='L'+x+','+y+' ';};Signature.prototype.movePath=function(x,y){this.outputString+='M'+x+','+y+' ';};/**
     * @private
     * @returns {void}
     */Signature.prototype.clearSignatureCanvas=function(){this.outputString='';this.newObject=[];// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');// eslint-disable-next-line
if(canvas){// eslint-disable-next-line
var context=canvas.getContext('2d');context.clearRect(0,0,canvas.width,canvas.height);}// eslint-disable-next-line
var imageCanvas=document.getElementById(this.pdfViewer.dataId+'_signatureuploadCanvas_');if(imageCanvas){// eslint-disable-next-line
var context=imageCanvas.getContext('2d');context.clearRect(0,0,imageCanvas.width,imageCanvas.height);// eslint-disable-next-line
var signbutton=document.getElementById(this.pdfViewer.dataId+'_e-pv-upload-button');if(signbutton){signbutton.style.visibility='';}}// eslint-disable-next-line
var fontdiv=document.getElementById(this.pdfViewer.dataId+'_font_appearance');// eslint-disable-next-line
var textbox=document.getElementById(this.pdfViewer.dataId+'_e-pv-Signtext-box');if(fontdiv&&textbox){textbox.value='';if(!sf.base.isBlazor()){fontdiv.innerHTML='';}}this.enableCreateButton(true);};/**
     * @private
     * @returns {void}
     */Signature.prototype.closeSignaturePanel=function(){if(this.pdfViewerBase.currentTarget){this.pdfViewerBase.drawSignatureWithTool=true;}this.clearSignatureCanvas();if(!sf.base.isBlazor()){this.signatureDialog.hide();}this.pdfViewerBase.isToolbarSignClicked=false;this.pdfViewerBase.drawSignatureWithTool=false;};/**
     * @private
     * @returns {string} - Returns the string.
     */Signature.prototype.saveSignature=function(){// eslint-disable-next-line
var storeObject=null;if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sign'];}else{storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_sign');}// eslint-disable-next-line
var annotations=new Array();for(var j=0;j<this.pdfViewerBase.pageCount;j++){annotations[j]=[];}if(storeObject){var annotationCollection=JSON.parse(storeObject);for(var i=0;i<annotationCollection.length;i++){var newArray=[];var pageAnnotationObject=annotationCollection[i];if(pageAnnotationObject){for(var z=0;pageAnnotationObject.annotations.length>z;z++){if(this.pdfViewer.isSignatureEditable){var signatureSettings=this.pdfViewer.handWrittenSignatureSettings;var annotationSettings=this.pdfViewer.annotationSettings;var annotationAuthor=signatureSettings.author!=='Guest'?signatureSettings.author:annotationSettings.author?annotationSettings.author:'Guest';// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].author=annotationAuthor;}// eslint-disable-next-line max-len
var strokeColorString=pageAnnotationObject.annotations[z].strokeColor;pageAnnotationObject.annotations[z].strokeColor=JSON.stringify(this.getRgbCode(strokeColorString));// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex));if(pageAnnotationObject.annotations[z].shapeAnnotationType==='HandWrittenSignature'){// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(pageAnnotationObject.annotations[z].data);// eslint-disable-next-line
var csData=sf.drawings.splitArrayCollection(collectionData);pageAnnotationObject.annotations[z].data=JSON.stringify(csData);}else{if(pageAnnotationObject.annotations[z].shapeAnnotationType==='SignatureText'&&!this.checkDefaultFont(pageAnnotationObject.annotations[z].fontFamily)){var signTypeCanvas=sf.base.createElement('canvas');signTypeCanvas.width=150;signTypeCanvas.height=pageAnnotationObject.annotations[z].fontSize*2;// eslint-disable-next-line
var canvasContext=signTypeCanvas.getContext('2d');var x=signTypeCanvas.width/2;var y=signTypeCanvas.height/2-10;canvasContext.textAlign='center';canvasContext.font=pageAnnotationObject.annotations[z].fontSize+'px '+pageAnnotationObject.annotations[z].fontFamily;canvasContext.fillText(pageAnnotationObject.annotations[z].data,x,y);pageAnnotationObject.annotations[z].data=JSON.stringify(signTypeCanvas.toDataURL('image/png'));pageAnnotationObject.annotations[z].shapeAnnotationType='SignatureImage';}else{pageAnnotationObject.annotations[z].data=JSON.stringify(pageAnnotationObject.annotations[z].data);}}}newArray=pageAnnotationObject.annotations;}annotations[pageAnnotationObject.pageIndex]=newArray;}}return JSON.stringify(annotations);};Signature.prototype.checkDefaultFont=function(fontName){// eslint-disable-next-line
if(fontName==='Helvetica'||fontName==='Times New Roman'||fontName==='Courier'||fontName==='Symbol'){return true;}return false;};/**
     * @param colorString
     * @private
     */ // eslint-disable-next-line
Signature.prototype.getRgbCode=function(colorString){if(!colorString.match(/#([a-z0-9]+)/gi)&&!colorString.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)){colorString=this.pdfViewer.annotationModule.nameToHash(colorString);}var stringArray=colorString.split(',');if(sf.base.isNullOrUndefined(stringArray[1])){colorString=this.pdfViewer.annotationModule.getValue(colorString,'rgba');stringArray=colorString.split(',');}// eslint-disable-next-line radix
var r=parseInt(stringArray[0].split('(')[1]);// eslint-disable-next-line radix
var g=parseInt(stringArray[1]);// eslint-disable-next-line radix
var b=parseInt(stringArray[2]);// eslint-disable-next-line radix
var a=parseInt(stringArray[3]);return{r:r,g:g,b:b,a:a};};/**
     * @private
     * @param {number} left - The left.
     * @param {number} top - The top.
     * @returns {void}
     */Signature.prototype.renderSignature=function(left,top){var annot;// eslint-disable-next-line
var currentAnnotation=this.pdfViewerBase.currentSignatureAnnot;var annotationName=this.pdfViewer.annotation.createGUID();if(currentAnnotation){if(this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType==='HandWrittenSignature'){annot={// eslint-disable-next-line max-len
id:currentAnnotation.id,bounds:{x:left,y:top,width:currentAnnotation.bounds.width,height:currentAnnotation.bounds.height},pageIndex:currentAnnotation.pageIndex,data:currentAnnotation.data,shapeAnnotationType:'HandWrittenSignature',opacity:currentAnnotation.opacity,strokeColor:currentAnnotation.strokeColor,thickness:currentAnnotation.thickness,signatureName:annotationName};}if(this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType==='SignatureText'){annot={// eslint-disable-next-line max-len
id:currentAnnotation.id,bounds:{x:left,y:top,width:currentAnnotation.bounds.width,height:currentAnnotation.bounds.height},pageIndex:currentAnnotation.pageIndex,data:currentAnnotation.data,shapeAnnotationType:'SignatureText',opacity:currentAnnotation.opacity,strokeColor:currentAnnotation.strokeColor,thickness:currentAnnotation.thickness,signatureName:annotationName};}this.pdfViewer.add(annot);// eslint-disable-next-line
var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+currentAnnotation.pageIndex);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvass,currentAnnotation.pageIndex);this.pdfViewerBase.signatureAdded=true;// eslint-disable-next-line max-len
this.pdfViewer.fireSignatureAdd(currentAnnotation.pageIndex,currentAnnotation.signatureName,currentAnnotation.shapeAnnotationType,currentAnnotation.bounds,currentAnnotation.opacity,currentAnnotation.strokeColor,currentAnnotation.thickness);this.storeSignatureData(currentAnnotation.pageIndex,annot);this.pdfViewerBase.currentSignatureAnnot=null;this.pdfViewerBase.signatureCount++;}};/**
     * @param annotationCollection
     * @param pageIndex
     * @param isImport
     * @private
     */ // eslint-disable-next-line
Signature.prototype.renderExistingSignature=function(annotationCollection,pageIndex,isImport){var annot;for(var n=0;n<annotationCollection.length;n++){// eslint-disable-next-line
var currentAnnotation=annotationCollection[n];// eslint-disable-next-line
if(currentAnnotation){// eslint-disable-next-line
var bounds=currentAnnotation.Bounds;var currentLeft=bounds.X;var currentTop=bounds.Y;var currentWidth=bounds.Width;var currentHeight=bounds.Height;// eslint-disable-next-line
var data=currentAnnotation.PathData;if(isImport){if(currentAnnotation.IsSignature){data=currentAnnotation.PathData;}else if(currentAnnotation.AnnotationType==='SignatureImage'||currentAnnotation.AnnotationType==='SignatureText'){data=JSON.parse(JSON.stringify(currentAnnotation.PathData));}else{if(data.includes('command')){data=sf.drawings.getPathString(JSON.parse(currentAnnotation.PathData));}else{data=currentAnnotation.PathData;}}}if(currentAnnotation.AnnotationType==='SignatureText'){annot={// eslint-disable-next-line max-len
id:'sign'+this.pdfViewerBase.signatureCount,bounds:{x:currentLeft,y:currentTop,width:currentWidth,height:currentHeight},pageIndex:pageIndex,data:data,fontFamily:currentAnnotation.FontFamily,fontSize:currentAnnotation.FontSize,shapeAnnotationType:'SignatureText',opacity:currentAnnotation.Opacity,strokeColor:currentAnnotation.StrokeColor,thickness:currentAnnotation.Thickness,signatureName:currentAnnotation.SignatureName};}else if(currentAnnotation.AnnotationType==='SignatureImage'){annot={// eslint-disable-next-line max-len
id:'sign'+this.pdfViewerBase.signatureCount,bounds:{x:currentLeft,y:currentTop,width:currentWidth,height:currentHeight},pageIndex:pageIndex,data:data,shapeAnnotationType:'SignatureImage',opacity:currentAnnotation.Opacity,strokeColor:currentAnnotation.StrokeColor,thickness:currentAnnotation.Thickness,signatureName:currentAnnotation.SignatureName};}else{annot={// eslint-disable-next-line max-len
id:'sign'+this.pdfViewerBase.signatureCount,bounds:{x:currentLeft,y:currentTop,width:currentWidth,height:currentHeight},pageIndex:pageIndex,data:data,shapeAnnotationType:'HandWrittenSignature',opacity:currentAnnotation.Opacity,strokeColor:currentAnnotation.StrokeColor,thickness:currentAnnotation.Thickness,signatureName:currentAnnotation.SignatureName};}this.pdfViewer.add(annot);// eslint-disable-next-line
var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+currentAnnotation.pageIndex);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvass,annot.pageIndex);this.storeSignatureData(annot.pageIndex,annot);this.pdfViewerBase.currentSignatureAnnot=null;this.pdfViewerBase.signatureCount++;// eslint-disable-next-line max-len
if(this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable){// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')],true);// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')],true);}}}};/**
     * @param pageNumber
     * @param annotations
     * @private
     */ // eslint-disable-next-line
Signature.prototype.storeSignatureData=function(pageNumber,annotations){// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(annotations.pageIndex,null,annotations,'Addition','',annotations,annotations);var annotation=null;var left=annotations.bounds.left?annotations.bounds.left:annotations.bounds.x;var top=annotations.bounds.top?annotations.bounds.top:annotations.bounds.y;if(annotations.wrapper&&annotations.wrapper.bounds){left=annotations.wrapper.bounds.left;top=annotations.wrapper.bounds.top;}annotation={// eslint-disable-next-line max-len
id:annotations.id,bounds:{left:left,top:top,width:annotations.bounds.width,height:annotations.bounds.height},shapeAnnotationType:annotations.shapeAnnotationType,opacity:annotations.opacity,thickness:annotations.thickness,strokeColor:annotations.strokeColor,pageIndex:annotations.pageIndex,data:annotations.data,fontSize:annotations.fontSize,fontFamily:annotations.fontFamily,signatureName:annotations.signatureName};// eslint-disable-next-line
var sessionSize=Math.round(JSON.stringify(window.sessionStorage).length/1024);// eslint-disable-next-line
var currentAnnotation=Math.round(JSON.stringify(annotation).length/1024);if(sessionSize+currentAnnotation>4500){this.pdfViewerBase.isStorageExceed=true;this.pdfViewer.annotationModule.clearAnnotationStorage();}// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_sign');var index=0;if(!storeObject){this.storeSignatureCollections(annotation,pageNumber);var shapeAnnotation={pageIndex:pageNumber,annotations:[]};shapeAnnotation.annotations.push(annotation);index=shapeAnnotation.annotations.indexOf(annotation);var annotationCollection=[];annotationCollection.push(shapeAnnotation);var annotationStringified=JSON.stringify(annotationCollection);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sign']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_sign',annotationStringified);}}else{this.storeSignatureCollections(annotation,pageNumber);var annotObject=JSON.parse(storeObject);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_sign');var pageIndex=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[pageIndex]){annotObject[pageIndex].annotations.push(annotation);index=annotObject[pageIndex].annotations.indexOf(annotation);}else{var markupAnnotation={pageIndex:pageNumber,annotations:[]};markupAnnotation.annotations.push(annotation);index=markupAnnotation.annotations.indexOf(annotation);annotObject.push(markupAnnotation);}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sign']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_sign',annotationStringified);}}};/**
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isSignatureEdited
     * @private
     */ // eslint-disable-next-line
Signature.prototype.modifySignatureCollection=function(property,pageNumber,annotationBase,isSignatureEdited){this.pdfViewerBase.updateDocumentEditedProperty(true);var currentAnnotObject=null;var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations!=null&&annotationBase){for(var i=0;i<pageAnnotations.length;i++){if(annotationBase.id===pageAnnotations[i].id){if(property==='bounds'){// eslint-disable-next-line max-len
pageAnnotations[i].bounds={left:annotationBase.wrapper.bounds.left,top:annotationBase.wrapper.bounds.top,width:annotationBase.bounds.width,height:annotationBase.bounds.height};pageAnnotations[i].fontSize=annotationBase.fontSize;}else if(property==='stroke'){pageAnnotations[i].strokeColor=annotationBase.wrapper.children[0].style.strokeColor;}else if(property==='opacity'){pageAnnotations[i].opacity=annotationBase.wrapper.children[0].style.opacity;}else if(property==='thickness'){pageAnnotations[i].thickness=annotationBase.wrapper.children[0].style.strokeWidth;}else if(property==='delete'){this.updateSignatureCollection(pageAnnotations[i]);currentAnnotObject=pageAnnotations.splice(i,1)[0];break;}if(property&&property!=='delete'){this.storeSignatureCollections(pageAnnotations[i],pageNumber);}if(isSignatureEdited){pageAnnotations[i].opacity=annotationBase.wrapper.children[0].style.opacity;pageAnnotations[i].strokeColor=annotationBase.wrapper.children[0].style.strokeColor;pageAnnotations[i].thickness=annotationBase.wrapper.children[0].style.strokeWidth;this.storeSignatureCollections(pageAnnotations[i],pageNumber);break;}}}this.manageAnnotations(pageAnnotations,pageNumber);}return currentAnnotObject;};/**
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
Signature.prototype.storeSignatureCollections=function(annotation,pageNumber){// eslint-disable-next-line
var collectionDetails=this.checkSignatureCollection(annotation);// eslint-disable-next-line
var selectAnnotation=cloneObject(annotation);selectAnnotation.annotationId=annotation.signatureName;selectAnnotation.pageNumber=pageNumber;delete selectAnnotation.annotName;if(annotation.id){selectAnnotation.uniqueKey=annotation.id;delete selectAnnotation.id;}if(collectionDetails.isExisting){this.pdfViewer.signatureCollection.splice(collectionDetails.position,0,selectAnnotation);}else{this.pdfViewer.signatureCollection.push(selectAnnotation);}};// eslint-disable-next-line
Signature.prototype.checkSignatureCollection=function(signature){// eslint-disable-next-line
var collections=this.pdfViewer.signatureCollection;if(collections&&signature){for(var i=0;i<collections.length;i++){if(collections[i].annotationId===signature.signatureName){this.pdfViewer.signatureCollection.splice(i,1);return{isExisting:true,position:i};}}}return{isExisting:false,position:null};};/**
     * @param signature
     * @private
     */ // eslint-disable-next-line
Signature.prototype.updateSignatureCollection=function(signature){// eslint-disable-next-line
var collections=this.pdfViewer.signatureCollection;if(collections&&signature){for(var i=0;i<collections.length;i++){if(collections[i].annotationId===signature.signatureName){this.pdfViewer.signatureCollection.splice(i,1);break;}}}};/**
     * @param pageNumber
     * @param signature
     * @private
     */ // eslint-disable-next-line
Signature.prototype.addInCollection=function(pageNumber,signature){if(signature){this.storeSignatureCollections(signature,pageNumber);// eslint-disable-next-line
var pageSignatures=this.getAnnotations(pageNumber,null);if(pageSignatures){pageSignatures.push(signature);}this.manageAnnotations(pageSignatures,pageNumber);}};// eslint-disable-next-line
Signature.prototype.getAnnotations=function(pageIndex,shapeAnnotations){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
var storeObject=null;if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sign'];}else{storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_sign');}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=shapeAnnotations;}}else{annotationCollection=shapeAnnotations;}return annotationCollection;};Signature.prototype.manageAnnotations=function(pageAnnotations,pageNumber){// eslint-disable-next-line
var storeObject=null;if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sign'];}else{storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_sign');}if(storeObject){var annotObject=JSON.parse(storeObject);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_sign');var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sign']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_sign',annotationStringified);}}};/**
     * @private
     * @param {boolean} isShow - Returns the true or false.
     * @returns {void}
     */Signature.prototype.showSignatureDialog=function(isShow){if(isShow){this.createSignaturePanel();}};/**
     * @private
     * @returns {void}
     */Signature.prototype.setAnnotationMode=function(){this.pdfViewerBase.isToolbarSignClicked=true;this.showSignatureDialog(true);};/**
     * @private
     * @returns {void}
     */Signature.prototype.setInitialMode=function(){this.pdfViewerBase.isToolbarSignClicked=true;this.pdfViewerBase.isInitialField=true;this.showSignatureDialog(true);};/**
     * @param number
     * @private
     */ // eslint-disable-next-line
Signature.prototype.ConvertPointToPixel=function(number){return number*(96/72);};/**
     * @param signature
     * @param pageIndex
     * @param isImport
     * @private
     */ // eslint-disable-next-line
Signature.prototype.updateSignatureCollections=function(signature,pageIndex,isImport){var annot;// eslint-disable-next-line
if(signature){// eslint-disable-next-line
var bounds=signature.Bounds;var currentLeft=bounds.X;var currentTop=bounds.Y;var currentWidth=bounds.Width;var currentHeight=bounds.Height;// eslint-disable-next-line
var data=signature.PathData;if(isImport){data=sf.drawings.getPathString(JSON.parse(signature.PathData));}annot={// eslint-disable-next-line max-len
id:'sign'+signature.SignatureName,bounds:{x:currentLeft,y:currentTop,width:currentWidth,height:currentHeight},pageIndex:pageIndex,data:data,shapeAnnotationType:'HandWrittenSignature',opacity:signature.Opacity,strokeColor:signature.StrokeColor,thickness:signature.Thickness,signatureName:signature.SignatureName};return annot;}};/**
     * @private
     * @returns {void}
     */Signature.prototype.destroy=function(){window.sessionStorage.removeItem('_annotations_sign');// eslint-disable-next-line
var signImage=document.getElementById(this.pdfViewer.dataId+'_signElement');if(signImage){signImage.removeEventListener('change',this.addStampImage);if(signImage.parentElement)signImage.parentElement.removeChild(signImage);}if(this.signatureDialog)this.signatureDialog.destroy();};return Signature;}();var __extends$3=undefined&&undefined.__extends||function(){var _extendStatics4=function extendStatics(d,b){_extendStatics4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return _extendStatics4(d,b);};return function(d,b){_extendStatics4(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();/**
 * Defines the interactive tools
 *
 * @hidden
 */var ToolBase=/** @class */function(){/**
     * Initializes the tool
     *
     * @param {PdfViewer} pdfViewer - Specified the pdfviewer component.
     * @param {PdfViewerBase} pdfViewerBase - Specified the pdfViewer base component.
     * @param {boolean} protectChange - Set the default value as false.
     */function ToolBase(pdfViewer,pdfViewerBase,protectChange){if(protectChange===void 0){protectChange=false;}/**
         * Command that is corresponding to the current action
         */this.commandHandler=null;/**
         * Sets/Gets whether the interaction is being done
         */this.inAction=false;/**
         * Sets/Gets the protect change
         */this.pdfViewerBase=null;/**
         * Sets/Gets the current element that is under mouse
         */ /**   @private  */this.currentElement=null;/**   @private  */this.blocked=false;this.isTooltipVisible=false;/** @private */this.childTable={};/** @private */this.helper=undefined;/**
         * Sets/Gets the previous object when mouse down
         */this.undoElement={annotations:[]};this.undoParentElement={annotations:[]};this.commandHandler=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @param {IElement} currentElement - Specified the current element.
     * @returns {void}
     */ToolBase.prototype.startAction=function(currentElement){this.currentElement=currentElement;this.inAction=true;};/**
     * @private
     * @param {MouseEventArgs} args - Mouse up event arguments.
     * @returns {void}
     */ToolBase.prototype.mouseDown=function(args){this.currentElement=args.source;this.startPosition=this.currentPosition=this.prevPosition=args.position;this.isTooltipVisible=true;this.startAction(args.source);};/**
     * @private
     * @param {MouseEventArgs} args - Mouse up event arguments.
     * @returns {boolean} - Returns true or false.
     */ToolBase.prototype.mouseMove=function(args){this.currentPosition=args.position;//this.currentElement = currentElement;
this.prevPageId=this.pdfViewerBase.activeElements.activePageID;return!this.blocked;};/**
     * @private
     * @param {MouseEventArgs} args - Mouse up event arguments.
     * @returns {void}
     */ToolBase.prototype.mouseUp=function(args){this.currentPosition=args.position;// this.currentElement = currentElement;
this.isTooltipVisible=false;//At the end
this.endAction();this.helper=null;};ToolBase.prototype.endAction=function(){//remove helper
if(this.commandHandler){this.commandHandler.tool='';if(this.helper){this.commandHandler.remove(this.helper);}}this.commandHandler=null;this.currentElement=null;this.currentPosition=null;this.inAction=false;this.blocked=false;};/**
     * @private
     * @param {MouseEventArgs} args - Mouse wheel event arguments.
     * @returns {void}
     */ToolBase.prototype.mouseWheel=function(args){this.currentPosition=args.position;};/**
     * @private
     * @param {MouseEventArgs} args - Mouse leave event arguments.
     * @returns {void}
     */ToolBase.prototype.mouseLeave=function(args){this.mouseUp(args);};// eslint-disable-next-line
ToolBase.prototype.updateSize=function(shape,startPoint,endPoint,corner,initialBounds,angle,isMouseUp){var zoom=this.commandHandler.viewerBase.getZoomFactor();var difx=this.currentPosition.x/zoom-this.startPosition.x/zoom;var dify=this.currentPosition.y/zoom-this.startPosition.y/zoom;var rotateAngle=shape instanceof sf.drawings.TextElement?angle:shape.rotateAngle;var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,-rotateAngle,0,0);var deltaWidth=0;var deltaHeight=0;var diff;var width;var height;if(shape.shapeAnnotationType==="Image"||shape.shapeAnnotationType==="Stamp"){width=shape instanceof sf.drawings.TextElement?shape.actualSize.width:shape.wrapper.bounds.width;height=shape instanceof sf.drawings.TextElement?shape.actualSize.height:shape.wrapper.bounds.height;}else{width=shape instanceof sf.drawings.TextElement?shape.actualSize.width:shape.bounds.width;height=shape instanceof sf.drawings.TextElement?shape.actualSize.height:shape.bounds.height;}// eslint-disable-next-line
var obj=shape;if(!shape.formFieldAnnotationType){if(!shape.annotName&&!shape.shapeAnnotationType){if(shape){// eslint-disable-next-line
obj=shape.annotations[0];}}}// eslint-disable-next-line
var annotationSettings=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(obj):{};var annotationMaxHeight=0;var annotationMaxWidth=0;var annotationMinHeight=0;var annotationMinWidth=0;if(annotationSettings.minWidth||annotationSettings.maxWidth||annotationSettings.minHeight||annotationSettings.maxHeight){annotationMaxHeight=annotationSettings.maxHeight?annotationSettings.maxHeight:2000;annotationMaxWidth=annotationSettings.maxWidth?annotationSettings.maxWidth:2000;annotationMinHeight=annotationSettings.minHeight?annotationSettings.minHeight:0;annotationMinWidth=annotationSettings.minWidth?annotationSettings.minWidth:0;}var isAnnotationSet=false;if(annotationMinHeight||annotationMinWidth||annotationMaxHeight||annotationMaxWidth){isAnnotationSet=true;}if(isAnnotationSet&&isMouseUp){// eslint-disable-next-line
var size=this.getPositions(corner,difx,dify);var newWidth=width+size.x;var newHeight=height+size.y;// eslint-disable-next-line max-len
if(newHeight>annotationMinHeight&&newHeight<annotationMaxHeight&&newWidth>annotationMinWidth&&newWidth<annotationMaxWidth){// eslint-disable-next-line
difx=difx;// eslint-disable-next-line
dify=dify;}else{if(newHeight<annotationMinHeight||newHeight>annotationMaxHeight){if(newHeight<annotationMinHeight){dify=annotationMinHeight-height;}else{dify=annotationMaxHeight-height;}}if(newWidth<annotationMinWidth||newWidth>annotationMaxWidth){if(newWidth<annotationMinWidth){difx=annotationMinWidth-width;}else{difx=annotationMaxWidth-width;}}}}switch(corner){case'ResizeWest':diff=sf.drawings.transformPointByMatrix(matrix,{x:difx,y:dify});difx=diff.x;dify=diff.y;deltaHeight=1;// eslint-disable-next-line
difx=difx;dify=0;if(isAnnotationSet){if(initialBounds.width-difx>annotationMaxWidth){difx=annotationMaxWidth-initialBounds.width;}}deltaWidth=(initialBounds.width-difx)/width;break;case'ResizeEast':diff=sf.drawings.transformPointByMatrix(matrix,{x:difx,y:dify});difx=diff.x;dify=diff.y;dify=0;if(isAnnotationSet){if(initialBounds.width+difx>annotationMaxWidth){difx=annotationMaxWidth-initialBounds.width;}}deltaWidth=(initialBounds.width+difx)/width;deltaHeight=1;break;case'ResizeNorth':deltaWidth=1;diff=sf.drawings.transformPointByMatrix(matrix,{x:difx,y:dify});difx=diff.x;dify=diff.y;if(isAnnotationSet){if(initialBounds.height-dify>annotationMaxHeight){dify=annotationMaxHeight-initialBounds.height;}}deltaHeight=(initialBounds.height-dify)/height;break;case'ResizeSouth':deltaWidth=1;diff=sf.drawings.transformPointByMatrix(matrix,{x:difx,y:dify});difx=diff.x;dify=diff.y;if(isAnnotationSet){if(initialBounds.height+dify>annotationMaxHeight){dify=annotationMaxHeight-initialBounds.height;}}deltaHeight=(initialBounds.height+dify)/height;break;case'ResizeNorthEast':diff=sf.drawings.transformPointByMatrix(matrix,{x:difx,y:dify});difx=diff.x;dify=diff.y;if(isAnnotationSet){if(initialBounds.width+difx>annotationMaxWidth){difx=annotationMaxWidth-initialBounds.width;}if(initialBounds.height-dify>annotationMaxHeight){dify=annotationMaxHeight-initialBounds.height;}}deltaWidth=(initialBounds.width+difx)/width;deltaHeight=(initialBounds.height-dify)/height;break;case'ResizeNorthWest':diff=sf.drawings.transformPointByMatrix(matrix,{x:difx,y:dify});difx=diff.x;dify=diff.y;if(isAnnotationSet){if(initialBounds.width-difx>annotationMaxWidth){difx=annotationMaxWidth-initialBounds.width;}if(initialBounds.height-dify>annotationMaxHeight){dify=annotationMaxHeight-initialBounds.height;}}deltaWidth=(initialBounds.width-difx)/width;deltaHeight=(initialBounds.height-dify)/height;break;case'ResizeSouthEast':diff=sf.drawings.transformPointByMatrix(matrix,{x:difx,y:dify});difx=diff.x;dify=diff.y;if(isAnnotationSet){if(initialBounds.width+difx>annotationMaxWidth){difx=annotationMaxWidth-initialBounds.width;}if(initialBounds.height+dify>annotationMaxHeight){dify=annotationMaxHeight-initialBounds.height;}}deltaHeight=(initialBounds.height+dify)/height;deltaWidth=(initialBounds.width+difx)/width;break;case'ResizeSouthWest':diff=sf.drawings.transformPointByMatrix(matrix,{x:difx,y:dify});difx=diff.x;dify=diff.y;if(isAnnotationSet){if(initialBounds.width-difx>annotationMaxWidth){difx=annotationMaxWidth-initialBounds.width;}if(initialBounds.height+dify>annotationMaxHeight){dify=annotationMaxHeight-initialBounds.height;}}deltaWidth=(initialBounds.width-difx)/width;deltaHeight=(initialBounds.height+dify)/height;break;}return{width:deltaWidth,height:deltaHeight};};ToolBase.prototype.getPivot=function(corner){switch(corner){case'ResizeWest':return{x:1,y:0.5};case'ResizeEast':return{x:0,y:0.5};case'ResizeNorth':return{x:0.5,y:1};case'ResizeSouth':return{x:0.5,y:0};case'ResizeNorthEast':return{x:0,y:1};case'ResizeNorthWest':return{x:1,y:1};case'ResizeSouthEast':return{x:0,y:0};case'ResizeSouthWest':return{x:1,y:0};}return{x:0.5,y:0.5};};ToolBase.prototype.getPositions=function(corner,x,y){switch(corner){case'ResizeEast':return{x:x,y:0};case'ResizeSouthEast':return{x:x,y:y};case'ResizeSouth':return{x:0,y:y};case'ResizeNorth':return{x:0,y:-y};case'ResizeNorthEast':return{x:x,y:-y};case'ResizeNorthWest':return{x:-x,y:-y};case'ResizeWest':return{x:-x,y:0};case'ResizeSouthWest':return{x:-x,y:y};}return{x:x,y:y};};return ToolBase;}();/**
 * Helps to select the objects
 *
 * @hidden
 */var SelectTool=/** @class */function(_super){__extends$3(SelectTool,_super);function SelectTool(commandHandler,base){return _super.call(this,commandHandler,base,true)||this;//     this.action = action;
}/**
     * @private
     * @param {MouseEventArgs} args - Mouse down event arguments.
     * @returns {void}
     */SelectTool.prototype.mouseDown=function(args){this.inAction=true;this.mouseEventHelper(args);_super.prototype.mouseDown.call(this,args);};SelectTool.prototype.mouseEventHelper=function(args){if(this.commandHandler&&this.commandHandler.annotationModule){// eslint-disable-next-line
this.commandHandler.annotationModule.overlappedCollections=findActiveElement(args,this.pdfViewerBase,this.commandHandler,true);}// eslint-disable-next-line
var object=findActiveElement(args,this.pdfViewerBase,this.commandHandler);// if (!isNullOrUndefined(object) && (object as any).shapeAnnotationType != 'Path'){
var isLock=false;// eslint-disable-next-line
if(object&&object.shapeAnnotationType==='StickyNotes'){// eslint-disable-next-line
if(object.annotationSettings&&object.annotationSettings.isLock){if(this.commandHandler.annotationModule.checkAllowedInteractions('Select',object)){isLock=false;}else{isLock=true;}}}if(!isLock){// eslint-disable-next-line
var currentSelctor=void 0;if(args.source&&args.annotationSelectorSettings!==null){currentSelctor=args.source.annotationSelectorSettings;}else{currentSelctor='';}if(this.commandHandler){var selectedObject=this.commandHandler.selectedItems;if(selectedObject){// eslint-disable-next-line
var annotation=selectedObject.annotations[0];// eslint-disable-next-line
var formField=selectedObject.formFields[0];var currentAnnot=this.commandHandler.selectedItems.annotations[0];var currentSource=args.source;if(selectedObject.annotations.length&&args.info&&!args.info.ctrlKey// eslint-disable-next-line
&&this.commandHandler.annotationModule&&this.commandHandler.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus===false){this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);}else if(args.info&&args.info.ctrlKey&&(currentSource&&currentSource.shapeAnnotationType==='FreeText'||currentAnnot&&currentAnnot.shapeAnnotationType==='FreeText')){this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);}else if(sf.base.isNullOrUndefined(object)&&this.commandHandler.formDesignerModule&&!(currentSource&&currentSource.shapeAnnotationType==='FreeText'||currentAnnot&&(currentAnnot.shapeAnnotationType==='FreeText'||currentAnnot.shapeAnnotationType==='Image'||currentAnnot.shapeAnnotationType==='StickyNotes'))){this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);}if(object){if(!sf.base.isNullOrUndefined(this.pdfViewerBase.isFreeTextSelected)&&!this.pdfViewerBase.isFreeTextSelected){this.commandHandler.select([object.id],currentSelctor);this.commandHandler.viewerBase.isAnnotationMouseDown=true;}this.pdfViewerBase.isFreeTextSelected=false;this.commandHandler.viewerBase.isFormFieldMouseDown=true;}if(selectedObject.annotations.length===0&&annotation&&annotation.shapeAnnotationType!=='HandWrittenSignature'&&annotation.shapeAnnotationType!=='SignatureText'&&annotation.shapeAnnotationType!=='SignatureImage'&&annotation.shapeAnnotationType!=='Path'&&!annotation.formFieldAnnotationType){if(this.commandHandler.enableToolbar&&sf.base.Browser.isDevice&&!this.commandHandler.enableDesktopMode){this.commandHandler.toolbarModule.showToolbar(true);}this.commandHandler.fireAnnotationUnSelect(annotation.annotName,annotation.pageIndex,annotation);}if(selectedObject.annotations.length===0&&annotation){var signature={bounds:annotation.bounds,opacity:annotation.opacity,thickness:annotation.thickness,strokeColor:annotation.strokeColor};if(annotation.shapeAnnotationType==='HandWrittenSignature'){this.commandHandler.fireSignatureUnselect(annotation.signatureName,annotation.pageIndex,signature);}if(annotation.shapeAnnotationType==='SignatureText'||annotation.shapeAnnotationType==='SignatureImage'||annotation.shapeAnnotationType==='Path'){this.commandHandler.fireSignatureUnselect(annotation.id,annotation.pageIndex,signature);}}// eslint-disable-next-line max-len
if(selectedObject.formFields.length===0&&this.commandHandler.formDesignerModule&&formField&&formField.formFieldAnnotationType){// eslint-disable-next-line
var field={value:formField.value,fontFamily:formField.fontFamily,fontSize:formField.fontSize,fontStyle:formField.fontStyle,// eslint-disable-next-line
color:formField.color,backgroundColor:formField.backgroundColor,alignment:formField.alignment,isReadonly:formField.isReadOnly,visibility:formField.visibility,// eslint-disable-next-line
maxLength:formField.maxLength,isRequired:formField.isRequired,isPrint:formField.isPrint,rotation:formField.rotation,tooltip:formField.tooltip,// eslint-disable-next-line
options:formField.options,isChecked:formField.isChecked,isSelected:formField.isSelected};this.commandHandler.fireFormFieldUnselectEvent('formFieldUnselect',field,formField.pageIndex);}}}}// } else {
//     if (!isNullOrUndefined(this.commandHandler))
//         this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);
// }
};/**
     * @private
     * @param {MouseEventArgs} args - Mouse move event arguments.
     * @returns {boolean} - Returns true or false.
     */SelectTool.prototype.mouseMove=function(args){_super.prototype.mouseMove.call(this,args);//draw selected region
return!this.blocked;};/**
     * @private
     * @param {MouseEventArgs} args - Mouse up event arguments.
     * @returns {void}
     */SelectTool.prototype.mouseUp=function(args){this.mouseEventHelper(args);this.inAction=false;_super.prototype.mouseUp.call(this,args);};/**
     * @private
     * @param {MouseEventArgs} args - Mouse leave event arguments.
     * @returns {void}
     */SelectTool.prototype.mouseLeave=function(args){if(this.inAction){this.mouseUp(args);}};return SelectTool;}(ToolBase);/** @hidden */var MoveTool=/** @class */function(_super){__extends$3(MoveTool,_super);function MoveTool(commandHandler,base){var _this=_super.call(this,commandHandler,base)||this;/**   @private  */_this.currentTarget=null;/**   @private  */_this.prevNode=null;return _this;}/**
     * @private
     * @param {MouseEventArgs} args - Mouse down event arguments.
     * @returns {void}
     */MoveTool.prototype.mouseDown=function(args){_super.prototype.mouseDown.call(this,args);this.offset={x:args.source.wrapper.offsetX,y:args.source.wrapper.offsetY};this.startPosition=args.position;var nodeMouseDown=cloneObject(args.source);this.redoElement={bounds:{x:nodeMouseDown.wrapper.offsetX,y:nodeMouseDown.wrapper.offsetY,width:nodeMouseDown.wrapper.actualSize.width,height:nodeMouseDown.wrapper.actualSize.height}// eslint-disable-next-line
};if(isLineShapes(nodeMouseDown)){this.redoElement.vertexPoints=nodeMouseDown.vertexPoints;this.redoElement.leaderHeight=nodeMouseDown.leaderHeight;}this.inAction=true;};/**
     * @private
     * @param {any} args - Specified the mouse event arguments.
     * @returns {void}
     */ // eslint-disable-next-line
MoveTool.prototype.mouseUp=function(args){if(this.commandHandler&&args.source){// eslint-disable-next-line max-len
if(this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0){if(this.commandHandler.selectedItems.annotations[0].annotName===args.source.annotName){this.commandHandler.viewerBase.isAnnotationMouseMove=true;}}else{this.commandHandler.viewerBase.isAnnotationMouseMove=false;}// eslint-disable-next-line max-len
if(this.commandHandler.selectedItems&&this.commandHandler.selectedItems.formFields&&this.commandHandler.selectedItems.formFields.length>0){if(this.commandHandler.selectedItems.formFields[0].name===args.source.name){this.commandHandler.viewerBase.isFormFieldMouseMove=true;}}else{this.commandHandler.viewerBase.isFormFieldMouseMove=false;}var currentSelctor=args.source.annotationSelectorSettings;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.commandHandler.select([args.source.id],currentSelctor);// eslint-disable-next-line max-len
this.commandHandler.dragSelectedObjects(this.calculateMouseActionXDiff(args),this.calculateMouseActionYDiff(args),this.pdfViewerBase.activeElements.activePageID,currentSelctor,null);if(args.source&&(args.source.formFieldAnnotationType==='Textbox'||args.source.formFieldAnnotationType==='Checkbox'||args.source.formFieldAnnotationType==='RadioButton'||args.source.formFieldAnnotationType==='ListBox'||args.source.formFieldAnnotationType==='SignatureField'||args.source.formFieldAnnotationType==='InitialField'||args.source.formFieldAnnotationType==='DropdownList'||args.source.formFieldAnnotationType==='PasswordField')){this.commandHandler.formDesignerModule.updateHTMLElement(args.source);}this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,currentSelctor);this.commandHandler.viewerBase.isAnnotationMouseMove=false;this.commandHandler.viewerBase.isFormFieldMouseMove=false;// eslint-disable-next-line
var newShapeObject={bounds:{x:args.source.wrapper.offsetX,y:args.source.wrapper.offsetY,width:args.source.wrapper.actualSize.width,height:args.source.wrapper.actualSize.height},modifiedDate:args.source.modifiedDate};if(isLineShapes(args.source)){newShapeObject.vertexPoints=args.source.vertexPoints;newShapeObject.leaderHeight=args.source.leaderHeight;}if(args.target&&args.target.formFieldAnnotationType){var node=args.target;var field={// eslint-disable-next-line
value:node.value,fontFamily:node.fontFamily,fontSize:node.fontSize,fontStyle:node.fontStyle,// eslint-disable-next-line
color:node.color,backgroundColor:node.backgroundColor,borderColor:node.borderColor,// eslint-disable-next-line
thickness:node.thickness,alignment:node.alignment,isReadonly:node.isReadonly,visibility:node.visibility,// eslint-disable-next-line
maxLength:node.maxLength,isRequired:node.isRequired,isPrint:node.isPrint,rotation:node.rotateAngle,tooltip:node.tooltip,options:node.options,// eslint-disable-next-line
isChecked:node.isChecked,isSelected:node.isSelected};// eslint-disable-next-line max-len
var currentPosition={X:args.source.wrapper.offsetX,Y:args.source.wrapper.offsetY,Width:args.source.wrapper.actualSize.width,Height:args.source.wrapper.actualSize.height};// eslint-disable-next-line max-len
var previousPosition={X:this.offset.x,Y:this.offset.y,Width:args.source.wrapper.actualSize.width,Height:args.source.wrapper.actualSize.height};this.commandHandler.fireFormFieldMoveEvent('formFieldMove',field,node.pageIndex,previousPosition,currentPosition);}if(this.commandHandler.annotation){// eslint-disable-next-line
this.commandHandler.annotation.addAction(this.pageIndex,null,args.source,'Drag','',this.redoElement,newShapeObject);this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(args.source,null,'Drag');this.commandHandler.annotation.stickyNotesAnnotationModule.updateStickyNotes(args.source,null);}}_super.prototype.mouseUp.call(this,args);};MoveTool.prototype.calculateMouseXDiff=function(){if(this.currentPosition&&this.startPosition){return this.currentPosition.x-this.startPosition.x;}else{return 0;}};MoveTool.prototype.calculateMouseYDiff=function(){if(this.currentPosition&&this.startPosition){return this.currentPosition.y-this.startPosition.y;}else{return 0;}};MoveTool.prototype.calculateMouseActionXDiff=function(args){var x=this.calculateMouseXDiff()/this.commandHandler.viewerBase.getZoomFactor();// let y: number = this.calculateMouseYDiff() / this.commandHandler.magnification.zoomFactor;
if(this.offset){var requiredX=this.offset.x+x;// let requiredY: number = this.offset.y + y;
return requiredX-args.source.wrapper.offsetX;//let diffY: number = requiredY - args.source.wrapper.offsetY;
}else{return 0;}};MoveTool.prototype.calculateMouseActionYDiff=function(args){// let x: number = this.calculateMouseXDiff() / this.commandHandler.magnification.zoomFactor;
var y=this.calculateMouseYDiff()/this.commandHandler.viewerBase.getZoomFactor();if(this.offset){// let requiredX: number = this.offset.x + x;
var requiredY=this.offset.y+y;// let diffX: number = requiredX - args.source.wrapper.offsetX;
return requiredY-args.source.wrapper.offsetY;}else{return 0;}};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @param {boolean} isStamp - Specified the stamp annotation or not.
     * @param {boolean} isSkip - Specified the annotation skip or not.
     * @returns {boolean} - Returns the true or false.
     */MoveTool.prototype.mouseMove=function(args,isStamp,isSkip){_super.prototype.mouseMove.call(this,args);if(this.inAction){this.currentPosition=args.position;this.currentTarget=args.target;var currentSelctor=args.source.annotationSelectorSettings;var x=this.calculateMouseXDiff()/this.commandHandler.viewerBase.getZoomFactor();var y=this.calculateMouseYDiff()/this.commandHandler.viewerBase.getZoomFactor();var requiredX=this.offset.x+x;var requiredY=this.offset.y+y;var diffX=this.calculateMouseActionXDiff(args);var diffY=this.calculateMouseActionYDiff(args);var selectedItem=this.commandHandler.selectedItems.annotations[0];if(!this.helper){// eslint-disable-next-line
var cobject=this.commandHandler.selectedItems.annotations.length>0?cloneObject(this.commandHandler.selectedItems.annotations[0]):cloneObject(this.commandHandler.selectedItems.formFields[0]);if(cobject.wrapper){diffX=requiredX-cobject.wrapper.offsetX;diffY=requiredY-cobject.wrapper.offsetY;// eslint-disable-next-line max-len
cobject.bounds=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].wrapper.bounds:this.commandHandler.selectedItems.formFields[0].wrapper.bounds;}cobject.wrapper=undefined;cobject.id='diagram_helper';if(cobject.shapeAnnotationType==='Stamp'){cobject.strokeColor='';cobject.borderDashArray='';cobject.fillColor='transparent';cobject.stampFillColor='transparent';cobject.data='';}else if(cobject.shapeAnnotationType==='FreeText'){cobject.strokeColor='blue';cobject.fillColor='transparent';cobject.thickness=1;cobject.opacity=1;cobject.dynamicText='';}else if(cobject.shapeAnnotationType==='SignatureText'){cobject.strokeColor='red';cobject.borderDashArray='5,5';cobject.fillColor='transparent';cobject.thickness=2;cobject.opacity=1;cobject.data='';}else{cobject.strokeColor='red';cobject.borderDashArray='5,5';cobject.fillColor='transparent';cobject.thickness=2;cobject.opacity=1;}if(cobject.enableShapeLabel===true){cobject.labelContent='';}if(!isStamp){this.helper=cobject=this.commandHandler.add(cobject);}else{cobject=this.helper=args.source;}if(this.commandHandler.selectedItems.annotations.length>0){this.commandHandler.selectedItems.annotations=[cobject];}else{this.commandHandler.selectedItems.formFields=[cobject];}}else{diffX=requiredX-this.helper.wrapper.offsetX;diffY=requiredY-this.helper.wrapper.offsetY;}if(this.helper&&this.helper.shapeAnnotationType==='Stamp'){isStamp=true;}// eslint-disable-next-line max-len
if(this.commandHandler.checkBoundaryConstraints(diffX,diffY,this.pdfViewerBase.activeElements.activePageID,this.helper.wrapper.bounds,isStamp,isSkip)){// eslint-disable-next-line max-len
this.commandHandler.dragSelectedObjects(diffX,diffY,this.pdfViewerBase.activeElements.activePageID,currentSelctor,this.helper);this.prevNode=this.helper;this.prevPosition=this.currentPosition;}else{this.currentPosition=this.prevPosition;}if(selectedItem&&selectedItem.annotName){this.commandHandler.annotation.triggerAnnotationMove(selectedItem,true);}}return true;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */MoveTool.prototype.mouseLeave=function(args){var currentSelctor=args.source.annotationSelectorSettings;var requiredX=this.offset.x+this.calculateMouseXDiff();var requiredY=this.offset.y+this.calculateMouseYDiff();var diffX=requiredX-args.source.wrapper.offsetX;var diffY=requiredY-args.source.wrapper.offsetY;this.commandHandler.dragSelectedObjects(diffX,diffY,this.prevPageId,currentSelctor,null);this.commandHandler.renderSelector(this.prevPageId,currentSelctor);_super.prototype.mouseLeave.call(this,args);};/**
     * @private
     * @returns {void}
     */MoveTool.prototype.endAction=function(){_super.prototype.endAction.call(this);this.currentTarget=null;this.prevPosition=null;};return MoveTool;}(ToolBase);/** @hidden */var StampTool=/** @class */function(_super){__extends$3(StampTool,_super);function StampTool(){return _super!==null&&_super.apply(this,arguments)||this;}/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {any} - Returns the mouse up event.
     */ // eslint-disable-next-line
StampTool.prototype.mouseDown=function(args){_super.prototype.mouseUp.call(this,args);};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns the true or false.
     */StampTool.prototype.mouseMove=function(args){// eslint-disable-next-line
var newObject;if(!this.inAction){var pageIndex=this.pdfViewerBase.activeElements.activePageID;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);// eslint-disable-next-line max-len
var nodeElement=this.commandHandler.annotation.stampAnnotationModule.moveStampElement(args.position.x,args.position.y,pageIndex);if(nodeElement.shapeAnnotationType==='SignatureText'){var textWidth=this.getTextWidth(nodeElement.data,nodeElement.fontSize);var widthRatio=1;if(textWidth>nodeElement.bounds.width)widthRatio=nodeElement.bounds.width/textWidth;nodeElement.fontSize=nodeElement.fontSize*widthRatio;nodeElement.thickness=0;}newObject=this.commandHandler.add(nodeElement);args.source=this.commandHandler.annotations[this.commandHandler.annotations.length-1];args.sourceWrapper=args.source.wrapper;this.inAction=true;// eslint-disable-next-line
var currentSource=args.source;if(currentSource&&(currentSource.shapeAnnotationType==='HandWrittenSignature'||currentSource.shapeAnnotationType==='SignatureText'||currentSource.shapeAnnotationType==='SignatureImage')){this['offset']={x:args.source.wrapper.offsetX-args.source.wrapper.bounds.width/2,y:args.source.wrapper.offsetY-args.source.wrapper.bounds.height/2};}else{this['offset']={x:args.source.wrapper.offsetX,y:args.source.wrapper.offsetY};}this.startPosition=args.position;this.commandHandler.select([newObject.id]);}var currentSelctor=args.source.annotationSelectorSettings;_super.prototype.mouseMove.call(this,args,true,true);this.commandHandler.renderSelector(args.source.pageIndex,currentSelctor);return this.inAction;};StampTool.prototype.getTextWidth=function(text,font){var canvas=document.createElement('canvas');var context=canvas.getContext('2d');context.font=font||getComputedStyle(document.body).font;return context.measureText(text).width;};return StampTool;}(MoveTool);/**
 * Draws a node that is defined by the user
 *
 * @hidden
 */var InkDrawingTool=/** @class */function(_super){__extends$3(InkDrawingTool,_super);function InkDrawingTool(commandHandler,base,sourceObject){var _this=_super.call(this,commandHandler,base)||this;_this.sourceObject=sourceObject;return _this;}/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */InkDrawingTool.prototype.mouseDown=function(args){this.pdfViewerBase.disableTextSelectionMode();_super.prototype.mouseDown.call(this,args);this.inAction=true;// eslint-disable-next-line
var node={currentPosition:this.currentPosition,prevPosition:this.prevPosition};this.commandHandler.annotation.inkAnnotationModule.drawInkInCanvas(node,this.pdfViewerBase.activeElements.activePageID);};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns true or false.
     */InkDrawingTool.prototype.mouseMove=function(args){_super.prototype.mouseMove.call(this,args);if(this.inAction){// eslint-disable-next-line
var node={currentPosition:this.currentPosition,prevPosition:this.pdfViewerBase.prevPosition};this.commandHandler.annotation.inkAnnotationModule.drawInkInCanvas(node,this.pdfViewerBase.activeElements.activePageID);}return this.inAction;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns true.
     */InkDrawingTool.prototype.mouseUp=function(args){this.commandHandler.annotation.inkAnnotationModule.storePathData();return true;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */InkDrawingTool.prototype.mouseLeave=function(args){//this.mouseUp(args);
};/**
     * @private
     * @returns {void}
     */InkDrawingTool.prototype.endAction=function(){_super.prototype.endAction.call(this);};return InkDrawingTool;}(ToolBase);/**
 * Helps to edit the selected connectors
 *
 * @hidden
 */var ConnectTool=/** @class */function(_super){__extends$3(ConnectTool,_super);function ConnectTool(commandHandler,base,endPoint){var _this=_super.call(this,commandHandler,base,true)||this;_this.endPoint=endPoint;return _this;}/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */ConnectTool.prototype.mouseDown=function(args){this.inAction=true;this.undoElement=undefined;_super.prototype.mouseDown.call(this,args);var oldValue;var connectors;if(args.source&&args.source.annotations){// eslint-disable-next-line @typescript-eslint/no-unused-vars
oldValue={x:this.prevPosition.x,y:this.prevPosition.y};// eslint-disable-next-line @typescript-eslint/no-unused-vars
connectors=args.source.annotations[0];}this.initialPosition=args.position;this.prevSource=this.commandHandler.selectedItems.annotations[0];var nodeElement=cloneObject(args.source);this.redoElement={bounds:{x:nodeElement.wrapper.offsetX,y:nodeElement.wrapper.offsetY,width:nodeElement.wrapper.actualSize.width,height:nodeElement.wrapper.actualSize.height}// eslint-disable-next-line
};if(isLineShapes(nodeElement)){this.redoElement.vertexPoints=nodeElement.vertexPoints;this.redoElement.leaderHeight=nodeElement.leaderHeight;if(nodeElement.measureType==='Distance'||nodeElement.measureType==='Perimeter'||nodeElement.measureType==='Area'||nodeElement.measureType==='Volume'){this.redoElement.notes=nodeElement.notes;}}this.currentPosition=args.position;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */ConnectTool.prototype.mouseUp=function(args){if(this.commandHandler){var node=this.commandHandler.selectedItems.annotations[0];if(node){// eslint-disable-next-line
var annotationSettings=this.commandHandler.annotationModule.findAnnotationSettings(node);var annotationMaxHeight=0;var annotationMaxWidth=0;var annotationMinHeight=0;var annotationMinWidth=0;// eslint-disable-next-line max-len
if(annotationSettings.minWidth||annotationSettings.maxWidth||annotationSettings.minHeight||annotationSettings.maxHeight){annotationMaxHeight=annotationSettings.maxHeight?annotationSettings.maxHeight:2000;annotationMaxWidth=annotationSettings.maxWidth?annotationSettings.maxWidth:2000;annotationMinHeight=annotationSettings.minHeight?annotationSettings.minHeight:0;annotationMinWidth=annotationSettings.minWidth?annotationSettings.minWidth:0;}if(node.vertexPoints.length>3){// eslint-disable-next-line
var sizeObject=this.commandHandler.viewerBase.checkAnnotationWidth(node.vertexPoints);var width=sizeObject.width;var height=sizeObject.height;if(annotationMinHeight||annotationMinWidth||annotationMaxHeight||annotationMaxWidth){// eslint-disable-next-line max-len
if(height>annotationMinHeight&&height<annotationMaxHeight||width>annotationMinWidth&&width<annotationMaxWidth){// eslint-disable-next-line max-len
this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:node.vertexPoints,leaderHeight:node.leaderHeight});}}else{// eslint-disable-next-line max-len
this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:node.vertexPoints,leaderHeight:node.leaderHeight});}}else{if(annotationMinHeight||annotationMinWidth||annotationMaxHeight||annotationMaxWidth){if(node.shapeAnnotationType==='Line'||node.shapeAnnotationType==='Distance'||node.shapeAnnotationType==='LineWidthArrowHead'){var x=0;var y=0;if(node.vertexPoints[0].x>node.vertexPoints[1].x){x=node.vertexPoints[0].x-node.vertexPoints[1].x;}else{x=node.vertexPoints[1].x-node.vertexPoints[0].x;}if(node.vertexPoints[0].y>node.vertexPoints[1].y){y=node.vertexPoints[0].y-node.vertexPoints[1].y;}else{y=node.vertexPoints[1].y-node.vertexPoints[0].y;}var diff=x>y?x:y;if(diff<(annotationMaxHeight||annotationMaxWidth)&&diff>(annotationMinHeight||annotationMinWidth)){// eslint-disable-next-line max-len
this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:node.vertexPoints,leaderHeight:node.leaderHeight});}}else{// eslint-disable-next-line max-len
this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:node.vertexPoints,leaderHeight:node.leaderHeight});}}else{// eslint-disable-next-line max-len
this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:node.vertexPoints,leaderHeight:node.leaderHeight});}}var currentSelctor=args.source.annotationSelectorSettings;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.commandHandler.select([this.prevSource.id],currentSelctor);this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,currentSelctor);// eslint-disable-next-line
var newShapeElementObject={bounds:{x:args.source.wrapper.offsetX,y:args.source.wrapper.offsetY,width:args.source.wrapper.actualSize.width,height:args.source.wrapper.actualSize.height}};if(node.measureType==='Distance'||node.measureType==='Perimeter'||node.measureType==='Area'||node.measureType==='Volume'){this.commandHandler.annotation.updateCalibrateValues(this.commandHandler.selectedItems.annotations[0]);newShapeElementObject.notes=args.source.notes;}if(isLineShapes(args.source)){newShapeElementObject.vertexPoints=args.source.vertexPoints;newShapeElementObject.leaderHeight=args.source.leaderHeight;}// eslint-disable-next-line
this.commandHandler.annotation.addAction(this.pageIndex,null,this.prevSource,'Resize','',this.redoElement,newShapeElementObject);}}_super.prototype.mouseUp.call(this,args);};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns true or false.
     */ConnectTool.prototype.mouseMove=function(args){_super.prototype.mouseMove.call(this,args);var connector;this.currentPosition=args.position;if(this.currentPosition&&this.prevPosition){var diffX=this.currentPosition.x-this.prevPosition.x;var diffY=this.currentPosition.y-this.prevPosition.y;var newValue=void 0;var oldValue=void 0;if(args.source&&args.source.annotations){// eslint-disable-next-line @typescript-eslint/no-unused-vars
newValue={x:this.currentPosition.x,y:this.currentPosition.y};// eslint-disable-next-line @typescript-eslint/no-unused-vars
oldValue={x:this.prevPosition.x,y:this.prevPosition.y};// eslint-disable-next-line @typescript-eslint/no-unused-vars
connector=args.source.annotations[0];}if(this.inAction&&this.endPoint!==undefined&&diffX!==0||diffY!==0){if(!this.helper){// eslint-disable-next-line
var cloneShapebject=cloneObject(this.commandHandler.selectedItems.annotations[0]);cloneShapebject.id='diagram_helper';cloneShapebject.strokeColor='red';cloneShapebject.borderDashArray='5,5';cloneShapebject.fillColor='transparent';cloneShapebject.thickness=2;cloneShapebject.opacity=1;if(cloneShapebject.enableShapeLabel===true){cloneShapebject.labelContent='';}this.helper=cloneShapebject=this.commandHandler.add(cloneShapebject);this.commandHandler.selectedItems.annotations=[cloneShapebject];}var currentSelctor=args.source.annotationSelectorSettings;this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,this.helper,this.currentPosition,this.selectedSegment,args.target,null,currentSelctor);this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,currentSelctor);}}this.prevPosition=this.currentPosition;return!this.blocked;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */ConnectTool.prototype.mouseLeave=function(args){this.mouseUp(args);};/**
     * @private
     * @returns {void}
     */ConnectTool.prototype.endAction=function(){_super.prototype.endAction.call(this);this.prevPosition=null;this.endPoint=null;};return ConnectTool;}(ToolBase);/**
 * Scales the selected objects
 *
 * @hidden
 */var ResizeTool=/** @class */function(_super){__extends$3(ResizeTool,_super);function ResizeTool(commandHandler,base,corner){var _this=_super.call(this,commandHandler,base,true)||this;/**   @private  */_this.initialBounds=new sf.drawings.Rect();_this.corner=corner;return _this;}/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void} - Returns true or false.
     */ResizeTool.prototype.mouseDown=function(args){_super.prototype.mouseDown.call(this,args);this.initialBounds.x=args.source.wrapper.offsetX;this.initialBounds.y=args.source.wrapper.offsetY;this.initialBounds.height=args.source.wrapper.actualSize.height;this.initialBounds.width=args.source.wrapper.actualSize.width;this.initialPosition=args.position;var node=cloneObject(args.source);this.redoElement={bounds:{x:node.wrapper.offsetX,y:node.wrapper.offsetY,width:node.wrapper.actualSize.width,height:node.wrapper.actualSize.height}// eslint-disable-next-line
};if(isLineShapes(node)){this.redoElement.vertexPoints=node.vertexPoints;this.redoElement.leaderHeight=node.leaderHeight;}if(node.measureType==='Radius'){this.redoElement.notes=node.notes;}// eslint-disable-next-line max-len
this.prevSource=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0]:this.commandHandler.selectedItems.formFields[0];};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @param {boolean} isPreventHistory - Specified the prevent history value.
     * @returns {boolean} - Returns true or false.
     */ResizeTool.prototype.mouseUp=function(args,isPreventHistory){var object=args.source;var oldObject=cloneObject(args.source);if(this.commandHandler&&this.prevSource){this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.commandHandler.viewerBase.isAnnotationSelect=true;this.commandHandler.viewerBase.isFormFieldSelect=true;this.commandHandler.select([this.prevSource.id],this.prevSource.annotationSelectorSettings);// eslint-disable-next-line max-len
var deltaValues=this.updateSize(this.prevSource,this.currentPosition,this.initialPosition,this.corner,this.initialBounds,null,true);this.blocked=this.scaleObjects(deltaValues.width,deltaValues.height,this.corner,this.currentPosition,this.initialPosition,this.prevSource);if(this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations[0]&&this.commandHandler.selectedItems.annotations[0].shapeAnnotationType==='Stamp'){if(this.commandHandler.stampSettings.minHeight||this.commandHandler.stampSettings.minWidth){this.commandHandler.select([this.prevSource.id],this.prevSource.annotationSelectorSettings);}}if(this.commandHandler.selectedItems.formFields.length>0&&(this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType==='Textbox'||this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType==='Checkbox'||this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType==='RadioButton'||this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType==='InitialField'||this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType==='SignatureField'||this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType==='DropdownList'||this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType==='ListBox'||this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType==='PasswordField')){this.commandHandler.formDesignerModule.updateHTMLElement(this.commandHandler.selectedItems.formFields[0]);}this.commandHandler.renderSelector(this.prevPageId,this.prevSource.annotationSelectorSettings);if(this.commandHandler.annotation&&args.source.wrapper){// eslint-disable-next-line
var newObject={bounds:{x:args.source.wrapper.offsetX,y:args.source.wrapper.offsetY,width:args.source.wrapper.actualSize.width,height:args.source.wrapper.actualSize.height}};if(isLineShapes(args.source)){newObject.vertexPoints=args.source.vertexPoints;newObject.leaderHeight=args.source.leaderHeight;}if(this.prevSource.measureType==='Radius'){newObject.notes=args.source.notes;this.commandHandler.annotation.updateCalibrateValues(this.prevSource);}if(this.prevSource.shapeAnnotationType==='SignatureText'){var boundsRatio=newObject.bounds.width/oldObject.width;newObject.fontSize=this.prevSource.wrapper.children[1].style.fontSize*boundsRatio;if(args.target!=null){args.target.fontSize=newObject.fontSize;// eslint-disable-next-line
args.target.wrapper.children[1].style.fontSize=newObject.fontSize;args.target.wrapper.children[1].horizontalAlignment='Center';args.target.wrapper.children[1].verticalAlignment='Center';args.target.wrapper.children[1].setOffsetWithRespectToBounds(0,0,'Absolute');// eslint-disable-next-line
this.commandHandler.selectedItems.annotations[0].wrapper.children[1].style.fontSize=newObject.fontSize;this.commandHandler.selectedItems.annotations[0].wrapper.children[1].horizontalAlignment='Center';this.commandHandler.selectedItems.annotations[0].wrapper.children[1].verticalAlignment='Center';this.commandHandler.selectedItems.annotations[0].wrapper.children[1].setOffsetWithRespectToBounds(0,0,'Absolute');this.commandHandler.selectedItems.annotations[0].fontSize=newObject.fontSize;}}if(this.prevSource.shapeAnnotationType==='SignatureText'&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0){// eslint-disable-next-line max-len
this.commandHandler.nodePropertyChange(this.commandHandler.selectedItems.annotations[0],{fontSize:newObject.fontSize});}// eslint-disable-next-line
this.commandHandler.annotation.addAction(this.pageIndex,null,this.prevSource,'Resize','',this.redoElement,newObject);}if(args.target&&args.target.formFieldAnnotationType){var node=args.target;// eslint-disable-next-line
var field={value:node.value,fontFamily:node.fontFamily,fontSize:node.fontSize,fontStyle:node.fontStyle,// eslint-disable-next-line
color:node.color,backgroundColor:node.backgroundColor,alignment:node.alignment,isReadonly:node.isReadonly,visibility:node.visibility,// eslint-disable-next-line
maxLength:node.maxLength,isRequired:node.isRequired,isPrint:node.isPrint,rotation:node.rotateAngle,tooltip:node.tooltip,// eslint-disable-next-line
options:node.options,isChecked:node.isChecked,isSelected:node.isSelected};// eslint-disable-next-line max-len
var currentPosition={X:args.source.wrapper.offsetX,Y:args.source.wrapper.offsetY,Width:args.source.wrapper.actualSize.width,Height:args.source.wrapper.actualSize.height};// eslint-disable-next-line max-len
var previousPosition={X:this.initialBounds.x,Y:this.initialBounds.y,Width:this.initialBounds.width,Height:this.initialBounds.height};this.commandHandler.fireFormFieldResizeEvent('formFieldResize',field,node.pageIndex,previousPosition,currentPosition);}if(this.commandHandler.annotation&&this.commandHandler.annotation.stampAnnotationModule){this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(args.source,this.prevSource.id,'Resize');}}_super.prototype.mouseUp.call(this,args);return!this.blocked;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns true or false.
     */ResizeTool.prototype.mouseMove=function(args){_super.prototype.mouseMove.call(this,args);var object=args.source;this.currentPosition=args.position;var x=this.currentPosition.x-this.startPosition.x;var y=this.currentPosition.y-this.startPosition.y;x=x/this.commandHandler.viewerBase.getZoomFactor();y=y/this.commandHandler.viewerBase.getZoomFactor();// eslint-disable-next-line
var annotationElement=args.source;// eslint-disable-next-line
var size=this.getPoints(x,y);var width=annotationElement.width+size.x;var height=annotationElement.height+size.y;// eslint-disable-next-line
var obj=object;if(object&&object.annotations){// eslint-disable-next-line
obj=object.annotations[0];}// eslint-disable-next-line
var annotationSettings=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(obj):{};var annotationMaxHeight=0;var annotationMaxWidth=0;var annotationMinHeight=0;var annotationMinWidth=0;if(annotationSettings.minWidth||annotationSettings.maxWidth||annotationSettings.minHeight||annotationSettings.maxHeight){annotationMaxHeight=annotationSettings.maxHeight?annotationSettings.maxHeight:2000;annotationMaxWidth=annotationSettings.maxWidth?annotationSettings.maxWidth:2000;annotationMinHeight=annotationSettings.minHeight?annotationSettings.minHeight:0;annotationMinWidth=annotationSettings.minWidth?annotationSettings.minWidth:0;}if(annotationMinHeight||annotationMinWidth||annotationMaxHeight||annotationMaxWidth){// eslint-disable-next-line max-len
if(height>=annotationMinHeight&&height<=annotationMaxHeight&&width>=annotationMinWidth&&width<=annotationMaxWidth){// eslint-disable-next-line
x=x;// eslint-disable-next-line
y=y;}else{if(height<annotationMinHeight||height>annotationMaxHeight){if(height<annotationMinHeight){y=annotationMinHeight-annotationElement.height;}else{y=annotationMaxHeight-annotationElement.height;}}if(width<annotationMinWidth||width>annotationMaxWidth){if(width<annotationMinWidth){x=annotationMinWidth-annotationElement.width;}else{x=annotationMaxWidth-annotationElement.width;}}}}var changes={x:x,y:y};if(this.currentElement.wrapper){changes=sf.drawings.rotatePoint(-this.currentElement.wrapper.rotateAngle,undefined,undefined,changes);}changes=this.getChanges(changes);if(!this.helper){// eslint-disable-next-line
var cobject=this.commandHandler.selectedItems.annotations.length>0?cloneObject(this.commandHandler.selectedItems.annotations[0]):cloneObject(this.commandHandler.selectedItems.formFields[0]);cobject.id='diagram_helper';if(cobject.shapeAnnotationType==='Stamp'){cobject.strokeColor='';cobject.bounds.height=obj.wrapper.bounds.height;cobject.bounds.width=obj.wrapper.bounds.width;cobject.bounds.x=obj.wrapper.bounds.x;cobject.bounds.y=obj.wrapper.bounds.y;cobject.borderDashArray='';cobject.fillColor='transparent';cobject.stampFillColor='transparent';cobject.data='';}else if(cobject.shapeAnnotationType==='FreeText'){cobject.strokeColor='blue';cobject.fillColor='transparent';cobject.thickness=1;cobject.opacity=1;cobject.dynamicText='';}else{// eslint-disable-next-line max-len
cobject.bounds=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].wrapper.bounds:this.commandHandler.selectedItems.formFields[0].wrapper.bounds;cobject.strokeColor='red';cobject.borderDashArray='5,5';cobject.fillColor='transparent';cobject.thickness=2;cobject.opacity=1;}if(cobject.enableShapeLabel===true){cobject.labelContent='';}if(cobject.shapeAnnotationType==='SignatureText'){cobject.fillColor='transparent';cobject.thickness=1;cobject.opacity=1;cobject.data='';}this.helper=cobject=this.commandHandler.add(cobject);if(this.commandHandler.selectedItems.annotations.length>0){this.commandHandler.selectedItems.annotations=[cobject];}else{this.commandHandler.selectedItems.formFields=[cobject];}}var deltaValues=this.updateSize(this.helper,this.startPosition,this.currentPosition,this.corner,this.initialBounds);// eslint-disable-next-line max-len
this.blocked=!this.scaleObjects(deltaValues.width,deltaValues.height,this.corner,this.startPosition,this.currentPosition,this.helper);this.prevPosition=this.currentPosition;return!this.blocked;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */ResizeTool.prototype.mouseLeave=function(args){this.mouseUp(args);};ResizeTool.prototype.getTooltipContent=function(pdfAnnotationBaseModel){return'W:'+Math.round(pdfAnnotationBaseModel.wrapper.bounds.width)+' '+'H:'+Math.round(pdfAnnotationBaseModel.wrapper.bounds.height);};ResizeTool.prototype.getChanges=function(change){switch(this.corner){case'ResizeEast':return{x:change.x,y:0};case'ResizeSouthEast':return change;case'ResizeSouth':return{x:0,y:change.y};case'ResizeNorth':return{x:0,y:-change.y};case'ResizeNorthEast':return{x:change.x,y:-change.y};case'ResizeNorthWest':return{x:-change.x,y:-change.y};case'ResizeWest':return{x:-change.x,y:0};case'ResizeSouthWest':return{x:-change.x,y:change.y};}return change;};ResizeTool.prototype.getPoints=function(x,y){switch(this.corner){case'ResizeEast':return{x:x,y:0};case'ResizeSouthEast':return{x:x,y:y};case'ResizeSouth':return{x:0,y:y};case'ResizeNorth':return{x:0,y:-y};case'ResizeNorthEast':return{x:x,y:-y};case'ResizeNorthWest':return{x:-x,y:-y};case'ResizeWest':return{x:-x,y:0};case'ResizeSouthWest':return{x:-x,y:y};}return{x:x,y:y};};/**
     * Updates the size with delta width and delta height using scaling.
     * Aspect ratio used to resize the width or height based on resizing the height or width.
     *
     * @param {number} deltaWidth - Specified the delta width.
     * @param {number} deltaHeight - Specified the delta height.
     * @param {string} corner - Specified the corner value.
     * @param {PointModel} startPoint - Specified the start point of the annotation.
     * @param {PointModel} endPoint - Specified the end point of the annotation.
     * @param {SelectorModel | PdfAnnotationBaseModel} source - Specified the annotation object.
     * @returns {boolean} - Returns true or false.
     */ResizeTool.prototype.scaleObjects=function(deltaWidth,deltaHeight,corner,startPoint,endPoint,source){// eslint-disable-next-line
var annotationSettings=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(source):{};var annotationMaxHeight=0;var annotationMaxWidth=0;var annotationMinHeight=0;var annotationMinWidth=0;var x=this.currentPosition.x-this.startPosition.x;var y=this.currentPosition.y-this.startPosition.y;x=x/this.commandHandler.viewerBase.getZoomFactor();y=y/this.commandHandler.viewerBase.getZoomFactor();// eslint-disable-next-line
var annotationElement=source;// eslint-disable-next-line
var size=this.getPoints(x,y);var width=annotationElement.bounds.width+size.x;var height=annotationElement.bounds.height+size.y;if(annotationSettings.minWidth||annotationSettings.maxWidth||annotationSettings.minHeight||annotationSettings.maxHeight){annotationMaxHeight=annotationSettings.maxHeight?annotationSettings.maxHeight:2000;annotationMaxWidth=annotationSettings.maxWidth?annotationSettings.maxWidth:2000;annotationMinHeight=annotationSettings.minHeight?annotationSettings.minHeight:0;annotationMinWidth=annotationSettings.minWidth?annotationSettings.minWidth:0;}if(source instanceof Selector&&source.annotations.length===1&&(source.annotations[0].shapeAnnotationType==='Perimeter'||source.annotations[0].shapeAnnotationType==='Radius'||source.shapeAnnotationType==='Stamp')){if(!(deltaHeight===1&&deltaWidth===1)){deltaHeight=deltaWidth=Math.max(deltaHeight===1?0:deltaHeight,deltaWidth===1?0:deltaWidth);}else if(startPoint!==endPoint){deltaHeight=deltaWidth=Math.max(deltaHeight,deltaWidth);}else{deltaHeight=deltaWidth=0;}}else if(source.shapeAnnotationType==='Image'||source.shapeAnnotationType==='HandWrittenSignature'||source.shapeAnnotationType==='SignatureText'||source.shapeAnnotationType==='SignatureImage'){if(!(deltaHeight===1&&deltaWidth===1)){if(width>=annotationMaxWidth&&height<annotationMaxHeight){deltaHeight=Math.max(deltaHeight,deltaWidth);}if(height>=annotationMaxHeight&&width<annotationMaxWidth){deltaWidth=Math.max(deltaHeight,deltaWidth);}if(width<annotationMaxWidth&&height<annotationMaxHeight){deltaHeight=deltaWidth=Math.max(deltaHeight,deltaWidth);}}}else{if(source.shapeAnnotationType==='Perimeter'||source.shapeAnnotationType==='Radius'||source.shapeAnnotationType==='Stamp'){if(source.shapeAnnotationType==='Stamp'){if(!annotationMaxHeight&&!deltaHeight){deltaHeight=Math.max(deltaHeight===1?0:deltaHeight);}if(!annotationMaxWidth&&!deltaWidth){deltaWidth=Math.max(deltaWidth===1?0:deltaWidth);}}else{if(!annotationMaxHeight||!annotationMaxWidth){if(!(deltaHeight===1&&deltaWidth===1)){deltaHeight=deltaWidth=Math.max(deltaHeight===1?0:deltaHeight,deltaWidth===1?0:deltaWidth);}}}}}this.blocked=this.commandHandler.scaleSelectedItems(deltaWidth,deltaHeight,this.getPivot(this.corner));return this.blocked;};return ResizeTool;}(ToolBase);/**
 * Draws a node that is defined by the user
 *
 * @hidden
 */var NodeDrawingTool=/** @class */function(_super){__extends$3(NodeDrawingTool,_super);function NodeDrawingTool(commandHandler,base,sourceObject){var _this=_super.call(this,commandHandler,base)||this;_this.sourceObject=sourceObject;return _this;}/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */NodeDrawingTool.prototype.mouseDown=function(args){_super.prototype.mouseDown.call(this,args);this.inAction=true;var node={bounds:{x:100,y:300,width:100,height:100},pageIndex:0,strokeColor:'red',thickness:3};node.id=sf.drawings.randomId();this.sourceObject.pageIndex=node.pageIndex=this.pdfViewerBase.activeElements.activePageID||0;this.sourceObject.enableShapeLabel=this.commandHandler.enableShapeLabel;this.pdfViewerBase.updateFreeTextProperties(this.sourceObject);this.isFormDesign=false;// eslint-disable-next-line
var formFieldElement=document.getElementById('FormField_helper_html_element');if(formFieldElement){formFieldElement.remove();}// eslint-disable-next-line
this.commandHandler.lastAnnotation=this.commandHandler.drawingObject=this.drawingObject=this.commandHandler.add(this.sourceObject||node);if(this.drawingObject.formFieldAnnotationType==='Textbox'||this.drawingObject.formFieldAnnotationType==='SignatureField'||this.drawingObject.formFieldAnnotationType==='InitialField'||this.drawingObject.formFieldAnnotationType==='Checkbox'||this.drawingObject.formFieldAnnotationType==='ListBox'||this.drawingObject.formFieldAnnotationType==='RadioButton'||this.drawingObject.formFieldAnnotationType==='DropdownList'||this.drawingObject.formFieldAnnotationType==='PasswordField'){this.inAction=false;// eslint-disable-next-line
this.drawingObject.pageNumber=this.pdfViewerBase.getActivePage(true);// eslint-disable-next-line
var bounds=this.commandHandler.formDesignerModule.updateFormFieldInitialSize(this.drawingObject.wrapper.children[0],this.drawingObject.formFieldAnnotationType);var pageWidth=this.pdfViewerBase.pageContainer.firstElementChild.clientWidth-bounds.width;var pageHeight=this.pdfViewerBase.pageContainer.firstElementChild.clientHeight-bounds.height;// eslint-disable-next-line
var left=this.pdfViewerBase.pageContainer.firstElementChild.offsetLeft;var offsetX=void 0;// eslint-disable-next-line
if(this.currentPosition.y>=pageHeight&&event.target&&event.target.parentElement&&event.target.parentElement.classList.contains('foreign-object')){// eslint-disable-next-line
var targetParentRect=event.path[3].getBoundingClientRect();// eslint-disable-next-line
offsetX=event.clientX-targetParentRect.left;}else{offsetX=this.currentPosition.x-left;}// eslint-disable-next-line
var rect=void 0;if(this.currentPosition.x>=pageWidth&&this.currentPosition.y>=pageHeight){// eslint-disable-next-line max-len
rect={x:pageWidth,y:pageHeight,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height};}else if(this.currentPosition.x>=pageWidth){// eslint-disable-next-line max-len
rect={x:pageWidth,y:this.currentPosition.y,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height};}else if(this.currentPosition.y>=pageHeight){// eslint-disable-next-line max-len
rect={x:offsetX,y:pageHeight,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height};}else{// eslint-disable-next-line max-len
rect={x:this.currentPosition.x,y:this.currentPosition.y,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height};}this.updateNodeDimension(this.drawingObject,rect);// eslint-disable-next-line max-len
this.commandHandler.formDesignerModule.drawHTMLContent(this.drawingObject.formFieldAnnotationType,this.drawingObject.wrapper.children[0],this.drawingObject,this.drawingObject.pageIndex,this.commandHandler);this.commandHandler.select([this.commandHandler.drawingObject.id],this.commandHandler.annotationSelectorSettings);if(this.commandHandler.annotation){this.commandHandler.annotation.addAction(this.pdfViewerBase.getActivePage(true),null,this.drawingObject,'Addition','',this.drawingObject,this.drawingObject);}this.endAction();this.pdfViewerBase.tool=null;this.pdfViewerBase.action='Select';this.drawingObject=null;this.pdfViewerBase.isMouseDown=false;this.pdfViewerBase.pdfViewer.drawingObject=null;this.isFormDesign=true;}};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns true or false.
     */NodeDrawingTool.prototype.mouseMove=function(args){_super.prototype.mouseMove.call(this,args);if(this.inAction&&sf.drawings.Point.equals(this.currentPosition,this.prevPosition)===false){this.dragging=true;var rect=sf.drawings.Rect.toBounds([this.prevPosition,this.currentPosition]);this.updateNodeDimension(this.drawingObject,rect);if(this.drawingObject.shapeAnnotationType==='Radius'){this.updateRadiusLinePosition(this.drawingObject.wrapper.children[1],this.drawingObject);}}return true;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */NodeDrawingTool.prototype.mouseUp=function(args){if(this.drawingObject&&this.dragging){this.commandHandler.blazorAction|=PdfViewerBlazorAction.AnnotationAdding;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.commandHandler.select([this.drawingObject.id],this.commandHandler.annotationSelectorSettings);this.commandHandler.annotation.updateCalibrateValues(this.drawingObject,true);if(this.commandHandler&&!this.isFormDesign){// eslint-disable-next-line
this.commandHandler.annotation.addAction(this.pageIndex,null,this.drawingObject,'Addition','',this.drawingObject,this.drawingObject);}this.drawingObject=null;this.dragging=false;_super.prototype.mouseUp.call(this,args);this.inAction=false;}else{this.drawingObject=null;_super.prototype.mouseUp.call(this,args);}};/**
     * @private
     * @returns {void}
     */NodeDrawingTool.prototype.endAction=function(){_super.prototype.endAction.call(this);};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
     * @param {Rect} rect - Specified the annotation rect element.
     * @returns {void}
     */NodeDrawingTool.prototype.updateNodeDimension=function(obj,rect){var zoom=this.commandHandler.viewerBase.getZoomFactor();obj.bounds.x=rect.x/zoom+rect.width/zoom;obj.bounds.y=rect.y/zoom+rect.height/zoom;obj.bounds.width=rect.width/zoom;obj.bounds.height=rect.height/zoom;// eslint-disable-next-line
var annotationSettings=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(obj):{};var annotationMaxHeight=0;var annotationMaxWidth=0;if(annotationSettings.maxWidth||annotationSettings.maxHeight){annotationMaxHeight=annotationSettings.maxHeight?annotationSettings.maxHeight:2000;annotationMaxWidth=annotationSettings.maxWidth?annotationSettings.maxWidth:2000;if(obj.bounds.width>annotationMaxWidth){obj.bounds.width=annotationMaxWidth;}if(obj.bounds.height>annotationMaxHeight){obj.bounds.height=annotationMaxHeight;}if(obj.bounds.height<=annotationMaxHeight&&obj.bounds.width<=annotationMaxWidth){this.commandHandler.nodePropertyChange(obj,{bounds:obj.bounds});}}else{this.commandHandler.nodePropertyChange(obj,{bounds:obj.bounds});}};/**
     * @private
     * @param {DrawingElement} obj - Specified the drawing element.
     * @param {PdfAnnotationBaseModel} node - Specified the annotation object.
     * @returns {void}
     */NodeDrawingTool.prototype.updateRadiusLinePosition=function(obj,node){var trasPoint={x:node.bounds.x+node.bounds.width/4,y:node.bounds.y};var center={x:node.bounds.x+node.bounds.width/2,y:node.bounds.y+node.bounds.height/2};var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,node.rotateAngle,center.x,center.y);var rotatedPoint=sf.drawings.transformPointByMatrix(matrix,trasPoint);var newPoint1={x:rotatedPoint.x,y:rotatedPoint.y};obj.offsetX=newPoint1.x;obj.offsetY=newPoint1.y;obj.width=node.bounds.width/2;// eslint-disable-next-line
var annotationSettings=this.commandHandler.annotationModule.findAnnotationSettings(node);var annotationMaxWidth=0;if(annotationSettings.maxWidth){annotationMaxWidth=annotationSettings.maxWidth?annotationSettings.maxWidth:2000;if(node.bounds.width>annotationMaxWidth){node.bounds.width=annotationMaxWidth;obj.width=node.bounds.width/2;}}this.commandHandler.renderDrawing(undefined,node.pageIndex);};return NodeDrawingTool;}(ToolBase);/**
 * Draws a Polygon shape node dynamically using polygon Tool
 *
 * @hidden
 */var PolygonDrawingTool=/** @class */function(_super){__extends$3(PolygonDrawingTool,_super);function PolygonDrawingTool(commandHandler,base,action){var _this=_super.call(this,commandHandler,base)||this;_this.action=action;return _this;}/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */PolygonDrawingTool.prototype.mouseDown=function(args){_super.prototype.mouseDown.call(this,args);this.inAction=true;if(!this.drawingObject){this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var nodeAnnotElement={bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},// eslint-disable-next-line max-len
vertexPoints:[{x:this.startPoint.x/this.pdfViewerBase.getZoomFactor(),y:this.startPoint.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],shapeAnnotationType:'Line',fillColor:this.commandHandler.drawingObject.fillColor,strokeColor:this.commandHandler.drawingObject.strokeColor,pageIndex:this.pdfViewerBase.activeElements.activePageID,// eslint-disable-next-line max-len
notes:this.commandHandler.drawingObject.notes,thickness:this.commandHandler.drawingObject.thickness,author:this.commandHandler.drawingObject.author,subject:this.commandHandler.drawingObject.subject,borderDashArray:this.commandHandler.drawingObject.borderDashArray,modifiedDate:this.commandHandler.drawingObject.modifiedDate,borderStyle:this.commandHandler.drawingObject.borderStyle,// eslint-disable-next-line max-len
measureType:this.commandHandler.drawingObject.measureType,enableShapeLabel:this.commandHandler.enableShapeLabel,opacity:this.commandHandler.drawingObject.opacity};this.pdfViewerBase.updateFreeTextProperties(nodeAnnotElement);// eslint-disable-next-line
this.drawingObject=this.commandHandler.add(nodeAnnotElement);}else{var pt=void 0;var obj=this.drawingObject;pt=obj.vertexPoints[obj.vertexPoints.length-1];pt={x:pt.x,y:pt.y};var lastPoint=this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1];if(!(lastPoint.x===pt.x&&lastPoint.x===pt.y)){this.drawingObject.vertexPoints.push(pt);}this.commandHandler.nodePropertyChange(obj,{vertexPoints:obj.vertexPoints});}};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns true or false.
     */PolygonDrawingTool.prototype.mouseMove=function(args){_super.prototype.mouseMove.call(this,args);if(this.inAction&&sf.drawings.Point.equals(this.currentPosition,this.prevPosition)===false){this.dragging=true;var obj=this.drawingObject;if(this.drawingObject&&this.currentPosition){obj.vertexPoints[obj.vertexPoints.length-1].x=this.currentPosition.x/this.pdfViewerBase.getZoomFactor();obj.vertexPoints[obj.vertexPoints.length-1].y=this.currentPosition.y/this.pdfViewerBase.getZoomFactor();this.commandHandler.nodePropertyChange(obj,{vertexPoints:obj.vertexPoints});}if(obj.measureType==='Perimeter'){updatePerimeterLabel(obj,obj.vertexPoints,this.commandHandler.annotation.measureAnnotationModule);}}return true;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @param {boolean} isDoubleClineck - Specified the double click event or not.
     * @param {boolean} isMouseLeave - Specified the mouse leave event or not.
     * @returns {void}
     */PolygonDrawingTool.prototype.mouseUp=function(args,isDoubleClineck,isMouseLeave){_super.prototype.mouseMove.call(this,args);// eslint-disable-next-line
var currentSelector;if(args.source&&args.annotationSelectorSettings!==null){currentSelector=args.source.annotationSelectorSettings;}if(this.drawingObject){// eslint-disable-next-line max-len
var bounds=new sf.drawings.Rect(this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1].x-20,this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1].y-20,40,40);var point={x:this.drawingObject.vertexPoints[0].x,y:this.drawingObject.vertexPoints[0].y};if((bounds.containsPoint(point)||isDoubleClineck)&&this.dragging){if(this.inAction){this.inAction=false;if(this.drawingObject){if(!isMouseLeave){if(this.drawingObject.vertexPoints.length>2){this.drawingObject.vertexPoints.splice(this.drawingObject.vertexPoints.length-1,1);}}if(this.action==='Polygon'){if(!isMouseLeave){// eslint-disable-next-line max-len
this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1]=this.drawingObject.vertexPoints[0];}else{// eslint-disable-next-line max-len
this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length]=this.drawingObject.vertexPoints[0];}this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints});var cobject=cloneObject(this.drawingObject);cobject.shapeAnnotationType='Polygon';cobject.bounds.width=cobject.wrapper.actualSize.width;cobject.bounds.height=cobject.wrapper.actualSize.height;cobject.bounds.x=this.drawingObject.wrapper.bounds.x;cobject.bounds.y=this.drawingObject.wrapper.bounds.y;this.commandHandler.add(cobject);this.commandHandler.remove(this.drawingObject);this.commandHandler.select([cobject.id],currentSelector);var drawingObject=this.commandHandler.selectedItems.annotations[0];if(drawingObject){if(this.commandHandler.enableShapeAnnotation&&(sf.base.isNullOrUndefined(drawingObject.measureType)||drawingObject.measureType==='')){// eslint-disable-next-line max-len
this.commandHandler.annotation.shapeAnnotationModule.renderShapeAnnotations(drawingObject,drawingObject.pageIndex);}if(this.commandHandler.enableMeasureAnnotation&&(drawingObject.measureType==='Area'||drawingObject.measureType==='Volume')){if(drawingObject.measureType==='Area'){// eslint-disable-next-line max-len
drawingObject.notes=this.commandHandler.annotation.measureAnnotationModule.calculateArea(drawingObject.vertexPoints);// eslint-disable-next-line max-len
this.commandHandler.annotation.stickyNotesAnnotationModule.addTextToComments(drawingObject.annotName,drawingObject.notes);}else if(drawingObject.measureType==='Volume'){// eslint-disable-next-line max-len
drawingObject.notes=this.commandHandler.annotation.measureAnnotationModule.calculateVolume(drawingObject.vertexPoints);// eslint-disable-next-line max-len
this.commandHandler.annotation.stickyNotesAnnotationModule.addTextToComments(drawingObject.annotName,drawingObject.notes);}if(drawingObject.enableShapeLabel){drawingObject.labelContent=drawingObject.notes;// eslint-disable-next-line max-len
this.commandHandler.nodePropertyChange(drawingObject,{vertexPoints:drawingObject.vertexPoints,notes:drawingObject.notes});}// eslint-disable-next-line max-len
this.commandHandler.annotation.measureAnnotationModule.renderMeasureShapeAnnotations(drawingObject,drawingObject.pageIndex);}}}else{if(!isMouseLeave){if(isDoubleClineck){this.drawingObject.vertexPoints.splice(this.drawingObject.vertexPoints.length-1,1);}}this.commandHandler.nodePropertyChange(this.drawingObject,{// eslint-disable-next-line max-len
vertexPoints:this.drawingObject.vertexPoints,sourceDecoraterShapes:this.commandHandler.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.commandHandler.drawingObject.taregetDecoraterShapes});this.commandHandler.select([this.drawingObject.id],currentSelector);if(this.commandHandler.enableMeasureAnnotation&&this.drawingObject.measureType==='Perimeter'){this.commandHandler.renderDrawing(null,this.drawingObject.pageIndex);// eslint-disable-next-line max-len
this.drawingObject.notes=this.commandHandler.annotation.measureAnnotationModule.calculatePerimeter(this.drawingObject);if(this.drawingObject.enableShapeLabel){this.drawingObject.labelContent=this.drawingObject.notes;// eslint-disable-next-line max-len
this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints,notes:this.drawingObject.notes});}// eslint-disable-next-line max-len
this.commandHandler.annotation.stickyNotesAnnotationModule.addTextToComments(this.drawingObject.annotName,this.drawingObject.notes);// eslint-disable-next-line max-len
this.commandHandler.annotation.measureAnnotationModule.renderMeasureShapeAnnotations(this.drawingObject,this.drawingObject.pageIndex);}}var annotationObject=this.commandHandler.selectedItems.annotations[0];// eslint-disable-next-line
this.commandHandler.annotation.addAction(this.pageIndex,null,annotationObject,'Addition','',annotationObject,annotationObject);this.drawingObject=null;}}this.endAction();}else if(this.inAction&&!this.dragging){this.commandHandler.remove(this.drawingObject);}}};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */PolygonDrawingTool.prototype.mouseLeave=function(args){this.mouseUp(args,true,true);};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */PolygonDrawingTool.prototype.mouseWheel=function(args){_super.prototype.mouseWheel.call(this,args);this.mouseMove(args);};/**
     * @private
     * @returns {void}
     */PolygonDrawingTool.prototype.endAction=function(){this.inAction=false;this.drawingObject=null;this.commandHandler.tool='';};return PolygonDrawingTool;}(ToolBase);/**
 * Helps to edit the selected connectors
 *
 * @hidden
 */var LineTool=/** @class */function(_super){__extends$3(LineTool,_super);function LineTool(commandHandler,base,endPoint,drawingObject){var _this=_super.call(this,commandHandler,base,true)||this;_this.endPoint=endPoint;_this.drawingObject=drawingObject;return _this;}/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */LineTool.prototype.mouseDown=function(args){this.inAction=true;this.undoElement=undefined;_super.prototype.mouseDown.call(this,args);var oldPointValue;var connectorsShape;if(args.source&&args.source.annotations){oldPointValue={x:this.prevPosition.x,y:this.prevPosition.y};connectorsShape=this.drawingObject;}this.initialPosition=args.position;this.prevSource=this.drawingObject;this.currentPosition=args.position;if(!this.drawingObject){var measureModule=this.commandHandler.annotation.measureAnnotationModule;var annotationNode={// eslint-disable-next-line max-len
vertexPoints:[{x:this.startPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.startPosition.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},sourceDecoraterShapes:this.commandHandler.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.commandHandler.drawingObject.taregetDecoraterShapes,measureType:'Distance',// eslint-disable-next-line max-len
fillColor:this.commandHandler.drawingObject.fillColor,notes:this.commandHandler.drawingObject.notes,strokeColor:this.commandHandler.drawingObject.strokeColor,// eslint-disable-next-line max-len
opacity:this.commandHandler.drawingObject.opacity,thickness:this.commandHandler.drawingObject.thickness,borderDashArray:this.commandHandler.drawingObject.borderDashArray,shapeAnnotationType:'Distance',pageIndex:this.pdfViewerBase.activeElements.activePageID,author:this.commandHandler.drawingObject.author,subject:this.commandHandler.drawingObject.subject,enableShapeLabel:this.commandHandler.enableShapeLabel,leaderHeight:measureModule.leaderLength};this.pdfViewerBase.updateFreeTextProperties(annotationNode);// eslint-disable-next-line
this.drawingObject=this.commandHandler.add(annotationNode);}else if(!this.dragging){var nodeAnnot={bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},// eslint-disable-next-line max-len
vertexPoints:[{x:this.startPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.startPosition.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],// eslint-disable-next-line max-len
shapeAnnotationType:this.drawingObject.shapeAnnotationType,sourceDecoraterShapes:this.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.drawingObject.taregetDecoraterShapes,fillColor:this.drawingObject.fillColor,strokeColor:this.drawingObject.strokeColor,pageIndex:this.pdfViewerBase.activeElements.activePageID,// eslint-disable-next-line max-len
opacity:this.drawingObject.opacity||1,borderDashArray:this.drawingObject.borderDashArray,thickness:this.drawingObject.thickness,modifiedDate:this.drawingObject.modifiedDate,author:this.drawingObject.author,subject:this.drawingObject.subject,lineHeadEnd:this.drawingObject.lineHeadEnd,lineHeadStart:this.drawingObject.lineHeadStart,measureType:this.commandHandler.drawingObject.measureType,enableShapeLabel:this.commandHandler.enableShapeLabel};this.pdfViewerBase.updateFreeTextProperties(nodeAnnot);// eslint-disable-next-line
this.drawingObject=this.commandHandler.add(nodeAnnot);}};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */LineTool.prototype.mouseUp=function(args){if(this.dragging){_super.prototype.mouseMove.call(this,args);if(this.commandHandler){// eslint-disable-next-line
var currentSelector=void 0;if(args.source&&args.annotationSelectorSettings!==null){currentSelector=args.source.annotationSelectorSettings;}else{currentSelector='';}// eslint-disable-next-line
var node=this.drawingObject;this.commandHandler.nodePropertyChange(node,{vertexPoints:node.vertexPoints,leaderHeight:node.leaderHeight});this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.commandHandler.select([node.id],currentSelector);this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,currentSelector);}if(this.endPoint&&this.endPoint.indexOf('ConnectorSegmentPoint')>-1&&this.dragging){this.commandHandler.annotation.updateCalibrateValues(this.drawingObject);// eslint-disable-next-line
this.commandHandler.annotation.addAction(this.pageIndex,null,this.drawingObject,'Addition','',this.drawingObject,this.drawingObject);this.drawingObject=null;this.dragging=false;_super.prototype.mouseUp.call(this,args);}if(this.drawingObject){this.endPoint='ConnectorSegmentPoint_1';}}else{if(this.drawingObject){this.commandHandler.remove(this.drawingObject);}}};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns true or false.
     */LineTool.prototype.mouseMove=function(args){_super.prototype.mouseMove.call(this,args);if(this.inAction&&sf.drawings.Point.equals(this.currentPosition,this.prevPosition)===false){this.currentPosition=args.position;this.dragging=true;if(this.currentPosition&&this.prevPosition){var diffX=this.currentPosition.x-this.prevPosition.x;var diffY=this.currentPosition.y-this.prevPosition.y;// eslint-disable-next-line
var currentSelector=void 0;if(args.source&&args.annotationSelectorSettings!==null){currentSelector=args.source.annotationSelectorSettings;}else{currentSelector='';}// eslint-disable-next-line max-len
if(this.inAction&&this.commandHandler&&this.drawingObject&&this.endPoint!==undefined&&diffX!==0||diffY!==0){// eslint-disable-next-line max-len
this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,this.drawingObject,this.currentPosition,this.selectedSegment,args.target,null,currentSelector);this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,currentSelector);}}this.prevPosition=this.currentPosition;}return!this.blocked;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */LineTool.prototype.mouseLeave=function(args){this.mouseUp(args);};/**
     * @private
     * @returns {void}
     */LineTool.prototype.endAction=function(){_super.prototype.endAction.call(this);this.prevPosition=null;this.endPoint=null;};return LineTool;}(ToolBase);/**
 * Rotates the selected objects
 *
 * @hidden
 */var RotateTool=/** @class */function(_super){__extends$3(RotateTool,_super);function RotateTool(commandHandler,base){return _super.call(this,commandHandler,base,true)||this;}/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */RotateTool.prototype.mouseDown=function(args){var nodeMouseDown=cloneObject(args.source);this.undoElement={bounds:{x:nodeMouseDown.wrapper.offsetX,y:nodeMouseDown.wrapper.offsetY,width:nodeMouseDown.wrapper.actualSize.width,height:nodeMouseDown.wrapper.actualSize.height},rotateAngle:nodeMouseDown.rotateAngle// eslint-disable-next-line
};_super.prototype.mouseDown.call(this,args);};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */RotateTool.prototype.mouseUp=function(args){var object=args.source;// eslint-disable-next-line
var newShapeObject;if(this.undoElement.rotateAngle!==object.wrapper.rotateAngle){// eslint-disable-next-line
var currentSelector=args.source.annotations[0].annotationSelectorSettings;this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,currentSelector);newShapeObject={bounds:{x:args.source.wrapper.offsetX,y:args.source.wrapper.offsetY,width:args.source.wrapper.actualSize.width,height:args.source.wrapper.actualSize.height},rotateAngle:args.source.wrapper.rotateAngle};}// eslint-disable-next-line
this.commandHandler.annotation.addAction(this.pageIndex,null,args.source,'Rotate','',this.undoElement,newShapeObject);this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(args.source,null,'Rotate');this.commandHandler.annotation.stickyNotesAnnotationModule.updateStickyNotes(args.source,null);_super.prototype.mouseUp.call(this,args);};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns true or false.
     */RotateTool.prototype.mouseMove=function(args){_super.prototype.mouseMove.call(this,args);var object=args.source;// eslint-disable-next-line
var currentSelector=args.source.annotations[0].annotationSelectorSettings;this.currentPosition=args.position;if(object.wrapper){var refPoint={x:object.wrapper.offsetX,y:object.wrapper.offsetY};var angle=sf.drawings.Point.findAngle(refPoint,this.currentPosition)+90;angle=(angle+360)%360;this.blocked=!this.commandHandler.rotate(angle-object.wrapper.rotateAngle,currentSelector);}return!this.blocked;};RotateTool.prototype.getTooltipContent=function(node){return Math.round(node.rotateAngle%360).toString()+'\xB0';};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */RotateTool.prototype.mouseLeave=function(args){this.mouseUp(args);};/**
     * @private
     * @returns {void}
     */RotateTool.prototype.endAction=function(){_super.prototype.endAction.call(this);};return RotateTool;}(ToolBase);/**
 * @private
 * @param {MouseEvent | TouchEvent} event - Specified the annotaion event.
 * @param {PdfViewerBase} pdfBase - Specified the pdfviewer base element.
 * @param {PdfViewer} pdfViewer - Specified the pdfviewer element.
 * @param {boolean} isOverlapped - Specified the overlapped element or not.
 * @returns {any} - Returns the active element.
 */ // eslint-disable-next-line
function findActiveElement(event,pdfBase,pdfViewer,isOverlapped){if(pdfViewer&&pdfBase.activeElements.activePageID>-1){var objects=findObjectsUnderMouse(pdfBase,pdfViewer,event);var object=findObjectUnderMouse(objects,event,pdfBase,pdfViewer);if(isOverlapped){return objects;}return object;}return undefined;}/**
 * @private
 * @param {PdfViewerBase} pdfBase - Specified the pdfviewer base element.
 * @param {PdfViewer} pdfViewer - Specified the pdfviewer element.
 * @param {MouseEvent} event - Specified the annotaion event.
 * @returns {IElement[]} - Returns the annotaion elements.
 */function findObjectsUnderMouse(pdfBase,pdfViewer,event){var pt=pdfBase.currentPosition||{x:event.offsetX,y:event.offsetY};pt={x:pt.x/pdfBase.getZoomFactor(),y:pt.y/pdfBase.getZoomFactor()};var pageTable=pdfViewer.getPageTable(pdfBase.activeElements.activePageID);var objArray=findObjects(pt,pageTable.objects);return objArray;}/**
 * @private
 * @param {PdfAnnotationBaseModel[]} objects - Specified the annotaion object model.
 * @param {any} event - Specified the annotaion event.
 * @param {PdfViewerBase} pdfBase - Specified the pdfviewer base element.
 * @param {PdfViewer} pdfViewer - Specified the pdfviewer element.
 * @returns {IElement} - Returns the annotaion element.
 */function findObjectUnderMouse(// eslint-disable-next-line
objects,event,pdfBase,pdfViewer){var actualTarget=null;var touchArg;var offsetX;var offsetY;if(event&&event.type&&event.type.indexOf('touch')!==-1){touchArg=event;if(pdfViewer.annotation){var pageDiv=pdfBase.getElement('_pageDiv_'+pdfViewer.annotation.getEventPageNumber(event));if(pageDiv){var pageCurrentRect=pageDiv.getBoundingClientRect();offsetX=touchArg.changedTouches[0].clientX-pageCurrentRect.left;offsetY=touchArg.changedTouches[0].clientY-pageCurrentRect.top;}}// eslint-disable-next-line
}else if(event&&event.target&&event.path&&event.target.parentElement&&event.target.parentElement.classList.contains('foreign-object')){// eslint-disable-next-line
var targetParentRect=event.path[4].getBoundingClientRect();offsetX=event.clientX-targetParentRect.left;offsetY=event.clientY-targetParentRect.top;}else if(event.target&&event.target.parentElement&&event.target.parentElement.classList.contains('foreign-object')){// eslint-disable-next-line
var targetParentRect=event.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();offsetX=event.clientX-targetParentRect.left;offsetY=event.clientY-targetParentRect.top;// eslint-disable-next-line
}else{offsetX=!isNaN(event.offsetX)?event.offsetX:event.position?event.position.x:0;offsetY=!isNaN(event.offsetY)?event.offsetY:event.position?event.position.y:0;}var offsetForSelector=5;var boundsDiff=0;for(var i=0;i<objects.length;i++){if(!(objects[i].shapeAnnotationType==='Distance'||objects[i].shapeAnnotationType==='Line'||objects[i].shapeAnnotationType==='LineWidthArrowHead'||pdfBase.tool instanceof LineTool)){var bounds=objects[i].wrapper.bounds;var rotationValue=0;if(objects[i].shapeAnnotationType==='Stamp'||objects[i].shapeAnnotationType==='Image'){rotationValue=25;}// eslint-disable-next-line max-len
if((bounds.x-offsetForSelector)*pdfBase.getZoomFactor()<offsetX&&(bounds.x+bounds.width+offsetForSelector)*pdfBase.getZoomFactor()>offsetX&&// eslint-disable-next-line max-len
(bounds.y-offsetForSelector-rotationValue)*pdfBase.getZoomFactor()<offsetY&&(bounds.y+bounds.height+offsetForSelector)*pdfBase.getZoomFactor()>offsetY){if(pdfBase.tool instanceof NodeDrawingTool||pdfBase.tool instanceof StampTool){actualTarget=objects[i];}else{if(!boundsDiff){actualTarget=objects[i];// eslint-disable-next-line max-len
boundsDiff=offsetX-(bounds.x-offsetForSelector)*pdfBase.getZoomFactor()+((bounds.x+bounds.width+offsetForSelector)*pdfBase.getZoomFactor()-offsetX)+(// eslint-disable-next-line max-len
offsetY-(bounds.y-offsetForSelector-rotationValue)*pdfBase.getZoomFactor())+((bounds.y+bounds.height+offsetForSelector)*pdfBase.getZoomFactor()-offsetY);}else{// eslint-disable-next-line max-len
var objectBounds=offsetX-(bounds.x-offsetForSelector)*pdfBase.getZoomFactor()+((bounds.x+bounds.width+offsetForSelector)*pdfBase.getZoomFactor()-offsetX)+(// eslint-disable-next-line max-len
offsetY-(bounds.y-offsetForSelector-rotationValue)*pdfBase.getZoomFactor())+((bounds.y+bounds.height+offsetForSelector)*pdfBase.getZoomFactor()-offsetY);if(boundsDiff>objectBounds){actualTarget=objects[i];boundsDiff=objectBounds;}else if(boundsDiff===objectBounds){actualTarget=objects[i];boundsDiff=objectBounds;}else if(boundsDiff===objectBounds){actualTarget=objects[i];boundsDiff=objectBounds;}}}}}else{var pt={x:offsetX/pdfBase.getZoomFactor(),y:offsetY/pdfBase.getZoomFactor()};var obj=findElementUnderMouse(objects[i],pt,offsetForSelector);var isOver=isPointOverConnector(objects[i],pt);if(obj&&!isOver){var newpoint=CalculateLeaderPoints(objects[i],obj);if(newpoint){var rect=sf.drawings.Rect.toBounds([newpoint,newpoint]);rect.Inflate(10);if(rect.containsPoint(pt)){isOver=true;}}}if(obj&&isOver){actualTarget=objects[i];}}}return actualTarget;}/**
 * @private
 * @param {any} selector - Specified the annotaion selctor.
 * @param {any} currentobject - Specified the current annotaion object.
 * @returns {any} - Returns the leader points.
 */ // eslint-disable-next-line
function CalculateLeaderPoints(selector,currentobject){var leaderCount=0;var sourcePoint=selector.sourcePoint;var targetPoint=selector.targetPoint;if(selector.shapeAnnotationType==='Distance'){var segment=currentobject;var newPoint1=void 0;var angle=sf.drawings.Point.findAngle(selector.sourcePoint,selector.targetPoint);if(segment.id.indexOf('leader')>-1){var center=selector.wrapper.children[0].bounds.center;if(leaderCount===0&&segment.id.indexOf('leader1')>-1){newPoint1={x:selector.sourcePoint.x,y:selector.sourcePoint.y-selector.leaderHeight};center=sourcePoint;}else{newPoint1={x:selector.targetPoint.x,y:selector.targetPoint.y-selector.leaderHeight};center=targetPoint;}var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,angle,center.x,center.y);var rotatedPoint=sf.drawings.transformPointByMatrix(matrix,{x:newPoint1.x,y:newPoint1.y});return rotatedPoint;}}}/**
 * @private
 * @param {IElement} obj - Specified the annotation element.
 * @param {PointModel} position - Specified the annotation position value.
 * @param {number} padding - Specified the annotation padding.
 * @returns {DrawingElement} - Returns the annotation drawing element.
 */function findElementUnderMouse(obj,position,padding){return findTargetShapeElement(obj.wrapper,position,padding);}/**
 * @private
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object model.
 * @param {string} key - Specified the annotation key value.
 * @param {Object[]} collection - Specified the annotation collection.
 * @returns {void}
 */function insertObject(obj,key,collection){if(collection.length===0){collection.push(obj);}else if(collection.length===1){// eslint-disable-next-line
if(collection[0][key]>obj[key]){collection.splice(0,0,obj);}else{collection.push(obj);}}else if(collection.length>1){var low=0;var high=collection.length-1;var mid=Math.floor((low+high)/2);while(mid!==low){// eslint-disable-next-line
if(collection[mid][key]<obj[key]){low=mid;mid=Math.floor((low+high)/2);// eslint-disable-next-line
}else if(collection[mid][key]>obj[key]){high=mid;mid=Math.floor((low+high)/2);}}// eslint-disable-next-line
if(collection[high][key]<obj[key]){collection.push(obj);// eslint-disable-next-line
}else if(collection[low][key]>obj[key]){collection.splice(low,0,obj);// eslint-disable-next-line
}else if(collection[low][key]<obj[key]&&collection[high][key]>obj[key]){collection.splice(high,0,obj);}}}/**
 * @private
 * @param {Container} container - Specified the annotaion container.
 * @param {PointModel} position - Specified the annotation position.
 * @param {number} padding - Specified the annotaion padding value.
 * @returns {DrawingElement} - Returns the annotation drawing element.
 */function findTargetShapeElement(container,position,padding){if(container&&container.children){for(var i=container.children.length-1;i>=0;i--){var shapeElement=container.children[i];// eslint-disable-next-line
if(!sf.base.isNullOrUndefined(shapeElement.children)&&shapeElement.children.length>0){// eslint-disable-next-line
for(var j=shapeElement.children.length-1;j>=0;j--){// eslint-disable-next-line
var currentTarget=shapeElement.children[j];if(currentTarget&&currentTarget.bounds.containsPoint(position,10)){if(currentTarget instanceof sf.drawings.Container){var targetElement=this.findTargetElement(currentTarget,position);if(targetElement){return targetElement;}}if(currentTarget.bounds.containsPoint(position,10)){return currentTarget;}}}}else{if(shapeElement&&shapeElement.bounds.containsPoint(position,10)){if(shapeElement instanceof sf.drawings.Container){var targetElement=this.findTargetElement(shapeElement,position);if(targetElement){return targetElement;}}if(shapeElement.bounds.containsPoint(position,10)){return shapeElement;}}}}}if(container&&container.bounds.containsPoint(position,padding)&&container.style.fill!=='none'){var element=container;var paddingValue=10;var rotateThumbDistance=30;var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,element.parentTransform,element.offsetX,element.offsetY);var x=element.offsetX-element.pivot.x*element.actualSize.width;var y=element.offsetY-element.pivot.y*element.actualSize.height;var rotateThumb={x:x+(element.pivot.x===0.5?element.pivot.x*2:element.pivot.x)*element.actualSize.width/2,y:y-rotateThumbDistance};rotateThumb=sf.drawings.transformPointByMatrix(matrix,rotateThumb);if(sf.drawings.contains(position,rotateThumb,paddingValue)){return container;}}return null;}/**
 * @private
 * @param {PointModel} region - Specified the annotation region point model.
 * @param {PdfAnnotationBaseModel[]} objCollection - Specified the annotation object collections.
 * @returns {PdfAnnotationBaseModel[]} - Returns the annotation object collections.
 */function findObjects(region,objCollection){var objects=[];for(var _i=0,objCollection_1=objCollection;_i<objCollection_1.length;_i++){var obj=objCollection_1[_i];if(findElementUnderMouse(obj,region,10)||obj.shapeAnnotationType==='Stamp'&&findElementUnderMouse(obj,region,40)){insertObject(obj,'zIndex',objects);}}return objects;}/**
 * @private
 * @param {MouseEvent} event - Specified the annotaion mouse event.
 * @param {PdfViewerBase} pdfBase - Specified the pdfBase element.
 * @returns {number} - Returns the active page Id.
 */ /**
 * @hidden
 */var ActiveElements=/** @class */function(){function ActiveElements(){this.activePage=undefined;this.activePageID=undefined;}Object.defineProperty(ActiveElements.prototype,"activePageID",{/**
         * @private
         * @returns {number} - Returns the active page Id.
         */get:function get(){return this.activePage;},/**
         * @private
         * @param {number} offset - The page offset value.
         */set:function set(offset){this.activePage=offset;// eslint-disable-next-line
if(offset!==this.activePage){}},enumerable:true,configurable:true});return ActiveElements;}();/**
 * PdfViewer diagram component exported items
 */ /* eslint-disable */ /**
 * @hidden
 */var FreeTextAnnotation=/** @class */function(){function FreeTextAnnotation(pdfviewer,pdfViewerBase){/**
         * @private
         */this.inputBoxCount=0;/**
         * @private
         */this.isFreeTextValueChange=false;/**
         * @private
         */this.isAddAnnotationProgramatically=false;/**
         * @private
         */this.isInuptBoxInFocus=false;/**
         * @private
         */ // eslint-disable-next-line
this.freeTextPageNumbers=[];/**
         * @private
         */this.selectedText='';/**
         * @private
         */this.isTextSelected=false;this.selectionStart=0;this.selectionEnd=0;/**
         * @private
         */this.isBold=false;/**
         * @private
         */this.isItalic=false;/**
         * @private
         */this.isUnderline=false;/**
         * @private
         */this.isStrikethrough=false;this.isReadonly=false;this.isMaximumWidthReached=false;/**
         * @private
         */this.previousText='Type Here';this.pdfViewer=pdfviewer;this.pdfViewerBase=pdfViewerBase;this.updateTextProperties();this.inputBoxElement=document.createElement('textarea');this.inputBoxElement.style.position='absolute';this.inputBoxElement.style.Width=this.defautWidth;this.inputBoxElement.style.Height=this.defaultHeight;this.inputBoxElement.style.zIndex='5';this.inputBoxElement.style.fontSize=this.fontSize+'px';this.inputBoxElement.className='free-text-input';this.inputBoxElement.style.resize='none';this.inputBoxElement.style.borderColor=this.borderColor;this.inputBoxElement.style.background=this.fillColor;this.inputBoxElement.style.lineHeight='normal';this.inputBoxElement.style.display='inline-block';this.inputBoxElement.style.borderStyle=this.borderStyle;this.inputBoxElement.style.borderWidth=this.borderWidth+'px';this.inputBoxElement.style.padding=this.padding;this.inputBoxElement.style.paddingLeft='4px';this.inputBoxElement.style.paddingTop='3px';this.inputBoxElement.style.borderRadius='2px';this.inputBoxElement.style.verticalAlign='middle';this.inputBoxElement.style.fontFamily=this.fontFamily;this.inputBoxElement.style.color=this.pdfViewer.freeTextSettings.fontColor?this.pdfViewer.freeTextSettings.fontColor:'#000';this.inputBoxElement.style.overflow='hidden';this.inputBoxElement.style.wordBreak=this.wordBreak;this.inputBoxElement.readOnly=this.isReadonly;this.inputBoxElement.addEventListener('focusout',this.onFocusOutInputBox.bind(this));this.inputBoxElement.addEventListener('keydown',this.onKeyDownInputBox.bind(this));this.inputBoxElement.addEventListener('mouseup',this.onMouseUpInputBox.bind(this));this.freeTextPageNumbers=[];}/**
     * @private
     */FreeTextAnnotation.prototype.updateTextProperties=function(){this.defautWidth=this.pdfViewer.freeTextSettings.width?this.pdfViewer.freeTextSettings.width:151;this.defaultHeight=this.pdfViewer.freeTextSettings.height?this.pdfViewer.freeTextSettings.height:24.6;this.borderColor=this.pdfViewer.freeTextSettings.borderColor?this.pdfViewer.freeTextSettings.borderColor:'#ffffff00';this.fillColor=this.pdfViewer.freeTextSettings.fillColor?this.pdfViewer.freeTextSettings.fillColor:'#fff';this.borderStyle=this.pdfViewer.freeTextSettings.borderStyle?this.pdfViewer.freeTextSettings.borderStyle:'solid';var borderThickness=this.pdfViewer.freeTextSettings.borderThickness||this.pdfViewer.freeTextSettings.borderWidth;this.borderWidth=borderThickness?borderThickness:1;this.fontSize=this.pdfViewer.freeTextSettings.fontSize?this.pdfViewer.freeTextSettings.fontSize:16;this.opacity=this.pdfViewer.freeTextSettings.opacity?this.pdfViewer.freeTextSettings.opacity:1;this.fontColor=this.pdfViewer.freeTextSettings.fontColor?this.pdfViewer.freeTextSettings.fontColor:'#000';// eslint-disable-next-line max-len
this.author=this.pdfViewer.freeTextSettings.author!=='Guest'?this.pdfViewer.freeTextSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';if(this.pdfViewer.freeTextSettings.fontFamily){var fontName=this.pdfViewer.freeTextSettings.fontFamily;if(fontName==='Helvetica'||fontName==='Times New Roman'||fontName==='Courier'||fontName==='Symbol'||fontName==='ZapfDingbats'){this.fontFamily=fontName;}else{this.fontFamily='Helvetica';}}else{this.fontFamily='Helvetica';}this.textAlign=this.pdfViewer.freeTextSettings.textAlignment?this.pdfViewer.freeTextSettings.textAlignment:'Left';this.defaultText=this.pdfViewer.freeTextSettings.defaultText?this.pdfViewer.freeTextSettings.defaultText:'Type here';this.isReadonly=false;if(this.pdfViewer.freeTextSettings.enableAutoFit){this.wordBreak='break-all';this.padding='2px';}else{this.padding='0px';this.wordBreak='break-word';}// eslint-disable-next-line max-len
if(this.pdfViewer.freeTextSettings.isLock||this.pdfViewer.annotationSettings.isLock||this.pdfViewer.freeTextSettings.isReadonly){this.isReadonly=true;}if(this.pdfViewer.freeTextSettings.fontStyle===1){this.isBold=true;}else if(this.pdfViewer.freeTextSettings.fontStyle===2){this.isItalic=true;}else if(this.pdfViewer.freeTextSettings.fontStyle===4){this.isUnderline=true;}else if(this.pdfViewer.freeTextSettings.fontStyle===8){this.isStrikethrough=true;}else if(3===this.pdfViewer.freeTextSettings.fontStyle){this.isBold=true;this.isItalic=true;}else if(5===this.pdfViewer.freeTextSettings.fontStyle){this.isBold=true;this.isUnderline=true;}else if(9===this.pdfViewer.freeTextSettings.fontStyle){this.isBold=true;this.isStrikethrough=true;}else if(7===this.pdfViewer.freeTextSettings.fontStyle){this.isBold=true;this.isItalic=true;this.isUnderline=true;}else if(11===this.pdfViewer.freeTextSettings.fontStyle){this.isBold=true;this.isItalic=true;this.isStrikethrough=true;}else if(14===this.pdfViewer.freeTextSettings.fontStyle){this.isBold=true;this.isUnderline=true;this.isStrikethrough=true;}else if(6===this.pdfViewer.freeTextSettings.fontStyle){this.isUnderline=true;this.isItalic=true;}};/**
     * @param shapeAnnotations
     * @param pageNumber
     * @param isImportAction
     * @private
     */ // eslint-disable-next-line
FreeTextAnnotation.prototype.renderFreeTextAnnotations=function(shapeAnnotations,pageNumber,isImportAction){var isFreeTextAdded=false;if(!isImportAction){for(var p=0;p<this.freeTextPageNumbers.length;p++){if(this.freeTextPageNumbers[p]===pageNumber){isFreeTextAdded=true;break;}}}if(shapeAnnotations&&!isFreeTextAdded){if(shapeAnnotations.length>=1){this.freeTextPageNumbers.push(pageNumber);for(var i=0;i<shapeAnnotations.length;i++){// eslint-disable-next-line
var annotation=shapeAnnotations[i];annotation.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(annotation,pageNumber,annotation.AnnotType);if(annotation.AnnotType){var vertexPoints=null;if(annotation.VertexPoints){vertexPoints=[];for(var j=0;j<annotation.VertexPoints.length;j++){var point={x:annotation.VertexPoints[j].X,y:annotation.VertexPoints[j].Y};vertexPoints.push(point);}}// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);var annot=void 0;var paddingValues=this.getPaddingValues(annotation.FontSize);var leftPadding=paddingValues[0];var topPadding=paddingValues[1];var paddingValue=0.5;var annotationBoundsX=!sf.base.isNullOrUndefined(annotation.Bounds.X)?annotation.Bounds.X-paddingValue:annotation.Bounds.x;var annotationBoundsY=!sf.base.isNullOrUndefined(annotation.Bounds.Y)?annotation.Bounds.Y-paddingValue:annotation.Bounds.y;var width=annotation.Bounds.Width?annotation.Bounds.Width:annotation.Bounds.width;var height=annotation.Bounds.Height?annotation.Bounds.Height:annotation.Bounds.height;var rotateValue=this.getRotationValue(pageNumber);var originalRotation=annotation.Rotate;var pageRotate=annotation.PageRotation;if(Math.sign(annotation.Rotate)===1){annotation.Rotate=-annotation.Rotate+rotateValue;}else{annotation.Rotate=annotation.Rotate+rotateValue;}// eslint-disable-next-line
var rotateAngle=Math.abs(annotation.Rotate);if(isImportAction&&rotateValue!==pageRotate){if(this.pdfViewerBase.isJsonImported){var pageDetails=this.pdfViewerBase.pageSize[pageNumber];var boundsX=annotation.Bounds.X;var boundsY=annotation.Bounds.Y;var annotationWidth=width;var annotationHeight=height;if(pageRotate>0){var rotatation=pageRotate/90;if(rotatation===1){height=width;width=annotation.Bounds.Height;annotationBoundsX=annotation.Bounds.Y;if(rotateValue!==270){annotationBoundsY=pageDetails.height-annotation.Bounds.X-annotation.Bounds.Width;}else{annotationBoundsY=pageDetails.width-annotation.Bounds.X-annotation.Bounds.Width;}}else if(rotatation===2){if(rotateValue!==270&&rotateValue!==90){annotationBoundsX=pageDetails.width-annotation.Bounds.X-annotation.Bounds.Width;annotationBoundsY=pageDetails.height-annotation.Bounds.Y-annotation.Bounds.Height;}else{annotationBoundsX=pageDetails.height-annotation.Bounds.X-annotation.Bounds.Width;annotationBoundsY=pageDetails.width-annotation.Bounds.Y-annotation.Bounds.Height;}}else if(rotatation===3){height=width;width=annotation.Bounds.Height;if(rotateValue!==90){annotationBoundsX=pageDetails.width-annotation.Bounds.Y-width;}else{annotationBoundsX=pageDetails.height-annotation.Bounds.Y-width;}annotationBoundsY=annotation.Bounds.X;}boundsX=annotationBoundsX;boundsY=annotationBoundsY;annotationWidth=width;annotationHeight=height;}var newRotateAngle=rotateValue/90%4;if(newRotateAngle===1){height=width;width=annotationHeight;annotationBoundsX=pageDetails.width-boundsY-annotationHeight-paddingValue;annotationBoundsY=boundsX-paddingValue;}else if(newRotateAngle===2){annotationBoundsX=pageDetails.width-boundsX-annotationWidth-paddingValue;annotationBoundsY=pageDetails.height-boundsY-annotationHeight-paddingValue;}else if(newRotateAngle===3){height=width;width=annotationHeight;annotationBoundsX=boundsY-paddingValue;annotationBoundsY=pageDetails.height-boundsX-height-paddingValue;}else if(newRotateAngle===0){annotationBoundsX=boundsX-paddingValue;annotationBoundsY=boundsY-paddingValue;}}}if(rotateAngle===90||rotateAngle===270){var rotationHeight=height;var rotationWidth=width;height=rotationWidth;width=rotationHeight;annotationBoundsX=annotationBoundsX-width/2+height/2;annotationBoundsY=annotationBoundsY+(width/2-height/2);}var isPrint=true;if(annotation.annotationAddMode==='Imported Annotation'){isPrint=annotation.IsPrint;}else{isPrint=annotation.AnnotationSettings.isPrint;}// eslint-disable-next-line
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);// eslint-disable-next-line
annot={author:annotation.Author,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,id:'freetext'+this.inputBoxCount,rotateAngle:annotation.Rotate,dynamicText:annotation.MarkupText,strokeColor:annotation.StrokeColor,thickness:annotation.Thickness,fillColor:annotation.FillColor,bounds:{x:annotationBoundsX,y:annotationBoundsY,left:annotationBoundsX,top:annotationBoundsY,width:width,height:height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},annotName:annotation.AnnotName,shapeAnnotationType:'FreeText',// eslint-disable-next-line
pageIndex:pageNumber,opacity:annotation.Opacity,fontColor:annotation.FontColor,fontSize:annotation.FontSize,pageRotation:rotateValue,fontFamily:annotation.FontFamily,notes:annotation.MarkupText,textAlign:annotation.TextAlign,// eslint-disable-next-line
comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},// eslint-disable-next-line max-len
font:{isBold:annotation.Font.Bold,isItalic:annotation.Font.Italic,isStrikeout:annotation.Font.Strikeout,isUnderline:annotation.Font.Underline},annotationSelectorSettings:this.getSettings(annotation),annotationSettings:annotation.AnnotationSettings,// eslint-disable-next-line
customData:this.pdfViewer.annotation.getCustomData(annotation),annotationAddMode:annotation.annotationAddMode,allowedInteractions:annotation.allowedInteractions,isPrint:isPrint,isCommentLock:annotation.IsCommentLock,isReadonly:annotation.IsReadonly};if(isImportAction){annot.id=annotation.AnnotName;annot.previousFontSize=annotation.FontSize?annotation.FontSize:this.fontSize;}var addedAnnot=this.pdfViewer.add(annot);this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annot,'_annotations_freetext');if(this.isAddAnnotationProgramatically){// eslint-disable-next-line
var settings={opacity:annot.opacity,borderColor:annot.strokeColor,borderWidth:annot.thickness,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate,// eslint-disable-next-line
fillColor:annot.fillColor,fontSize:annot.fontSize,width:annot.bounds.width,height:annot.bounds.height,fontColor:annot.fontColor,fontFamily:annot.fontFamily,defaultText:annot.dynamicText,fontStyle:annot.font,textAlignment:annot.textAlign};this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,'FreeText',annot.bounds,settings);}this.inputBoxCount+=1;this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=true;this.pdfViewer.nodePropertyChange(addedAnnot,{});this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=false;}}}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
FreeTextAnnotation.prototype.getSettings=function(annotation){var selector=this.pdfViewer.annotationSelectorSettings;if(annotation.AnnotationSelectorSettings){selector=annotation.AnnotationSelectorSettings;}else if(this.pdfViewer.freeTextSettings.annotationSelectorSettings){selector=this.pdfViewer.freeTextSettings.annotationSelectorSettings;}return selector;};/**
     * @param type
     * @private
     */FreeTextAnnotation.prototype.setAnnotationType=function(type){this.pdfViewerBase.disableTextSelectionMode();switch(type){case'FreeText':this.currentAnnotationMode='FreeText';this.updateTextProperties();// eslint-disable-next-line max-len
var modifiedDateRect=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.drawingObject={shapeAnnotationType:'FreeText',strokeColor:this.borderColor,fillColor:this.fillColor,opacity:this.opacity,notes:'',isCommentLock:false,thickness:this.borderWidth,borderDashArray:'0',modifiedDate:modifiedDateRect,// eslint-disable-next-line max-len
author:this.pdfViewer.freeTextSettings.author,subject:'Text Box',font:{isBold:this.isBold,isItalic:this.isItalic,isStrikeout:this.isStrikethrough,isUnderline:this.isUnderline},textAlign:this.textAlign};this.pdfViewer.tool='Select';break;}};/**
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isNewAdded
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isNewAdded
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isNewAdded
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isNewAdded
     * @private
     */ // eslint-disable-next-line
FreeTextAnnotation.prototype.modifyInCollection=function(property,pageNumber,annotationBase,isNewAdded){if(!isNewAdded){this.pdfViewerBase.updateDocumentEditedProperty(true);}var currentAnnotObject=null;var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations!=null&&annotationBase){for(var i=0;i<pageAnnotations.length;i++){if(annotationBase.id===pageAnnotations[i].id){if(property==='bounds'){// eslint-disable-next-line max-len
pageAnnotations[i].bounds={left:annotationBase.bounds.x,top:annotationBase.bounds.y,width:annotationBase.bounds.width,height:annotationBase.bounds.height,right:annotationBase.bounds.right,bottom:annotationBase.bounds.bottom};}else if(property==='fill'){pageAnnotations[i].fillColor=annotationBase.wrapper.children[0].style.fill;}else if(property==='stroke'){pageAnnotations[i].strokeColor=annotationBase.wrapper.children[0].style.strokeColor;}else if(property==='opacity'){pageAnnotations[i].opacity=annotationBase.wrapper.children[0].style.opacity;}else if(property==='thickness'){pageAnnotations[i].thickness=annotationBase.wrapper.children[0].style.strokeWidth;}else if(property==='notes'){pageAnnotations[i].note=annotationBase.notes;}else if(property==='delete'){currentAnnotObject=pageAnnotations.splice(i,1)[0];break;}else if(property==='dynamicText'){pageAnnotations[i].dynamicText=annotationBase.dynamicText;}else if(property==='fontColor'){pageAnnotations[i].fontColor=annotationBase.fontColor;}else if(property==='fontSize'){pageAnnotations[i].fontSize=annotationBase.fontSize;}else if(property==='fontFamily'){pageAnnotations[i].fontFamily=annotationBase.fontFamily;}else if(property==='textPropertiesChange'){// eslint-disable-next-line max-len
pageAnnotations[i].font={isBold:annotationBase.font.isBold,isItalic:annotationBase.font.isItalic,isStrikeout:annotationBase.font.isStrikeout,isUnderline:annotationBase.font.isUnderline};}else if(property==='textAlign'){pageAnnotations[i].textAlign=annotationBase.textAlign;}// eslint-disable-next-line max-len
pageAnnotations[i].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],pageNumber);}}this.manageAnnotations(pageAnnotations,pageNumber);}return currentAnnotObject;};/**
     * @param pageNumber
     * @param annotationBase
     * @private
     */FreeTextAnnotation.prototype.addInCollection=function(pageNumber,annotationBase){if(annotationBase){var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations){pageAnnotations.push(annotationBase);}this.manageAnnotations(pageAnnotations,pageNumber);}};/**
     * @private
     */FreeTextAnnotation.prototype.saveFreeTextAnnotations=function(){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_freetext');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_freetext'];}// eslint-disable-next-line
var annotations=new Array();for(var j=0;j<this.pdfViewerBase.pageCount;j++){annotations[j]=[];}if(storeObject&&!this.pdfViewer.annotationSettings.skipDownload){var annotationCollection=JSON.parse(storeObject);for(var i=0;i<annotationCollection.length;i++){var newArray=[];var pageAnnotationObject=annotationCollection[i];if(pageAnnotationObject){for(var z=0;pageAnnotationObject.annotations.length>z;z++){this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].bounds=this.getBoundsBasedOnRotation(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.annotations[z].rotateAngle,pageAnnotationObject.pageIndex,pageAnnotationObject.annotations[z]);// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex));var strokeColorString=pageAnnotationObject.annotations[z].strokeColor;pageAnnotationObject.annotations[z].strokeColor=JSON.stringify(this.getRgbCode(strokeColorString));var fillColorString=pageAnnotationObject.annotations[z].fillColor;pageAnnotationObject.annotations[z].fillColor=JSON.stringify(this.getRgbCode(fillColorString));var fontColorString=pageAnnotationObject.annotations[z].fontColor;pageAnnotationObject.annotations[z].fontColor=JSON.stringify(this.getRgbCode(fontColorString));// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].vertexPoints=JSON.stringify(pageAnnotationObject.annotations[z].vertexPoints);if(pageAnnotationObject.annotations[z].rectangleDifference!==null){// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].rectangleDifference=JSON.stringify(pageAnnotationObject.annotations[z].rectangleDifference);}}newArray=pageAnnotationObject.annotations;}annotations[pageAnnotationObject.pageIndex]=newArray;}}return JSON.stringify(annotations);};// eslint-disable-next-line
FreeTextAnnotation.prototype.getRotationValue=function(pageIndex){// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];if(pageDetails.rotation===0){return 0;}else if(pageDetails.rotation===1){return 90;}else if(pageDetails.rotation===2){return 180;}else if(pageDetails.rotation===3){return 270;}return 0;};FreeTextAnnotation.prototype.getBoundsBasedOnRotation=function(bounds,rotateAngle,pageIndex,annotation){var paddingValues=this.getPaddingValues(this.fontSize);var leftPadding=paddingValues[0];var topPadding=paddingValues[1];var rotateValue=this.getRotationValue(pageIndex);var paddingValue=0.5;annotation.rotateAngle=rotateAngle-rotateValue;annotation.pageRotation=rotateValue;if(rotateAngle===90||rotateAngle===-90||rotateAngle===270||rotateAngle===-270){var x=bounds.left+bounds.width/2-bounds.height/2;var y=bounds.top-(bounds.width/2-bounds.height/2);return{x:x+paddingValue,y:y+paddingValue,left:x+paddingValue,top:y+paddingValue,width:bounds.height,height:bounds.width};}else{return{x:bounds.left+paddingValue,y:bounds.top+paddingValue,left:bounds.left+paddingValue,top:bounds.top+paddingValue,width:bounds.width,height:bounds.height};}};FreeTextAnnotation.prototype.manageAnnotations=function(pageAnnotations,pageNumber){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_freetext');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_freetext'];}if(storeObject){var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_freetext');}var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_freetext']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_freetext',annotationStringified);}}};// eslint-disable-next-line
FreeTextAnnotation.prototype.getAnnotations=function(pageIndex,shapeAnnotations){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_freetext');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_freetext'];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=shapeAnnotations;}}else{annotationCollection=shapeAnnotations;}return annotationCollection;};// eslint-disable-next-line
FreeTextAnnotation.prototype.getRgbCode=function(colorString){if(!colorString.match(/#([a-z0-9]+)/gi)&&!colorString.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)){colorString=this.pdfViewer.annotationModule.nameToHash(colorString);}var stringArray=colorString.split(',');if(sf.base.isNullOrUndefined(stringArray[1])){colorString=this.pdfViewer.annotationModule.getValue(colorString,'rgba');stringArray=colorString.split(',');}// eslint-disable-next-line radix
var r=parseInt(stringArray[0].split('(')[1]);// eslint-disable-next-line radix
var g=parseInt(stringArray[1]);// eslint-disable-next-line radix
var b=parseInt(stringArray[2]);// eslint-disable-next-line radix
var a=parseInt(stringArray[3]);return{r:r,g:g,b:b,a:a};};/**
     * @private
     */ // eslint-disable-next-line
FreeTextAnnotation.prototype.onFocusOutInputBox=function(){var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);if(!this.pdfViewerBase.isFreeTextContextMenu){this.pdfViewer.fireBeforeAddFreeTextAnnotation(this.inputBoxElement.value);// eslint-disable-next-line
var pageIndex=this.inputBoxElement.id&&this.inputBoxElement.id.split("_freeText_")[1]&&this.inputBoxElement.id.split("_freeText_")[1].split("_")[0]?parseFloat(this.inputBoxElement.id.split("_freeText_")[1].split("_")[0]):this.pdfViewerBase.currentPageNumber-1;var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+pageIndex);var width=parseFloat(this.inputBoxElement.style.width);var padding=parseFloat(this.inputBoxElement.style.paddingLeft);if(this.pdfViewer.freeTextSettings.enableAutoFit&&!this.isMaximumWidthReached&&!this.isNewFreeTextAnnot){var fontsize=parseFloat(this.inputBoxElement.style.fontSize);this.inputBoxElement.style.width=width+padding-fontsize+'px';}if(this.pdfViewer.freeTextSettings.enableAutoFit&&!this.isMaximumWidthReached&&this.isNewFreeTextAnnot){width=parseFloat(this.inputBoxElement.style.width);var characterLength=8;this.inputBoxElement.style.width=width-characterLength+'px';}var inputEleHeight=parseFloat(this.inputBoxElement.style.height);var inputEleWidth=parseFloat(this.inputBoxElement.style.width);var inputEleLeft=parseFloat(this.inputBoxElement.style.left);if(this.pdfViewerBase.isMixedSizeDocument){var canvas=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);inputEleLeft=inputEleLeft-canvas.offsetLeft;}var inputEleTop=parseFloat(this.inputBoxElement.style.top);var zoomFactor=this.pdfViewerBase.getZoomFactor();if(this.pdfViewer.isValidFreeText){this.inputBoxElement.value='Type Here';this.pdfViewer.isValidFreeText=false;}var inputValue=this.inputBoxElement.value;var isNewlyAdded=false;if(this.isNewFreeTextAnnot===true){// eslint-disable-next-line max-len
var currentDateString=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();this.isNewFreeTextAnnot=false;isNewlyAdded=true;var annot=void 0;// eslint-disable-next-line
var annotationSelectorSettings=this.pdfViewer.freeTextSettings.annotationSelectorSettings?this.pdfViewer.freeTextSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;// eslint-disable-next-line
var annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);// eslint-disable-next-line
this.author=this.author?this.author:this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:'Guest';// eslint-disable-next-line
var allowedInteractions=this.pdfViewer.freeTextSettings.allowedInteractions?this.pdfViewer.freeTextSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('freeText',pageIndex+1,'',annotationName,inputValue,this.author);// eslint-disable-next-line
annot={author:this.author,modifiedDate:currentDateString,subject:'Text Box',id:'free_text'+this.inputBoxCount,// eslint-disable-next-line max-len
rotateAngle:0,dynamicText:inputValue,strokeColor:this.borderColor,thickness:this.borderWidth,fillColor:this.fillColor,bounds:{left:inputEleLeft/zoomFactor,top:inputEleTop/zoomFactor,x:inputEleLeft/zoomFactor,y:inputEleTop/zoomFactor,width:inputEleWidth/zoomFactor,height:inputEleHeight/zoomFactor},annotName:annotationName,shapeAnnotationType:'FreeText',pageIndex:pageIndex,fontColor:this.fontColor,fontSize:this.fontSize,fontFamily:this.fontFamily,opacity:this.opacity,comments:[],textAlign:this.textAlign,// eslint-disable-next-line max-len
font:{isBold:this.isBold,isItalic:this.isItalic,isStrikeout:this.isStrikethrough,isUnderline:this.isUnderline},review:{state:'Unmarked',stateModel:'None',modifiedDate:currentDateString,author:this.author},// eslint-disable-next-line max-len
annotationSelectorSettings:annotationSelectorSettings,annotationSettings:annotationSettings,customData:this.pdfViewer.annotationModule.getData('FreeText'),isPrint:this.pdfViewer.freeTextSettings.isPrint,allowedInteractions:allowedInteractions,isReadonly:this.isReadonly};if(this.pdfViewer.enableRtl){annot.textAlign='Right';}var annotation=this.pdfViewer.add(annot);// eslint-disable-next-line
var bounds={left:annot.bounds.x,top:annot.bounds.y,width:annot.bounds.width,height:annot.bounds.height};// eslint-disable-next-line
var settings={opacity:annot.opacity,borderColor:annot.strokeColor,borderWidth:annot.thickness,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate,// eslint-disable-next-line
fillColor:annot.fillColor,fontSize:annot.fontSize,width:annot.bounds.width,height:annot.bounds.height,fontColor:annot.fontColor,fontFamily:annot.fontFamily,defaultText:annot.dynamicText,fontStyle:annot.font,textAlignment:annot.textAlign};this.pdfViewer.annotation.storeAnnotations(pageIndex,annot,'_annotations_freetext');this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,'FreeText',bounds,settings);// eslint-disable-next-line
this.pdfViewer.annotation.addAction(pageIndex,null,annot,'Addition','',annot,annot);this.pdfViewer.renderSelector(annot.pageIndex);this.pdfViewer.clearSelection(annot.pageIndex);this.pdfViewerBase.updateDocumentEditedProperty(true);this.selectedAnnotation=annotation;}this.isInuptBoxInFocus=false;// eslint-disable-next-line
if(this.selectedAnnotation&&this.pdfViewer.selectedItems.annotations){inputEleWidth=inputEleWidth/zoomFactor;inputEleHeight=inputEleHeight/zoomFactor;var heightDiff=inputEleHeight-this.selectedAnnotation.bounds.height;var y=undefined;if(heightDiff>0){y=this.selectedAnnotation.wrapper.offsetY+heightDiff/2;y=y>0?y:undefined;}var widthDiff=inputEleWidth-this.selectedAnnotation.bounds.width;var x=undefined;if(widthDiff>0){x=this.selectedAnnotation.wrapper.offsetX+widthDiff/2;x=x>0?x:undefined;}else{widthDiff=Math.abs(widthDiff);x=this.selectedAnnotation.wrapper.offsetX-widthDiff/2;}this.selectedAnnotation.bounds.width=inputEleWidth;this.selectedAnnotation.bounds.height=inputEleHeight;this.pdfViewer.annotation.modifyDynamicTextValue(inputValue,this.selectedAnnotation.annotName);this.selectedAnnotation.dynamicText=inputValue;this.modifyInCollection('dynamicText',pageIndex,this.selectedAnnotation,isNewlyAdded);this.modifyInCollection('bounds',pageIndex,this.selectedAnnotation,isNewlyAdded);// eslint-disable-next-line
this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{bounds:{width:this.selectedAnnotation.bounds.width,height:this.selectedAnnotation.bounds.height,y:y,x:x}});// eslint-disable-next-line
this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFreeText',this.selectedAnnotation.annotName,inputValue);this.pdfViewer.renderSelector(this.selectedAnnotation.pageIndex,this.selectedAnnotation.annotationSelectorSettings);}if(this.inputBoxElement.parentElement){if(pageDiv&&pageDiv.id===this.inputBoxElement.parentElement.id){pageDiv.removeChild(this.inputBoxElement);}else{this.inputBoxElement.parentElement.removeChild(this.inputBoxElement);}}var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvass,pageIndex);this.inputBoxCount+=1;if(!isNewlyAdded&&this.previousText!==inputValue){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.triggerAnnotationPropChange(this.selectedAnnotation,false,false,false,false,false,false,false,true,this.previousText,inputValue);}}else{this.inputBoxElement.focus();if(!this.isTextSelected){window.getSelection().removeAllRanges();}}this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);};/**
     * @param event
     * @private
     */FreeTextAnnotation.prototype.onKeyDownInputBox=function(event){var inuptEleObj=this;if(event.which===9||sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0])&&!this.isNewFreeTextAnnot){event.preventDefault();}this.selectedAnnotation=this.pdfViewer.selectedItems.annotations&&this.isNewFreeTextAnnot?this.pdfViewer.selectedItems.annotations[0]:this.selectedAnnotation;setTimeout(function(){if(inuptEleObj.defaultHeight<inuptEleObj.inputBoxElement.scrollHeight// eslint-disable-next-line radix
&&parseInt(inuptEleObj.inputBoxElement.style.height)<inuptEleObj.inputBoxElement.scrollHeight){inuptEleObj.updateFreeTextAnnotationSize(true);}else{inuptEleObj.updateFreeTextAnnotationSize(false);}// eslint-disable-next-line
},0);};FreeTextAnnotation.prototype.updateFreeTextAnnotationSize=function(isSize){var inuptEleObj=this;var enableAutoFit=inuptEleObj.pdfViewer.freeTextSettings.enableAutoFit;if(enableAutoFit){this.autoFitFreeText();}else{this.isMaximumWidthReached=true;}if(this.isMaximumWidthReached){// eslint-disable-next-line max-len
var previousHeight=inuptEleObj.inputBoxElement.getBoundingClientRect().height;if(!isSize&&!inuptEleObj.inputBoxElement.readOnly){inuptEleObj.inputBoxElement.style.height=inuptEleObj.defaultHeight+'px';}var currentHeight=inuptEleObj.inputBoxElement.getBoundingClientRect().height;var difference=currentHeight-previousHeight;var fontSize=parseFloat(inuptEleObj.inputBoxElement.style.fontSize);// eslint-disable-next-line max-len
inuptEleObj.inputBoxElement.style.height=inuptEleObj.inputBoxElement.readOnly?inuptEleObj.inputBoxElement.style.height:inuptEleObj.inputBoxElement.scrollHeight+fontSize/2+'px';inuptEleObj.inputBoxElement.style.height=difference<0&&!inuptEleObj.inputBoxElement.readOnly?previousHeight+'px':inuptEleObj.inputBoxElement.style.height;}var zoomFactor=inuptEleObj.pdfViewerBase.getZoomFactor();var inputEleHeight=parseFloat(this.inputBoxElement.style.height);var inputEleWidth=parseFloat(this.inputBoxElement.style.width);inputEleHeight=inputEleHeight/zoomFactor;inputEleWidth=inputEleWidth/zoomFactor;if(this.selectedAnnotation){var heightDiff=inputEleHeight-inuptEleObj.selectedAnnotation.bounds.height;var y=0;if(heightDiff>0){y=inuptEleObj.selectedAnnotation.wrapper.offsetY+heightDiff/2;}else{heightDiff=Math.abs(heightDiff);y=inuptEleObj.selectedAnnotation.wrapper.offsetY-heightDiff/2;}if(enableAutoFit){var widthDiff=inputEleWidth-inuptEleObj.selectedAnnotation.bounds.width;var x=0;if(widthDiff>0){x=inuptEleObj.selectedAnnotation.wrapper.offsetX+widthDiff/2;}else{widthDiff=Math.abs(widthDiff);x=inuptEleObj.selectedAnnotation.wrapper.offsetX-widthDiff/2;}}inuptEleObj.selectedAnnotation.bounds.width=inputEleWidth;inuptEleObj.selectedAnnotation.bounds.height=inputEleHeight;if(enableAutoFit){// eslint-disable-next-line
inuptEleObj.pdfViewer.nodePropertyChange(inuptEleObj.selectedAnnotation,{bounds:{width:inuptEleObj.selectedAnnotation.bounds.width,height:inuptEleObj.selectedAnnotation.bounds.height,y:y,x:x}});}else{// eslint-disable-next-line
inuptEleObj.pdfViewer.nodePropertyChange(inuptEleObj.selectedAnnotation,{bounds:{width:inuptEleObj.selectedAnnotation.bounds.width,height:inuptEleObj.selectedAnnotation.bounds.height,y:y}});}inuptEleObj.pdfViewer.renderSelector(inuptEleObj.selectedAnnotation.pageIndex,this.selectedAnnotation.annotationSelectorSettings);}};/**
     * @param event
     * @private
     */FreeTextAnnotation.prototype.autoFitFreeText=function(xPosition,yPosition){var pageIndex=this.pdfViewerBase.currentPageNumber-1;var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+pageIndex);// eslint-disable-next-line
var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageIndex);// eslint-disable-next-line
var context=canvas.getContext("2d");// eslint-disable-next-line
var fontSize=this.inputBoxElement.style.fontSize;if(this.pdfViewer.freeTextSettings.fontStyle===FontStyle.Bold||this.inputBoxElement.style.fontWeight==='bold'){context.font='bold'+' '+fontSize+' '+this.inputBoxElement.style.fontFamily;}else{context.font=fontSize+' '+this.inputBoxElement.style.fontFamily;}var highestTextNode="";// eslint-disable-next-line
var textNodes=[];var textboxValue=this.inputBoxElement.value;if(textboxValue.indexOf('\n')>-1){textNodes=textboxValue.split('\n');for(var j=0;j<textNodes.length;j++){// eslint-disable-next-line
var textNodeData=context.measureText(textNodes[j]);// eslint-disable-next-line
var highestTextNodeData=context.measureText(highestTextNode);if(textNodeData.width>highestTextNodeData.width){highestTextNode=textNodes[j];}}this.isMaximumWidthReached=true;}else{highestTextNode=textboxValue;this.isMaximumWidthReached=false;}// eslint-disable-next-line
var textwidth=context.measureText(highestTextNode);fontSize=parseFloat(this.inputBoxElement.style.fontSize);var inputEleWidth;var characterLength=8;var inputEleHeight=fontSize+fontSize/2;if(this.isNewFreeTextAnnot){inputEleWidth=Math.ceil(textwidth.width+(characterLength+1)*2);this.inputBoxElement.style.height=inputEleHeight+'px';this.inputBoxElement.style.top=yPosition-inputEleHeight/2+'px';}else{inputEleWidth=Math.ceil(textwidth.width)+fontSize+Math.ceil(characterLength/2);}if(!xPosition){this.inputBoxElement.style.height=inputEleHeight+'px';}this.inputBoxElement.style.width=inputEleWidth+'px';var maxWidth=this.pdfViewerBase.getPageWidth(pageIndex)-parseFloat(this.inputBoxElement.style.left);if(parseFloat(this.inputBoxElement.style.width)>maxWidth){this.isMaximumWidthReached=true;if(this.isNewAddedAnnot&&xPosition){inputEleWidth=inputEleWidth-characterLength;this.inputBoxElement.style.width=inputEleWidth+'px';var width=xPosition+inputEleWidth*this.pdfViewerBase.getZoomFactor();var x=parseFloat(this.inputBoxElement.style.left);if(width>=this.pdfViewerBase.getPageWidth(pageIndex)){x=this.pdfViewerBase.getPageWidth(pageIndex)-inputEleWidth;}this.inputBoxElement.style.left=x+'px';}else{this.inputBoxElement.style.width=maxWidth+'px';}}};/**
     * @param event
     * @private
     */FreeTextAnnotation.prototype.onMouseUpInputBox=function(event){// eslint-disable-next-line
var target=event.target;this.selectionStart=0;this.selectionEnd=0;if(event.which===3&&target){this.selectionStart=target.selectionStart;this.selectionEnd=target.selectionEnd;}if(event.which===3&&window.getSelection()!=null&&window.getSelection().toString()!==''){this.isTextSelected=true;}else{this.isTextSelected=false;}};/**
     * @param currentPosition
     * @param annotation
     * @param pageIndex
     * @private
     */FreeTextAnnotation.prototype.addInuptElemet=function(currentPosition,annotation,pageIndex){if(annotation===void 0){annotation=null;}if(sf.base.isNullOrUndefined(pageIndex)){pageIndex=this.pdfViewerBase.currentPageNumber-1;}if(annotation){pageIndex=annotation.pageIndex;}if(annotation===null&&this.pdfViewer.selectedItems.annotations.length===0){this.updateTextProperties();}this.inputBoxElement.id=this.pdfViewer.dataId+'_freeText_'+pageIndex+'_'+this.inputBoxCount;var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+pageIndex);var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);var zoomFactor=this.pdfViewerBase.getZoomFactor();this.inputBoxElement.value=annotation&&annotation.dynamicText?annotation.dynamicText:this.defaultText;this.inputBoxElement.style.boxSizing='border-box';this.inputBoxElement.style.left=currentPosition.x+'px';this.inputBoxElement.style.top=currentPosition.y-this.defaultHeight*zoomFactor/2+'px';if(this.pdfViewer.freeTextSettings.enableAutoFit){this.inputBoxElement.style.wordBreak='break-all';}else{this.inputBoxElement.style.wordBreak='break-word';}if(annotation){this.applyFreetextStyles(zoomFactor,annotation.isReadonly);}else{this.applyFreetextStyles(zoomFactor);}if(this.isBold){this.inputBoxElement.style.fontWeight='bold';}else{this.inputBoxElement.style.fontWeight='normal';}if(this.isItalic){this.inputBoxElement.style.fontStyle='italic';}else{this.inputBoxElement.style.fontStyle='normal';}this.inputBoxElement.style.textDecoration='none';if(this.isUnderline){this.inputBoxElement.style.textDecoration='underline';}if(this.isStrikethrough){this.inputBoxElement.style.textDecoration='line-through';}if(this.pdfViewer.enableRtl){this.inputBoxElement.style.textAlign='right';this.inputBoxElement.style.direction='rtl';this.inputBoxElement.style.left=currentPosition.x-this.defautWidth*zoomFactor/2;}else{this.inputBoxElement.style.textAlign=this.textAlign.toLowerCase();}this.inputBoxElement.style.borderColor=this.borderColor;this.inputBoxElement.style.color=this.fontColor;this.inputBoxElement.style.background=this.fillColor;if(annotation&&annotation.wrapper&&annotation.wrapper.children[0]){this.inputBoxElement.style.opacity=annotation.wrapper.children[0].style.opacity;}if(this.isNewFreeTextAnnot===true){this.pdfViewer.clearSelection(pageIndex);}if(annotation&&annotation.wrapper&&annotation.wrapper.bounds){var annotationBounds=annotation.wrapper.bounds;if(annotationBounds.left){this.inputBoxElement.style.left=annotationBounds.left*zoomFactor+'px';}if(annotationBounds.top){this.inputBoxElement.style.top=annotationBounds.top*zoomFactor+'px';}// eslint-disable-next-line max-len
this.inputBoxElement.style.height=annotationBounds.height?annotationBounds.height*zoomFactor+'px':this.defaultHeight*zoomFactor+'px';// eslint-disable-next-line max-len
this.inputBoxElement.style.width=annotationBounds.width?annotationBounds.width*zoomFactor+'px':this.defautWidth*zoomFactor+'px';this.selectedAnnotation=annotation;this.previousText=this.selectedAnnotation.dynamicText;this.selectedAnnotation.dynamicText='';this.inputBoxElement.style.borderColor=this.selectedAnnotation.strokeColor;this.inputBoxElement.style.color=this.selectedAnnotation.fontColor;this.inputBoxElement.style.background=this.selectedAnnotation.fillColor;if(this.selectedAnnotation.font.isBold===true){this.inputBoxElement.style.fontWeight='bold';}if(this.selectedAnnotation.font.isItalic===true){this.inputBoxElement.style.fontStyle='italic';}if(this.selectedAnnotation.font.isUnderline===true){this.inputBoxElement.style.textDecoration='underline';}if(this.selectedAnnotation.font.isStrikeout===true){this.inputBoxElement.style.textDecoration='line-through';}if(this.pdfViewer.enableRtl){this.inputBoxElement.style.textAlign='right';this.inputBoxElement.style.direction='rtl';}else if(this.selectedAnnotation.textAlign){this.inputBoxElement.style.textAlign=this.selectedAnnotation.textAlign;}this.inputBoxElement.style.fontSize=this.selectedAnnotation.fontSize*zoomFactor+'px';this.inputBoxElement.style.fontFamily=this.selectedAnnotation.fontFamily;this.pdfViewer.drawing.clearSelectorLayer(pageIndex);this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{});}if(this.pdfViewerBase.isMixedSizeDocument){this.inputBoxElement.style.left=currentPosition.x+canvass.offsetLeft+'px';}this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=false;if(this.pdfViewer.freeTextSettings.enableAutoFit){this.autoFitFreeText(currentPosition.x,currentPosition.y);}pageDiv.appendChild(this.inputBoxElement);// eslint-disable-next-line
if(!this.pdfViewer.freeTextSettings.enableAutoFit&&this.defaultHeight*zoomFactor<this.inputBoxElement.scrollHeight&&parseInt(this.inputBoxElement.style.height)<this.inputBoxElement.scrollHeight){this.inputBoxElement.style.height=this.inputBoxElement.scrollHeight+'px';this.updateFreeTextAnnotationSize(true);}this.isInuptBoxInFocus=true;this.inputBoxElement.focus();if(this.isNewFreeTextAnnot===true||this.inputBoxElement.value===this.defaultText){this.inputBoxElement.select();this.pdfViewerBase.isFreeTextSelected=true;}};FreeTextAnnotation.prototype.applyFreetextStyles=function(zoomFactor,isReadonly){this.inputBoxElement.style.height=this.defaultHeight*zoomFactor+'px';this.inputBoxElement.style.width=this.defautWidth*zoomFactor+'px';this.inputBoxElement.style.borderWidth=this.borderWidth*zoomFactor+'px';this.inputBoxElement.style.fontSize=this.fontSize*zoomFactor+'px';this.inputBoxElement.style.fontFamily=this.fontFamily;this.inputBoxElement.readOnly=sf.base.isNullOrUndefined(isReadonly)?this.isReadonly:isReadonly;};/**
     * @private
     */FreeTextAnnotation.prototype.copySelectedText=function(){if(window.getSelection()!==null){this.selectedText=window.getSelection().toString();var textArea=document.createElement('textarea');textArea.contentEditable='true';textArea.textContent=this.selectedText;textArea.style.position='fixed';document.body.appendChild(textArea);textArea.select();try{document.execCommand('copy');}catch(ex){console.warn('Copy to clipboard failed.',ex);}finally{if(textArea){document.body.removeChild(textArea);}}}};/**
     * @param target
     * @private
     */ // eslint-disable-next-line
FreeTextAnnotation.prototype.pasteSelectedText=function(target){if(this.selectedText!==''&&target){// eslint-disable-next-line
var text=target.value;target.value=text.slice(0,this.selectionStart)+this.selectedText+text.slice(this.selectionEnd,text.length);}// eslint-disable-next-line
var events=event;this.onKeyDownInputBox(events);};/**
     * @param target
     * @private
     */ // eslint-disable-next-line
FreeTextAnnotation.prototype.cutSelectedText=function(target){if(window.getSelection()!==null){// eslint-disable-next-line
var text=target.value;this.selectedText=window.getSelection().toString();target.value=text.slice(0,target.selectionStart)+text.slice(target.selectionEnd);var textArea=document.createElement('textarea');textArea.contentEditable='true';textArea.textContent=this.selectedText;textArea.style.position='fixed';document.body.appendChild(textArea);textArea.select();try{document.execCommand('cut');}catch(ex){console.warn('Copy to clipboard failed.',ex);}finally{if(textArea){document.body.removeChild(textArea);}}}};/**
     * @param shapeAnnotations
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
FreeTextAnnotation.prototype.saveImportedFreeTextAnnotations=function(shapeAnnotations,pageNumber){// eslint-disable-next-line
var annotation=shapeAnnotations;if(annotation.AnnotType){var vertexPoints=null;if(annotation.VertexPoints){vertexPoints=[];for(var j=0;j<annotation.VertexPoints.length;j++){var point={x:annotation.VertexPoints[j].X,y:annotation.VertexPoints[j].Y};vertexPoints.push(point);}}// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);var annot=void 0;// eslint-disable-next-line max-len
annotation.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);var annotationBoundsX=!sf.base.isNullOrUndefined(annotation.Bounds.X)?annotation.Bounds.X:annotation.Bounds.x;var annotationBoundsY=!sf.base.isNullOrUndefined(annotation.Bounds.Y)?annotation.Bounds.Y:annotation.Bounds.y;var annotationBoundsWidth=annotation.Bounds.Width?annotation.Bounds.Width:annotation.Bounds.width;var annotationBoundsHeight=annotation.Bounds.Height?annotation.Bounds.Height:annotation.Bounds.height;// eslint-disable-next-line
annot={author:annotation.Author,allowedInteractions:annotation.allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,id:'freetext',rotateAngle:annotation.Rotate,dynamicText:annotation.MarkupText,strokeColor:annotation.StrokeColor,thickness:annotation.Thickness,fillColor:annotation.FillColor,bounds:{x:annotationBoundsX,y:annotationBoundsY,left:annotationBoundsX,top:annotationBoundsY,width:annotationBoundsWidth,height:annotationBoundsHeight,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},annotName:annotation.AnnotName,shapeAnnotationType:'FreeText',// eslint-disable-next-line
pageIndex:pageNumber,opacity:annotation.Opacity,fontColor:annotation.FontColor,fontSize:annotation.FontSize,fontFamily:annotation.FontFamily,notes:annotation.MarkupText,textAlign:annotation.TextAlign,// eslint-disable-next-line
comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},font:{isBold:annotation.Font.Bold,isItalic:annotation.Font.Italic,isStrikeout:annotation.Font.Strikeout,isUnderline:annotation.Font.Underline},annotationSelectorSettings:this.getSettings(annotation),annotationSettings:annotation.AnnotationSettings,// eslint-disable-next-line max-len
customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.IsPrint,isCommentLock:annotation.IsCommentLock,isReadonly:annotation.IsReadonly};this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annot,'_annotations_freetext');}};/**
     * @param shapeAnnotations
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
FreeTextAnnotation.prototype.updateFreeTextAnnotationCollections=function(shapeAnnotations,pageNumber){// eslint-disable-next-line
var annotation=shapeAnnotations;if(annotation.AnnotType){var vertexPoints=null;if(annotation.VertexPoints){vertexPoints=[];for(var j=0;j<annotation.VertexPoints.length;j++){var point={x:annotation.VertexPoints[j].X,y:annotation.VertexPoints[j].Y};vertexPoints.push(point);}}// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);if(annotation.IsLocked){annotation.AnnotationSettings.isLock=annotation.IsLocked;}// eslint-disable-next-line max-len
annotation.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);var annotationBoundsX=annotation.Bounds.X?annotation.Bounds.X:annotation.Bounds.x;var annotationBoundsY=annotation.Bounds.Y?annotation.Bounds.Y:annotation.Bounds.y;var width=annotation.Bounds.Width?annotation.Bounds.Width:annotation.Bounds.width;var height=annotation.Bounds.Height?annotation.Bounds.Height:annotation.Bounds.height;// eslint-disable-next-line
var annot=void 0;// eslint-disable-next-line
annot={author:annotation.Author,allowedInteractions:annotation.allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,id:'freetext',rotateAngle:annotation.Rotate,dynamicText:annotation.MarkupText,strokeColor:annotation.StrokeColor,thickness:annotation.Thickness,fillColor:annotation.FillColor,bounds:{x:annotationBoundsX,y:annotationBoundsY,left:annotationBoundsX,top:annotationBoundsY,width:width,height:height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},annotationId:annotation.AnnotName,shapeAnnotationType:'FreeText',// eslint-disable-next-line
pageIndex:pageNumber,opacity:annotation.Opacity,fontColor:annotation.FontColor,fontSize:annotation.FontSize,fontFamily:annotation.FontFamily,notes:annotation.MarkupText,// eslint-disable-next-line
comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},font:{isBold:annotation.Font.Bold,isItalic:annotation.Font.Italic,isStrikeout:annotation.Font.Strikeout,isUnderline:annotation.Font.Underline},pageNumber:pageNumber,annotationSettings:annotation.AnnotationSettings,isCommentLock:annotation.IsCommentLock};return annot;}};/**
     * This method used to add annotations with using program.
     *
     * @param annotationType - It describes type of annotation
     * @param offset - It describes about the annotation bounds
     * @returns Object
     * @private
     */FreeTextAnnotation.prototype.updateAddAnnotationDetails=function(annotationObject,offset){//Creating new object if annotationObject is null
if(!annotationObject){annotationObject={offset:{x:1,y:1},pageNumber:0,width:undefined,height:undefined};offset=annotationObject.offset;}else if(!annotationObject.offset)offset={x:1,y:1};else offset=annotationObject.offset;//Creating the CurrentDate and Annotation name
var currentDateString=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();var fontStyle=annotationObject.fontStyle?annotationObject.fontStyle:FontStyle.None;//Creating annotation settings
var annotationSelectorSettings=this.pdfViewer.freeTextSettings.annotationSelectorSettings?this.pdfViewer.freeTextSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;var annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);var allowedInteractions=this.pdfViewer.freeTextSettings.allowedInteractions?this.pdfViewer.freeTextSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;annotationSettings.isLock=annotationObject.isLock?annotationObject.isLock:false;annotationSettings.minHeight=annotationObject.minHeight?annotationObject.minHeight:0;annotationSettings.minWidth=annotationObject.minWidth?annotationObject.minWidth:0;annotationSettings.maxWidth=annotationObject.maxWidth?annotationObject.maxWidth:0;annotationSettings.maxHeight=annotationObject.maxHeight?annotationObject.maxHeight:0;annotationObject.width=annotationObject.width?annotationObject.width:150;annotationObject.height=annotationObject.height?annotationObject.height:24.6;//Creating Annotation objects with it's proper properties
var freeTextAnnotation=[];var freeText={AllowedInteractions:annotationObject.allowedInteractions?annotationObject.allowedInteractions:allowedInteractions,AnnotName:annotationName,AnnotType:'freeText',AnnotationFlags:'Default',AnnotationIntent:null,AnnotationSelectorSettings:annotationObject.annotationSelectorSettings?annotationObject.annotationSelectorSettings:annotationSelectorSettings,AnnotationSettings:annotationSettings,Author:annotationObject.author?annotationObject.author:'Guest',Border:{HorizontalRadius:0,VerticalRadius:0,Width:annotationObject.borderWidth?annotationObject.borderWidth:1},BorderColor:{IsEmpty:true,B:255,Blue:1,C:0,G:255},Bounds:{X:offset.x,Y:offset.y,Width:annotationObject.width,Height:annotationObject.height,Left:offset.x,Top:offset.y,Right:offset.x+annotationObject.width,Bottom:offset.y+annotationObject.height},CalloutLines:null,Color:{IsEmpty:false,B:51,Blue:0.2,C:0,G:255},Comments:null,CreatedDate:currentDateString,CustomData:annotationObject.customData?annotationObject.customData:null,ExistingCustomData:null,FillColor:annotationObject.fillColor?annotationObject.fillColor:'#ffffff00',Flatten:false,FlattenPopups:false,Font:{Bold:fontStyle==FontStyle.Bold?true:false,Italic:fontStyle==FontStyle.Italic?true:false,Strikeout:fontStyle==FontStyle.Strikethrough?true:false,Underline:fontStyle==FontStyle.Underline?true:false},FontColor:annotationObject.fontColor?annotationObject.fontColor:'#000',FontFamily:annotationObject.fontFamily?annotationObject.fontFamily:'Helvetica',FontSize:annotationObject.fontSize?annotationObject.fontSize:16,FreeTextAnnotationType:'Text Box',InnerColor:null,IsCommentLock:false,IsLock:annotationObject.isLock?annotationObject.isLock:false,IsPrint:annotationObject.isPrint!==null&&annotationObject.isPrint!==undefined?annotationObject.isPrint:true,Layer:null,LineEndingStyle:'OpenArrow',Location:null,MarkupText:annotationObject.defaultText?annotationObject.defaultText:'Type Here',ModifiedDate:currentDateString,Name:annotationName,Opacity:annotationObject.opacity?annotationObject.opacity:1,Page:null,PageTags:null,ReviewHistory:null,Rotate:0,IsReadonly:annotationObject.isReadonly?annotationObject.isReadonly:false,State:'Unmarked',StateModel:'None',StrokeColor:annotationObject.borderColor?annotationObject.borderColor:'#ffffff00',Subject:'Text Box',Text:annotationObject.defaultText?annotationObject.defaultText:'Type Here',TextAlign:annotationObject.textAlignment?annotationObject.textAlignment:'Left',TextMarkupColor:null,Thickness:annotationObject.borderWidth?annotationObject.borderWidth:1};//Adding the annotation object to an array and return it
freeTextAnnotation[0]=freeText;return{freeTextAnnotation:freeTextAnnotation};};/**
     * This method used to get the padding.
    */FreeTextAnnotation.prototype.getPaddingValues=function(fontSize){var leftPadding=4;// Left padding used in the drawing.js
var topPadding=5;// Top padding used in the drawing.js
var inputBoxpadding=2;// we have set the input box padding for the free text.
topPadding=(topPadding-inputBoxpadding)*(fontSize/16);return[leftPadding,topPadding];};return FreeTextAnnotation;}();/**
 * @hidden
 */var InputElement=/** @class */function(){function InputElement(pdfviewer,pdfViewerBase){this.pdfViewer=pdfviewer;this.pdfViewerBase=pdfViewerBase;this.inputBoxElement=document.createElement('input');this.inputBoxElement.addEventListener('focusout',this.onFocusOutInputBox.bind(this));this.maxHeight=24.6;this.maxWidth=151;this.fontSize=16;this.isInFocus=false;this.inputBoxElement.style.position='absolute';this.inputBoxElement.style.fontFamily='Helvetica';}/**
     * @param currentPosition
     * @param annotation
     * @private
     */InputElement.prototype.editLabel=function(currentPosition,annotation){var pageIndex=this.pdfViewerBase.currentPageNumber-1;var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+pageIndex);var zoomFactor=this.pdfViewerBase.getZoomFactor();this.inputBoxElement.value=annotation.labelContent;this.inputBoxElement.select();annotation.labelContent='';this.pdfViewer.nodePropertyChange(annotation,{});this.inputBoxElement.style.left=currentPosition.x*zoomFactor+'px';this.inputBoxElement.style.top=currentPosition.y*zoomFactor+'px';this.inputBoxElement.style.maxHeight=this.maxHeight*zoomFactor+'px';this.inputBoxElement.style.maxWidth=this.maxWidth*zoomFactor+'px';this.inputBoxElement.style.fontSize=this.fontSize*zoomFactor+'px';this.inputBoxElement.style.textAlign='center';if(annotation&&annotation.wrapper&&annotation.wrapper.bounds){// eslint-disable-next-line max-len
this.inputBoxElement.style.width=annotation.wrapper.bounds.width?annotation.wrapper.bounds.width/2*zoomFactor+1+'px':this.maxWidth*zoomFactor+'px';var inputEleWidth=parseFloat(this.inputBoxElement.style.width);inputEleWidth=inputEleWidth>this.maxWidth*zoomFactor?this.maxWidth*zoomFactor:inputEleWidth;if(annotation.wrapper.bounds.left){// eslint-disable-next-line max-len
this.inputBoxElement.style.left=(annotation.wrapper.bounds.left+annotation.wrapper.bounds.width/2-inputEleWidth/(zoomFactor*2))*zoomFactor+'px';}if(annotation.wrapper.bounds.top){// eslint-disable-next-line max-len
if(annotation.shapeAnnotationType==='Line'||annotation.shapeAnnotationType==='LineWidthArrowHead'||annotation.shapeAnnotationType==='Distance'||annotation.shapeAnnotationType==='Polygon'){// eslint-disable-next-line max-len
this.inputBoxElement.style.top=(annotation.wrapper.bounds.top+annotation.wrapper.bounds.height/2-this.maxHeight)*zoomFactor+'px';}else{// eslint-disable-next-line max-len
this.inputBoxElement.style.top=(annotation.wrapper.bounds.top+annotation.wrapper.bounds.height/2-this.maxHeight/2)*zoomFactor+'px';}}this.inputBoxElement.maxLength=annotation.labelMaxLength;this.inputBoxElement.fontFamily=annotation.fontFamily;this.inputBoxElement.style.color=annotation.fontColor;this.inputBoxElement.style.border='1px solid #ffffff00';this.inputBoxElement.style.padding='2px';this.inputBoxElement.style.background=annotation.labelFillColor;}pageDiv.appendChild(this.inputBoxElement);this.isInFocus=true;this.inputBoxElement.focus();};/**
     * @private
     */InputElement.prototype.onFocusOutInputBox=function(){var pageIndex=this.pdfViewerBase.currentPageNumber-1;var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+pageIndex);var inputEleHeight=parseFloat(this.inputBoxElement.style.height);var inputEleWidth=parseFloat(this.inputBoxElement.style.width);this.isInFocus=false;var selectedAnnotation=this.pdfViewer.selectedItems.annotations[0];// eslint-disable-next-line
if(selectedAnnotation){inputEleWidth=(inputEleWidth-1)/this.pdfViewerBase.getZoomFactor();inputEleHeight=(inputEleHeight-1)/this.pdfViewerBase.getZoomFactor();// this.pdfViewer.annotation.modifyDynamicTextValue(this.inputBoxElement.value, this.selectedAnnotation.annotName);
selectedAnnotation.labelContent=this.inputBoxElement.value;selectedAnnotation.notes=this.inputBoxElement.value;// eslint-disable-next-line max-len
if(selectedAnnotation.shapeAnnotationType==='Rectangle'||selectedAnnotation.shapeAnnotationType==='Ellipse'||selectedAnnotation.shapeAnnotationType==='Line'||selectedAnnotation.shapeAnnotationType==='LineWidthArrowHead'){this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection('labelContent',pageIndex,selectedAnnotation);}else if(selectedAnnotation.shapeAnnotationType==='Radius'&&selectedAnnotation.measureType){this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('labelContent',pageIndex,selectedAnnotation);}// eslint-disable-next-line
this.pdfViewer.nodePropertyChange(selectedAnnotation,{});this.pdfViewer.renderSelector(selectedAnnotation.pageIndex,this.pdfViewer.annotationSelectorSettings);// eslint-disable-next-line
var commentsDiv=document.getElementById(this.pdfViewer.selectedItems.annotations[0].annotName);if(commentsDiv&&commentsDiv.childNodes&&this.inputBoxElement.value!=='label'){if(commentsDiv.childNodes[0].ej2_instances){commentsDiv.childNodes[0].ej2_instances[0].value=this.inputBoxElement.value;}else if(commentsDiv.childNodes[0].childNodes&&commentsDiv.childNodes[0].childNodes[1].ej2_instances){commentsDiv.childNodes[0].childNodes[1].ej2_instances[0].value=this.inputBoxElement.value;}}}pageDiv.removeChild(this.inputBoxElement);var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvass,pageIndex);};/**
     * @param bounds
     * @param pageIndex
     * @param bounds
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
InputElement.prototype.calculateLabelBounds=function(bounds,pageIndex){// eslint-disable-next-line
var labelBounds={};if(bounds){var labelTop=0;var labelLeft=0;var labelWidth=0;var labelHeight=24.6;var labelMaxWidth=151;if(pageIndex===undefined){pageIndex=this.pdfViewerBase.currentPageNumber-1;}var rotation=this.pdfViewerBase.pageSize[pageIndex].rotation;if(bounds.width){// eslint-disable-next-line max-len
labelWidth=bounds.width/2;labelWidth=labelWidth>0&&labelWidth<labelMaxWidth?labelWidth:labelMaxWidth;}if(bounds.left){// eslint-disable-next-line max-len
labelLeft=bounds.left+bounds.width/2-labelWidth/2;}if(bounds.top){// eslint-disable-next-line max-len
labelTop=bounds.top+bounds.height/2-labelHeight/2;}if(rotation===1||rotation===3){// eslint-disable-next-line max-len
labelBounds={left:labelLeft,top:labelTop,width:labelWidth-labelHeight+labelWidth/2,height:labelHeight*2+labelWidth,right:0,bottom:0};}else{// eslint-disable-next-line max-len
labelBounds={left:labelLeft,top:labelTop,width:labelWidth,height:labelHeight,right:0,bottom:0};}}return labelBounds;};/**
     * @param bounds
     * @private
     */ // eslint-disable-next-line
InputElement.prototype.calculateLabelBoundsFromLoadedDocument=function(bounds){// eslint-disable-next-line
var labelBounds={};if(bounds){var labelTop=0;var labelLeft=0;var labelWidth=0;var labelHeight=24.6;var labelMaxWidth=151;if(bounds.Width){// eslint-disable-next-line max-len
labelWidth=bounds.Width/2;labelWidth=labelWidth>0&&labelWidth<labelMaxWidth?labelWidth:labelMaxWidth;}if(bounds.Left){// eslint-disable-next-line max-len
labelLeft=bounds.Left+bounds.Width/2-labelWidth/2;}if(bounds.Top){// eslint-disable-next-line max-len
labelTop=bounds.Top+bounds.Height/2-labelHeight/2;}// eslint-disable-next-line max-len
labelBounds={left:labelLeft,top:labelTop,width:labelWidth,height:labelHeight,right:0,bottom:0};}return labelBounds;};return InputElement;}();/**
 * The `Annotation` module is used to handle annotation actions of PDF viewer.
 */var Annotation=/** @class */function(){/**
     * @param pdfViewer
     * @param viewerBase
     * @param pdfViewer
     * @param viewerBase
     * @private
     */function Annotation(pdfViewer,viewerBase){this.isUndoRedoAction=false;this.isUndoAction=false;this.annotationSelected=true;/**
         * @private
         */this.isShapeCopied=false;/**
         * @private
         */this.actionCollection=[];/**
         * @private
         */this.redoCollection=[];/**
         * @private
         */this.isPopupNoteVisible=false;/**
         * @private
         */this.undoCommentsElement=[];/**
         * @private
         */this.redoCommentsElement=[];/**
         * @private
         */this.selectAnnotationId=null;/**
         * @private
         */this.isAnnotationSelected=false;/**
         * @private
         */this.annotationPageIndex=null;this.previousIndex=null;// eslint-disable-next-line
this.overlappedAnnotations=[];/**
         * @private
         */ // eslint-disable-next-line
this.overlappedCollections=[];/**
         * @private
         */ // eslint-disable-next-line
this.isFormFieldShape=false;/**
         * @private
         */ // eslint-disable-next-line
this.removedAnnotationCollection=[];this.oldProperties=null;this.pdfViewer=pdfViewer;this.pdfViewerBase=viewerBase;if(this.pdfViewer.enableTextMarkupAnnotation){this.textMarkupAnnotationModule=new TextMarkupAnnotation(this.pdfViewer,this.pdfViewerBase);}if(this.pdfViewer.enableShapeAnnotation){this.shapeAnnotationModule=new ShapeAnnotation(this.pdfViewer,this.pdfViewerBase);}if(this.pdfViewer.enableMeasureAnnotation){this.measureAnnotationModule=new MeasureAnnotation(this.pdfViewer,this.pdfViewerBase);}this.stampAnnotationModule=new StampAnnotation(this.pdfViewer,this.pdfViewerBase);this.stickyNotesAnnotationModule=new StickyNotesAnnotation(this.pdfViewer,this.pdfViewerBase);this.freeTextAnnotationModule=new FreeTextAnnotation(this.pdfViewer,this.pdfViewerBase);this.inputElementModule=new InputElement(this.pdfViewer,this.pdfViewerBase);this.inkAnnotationModule=new InkAnnotation(this.pdfViewer,this.pdfViewerBase);}/**
     * Set annotation type to be added in next user interaction in PDF Document.
     *
     * @param type
     * @param dynamicStampItem
     * @param signStampItem
     * @param standardBusinessStampItem
     * @returns void
     */ // eslint-disable-next-line max-len
Annotation.prototype.setAnnotationMode=function(type,dynamicStampItem,signStampItem,standardBusinessStampItem){var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);type!=='None'?this.triggerAnnotationUnselectEvent():null;if(type==='None'){this.clearAnnotationMode();}else if(type==='Highlight'||type==='Strikethrough'||type==='Underline'){if(this.textMarkupAnnotationModule){this.textMarkupAnnotationModule.isSelectionMaintained=false;this.textMarkupAnnotationModule.drawTextMarkupAnnotations(type.toString());}}else if(type==='Line'||type==='Arrow'||type==='Rectangle'||type==='Circle'||type==='Polygon'){if(this.shapeAnnotationModule){this.shapeAnnotationModule.setAnnotationType(type);}}else if(type==='Distance'||type==='Perimeter'||type==='Area'||type==='Radius'||type==='Volume'){if(this.measureAnnotationModule){this.measureAnnotationModule.setAnnotationType(type);}}else if(type==='FreeText'&&this.freeTextAnnotationModule){this.freeTextAnnotationModule.setAnnotationType('FreeText');this.freeTextAnnotationModule.isNewFreeTextAnnot=true;this.freeTextAnnotationModule.isNewAddedAnnot=true;}else if(type==='HandWrittenSignature'){this.pdfViewerBase.signatureModule.setAnnotationMode();}else if(type==='Initial'){this.pdfViewerBase.signatureModule.setInitialMode();}else if(type==='Ink'){this.inkAnnotationModule.setAnnotationMode();}else if(type==='StickyNotes'){this.pdfViewerBase.isCommentIconAdded=true;this.pdfViewerBase.isAddComment=true;// eslint-disable-next-line max-len
var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+(this.pdfViewerBase.currentPageNumber-1));if(pageDiv){pageDiv.addEventListener('mousedown',this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this));}}else if(type==='Stamp'){this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=true;this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=true;this.pdfViewerBase.stampAdded=true;if(dynamicStampItem){// eslint-disable-next-line
var stampName=DynamicStampItem[dynamicStampItem];this.pdfViewerBase.isDynamicStamp=true;this.stampAnnotationModule.retrieveDynamicStampAnnotation(stampName);}else if(signStampItem){// eslint-disable-next-line
var stampName=SignStampItem[signStampItem];this.pdfViewerBase.isDynamicStamp=false;this.stampAnnotationModule.retrievestampAnnotation(stampName);}else if(standardBusinessStampItem){// eslint-disable-next-line
var stampName=StandardBusinessStampItem[standardBusinessStampItem];this.pdfViewerBase.isDynamicStamp=false;this.stampAnnotationModule.retrievestampAnnotation(stampName);}}this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);this.pdfViewerBase.initiateTextSelection();};Annotation.prototype.deleteAnnotationById=function(annotationId){if(annotationId){this.annotationSelected=false;if(annotationId&&this.pdfViewer.annotations&&this.pdfViewer.annotations.length>0&&this.pdfViewer.annotations[0].annotName){if(annotationId!==this.pdfViewer.annotations[0].annotName){this.selectAnnotation(annotationId);}}this.deleteAnnotation();}};Annotation.prototype.clearAnnotationMode=function(){if(this.textMarkupAnnotationModule){this.textMarkupAnnotationModule.isTextMarkupAnnotationMode=false;}if(this.freeTextAnnotationModule){this.freeTextAnnotationModule.isNewFreeTextAnnot=false;this.freeTextAnnotationModule.isNewAddedAnnot=false;}if(this.pdfViewerBase.isTextMarkupAnnotationModule()){this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode='';}if(this.pdfViewerBase.isShapeAnnotationModule()){this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode='';}if(this.pdfViewerBase.isCalibrateAnnotationModule()){this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode='';}if(this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}};Annotation.prototype.deleteAnnotation=function(){if(this.textMarkupAnnotationModule){this.textMarkupAnnotationModule.deleteTextMarkupAnnotation();}var selectedAnnotation=this.pdfViewer.selectedItems.annotations[0];if(selectedAnnotation){var data=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_formfields');var formFieldsData=JSON.parse(data);var newFormFieldsData=[];if(formFieldsData){for(var x=0;x<formFieldsData.length;x++){if(formFieldsData[x].uniqueID==selectedAnnotation.id){formFieldsData[x].Value='';}newFormFieldsData.push(formFieldsData[x]);}window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_formfields',JSON.stringify(newFormFieldsData));}}var isLock=false;var isReadOnly=false;if(this.pdfViewer.selectedItems.annotations.length>0){// eslint-disable-next-line
var annotation_1=this.pdfViewer.selectedItems.annotations[0];var type=annotation_1.shapeAnnotationType;if(type==='Path'||annotation_1.formFieldAnnotationType==='SignatureField'||annotation_1.formFieldAnnotationType==='InitialField'||type==='HandWrittenSignature'||type==='SignatureText'||type==='SignatureImage'){var inputFields=document.getElementById(annotation_1.id);if(inputFields&&inputFields.disabled){isReadOnly=true;}}if(annotation_1.annotationSettings){isLock=annotation_1.annotationSettings.isLock;if(isLock&&this.checkAllowedInteractions('Delete',annotation_1)){isLock=false;}}if(!isLock&&!isReadOnly){var pageNumber=annotation_1.pageIndex;// eslint-disable-next-line
var shapeType=annotation_1.shapeAnnotationType;// eslint-disable-next-line
var undoElement=void 0;if(shapeType==='Line'||shapeType==='LineWidthArrowHead'||shapeType==='Polygon'||shapeType==='Ellipse'||shapeType==='Rectangle'||shapeType==='Radius'||shapeType==='Distance'){// eslint-disable-next-line max-len
if(sf.base.isNullOrUndefined(annotation_1.measureType)||annotation_1.measureType===''){this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1,'shape');this.updateImportAnnotationCollection(annotation_1,pageNumber,'shapeAnnotation');}else{// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1,'measure');// eslint-disable-next-line max-len
this.updateImportAnnotationCollection(annotation_1,pageNumber,'measureShapeAnnotation');}undoElement=this.modifyInCollections(annotation_1,'delete');}else if(shapeType==='FreeText'){// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1,'FreeText','delete');undoElement=this.modifyInCollections(annotation_1,'delete');this.updateImportAnnotationCollection(annotation_1,pageNumber,'freeTextAnnotation');}else if(shapeType==='HandWrittenSignature'||shapeType==='SignatureImage'||shapeType==='SignatureText'){undoElement=this.modifyInCollections(annotation_1,'delete');}else if(shapeType==='Ink'){// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1,'Ink','delete');undoElement=this.modifyInCollections(annotation_1,'delete');this.updateImportAnnotationCollection(annotation_1,pageNumber,'signatureInkAnnotation');}else{undoElement=this.pdfViewer.selectedItems.annotations[0];// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(undoElement,undoElement.shapeAnnotationType,'delete');// eslint-disable-next-line max-len
this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(annotation_1,null,'delete');}if(shapeType==='StickyNotes'){this.updateImportAnnotationCollection(annotation_1,pageNumber,'stickyNotesAnnotation');}if(shapeType==='Stamp'||'Image'){this.updateImportAnnotationCollection(annotation_1,pageNumber,'stampAnnotations');}// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageNumber,null,annotation_1,'Delete','',undoElement,annotation_1);// eslint-disable-next-line
var removeDiv=void 0;if(annotation_1.annotName!==''){removeDiv=document.getElementById(annotation_1.annotName);}else{if(undoElement){if(undoElement.annotName!==''){removeDiv=document.getElementById(undoElement.annotName);}}}if(removeDiv){if(removeDiv.parentElement.childElementCount===1){this.stickyNotesAnnotationModule.updateAccordionContainer(removeDiv);}this.pdfViewer._dotnetInstance.invokeMethodAsync('RemoveCommentsCollection',annotation_1.annotName,pageNumber);}var selectedAnnot=this.pdfViewer.selectedItems.annotations[0];var annotationId=selectedAnnot.annotName;var annotType=this.getAnnotationType(selectedAnnot.shapeAnnotationType,selectedAnnot.measureType);if(shapeType==='Path'||selectedAnnot.formFieldAnnotationType==='SignatureField'||selectedAnnot.formFieldAnnotationType==='InitialField'||shapeType==='HandWrittenSignature'||shapeType==='SignatureText'||shapeType==='SignatureImage'){// eslint-disable-next-line
var inputFields=document.getElementById(selectedAnnot.id);var signatureFieldElement=document.getElementById(selectedAnnot.id+"_html_element");if(inputFields===null&&!sf.base.isNullOrUndefined(signatureFieldElement)){inputFields=signatureFieldElement.children[0].children[0];}if(inputFields&&inputFields.classList.contains('e-pdfviewer-signatureformfields-signature')){inputFields.className='e-pdfviewer-signatureformfields';inputFields.style.pointerEvents='';inputFields.parentElement.style.pointerEvents='';if(this.pdfViewer.formDesignerModule){this.pdfViewer.formDesignerModule.updateSignatureValue(selectedAnnot.id);}else{this.pdfViewer.formFieldsModule.updateDataInSession(inputFields,'');}}// eslint-disable-next-line
var formFieldCollection=this.pdfViewer.retrieveFormFields();for(var m=0;m<formFieldCollection.length;m++){if(selectedAnnot.id===formFieldCollection[m].id){formFieldCollection[m].value='';formFieldCollection[m].signatureType='';}}}if(this.pdfViewer.formDesignerModule&&selectedAnnot.formFieldAnnotationType)this.updateFormFieldCollection(annotation_1);else this.updateAnnotationCollection(annotation_1);var formFieldObj=this.pdfViewer.nameTable[annotation_1.id.split("_")[0]];if(formFieldObj!=null&&(formFieldObj.formFieldAnnotationType==='SignatureField'||formFieldObj.formFieldAnnotationType==='InitialField'||formFieldObj.annotName==='SignatureField'||formFieldObj.annotName==='InitialField')){formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(annotation_1.wrapper.children[0]),1);var index=this.pdfViewer.formFieldCollections.findIndex(function(el){return el.id===annotation_1.id;});var formFieldName=void 0;if(index>-1){formFieldName=this.pdfViewer.formFieldCollections[index].name;}var data=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_formfields');var formFieldsData=JSON.parse(data);var newFormFieldsData=[];for(var i=0;i<this.pdfViewer.formFieldCollections.length;i++){if(formFieldName===this.pdfViewer.formFieldCollections[i].name&&formFieldName===formFieldsData[i].FieldName){var formFieldsIndex=this.pdfViewer.formFieldCollections[i];this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",formFieldsIndex,formFieldsIndex.pageIndex,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,formFieldsIndex.value,"");formFieldsData[i].Value="";var annotation_2=this.getAnnotationsFromCollections(formFieldsIndex.id);undoElement=this.modifyInCollections(annotation_2,'delete');// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(annotation_2.pageIndex,null,annotation_2,'Delete','',undoElement,annotation_2);this.updateInputFieldDivElement(annotation_2);var formFieldObject=this.pdfViewer.nameTable[annotation_2.id];formFieldObject.wrapper.children.splice(formFieldObject.wrapper.children.indexOf(annotation_2.wrapper.children[0]),1);this.pdfViewer.remove(annotation_2);}newFormFieldsData.push(formFieldsData[i]);}window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_formfields',JSON.stringify(newFormFieldsData));}this.pdfViewer.remove(annotation_1);this.pdfViewer.renderDrawing();this.pdfViewer.clearSelection(pageNumber);this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');this.pdfViewerBase.updateDocumentEditedProperty(true);this.pdfViewerBase.tool=null;this.pdfViewer.tool=null;if(selectedAnnot.shapeAnnotationType==='HandWrittenSignature'||selectedAnnot.shapeAnnotationType==='SignatureText'||selectedAnnot.shapeAnnotationType==='SignatureImage'){// eslint-disable-next-line max-len
var bounds={left:selectedAnnot.bounds.x,top:selectedAnnot.bounds.y,width:selectedAnnot.bounds.width,height:selectedAnnot.bounds.height};// eslint-disable-next-line max-len
this.pdfViewer.fireSignatureRemove(pageNumber,selectedAnnot.signatureName,selectedAnnot.shapeAnnotationType,bounds);}else if(this.pdfViewer.annotationModule){// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationRemove(pageNumber,annotationId,annotType,selectedAnnot.bounds);}if(this.pdfViewer.textSelectionModule){this.pdfViewer.textSelectionModule.enableTextSelectionMode();}}}this.updateToolbar(true);if(this.pdfViewer.toolbarModule){if(this.pdfViewer.toolbarModule.annotationToolbarModule&&!isLock){this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(false,true);this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(false);}}};/**
     * @param annotationId
     */ // eslint-disable-next-line max-len
Annotation.prototype.getAnnotationsFromCollections=function(annotationId){var collections=this.pdfViewer.annotations;if(collections&&annotationId){for(var i=0;i<collections.length;i++){if(collections[i].id===annotationId){return collections[i];}}}};/**
     * @param annotation
     */Annotation.prototype.updateInputFieldDivElement=function(annotation){var inputFields=document.getElementById(annotation.id);var signatureFieldElement=document.getElementById(annotation.id+"_html_element");if(inputFields===null&&!sf.base.isNullOrUndefined(signatureFieldElement)){inputFields=signatureFieldElement.children[0].children[0];}if(inputFields&&inputFields.classList.contains('e-pdfviewer-signatureformfields-signature')||inputFields.classList.contains('e-pdfviewer-signatureformfields')){inputFields.className='e-pdfviewer-signatureformfields';inputFields.style.pointerEvents='';inputFields.parentElement.style.pointerEvents='';if(this.pdfViewer.formDesignerModule){this.pdfViewer.formDesignerModule.updateSignatureValue(annotation.id);}else{this.pdfViewer.formFieldsModule.updateDataInSession(inputFields,'');}}};/**
     * @param annotation
     * @param pageNumber
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.storeAnnotationCollections=function(annotation,pageNumber){if(this.isFormFieldShape){var collectionDetails=this.checkFormDesignCollection(annotation);var selectAnnotation=cloneObject(annotation);selectAnnotation.formFieldId=annotation.annotName;selectAnnotation.pageNumber=pageNumber;delete selectAnnotation.annotName;if(annotation.id){selectAnnotation.uniqueKey=annotation.id;delete selectAnnotation.id;}if(collectionDetails.isExisting){this.pdfViewer.formFieldCollection.splice(collectionDetails.position,0,selectAnnotation);}else{this.pdfViewer.formFieldCollection.push(selectAnnotation);}}else{// eslint-disable-next-line
var collectionDetails=this.checkAnnotationCollection(annotation);// eslint-disable-next-line
var selectAnnotation=cloneObject(annotation);selectAnnotation.annotationId=annotation.annotName;selectAnnotation.pageNumber=pageNumber;delete selectAnnotation.annotName;if(annotation.shapeAnnotationType==='stamp'){selectAnnotation.uniqueKey=annotation.randomId;delete selectAnnotation.randomId;}if(annotation.shapeAnnotationType==='sticky'){selectAnnotation.uniqueKey=annotation.annotName;}if(annotation.id){selectAnnotation.uniqueKey=annotation.id;delete selectAnnotation.id;}// eslint-disable-next-line
if(selectAnnotation.customData&&annotation.customData&&JSON.stringify(selectAnnotation.customData)!==JSON.stringify(annotation.customData)){selectAnnotation.customData=annotation.customData;}if(collectionDetails.isExisting){this.pdfViewer.annotationCollection.splice(collectionDetails.position,0,selectAnnotation);}else{this.pdfViewer.annotationCollection.push(selectAnnotation);}}};Annotation.prototype.checkFormDesignCollection=function(annotation){// eslint-disable-next-line
var collections=this.pdfViewer.formFieldCollection;if(collections&&annotation){for(var i=0;i<collections.length;i++){if(collections[i].formFieldId===annotation.annotName){this.pdfViewer.formFieldCollection.splice(i,1);return{isExisting:true,position:i};}}}return{isExisting:false,position:null};};Annotation.prototype.updateFormFieldCollection=function(annotation){// eslint-disable-next-line
var collections=this.pdfViewer.formFieldCollection;if(collections&&annotation){for(var i=0;i<collections.length;i++){if(collections[i].formFieldId===annotation.annotName){this.removedAnnotationCollection.push(collections[i]);this.pdfViewer.formFieldCollection.splice(i,1);break;}}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getCustomData=function(annotation){var customData;if(annotation.ExistingCustomData&&!annotation.CustomData){customData=JSON.parse(annotation.ExistingCustomData);}else if(annotation.CustomData===null){if(annotation.shapeAnnotationType==='sticky'){customData=this.pdfViewer.stickyNotesSettings.customData;}if(annotation.shapeAnnotationType==='Stamp'){customData=this.pdfViewer.stampSettings.customData;}if(annotation.shapeAnnotationType==='FreeText'){customData=this.pdfViewer.freeTextSettings.customData;}if(annotation.id==='shape'){customData=this.getShapeData(annotation.ShapeAnnotationType,annotation.subject);}if(annotation.id==='measure'){customData=this.getMeasureData(annotation.Subject);}if(annotation.shapeAnnotationType==='textMarkup'){customData=this.getTextMarkupData(annotation.subject);}if(annotation.shapeAnnotationType==='Ink'){customData=this.pdfViewer.inkAnnotationSettings.customData;}}else{customData=annotation.CustomData;}return customData;};/**
     * @param type
     * @param subject
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getShapeData=function(type,subject){var customData;if(type==='Line'&&subject!=='Arrow'&&this.pdfViewer.lineSettings.customData){customData=this.pdfViewer.lineSettings.customData;}else if((type==='LineWidthArrowHead'||subject==='Arrow')&&this.pdfViewer.arrowSettings.customData){customData=this.pdfViewer.arrowSettings.customData;}else if((type==='Rectangle'||type==='Square')&&this.pdfViewer.rectangleSettings.customData){customData=this.pdfViewer.rectangleSettings.customData;}else if((type==='Ellipse'||type==='Circle')&&this.pdfViewer.circleSettings.customData){customData=this.pdfViewer.circleSettings.customData;}else if(type==='Polygon'&&this.pdfViewer.polygonSettings.customData){customData=this.pdfViewer.polygonSettings.customData;}else if(this.pdfViewer.annotationSettings.customData){customData=this.pdfViewer.annotationSettings.customData;}return customData;};/**
     * @param type
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getMeasureData=function(type){var customData;if((type==='Distance'||type==='Distance calculation')&&this.pdfViewer.distanceSettings.customData){customData=this.pdfViewer.distanceSettings.customData;}else if((type==='Line'||type==='Perimeter calculation')&&this.pdfViewer.lineSettings.customData){customData=this.pdfViewer.lineSettings.customData;// eslint-disable-next-line max-len
}else if((type==='Polygon'||type==='Area calculation'||type==='Volume calculation')&&this.pdfViewer.polygonSettings.customData){customData=this.pdfViewer.polygonSettings.customData;}else if((type==='Radius'||type==='Radius calculation')&&this.pdfViewer.radiusSettings.customData){customData=this.pdfViewer.radiusSettings.customData;}else if(this.pdfViewer.annotationSettings.customData){customData=this.pdfViewer.annotationSettings.customData;}return customData;};/**
     * @param type
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getTextMarkupData=function(type){var customData;if(type==='Highlight'&&this.pdfViewer.highlightSettings.customData){customData=this.pdfViewer.highlightSettings.customData;}else if(type==='Underline'&&this.pdfViewer.underlineSettings.customData){customData=this.pdfViewer.underlineSettings.customData;}else if(type==='Strikethrough'&&this.pdfViewer.strikethroughSettings.customData){customData=this.pdfViewer.strikethroughSettings.customData;}else if(this.pdfViewer.annotationSettings.customData){customData=this.pdfViewer.annotationSettings.customData;}return customData;};/**
     * @param type
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getData=function(type){var customData;if(type==='FreeText'&&this.pdfViewer.freeTextSettings.customData){customData=this.pdfViewer.freeTextSettings.customData;}else if((type==='image'||type==='Stamp')&&this.pdfViewer.stampSettings.customData){customData=this.pdfViewer.stampSettings.customData;}else if(type==='sticky'&&this.pdfViewer.stickyNotesSettings.customData){customData=this.pdfViewer.stickyNotesSettings.customData;}else if(this.pdfViewer.annotationSettings.customData){customData=this.pdfViewer.annotationSettings.customData;}return customData;};/**
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.clearAnnotationStorage=function(){// eslint-disable-next-line
var sessionSize=Math.round(JSON.stringify(window.sessionStorage).length/1024);var maxSessionSize=4500;if(sessionSize>maxSessionSize){var storageLength=window.sessionStorage.length;// eslint-disable-next-line
var annotationList=[];for(var i=0;i<storageLength;i++){if(window.sessionStorage.key(i)&&window.sessionStorage.key(i).split('_')[3]){if(window.sessionStorage.key(i).split('_')[3]==='annotations'){// eslint-disable-next-line max-len
this.pdfViewerBase.annotationStorage[window.sessionStorage.key(i)]=window.sessionStorage.getItem(window.sessionStorage.key(i));annotationList.push(window.sessionStorage.key(i));}}}if(annotationList){for(var i=0;i<annotationList.length;i++){window.sessionStorage.removeItem(annotationList[i]);}}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.checkAnnotationCollection=function(annotation){// eslint-disable-next-line
var collections=this.pdfViewer.annotationCollection;if(collections&&annotation){for(var i=0;i<collections.length;i++){if(collections[i].annotationId===annotation.annotName){this.pdfViewer.annotationCollection.splice(i,1);return{isExisting:true,position:i};}}}return{isExisting:false,position:null};};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.updateAnnotationCollection=function(annotation){// eslint-disable-next-line
var collections=this.pdfViewer.annotationCollection;if(collections&&annotation){for(var i=0;i<collections.length;i++){if(collections[i].annotationId===annotation.annotName){this.removedAnnotationCollection.push(collections[i]);this.pdfViewer.annotationCollection.splice(i,1);break;}}}};/**
     * @param annotation
     * @param pageNumber
     * @param annotationType
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.updateImportAnnotationCollection=function(annotation,pageNumber,annotationType){if(this.pdfViewerBase.isImportAction){if(this.pdfViewerBase.importedAnnotation&&this.pdfViewerBase.importedAnnotation[pageNumber]){// eslint-disable-next-line
var currentPageAnnotations=this.pdfViewerBase.importedAnnotation[pageNumber];if(currentPageAnnotations[annotationType]){for(var i=0;i<currentPageAnnotations[annotationType].length;i++){// eslint-disable-next-line max-len
if(annotation.annotName===currentPageAnnotations[annotationType][i].AnnotName||annotation.annotName===currentPageAnnotations[annotationType][i].annotName){this.pdfViewerBase.importedAnnotation[pageNumber][annotationType].splice(i,1);break;}}}}}// eslint-disable-next-line
var documentcollections=this.pdfViewerBase.documentAnnotationCollections;if(documentcollections&&documentcollections[pageNumber]){// eslint-disable-next-line
var documentPageCollections=documentcollections[pageNumber];if(documentPageCollections&&documentPageCollections[annotationType]){for(var i=0;i<documentPageCollections[annotationType].length;i++){// eslint-disable-next-line max-len
if(annotation.annotName===documentPageCollections[annotationType][i].AnnotName){this.pdfViewerBase.documentAnnotationCollections[pageNumber][annotationType].splice(i,1);break;}}}}};/**
     * Select the annotations using annotation object or annotation Id.
     *
     * @param annotationId
     * @returns void
     */Annotation.prototype.selectAnnotation=function(annotationId){// eslint-disable-next-line
var annotation;var id;if(_typeof(annotationId)==='object'){annotation=annotationId;id=annotation.annotationId;annotation=this.getAnnotationsFromAnnotationCollections(id);}if(typeof annotationId==='string'){annotation=this.getAnnotationsFromAnnotationCollections(annotationId);id=annotationId;}if(annotation){var pageIndex=annotation.pageNumber;var isRender=false;isRender=this.findRenderPageList(pageIndex);var currentSelector=this.pdfViewer.annotationSelectorSettings;//let pageIndex: number = this.getPageNumberFromAnnotationCollections(annotation);
if(annotation&&pageIndex>=0){if(annotation.shapeAnnotationType==='textMarkup'){if(annotation.rect||annotation.bounds){// eslint-disable-next-line max-len
var scrollValue=this.pdfViewerBase.pageSize[pageIndex].top*this.pdfViewerBase.getZoomFactor()+this.getAnnotationTop(annotation)*this.pdfViewerBase.getZoomFactor();var scroll_1=(scrollValue-20).toString();// eslint-disable-next-line radix
this.pdfViewerBase.viewerContainer.scrollTop=parseInt(scroll_1);this.pdfViewerBase.viewerContainer.scrollLeft=this.getAnnotationLeft(annotation)*this.pdfViewerBase.getZoomFactor();}else{if(this.pdfViewer.navigation){this.pdfViewer.navigation.goToPage(pageIndex+1);}}}else{if(annotation.bounds){// eslint-disable-next-line max-len
var scrollValue=this.pdfViewerBase.pageSize[pageIndex].top*this.pdfViewerBase.getZoomFactor()+annotation.bounds.top*this.pdfViewerBase.getZoomFactor();var scrollLeft=annotation.bounds.left*this.pdfViewerBase.getZoomFactor();if(annotation.shapeAnnotationType==='Ink'){// eslint-disable-next-line max-len
scrollValue=this.pdfViewerBase.pageSize[pageIndex].top*this.pdfViewerBase.getZoomFactor()+annotation.bounds.y*this.pdfViewerBase.getZoomFactor();scrollLeft=annotation.bounds.x*this.pdfViewerBase.getZoomFactor();}var scroll_2=(scrollValue-20).toString();// eslint-disable-next-line radix
this.pdfViewerBase.viewerContainer.scrollTop=parseInt(scroll_2);this.pdfViewerBase.viewerContainer.scrollLeft=scrollLeft;}else{if(this.pdfViewer.navigation){this.pdfViewer.navigation.goToPage(pageIndex+1);}}}if(isRender){if(this.previousIndex){this.pdfViewer.clearSelection(this.previousIndex);}this.pdfViewer.clearSelection(pageIndex);this.previousIndex=pageIndex;if(annotation.shapeAnnotationType==='textMarkup'){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageIndex,true);// eslint-disable-next-line max-len
var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageIndex);// eslint-disable-next-line
var textMarkupAnnotation=this.getTextMarkupAnnotations(pageIndex,annotation);if(textMarkupAnnotation){this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null;this.textMarkupAnnotationModule.isSelectedAnnotation=true;this.textMarkupAnnotationModule.showHideDropletDiv(true);this.textMarkupAnnotationModule.annotationClickPosition=null;this.textMarkupAnnotationModule.selectAnnotation(textMarkupAnnotation,canvas,pageIndex,null,true);this.textMarkupAnnotationModule.currentTextMarkupAnnotation=textMarkupAnnotation;this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=pageIndex;this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);this.textMarkupAnnotationModule.isSelectedAnnotation=false;if(this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=true;// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);}}}else if(annotation.shapeAnnotationType==='stamp'||annotation.ShapeAnnotationType==='stamp'){this.pdfViewer.select([annotation.uniqueKey],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}else if(annotation.shapeAnnotationType==='sticky'||annotation.ShapeAnnotationType==='sticky'){this.pdfViewer.select([annotation.annotationId],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}else{this.pdfViewer.select([annotation.uniqueKey],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}// eslint-disable-next-line max-len
var commentElement=document.getElementById(this.pdfViewer.dataId+'_commantPanel');if(commentElement&&commentElement.style.display==='block'){// eslint-disable-next-line
var commentsDiv=document.getElementById(id);if(commentsDiv){if(!commentsDiv.classList.contains('e-pv-comments-border')){if(commentsDiv.firstChildElement){commentsDiv.firstChildElement.click();}}}}}else{this.selectAnnotationId=id;this.isAnnotationSelected=true;this.annotationPageIndex=pageIndex;}}}};/**
     * @private
     */Annotation.prototype.showCommentsPanelInBlazor=function(){if(this.pdfViewer.enableCommentPanel){// eslint-disable-next-line
var commentPanel=document.getElementById(this.pdfViewer.dataId+'_commantPanel');if(commentPanel){if(commentPanel.style.display==='none'){if(this.pdfViewer.enableRtl){commentPanel.style.right='';commentPanel.style.left='0px';}commentPanel.style.display='block';this.pdfViewer._dotnetInstance.invokeMethodAsync('ShowAnnotationToolbar',null);// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.commentPanelResizer=document.getElementById(this.pdfViewer.dataId+'_commentPanelResizer');if(this.pdfViewer.enableRtl){this.pdfViewerBase.navigationPane.commentPanelResizer.className='e-pv-comment-panel-resizer e-left';}this.pdfViewerBase.navigationPane.commentPanelResizer.style.display='block';// eslint-disable-next-line
var commentPanelResizeIcon=document.getElementById(this.pdfViewer.dataId+'_resize');// eslint-disable-next-line
var annotationToolbar=document.getElementById('AnnotationToolbar');commentPanel.style.top=this.pdfViewer.toolbar.toolbarElement.clientHeight+annotationToolbar.clientHeight+'px';if(commentPanel&&commentPanel.clientHeight&&commentPanelResizeIcon.style.top===''){commentPanelResizeIcon.style.top=commentPanel.clientHeight/2+'px';}var viewerContainer=document.getElementById(this.pdfViewer.dataId+'_viewerContainer');var pageContainer=document.getElementById(this.pdfViewer.dataId+'_pageViewContainer');if(viewerContainer){if(this.pdfViewer.enableRtl){viewerContainer.style.left=this.pdfViewerBase.navigationPane.getViewerContainerRight()+'px';}else{viewerContainer.style.right=this.pdfViewerBase.navigationPane.getViewerContainerRight()+'px';}// eslint-disable-next-line max-len
viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()-commentPanel.offsetWidth+'px';pageContainer.style.width=viewerContainer.offsetWidth-this.pdfViewerBase.navigationPane.getViewerContainerScrollbarWidth()+'px';}this.pdfViewerBase.updateZoomValue();}}}};/**
     * Clear the annotation selection.
     *
     * @returns void
     */Annotation.prototype.clearSelection=function(){if(this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation){this.textMarkupAnnotationModule.clearCurrentSelectedAnnotation();this.textMarkupAnnotationModule.clearCurrentAnnotationSelection(this.textMarkupAnnotationModule.selectTextMarkupCurrentPage);}else{if(this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations[0]){// eslint-disable-next-line
var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];this.pdfViewer.clearSelection(currentAnnotation.pageIndex);}else{this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1);}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getAnnotationTop=function(annotation){if(annotation.bounds){if(annotation.bounds[0].Top){return annotation.bounds[0].Top;}else{return annotation.bounds[0].top;}}else if(annotation.rect){if(annotation.rect.Top){return annotation.rect.Top;}else{return annotation.rect.top;}}return 0;};/**
      * @param annotation
      */ // eslint-disable-next-line
Annotation.prototype.getAnnotationLeft=function(annotation){if(annotation.rect){if(annotation.rect.Left){return annotation.rect.Left;}else{return annotation.rect.left;}}else{if(annotation.bounds[0].Left){return annotation.bounds[0].Left;}else{return annotation.bounds[0].left;}}};/**
     * @private
     */Annotation.prototype.selectAnnotationFromCodeBehind=function(){if(this.isAnnotationSelected&&this.selectAnnotationId){// eslint-disable-next-line
var annotation=this.getAnnotationsFromAnnotationCollections(this.selectAnnotationId);var id=this.selectAnnotationId;var pageIndex=annotation.pageNumber;var currentSelector=this.pdfViewer.annotationSelectorSettings;if(annotation&&this.annotationPageIndex>=0&&this.annotationPageIndex===pageIndex){if(this.previousIndex){this.pdfViewer.clearSelection(this.previousIndex);}this.pdfViewer.clearSelection(pageIndex);this.previousIndex=pageIndex;if(annotation.shapeAnnotationType==='textMarkup'){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageIndex,true);// eslint-disable-next-line max-len
var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageIndex);// eslint-disable-next-line
var textMarkupAnnotation=this.getTextMarkupAnnotations(pageIndex,annotation);if(textMarkupAnnotation){this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null;this.textMarkupAnnotationModule.isSelectedAnnotation=true;this.textMarkupAnnotationModule.showHideDropletDiv(true);this.textMarkupAnnotationModule.annotationClickPosition=null;this.textMarkupAnnotationModule.selectAnnotation(textMarkupAnnotation,canvas,pageIndex);this.textMarkupAnnotationModule.currentTextMarkupAnnotation=textMarkupAnnotation;this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=pageIndex;this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);this.textMarkupAnnotationModule.isSelectedAnnotation=false;if(this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=true;// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);}}}else if(annotation.shapeAnnotationType==='stamp'||annotation.ShapeAnnotationType==='stamp'){this.pdfViewer.select([annotation.uniqueKey],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}else if(annotation.shapeAnnotationType==='sticky'||annotation.ShapeAnnotationType==='sticky'){this.pdfViewer.select([annotation.annotationId],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}else if(annotation.uniqueKey){this.pdfViewer.select([annotation.uniqueKey],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}else{this.pdfViewer.select([annotation.annotationId],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}// eslint-disable-next-line max-len
var commentElement=document.getElementById(this.pdfViewer.dataId+'_commantPanel');if(commentElement&&commentElement.style.display==='block'){// eslint-disable-next-line
var commentsDiv=document.getElementById(id);if(commentsDiv){if(!commentsDiv.classList.contains('e-pv-comments-border')){if(commentsDiv.firstElementChild){commentsDiv.firstElementChild.click();}}}}}this.isAnnotationSelected=false;this.selectAnnotationId=null;this.annotationPageIndex=null;}};/**
     * @param pageIndex
     * @private
     */Annotation.prototype.findRenderPageList=function(pageIndex){var isRender=false;// eslint-disable-next-line
var pageList=this.pdfViewerBase.renderedPagesList;if(pageList){for(var i=0;i<pageList.length;i++){if(pageList[i]===pageIndex){isRender=true;return isRender;}}}return isRender;};// eslint-disable-next-line
Annotation.prototype.getPageNumberFromAnnotationCollections=function(annotation){// eslint-disable-next-line
var collections=this.pdfViewer.annotations;if(annotation){if(annotation.shapeAnnotationType==='textMarkup'){return annotation.pageNumber;}else{if(collections){for(var i=0;i<collections.length;i++){if(collections[i].annotName===annotation.annotationId){return collections[i].pageIndex;}}}}}};// eslint-disable-next-line
Annotation.prototype.getAnnotationsFromAnnotationCollections=function(annotationId){// eslint-disable-next-line
var collections=this.pdfViewer.annotationCollection;if(collections&&annotationId){for(var i=0;i<collections.length;i++){if(collections[i].annotationId===annotationId){return collections[i];}}}if(this.pdfViewer.selectedItems.annotations.length===0)this.pdfViewer.selectedItems.annotations.push(this.pdfViewer.nameTable[annotationId]);};// eslint-disable-next-line
Annotation.prototype.getTextMarkupAnnotations=function(pageIndex,annotation){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_textMarkup');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_textMarkup'];}if(storeObject){// eslint-disable-next-line
var annotObject=JSON.parse(storeObject);var index=this.getPageCollection(annotObject,pageIndex);if(annotObject[index]){for(var i=0;i<annotObject[index].annotations.length;i++){if(annotObject[index].annotations[i].annotName===annotation.annotationId){return annotObject[index].annotations[i];}}return null;}}else{return null;}};/**
     * @param type
     * @param measureType
     * @param type
     * @param measureType
     * @private
     */Annotation.prototype.getAnnotationType=function(type,measureType){var annotType;if(measureType===''||sf.base.isNullOrUndefined(measureType)){switch(type){case'Line':annotType='Line';break;case'LineWidthArrowHead':annotType='Arrow';break;case'Rectangle':annotType='Rectangle';break;case'Ellipse':annotType='Circle';break;case'Polygon':annotType='Polygon';break;case'Stamp':annotType='Stamp';break;case'Image':annotType='Image';break;case'FreeText':annotType='FreeText';break;case'Ink':annotType='Ink';break;case'StickyNotes':annotType='StickyNotes';break;}}else{switch(measureType){case'Distance':annotType='Distance';break;case'Perimeter':annotType='Perimeter';break;case'Area':annotType='Area';break;case'Radius':annotType='Radius';break;case'Volume':annotType='Volume';break;}}return annotType;};/**
     * @param pageNumber
     * @param annotationId
     * @private
     */Annotation.prototype.getAnnotationIndex=function(pageNumber,annotationId){var pageAnnotationBases=this.pdfViewer.drawing.getPageObjects(pageNumber);var index=null;for(var i=0;i<pageAnnotationBases.length;i++){if(pageAnnotationBases[i].id===annotationId){index=i;break;}}return index;};/**
     * @private
     */Annotation.prototype.initializeCollection=function(){this.actionCollection=[];this.redoCollection=[];this.pdfViewerBase.customStampCollection=[];if(!this.popupNote){this.createNote();}};/**
     * @private
     */Annotation.prototype.showCommentsPanel=function(){if(this.pdfViewer.enableCommentPanel){var commentPanel=document.getElementById(this.pdfViewer.dataId+'_commantPanel');if(commentPanel){if(commentPanel.style.display==='none'){if(this.pdfViewer.enableRtl){commentPanel.style.right='';commentPanel.style.left='0px';}commentPanel.style.display='block';this.pdfViewer._dotnetInstance.invokeMethodAsync('ShowAnnotationToolbar',null);if(this.pdfViewerBase.navigationPane.commentPanelResizer){if(this.pdfViewer.enableRtl){this.pdfViewerBase.navigationPane.commentPanelResizer.className='e-pv-comment-panel-resizer e-left';}this.pdfViewerBase.navigationPane.commentPanelResizer.style.display='block';}this.pdfViewerBase.navigationPane.setCommentPanelResizeIconTop();this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop();var viewerContainer=document.getElementById(this.pdfViewer.dataId+'_viewerContainer');var pageContainer=document.getElementById(this.pdfViewer.dataId+'_pageViewContainer');if(viewerContainer){if(this.pdfViewer.enableRtl){viewerContainer.style.left=this.pdfViewerBase.navigationPane.getViewerContainerRight()+'px';}else{viewerContainer.style.right=this.pdfViewerBase.navigationPane.getViewerContainerRight()+'px';}// eslint-disable-next-line max-len
viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()-this.pdfViewerBase.navigationPane.getViewerContainerRight()+'px';pageContainer.style.width=viewerContainer.offsetWidth-this.pdfViewerBase.navigationPane.getViewerContainerScrollbarWidth()+'px';}this.pdfViewerBase.updateZoomValue();if(this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule){this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(true);}}}}};/**
     * @param pageNumber
     * @param index
     * @param annotation
     * @param actionString
     * @param property
     * @param node
     * @param redo
     * @param pageNumber
     * @param index
     * @param annotation
     * @param actionString
     * @param property
     * @param node
     * @param redo
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.addAction=function(// eslint-disable-next-line
pageNumber,index,annotation,actionString,property,node,redo){var action={pageIndex:pageNumber,index:index,annotation:annotation,action:actionString,modifiedProperty:property,undoElement:node,redoElement:redo};this.actionCollection.push(action);this.updateToolbar();};/**
     * @private
     */Annotation.prototype.undo=function(){var actionObject=this.actionCollection.pop();var annotationObject=this.pdfViewer.nameTable[actionObject.annotation.id];if(actionObject){// eslint-disable-next-line
var shapeType=actionObject.annotation.shapeAnnotationType;this.isUndoRedoAction=true;this.isUndoAction=true;switch(actionObject.action){case'Text Markup Added':case'Text Markup Deleted':if(this.textMarkupAnnotationModule){// eslint-disable-next-line max-len
this.textMarkupAnnotationModule.undoTextMarkupAction(actionObject.annotation,actionObject.pageIndex,actionObject.index,actionObject.action);}break;case'Text Markup Property modified':if(this.textMarkupAnnotationModule){// eslint-disable-next-line max-len
actionObject.annotation=this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation,actionObject.pageIndex,actionObject.index,actionObject.modifiedProperty,true);}break;case'Drag':case'Resize':if(isLineShapes(actionObject.annotation)){// eslint-disable-next-line max-len
this.pdfViewer.nodePropertyChange(actionObject.annotation,{bounds:actionObject.undoElement.bounds,vertexPoints:actionObject.undoElement.vertexPoints,leaderHeight:actionObject.undoElement.leaderHeight});}else{this.pdfViewer.nodePropertyChange(actionObject.annotation,{bounds:actionObject.undoElement.bounds});}// eslint-disable-next-line max-len
if(actionObject.annotation.measureType==='Distance'||actionObject.annotation.measureType==='Perimeter'||actionObject.annotation.measureType==='Area'||actionObject.annotation.measureType==='Radius'||actionObject.annotation.measureType==='Volume'){this.pdfViewer.nodePropertyChange(actionObject.annotation,{notes:actionObject.undoElement.notes});this.updateCalibrateValues(actionObject.annotation);}if(actionObject.annotation.formFieldAnnotationType){this.pdfViewer.formDesigner.updateHTMLElement(actionObject.annotation);}this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.pdfViewer.select([actionObject.annotation.id]);// eslint-disable-next-line max-len
if(actionObject.annotation.shapeAnnotationType==='Line'||actionObject.annotation.shapeAnnotationType==='Rectangle'||actionObject.annotation.shapeAnnotationType==='Ellipse'||actionObject.annotation.shapeAnnotationType==='Polygon'||actionObject.annotation.shapeAnnotationType==='LineWidthArrowHead'||actionObject.annotation.shapeAnnotationType==='Radius'||actionObject.annotation.shapeAnnotationType==='FreeText'||actionObject.annotation.shapeAnnotationType==='HandWrittenSignature'||actionObject.annotation.shapeAnnotationType==='SignatureText'||actionObject.annotation.shapeAnnotationType==='SignatureImage'||actionObject.annotation.shapeAnnotationType==='Ink'){this.modifyInCollections(actionObject.annotation,'bounds');}break;case'Addition':if(this.pdfViewer.formDesigner&&actionObject.annotation.formFieldAnnotationType){this.pdfViewer.formDesigner.deleteFormField(actionObject.undoElement.id,false);}else{var isAnnotationUpdate=false;// eslint-disable-next-line max-len
if(shapeType==='Line'||shapeType==='LineWidthArrowHead'||shapeType==='Polygon'||shapeType==='Ellipse'||shapeType==='Rectangle'||shapeType==='Radius'||shapeType==='Distance'){if(actionObject.annotation.measureType===''||sf.base.isNullOrUndefined(actionObject.annotation.measureType)){this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,'shape');}else{this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,'measure');}isAnnotationUpdate=true;// eslint-disable-next-line
var annotationObject_1=actionObject.annotation;// eslint-disable-next-line
var wrapper=annotationObject_1.wrapper?annotationObject_1.wrapper:null;if(wrapper&&wrapper.bounds){actionObject.annotation.bounds=wrapper.bounds;}actionObject.duplicate=this.modifyInCollections(actionObject.annotation,'delete');}if(shapeType==='Stamp'||shapeType==='Image'){// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,actionObject.annotation.shapeAnnotationType,'delete');// eslint-disable-next-line max-len
this.stampAnnotationModule.updateSessionStorage(actionObject.annotation,null,'delete');isAnnotationUpdate=true;}if(shapeType==='FreeText'||shapeType==='HandWrittenSignature'||shapeType==='SignatureImage'||shapeType==='SignatureText'||shapeType==='Ink'){isAnnotationUpdate=true;// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,actionObject.annotation.shapeAnnotationType,'delete');actionObject.duplicate=this.modifyInCollections(actionObject.annotation,'delete');}if(!isAnnotationUpdate){// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,actionObject.annotation.shapeAnnotationType,'delete');}this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.pdfViewer.remove(actionObject.annotation);this.pdfViewer.renderDrawing(null,actionObject.annotation.pageIndex);// eslint-disable-next-line
var removeDiv=document.getElementById(actionObject.annotation.annotName);if(removeDiv){this.pdfViewer._dotnetInstance.invokeMethodAsync('RemoveCommentsCollection',actionObject.annotation.annotName,actionObject.annotation.pageIndex);}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var mobileAnnotationToolbar=document.getElementById(this.pdfViewer.dataId+'_propertyToolbar');if(mobileAnnotationToolbar&&mobileAnnotationToolbar.children.length>0){this.pdfViewer.toolbarModule.annotationToolbarModule.toolbarCreated=false;this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile();}}}break;case'Delete':if(this.pdfViewer.formDesigner&&actionObject.annotation.formFieldAnnotationType){actionObject.undoElement.bounds.x=actionObject.undoElement.wrapper.bounds.x;actionObject.undoElement.bounds.y=actionObject.undoElement.wrapper.bounds.y;this.pdfViewer.formDesigner.drawFormField(actionObject.undoElement);}else{// eslint-disable-next-line max-len
if(shapeType==='Line'||shapeType==='LineWidthArrowHead'||shapeType==='Polygon'||shapeType==='Ellipse'||shapeType==='Rectangle'||shapeType==='Radius'||shapeType==='Distance'){if(actionObject.annotation.measureType===''||sf.base.isNullOrUndefined(actionObject.annotation.measureType)){shapeType='shape';this.shapeAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.undoElement);}else{shapeType='shape_measure';this.measureAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.undoElement);}}if(shapeType==='Stamp'||shapeType==='Image'){this.stampAnnotationModule.updateDeleteItems(actionObject.annotation.pageIndex,actionObject.annotation);}else if(shapeType==='FreeText'){this.freeTextAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.undoElement);}else if(shapeType==='Ink'){this.inkAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.undoElement);}else if(shapeType==='StickyNotes'){this.stickyNotesAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.undoElement);}var addedAnnot=this.pdfViewer.add(actionObject.annotation);if((shapeType==='FreeText'||addedAnnot.enableShapeLabel)&&addedAnnot){this.pdfViewer.nodePropertyChange(addedAnnot,{});}var formFieldObj=this.pdfViewer.nameTable[actionObject.annotation.id.split("_")[0]];if(formFieldObj!=null&&(formFieldObj.formFieldAnnotationType==='SignatureField'||formFieldObj.formFieldAnnotationType==='InitialField')){formFieldObj.wrapper.children.push(actionObject.annotation.wrapper.children[0]);if(actionObject.annotation.shapeAnnotationType==="SignatureText")formFieldObj.wrapper.children.push(actionObject.annotation.wrapper.children[1]);var key=actionObject.annotation.id.split('_')[0]+'_content';var data=null;if(this.pdfViewer.formDesignerModule){data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');}if(data){var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){if(formFieldsData[i].Key===key){if(actionObject.annotation.shapeAnnotationType==="SignatureText"){formFieldsData[i].FormField.signatureType="Text";formFieldsData[i].FormField.value=actionObject.annotation.data;this.pdfViewerBase.formFieldCollection[i].FormField.value=actionObject.annotation.data;this.pdfViewerBase.formFieldCollection[i].FormField.signatureType="Text";}else if(actionObject.annotation.shapeAnnotationType==="SignatureImage"){formFieldsData[i].FormField.signatureType="Image";formFieldsData[i].FormField.value=actionObject.annotation.data;this.pdfViewerBase.formFieldCollection[i].FormField.value=actionObject.annotation.data;this.pdfViewerBase.formFieldCollection[i].FormField.signatureType="Image";}else{formFieldsData[i].FormField.signatureType="Path";this.pdfViewerBase.formFieldCollection[i].FormField.signatureType="Path";var collectionData=sf.drawings.processPathData(actionObject.annotation.data);var csData=sf.drawings.splitArrayCollection(collectionData);formFieldsData[i].FormField.value=JSON.stringify(csData);this.pdfViewerBase.formFieldCollection[i].FormField.value=JSON.stringify(csData);}}}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');}}this.pdfViewer.renderDrawing(null,actionObject.annotation.pageIndex);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(actionObject.annotation.pageIndex,shapeType);}break;case'stampOpacity':this.pdfViewer.nodePropertyChange(actionObject.annotation,{opacity:actionObject.undoElement.opacity});this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation,null,true);actionObject.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();break;case'Shape Stroke':this.pdfViewer.nodePropertyChange(actionObject.annotation,{strokeColor:actionObject.undoElement.strokeColor});this.modifyInCollections(actionObject.annotation,'stroke');this.pdfViewer.renderDrawing();break;case'Shape Fill':this.pdfViewer.nodePropertyChange(actionObject.annotation,{fillColor:actionObject.undoElement.fillColor});this.modifyInCollections(actionObject.annotation,'fill');this.pdfViewer.renderDrawing();break;case'Shape Opacity':this.pdfViewer.nodePropertyChange(actionObject.annotation,{opacity:actionObject.undoElement.opacity});if(actionObject.annotation.shapeAnnotationType==='StickyNotes'){this.stickyNotesAnnotationModule.updateOpacityValue(actionObject.annotation);this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation,null,true);actionObject.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();}else{this.modifyInCollections(actionObject.annotation,'opacity');}this.pdfViewer.renderDrawing();break;case'Shape Thickness':this.pdfViewer.nodePropertyChange(actionObject.annotation,{thickness:actionObject.undoElement.thickness});this.modifyInCollections(actionObject.annotation,'thickness');this.pdfViewer.renderDrawing();break;case'Line properties change':this.pdfViewer.nodePropertyChange(actionObject.annotation,{// eslint-disable-next-line max-len
fillColor:actionObject.undoElement.fillColor,borderDashArray:actionObject.undoElement.borderDashArray,borderStyle:actionObject.undoElement.borderStyle,// eslint-disable-next-line max-len
strokeColor:actionObject.undoElement.strokeColor,opacity:actionObject.undoElement.opacity,thickness:actionObject.undoElement.thickness,sourceDecoraterShapes:this.getArrowType(actionObject.undoElement.lineHeadStart),taregetDecoraterShapes:this.getArrowType(actionObject.undoElement.lineHeadEnd)});this.updateCollectionForLineProperty(actionObject.annotation);this.pdfViewer.renderDrawing();break;case'Text Property Added':// eslint-disable-next-line max-len
actionObject.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation,actionObject.action,actionObject.undoElement);this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation,null,true);actionObject.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();break;case'Comments Property Added':// eslint-disable-next-line max-len
actionObject.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation,actionObject.action,actionObject.undoElement);break;case'Status Property Added':// eslint-disable-next-line max-len
actionObject.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation,actionObject.action,actionObject.undoElement);break;case'Comments Reply Deleted':// eslint-disable-next-line max-len
actionObject.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation,actionObject.action,actionObject.undoElement);break;case'dynamicText Change':this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=true;annotationObject.dynamicText=actionObject.undoElement.dynamicText;if(this.pdfViewer.selectedItems.annotations[0]){this.pdfViewer.selectedItems.annotations[0].dynamicText=actionObject.undoElement.dynamicText;}// eslint-disable-next-line
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(annotationObject,actionObject.action,actionObject.undoElement);this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationObject,null,true);this.modifyInCollections(annotationObject,'dynamicText');if(this.pdfViewer.selectedItems.annotations[0]){this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{});}else{this.pdfViewer.nodePropertyChange(annotationObject,{});}this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=false;this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);break;case'fontColor':this.pdfViewer.nodePropertyChange(actionObject.annotation,{fontColor:actionObject.undoElement.fontColor});this.modifyInCollections(actionObject.annotation,'fontColor');this.pdfViewer.renderDrawing();break;case'fontSize':this.pdfViewer.nodePropertyChange(actionObject.annotation,{fontSize:actionObject.undoElement.fontSize});this.modifyInCollections(actionObject.annotation,'fontSize');this.pdfViewer.renderDrawing();break;case'fontFamily':this.pdfViewer.nodePropertyChange(actionObject.annotation,{fontFamily:actionObject.undoElement.fontFamily});this.modifyInCollections(actionObject.annotation,'fontFamily');this.pdfViewer.renderDrawing();break;case'textAlign':this.pdfViewer.nodePropertyChange(actionObject.annotation,{textAlign:actionObject.undoElement.textAlign});this.modifyInCollections(actionObject.annotation,'textAlign');this.pdfViewer.renderDrawing();break;case'textPropertiesChange':this.pdfViewer.nodePropertyChange(actionObject.annotation,{font:actionObject.undoElement.font});this.modifyInCollections(actionObject.annotation,'textPropertiesChange');this.pdfViewer.renderDrawing();break;case'Rotate':// eslint-disable-next-line max-len
this.pdfViewer.nodePropertyChange(actionObject.annotation.annotations[0],{bounds:actionObject.undoElement.bounds,rotateAngle:actionObject.undoElement.rotateAngle});this.modifyInCollections(actionObject.annotation.annotations[0],'bounds');this.pdfViewer.renderDrawing();break;case'FormDesigner Properties Change':if(actionObject.undoElement&&actionObject.undoElement.isMultiline!==actionObject.redoElement.isMultiline){this.undoRedoMultiline(actionObject.undoElement);}this.updateFormFieldPropertiesChanges(actionObject.undoElement.formFieldAnnotationType,actionObject.undoElement);break;case'FormField Value Change':if(actionObject.annotation.formFieldAnnotationType){if(actionObject.annotation.formFieldAnnotationType=="RadioButton"){this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType,actionObject.undoElement,false);this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType,actionObject.redoElement,true);}else{this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType,actionObject.annotation,actionObject.undoElement);}}else{var spanElement=document.getElementById(actionObject.annotation.id+"_html_element").children[0].children[0];spanElement.className='e-pdfviewer-signatureformfields';var formFieldObj=this.pdfViewer.nameTable[actionObject.annotation.id.split("_")[0]];var annotationObj=this.pdfViewer.nameTable[actionObject.annotation.id];formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(annotationObj.wrapper.children[0]),1);if(actionObject.annotation.shapeAnnotationType==="SignatureText")formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(annotationObj.wrapper.children[1]),1);var key=actionObject.annotation.id.split('_')[0]+'_content';var data=null;if(this.pdfViewer.formDesignerModule){data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');}if(data){var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){if(formFieldsData[i].Key===key){formFieldsData[i].FormField.value='';formFieldsData[i].FormField.signatureType='';this.pdfViewerBase.formFieldCollection[i].FormField.value='';this.pdfViewerBase.formFieldCollection[i].FormField.signatureType='';}}this.pdfViewer.remove(actionObject.annotation);this.pdfViewer.renderDrawing();this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');}}}this.redoCollection.push(actionObject);this.updateToolbar();this.isUndoRedoAction=false;this.isUndoAction=false;}};/**
     * @private
     */Annotation.prototype.redo=function(){var actionObject=this.redoCollection.pop();var annotationObject=this.pdfViewer.nameTable[actionObject.annotation.id];if(actionObject){// eslint-disable-next-line
var shapeType=actionObject.annotation.shapeAnnotationType;this.isUndoRedoAction=true;switch(actionObject.action){case'Text Markup Property modified':if(this.textMarkupAnnotationModule){// eslint-disable-next-line max-len
actionObject.annotation=this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation,actionObject.pageIndex,actionObject.index,actionObject.modifiedProperty);}break;case'Text Markup Added':case'Text Markup Deleted':if(this.textMarkupAnnotationModule){// eslint-disable-next-line max-len
this.textMarkupAnnotationModule.redoTextMarkupAction(actionObject.annotation,actionObject.pageIndex,actionObject.index,actionObject.action);}break;case'Drag':case'Resize':if(isLineShapes(actionObject.annotation)){this.pdfViewer.nodePropertyChange(// eslint-disable-next-line max-len
annotationObject,{bounds:actionObject.redoElement.bounds,vertexPoints:actionObject.redoElement.vertexPoints,leaderHeight:actionObject.redoElement.leaderHeight});}else{this.pdfViewer.nodePropertyChange(annotationObject,{bounds:actionObject.redoElement.bounds});}// eslint-disable-next-line max-len
if(actionObject.annotation.measureType==='Distance'||actionObject.annotation.measureType==='Perimeter'||actionObject.annotation.measureType==='Area'||actionObject.annotation.measureType==='Radius'||actionObject.annotation.measureType==='Volume'){this.pdfViewer.nodePropertyChange(annotationObject,{notes:actionObject.redoElement.notes});this.updateCalibrateValues(annotationObject);}if(actionObject.annotation.formFieldAnnotationType){this.pdfViewer.formDesigner.updateHTMLElement(annotationObject);}this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.pdfViewer.select([annotationObject.id]);// eslint-disable-next-line max-len
if(actionObject.annotation.shapeAnnotationType==='Line'||actionObject.annotation.shapeAnnotationType==='Rectangle'||actionObject.annotation.shapeAnnotationType==='Ellipse'||actionObject.annotation.shapeAnnotationType==='Polygon'||actionObject.annotation.shapeAnnotationType==='LineWidthArrowHead'||actionObject.annotation.shapeAnnotationType==='Radius'||actionObject.annotation.shapeAnnotationType==='FreeText'||actionObject.annotation.shapeAnnotationType==='HandWrittenSignature'||actionObject.annotation.shapeAnnotationType==='SignatureText'||actionObject.annotation.shapeAnnotationType==='SignatureImage'||actionObject.annotation.shapeAnnotationType==='Ink'){this.modifyInCollections(annotationObject,'bounds');}break;case'Addition':if(this.pdfViewer.formDesigner&&actionObject.annotation.formFieldAnnotationType){actionObject.redoElement.bounds.x=actionObject.redoElement.wrapper.bounds.x;actionObject.redoElement.bounds.y=actionObject.redoElement.wrapper.bounds.y;this.pdfViewer.formDesigner.drawFormField(actionObject.redoElement);}else{// eslint-disable-next-line max-len
if(shapeType==='Line'||shapeType==='LineWidthArrowHead'||shapeType==='Polygon'||shapeType==='Ellipse'||shapeType==='Rectangle'||shapeType==='Radius'||shapeType==='Distance'){if(actionObject.annotation.measureType===''||sf.base.isNullOrUndefined(actionObject.annotation.measureType)){shapeType='shape';this.shapeAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.duplicate);}else{shapeType='shape_measure';this.measureAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.duplicate);}}if(shapeType==='FreeText'){this.freeTextAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.duplicate);}if(shapeType==='Stamp'||shapeType==='Image'){this.stampAnnotationModule.updateDeleteItems(actionObject.annotation.pageIndex,actionObject.redoElement);}if(shapeType==='HandWrittenSignature'||shapeType==='SignatureText'||shapeType==='SignatureImage'){this.pdfViewerBase.signatureModule.addInCollection(actionObject.annotation.pageIndex,actionObject.duplicate);}if(shapeType==='Ink'){this.inkAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.duplicate);}var addedAnnot=this.pdfViewer.add(actionObject.annotation);this.pdfViewer.select([actionObject.annotation.id]);if((shapeType==='FreeText'||addedAnnot.enableShapeLabel)&&addedAnnot){this.pdfViewer.nodePropertyChange(addedAnnot,{});}this.pdfViewer.renderDrawing(null,actionObject.annotation.pageIndex);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(actionObject.annotation.pageIndex,shapeType);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var mobileAnnotationToolbar=document.getElementById(this.pdfViewer.dataId+'_propertyToolbar');if(mobileAnnotationToolbar&&mobileAnnotationToolbar.children.length>0){this.pdfViewer.toolbarModule.annotationToolbarModule.toolbarCreated=false;this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile();}}}break;case'Delete':if(this.pdfViewer.formDesigner&&actionObject.annotation.formFieldAnnotationType){this.pdfViewer.formDesigner.deleteFormField(actionObject.redoElement.id,false);}else{var isUpdate=false;var sType=actionObject.annotation.shapeAnnotationType;// eslint-disable-next-line max-len
if(shapeType==='Line'||shapeType==='LineWidthArrowHead'||shapeType==='Polygon'||shapeType==='Ellipse'||shapeType==='Rectangle'||shapeType==='Radius'||shapeType==='Distance'){if(actionObject.annotation.measureType===''||sf.base.isNullOrUndefined(actionObject.annotation.measureType)){sType='shape';}else{sType='measure';}// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,sType,'delete');this.modifyInCollections(actionObject.annotation,'delete');isUpdate=true;}if(shapeType==='Stamp'||shapeType==='Image'){// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,sType,'delete');this.stampAnnotationModule.updateSessionStorage(actionObject.annotation,null,'delete');isUpdate=true;}if(shapeType==='FreeText'||shapeType==='HandWrittenSignature'||shapeType==='SignatureText'||shapeType==='SignatureImage'){// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,sType,'delete');this.modifyInCollections(actionObject.annotation,'delete');}if(!isUpdate){// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,sType,'delete');}var formFieldObj=this.pdfViewer.nameTable[actionObject.annotation.id.split("_")[0]];if(formFieldObj!=null&&(formFieldObj.formFieldAnnotationType==='SignatureField'||formFieldObj.formFieldAnnotationType==='InitialField')){formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(actionObject.annotation.wrapper.children[0]),1);if(actionObject.annotation.shapeAnnotationType==="SignatureText")formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(actionObject.annotation.wrapper.children[1]),1);var key=actionObject.annotation.id.split('_')[0]+'_content';var data=null;if(this.pdfViewer.formDesignerModule){data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');}if(data){var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){if(formFieldsData[i].Key===key){formFieldsData[i].FormField.value='';formFieldsData[i].FormField.signatureType='';this.pdfViewerBase.formFieldCollection[i].FormField.value='';this.pdfViewerBase.formFieldCollection[i].FormField.signatureType='';}}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');}}this.pdfViewer.clearSelection(actionObject.annotation.pageIndex);this.pdfViewer.remove(actionObject.annotation);this.pdfViewer.renderDrawing(null,actionObject.annotation.pageIndex);// eslint-disable-next-line
var removeDiv=document.getElementById(actionObject.annotation.annotName);if(removeDiv){this.pdfViewer._dotnetInstance.invokeMethodAsync('RemoveCommentsCollection',actionObject.annotation.annotName,actionObject.annotation.pageIndex);}}break;case'stampOpacity':this.pdfViewer.nodePropertyChange(annotationObject,{opacity:actionObject.redoElement.opacity});this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationObject,null,true);break;case'Shape Stroke':this.pdfViewer.nodePropertyChange(annotationObject,{strokeColor:actionObject.redoElement.strokeColor});this.modifyInCollections(annotationObject,'stroke');this.pdfViewer.renderDrawing();break;case'Shape Fill':this.pdfViewer.nodePropertyChange(annotationObject,{fillColor:actionObject.redoElement.fillColor});this.modifyInCollections(annotationObject,'fill');this.pdfViewer.renderDrawing();break;case'Shape Opacity':this.pdfViewer.nodePropertyChange(annotationObject,{opacity:actionObject.redoElement.opacity});if(actionObject.annotation.shapeAnnotationType==='StickyNotes'){this.stickyNotesAnnotationModule.updateOpacityValue(annotationObject);this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationObject,null,true);}else{this.modifyInCollections(annotationObject,'opacity');}this.pdfViewer.renderDrawing();break;case'Shape Thickness':this.pdfViewer.nodePropertyChange(annotationObject,{thickness:actionObject.redoElement.thickness});this.modifyInCollections(annotationObject,'thickness');this.pdfViewer.renderDrawing();break;case'Line properties change':this.pdfViewer.nodePropertyChange(annotationObject,{// eslint-disable-next-line max-len
fillColor:actionObject.redoElement.fillColor,strokeColor:actionObject.redoElement.strokeColor,opacity:actionObject.redoElement.opacity,thickness:actionObject.redoElement.thickness,sourceDecoraterShapes:this.getArrowType(actionObject.redoElement.lineHeadStart),taregetDecoraterShapes:this.getArrowType(actionObject.redoElement.lineHeadEnd),borderDashArray:actionObject.redoElement.borderDashArray,borderStyle:actionObject.redoElement.borderStyle});this.updateCollectionForLineProperty(annotationObject);this.pdfViewer.renderDrawing();break;case'Text Property Added':// eslint-disable-next-line max-len
actionObject.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation,actionObject.action,actionObject.undoElement);this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation,null,true);break;case'Comments Property Added':// eslint-disable-next-line max-len
actionObject.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation,actionObject.action,actionObject.undoElement);break;case'Status Property Added':// eslint-disable-next-line max-len
actionObject.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation,actionObject.action);break;case'Comments Reply Deleted':// eslint-disable-next-line max-len
actionObject.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation,actionObject.action);break;case'dynamicText Change':this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=true;annotationObject.dynamicText=actionObject.redoElement.dynamicText;// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[0];if(annotation){annotation.dynamicText=actionObject.redoElement.dynamicText;annotation.bounds.height=actionObject.redoElement.bounds.height;}// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(annotationObject,actionObject.action,actionObject.undoElement);this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationObject,null,true);this.modifyInCollections(annotationObject,'dynamicText');if(annotation){this.pdfViewer.nodePropertyChange(annotation,{});}else{this.pdfViewer.nodePropertyChange(annotationObject,{});}this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=false;this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.pdfViewer.select([annotationObject.id]);break;case'fontColor':this.pdfViewer.nodePropertyChange(annotationObject,{fontColor:actionObject.redoElement.fontColor});this.modifyInCollections(annotationObject,'fontColor');this.pdfViewer.renderDrawing();break;case'fontSize':this.pdfViewer.nodePropertyChange(annotationObject,{fontSize:actionObject.redoElement.fontSize});this.modifyInCollections(annotationObject,'fontSize');this.pdfViewer.renderDrawing();break;case'textAlign':this.pdfViewer.nodePropertyChange(annotationObject,{textAlign:actionObject.redoElement.textAlign});this.modifyInCollections(annotationObject,'textAlign');this.pdfViewer.renderDrawing();break;case'textPropertiesChange':this.pdfViewer.nodePropertyChange(annotationObject,{font:actionObject.redoElement.font});this.modifyInCollections(annotationObject,'textPropertiesChange');this.pdfViewer.renderDrawing();break;case'Rotate':// eslint-disable-next-line max-len
this.pdfViewer.nodePropertyChange(annotationObject.annotations[0],{bounds:actionObject.redoElement.bounds,rotateAngle:actionObject.redoElement.rotateAngle});this.modifyInCollections(annotationObject.annotations[0],'bounds');this.pdfViewer.renderDrawing();break;case'FormDesigner Properties Change':if(actionObject.redoElement&&actionObject.undoElement.isMultiline!==actionObject.redoElement.isMultiline){this.undoRedoMultiline(actionObject.redoElement);}this.updateFormFieldPropertiesChanges(actionObject.redoElement.formFieldAnnotationType,actionObject.redoElement);break;case'FormField Value Change':if(actionObject.annotation.formFieldAnnotationType){if(actionObject.annotation.formFieldAnnotationType=="RadioButton"){this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType,actionObject.undoElement,true);this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType,actionObject.redoElement,false);}else{this.updateFormFieldValueChange(actionObject.annotation.formFieldAnnotationType,actionObject.annotation,actionObject.redoElement);}}else{var spanElement=document.getElementById(actionObject.annotation.id+"_html_element").children[0].children[0];spanElement.className='e-pdfviewer-signatureformfields-signature';var formFieldObj=this.pdfViewer.nameTable[actionObject.annotation.id.split("_")[0]];var annotationObj=this.pdfViewer.nameTable[actionObject.annotation.id];formFieldObj.wrapper.children.push(annotationObj.wrapper.children[0]);if(actionObject.annotation.shapeAnnotationType==="SignatureText")formFieldObj.wrapper.children.push(annotationObj.wrapper.children[1]);var key=actionObject.annotation.id.split('_')[0]+'_content';var data=null;if(this.pdfViewer.formDesignerModule){data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');}if(data){var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){if(formFieldsData[i].Key===key){if(actionObject.annotation.shapeAnnotationType==="SignatureText"){formFieldsData[i].FormField.signatureType="Text";formFieldsData[i].FormField.value=actionObject.annotation.data;this.pdfViewerBase.formFieldCollection[i].FormField.value=actionObject.annotation.data;this.pdfViewerBase.formFieldCollection[i].FormField.signatureType="Text";}else if(actionObject.annotation.shapeAnnotationType==="SignatureImage"){formFieldsData[i].FormField.signatureType="Image";formFieldsData[i].FormField.value=actionObject.annotation.data;this.pdfViewerBase.formFieldCollection[i].FormField.value=actionObject.annotation.data;this.pdfViewerBase.formFieldCollection[i].FormField.signatureType="Image";}else{formFieldsData[i].FormField.signatureType="Path";this.pdfViewerBase.formFieldCollection[i].FormField.signatureType="Path";var collectionData=sf.drawings.processPathData(actionObject.annotation.data);var csData=sf.drawings.splitArrayCollection(collectionData);formFieldsData[i].FormField.value=JSON.stringify(csData);this.pdfViewerBase.formFieldCollection[i].FormField.value=JSON.stringify(csData);}}}this.pdfViewer.add(actionObject.annotation);var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+actionObject.pageIndex);this.pdfViewer.renderDrawing(canvass,actionObject.pageIndex);this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');}}}if(actionObject.redoElement&&actionObject.redoElement.modifiedDate!==undefined){actionObject.annotation.modifiedDate=actionObject.redoElement.modifiedDate;}this.actionCollection.push(actionObject);this.updateToolbar();this.isUndoRedoAction=false;}};Annotation.prototype.undoRedoMultiline=function(element){if(element.isMultiline&&element.formFieldAnnotationType==='Textbox'){this.pdfViewer.formDesignerModule.renderMultilineText(element,true);}else if(element.formFieldAnnotationType==='Textbox'){this.pdfViewer.formDesignerModule.renderTextbox(element,true);}};Annotation.prototype.updateFormFieldValueChange=function(formFieldAnnotationType,annotation,value){if(annotation){var formFieldModel=this.pdfViewer.formDesigner.getFormField(annotation.id.split("_")[0]);var data=null;if(this.pdfViewer.formDesignerModule){data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');}if(data){var formFieldsData=JSON.parse(data);var index=this.pdfViewer.formDesigner.getFormFiledIndex(annotation.id.split('_')[0]);switch(formFieldAnnotationType){case'Textbox':case'PasswordField':case'RadioButton':case'DropdownList':case'ListBox':var inputElement=document.getElementById(annotation.id.split("_")[0]+"_content_html_element").firstElementChild.firstElementChild;if(formFieldAnnotationType=='Textbox'||formFieldAnnotationType=='PasswordField'){formFieldModel.value=value;this.pdfViewer.formDesigner.updateValuePropertyChange(formFieldModel,inputElement,true,index,formFieldsData);}else if(formFieldAnnotationType=='RadioButton'){formFieldModel.isSelected=value;this.pdfViewer.formDesigner.updateIsSelectedPropertyChange(formFieldModel,inputElement.firstElementChild,true,index,formFieldsData);}else if(formFieldAnnotationType=='DropdownList'||formFieldAnnotationType=='ListBox'){formFieldModel.selectedIndex=value;formFieldsData[index].FormField.selectedIndex=value;this.pdfViewerBase.formFieldCollection[index].FormField.selectedIndex=value;this.pdfViewer.nameTable[formFieldsData[index].Key.split("_")[0]].selectedIndex=value;if(formFieldAnnotationType=='ListBox'){for(var k=0;k<inputElement.options.length;k++){inputElement.options[k].selected=value.includes(k)?true:false;}}else{inputElement.selectedIndex=value;}}break;case'Checkbox':var checkboxDivElement=document.getElementById(annotation.id.split("_")[0]+"_content_html_element").firstElementChild.firstElementChild.lastElementChild;formFieldModel.isChecked=value;this.pdfViewer.formDesigner.updateIsCheckedPropertyChange(formFieldModel,checkboxDivElement,true,index,formFieldsData);break;}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');}}};Annotation.prototype.updateFormFieldPropertiesChanges=function(formFieldAnnotationType,element){switch(formFieldAnnotationType){case'Textbox':case'PasswordField':this.pdfViewer.formDesigner.updateTextboxFormDesignerProperties(element,true);break;case'Checkbox':this.pdfViewer.formDesigner.updateCheckboxFormDesignerProperties(element,true);break;case'RadioButton':this.pdfViewer.formDesigner.updateRadioButtonDesignerProperties(element,true);break;case'DropdownList':this.pdfViewer.formDesigner.updateDropdownFormDesignerProperties(element,true);break;case'ListBox':this.pdfViewer.formDesigner.updateListBoxFormDesignerProperties(element,true);break;case'SignatureField':case'InitialField':this.pdfViewer.formDesigner.updateSignatureTextboxProperties(element,true);}};Annotation.prototype.updateCollectionForLineProperty=function(pdfAnnotationBase){this.modifyInCollections(pdfAnnotationBase,'fill');this.modifyInCollections(pdfAnnotationBase,'stroke');this.modifyInCollections(pdfAnnotationBase,'opacity');this.modifyInCollections(pdfAnnotationBase,'thickness');this.modifyInCollections(pdfAnnotationBase,'dashArray');this.modifyInCollections(pdfAnnotationBase,'startArrow');this.modifyInCollections(pdfAnnotationBase,'endArrow');};Annotation.prototype.updateToolbar=function(isAnnotationDelete){if(this.pdfViewer.toolbarModule){this.pdfViewer.toolbarModule.updateUndoRedoButtons();}this.pdfViewer.viewerBase.blazorUIAdaptor.canUndoRedo();if(this.actionCollection&&this.actionCollection.length==0){this.pdfViewerBase.updateDocumentEditedProperty(false);}else{this.pdfViewerBase.updateDocumentEditedProperty(true);}if(isAnnotationDelete){var isEdited=false;if(this.pdfViewer.annotationCollection&&this.pdfViewer.annotationCollection.length>0&&this.pdfViewer.signatureCollection&&this.pdfViewer.signatureCollection.length>0){isEdited=true;}if(!isEdited&&this.pdfViewer.isDocumentEdited){this.pdfViewerBase.updateDocumentEditedProperty(false);}}};Annotation.prototype.createNote=function(){// eslint-disable-next-line max-len
this.popupNote=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_annotation_note',className:'e-pv-annotation-note',styles:'display:none'});this.popupNoteAuthor=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_annotation_note_author',className:'e-pv-annotation-note-author'});this.popupNote.appendChild(this.popupNoteAuthor);// eslint-disable-next-line max-len
this.popupNoteContent=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_annotation_note_content',className:'e-pv-annotation-note-content'});this.popupNote.appendChild(this.popupNoteContent);this.pdfViewerBase.mainContainer.appendChild(this.popupNote);};/**
     * @param event
     * @param color
     * @param author
     * @param note
     * @param type
     * @param event
     * @param color
     * @param author
     * @param note
     * @param type
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.showPopupNote=function(event,color,author,note,type){var mainContainerPosition=this.pdfViewerBase.mainContainer.getBoundingClientRect();var popupNoteClientRect=this.popupNote.getBoundingClientRect();if(author){this.popupNoteAuthor.textContent=author;}this.popupNoteContent.textContent=note;if(type==='Highlight'){this.popupNote.style.backgroundColor='rgb(237, 232, 177)';}else if(type==='Underline'){this.popupNote.style.backgroundColor='rgb(187, 241, 191)';}else if(type==='Strikethrough'){this.popupNote.style.backgroundColor='rgb(242, 188, 207)';}this.popupNote.style.display='block';var topPosition=event.pageY-mainContainerPosition.top+5;var leftPosition=event.pageX-mainContainerPosition.left+5;if(leftPosition+popupNoteClientRect.width>mainContainerPosition.width){leftPosition=leftPosition-popupNoteClientRect.width;}if(topPosition+popupNoteClientRect.height>mainContainerPosition.height){topPosition=topPosition-popupNoteClientRect.height;}this.popupNote.style.top=topPosition+'px';this.popupNote.style.left=leftPosition+'px';};/**
     * @private
     */Annotation.prototype.hidePopupNote=function(){if(this.popupNote){this.popupNote.style.display='none';}};Annotation.prototype.createTextMarkupPopup=function(){var _this=this;var elementId=this.pdfViewer.dataId;// eslint-disable-next-line max-len
this.popupElement=sf.base.createElement('div',{id:elementId+'_popup_annotation_note',className:'e-pv-annotation-popup-menu',styles:'display:none'});var headerElement=sf.base.createElement('div',{id:elementId+'_popup_header',className:'e-pv-annotation-popup-header'});// eslint-disable-next-line max-len
this.authorPopupElement=sf.base.createElement('div',{id:elementId+'_popup_author',className:'e-pv-annotation-popup-author'});headerElement.appendChild(this.authorPopupElement);// eslint-disable-next-line max-len
var closeBtn=sf.base.createElement('span',{id:elementId+'_popup_close',className:'e-pv-annotation-popup-close e-pv-icon'});headerElement.appendChild(closeBtn);this.popupElement.appendChild(headerElement);// eslint-disable-next-line max-len
this.modifiedDateElement=sf.base.createElement('div',{id:elementId+'_popup_modified_time',className:'e-pv-annotation-modified-time'});this.popupElement.appendChild(this.modifiedDateElement);// eslint-disable-next-line max-len
var contentContainer=sf.base.createElement('div',{id:elementId+'_popup_content_container',className:'e-pv-annotation-popup-note-container'});this.noteContentElement=sf.base.createElement('div',{id:elementId+'_popup_content',className:'e-pv-annotation-popup-content'});this.noteContentElement.contentEditable='true';contentContainer.appendChild(this.noteContentElement);this.popupElement.appendChild(contentContainer);this.pdfViewerBase.viewerContainer.appendChild(this.popupElement);closeBtn.addEventListener('click',this.saveClosePopupMenu.bind(this));closeBtn.addEventListener('touchend',this.saveClosePopupMenu.bind(this));this.popupElement.addEventListener('mousedown',this.onPopupElementMoveStart.bind(this));this.popupElement.addEventListener('mousemove',this.onPopupElementMove.bind(this));window.addEventListener('mouseup',this.onPopupElementMoveEnd.bind(this));this.popupElement.addEventListener('touchstart',this.onPopupElementMoveStart.bind(this));this.popupElement.addEventListener('touchmove',this.onPopupElementMove.bind(this));window.addEventListener('touchend',this.onPopupElementMoveEnd.bind(this));this.noteContentElement.addEventListener('mousedown',function(){_this.noteContentElement.focus();});};// eslint-disable-next-line
Annotation.prototype.onPopupElementMoveStart=function(event){if(event.type==='touchstart'){event=event.changedTouches[0];}if(event.target.id!==this.noteContentElement.id||!event.target.contains(this.noteContentElement.childNodes[0])){this.isPopupMenuMoved=true;var popupElementClientRect=this.popupElement.getBoundingClientRect();this.clientX=event.clientX-popupElementClientRect.left;// eslint-disable-next-line max-len
this.clientY=event.clientY-popupElementClientRect.top+this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top*this.pdfViewerBase.getZoomFactor();}};// eslint-disable-next-line
Annotation.prototype.onPopupElementMove=function(event){if(event.type==='touchmove'){event=event.changedTouches[0];}// eslint-disable-next-line max-len
if(this.isPopupMenuMoved&&(event.target.id!==this.noteContentElement.id||!event.target.contains(this.noteContentElement.childNodes[0]))){var left=event.clientX-this.clientX+parseFloat(this.popupElement.style.left);var top_1=event.clientY-this.clientY+parseFloat(this.popupElement.style.top);this.clientX=event.clientX;this.clientY=event.clientY;var clientPosition=this.popupElement.getBoundingClientRect();var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+this.currentAnnotPageNumber);// eslint-disable-next-line max-len
if(left>parseFloat(pageDiv.style.left)&&left+clientPosition.width<parseFloat(pageDiv.style.left)+parseFloat(pageDiv.style.width)){this.popupElement.style.left=left+'px';}else{this.popupElement.style.left=parseFloat(this.popupElement.style.left)+'px';}// eslint-disable-next-line max-len
if(top_1>parseFloat(pageDiv.style.top)&&top_1+clientPosition.height<parseFloat(pageDiv.style.top)+parseFloat(pageDiv.style.height)){this.popupElement.style.top=top_1+'px';}else{this.popupElement.style.top=parseFloat(this.popupElement.style.top)+'px';}}};Annotation.prototype.onPopupElementMoveEnd=function(){this.isPopupMenuMoved=false;};Annotation.prototype.saveClosePopupMenu=function(){if(this.textMarkupAnnotationModule){this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber,this.noteContentElement.innerText);}this.closePopupMenu();};/**
     * @private
     */Annotation.prototype.closePopupMenu=function(){if(this.popupElement){this.popupElement.parentElement.removeChild(this.popupElement);this.popupElement=null;this.isPopupNoteVisible=false;}};/**
     * @param event
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.showAnnotationPopup=function(event){if(this.textMarkupAnnotationModule){this.currentAnnotPageNumber=this.getEventPageNumber(event);// eslint-disable-next-line max-len
if(this.textMarkupAnnotationModule&&(event.target!==this.noteContentElement||event.target.contains(this.noteContentElement.childNodes[0]))){this.hidePopupNote();if(!this.popupElement){this.createTextMarkupPopup();this.popupElement.style.display='block';this.authorPopupElement.textContent=this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author;// eslint-disable-next-line max-len
this.modifiedDateElement.textContent=this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate);this.noteContentElement.textContent=this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;var clientPosition=this.popupElement.getBoundingClientRect();// eslint-disable-next-line max-len
var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+this.currentAnnotPageNumber);var canvasPosition=pageDiv.getBoundingClientRect();var topPosition=event.clientY-canvasPosition.top+parseFloat(pageDiv.style.top);var leftPosition=event.clientX;if(leftPosition+clientPosition.width>parseFloat(pageDiv.style.left)+parseFloat(pageDiv.style.width)){this.popupElement.style.left=leftPosition-clientPosition.width+'px';}else{this.popupElement.style.left=leftPosition+'px';}if(topPosition+clientPosition.height>parseFloat(pageDiv.style.top)+parseFloat(pageDiv.style.height)){this.popupElement.style.top=topPosition-clientPosition.height+'px';}else{this.popupElement.style.top=topPosition+'px';}this.isPopupNoteVisible=true;}}}};/**
     * @param args
     * @param isOpacity
     * @param args
     * @param isOpacity
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.modifyOpacity=function(args,isOpacity){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);var opacityValue=1;if(isOpacity){opacityValue=args;}else{opacityValue=args.value/100;}if(currentAnnotation.opacity!==opacityValue){redoClonedObject.opacity=opacityValue;this.pdfViewer.nodePropertyChange(currentAnnotation,{opacity:opacityValue});if(currentAnnotation.shapeAnnotationType==='StickyNotes'){this.stickyNotesAnnotationModule.updateOpacityValue(currentAnnotation);}else{this.modifyInCollections(currentAnnotation,'opacity');}if(currentAnnotation.shapeAnnotationType==='HandWrittenSignature'||currentAnnotation.shapeAnnotationType==='SignatureImage'||currentAnnotation.shapeAnnotationType==='SignatureText'){// eslint-disable-next-line max-len
this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex,currentAnnotation.signatureName,currentAnnotation.shapeAnnotationType,false,true,false,clonedObject.opacity,redoClonedObject.opacity);}else{this.triggerAnnotationPropChange(currentAnnotation,false,false,false,true);}// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Opacity','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();}};/**
     * @param currentColor
     * @private
     */Annotation.prototype.modifyFontColor=function(currentColor){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);redoClonedObject.fontColor=currentColor;this.pdfViewer.nodePropertyChange(currentAnnotation,{fontColor:currentColor});this.modifyInCollections(currentAnnotation,'fontColor');this.triggerAnnotationPropChange(currentAnnotation,false,false,false,true);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'fontColor','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();};/**
     * @param currentValue
     * @private
     */Annotation.prototype.modifyFontFamily=function(currentValue){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);redoClonedObject.fontFamily=currentValue;if(this.pdfViewer.freeTextSettings.enableAutoFit){this.updateFontFamilyRenderSize(currentAnnotation,currentValue);}else{this.pdfViewer.nodePropertyChange(currentAnnotation,{fontFamily:currentValue});}this.modifyInCollections(currentAnnotation,'fontFamily');this.triggerAnnotationPropChange(currentAnnotation,false,false,false,true);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'fontFamily','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();};/**
     * @param currentValue
     * @private
     */Annotation.prototype.modifyFontSize=function(currentValue){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);redoClonedObject.fontSize=currentValue;var freeTextAnnotation=this.freeTextAnnotationModule;var x=currentAnnotation.bounds.x;var y=currentAnnotation.bounds.y;currentAnnotation.fontSize=currentValue;if(freeTextAnnotation&&!freeTextAnnotation.isNewFreeTextAnnot&&currentAnnotation.dynamicText!==''){freeTextAnnotation.addInuptElemet({x:x,y:y},currentAnnotation);if(currentAnnotation){if(currentAnnotation.previousFontSize>currentValue){freeTextAnnotation.inputBoxElement.style.height='auto';freeTextAnnotation.inputBoxElement.style.height=freeTextAnnotation.inputBoxElement.scrollHeight+5+'px';}var inputEleHeight=parseFloat(freeTextAnnotation.inputBoxElement.style.height);var inputEleWidth=parseFloat(freeTextAnnotation.inputBoxElement.style.width);var zoomFactor=this.pdfViewerBase.getZoomFactor();inputEleWidth=inputEleWidth/zoomFactor;inputEleHeight=inputEleHeight/zoomFactor;var heightDiff=inputEleHeight-currentAnnotation.bounds.height;var y_1=undefined;if(heightDiff>0){y_1=currentAnnotation.wrapper.offsetY+heightDiff/2;y_1=y_1>0?y_1:undefined;}else{heightDiff=Math.abs(heightDiff);y_1=currentAnnotation.wrapper.offsetY-heightDiff/2;y_1=y_1>0?y_1:undefined;}var widthDiff=inputEleWidth-currentAnnotation.bounds.width;var x_1=undefined;if(widthDiff>0){x_1=currentAnnotation.wrapper.offsetX+widthDiff/2;x_1=x_1>0?x_1:undefined;}else{widthDiff=Math.abs(widthDiff);x_1=currentAnnotation.wrapper.offsetX-widthDiff/2;}currentAnnotation.bounds.width=inputEleWidth;currentAnnotation.bounds.height=inputEleHeight;// eslint-disable-next-line max-len
this.pdfViewer.nodePropertyChange(currentAnnotation,{fontSize:currentValue,bounds:{width:currentAnnotation.bounds.width,height:currentAnnotation.bounds.height,y:y_1,x:x_1}});this.pdfViewer.renderSelector(currentAnnotation.pageIndex,this.pdfViewer.annotationSelectorSettings);currentAnnotation.previousFontSize=currentValue;}this.modifyInCollections(currentAnnotation,'fontSize');this.modifyInCollections(currentAnnotation,'bounds');this.triggerAnnotationPropChange(currentAnnotation,false,false,false,true);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'fontSize','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();}};/**
     * @param currentValue
     * @private
     */Annotation.prototype.modifyTextAlignment=function(currentValue){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);redoClonedObject.textAlign=currentValue;this.pdfViewer.nodePropertyChange(currentAnnotation,{textAlign:currentValue});this.modifyInCollections(currentAnnotation,'textAlign');this.triggerAnnotationPropChange(currentAnnotation,false,false,false,true);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'textAlign','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();};/**
     * @param fontInfo
     * @param action
     * @private
     */Annotation.prototype.modifyTextProperties=function(fontInfo,action){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);if(action==='bold'){redoClonedObject.font.isBold=fontInfo.isBold;}else if(action==='italic'){redoClonedObject.font.isItalic=fontInfo.isItalic;}else if(action==='underline'){redoClonedObject.font.isUnderline=fontInfo.isUnderline;if(redoClonedObject.font.isUnderline&&redoClonedObject.font.isStrikeout){redoClonedObject.font.isStrikeout=false;}}else if(action==='strikeout'){redoClonedObject.font.isStrikeout=fontInfo.isStrikeout;if(redoClonedObject.font.isUnderline&&redoClonedObject.font.isStrikeout){redoClonedObject.font.isUnderline=false;}}this.pdfViewer.nodePropertyChange(currentAnnotation,{font:fontInfo});this.modifyInCollections(currentAnnotation,'textPropertiesChange');this.triggerAnnotationPropChange(currentAnnotation,false,false,false,true);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'textPropertiesChange','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();};/**
     * @param thicknessValue
     * @private
     */Annotation.prototype.modifyThickness=function(thicknessValue){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];if(currentAnnotation.thickness!==thicknessValue){var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);redoClonedObject.thickness=thicknessValue;this.pdfViewer.nodePropertyChange(currentAnnotation,{thickness:thicknessValue});this.modifyInCollections(currentAnnotation,'thickness');if(currentAnnotation.shapeAnnotationType==='HandWrittenSignature'||currentAnnotation.shapeAnnotationType==='SignatureText'||currentAnnotation.shapeAnnotationType==='SignatureImage'){// eslint-disable-next-line max-len
this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex,currentAnnotation.signatureName,currentAnnotation.shapeAnnotationType,false,false,true,clonedObject.thickness,redoClonedObject.thickness);}else{this.triggerAnnotationPropChange(currentAnnotation,false,false,true,false);}// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Thickness','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();}};/**
     * @param color
     * @private
     */Annotation.prototype.modifyStrokeColor=function(color){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);redoClonedObject.strokeColor=color;this.pdfViewer.nodePropertyChange(currentAnnotation,{strokeColor:color});this.modifyInCollections(currentAnnotation,'stroke');if(currentAnnotation.shapeAnnotationType==='HandWrittenSignature'||currentAnnotation.shapeAnnotationType==='SignatureText'||currentAnnotation.shapeAnnotationType==='SignatureImage'){// eslint-disable-next-line max-len
this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex,currentAnnotation.signatureName,currentAnnotation.shapeAnnotationType,true,false,false,clonedObject.strokeColor,redoClonedObject.strokeColor);}else{this.triggerAnnotationPropChange(currentAnnotation,false,true,false,false);}// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Stroke','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();};/**
     * @param color
     * @private
     */Annotation.prototype.modifyFillColor=function(color){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);redoClonedObject.fillColor=color;this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{fillColor:color});this.modifyInCollections(currentAnnotation,'fill');this.triggerAnnotationPropChange(currentAnnotation,true,false,false,false);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Fill','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();};/**
     * @param dynamicText
     * @param annotName
     * @private
     */Annotation.prototype.modifyDynamicTextValue=function(dynamicText,annotName){var currentAnnotation=null;currentAnnotation=this.pdfViewer.selectedItems.annotations.filter(function(s){return s.annotName===annotName;})[0];if(currentAnnotation){var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);currentAnnotation.dynamicText=dynamicText;redoClonedObject.dynamicText=dynamicText;if(clonedObject.dynamicText===''){clonedObject.dynamicText=this.freeTextAnnotationModule.previousText;}this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{dynamicText:dynamicText});// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'dynamicText Change','',clonedObject,redoClonedObject);this.modifyInCollections(currentAnnotation,'dynamicText');this.pdfViewer.renderDrawing();}};// eslint-disable-next-line
Annotation.prototype.modifyInCollections=function(annotationBase,property){// eslint-disable-next-line
var returnObj;if(annotationBase.measureType===''||sf.base.isNullOrUndefined(annotationBase.measureType)){if(annotationBase.shapeAnnotationType==='FreeText'){returnObj=this.freeTextAnnotationModule.modifyInCollection(property,annotationBase.pageIndex,annotationBase);}else if(annotationBase.shapeAnnotationType==='HandWrittenSignature'||annotationBase.shapeAnnotationType==='SignatureText'||annotationBase.shapeAnnotationType==='SignatureImage'){// eslint-disable-next-line max-len
returnObj=this.pdfViewerBase.signatureModule.modifySignatureCollection(property,annotationBase.pageIndex,annotationBase);}else if(annotationBase.shapeAnnotationType==='Stamp'){returnObj=this.stampAnnotationModule.modifyInCollection(property,annotationBase.pageIndex,annotationBase);}else if(annotationBase.shapeAnnotationType==='Ink'){// eslint-disable-next-line max-len
returnObj=this.inkAnnotationModule.modifySignatureInkCollection(property,annotationBase.pageIndex,annotationBase);}else{returnObj=this.shapeAnnotationModule.modifyInCollection(property,annotationBase.pageIndex,annotationBase);}}else if(annotationBase.measureType==='Distance'||annotationBase.measureType==='Perimeter'||annotationBase.measureType==='Radius'||annotationBase.measureType==='Area'||annotationBase.measureType==='Volume'){returnObj=this.measureAnnotationModule.modifyInCollection(property,annotationBase.pageIndex,annotationBase);}if(this.isUndoRedoAction){this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase,null,true);if(this.isUndoAction){annotationBase.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();}}else{if(property!=='bounds'){this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase);}}return returnObj;};/**
     * @private
     */Annotation.prototype.createPropertiesWindow=function(){var _this=this;if(!sf.base.isBlazor()){var elementID=this.pdfViewer.dataId;// eslint-disable-next-line max-len
var dialogDiv=sf.base.createElement('div',{id:elementID+'_properties_window',className:'e-pv-properties-window'});var appearanceTab=this.createAppearanceTab();this.pdfViewerBase.pageContainer.appendChild(dialogDiv);this.propertiesDialog=new sf.popups.Dialog({showCloseIcon:true,closeOnEscape:false,isModal:true,header:this.pdfViewer.localeObj.getConstant('Line Properties'),target:this.pdfViewer.element,content:appearanceTab,close:function close(){_this.destroyPropertiesWindow();}});if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.propertiesDialog.buttons=[// eslint-disable-next-line max-len
{buttonModel:{content:this.pdfViewer.localeObj.getConstant('OK'),isPrimary:true},click:this.onOkClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Cancel')},click:this.onCancelClicked.bind(this)}];}else{this.propertiesDialog.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Cancel')},click:this.onCancelClicked.bind(this)},// eslint-disable-next-line max-len
{buttonModel:{content:this.pdfViewer.localeObj.getConstant('OK'),isPrimary:true},click:this.onOkClicked.bind(this)}];}if(this.pdfViewer.enableRtl){this.propertiesDialog.enableRtl=true;}this.propertiesDialog.appendTo(dialogDiv);if(this.pdfViewer.selectedItems.annotations[0]&&this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Line'){// eslint-disable-next-line
var fillColor=document.getElementById(this.pdfViewer.dataId+'_properties_fill_color');fillColor.disabled=true;}// eslint-disable-next-line max-len
this.startArrowDropDown.content=this.createContent(this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes)).outerHTML;this.endArrowDropDown.content=this.createContent(this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes)).outerHTML;this.thicknessBox.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;this.fillColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill;this.refreshColorPicker(this.fillColorPicker);this.strokeColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;this.refreshColorPicker(this.strokeColorPicker);this.updateColorInIcon(this.fillDropDown.element,this.fillColorPicker.value);this.updateColorInIcon(this.strokeDropDown.element,this.strokeColorPicker.value);this.opacitySlider.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity*100;this.updateOpacityIndicator();// eslint-disable-next-line
if(parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray)>=3){this.lineStyleDropDown.content=this.createDropDownContent('dashed').outerHTML;}else if(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray==='2'){this.lineStyleDropDown.content=this.createDropDownContent('dotted').outerHTML;}else if(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray==='0'){this.lineStyleDropDown.content=this.createDropDownContent('solid').outerHTML;}this.selectedLineStyle=this.pdfViewer.selectedItems.annotations[0].borderStyle;this.selectedLineDashArray=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray;if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Distance'){this.leaderLengthBox.value=this.pdfViewer.selectedItems.annotations[0].leaderHeight;}}else{var opacityValue=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity*100;var lineStartElement=this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes);var lineEndElement=this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes);var lineStyleElement=void 0;// eslint-disable-next-line
if(parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray)>=3){lineStyleElement='Dashed';}else if(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray==='2'){lineStyleElement='Dotted';}else if(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray==='0'){lineStyleElement='Solid';}this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenPropertiesDialog',opacityValue,lineStartElement,lineEndElement,lineStyleElement);}};Annotation.prototype.updatePropertiesWindowInBlazor=function(){// eslint-disable-next-line
var thicknessElement=document.querySelector('#'+this.pdfViewer.dataId+'_line_thickness');// eslint-disable-next-line
var fillColorElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_fill_color_button');// eslint-disable-next-line
var strokeColorElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_stroke_color_button');// eslint-disable-next-line
var leaderLengthElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_leader_length');thicknessElement.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;fillColorElement.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill;strokeColorElement.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;this.onStrokeColorChange(strokeColorElement.value);this.onFillColorChange(fillColorElement.value);if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Distance'){// eslint-disable-next-line
leaderLengthElement.value=parseInt(this.pdfViewer.selectedItems.annotations[0].leaderHeight.toString());}};Annotation.prototype.destroyPropertiesWindow=function(){if(this.strokeColorPicker){this.strokeColorPicker.destroy();this.strokeColorPicker=null;}if(this.fillColorPicker){this.fillColorPicker.destroy();this.fillColorPicker=null;}if(this.endArrowDropDown){this.endArrowDropDown.destroy();this.endArrowDropDown=null;}if(this.startArrowDropDown){this.startArrowDropDown.destroy();this.startArrowDropDown=null;}if(this.opacitySlider){this.opacitySlider.destroy();this.opacitySlider=null;}if(this.thicknessBox){this.thicknessBox.destroy();this.thicknessBox=null;}if(this.lineStyleDropDown){this.lineStyleDropDown.destroy();this.lineStyleDropDown=null;}if(this.leaderLengthBox){this.leaderLengthBox.destroy();this.leaderLengthBox=null;}if(this.propertiesDialog){this.propertiesDialog.destroy();this.propertiesDialog=null;}var dialogElement=this.pdfViewerBase.getElement('_properties_window');if(dialogElement){dialogElement.parentElement.removeChild(dialogElement);}};Annotation.prototype.refreshColorPicker=function(colorPick){colorPick.setProperties({'value':colorPick.value},true);colorPick.refresh();};Annotation.prototype.createAppearanceTab=function(){var _this=this;var elementID=this.pdfViewer.dataId;// eslint-disable-next-line max-len
var items=[{text:this.pdfViewer.localeObj.getConstant('None')},{text:this.pdfViewer.localeObj.getConstant('Open Arrow')},{text:this.pdfViewer.localeObj.getConstant('Closed Arrow')},{text:this.pdfViewer.localeObj.getConstant('Round Arrow')},{text:this.pdfViewer.localeObj.getConstant('Square Arrow')},{text:this.pdfViewer.localeObj.getConstant('Diamond Arrow')}];// eslint-disable-next-line max-len
var appearanceDiv=sf.base.createElement('div',{id:elementID+'_properties_appearance'});var lineStyleContainer=sf.base.createElement('div',{className:'e-pv-properties-line-style-prop'});appearanceDiv.appendChild(lineStyleContainer);// eslint-disable-next-line max-len
var lineHeadStartElement=this.createInputElement(this.pdfViewer.localeObj.getConstant('Start Arrow'),lineStyleContainer,'text','button',true,'e-pv-properties-line-start',elementID+'_properties_line_start');// eslint-disable-next-line max-len
this.startArrowDropDown=new sf.splitbuttons.DropDownButton({items:items,cssClass:'e-pv-properties-line-start',select:this.onStartArrowHeadStyleSelect.bind(this)},lineHeadStartElement);var lineHeadEndElement=this.createInputElement(this.pdfViewer.localeObj.getConstant('End Arrow'),lineStyleContainer,'text','button',true,'e-pv-properties-line-end',elementID+'_properties_line_end');// eslint-disable-next-line max-len
var borderStyleContainer=sf.base.createElement('div',{className:'e-pv-properties-border-style'});appearanceDiv.appendChild(borderStyleContainer);// eslint-disable-next-line max-len
this.endArrowDropDown=new sf.splitbuttons.DropDownButton({items:items,cssClass:'e-pv-properties-line-end',select:this.onEndArrowHeadStyleSelect.bind(this)},lineHeadEndElement);var lineStyleElement=this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Style'),borderStyleContainer,'text','button',true,'e-pv-properties-line-style',elementID+'_properties_line_style');var dropDownTarget=this.createStyleList();// eslint-disable-next-line max-len
this.lineStyleDropDown=new sf.splitbuttons.DropDownButton({cssClass:'e-pv-properties-line-style',target:dropDownTarget},lineStyleElement);// eslint-disable-next-line max-len
var thicknessElement=this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Thickness'),borderStyleContainer,'text','input',true,'e-pv-properties-line-thickness',elementID+'_properties_thickness');this.thicknessBox=new sf.inputs.NumericTextBox({value:0,format:'## pt',cssClass:'e-pv-properties-line-thickness',min:0,max:12},thicknessElement);var colorStyleContainer=sf.base.createElement('div',{className:'e-pv-properties-color-style'});appearanceDiv.appendChild(colorStyleContainer);// eslint-disable-next-line max-len
var fillColorElement=this.createInputElement(this.pdfViewer.localeObj.getConstant('Fill Color'),colorStyleContainer,'color','button',true,'e-pv-properties-line-fill-color',elementID+'_properties_fill_color');this.fillColorPicker=this.createColorPicker(elementID+'_properties_fill_color',true);this.fillColorPicker.change=function(args){var currentColor=args.currentValue.hex===''?'#ffffff00':args.currentValue.hex;_this.fillDropDown.toggle();_this.updateColorInIcon(_this.fillDropDown.element,currentColor);};// eslint-disable-next-line max-len
this.fillDropDown=this.createDropDownButton(fillColorElement,'e-pv-properties-fill-color-icon',this.fillColorPicker.element.parentElement);this.fillDropDown.beforeOpen=this.onFillDropDownBeforeOpen.bind(this);this.fillDropDown.open=function(){_this.fillColorPicker.refresh();};// eslint-disable-next-line max-len
var strokeColorElement=this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Color'),colorStyleContainer,'color','button',true,'e-pv-properties-line-stroke-color',elementID+'_properties_stroke_color');this.strokeColorPicker=this.createColorPicker(elementID+'_properties_stroke_color',false);this.strokeColorPicker.change=function(args){var currentColor=args.currentValue.hex===''?'#ffffff00':args.currentValue.hex;_this.strokeDropDown.toggle();_this.updateColorInIcon(_this.strokeDropDown.element,currentColor);};// eslint-disable-next-line max-len
this.strokeDropDown=this.createDropDownButton(strokeColorElement,'e-pv-properties-stroke-color-icon',this.strokeColorPicker.element.parentElement);this.strokeDropDown.beforeOpen=this.onStrokeDropDownBeforeOpen.bind(this);this.strokeDropDown.open=function(){_this.strokeColorPicker.refresh();};var opacityContainer=sf.base.createElement('div',{className:'e-pv-properties-opacity-style'});appearanceDiv.appendChild(opacityContainer);// eslint-disable-next-line max-len
var opacityElement=this.createInputElement(this.pdfViewer.localeObj.getConstant('Opacity'),opacityContainer,'','div',true,'e-pv-properties-line-opacity',elementID+'_properties_opacity');this.opacitySlider=new sf.inputs.Slider({type:'MinRange',max:100,min:0,cssClass:'e-pv-properties-line-opacity',change:function change(){_this.updateOpacityIndicator();}},opacityElement);if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Distance'){// eslint-disable-next-line max-len
var lineLengthElement=this.createInputElement(this.pdfViewer.localeObj.getConstant('Leader Length'),opacityContainer,'text','input',true,'e-pv-properties-line-leader-length',elementID+'_properties_leader_length');this.leaderLengthBox=new sf.inputs.NumericTextBox({value:0,format:'## pt',cssClass:'e-pv-properties-line-leader-length',min:0,max:100},lineLengthElement);}return appearanceDiv;};Annotation.prototype.createContent=function(text){var divElement=sf.base.createElement('div',{className:'e-pv-properties-line-style-content'});divElement.textContent=text;return divElement;};Annotation.prototype.onStrokeDropDownBeforeOpen=function(){if(this.pdfViewer.selectedItems.annotations.length===1){this.strokeColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;}this.strokeColorPicker.refresh();};Annotation.prototype.onFillDropDownBeforeOpen=function(){if(this.pdfViewer.selectedItems.annotations.length===1){this.fillColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;}this.fillColorPicker.refresh();};Annotation.prototype.createStyleList=function(){var _this=this;var ulElement=sf.base.createElement('ul');document.body.appendChild(ulElement);var solidLi=this.createListForStyle('solid');solidLi.addEventListener('click',function(){_this.setThickness('0','solid');});ulElement.appendChild(solidLi);var dottedLi=this.createListForStyle('dotted');dottedLi.addEventListener('click',function(){_this.setThickness('2','dotted');});ulElement.appendChild(dottedLi);var dashedLi=this.createListForStyle('dashed');dashedLi.addEventListener('click',function(){_this.setThickness('3','dashed');});ulElement.appendChild(dashedLi);return ulElement;};Annotation.prototype.createColorPicker=function(idString,isNoColor){var inputElement=sf.base.createElement('input',{id:idString+'_target'});document.body.appendChild(inputElement);var colorPicker=new sf.inputs.ColorPicker({inline:true,mode:'Palette',enableOpacity:false,value:'#000000',showButtons:false,modeSwitcher:false,noColor:isNoColor});if(this.pdfViewer.enableRtl){colorPicker.enableRtl=true;}colorPicker.appendTo(inputElement);return colorPicker;};Annotation.prototype.createDropDownButton=function(element,iconClass,target){// eslint-disable-next-line max-len
var dropDownButton=new sf.splitbuttons.DropDownButton({iconCss:iconClass+' e-pv-icon',target:target});if(this.pdfViewer.enableRtl){dropDownButton.enableRtl=true;}dropDownButton.appendTo(element);return dropDownButton;};Annotation.prototype.updateColorInIcon=function(element,color){element.childNodes[0].style.borderBottomColor=color;};/**
     * @param color
     * @private
     */Annotation.prototype.onFillColorChange=function(color){// eslint-disable-next-line
var colorElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_fill_color_button');if(color!=='transparent'){colorElement.children[0].style.borderBottomColor=color;}};/**
     * @param color
     * @private
     */Annotation.prototype.onStrokeColorChange=function(color){// eslint-disable-next-line
var colorElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_stroke_color_button');if(color!=='transparent'){colorElement.children[0].style.borderBottomColor=color;}};Annotation.prototype.setThickness=function(value,style,isBlazor$$1){if(!isBlazor$$1){this.lineStyleDropDown.content=this.createDropDownContent(style).outerHTML;}this.selectedLineDashArray=value;if(value==='0'){this.selectedLineStyle='Solid';}else if(value==='2'||value==='3'){this.selectedLineStyle='Dashed';}};Annotation.prototype.createDropDownContent=function(style){var divElement=sf.base.createElement('div',{className:'e-pv-line-styles-content-container'});// eslint-disable-next-line max-len
var spanElement=sf.base.createElement('span',{className:'e-pv-line-styles-content',styles:'border-bottom-style:'+style});divElement.appendChild(spanElement);return divElement;};Annotation.prototype.createListForStyle=function(style){var liElement=sf.base.createElement('li',{className:'e-menu-item'});var divElement=sf.base.createElement('div',{className:'e-pv-line-styles-container'});// eslint-disable-next-line max-len
var spanElement=sf.base.createElement('span',{className:'e-pv-line-styles-item',styles:'border-bottom-style:'+style});divElement.appendChild(spanElement);liElement.appendChild(divElement);return liElement;};Annotation.prototype.onStartArrowHeadStyleSelect=function(args){this.startArrowDropDown.content=this.createContent(args.item.text).outerHTML;};Annotation.prototype.onEndArrowHeadStyleSelect=function(args){this.endArrowDropDown.content=this.createContent(args.item.text).outerHTML;};// eslint-disable-next-line max-len
Annotation.prototype.createInputElement=function(labelText,parentElement,inputType,input,isLabelNeeded,className,idString){var container=sf.base.createElement('div',{id:idString+'_container',className:className+'-container'});if(isLabelNeeded){var label=sf.base.createElement('div',{id:idString+'_label',className:className+'-label'});label.textContent=labelText;container.appendChild(label);}if(this.pdfViewer.localeObj.getConstant('Opacity')===labelText){this.opacityIndicator=sf.base.createElement('span',{className:'e-pv-properties-opacity-indicator'});container.appendChild(this.opacityIndicator);}var textBoxInput=sf.base.createElement(input,{id:idString});if(input==='input'){textBoxInput.type=inputType;}container.appendChild(textBoxInput);parentElement.appendChild(container);return textBoxInput;};Annotation.prototype.updateOpacityIndicator=function(){this.opacityIndicator.textContent=this.opacitySlider.value+'%';};/**
     * @private
     */Annotation.prototype.onOkClicked=function(opacityValue){var startArrow;var endArrow;var thickness;var strokeColor;var fillColor;var opacity;if(!sf.base.isBlazor()){startArrow=this.getArrowTypeFromDropDown(this.startArrowDropDown.content);endArrow=this.getArrowTypeFromDropDown(this.endArrowDropDown.content);thickness=this.thicknessBox.value;strokeColor=this.strokeColorPicker.getValue(this.strokeColorPicker.value,'hex');strokeColor=strokeColor===''?'#ffffff00':strokeColor;fillColor=this.fillColorPicker.getValue(this.fillColorPicker.value,'hex');// eslint-disable-next-line max-len
fillColor=fillColor===''||fillColor==='#transp'||this.fillColorPicker.value==='#ffffff00'?'#ffffff00':fillColor;opacity=this.opacitySlider.value/100;}else{// eslint-disable-next-line
var lineStartElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_line_start');// eslint-disable-next-line
var lineEndElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_line_end');// eslint-disable-next-line
var thicknessElement=document.querySelector('#'+this.pdfViewer.dataId+'_line_thickness');// eslint-disable-next-line
var lineStyleElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_style');// eslint-disable-next-line
var fillColorElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_fill_color_button');// eslint-disable-next-line
var strokeColorElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_stroke_color_button');// eslint-disable-next-line
var opacityElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_opacity');startArrow=this.getArrowTypeFromDropDown(lineStartElement.value,true);endArrow=this.getArrowTypeFromDropDown(lineEndElement.value,true);// eslint-disable-next-line
thickness=parseInt(thicknessElement.value);strokeColor=this.getValue(strokeColorElement.children[0].style.borderBottomColor,'hex');strokeColor=strokeColor===''?'#ffffff00':strokeColor;fillColor=this.getValue(fillColorElement.children[0].style.borderBottomColor,'hex');fillColor=fillColor===''?'#ffffff00':fillColor;if(opacityValue){opacity=opacityValue/100;}else{opacity=opacityElement.value/100;}if(lineStyleElement.value){if(lineStyleElement.value==='Solid'){this.setThickness('0','solid',true);}else if(lineStyleElement.value==='Dotted'){this.setThickness('2','dotted',true);}else if(lineStyleElement.value==='Dashed'){this.setThickness('3','dashed',true);}}}var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);var newNode={};var isColorChanged=false;var isStrokeColorChanged=false;var isThicknessChanged=false;var isOpacityChanged=false;var isLineHeadStartStyleChanged=false;var isLineHeadEndStyleChanged=false;var isBorderDashArrayChanged=false;if(startArrow!==currentAnnotation.sourceDecoraterShapes){newNode.sourceDecoraterShapes=startArrow;redoClonedObject.lineHeadStart=this.getArrowString(startArrow);isLineHeadStartStyleChanged=true;}if(endArrow!==currentAnnotation.taregetDecoraterShapes){newNode.taregetDecoraterShapes=endArrow;redoClonedObject.lineHeadEnd=this.getArrowString(endArrow);isLineHeadEndStyleChanged=true;}if(thickness!==currentAnnotation.wrapper.children[0].style.strokeWidth){newNode.thickness=thickness;redoClonedObject.thickness=thickness;isThicknessChanged=true;}if(strokeColor!==currentAnnotation.wrapper.children[0].style.strokeColor){newNode.strokeColor=strokeColor;redoClonedObject.strokeColor=strokeColor;isStrokeColorChanged=true;}if(fillColor!==currentAnnotation.wrapper.children[0].style.fill){newNode.fillColor=fillColor;redoClonedObject.fillColor=fillColor;isColorChanged=true;}if(opacity!==currentAnnotation.wrapper.children[0].style.opacity){newNode.opacity=opacity;redoClonedObject.opacity=opacity;isOpacityChanged=true;}if(this.selectedLineDashArray!==currentAnnotation.wrapper.children[0].style.strokeDashArray){newNode.borderDashArray=this.selectedLineDashArray;newNode.borderStyle=this.selectedLineStyle;redoClonedObject.borderDashArray=newNode.borderDashArray;redoClonedObject.borderStyle=newNode.borderStyle;isBorderDashArrayChanged=true;}if(!sf.base.isBlazor()){// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Distance'&&this.leaderLengthBox.value!==this.pdfViewer.selectedItems.annotations[0].leaderHeight){newNode.leaderHeight=this.leaderLengthBox.value;}}else{// eslint-disable-next-line
var leaderLengthElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_leader_length');// eslint-disable-next-line
if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Distance'&&parseInt(leaderLengthElement.value)!==this.pdfViewer.selectedItems.annotations[0].leaderHeight){// eslint-disable-next-line
newNode.leaderHeight=parseInt(leaderLengthElement.value);}}this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],newNode);this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill=fillColor;// eslint-disable-next-line max-len
this.triggerAnnotationPropChange(this.pdfViewer.selectedItems.annotations[0],isColorChanged,isStrokeColorChanged,isThicknessChanged,isOpacityChanged,isLineHeadStartStyleChanged,isLineHeadEndStyleChanged,isBorderDashArrayChanged);this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],'thickness');this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],'stroke');this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],'fill');this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],'opacity');this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],'dashArray');this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],'startArrow');this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],'endArrow');// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Distance'){this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],'leaderLength');}// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Line properties change','',clonedObject,redoClonedObject);this.renderAnnotations(currentAnnotation.pageIndex,null,null,null);if(!sf.base.isBlazor()){this.propertiesDialog.hide();}};Annotation.prototype.onCancelClicked=function(){this.propertiesDialog.hide();};Annotation.prototype.getArrowTypeFromDropDown=function(arrowType,isBlazor$$1){if(!isBlazor$$1){arrowType=arrowType.split('</div>')[0].split('">')[1];}var arrow='None';switch(arrowType){case this.pdfViewer.localeObj.getConstant('None'):arrow='None';break;case this.pdfViewer.localeObj.getConstant('Open Arrow'):arrow='OpenArrow';break;case this.pdfViewer.localeObj.getConstant('Closed Arrow'):arrow='Arrow';break;case this.pdfViewer.localeObj.getConstant('Round Arrow'):arrow='Circle';break;case this.pdfViewer.localeObj.getConstant('Square Arrow'):arrow='Square';break;case this.pdfViewer.localeObj.getConstant('Diamond Arrow'):arrow='Diamond';break;case this.pdfViewer.localeObj.getConstant('Butt'):arrow='Butt';break;}return arrow;};/**
     * @param arrow
     * @private
     */Annotation.prototype.getArrowString=function(arrow){var arrowType=this.pdfViewer.localeObj.getConstant('None');switch(arrow){case'Arrow':arrowType=this.pdfViewer.localeObj.getConstant('Closed');break;case'OpenArrow':arrowType=this.pdfViewer.localeObj.getConstant('Open Arrow');break;case'Circle':arrowType=this.pdfViewer.localeObj.getConstant('Round');break;case'None':case'Square':case'Diamond':arrowType=this.pdfViewer.localeObj.getConstant(arrow);break;case'Butt':arrowType=this.pdfViewer.localeObj.getConstant('Butt');break;}return arrowType;};/**
     * @private
     */Annotation.prototype.onAnnotationMouseUp=function(){if(this.pdfViewer.selectedItems.annotations.length!==0){if(this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule){this.enableBasedOnType();this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(true);if(!sf.base.Browser.isDevice){this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems();}}this.pdfViewerBase.disableTextSelectionMode();}else{if(this.pdfViewer.textSelectionModule&&!this.pdfViewerBase.isPanMode&&!this.pdfViewer.designerMode){this.pdfViewer.textSelectionModule.enableTextSelectionMode();}// eslint-disable-next-line max-len
if(this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)){// eslint-disable-next-line max-len
var isSkip=this.pdfViewer.toolbar.annotationToolbarModule.inkAnnotationSelected;if(this.pdfViewer.annotation.freeTextAnnotationModule&&!this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus&&!isSkip){this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(false);this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(false);}this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems();this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(false);}}};/**
     * @param pdfAnnotationBase
     * @param event
     * @param pdfAnnotationBase
     * @param event
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.onShapesMouseup=function(pdfAnnotationBase,event){// eslint-disable-next-line max-len
pdfAnnotationBase=!sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0])?this.pdfViewer.selectedItems.annotations[0]:pdfAnnotationBase;if(pdfAnnotationBase){if(this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation){this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null;this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null;}// eslint-disable-next-line max-len
if((this.pdfViewerBase.tool instanceof NodeDrawingTool||this.pdfViewerBase.tool instanceof LineTool)&&!this.pdfViewerBase.tool.dragging){// eslint-disable-next-line
var setting={opacity:pdfAnnotationBase.opacity,fillColor:pdfAnnotationBase.fillColor,strokeColor:pdfAnnotationBase.strokeColor,thickness:pdfAnnotationBase.thickness,author:pdfAnnotationBase.author,subject:pdfAnnotationBase.subject,modifiedDate:pdfAnnotationBase.modifiedDate};var index=this.getAnnotationIndex(pdfAnnotationBase.pageIndex,pdfAnnotationBase.id);// eslint-disable-next-line
var bounds={left:pdfAnnotationBase.bounds.x,top:pdfAnnotationBase.bounds.y,width:pdfAnnotationBase.bounds.width,height:pdfAnnotationBase.bounds.height};if(this.pdfViewerBase.tool instanceof LineTool){setting.lineHeadStartStyle=this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);setting.lineHeadEndStyle=this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);setting.borderDashArray=pdfAnnotationBase.borderDashArray;}if(!this.pdfViewerBase.isAnnotationAdded||pdfAnnotationBase.measureType==='Distance'){if(pdfAnnotationBase.measureType===''||sf.base.isNullOrUndefined(pdfAnnotationBase.measureType)){// eslint-disable-next-line max-len
this.shapeAnnotationModule.renderShapeAnnotations(pdfAnnotationBase,this.pdfViewer.annotation.getEventPageNumber(event));}else if(pdfAnnotationBase.measureType==='Distance'||pdfAnnotationBase.measureType==='Perimeter'||pdfAnnotationBase.measureType==='Radius'){// eslint-disable-next-line max-len
this.measureAnnotationModule.renderMeasureShapeAnnotations(pdfAnnotationBase,this.pdfViewer.annotation.getEventPageNumber(event));}}this.pdfViewerBase.updateDocumentEditedProperty(true);}else if(this.pdfViewerBase.tool instanceof MoveTool||this.pdfViewerBase.tool instanceof ResizeTool){this.pdfViewerBase.updateDocumentEditedProperty(true);this.oldProperties=pdfAnnotationBase.bounds;if(pdfAnnotationBase.measureType===''||sf.base.isNullOrUndefined(pdfAnnotationBase.measureType)){if(pdfAnnotationBase.shapeAnnotationType==='FreeText'){// eslint-disable-next-line max-len
this.pdfViewer.annotation.freeTextAnnotationModule.modifyInCollection('bounds',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}else if(pdfAnnotationBase.shapeAnnotationType==='HandWrittenSignature'||pdfAnnotationBase.shapeAnnotationType==='SignatureImage'||pdfAnnotationBase.shapeAnnotationType==='SignatureText'){// eslint-disable-next-line max-len
this.pdfViewerBase.signatureModule.modifySignatureCollection('bounds',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}else if(pdfAnnotationBase.shapeAnnotationType==='Ink'){// eslint-disable-next-line max-len
this.inkAnnotationModule.modifySignatureInkCollection('bounds',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}else if(pdfAnnotationBase.shapeAnnotationType==='Stamp'||pdfAnnotationBase.shapeAnnotationType==='Image'){// eslint-disable-next-line max-len
this.stampAnnotationModule.modifyInCollection('bounds',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}else{// eslint-disable-next-line max-len
this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection('bounds',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}// eslint-disable-next-line max-len
}else if(pdfAnnotationBase.measureType==='Distance'||pdfAnnotationBase.measureType==='Perimeter'||pdfAnnotationBase.measureType==='Radius'||pdfAnnotationBase.measureType==='Area'||pdfAnnotationBase.measureType==='Volume'){this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('bounds',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}if(this.pdfViewerBase.tool instanceof ResizeTool){if(!pdfAnnotationBase.formFieldAnnotationType){this.triggerAnnotationResize(pdfAnnotationBase);}}if(this.pdfViewerBase.tool instanceof MoveTool){if(this.pdfViewerBase.action!=='Select'){if(!pdfAnnotationBase.formFieldAnnotationType){this.triggerAnnotationMove(pdfAnnotationBase);}}}}else if(this.pdfViewerBase.tool instanceof ConnectTool){this.pdfViewerBase.updateDocumentEditedProperty(true);this.oldProperties=pdfAnnotationBase.bounds;if(pdfAnnotationBase.measureType===''||sf.base.isNullOrUndefined(pdfAnnotationBase.measureType)){// eslint-disable-next-line max-len
if(pdfAnnotationBase.shapeAnnotationType==='Line'||pdfAnnotationBase.shapeAnnotationType==='LineWidthArrowHead'||pdfAnnotationBase.shapeAnnotationType==='Polygon'){this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection('bounds',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}// eslint-disable-next-line max-len
}else if(pdfAnnotationBase.measureType==='Distance'||pdfAnnotationBase.measureType==='Perimeter'||pdfAnnotationBase.measureType==='Area'||pdfAnnotationBase.measureType==='Volume'){if(pdfAnnotationBase.measureType==='Distance'){// eslint-disable-next-line max-len
this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('leaderLength',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}// eslint-disable-next-line max-len
this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('bounds',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}this.triggerAnnotationResize(pdfAnnotationBase);}// eslint-disable-next-line max-len
if(this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&(pdfAnnotationBase.shapeAnnotationType==='HandWrittenSignature'||pdfAnnotationBase.shapeAnnotationType==='SignatureText'||pdfAnnotationBase.shapeAnnotationType==='SignatureImage')){// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')],true);// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')],true);}if(this.pdfViewer.toolbarModule){if(this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.clearTextMarkupMode();if(pdfAnnotationBase.measureType===''||sf.base.isNullOrUndefined(pdfAnnotationBase.measureType)){// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode();}else if(pdfAnnotationBase.measureType==='Distance'||pdfAnnotationBase.measureType==='Perimeter'||pdfAnnotationBase.measureType==='Area'||pdfAnnotationBase.measureType==='Volume'||pdfAnnotationBase.measureType==='Radius'){this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode();}if(this.pdfViewer.selectedItems.annotations.length===1&&this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType===null){this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(true);}if(!sf.base.isBlazor()){if(this.pdfViewer.selectedItems.annotations.length===1&&!this.pdfViewer.designerMode){this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(true);this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker();this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=true;// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);if(this.pdfViewer.isAnnotationToolbarVisible&&this.pdfViewer.isFormDesignerToolbarVisible){var formDesignerMainDiv=document.getElementById(this.pdfViewer.dataId+"_formdesigner_toolbar");formDesignerMainDiv.style.display="none";if(this.pdfViewer.toolbarModule){this.pdfViewer.toolbarModule.formDesignerToolbarModule.isToolbarHidden=false;this.pdfViewer.toolbarModule.formDesignerToolbarModule.showFormDesignerToolbar(this.pdfViewer.toolbarModule.formDesignerItem);this.pdfViewer.toolbarModule.annotationToolbarModule.adjustViewer(true);}}}}}}}};/**
     * @param pdfAnnotationBase
     * @param isNewlyAdded
     * @param pdfAnnotationBase
     * @param isNewlyAdded
     * @private
     */Annotation.prototype.updateCalibrateValues=function(pdfAnnotationBase,isNewlyAdded){if(pdfAnnotationBase.measureType==='Distance'){pdfAnnotationBase.notes=updateDistanceLabel(pdfAnnotationBase,pdfAnnotationBase.vertexPoints,this.measureAnnotationModule);if(pdfAnnotationBase.enableShapeLabel===true){pdfAnnotationBase.labelContent=pdfAnnotationBase.notes;}// eslint-disable-next-line max-len
this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes',pdfAnnotationBase.pageIndex,pdfAnnotationBase,isNewlyAdded);this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName,pdfAnnotationBase.notes);this.renderAnnotations(pdfAnnotationBase.pageIndex,null,null,null,null);}else if(pdfAnnotationBase.measureType==='Radius'){pdfAnnotationBase.notes=updateRadiusLabel(pdfAnnotationBase,this.measureAnnotationModule);if(pdfAnnotationBase.enableShapeLabel===true){pdfAnnotationBase.labelContent=pdfAnnotationBase.notes;}// eslint-disable-next-line max-len
this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes',pdfAnnotationBase.pageIndex,pdfAnnotationBase,isNewlyAdded);this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName,pdfAnnotationBase.notes);this.renderAnnotations(pdfAnnotationBase.pageIndex,null,null,null,null);}else if(pdfAnnotationBase.measureType==='Perimeter'){pdfAnnotationBase.notes=updatePerimeterLabel(pdfAnnotationBase,pdfAnnotationBase.vertexPoints,this.measureAnnotationModule);if(pdfAnnotationBase.enableShapeLabel===true){pdfAnnotationBase.labelContent=pdfAnnotationBase.notes;}// eslint-disable-next-line max-len
this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes',pdfAnnotationBase.pageIndex,pdfAnnotationBase,isNewlyAdded);this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName,pdfAnnotationBase.notes);this.renderAnnotations(pdfAnnotationBase.pageIndex,null,null,null,null);}else if(pdfAnnotationBase.measureType==='Area'){// eslint-disable-next-line max-len
pdfAnnotationBase.notes=this.measureAnnotationModule.calculateArea(pdfAnnotationBase.vertexPoints,pdfAnnotationBase.id,pdfAnnotationBase.pageIndex);if(pdfAnnotationBase.enableShapeLabel===true){pdfAnnotationBase.labelContent=pdfAnnotationBase.notes;updateCalibrateLabel(pdfAnnotationBase);}// eslint-disable-next-line max-len
this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes',pdfAnnotationBase.pageIndex,pdfAnnotationBase,isNewlyAdded);this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName,pdfAnnotationBase.notes);this.renderAnnotations(pdfAnnotationBase.pageIndex,null,null,null,null);}else if(pdfAnnotationBase.measureType==='Volume'){// eslint-disable-next-line max-len
pdfAnnotationBase.notes=this.measureAnnotationModule.calculateVolume(pdfAnnotationBase.vertexPoints,pdfAnnotationBase.id,pdfAnnotationBase.pageIndex);if(pdfAnnotationBase.enableShapeLabel===true){pdfAnnotationBase.labelContent=pdfAnnotationBase.notes;updateCalibrateLabel(pdfAnnotationBase);}// eslint-disable-next-line max-len
this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes',pdfAnnotationBase.pageIndex,pdfAnnotationBase,isNewlyAdded);this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(pdfAnnotationBase.annotName,pdfAnnotationBase.notes);this.renderAnnotations(pdfAnnotationBase.pageIndex,null,null,null,null);}};/**
     * @private
     */Annotation.prototype.onAnnotationMouseDown=function(){if(this.pdfViewer.selectedItems.annotations.length===1&&this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType===null){if(this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule){if(!sf.base.isBlazor()&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var commentPanel=document.getElementById(this.pdfViewer.dataId+'_commantPanel');if(commentPanel.style.display==='none'){if(this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools("");}else{if(this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar){// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile();this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType);var editIcon=document.getElementById(this.pdfViewer.dataId+'_annotationIcon');if(editIcon&&!editIcon.parentElement.classList.contains('e-pv-select')){editIcon.parentElement.classList.add('e-pv-select');}}}}}this.enableBasedOnType();this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(true);}}};Annotation.prototype.enableBasedOnType=function(){var isLock=false;// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[0];if(annotation&&annotation.annotationSettings){// eslint-disable-next-line
isLock=annotation.annotationSettings.isLock;if(isLock&&this.checkAllowedInteractions('PropertyChange',annotation)){isLock=false;}}if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(!isLock){if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Stamp'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Image'){this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(true);}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='StickyNotes'){this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(true);}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Path'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureImage'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureText'){this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(false);}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='FreeText'){this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(true);}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='HandWrittenSignature'){this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Ink'){this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);}else{if(this.pdfViewer.selectedItems.annotations.length===1&&this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType===null){this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(true);}}}// eslint-disable-next-line max-len
}else if(!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation&&this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Path'&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(true,true);}};Annotation.prototype.getProperDate=function(date){var dateObject=new Date(date.toString());if(isNaN(dateObject.getFullYear())){var dateString=date.slice(2,16);// eslint-disable-next-line max-len
dateString=dateString.slice(0,4)+'/'+dateString.slice(4,6)+'/'+dateString.slice(6,8)+' '+dateString.slice(8,10)+':'+dateString.slice(10,12)+':'+dateString.slice(12,14);dateObject=new Date(dateString);}// eslint-disable-next-line max-len
return dateObject.getMonth()+1+'/'+dateObject.getDate()+'/'+dateObject.getFullYear()+' '+dateObject.getHours()+':'+dateObject.getMinutes()+':'+dateObject.getSeconds();};/**
     * @param pageAnnotations
     * @param pageNumber
     * @private
     */Annotation.prototype.getPageCollection=function(pageAnnotations,pageNumber){var index=null;for(var i=0;i<pageAnnotations.length;i++){if(pageAnnotations[i].pageIndex===pageNumber){index=i;break;}}return index;};/**
     * @param annotations
     * @param id
     * @param annotations
     * @param id
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getAnnotationWithId=function(annotations,id){// eslint-disable-next-line
var annotation;for(var i=0;i<annotations.length;i++){if(id===annotations[i].id){annotation=annotations[i];}}return annotation;};/**
     * @param event
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getEventPageNumber=function(event){var eventTarget=event.target;if(eventTarget.classList.contains('e-pv-hyperlink')){eventTarget=eventTarget.parentElement;}else if(eventTarget.parentElement&&eventTarget.parentElement.classList.contains('foreign-object')){eventTarget=eventTarget.parentElement.parentElement.parentElement.parentElement;}else if(eventTarget.classList.contains('e-pdfviewer-formFields')&&eventTarget.attributes[0].nodeValue!="text"||eventTarget.classList.contains('e-pdfviewer-signatureformfields')){eventTarget=eventTarget.parentElement;}else if(eventTarget.classList.contains('e-pdfviewer-formFields')&&eventTarget.attributes[0].nodeValue=="text"){eventTarget=eventTarget.parentElement.parentElement;}var pageString;if(eventTarget){// eslint-disable-next-line
pageString=eventTarget.id.split('_text_')[1]||eventTarget.id.split('_textLayer_')[1]||eventTarget.id.split('_annotationCanvas_')[1]||eventTarget.id.split('_pageDiv_')[1];}if(isNaN(pageString)){event=this.pdfViewerBase.annotationEvent;if(event){eventTarget=event.target;// eslint-disable-next-line
pageString=eventTarget.id.split('_text_')[1]||eventTarget.id.split('_textLayer_')[1]||eventTarget.id.split('_annotationCanvas_')[1]||eventTarget.id.split('_pageDiv_')[1];}}// eslint-disable-next-line
return parseInt(pageString);};/**
     * @param commentsAnnotations
     * @param parentAnnotation
     * @param author
     * @param commentsAnnotations
     * @param parentAnnotation
     * @param author
     * @param commentsAnnotations
     * @param parentAnnotation
     * @param author
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getAnnotationComments=function(commentsAnnotations,parentAnnotation,author){var newArray=[];var annotationObject=null;if(commentsAnnotations){if(commentsAnnotations.length>0){for(var i=0;i<commentsAnnotations.length;i++){// eslint-disable-next-line
var annotation=commentsAnnotations[i];annotationObject={// eslint-disable-next-line max-len
shapeAnnotationType:'sticky',author:annotation.Author,modifiedDate:annotation.ModifiedDate,note:annotation.Note,state:annotation.state,stateModel:annotation.stateModel,comments:[],review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},annotName:annotation.AnnotName,parentId:parentAnnotation.AnnotName,subject:'Comments',isLock:annotation.IsLock};newArray[newArray.length]=annotationObject;}}}return newArray;};Annotation.prototype.getRandomNumber=function(){// eslint-disable-next-line
return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){// eslint-disable-next-line
var random=Math.random()*16|0;return random.toString(16);});};/**
     * @private
     */Annotation.prototype.createGUID=function(){// eslint-disable-next-line max-len
return this.getRandomNumber();};/**
     * @param pageDiv
     * @param pageWidth
     * @param pageHeight
     * @param pageNumber
     * @param displayMode
     * @param pageDiv
     * @param pageWidth
     * @param pageHeight
     * @param pageNumber
     * @param displayMode
     * @private
     */ // eslint-disable-next-line max-len
Annotation.prototype.createAnnotationLayer=function(pageDiv,pageWidth,pageHeight,pageNumber,displayMode){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(canvas){this.updateCanvas(canvas,pageWidth,pageHeight,pageNumber);return canvas;}else{// eslint-disable-next-line max-len
var annotationCanvas=sf.base.createElement('canvas',{id:this.pdfViewer.dataId+'_annotationCanvas_'+pageNumber,className:'e-pv-annotation-canvas'});this.updateCanvas(annotationCanvas,pageWidth,pageHeight,pageNumber);pageDiv.appendChild(annotationCanvas);return annotationCanvas;}};/**
     * @param width
     * @param height
     * @param pageNumber
     * @private
     */Annotation.prototype.resizeAnnotations=function(width,height,pageNumber){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(canvas){canvas.style.width=width+'px';canvas.style.height=height+'px';this.pdfViewerBase.applyElementStyles(canvas,pageNumber);}};/**
     * @param pageNumber
     * @private
     */Annotation.prototype.clearAnnotationCanvas=function(pageNumber){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);var zoom=this.pdfViewerBase.getZoomFactor();var ratio=this.pdfViewerBase.getZoomRatio(zoom);if(canvas){var width=this.pdfViewerBase.pageSize[pageNumber].width;var height=this.pdfViewerBase.pageSize[pageNumber].height;canvas.width=width*ratio;canvas.height=height*ratio;canvas.style.width=width*zoom+'px';canvas.style.height=height*zoom+'px';}};/**
     * @param pageNumber
     * @param shapeAnnotation
     * @param measureShapeAnnotation
     * @param textMarkupAnnotation
     * @param canvas
     * @param isImportAnnotations
     * @param pageNumber
     * @param shapeAnnotation
     * @param measureShapeAnnotation
     * @param textMarkupAnnotation
     * @param canvas
     * @param isImportAnnotations
     * @param pageNumber
     * @param shapeAnnotation
     * @param measureShapeAnnotation
     * @param textMarkupAnnotation
     * @param canvas
     * @param isImportAnnotations
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.renderAnnotations=function(pageNumber,shapeAnnotation,measureShapeAnnotation,textMarkupAnnotation,canvas,isImportAnnotations){this.clearAnnotationCanvas(pageNumber);if(this.shapeAnnotationModule){if(isImportAnnotations){this.shapeAnnotationModule.renderShapeAnnotations(shapeAnnotation,pageNumber,true);}else{this.shapeAnnotationModule.renderShapeAnnotations(shapeAnnotation,pageNumber);}}if(this.measureAnnotationModule){if(isImportAnnotations){this.measureAnnotationModule.renderMeasureShapeAnnotations(measureShapeAnnotation,pageNumber,true);}else{this.measureAnnotationModule.renderMeasureShapeAnnotations(measureShapeAnnotation,pageNumber);}}if(canvas!==null&&canvas!==undefined){canvas=canvas;}else{canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);}this.pdfViewer.drawing.refreshCanvasDiagramLayer(canvas,pageNumber);if(this.textMarkupAnnotationModule){if(isImportAnnotations){// eslint-disable-next-line
this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(textMarkupAnnotation,pageNumber,true);}else{// eslint-disable-next-line
this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(textMarkupAnnotation,pageNumber);}}};/**
     * @param pageNumber
     * @param annotation
     * @param annotationId
     * @param pageNumber
     * @param annotation
     * @param annotationId
     * @param pageNumber
     * @param annotation
     * @param annotationId
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.storeAnnotations=function(pageNumber,annotation,annotationId){// let annotationId: string = '_annotations_textMarkup';
// if (annotation is ITextMarkupAnnotation) {
//     annotationId = '_annotations_textMarkup';
// } else if (annotation as IShapeAnnotation) {
//     annotationId = '_annotations_shape';
// } else {
//     annotationId = '_annotations_stamp';
// }
// eslint-disable-next-line
var sessionSize=Math.round(JSON.stringify(window.sessionStorage).length/1024);if(sessionSize>4500){this.clearAnnotationStorage();this.pdfViewerBase.isStorageExceed=true;}// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+annotationId);if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+annotationId];}var index=0;if(!storeObject){this.storeAnnotationCollections(annotation,pageNumber);var pageAnnotation={pageIndex:pageNumber,annotations:[]};pageAnnotation.annotations.push(annotation);index=pageAnnotation.annotations.indexOf(annotation);var annotationCollection=[];annotationCollection.push(pageAnnotation);var annotationStringified=JSON.stringify(annotationCollection);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+annotationId]=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+annotationId,annotationStringified);}}else{this.storeAnnotationCollections(annotation,pageNumber);var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+annotationId);}var pageIndex=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[pageIndex]){annotObject[pageIndex].annotations.push(annotation);index=annotObject[pageIndex].annotations.indexOf(annotation);}else{var markupAnnotation={pageIndex:pageNumber,annotations:[]};markupAnnotation.annotations.push(annotation);index=markupAnnotation.annotations.indexOf(annotation);annotObject.push(markupAnnotation);}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+annotationId]=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+annotationId,annotationStringified);}}return index;};/**
     * @param type
     * @private
     */Annotation.prototype.getArrowType=function(type){var decoratorShapes='None';switch(type){case'ClosedArrow':case'Closed':decoratorShapes='Arrow';break;case'OpenArrow':case'Open':decoratorShapes='OpenArrow';break;case'Square':decoratorShapes='Square';break;case'Circle':case'Round':decoratorShapes='Circle';break;case'Diamond':decoratorShapes='Diamond';break;case'Butt':decoratorShapes='Butt';break;case'Slash':// decoratorShapes = 'Slash';
break;}return decoratorShapes;};/**
     * @param arrow
     * @private
     */Annotation.prototype.getArrowTypeForCollection=function(arrow){var arrowType;switch(arrow){case'Arrow':arrowType='ClosedArrow';break;case'OpenArrow':case'Square':case'Circle':case'Diamond':case'None':arrowType=arrow.toString();break;case'Butt':arrowType='Butt';break;}return arrowType;};/**
     * @param bound
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getBounds=function(bound,pageIndex){var pageDetails=this.pdfViewerBase.pageSize[pageIndex];if(pageDetails){if(pageDetails.rotation===1){return{left:bound.top,top:pageDetails.width-(bound.left+bound.width),width:bound.height,height:bound.width};}else if(pageDetails.rotation===2){// eslint-disable-next-line max-len
return{left:pageDetails.width-bound.left-bound.width,top:pageDetails.height-bound.top-bound.height,width:bound.width,height:bound.height};}else if(pageDetails.rotation===3){return{left:pageDetails.height-bound.top-bound.height,top:bound.left,width:bound.height,height:bound.width};}else{return bound;}}else{return bound;}};/**
     * @param bound
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getInkBounds=function(bound,pageIndex){var pageDetails=this.pdfViewerBase.pageSize[pageIndex];if(pageDetails){if(pageDetails.rotation===1){return{x:bound.y,y:pageDetails.width-(bound.x+bound.width),width:bound.height,height:bound.width};}else if(pageDetails.rotation===2){// eslint-disable-next-line max-len
return{x:pageDetails.width-bound.x-bound.width,y:pageDetails.height-bound.y-bound.height,width:bound.width,height:bound.height};}else if(pageDetails.rotation===3){return{x:pageDetails.height-bound.y-bound.height,y:bound.x,width:bound.height,height:bound.width};}else{return bound;}}else{return bound;}};/**
     * @param points
     * @param pageIndex
     * @param points
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getVertexPoints=function(points,pageIndex){if(points){var pageDetails=this.pdfViewerBase.pageSize[pageIndex];if(pageDetails.rotation===1){var points1=[];for(var i=0;i<points.length;i++){var point={x:points[i].y,y:pageDetails.width-points[i].x};points1.push(point);}return points1;}else if(pageDetails.rotation===2){var points2=[];for(var i=0;i<points.length;i++){var point={x:pageDetails.width-points[i].x,y:pageDetails.height-points[i].y};points2.push(point);}return points2;}else if(pageDetails.rotation===3){var points3=[];for(var i=0;i<points.length;i++){var point={x:pageDetails.height-points[i].y,y:points[i].x};points3.push(point);}return points3;}else{return points;}}};/**
     * @param pageIndex
     * @param shapeAnnotations
     * @param idString
     * @param pageIndex
     * @param shapeAnnotations
     * @param idString
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getStoredAnnotations=function(pageIndex,shapeAnnotations,idString){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+idString);if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+idString];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=null;}}else{annotationCollection=null;}return annotationCollection;};/**
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @private
     */ // eslint-disable-next-line max-len
Annotation.prototype.triggerAnnotationPropChange=function(pdfAnnotationBase,isColor,isStroke,isThickness,isOpacity,isLineStart,isLineEnd,isDashArray,isFreeText,previousText,currentText){var index=this.getAnnotationIndex(pdfAnnotationBase.pageIndex,pdfAnnotationBase.id);var type=this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType,pdfAnnotationBase.measureType);// eslint-disable-next-line max-len
var eventArgs={name:'annotationPropertiesChange',pageIndex:pdfAnnotationBase.pageIndex,annotationId:pdfAnnotationBase.annotName,annotationType:type,isColorChanged:isColor,isOpacityChanged:isOpacity,isThicknessChanged:isThickness,isStrokeColorChanged:isStroke};if(isFreeText){eventArgs.isFreeTextChanged=isFreeText;eventArgs.previousText=previousText;eventArgs.currentText=currentText;}if(isLineStart){eventArgs.isLineHeadStartStyleChanged=isLineStart;}if(isLineEnd){eventArgs.isLineHeadEndStyleChanged=isLineEnd;}if(isDashArray){eventArgs.isBorderDashArrayChanged=isDashArray;}this.pdfViewer._dotnetInstance.invokeMethodAsync('Trigger','AnnotationPropertiesChange',eventArgs);};/**
     * @param pdfAnnotationBase
     * @private
     */Annotation.prototype.triggerAnnotationAdd=function(pdfAnnotationBase){// eslint-disable-next-line
var setting={opacity:pdfAnnotationBase.opacity,fillColor:pdfAnnotationBase.fillColor,strokeColor:pdfAnnotationBase.strokeColor,thickness:pdfAnnotationBase.thickness,author:pdfAnnotationBase.author,subject:pdfAnnotationBase.subject,modifiedDate:pdfAnnotationBase.modifiedDate};// eslint-disable-next-line
var bounds={left:pdfAnnotationBase.wrapper.bounds.x,top:pdfAnnotationBase.wrapper.bounds.y,width:pdfAnnotationBase.wrapper.bounds.width,height:pdfAnnotationBase.wrapper.bounds.height};var type=this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType,pdfAnnotationBase.measureType);if(type==='Line'||type==='Arrow'||type==='Distance'||type==='Perimeter'){setting.lineHeadStartStyle=this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);setting.lineHeadEndStyle=this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);setting.borderDashArray=pdfAnnotationBase.borderDashArray;}var labelSettings;if(this.pdfViewer.enableShapeLabel){labelSettings={// eslint-disable-next-line max-len
fontColor:pdfAnnotationBase.fontColor,fontSize:pdfAnnotationBase.fontSize,fontFamily:pdfAnnotationBase.fontFamily,opacity:pdfAnnotationBase.labelOpacity,labelContent:pdfAnnotationBase.labelContent,fillColor:pdfAnnotationBase.labelFillColor};// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationAdd(pdfAnnotationBase.pageIndex,pdfAnnotationBase.annotName,type,bounds,setting,null,null,null,labelSettings);}else{// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationAdd(pdfAnnotationBase.pageIndex,pdfAnnotationBase.annotName,type,bounds,setting);}};/**
     * @param pdfAnnotationBase
     * @private
     */Annotation.prototype.triggerAnnotationResize=function(pdfAnnotationBase){// eslint-disable-next-line
var setting={opacity:pdfAnnotationBase.opacity,fillColor:pdfAnnotationBase.fillColor,strokeColor:pdfAnnotationBase.strokeColor,thickness:pdfAnnotationBase.thickness,author:pdfAnnotationBase.author,subject:pdfAnnotationBase.subject,modifiedDate:pdfAnnotationBase.modifiedDate};var index=this.getAnnotationIndex(pdfAnnotationBase.pageIndex,pdfAnnotationBase.id);// eslint-disable-next-line
var annotationBounds=pdfAnnotationBase.bounds;var currentPosition={left:annotationBounds.x,top:annotationBounds.y,x:annotationBounds.x,y:annotationBounds.y,width:annotationBounds.width,height:annotationBounds.height};// eslint-disable-next-line max-len
var previousPosition={left:this.oldProperties.x,top:this.oldProperties.y,width:this.oldProperties.width,height:this.oldProperties.height};var type=this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType,pdfAnnotationBase.measureType);if(type==='Line'||type==='Arrow'||type==='Distance'||type==='Perimeter'){setting.lineHeadStartStyle=this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);setting.lineHeadEndStyle=this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);setting.borderDashArray=pdfAnnotationBase.borderDashArray;}var labelSettings;if(this.pdfViewer.enableShapeLabel&&pdfAnnotationBase.shapeAnnotationType!=='HandWrittenSignature'){labelSettings={// eslint-disable-next-line max-len
fontColor:pdfAnnotationBase.fontColor,fontSize:pdfAnnotationBase.fontSize,fontFamily:pdfAnnotationBase.fontFamily,opacity:pdfAnnotationBase.labelOpacity,labelContent:pdfAnnotationBase.labelContent,fillColor:pdfAnnotationBase.labelFillColor,notes:pdfAnnotationBase.notes};// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationResize(pdfAnnotationBase.pageIndex,pdfAnnotationBase.annotName,type,currentPosition,setting,null,null,null,labelSettings);}else{if(pdfAnnotationBase.shapeAnnotationType==='HandWrittenSignature'||pdfAnnotationBase.shapeAnnotationType==='SignatureText'||pdfAnnotationBase.shapeAnnotationType==='SignatureImage'){// eslint-disable-next-line max-len
this.pdfViewer.fireSignatureResize(pdfAnnotationBase.pageIndex,pdfAnnotationBase.signatureName,pdfAnnotationBase.shapeAnnotationType,pdfAnnotationBase.opacity,pdfAnnotationBase.strokeColor,pdfAnnotationBase.thickness,currentPosition,previousPosition);}else{// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationResize(pdfAnnotationBase.pageIndex,pdfAnnotationBase.annotName,type,currentPosition,setting);}}};/**
     * @param pdfAnnotationBase
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.triggerAnnotationMove=function(pdfAnnotationBase,isMoving){// eslint-disable-next-line
var setting={opacity:pdfAnnotationBase.opacity,fillColor:pdfAnnotationBase.fillColor,strokeColor:pdfAnnotationBase.strokeColor,thickness:pdfAnnotationBase.thickness,author:pdfAnnotationBase.author,subject:pdfAnnotationBase.subject,modifiedDate:pdfAnnotationBase.modifiedDate};// eslint-disable-next-line
var annotationBounds=pdfAnnotationBase.bounds;var currentPosition={left:annotationBounds.x,top:annotationBounds.y,x:annotationBounds.x,y:annotationBounds.y,width:annotationBounds.width,height:annotationBounds.height};// eslint-disable-next-line max-len
var previousPosition;if(!this.oldProperties){previousPosition={left:annotationBounds.x,top:annotationBounds.y,width:annotationBounds.width,height:annotationBounds.height};}else{previousPosition={left:this.oldProperties.x?this.oldProperties.x:annotationBounds.x,top:this.oldProperties.y?this.oldProperties.y:annotationBounds.y,width:annotationBounds.width,height:annotationBounds.height};}var type=this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType,pdfAnnotationBase.measureType);if(type==='Line'||type==='Arrow'||type==='Distance'||type==='Perimeter'){setting.lineHeadStartStyle=this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);setting.lineHeadEndStyle=this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);setting.borderDashArray=pdfAnnotationBase.borderDashArray;}if(pdfAnnotationBase.shapeAnnotationType==='HandWrittenSignature'||pdfAnnotationBase.shapeAnnotationType==='SignatureText'||pdfAnnotationBase.shapeAnnotationType==='SignatureImage'){// eslint-disable-next-line max-len
this.pdfViewer.fireSignatureMove(pdfAnnotationBase.pageIndex,pdfAnnotationBase.signatureName,pdfAnnotationBase.shapeAnnotationType,pdfAnnotationBase.opacity,pdfAnnotationBase.strokeColor,pdfAnnotationBase.thickness,previousPosition,currentPosition);}else{// eslint-disable-next-line max-len
isMoving?this.pdfViewer.fireAnnotationMoving(pdfAnnotationBase.pageIndex,pdfAnnotationBase.annotName,type,setting,previousPosition,currentPosition):this.pdfViewer.fireAnnotationMove(pdfAnnotationBase.pageIndex,pdfAnnotationBase.annotName,type,setting,previousPosition,currentPosition);}};/**
     * @param annotationId
     * @param pageNumber
     * @param annotation
     * @param annotationCollection
     * @param isDblClick
     * @param isSelected
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.annotationSelect=function(annotationId,pageNumber,annotation,annotationCollection,isDblClick,isSelected){// eslint-disable-next-line
var annotSettings;if(annotation.shapeAnnotationType==='textMarkup'){// eslint-disable-next-line max-len
annotSettings={type:'TextMarkup',subType:annotation.subject,opacity:annotation.opacity,color:annotation.color,textMarkupContent:annotation.textMarkupContent,textMarkupStartIndex:annotation.textMarkupStartIndex,textMarkupEndIndex:annotation.textMarkupEndIndex,customData:annotation.customData};}else if(annotation.shapeAnnotationType==='StickyNotes'){annotSettings={type:'StickyNotes',opacity:annotation.opacity,customData:annotation.customData};}else if(annotation.shapeAnnotationType==='Stamp'||annotation.shapeAnnotationType==='Image'){annotSettings={type:'Stamp',opacity:annotation.opacity,customData:annotation.customData};}else if(annotation.shapeAnnotationType==='Ink'){annotSettings={// eslint-disable-next-line max-len
type:'Ink',opacity:annotation.opacity,strokeColor:annotation.strokeColor,thickness:annotation.thickness,modifiedDate:annotation.modifiedDate,width:annotation.bounds.width,height:annotation.bounds.height,left:annotation.bounds.x,top:annotation.bounds.y,data:annotation.data,customData:annotation.customData};}else if(annotation.shapeAnnotationType==='FreeText'){annotSettings={type:'FreeText',opacity:annotation.opacity,fillColor:annotation.fillColor,// eslint-disable-next-line max-len
strokeColor:annotation.strokeColor,thickness:annotation.thickness,content:annotation.dynamicText,// eslint-disable-next-line max-len
fontFamily:annotation.fontFamily,fontSize:annotation.fontSize,fontColor:annotation.fontColor,textAlign:annotation.textAlign,fontStyle:this.updateFreeTextFontStyle(annotation.font),customData:annotation.customData};}else if(annotation.measureType===''){if(annotation.shapeAnnotationType==='Line'){// eslint-disable-next-line max-len
annotSettings={type:'Shape',subType:'Line',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,borderDashArray:annotation.borderDashArray,lineHeadStartStyle:annotation.sourceDecoraterShapes,lineHeadEndStyle:annotation.taregetDecoraterShapes,customData:annotation.customData};}else if(annotation.shapeAnnotationType==='Arrow'||annotation.shapeAnnotationType==='LineWidthArrowHead'){// eslint-disable-next-line max-len
annotSettings={type:'Shape',subType:'Arrow',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,borderDashArray:annotation.borderDashArray,lineHeadStartStyle:annotation.sourceDecoraterShapes,lineHeadEndStyle:annotation.taregetDecoraterShapes,customData:annotation.customData};}else if(annotation.shapeAnnotationType==='Rectangle'){annotSettings={type:'Shape',subType:'Rectangle',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,customData:annotation.customData};}else if(annotation.shapeAnnotationType==='Circle'||annotation.shapeAnnotationType==='Ellipse'){annotSettings={type:'Shape',subType:'Circle',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,customData:annotation.customData};}else if(annotation.shapeAnnotationType==='Polygon'){annotSettings={type:'Shape',subType:'Polygon',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,customData:annotation.customData};}}else if(annotation.measureType!==''){if(annotation.measureType==='Distance'){// eslint-disable-next-line max-len
annotSettings={type:'Measure',subType:'Distance',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,borderDashArray:annotation.borderDashArray,lineHeadStartStyle:annotation.sourceDecoraterShapes,lineHeadEndStyle:annotation.taregetDecoraterShapes,customData:annotation.customData};}else if(annotation.measureType==='Perimeter'){// eslint-disable-next-line max-len
annotSettings={type:'Measure',subType:'Perimeter',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,borderDashArray:annotation.borderDashArray,lineHeadStartStyle:annotation.sourceDecoraterShapes,lineHeadEndStyle:annotation.taregetDecoraterShapes,customData:annotation.customData};}else if(annotation.measureType==='Area'){annotSettings={type:'Measure',subType:'Area',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,customData:annotation.customData};}else if(annotation.measureType==='Radius'){annotSettings={type:'Measure',subType:'Radius',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,customData:annotation.customData};}else if(annotation.measureType==='Volume'){annotSettings={type:'Measure',subType:'Volume',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,calibrate:annotation.calibrate,annotationId:annotation.annotName,customData:annotation.customData};}}// eslint-disable-next-line
var overlappedCollection=[];// eslint-disable-next-line
var overlappedAnnotations=this.getOverlappedAnnotations(annotation,pageNumber);if(overlappedAnnotations&&this.overlappedCollections){// eslint-disable-next-line
var overlappedCollections=[];// eslint-disable-next-line
for(var i=0;i<overlappedAnnotations.length;i++){if(overlappedAnnotations[i].shapeAnnotationType!=='textMarkup'&&this.overlappedCollections||isSelected){for(var j=0;j<this.overlappedCollections.length;j++){if(overlappedAnnotations[i].annotName===this.overlappedCollections[j].annotName){overlappedCollections.push(overlappedAnnotations[i]);break;}}}else{overlappedCollections.push(overlappedAnnotations[i]);}}overlappedAnnotations=overlappedCollections;}if(this.pdfViewer.enableMultiLineOverlap){// eslint-disable-next-line
for(var i=0;i<overlappedAnnotations.length;i++){if(overlappedAnnotations[i].shapeAnnotationType==='textMarkup'){var isOverlapped=false;for(var j=0;j<overlappedAnnotations[i].bounds.length;j++){// eslint-disable-next-line
var bounds=this.orderTextMarkupBounds(overlappedAnnotations[i].bounds[j]);// eslint-disable-next-line
var clickedPosition=this.textMarkupAnnotationModule.annotationClickPosition;if(clickedPosition&&(clickedPosition.x||clickedPosition.y)){if(bounds.left<=clickedPosition.x&&bounds.left+bounds.width>=clickedPosition.x){if(bounds.top<=clickedPosition.y&&bounds.top+bounds.height>=clickedPosition.y){isOverlapped=true;}}}else{isOverlapped=true;}}if(!isOverlapped){overlappedAnnotations.splice(i,1);}}}}if(overlappedAnnotations&&overlappedAnnotations.length>0){annotationCollection=overlappedAnnotations;// eslint-disable-next-line
for(var i=0;i<annotationCollection.length;i++){// eslint-disable-next-line
var overlappedObject=cloneObject(annotationCollection[i]);overlappedObject.annotationId=annotationCollection[i].annotName;if(annotationId===annotationCollection[i].annotName&&annotation.measureType&&annotation.measureType==='Volume'){annotSettings.calibrate=annotationCollection[i].calibrate;}delete overlappedObject.annotName;overlappedCollection.push(overlappedObject);}}else{overlappedCollection=null;}this.addFreeTextProperties(annotation,annotSettings);var annotationAddMode=annotation.annotationAddMode;if(!isDblClick){if(annotation.shapeAnnotationType==='Stamp'||annotation.shapeAnnotationType==='Image'){if(!this.pdfViewerBase.isNewStamp&&this.annotationSelected){if(overlappedCollection){// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationSelect(annotationId,pageNumber,annotSettings,overlappedCollection,null,null,annotationAddMode);}else{this.pdfViewer.fireAnnotationSelect(annotationId,pageNumber,annotSettings,null,null,null,annotationAddMode);}}}else{var multiPageCollection=this.textMarkupAnnotationModule.multiPageCollectionList(annotation);if(multiPageCollection.length===0){multiPageCollection=null;}if(this.annotationSelected){if(overlappedCollection){isSelected=false;// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationSelect(annotationId,pageNumber,annotSettings,overlappedCollection,multiPageCollection,isSelected,annotationAddMode);}else{isSelected=true;// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationSelect(annotationId,pageNumber,annotSettings,null,multiPageCollection,isSelected,annotationAddMode);}}}}else{if(annotation.shapeAnnotationType==='Stamp'||annotation.shapeAnnotationType==='Image'){if(!this.pdfViewerBase.isNewStamp){this.pdfViewer.fireAnnotationDoubleClick(annotationId,pageNumber,annotSettings);}}else{this.pdfViewer.fireAnnotationDoubleClick(annotationId,pageNumber,annotSettings);}}this.annotationSelected=true;};// eslint-disable-next-line
Annotation.prototype.selectSignature=function(signatureId,pageNumber,signatureModule){// eslint-disable-next-line
var annotBounds=signatureModule.bounds;// eslint-disable-next-line
var bounds={height:annotBounds.height,width:annotBounds.width,x:annotBounds.x,y:annotBounds.y};if(!this.pdfViewerBase.signatureAdded){// eslint-disable-next-line max-len
var signature={bounds:bounds,opacity:signatureModule.opacity,thickness:signatureModule.thickness,strokeColor:signatureModule.strokeColor};this.pdfViewer.fireSignatureSelect(signatureId,pageNumber,signature);}};// eslint-disable-next-line
Annotation.prototype.editSignature=function(signature){// eslint-disable-next-line
var currentAnnotation;if(signature.uniqueKey){// eslint-disable-next-line
currentAnnotation=this.pdfViewer.nameTable[signature.uniqueKey];}else{currentAnnotation=this.pdfViewer.selectedItems.annotations[0];}var pageNumber=currentAnnotation.pageIndex;if(currentAnnotation.shapeAnnotationType==='HandWrittenSignature'||currentAnnotation.shapeAnnotationType==='SignatureText'||currentAnnotation.shapeAnnotationType==='SignatureImage'){// eslint-disable-next-line
var clonedObject=cloneObject(currentAnnotation);// eslint-disable-next-line
var redoClonedObject=cloneObject(currentAnnotation);if(currentAnnotation.opacity!==signature.opacity){redoClonedObject.opacity=signature.opacity;this.pdfViewer.nodePropertyChange(currentAnnotation,{opacity:signature.opacity});// eslint-disable-next-line max-len
this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex,currentAnnotation.signatureName,currentAnnotation.shapeAnnotationType,false,true,false,clonedObject.opacity,redoClonedObject.opacity);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Opacity','',clonedObject,redoClonedObject);}if(currentAnnotation.strokeColor!==signature.strokeColor){redoClonedObject.strokeColor=signature.strokeColor;this.pdfViewer.nodePropertyChange(currentAnnotation,{strokeColor:signature.strokeColor});// eslint-disable-next-line max-len
this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex,currentAnnotation.signatureName,currentAnnotation.shapeAnnotationType,true,false,false,clonedObject.strokeColor,redoClonedObject.strokeColor);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Stroke','',clonedObject,redoClonedObject);}if(currentAnnotation.thickness!==signature.thickness){redoClonedObject.thickness=signature.thickness;this.pdfViewer.nodePropertyChange(currentAnnotation,{thickness:signature.thickness});// eslint-disable-next-line max-len
this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex,currentAnnotation.signatureName,currentAnnotation.shapeAnnotationType,false,false,true,clonedObject.thickness,redoClonedObject.thickness);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Thickness','',clonedObject,redoClonedObject);}currentAnnotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.renderDrawing();this.pdfViewerBase.signatureModule.modifySignatureCollection(null,pageNumber,currentAnnotation,true);}};// eslint-disable-next-line
Annotation.prototype.deletComment=function(commentDiv){if(commentDiv.parentElement.firstChild===commentDiv){this.deleteAnnotation();}else{this.pdfViewer.annotationModule.stickyNotesAnnotationModule.modifyCommentDeleteProperty(commentDiv.parentElement,commentDiv);}};// eslint-disable-next-line
Annotation.prototype.addReplyComments=function(currentAnnotation,replyComment,commentType){if(commentType==='add'){// eslint-disable-next-line
var commentsMainDiv=document.getElementById(currentAnnotation.annotName);this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createCommentDiv(commentsMainDiv);for(var j=0;j<replyComment.length;j++){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveCommentDiv(commentsMainDiv,replyComment[j]);}}else if(commentType==='next'){// eslint-disable-next-line
var commentsMainDiv=document.getElementById(currentAnnotation.annotationId);this.selectAnnotation(currentAnnotation);this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveCommentDiv(commentsMainDiv,replyComment);}};Annotation.prototype.editComments=function(commentId,editComment){// eslint-disable-next-line
var commentDiv=document.getElementById(commentId);commentDiv.childNodes[1].ej2_instances[0].value=editComment;};// eslint-disable-next-line
Annotation.prototype.editAnnotation=function(annotation){// eslint-disable-next-line
var currentAnnotation;var annotationId;var annotationType;var pageNumber;var isTextMarkupUpdate=false;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){currentAnnotation=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;annotationId=currentAnnotation.annotName;pageNumber=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;}else{if(this.pdfViewer.selectedItems.annotations[0]){currentAnnotation=this.pdfViewer.selectedItems.annotations[0];annotationId=currentAnnotation.annotName;pageNumber=currentAnnotation.pageIndex;}}if(annotation.uniqueKey!==undefined){// eslint-disable-next-line
currentAnnotation=this.pdfViewer.nameTable[annotation.uniqueKey];currentAnnotation.annotationSettings.isLock=annotation.annotationSettings.isLock;annotationId=currentAnnotation.annotName;pageNumber=currentAnnotation.pageIndex;if(sf.base.isBlazor()){if(annotation.allowedInteractions){var allowedInteractionsCount=annotation.allowedInteractions.length;for(var i=0;i<allowedInteractionsCount;i++){if(annotation.allowedInteractions[i]===0){annotation.allowedInteractions[i]=AllowedInteraction.Select;}if(annotation.allowedInteractions[i]===1){annotation.allowedInteractions[i]=AllowedInteraction.Move;}if(annotation.allowedInteractions[i]===2){annotation.allowedInteractions[i]=AllowedInteraction.Resize;}if(annotation.allowedInteractions[i]===3){annotation.allowedInteractions[i]=AllowedInteraction.Delete;}if(annotation.allowedInteractions[i]===4){annotation.allowedInteractions[i]=AllowedInteraction.PropertyChange;}if(annotation.allowedInteractions[i]===5){annotation.allowedInteractions[i]=AllowedInteraction.None;}}}}// eslint-disable-next-line
currentAnnotation.allowedInteractions=annotation.allowedInteractions?annotation.allowedInteractions:this.updateAnnotationAllowedInteractions(annotation);}if(!currentAnnotation){if(annotation.shapeAnnotationType==='sticky'&&annotation.annotationId!==undefined){// eslint-disable-next-line
currentAnnotation=this.pdfViewer.nameTable[annotation.annotationId];currentAnnotation.annotationSettings.isLock=annotation.annotationSettings.isLock;annotationId=currentAnnotation.annotName;pageNumber=currentAnnotation.pageIndex;}}if(annotation.shapeAnnotationType==='textMarkup'){if(!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){// eslint-disable-next-line max-len
currentAnnotation=this.pdfViewer.annotationModule.textMarkupAnnotationModule.getAnnotations(annotation.pageNumber,annotation);for(var i=0;i<currentAnnotation.length;i++){if(annotation.annotationId===currentAnnotation[i].annotName){isTextMarkupUpdate=true;currentAnnotation=currentAnnotation[i];currentAnnotation.isPrint=annotation.isPrint;this.textMarkupAnnotationModule.currentTextMarkupAnnotation=currentAnnotation;this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=currentAnnotation.pageNumber;currentAnnotation.allowedInteractions=annotation.allowedInteractions;pageNumber=currentAnnotation.pageNumber;annotationId=annotation.annotationId;break;}}}}if(currentAnnotation){// eslint-disable-next-line
var clonedObject=cloneObject(currentAnnotation);// eslint-disable-next-line
var redoClonedObject=cloneObject(currentAnnotation);if(annotation.shapeAnnotationType==='textMarkup'){annotationType='textMarkup';}if(annotation&&annotation.isCommentLock===true){currentAnnotation.isCommentLock=annotation.isCommentLock;}if(annotation.comments){for(var j_1=0;j_1<annotation.comments.length;j_1++){if(annotation.comments[j_1].isLock===true){if(annotationType){currentAnnotation.comments=annotation.comments;currentAnnotation.comments[j_1].isLock=annotation.comments[j_1].isLock;}else{currentAnnotation.properties.comments=annotation.comments;currentAnnotation.properties.comments[j_1].isLock=annotation.comments[j_1].isLock;}}}}if(annotation&&annotation.note!==''&&annotation.note!==undefined){if(annotationType){currentAnnotation.note=annotation.note;// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName,currentAnnotation.note);}else{currentAnnotation.notes=annotation.note;// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName,currentAnnotation.notes);}}else{if(annotation&&annotation.isCommentLock&&(annotation.type&&annotation.type!=='FreeText'||annotation.shapeAnnotationType!=='FreeText')){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName,'  ');}}if(annotation.commentId&&annotation.editComment&&annotation.commentType==='edit'){this.editComments(annotation.commentId,annotation.editComment);}if(annotation.replyComment&&annotation.commentType==='add'){this.addReplyComments(currentAnnotation,annotation.replyComment,annotation.commentType);this.pdfViewer.annotationCollection[0].note=annotation.note;}if(annotation.nextComment&&annotation.commentType==='next'){this.addReplyComments(annotation,annotation.nextComment,annotation.commentType);}if(annotation.note===''&&annotation.commentType==='delete'){// eslint-disable-next-line
var commentDiv=document.getElementById(annotation.annotationId);this.deletComment(commentDiv);}if(annotation.comments){for(var j_2=0;j_2<annotation.comments.length;j_2++){if(annotation.comments[j_2].note===''&&annotation.commentType==='delete'){// eslint-disable-next-line
var commentDiv=document.getElementById(annotation.comments[j_2].annotName);this.deletComment(commentDiv);}}}if(annotation.type==='TextMarkup'||annotation.shapeAnnotationType==='textMarkup'){if(currentAnnotation.annotationSettings&&annotation.annotationSettings){if(currentAnnotation.annotationSettings.isLock!==annotation.annotationSettings.isLock){// eslint-disable-next-line max-len
var pageAnnotations=this.textMarkupAnnotationModule.modifyAnnotationProperty('AnnotationSettings',annotation.annotationSettings.isLock,null);// eslint-disable-next-line max-len
this.textMarkupAnnotationModule.manageAnnotations(pageAnnotations,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage);}}if(currentAnnotation.opacity!==annotation.opacity){this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null,annotation.opacity);}if(currentAnnotation.color!==annotation.color){this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(annotation.color);}annotationType='textMarkup';if(isTextMarkupUpdate){this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null;this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null;}// eslint-disable-next-line max-len
}else if(annotation&&annotation.stampAnnotationType==='image'&&annotation.shapeAnnotationType==='stamp'&&annotation.stampAnnotationPath){annotationType='stamp';if(currentAnnotation.data!==annotation.stampAnnotationPath){currentAnnotation.data=annotation.stampAnnotationPath;currentAnnotation.wrapper.children[0].imageSource=annotation.stampAnnotationPath;}if(annotation.opacity&&currentAnnotation.opacity!==annotation.opacity){this.annotationPropertyChange(currentAnnotation,annotation.opacity,'Shape Opacity',clonedObject,redoClonedObject);}this.calculateAnnotationBounds(currentAnnotation,annotation);// eslint-disable-next-line max-len
}else if(annotation.type==='StickyNotes'||annotation.type==='Stamp'||annotation.shapeAnnotationType==='sticky'||annotation.shapeAnnotationType==='stamp'){if(annotation.opacity&&currentAnnotation.opacity!==annotation.opacity){this.annotationPropertyChange(currentAnnotation,annotation.opacity,'Shape Opacity',clonedObject,redoClonedObject);}this.calculateAnnotationBounds(currentAnnotation,annotation);if(annotation.type==='StickyNotes'||annotation.shapeAnnotationType==='sticky'){annotationType='sticky';}else{annotationType='stamp';}// eslint-disable-next-line max-len
}else if(annotation.type==='Ink'||annotation.type==='Shape'||annotation.type==='Measure'||annotation.shapeAnnotationType==='Line'||annotation.shapeAnnotationType==='Square'||annotation.shapeAnnotationType==='Circle'||annotation.shapeAnnotationType==='Polygon'||annotation.shapeAnnotationType==='Polyline'||annotation.shapeAnnotationType==='Ink'){this.calculateAnnotationBounds(currentAnnotation,annotation);if(annotation.opacity&&currentAnnotation.opacity!==annotation.opacity){this.annotationPropertyChange(currentAnnotation,annotation.opacity,'Shape Opacity',clonedObject,redoClonedObject);}if(annotation.fillColor&&currentAnnotation.fillColor!==annotation.fillColor){redoClonedObject.fillColor=annotation.fillColor;if(annotation.labelSettings&&annotation.labelSettings.fillColor){annotation.labelSettings.fillColor=annotation.fillColor;}this.pdfViewer.nodePropertyChange(currentAnnotation,{fillColor:annotation.fillColor});this.triggerAnnotationPropChange(currentAnnotation,true,false,false,false);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Fill','',clonedObject,redoClonedObject);}if(annotation.strokeColor&&currentAnnotation.strokeColor!==annotation.strokeColor){redoClonedObject.strokeColor=annotation.strokeColor;this.pdfViewer.nodePropertyChange(currentAnnotation,{strokeColor:annotation.strokeColor});this.triggerAnnotationPropChange(currentAnnotation,false,true,false,false);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Stroke','',clonedObject,redoClonedObject);}if(annotation.thickness&&currentAnnotation.thickness!==annotation.thickness){redoClonedObject.thickness=annotation.thickness;this.pdfViewer.nodePropertyChange(currentAnnotation,{thickness:annotation.thickness});this.triggerAnnotationPropChange(currentAnnotation,false,false,true,false);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Thickness','',clonedObject,redoClonedObject);}if(currentAnnotation.author!==annotation.author){redoClonedObject.author=annotation.author;this.pdfViewer.nodePropertyChange(currentAnnotation,{author:annotation.author});this.triggerAnnotationPropChange(currentAnnotation,false,true,false,false);}if(currentAnnotation.modifiedDate!==annotation.modifiedDate){redoClonedObject.modifiedDate=annotation.modifiedDate;this.pdfViewer.nodePropertyChange(currentAnnotation,{modifiedDate:annotation.modifiedDate});}if(currentAnnotation.subject!==annotation.subject){redoClonedObject.subject=annotation.subject;this.pdfViewer.nodePropertyChange(currentAnnotation,{subject:annotation.subject});this.triggerAnnotationPropChange(currentAnnotation,false,true,false,false);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Stroke','',clonedObject,redoClonedObject);}if(this.pdfViewer.enableShapeLabel&&currentAnnotation.fontColor!==annotation.fontColor){redoClonedObject.fontColor=annotation.fontColor;this.pdfViewer.nodePropertyChange(currentAnnotation,{fontColor:annotation.fontColor});}if(this.pdfViewer.enableShapeLabel&&annotation.labelSettings&&annotation.labelSettings.fillColor){if(currentAnnotation.labelFillColor!==annotation.labelSettings.fillColor){redoClonedObject.labelFillColor=annotation.labelSettings.fillColor;this.pdfViewer.nodePropertyChange(currentAnnotation,{labelFillColor:annotation.labelSettings.fillColor});}}// eslint-disable-next-line max-len
if(annotation.shapeAnnotationType==='Line'||annotation.shapeAnnotationType==='Polyline'||annotation.shapeAnnotationType==='Polygon'){if(JSON.stringify(currentAnnotation.vertexPoints)!==JSON.stringify(annotation.vertexPoints)){currentAnnotation.vertexPoints=annotation.vertexPoints;this.pdfViewer.nodePropertyChange(currentAnnotation,{vertexPoints:annotation.vertexPoints});}}// eslint-disable-next-line max-len
if(annotation.subType==='Line'||annotation.subType==='Arrow'||annotation.subType==='Distance'||annotation.subType==='Perimeter'){var isSourceDecoraterShapesChanged=false;var isTargetDecoraterShapesChanged=false;var isBorderDashArrayChanged=false;clonedObject.lineHeadStart=currentAnnotation.sourceDecoraterShapes;clonedObject.lineHeadEnd=currentAnnotation.taregetDecoraterShapes;redoClonedObject.lineHeadStart=annotation.lineHeadStartStyle;redoClonedObject.lineHeadEnd=annotation.lineHeadEndStyle;redoClonedObject.borderDashArray=annotation.borderDashArray;if(currentAnnotation.taregetDecoraterShapes!==annotation.lineHeadEndStyle){isTargetDecoraterShapesChanged=true;}if(currentAnnotation.sourceDecoraterShapes!==annotation.lineHeadStartStyle){isSourceDecoraterShapesChanged=true;}if(currentAnnotation.borderDashArray!==annotation.borderDashArray){isBorderDashArrayChanged=true;}// eslint-disable-next-line max-len
this.pdfViewer.nodePropertyChange(currentAnnotation,{sourceDecoraterShapes:annotation.lineHeadStartStyle,taregetDecoraterShapes:annotation.lineHeadEndStyle,borderDashArray:annotation.borderDashArray});// eslint-disable-next-line max-len
this.triggerAnnotationPropChange(currentAnnotation,false,false,false,false,isSourceDecoraterShapesChanged,isTargetDecoraterShapesChanged,isBorderDashArrayChanged);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Line properties change','',clonedObject,redoClonedObject);}// eslint-disable-next-line max-len
if(annotation.type==='Shape'||annotation.shapeAnnotationType==='Line'||annotation.shapeAnnotationType==='Square'||annotation.shapeAnnotationType==='Circle'||annotation.shapeAnnotationType==='Polygon'){annotationType='shape';}if(annotation.type==='Ink'||annotation.shapeAnnotationType==='Ink'){annotationType='ink';}// eslint-disable-next-line max-len
if(annotation.type==='Measure'||annotation.subject==='Distance calculation'||annotation.subject==='Perimeter calculation'||annotation.subject==='Radius calculation'||annotation.subject==='Area calculation'||annotation.subject==='Volume calculation'){annotationType='shape_measure';}if(annotation.labelSettings&&this.pdfViewer.enableShapeLabel){this.updateFreeTextProperties(currentAnnotation);this.pdfViewer.nodePropertyChange(currentAnnotation,{// eslint-disable-next-line max-len
labelOpacity:annotation.labelSettings.opacity,fontColor:annotation.labelSettings.fontColor,fontSize:annotation.labelSettings.fontSize,fontFamily:annotation.labelSettings.fontFamily,labelContent:annotation.labelSettings.labelContent,labelFillColor:annotation.labelSettings.fillColor});}if(this.pdfViewer.enableShapeLabel&&annotation.calibrate&&annotation.calibrate.depth){if(this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth!==annotation.calibrate.depth){this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth=annotation.calibrate.depth;// eslint-disable-next-line max-len
currentAnnotation.notes=this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(currentAnnotation.vertexPoints);currentAnnotation.labelContent=currentAnnotation.notes;if(annotation.labelSettings&&annotation.labelSettings.labelContent){annotation.labelSettings.labelContent=currentAnnotation.notes;}this.pdfViewer.nodePropertyChange(currentAnnotation,{labelContent:currentAnnotation.labelContent});// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(currentAnnotation.annotName,currentAnnotation.notes);}}}else if(annotation.type==='FreeText'||annotation.shapeAnnotationType==='FreeText'){annotationType='freetext';if(this.pdfViewer.freeTextSettings.enableAutoFit&&currentAnnotation.dynamicText!==annotation.content){// eslint-disable-next-line
var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+currentAnnotation.pageIndex);var context=canvas.getContext("2d");var fontSize=annotation.fontSize;var font=void 0;var fontFamily=annotation.fontFamily;var zoomFactor=this.pdfViewerBase.getZoomFactor();// eslint-disable-next-line
annotation.font.isBold?font='bold'+' '+fontSize+'px'+' '+fontFamily:font=fontSize+'px'+' '+fontFamily;context.font=font;var characterLength=8;var highestTextNode="";// eslint-disable-next-line
var textNodes=[];var textboxValue=annotation.content?annotation.content:annotation.dynamicText;if(textboxValue.indexOf('\n')>-1){textNodes=textboxValue.split('\n');for(var j=0;j<textNodes.length;j++){// eslint-disable-next-line
var textNodeData=context.measureText(textNodes[j]);// eslint-disable-next-line
var highestTextNodeData=context.measureText(highestTextNode);if(textNodeData.width>highestTextNodeData.width){highestTextNode=textNodes[j];}}}else{highestTextNode=textboxValue;}// eslint-disable-next-line
var textwidth=context.measureText(highestTextNode);annotation.bounds.width=Math.ceil(textwidth.width+(characterLength+1)*2);var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+annotation.pageIndex);var maxWidth=pageDiv.clientWidth-annotation.bounds.left*zoomFactor;if(annotation.bounds.width>maxWidth){annotation.bounds.width=maxWidth/zoomFactor;}var height=annotation.bounds.height;annotation.bounds.height=height>=currentAnnotation.bounds.height?height:currentAnnotation.bounds.height;}annotation.content=annotation.content?annotation.content:annotation.dynamicText;this.calculateAnnotationBounds(currentAnnotation,annotation);this.pdfViewer.nodePropertyChange(currentAnnotation,{// eslint-disable-next-line max-len
opacity:annotation.opacity,fontColor:annotation.fontColor,fontSize:annotation.fontSize,fontFamily:annotation.fontFamily,// eslint-disable-next-line max-len
dynamicText:annotation.content?annotation.content:annotation.dynamicText,fillColor:annotation.fillColor,textAlign:annotation.textAlign,strokeColor:annotation.strokeColor,thickness:annotation.thickness,font:annotation.fontStyle?this.setFreeTextFontStyle(annotation.fontStyle):this.setFreeTextFontStyle(annotation.font),isReadonly:annotation.isReadonly});if(annotation.opacity&&currentAnnotation.opacity!==annotation.opacity){this.triggerAnnotationPropChange(currentAnnotation,false,false,false,true);}if(annotation.fillColor&&currentAnnotation.fillColor!==annotation.fillColor){this.triggerAnnotationPropChange(currentAnnotation,true,false,false,false);}if(annotation.strokeColor&&currentAnnotation.strokeColor!==annotation.strokeColor){this.triggerAnnotationPropChange(currentAnnotation,false,true,false,false);}if(annotation.thickness&&currentAnnotation.thickness!==annotation.thickness){this.triggerAnnotationPropChange(currentAnnotation,false,false,true,false);}if(annotation.content&&this.pdfViewer.selectedItems.annotations[0]){this.updateAnnotationComments(this.pdfViewer.selectedItems.annotations[0].annotName,annotation.content);}this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFreeText',annotation.Id,annotation.content);}currentAnnotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();if(currentAnnotation.customData!==annotation.customData){currentAnnotation.customData=annotation.customData;}currentAnnotation.isPrint=annotation.isPrint;if(annotation.type!=='TextMarkup'){this.pdfViewer.renderDrawing();this.updateCollection(annotationId,pageNumber,annotation,annotationType);}}};// eslint-disable-next-line
Annotation.prototype.annotationPropertyChange=function(currentAnnotation,opacity,actionString,clonedObject,redoClonedObject){this.pdfViewer.nodePropertyChange(currentAnnotation,{opacity:opacity});this.triggerAnnotationPropChange(currentAnnotation,false,false,false,true);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,actionString,'',clonedObject,redoClonedObject);};// eslint-disable-next-line
Annotation.prototype.calculateAnnotationBounds=function(currentAnnotation,annotation){// eslint-disable-next-line
var bounds=this.pdfViewerBase.convertBounds(currentAnnotation.wrapper.bounds);// eslint-disable-next-line
var annotBounds=this.pdfViewerBase.convertBounds(annotation.bounds);if(bounds&&annotBounds){// eslint-disable-next-line
if(JSON.stringify(bounds)!==JSON.stringify(annotBounds)&&Math.abs(bounds.Y-annotBounds.Y)>2||Math.abs(bounds.X-annotBounds.X)>2||Math.abs(bounds.Width-annotBounds.Width)>2||Math.abs(bounds.Height-annotBounds.Height)>2){// eslint-disable-next-line
var annotationBounds={x:annotBounds.X+annotBounds.Width/2,y:annotBounds.Y+annotBounds.Height/2,width:annotBounds.Width,height:annotBounds.Height};this.pdfViewer.nodePropertyChange(currentAnnotation,{bounds:annotationBounds});this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.triggerAnnotationPropChange(currentAnnotation,false,false,false,false);}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.updateFreeTextProperties=function(annotation){if(annotation.labelSettings){if(annotation.labelSettings.fillColor){annotation.labelFillColor=annotation.labelSettings.fillColor;}if(annotation.labelSettings.fontColor){annotation.fontColor=annotation.labelSettings.fontColor;}if(annotation.labelSettings.fontSize){annotation.fontSize=annotation.labelSettings.fontSize;}if(annotation.labelSettings.fontFamily){annotation.fontFamily=annotation.labelSettings.fontFamily;}if(annotation.labelSettings.opacity){annotation.labelOpacity=annotation.labelSettings.opacity;}if(annotation.labelSettings.labelContent){annotation.labelContent=annotation.labelSettings.labelContent;}}};Annotation.prototype.updateAnnotationComments=function(annotationId,noteContent){// eslint-disable-next-line
var commentsDiv=document.getElementById(annotationId);if(commentsDiv&&commentsDiv.childNodes){if(commentsDiv.childNodes[0].ej2_instances){commentsDiv.childNodes[0].ej2_instances[0].value=noteContent;}else if(commentsDiv.childNodes[0].childNodes&&commentsDiv.childNodes[0].childNodes[1].ej2_instances){commentsDiv.childNodes[0].childNodes[1].ej2_instances[0].value=noteContent;}}};/**
     * @param annotation
     * @param currentAnnotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.addFreeTextProperties=function(annotation,currentAnnotation){if(this.pdfViewer.enableShapeLabel&&annotation&&currentAnnotation){currentAnnotation.labelSettings={fontColor:annotation.fontColor,fontSize:annotation.fontSize,fontFamily:annotation.fontFamily,opacity:annotation.labelOpacity,labelContent:annotation.labelContent,fillColor:annotation.labelFillColor};}};Annotation.prototype.updateMeasurementSettings=function(){if(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableMeasureAnnotation){// eslint-disable-next-line max-len
var ratioString='1 '+this.pdfViewer.measurementSettings.conversionUnit+' = '+this.pdfViewer.measurementSettings.scaleRatio+' '+this.pdfViewer.measurementSettings.displayUnit;this.measureAnnotationModule.updateMeasureValues(ratioString,this.pdfViewer.measurementSettings.displayUnit,this.pdfViewer.measurementSettings.conversionUnit,this.pdfViewer.measurementSettings.depth);}};// eslint-disable-next-line
Annotation.prototype.updateCollection=function(annotationId,pageNumber,annotation,annotationType){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_'+annotationType);if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_'+annotationType];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotationCollection=annotObject[index].annotations;if(annotationCollection!==null){for(var i=0;i<annotationCollection.length;i++){if(annotationCollection[i].annotName===annotationId){// eslint-disable-next-line
var newAnnot=this.modifyAnnotationProperties(annotationCollection[i],annotation,annotationType);annotationCollection[i]=newAnnot;}}if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_'+annotationType);}if(annotObject[index]){annotObject[index].annotations=annotationCollection;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){// eslint-disable-next-line max-len
this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_'+annotationType]=annotationStringified;}else{// eslint-disable-next-line max-len
window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_'+annotationType,annotationStringified);}}}}};// eslint-disable-next-line
Annotation.prototype.modifyAnnotationProperties=function(newAnnotation,annotation,annotationType){if(annotation&&annotation.isCommentLock===true){newAnnotation.isCommentLock=annotation.isCommentLock;}if(annotation.comments){for(var j=0;j<annotation.comments.length;j++){if(annotation.comments[j].isLock===true){newAnnotation.comments[j].isLock=annotation.comments[j].isLock;}}}if(annotation&&annotation.note!==''&&annotation.note!==undefined){newAnnotation.note=annotation.note;}if(annotation.commentId&&annotation.editComment&&annotation.commentType==='edit'){// eslint-disable-next-line
var commentDiv=document.getElementById(annotation.commentId);if(annotation.annotationId===annotation.commentId){newAnnotation.note=commentDiv.childNodes[1].ej2_instances[0].value;}for(var j=0;j<annotation.comments.length;j++){if(annotation.comments[j].annotName===annotation.commentId){newAnnotation.comments[j].note=commentDiv.childNodes[1].ej2_instances[0].value;}}}if(annotationType==='textMarkup'){newAnnotation.opacity=annotation.opacity;newAnnotation.color=annotation.color;newAnnotation.allowedInteractions=annotation.allowedInteractions;}else if(annotationType==='sticky'||annotationType==='stamp'){if(annotation.bounds){newAnnotation.bounds=annotation.bounds;}newAnnotation.opacity=annotation.opacity;newAnnotation.annotationSettings=annotation.annotationSettings;newAnnotation.allowedInteractions=annotation.allowedInteractions;if(annotation.stampAnnotationPath){newAnnotation.stampAnnotationPath=annotation.stampAnnotationPath;}}else if(annotationType==='ink'){if(annotation.bounds){newAnnotation.bounds=annotation.bounds;}newAnnotation.opacity=annotation.opacity;newAnnotation.strokeColor=annotation.strokeColor;newAnnotation.thickness=annotation.thickness;newAnnotation.annotationSettings=annotation.annotationSettings;newAnnotation.allowedInteractions=annotation.allowedInteractions;}else if(annotationType==='shape'||annotationType==='shape_measure'){if(annotation.subType==='Line'||annotation.subType==='Arrow'||annotation.subType==='Distance'||annotation.subType==='Perimeter'){if(annotation.bounds){newAnnotation.bounds=annotation.bounds;}if(annotation.vertexPoint){newAnnotation.vertexPoints=annotation.vertexPoints;}newAnnotation.opacity=annotation.opacity;newAnnotation.fillColor=annotation.fillColor;newAnnotation.strokeColor=annotation.strokeColor;newAnnotation.thickness=annotation.thickness;newAnnotation.borderDashArray=annotation.borderDashArray;newAnnotation.lineHeadStart=this.getArrowTypeForCollection(annotation.lineHeadStartStyle);newAnnotation.lineHeadEnd=this.getArrowTypeForCollection(annotation.lineHeadEndStyle);newAnnotation.annotationSettings=annotation.annotationSettings;newAnnotation.allowedInteractions=annotation.allowedInteractions;}else{if(annotation.bounds){newAnnotation.bounds=annotation.bounds;}if(annotation.vertexPoint){newAnnotation.vertexPoints=annotation.vertexPoints;}newAnnotation.opacity=annotation.opacity;newAnnotation.fillColor=annotation.fillColor;newAnnotation.strokeColor=annotation.strokeColor;newAnnotation.thickness=annotation.thickness;newAnnotation.annotationSettings=annotation.annotationSettings;newAnnotation.allowedInteractions=annotation.allowedInteractions;if(annotation.calibrate){if(newAnnotation.annotName===annotation.annotationId){if(newAnnotation.calibrate.depth!==annotation.calibrate.depth){newAnnotation.calibrate.depth=annotation.calibrate.depth;this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth=annotation.calibrate.depth;// eslint-disable-next-line max-len
newAnnotation.note=this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(newAnnotation.vertexPoints);}}}}if(this.pdfViewer.enableShapeLabel&&annotation.labelSettings){var text=annotation.labelSettings.labelContent;newAnnotation.note=text;newAnnotation.fontSize=annotation.labelSettings.fontSize;newAnnotation.labelFillColor=annotation.labelSettings.fillColor;if(newAnnotation.labelContent){newAnnotation.labelContent=text;}if(newAnnotation.labelSettings){newAnnotation.labelSettings=annotation.labelSettings;}this.updateAnnotationComments(newAnnotation.annotName,text);}}else if(annotationType==='freetext'){if(annotation.bounds){newAnnotation.bounds=annotation.bounds;}newAnnotation.opacity=annotation.opacity;newAnnotation.strokeColor=annotation.strokeColor;newAnnotation.thickness=annotation.thickness;if(annotation.content){newAnnotation.dynamicText=annotation.content;}newAnnotation.fontFamily=annotation.fontFamily;newAnnotation.fontSize=annotation.fontSize;newAnnotation.fontColor=annotation.fontColor;newAnnotation.fillColor=annotation.fillColor;newAnnotation.font=annotation.font?annotation.font:annotation.fontStyle;newAnnotation.textAlign=annotation.textAlign;newAnnotation.annotationSettings=annotation.annotationSettings;newAnnotation.allowedInteractions=annotation.allowedInteractions;newAnnotation.isReadonly=annotation.isReadonly;}newAnnotation.customData=annotation.customData;newAnnotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();newAnnotation.isPrint=annotation.isPrint;if(annotation.annotationSettings&&!sf.base.isNullOrUndefined(annotation.annotationSettings.isLock)){newAnnotation.isLocked=annotation.annotationSettings.isLock;}return newAnnotation;};/**
     * @param annotationType
     * @param annotationSubType
     * @param annotationType
     * @param annotationSubType
     * @private
     */Annotation.prototype.updateAnnotationAuthor=function(annotationType,annotationSubType){var annotationAuthor;if(annotationType==='sticky'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.stickyNotesSettings.author!=='Guest'?this.pdfViewer.stickyNotesSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationType==='stamp'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.stampSettings.author!=='Guest'?this.pdfViewer.stampSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationType==='shape'){if(annotationSubType==='Line'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.lineSettings.author!=='Guest'?this.pdfViewer.lineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='LineWidthArrowHead'||annotationSubType==='Arrow'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.arrowSettings.author!=='Guest'?this.pdfViewer.arrowSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Circle'||annotationSubType==='Ellipse'||annotationSubType==='Oval'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.circleSettings.author!=='Guest'?this.pdfViewer.circleSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Rectangle'||annotationSubType==='Square'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.rectangleSettings.author!=='Guest'?this.pdfViewer.rectangleSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Polygon'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.polygonSettings.author!=='Guest'?this.pdfViewer.polygonSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}}else if(annotationType==='measure'){if(annotationSubType==='Distance'||annotationSubType==='Distance calculation'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.distanceSettings.author!=='Guest'?this.pdfViewer.distanceSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Perimeter'||annotationSubType==='Perimeter calculation'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.perimeterSettings.author!=='Guest'?this.pdfViewer.perimeterSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Radius'||annotationSubType==='Radius calculation'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.radiusSettings.author!=='Guest'?this.pdfViewer.radiusSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Area'||annotationSubType==='Area calculation'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.areaSettings.author!=='Guest'?this.pdfViewer.areaSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Volume'||annotationSubType==='Volume calculation'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.volumeSettings.author!=='Guest'?this.pdfViewer.volumeSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}}else if(annotationType==='textMarkup'){if(annotationSubType==='Highlight'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.highlightSettings.author!=='Guest'?this.pdfViewer.highlightSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Underline'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.underlineSettings.author!=='Guest'?this.pdfViewer.underlineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Strikethrough'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.strikethroughSettings.author!=='Guest'?this.pdfViewer.strikethroughSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else{// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.annotationSettings.author;}}else if(annotationType==='freeText'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.freeTextSettings.author!=='Guest'?this.pdfViewer.freeTextSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationType==='ink'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.inkAnnotationSettings.author!=='Guest'?this.pdfViewer.inkAnnotationSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}if(!annotationAuthor){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.annotationSettings.author;}return annotationAuthor;};/**
     * @param colour
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.nameToHash=function(colour){// eslint-disable-next-line
var colours={'aliceblue':'#f0f8ff','antiquewhite':'#faebd7','aqua':'#00ffff','aquamarine':'#7fffd4','azure':'#f0ffff','beige':'#f5f5dc','bisque':'#ffe4c4','black':'#000000','blanchedalmond':'#ffebcd','blue':'#0000ff','blueviolet':'#8a2be2','brown':'#a52a2a','burlywood':'#deb887','yellow':'#ffff00','yellowgreen':'#9acd32','cadetblue':'#5f9ea0','chartreuse':'#7fff00','chocolate':'#d2691e','coral':'#ff7f50','cornflowerblue':'#6495ed','cornsilk':'#fff8dc','crimson':'#dc143c','cyan':'#00ffff','darkblue':'#00008b','darkcyan':'#008b8b','darkgoldenrod':'#b8860b','darkgray':'#a9a9a9','darkred':'#8b0000','darksalmon':'#e9967a','darkgreen':'#006400','darkkhaki':'#bdb76b','darkmagenta':'#8b008b','darkolivegreen':'#556b2f','darkorange':'#ff8c00','darkorchid':'#9932cc','darkseagreen':'#8fbc8f','darkslateblue':'#483d8b','darkslategray':'#2f4f4f','darkturquoise':'#00ced1','darkviolet':'#9400d3','deeppink':'#ff1493','deepskyblue':'#00bfff','dimgray':'#696969','dodgerblue':'#1e90ff','firebrick':'#b22222','floralwhite':'#fffaf0','forestgreen':'#228b22','fuchsia':'#ff00ff','gainsboro':'#dcdcdc','ghostwhite':'#f8f8ff','gold':'#ffd700','goldenrod':'#daa520','gray':'#808080','green':'#008000','greenyellow':'#adff2f','honeydew':'#f0fff0','hotpink':'#ff69b4','indianred ':'#cd5c5c','mediumorchid':'#ba55d3','mediumpurple':'#9370d8','indigo':'#4b0082','ivory':'#fffff0','navy':'#000080','oldlace':'#fdf5e6','olive':'#808000','khaki':'#f0e68c','lavender':'#e6e6fa','lavenderblush':'#fff0f5','lawngreen':'#7cfc00','lemonchiffon':'#fffacd','lightblue':'#add8e6','lightcoral':'#f08080','lightcyan':'#e0ffff','lightgoldenrodyellow':'#fafad2','lightgrey':'#d3d3d3','lightgreen':'#90ee90','lightpink':'#ffb6c1','lightsalmon':'#ffa07a','lightseagreen':'#20b2aa','lightskyblue':'#87cefa','lightslategray':'#778899','lightsteelblue':'#b0c4de','lightyellow':'#ffffe0','lime':'#00ff00','limegreen':'#32cd32','linen':'#faf0e6','magenta':'#ff00ff','maroon':'#800000','mediumaquamarine':'#66cdaa','mediumblue':'#0000cd','mediumseagreen':'#3cb371','mediumslateblue':'#7b68ee','mediumspringgreen':'#00fa9a','mediumturquoise':'#48d1cc','mediumvioletred':'#c71585','midnightblue':'#191970','mintcream':'#f5fffa','mistyrose':'#ffe4e1','moccasin':'#ffe4b5','navajowhite':'#ffdead','rebeccapurple':'#663399','red':'#ff0000','rosybrown':'#bc8f8f','royalblue':'#4169e1','olivedrab':'#6b8e23','orange':'#ffa500','orangered':'#ff4500','orchid':'#da70d6','palegoldenrod':'#eee8aa','palegreen':'#98fb98','paleturquoise':'#afeeee','palevioletred':'#d87093','papayawhip':'#ffefd5','peachpuff':'#ffdab9','peru':'#cd853f','wheat':'#f5deb3','white':'#ffffff','whitesmoke':'#f5f5f5','pink':'#ffc0cb','plum':'#dda0dd','steelblue':'#4682b4','violet':'#ee82ee','powderblue':'#b0e0e6','purple':'#800080','saddlebrown':'#8b4513','salmon':'#fa8072','sandybrown':'#f4a460','seagreen':'#2e8b57','seashell':'#fff5ee','sienna':'#a0522d','silver':'#c0c0c0','skyblue':'#87ceeb','slateblue':'#6a5acd','slategray':'#708090','snow':'#fffafa','springgreen':'#00ff7f','tan':'#d2b48c','teal':'#008080','thistle':'#d8bfd8','tomato':'#ff6347','turquoise':'#40e0d0'};if(typeof colours[colour.toLowerCase()]!=='undefined'){return colours[colour.toLowerCase()];}return'';};// eslint-disable-next-line
Annotation.prototype.updateFreeTextFontStyle=function(font){// eslint-disable-next-line
var fontStyle=0;if(font.isBold===1){fontStyle=1;}else if(font.isItalic===2){fontStyle=2;}else if(font.isUnderline===4){fontStyle=4;}else if(font.isStrikeout){fontStyle=8;}else{fontStyle={isBold:font.isBold,isItalic:font.isItalic,isUnderline:font.isUnderline,isStrikeout:font.isUnderline};}return fontStyle;};// eslint-disable-next-line
Annotation.prototype.setFreeTextFontStyle=function(fontStyle){if(fontStyle===1){return{isBold:true};}else if(fontStyle===2){return{isItalic:true};}else if(fontStyle===4){return{isUnderline:true};}else if(fontStyle===8){return{isStrikeout:true};}else{return{isBold:fontStyle.isBold,isItalic:fontStyle.isItalic,isUnderline:fontStyle.isUnderline,isStrikeout:fontStyle.isUnderline};}};/**
     * @param annotation
     * @param isSettings
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.findAnnotationSettings=function(annotation,isSettings){// eslint-disable-next-line
var annotSettings=this.pdfViewer.annotationSettings;if(annotation){// eslint-disable-next-line
var shapeType=annotation.shapeAnnotationType;if(shapeType==='StickyNotes'&&this.pdfViewer.stickyNotesSettings){annotSettings=this.pdfViewer.stickyNotesSettings;}else if(shapeType==='Stamp'||shapeType==='Image'){annotSettings=this.pdfViewer.stampSettings;// eslint-disable-next-line max-len
if(shapeType==='image'||shapeType==='Image'){annotSettings=this.pdfViewer.customStampSettings;}}else if(shapeType==='FreeText'){annotSettings=this.pdfViewer.freeTextSettings;}else if(shapeType==='HandWrittenSignature'){annotSettings=this.pdfViewer.handWrittenSignatureSettings;}else if(annotation.measureType===''){if(shapeType==='Line'){annotSettings=this.pdfViewer.lineSettings;// eslint-disable-next-line max-len
}else if(shapeType==='Arrow'||shapeType==='LineWidthArrowHead'){annotSettings=this.pdfViewer.arrowSettings;}else if(shapeType==='Rectangle'){annotSettings=this.pdfViewer.rectangleSettings;// eslint-disable-next-line max-len
}else if(shapeType==='Circle'||shapeType==='Ellipse'){annotSettings=this.pdfViewer.circleSettings;}else if(shapeType==='Polygon'&&this.pdfViewer.polygonSettings){annotSettings=this.pdfViewer.polygonSettings;}}else if(annotation.measureType!==''){if(annotation.measureType==='Distance'){annotSettings=this.pdfViewer.distanceSettings;}else if(annotation.measureType==='Perimeter'){annotSettings=this.pdfViewer.perimeterSettings;}else if(annotation.measureType==='Area'){annotSettings=this.pdfViewer.areaSettings;}else if(annotation.measureType==='Radius'){annotSettings=this.pdfViewer.radiusSettings;}else if(annotation.measureType==='Volume'){annotSettings=this.pdfViewer.volumeSettings;}}}var settings=annotation?annotation.annotationSettings:{};if(settings&&(settings.minWidth||settings.maxWidth||settings.minHeight||settings.maxHeight)){return this.updateSettings(settings);}else if(isSettings){return this.updateSettings(annotSettings);}else{return annotSettings;}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.updateAnnotationSettings=function(annotation){// eslint-disable-next-line
var annotSettings=this.pdfViewer.annotationSettings;if(annotation.AnnotType==='sticky'){annotSettings=this.pdfViewer.stickyNotesSettings;}else if(annotation.AnnotType==='stamp'||annotation.AnnotType==='image'||annotation.AnnotType==='Image'){annotSettings=this.pdfViewer.stampSettings;// eslint-disable-next-line max-len
if(annotation.Subject==='image'||annotation.Subject==='Image'){annotSettings=this.pdfViewer.customStampSettings;}}else if(annotation.AnnotType==='freeText'){annotSettings=this.pdfViewer.freeTextSettings;}else if(annotation.AnnotType==='shape'){if(annotation.Subject==='Line'){annotSettings=this.pdfViewer.lineSettings;// eslint-disable-next-line max-len
}else if(annotation.Subject==='Arrow'||annotation.Subject==='LineWidthArrowHead'){annotSettings=this.pdfViewer.arrowSettings;// eslint-disable-next-line max-len
}else if(annotation.Subject==='Rectangle'||annotation.Subject==='Square'){annotSettings=this.pdfViewer.rectangleSettings;// eslint-disable-next-line max-len
}else if(annotation.Subject==='Circle'||annotation.Subject==='Ellipse'||annotation.Subject==='Oval'){annotSettings=this.pdfViewer.circleSettings;}else if(annotation.Subject==='Polygon'){annotSettings=this.pdfViewer.polygonSettings;}}else if(annotation.AnnotType==='shape_measure'){// eslint-disable-next-line max-len
if(annotation.Subject==='Distance'||annotation.Subject==='Distance calculation'){annotSettings=this.pdfViewer.distanceSettings;// eslint-disable-next-line max-len
}else if(annotation.Subject==='Perimeter'||annotation.Subject==='Perimeter calculation'){annotSettings=this.pdfViewer.perimeterSettings;// eslint-disable-next-line max-len
}else if(annotation.Subject==='Area'||annotation.Subject==='Area calculation'){annotSettings=this.pdfViewer.areaSettings;// eslint-disable-next-line max-len
}else if(annotation.Subject==='Radius'||annotation.Subject==='Radius calculation'){annotSettings=this.pdfViewer.radiusSettings;// eslint-disable-next-line max-len
}else if(annotation.Subject==='Volume'||annotation.Subject==='Volume calculation'){annotSettings=this.pdfViewer.volumeSettings;}}return this.updateSettings(annotSettings);};/**
     * @param annotationSettings
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.updateSettings=function(annotationSettings){var maxHeight=0;var maxWidth=0;var minHeight=0;var minWidth=0;var isLock=false;var isPrint=true;// eslint-disable-next-line
var settings=this.pdfViewer.annotationSettings;if(annotationSettings.minWidth||annotationSettings.maxWidth||annotationSettings.minHeight||annotationSettings.maxHeight){maxHeight=annotationSettings.maxHeight?annotationSettings.maxHeight:2000;maxWidth=annotationSettings.maxWidth?annotationSettings.maxWidth:2000;minHeight=annotationSettings.minHeight?annotationSettings.minHeight:0;minWidth=annotationSettings.minWidth?annotationSettings.minWidth:0;}else if(settings.minWidth||settings.maxWidth||settings.minHeight||settings.maxHeight){maxHeight=settings.maxHeight?settings.maxHeight:2000;maxWidth=settings.maxWidth?settings.maxWidth:2000;minHeight=settings.minHeight?settings.minHeight:0;minWidth=settings.minWidth?settings.minWidth:0;}isLock=annotationSettings.isLock?annotationSettings.isLock:settings.isLock?settings.isLock:false;isPrint=annotationSettings.isPrint;return{minWidth:minWidth,maxWidth:maxWidth,minHeight:minHeight,maxHeight:maxHeight,isLock:isLock,isPrint:isPrint};};// eslint-disable-next-line
Annotation.prototype.getOverlappedAnnotations=function(annotation,pageNumber){// eslint-disable-next-line
var pageCollections=this.getPageShapeAnnotations(pageNumber);// eslint-disable-next-line
var selectedAnnotation;for(var i=0;i<pageCollections.length;i++){if(annotation.annotName===pageCollections[i].annotName){selectedAnnotation=pageCollections[i];break;}}// eslint-disable-next-line
var annotationCollection=this.findOverlappedAnnotations(selectedAnnotation,pageCollections);return annotationCollection;};// eslint-disable-next-line
Annotation.prototype.getPageShapeAnnotations=function(pageNumber){// eslint-disable-next-line
var pageCollections=[];// eslint-disable-next-line
var inkObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_ink');if(inkObject){var inkAnnotObject=JSON.parse(inkObject);if(inkAnnotObject){var index=this.getPageCollection(inkAnnotObject,pageNumber);if(inkAnnotObject[index]){// eslint-disable-next-line
var inkAnnotations=inkAnnotObject[index].annotations;if(inkAnnotations&&inkAnnotations.length>0){for(var i=0;i<inkAnnotations.length;i++){pageCollections.push(inkAnnotations[i]);}}}}}// eslint-disable-next-line
var shapeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape');if(shapeObject){var shapeAnnotObject=JSON.parse(shapeObject);if(shapeAnnotObject){var index=this.getPageCollection(shapeAnnotObject,pageNumber);if(shapeAnnotObject[index]){// eslint-disable-next-line
var shapeAnnotations=shapeAnnotObject[index].annotations;if(shapeAnnotations&&shapeAnnotations.length>0){for(var i=0;i<shapeAnnotations.length;i++){pageCollections.push(shapeAnnotations[i]);}}}}}// eslint-disable-next-line
var measureObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape_measure');if(measureObject){var measureAnnotationObject=JSON.parse(measureObject);if(measureAnnotationObject){var index=this.getPageCollection(measureAnnotationObject,pageNumber);if(measureAnnotationObject[index]){// eslint-disable-next-line
var measureAnnotations=measureAnnotationObject[index].annotations;if(measureAnnotations&&measureAnnotations.length>0){for(var i=0;i<measureAnnotations.length;i++){pageCollections.push(measureAnnotations[i]);}}}}}// eslint-disable-next-line
var stampObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_stamp');if(stampObject){var stampAnnotationObject=JSON.parse(stampObject);if(stampAnnotationObject){var index=this.getPageCollection(stampAnnotationObject,pageNumber);if(stampAnnotationObject[index]){// eslint-disable-next-line
var stampAnnotations=stampAnnotationObject[index].annotations;if(stampAnnotations&&stampAnnotations.length>0){for(var i=0;i<stampAnnotations.length;i++){pageCollections.push(stampAnnotations[i]);}}}}}// eslint-disable-next-line
var freeTextObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_freetext');if(freeTextObject){var freeTextAnnotationObject=JSON.parse(freeTextObject);if(freeTextAnnotationObject){var index=this.getPageCollection(freeTextAnnotationObject,pageNumber);if(freeTextAnnotationObject[index]){// eslint-disable-next-line
var freeTextAnnotations=freeTextAnnotationObject[index].annotations;if(freeTextAnnotations&&freeTextAnnotations.length>0){for(var i=0;i<freeTextAnnotations.length;i++){pageCollections.push(freeTextAnnotations[i]);}}}}}// eslint-disable-next-line
var stickyObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_sticky');if(stickyObject){var stickyNotesAnnotationObject=JSON.parse(stickyObject);if(stickyNotesAnnotationObject){var index=this.getPageCollection(stickyNotesAnnotationObject,pageNumber);if(stickyNotesAnnotationObject[index]){// eslint-disable-next-line
var stickyNotesAnnotations=stickyNotesAnnotationObject[index].annotations;if(stickyNotesAnnotations&&stickyNotesAnnotations.length>0){for(var i=0;i<stickyNotesAnnotations.length;i++){pageCollections.push(stickyNotesAnnotations[i]);}}}}}// eslint-disable-next-line
var textMarkupObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_textMarkup');if(textMarkupObject){var textMarkupAnnotationObject=JSON.parse(textMarkupObject);if(textMarkupAnnotationObject){var index=this.getPageCollection(textMarkupAnnotationObject,pageNumber);if(textMarkupAnnotationObject[index]){// eslint-disable-next-line
var textMarkupAnnotations=textMarkupAnnotationObject[index].annotations;if(textMarkupAnnotations&&textMarkupAnnotations.length>0){for(var i=0;i<textMarkupAnnotations.length;i++){pageCollections.push(textMarkupAnnotations[i]);}}}}}return pageCollections;};// eslint-disable-next-line
Annotation.prototype.findOverlappedAnnotations=function(annotation,pageCollections){this.overlappedAnnotations=[];if(annotation&&annotation.bounds){if(annotation.shapeAnnotationType==='textMarkup'){for(var i=0;i<annotation.bounds.length;i++){// eslint-disable-next-line
var bounds=this.orderTextMarkupBounds(annotation.bounds[i]);this.calculateOverlappedAnnotationBounds(annotation,bounds,pageCollections);}}else{this.calculateOverlappedAnnotationBounds(annotation,annotation.bounds,pageCollections);}}return this.overlappedAnnotations;};// eslint-disable-next-line
Annotation.prototype.calculateOverlappedAnnotationBounds=function(annotation,bounds,pageCollections){// eslint-disable-next-line
var selectBounds=bounds;if(annotation.shapeAnnotationType==='Ink'){selectBounds={left:bounds.x,top:bounds.y,height:bounds.height,width:bounds.width};}// eslint-disable-next-line
var left=parseInt(selectBounds.left);// eslint-disable-next-line
var top=parseInt(selectBounds.top);// eslint-disable-next-line
var totalHeight=parseInt(selectBounds.top+selectBounds.height);// eslint-disable-next-line
var totalWidth=parseInt(selectBounds.left+selectBounds.width);for(var i=0;i<pageCollections.length;i++){if(annotation.annotName===pageCollections[i].annotName){this.checkOverlappedCollections(pageCollections[i],this.overlappedAnnotations);}else{var boundsCount=1;if(pageCollections[i].shapeAnnotationType==='textMarkup'){boundsCount=pageCollections[i].bounds.length;}for(var j=0;j<boundsCount;j++){// eslint-disable-next-line
var annotationBounds=void 0;// eslint-disable-next-line
var annotationBoundsCollection=pageCollections[i].bounds;if(pageCollections[i].shapeAnnotationType==='Ink'){// eslint-disable-next-line
annotationBoundsCollection={left:annotationBoundsCollection.x,top:annotationBoundsCollection.y,height:annotationBoundsCollection.height,width:annotationBoundsCollection.width};}if(pageCollections[i].shapeAnnotationType!=='textMarkup'&&boundsCount===1){annotationBounds=annotationBoundsCollection;}else{// eslint-disable-next-line
annotationBounds=this.orderTextMarkupBounds(annotationBoundsCollection[j]);}if(annotationBounds){var isOverlapped=false;// eslint-disable-next-line
if(left<=parseInt(annotationBounds.left)&&totalWidth>=parseInt(annotationBounds.left)||left<=parseInt(annotationBounds.left+annotationBounds.width)&&totalWidth>=parseInt(annotationBounds.left+annotationBounds.width)){isOverlapped=true;}if(isOverlapped){// eslint-disable-next-line
if(top<=parseInt(annotationBounds.top)&&totalHeight>=parseInt(annotationBounds.top)||top<=parseInt(annotationBounds.top+annotationBounds.height)&&totalHeight>=parseInt(annotationBounds.top+annotationBounds.height)){isOverlapped=true;}else{isOverlapped=false;}}if(isOverlapped){this.checkOverlappedCollections(pageCollections[i],this.overlappedAnnotations);}else{// eslint-disable-next-line
if(parseInt(annotationBounds.left)<=left&&parseInt(annotationBounds.left+annotationBounds.width)>=left||totalWidth>=parseInt(annotationBounds.left)&&totalWidth<=parseInt(annotationBounds.left+annotationBounds.width)){isOverlapped=true;}if(isOverlapped){// eslint-disable-next-line
if(parseInt(annotationBounds.top)<=top&&parseInt(annotationBounds.top+annotationBounds.height)>=top||totalHeight>=parseInt(annotationBounds.top)&&totalHeight<=parseInt(annotationBounds.top+annotationBounds.height)){isOverlapped=true;}else{isOverlapped=false;}}if(isOverlapped){this.checkOverlappedCollections(pageCollections[i],this.overlappedAnnotations);}else{// eslint-disable-next-line
if(left<=parseInt(annotationBounds.left)&&totalWidth>=parseInt(annotationBounds.left)||left<=parseInt(annotationBounds.left+annotationBounds.width)&&totalWidth>=parseInt(annotationBounds.left+annotationBounds.width)){isOverlapped=true;}if(isOverlapped){// eslint-disable-next-line
if(parseInt(annotationBounds.top)<=top&&parseInt(annotationBounds.top+annotationBounds.height)>=top||totalHeight>=parseInt(annotationBounds.top)&&totalHeight<=parseInt(annotationBounds.top+annotationBounds.height)){isOverlapped=true;}else{isOverlapped=false;}}if(isOverlapped){this.checkOverlappedCollections(pageCollections[i],this.overlappedAnnotations);}else{// eslint-disable-next-line
if(parseInt(annotationBounds.left)<=left&&parseInt(annotationBounds.left+annotationBounds.width)>=left||totalWidth>=parseInt(annotationBounds.left)&&totalWidth<=parseInt(annotationBounds.left+annotationBounds.width)){isOverlapped=true;}if(isOverlapped){// eslint-disable-next-line
if(top<=parseInt(annotationBounds.top)&&totalHeight>=parseInt(annotationBounds.top)||top<=parseInt(annotationBounds.top+annotationBounds.height)&&totalHeight>=parseInt(annotationBounds.top+annotationBounds.height)){isOverlapped=true;}else{isOverlapped=false;}}if(isOverlapped){this.checkOverlappedCollections(pageCollections[i],this.overlappedAnnotations);}}}}}}}}};/**
     * @param annotation
     * @param pageNumber
     * @param type
     * @param annotation
     * @param pageNumber
     * @param type
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.findAnnotationMode=function(annotation,pageNumber,type){// eslint-disable-next-line
var importCollection=this.pdfViewer.viewerBase.importedAnnotation[pageNumber];if(importCollection){// eslint-disable-next-line
var collection=void 0;if(type==='shape'){collection=importCollection.shapeAnnotation;}else if(type==='shape_measure'){collection=importCollection.measureShapeAnnotation;}else if(type==='freeText'){collection=importCollection.freeTextAnnotation;}else if(type==='stamp'){collection=importCollection.stampAnnotations;}else if(type==='sticky'){collection=importCollection.stickyNotesAnnotation;}else if(type==='textMarkup'){collection=importCollection.textMarkupAnnotation;}if(collection){for(var i=0;i<collection.length;i++){if(collection[i].AnnotName===annotation.AnnotName){return'Imported Annotation';}}}}return'Existing Annotation';};// eslint-disable-next-line
Annotation.prototype.checkOverlappedCollections=function(annotation,overlappedCollections){if(overlappedCollections.length>0){var isAdded=false;for(var i=0;i<overlappedCollections.length;i++){if(annotation.annotName===overlappedCollections[i].annotName&&annotation.bounds===overlappedCollections[i].bounds){isAdded=true;break;}}if(!isAdded){overlappedCollections.push(annotation);}}else{overlappedCollections.push(annotation);}};// eslint-disable-next-line
Annotation.prototype.orderTextMarkupBounds=function(bounds){if(bounds.Left||bounds.Width){return{left:bounds.Left,top:bounds.Top,height:bounds.Height,width:bounds.Width};}else{return{left:bounds.left,top:bounds.top,height:bounds.height,width:bounds.width};}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.updateModifiedDate=function(annotation){if(annotation.modifiedDate){annotation.modifiedDate=this.setAnnotationModifiedDate(annotation.modifiedDate);}if(annotation.comments&&annotation.comments.length>0){for(var i=0;i<annotation.comments.length;i++){if(annotation.comments[i].modifiedDate){annotation.comments[i].modifiedDate=this.setAnnotationModifiedDate(annotation.comments[i].modifiedDate);if(annotation.comments[i].review&&annotation.comments[i].review.modifiedDate){// eslint-disable-next-line max-len
annotation.comments[i].review.modifiedDate=this.setAnnotationModifiedDate(annotation.comments[i].review.modifiedDate);}}}}if(annotation.review&&annotation.review.modifiedDate){annotation.review.modifiedDate=this.setAnnotationModifiedDate(annotation.review.modifiedDate);}};Annotation.prototype.setAnnotationModifiedDate=function(date){var modifiedTime;var modifiedDateTime;if(date!==''){// eslint-disable-next-line
var time=parseInt(date.split(' ')[1].split(':')[0]);if(date.split(' ').length===3){// eslint-disable-next-line max-len
modifiedTime=time+':'+date.split(' ')[1].split(':')[1]+':'+date.split(' ')[1].split(':')[2]+' '+date.split(' ')[2];}else{if(time>=12){if(time===12){modifiedTime=time+':'+date.split(' ')[1].split(':')[1]+':'+date.split(' ')[1].split(':')[2]+' PM';}else{// eslint-disable-next-line max-len
modifiedTime=time-12+':'+date.split(' ')[1].split(':')[1]+':'+date.split(' ')[1].split(':')[2]+' PM';}}else{modifiedTime=time+':'+date.split(' ')[1].split(':')[1]+':'+date.split(' ')[1].split(':')[2]+' AM';}}// eslint-disable-next-line
var dateString=date.split(' ')[0];// eslint-disable-next-line
var dateStringSpilt=date.split(',');if(dateStringSpilt.length>1){modifiedDateTime=dateString+' '+modifiedTime;}else{modifiedDateTime=dateString+', '+modifiedTime;}}else{return date;}return modifiedDateTime;};/**
     * @private
     */Annotation.prototype.clear=function(){if(this.shapeAnnotationModule){this.shapeAnnotationModule.shapeCount=0;}if(this.measureAnnotationModule){this.measureAnnotationModule.measureShapeCount=0;}if(this.textMarkupAnnotationModule){this.textMarkupAnnotationModule.clear();}if(this.stickyNotesAnnotationModule){this.stickyNotesAnnotationModule.clear();}this.pdfViewer.refresh();this.undoCommentsElement=[];this.redoCommentsElement=[];this.overlappedAnnotations=[];this.previousIndex=null;// eslint-disable-next-line max-len
if(this.pdfViewer.annotation&&this.pdfViewer.annotation.stampAnnotationModule){this.pdfViewer.annotation.stampAnnotationModule.stampPageNumber=[];}if(this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule){this.pdfViewer.annotation.freeTextAnnotationModule.freeTextPageNumbers=[];this.freeTextAnnotationModule.previousText='Type Here';}if(this.pdfViewer.annotation&&this.pdfViewer.annotation.inkAnnotationModule){this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex=[];}window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_shape');window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_shape_measure');window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_stamp');window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_sticky');};// eslint-disable-next-line
Annotation.prototype.retrieveAnnotationCollection=function(){return this.pdfViewer.annotationCollection;};/**
     * @param interaction
     * @param annotation
     * @param interaction
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.checkAllowedInteractions=function(interaction,annotation){// eslint-disable-next-line
var annotationInteraction=this.updateAnnotationAllowedInteractions(annotation);if(annotationInteraction&&annotationInteraction.length>0){for(var i=0;i<annotationInteraction.length;i++){if(interaction==='Select'){// eslint-disable-next-line max-len
if(annotationInteraction[i]==='Move'||annotationInteraction[i]==='Resize'||annotationInteraction[i]==='Delete'||annotationInteraction[i]==='PropertyChange'||annotationInteraction[i]==='Select'){return true;}}else{if(annotationInteraction[i]===interaction){return true;}}}}return false;};/**
     * @param menuObj
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.checkContextMenuDeleteItem=function(menuObj){// eslint-disable-next-line
var annotation=this.findCurrentAnnotation();if(annotation&&annotation.annotationSettings){// eslint-disable-next-line
if(annotation.annotationSettings.isLock){if(this.checkAllowedInteractions('Delete',annotation)){menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')],true);}else{menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')],false);}}else{menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')],true);}}};/**
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.isEnableDelete=function(){// eslint-disable-next-line
var annotation=this.findCurrentAnnotation();if(annotation&&annotation.annotationSettings){// eslint-disable-next-line
if(annotation.annotationSettings.isLock){if(this.checkAllowedInteractions('Delete',annotation)){return true;}else{return false;}}else{return true;}}return false;};/**
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.findCurrentAnnotation=function(){if(this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation){return this.textMarkupAnnotationModule.currentTextMarkupAnnotation;}if(this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations[0]){return this.pdfViewer.selectedItems.annotations[0];}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.updateAnnotationAllowedInteractions=function(annotation){// eslint-disable-next-line
var annotationInteraction=['None'];if(annotation){if(annotation.shapeAnnotationType==='FreeText'&&this.pdfViewer.freeTextSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.freeTextSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.shapeAnnotationType==='Ink'&&this.pdfViewer.inkAnnotationSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.inkAnnotationSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.shapeAnnotationType==='StickyNotes'&&this.pdfViewer.stickyNotesSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.stickyNotesSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.shapeAnnotationType==='Stamp'&&this.pdfViewer.stampSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.stampSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.shapeAnnotationType==='Image'&&this.pdfViewer.customStampSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.customStampSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.shapeAnnotationType==='textMarkup'){if(annotation.textMarkupAnnotationType==='Highlight'&&this.pdfViewer.highlightSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.highlightSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.textMarkupAnnotationType==='Underline'&&this.pdfViewer.underlineSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.underlineSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.textMarkupAnnotationType==='Strikethrough'&&this.pdfViewer.strikethroughSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.strikethroughSettings.allowedInteractions,annotation.allowedInteractions);}}else{if(annotation.measureType!==''){if(annotation.measureType==='Distance'&&this.pdfViewer.distanceSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.distanceSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.measureType==='Perimeter'&&this.pdfViewer.perimeterSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.perimeterSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.measureType==='Radius'&&this.pdfViewer.radiusSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.radiusSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.measureType==='Area'&&this.pdfViewer.areaSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.areaSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.measureType==='Volume'&&this.pdfViewer.volumeSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.volumeSettings.allowedInteractions,annotation.allowedInteractions);}}else{if(annotation.shapeAnnotationType==='Line'&&this.pdfViewer.lineSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.lineSettings.allowedInteractions,annotation.allowedInteractions);// eslint-disable-next-line max-len
}else if((annotation.shapeAnnotationType==='Arrow'||annotation.shapeAnnotationType==='LineWidthArrowHead')&&this.pdfViewer.arrowSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.arrowSettings.allowedInteractions,annotation.allowedInteractions);// eslint-disable-next-line max-len
}else if((annotation.shapeAnnotationType==='Circle'||annotation.shapeAnnotationType==='Ellipse'||annotation.shapeAnnotationType==='Oval')&&this.pdfViewer.circleSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.circleSettings.allowedInteractions,annotation.allowedInteractions);}else if((annotation.shapeAnnotationType==='Rectangle'||annotation.shapeAnnotationType==='Square')&&this.pdfViewer.rectangleSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.rectangleSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.shapeAnnotationType==='Polygon'&&this.pdfViewer.polygonSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.polygonSettings.allowedInteractions,annotation.allowedInteractions);}}}}return annotationInteraction;};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.checkIsLockSettings=function(annotation){// eslint-disable-next-line
var isLocked=false;if(annotation){if(annotation.shapeAnnotationType==='FreeText'){isLocked=this.checkLockSettings(this.pdfViewer.freeTextSettings.isLock);}else if(annotation.shapeAnnotationType==='Ink'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.inkAnnotationSettings.isLock);}else if(annotation.shapeAnnotationType==='StickyNotes'){isLocked=this.checkLockSettings(this.pdfViewer.stickyNotesSettings.isLock);}else if(annotation.shapeAnnotationType==='Stamp'){isLocked=this.checkLockSettings(this.pdfViewer.stampSettings.isLock);}else if(annotation.shapeAnnotationType==='Image'){isLocked=this.checkLockSettings(this.pdfViewer.customStampSettings.isLock);}else if(annotation.shapeAnnotationType==='textMarkup'){if(annotation.textMarkupAnnotationType==='Highlight'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.highlightSettings.isLock);}else if(annotation.textMarkupAnnotationType==='Underline'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.underlineSettings.isLock);}else if(annotation.textMarkupAnnotationType==='Strikethrough'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.strikethroughSettings.isLock);}}else{if(annotation.measureType!==''){if(annotation.measureType==='Distance'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.distanceSettings.isLock);}else if(annotation.measureType==='Perimeter'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.perimeterSettings.isLock);}else if(annotation.measureType==='Radius'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.radiusSettings.isLock);}else if(annotation.measureType==='Area'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.areaSettings.isLock);}else if(annotation.measureType==='Volume'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.volumeSettings.isLock);}}else{if(annotation.shapeAnnotationType==='Line'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.lineSettings.isLock);// eslint-disable-next-line max-len
}else if(annotation.shapeAnnotationType==='Arrow'||annotation.shapeAnnotationType==='LineWidthArrowHead'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.arrowSettings.isLock);// eslint-disable-next-line max-len
}else if(annotation.shapeAnnotationType==='Circle'||annotation.shapeAnnotationType==='Ellipse'||annotation.shapeAnnotationType==='Oval'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.circleSettings.isLock);}else if(annotation.shapeAnnotationType==='Rectangle'||annotation.shapeAnnotationType==='Square'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.rectangleSettings.isLock);}else if(annotation.shapeAnnotationType==='Polygon'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.polygonSettings.isLock);}}}}return isLocked;};// eslint-disable-next-line
Annotation.prototype.checkLockSettings=function(locked){var islock=false;if(locked||this.pdfViewer.annotationSettings.isLock){islock=true;}return islock;};/**
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.restrictContextMenu=function(){// eslint-disable-next-line
var isRestrict=false;// eslint-disable-next-line
var annotation=this.findCurrentAnnotation();if(annotation&&this.checkIsLockSettings(annotation)&&this.checkAllowedInteractions('Select',annotation)){isRestrict=true;}return isRestrict;};// eslint-disable-next-line
Annotation.prototype.checkAllowedInteractionSettings=function(annotationInteraction,annotationAllowedInteraction){if(annotationAllowedInteraction){if(annotationAllowedInteraction.length===1){if(annotationAllowedInteraction[0]!=='None'){return annotationAllowedInteraction;}}else{return annotationAllowedInteraction;}}if(annotationInteraction){if(annotationInteraction.length===1){if(annotationInteraction[0]!=='None'){return annotationInteraction;}}else{return annotationInteraction;}}if(this.pdfViewer.annotationSettings.allowedInteractions){return this.pdfViewer.annotationSettings.allowedInteractions;}return['None'];};/**
     * @param value
     * @param type
     * @param value
     * @param type
     * @private
     */Annotation.prototype.getValue=function(value,type){type=!type?'hex':type.toLowerCase();if(value[0]==='r'){var cValue=this.convertRgbToNumberArray(value);if(type==='hex'||type==='hexa'){var hex=this.rgbToHex(cValue);return type==='hex'?hex.slice(0,7):hex;}else{if(type==='hsv'){return this.convertToHsvString(this.rgbToHsv.apply(this,cValue.slice(0,3)));}else{if(type==='hsva'){return this.convertToHsvString(this.rgbToHsv.apply(this,cValue));}else{return'null';}}}}else{if(value[0]==='h'){var cValue=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(value));if(type==='rgba'){return this.convertToRgbString(cValue);}else{if(type==='hex'||type==='hexa'){var hex=this.rgbToHex(cValue);return type==='hex'?hex.slice(0,7):hex;}else{if(type==='rgb'){return this.convertToRgbString(cValue.slice(0,3));}else{return'null';}}}}else{value=this.roundValue(value);var rgb=this.hexToRgb(value);if(type==='rgb'||type==='hsv'){rgb=rgb.slice(0,3);}if(type==='rgba'||type==='rgb'){return this.convertToRgbString(rgb);}else{if(type==='hsva'||type==='hsv'){return this.convertToHsvString(this.rgbToHsv.apply(this,rgb));}else{if(type==='hex'){return value.slice(0,7);}else{if(type==='a'){return rgb[3].toString();}else{return'null';}}}}}}};Annotation.prototype.convertRgbToNumberArray=function(value){// eslint-disable-next-line max-len
return value.slice(value.indexOf('(')+1,value.indexOf(')')).split(',').map(function(n,i){return i!==3?parseInt(n,10):parseFloat(n);});};Annotation.prototype.convertToRgbString=function(rgb){return rgb.length?rgb.length===4?'rgba('+rgb.join()+')':'rgb('+rgb.join()+')':'';};Annotation.prototype.convertToHsvString=function(hsv){return hsv.length===4?'hsva('+hsv.join()+')':'hsv('+hsv.join()+')';};Annotation.prototype.roundValue=function(value){if(!value){return'';}if(value[0]!=='#'){value='#'+value;}var len=value.length;if(len===4){value+='f';len=5;}if(len===5){var tempValue='';for(var i=1,len_1=value.length;i<len_1;i++){tempValue+=value.charAt(i)+value.charAt(i);}value='#'+tempValue;len=9;}if(len===7){value+='ff';}return value;};Annotation.prototype.hexToRgb=function(hex){if(!hex){return[];}hex=hex.trim();if(hex.length!==9){hex=this.roundValue(hex);}var opacity=Number((parseInt(hex.slice(-2),16)/255).toFixed(2));hex=hex.slice(1,7);var bigInt=parseInt(hex,16);var h=[];h.push(bigInt>>16&255);h.push(bigInt>>8&255);h.push(bigInt&255);h.push(opacity);return h;};Annotation.prototype.rgbToHsv=function(r,g,b,opacity){r/=255;g/=255;b/=255;var max=Math.max(r,g,b);var min=Math.min(r,g,b);var h;var s;var v=max;var d=max-min;s=max===0?0:d/max;if(max===min){h=0;}else{switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}h/=6;}var hsv=[Math.round(h*360),Math.round(s*1000)/10,Math.round(v*1000)/10];if(!sf.base.isNullOrUndefined(opacity)){hsv.push(opacity);}return hsv;};Annotation.prototype.hsvToRgb=function(h,s,v,opacity){var r;var g;var b;var i;var f;var p;var q;var t;s/=100;v/=100;if(s===0){r=g=b=v;return[Math.round(r*255),Math.round(g*255),Math.round(b*255),opacity];}h/=60;i=Math.floor(h);f=h-i;p=v*(1-s);q=v*(1-s*f);t=v*(1-s*(1-f));switch(i){case 0:r=v;g=t;b=p;break;case 1:r=q;g=v;b=p;break;case 2:r=p;g=v;b=t;break;case 3:r=p;g=q;b=v;break;case 4:r=t;g=p;b=v;break;default:r=v;g=p;b=q;}var rgb=[Math.round(r*255),Math.round(g*255),Math.round(b*255)];if(!sf.base.isNullOrUndefined(opacity)){rgb.push(opacity);}return rgb;};Annotation.prototype.rgbToHex=function(rgb){// eslint-disable-next-line max-len
return rgb.length?'#'+this.hex(rgb[0])+this.hex(rgb[1])+this.hex(rgb[2])+(!sf.base.isNullOrUndefined(rgb[3])?rgb[3]!==0?(Math.round(rgb[3]*255)+0x10000).toString(16).substr(-2):'00':''):'';};/**
     * @param dataFormat
     * @private
     */Annotation.prototype.exportAnnotationsAsStream=function(dataFormat){var _this=this;if(this.pdfViewer.annotationModule){var isAnnotations=this.pdfViewer.viewerBase.updateExportItem();if(isAnnotations){return new Promise(function(resolve,reject){_this.pdfViewer.viewerBase.createRequestForExportAnnotations(true,dataFormat,true).then(function(value){resolve(value);});});}}return null;};Annotation.prototype.hex=function(x){if(!sf.base.isNullOrUndefined(x)){return('0'+x.toString(16)).slice(-2);}else{return'0';}};/**
     * @param obj
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.cloneObject=function(obj){return JSON.parse(JSON.stringify(obj));};/**
     * @private
     */Annotation.prototype.destroy=function(){this.destroyPropertiesWindow();this.textMarkupAnnotationModule.clear();};/**
     * @private
     */Annotation.prototype.getModuleName=function(){return'Annotation';};/**
     * Get vertex points properties
     * @private
     */Annotation.prototype.getVertexPointsXY=function(points){var vertexPoints=[];//Converting points model into vertex property
for(var j=0;j<points.length;j++){vertexPoints[j]={X:points[j].x,Y:points[j].y};}return vertexPoints;};/**
     * Method used to add annotations using program.
     *
     * @param annotationType - It describes type of annotation object.
     * @param options -  It describes about the annotation objects and it's property.
     * @param dynamicStampItem - It describe which type of dynamic stamp.
     * @param signStampItem - It describe which type of sign stamp.
     * @param standardBusinessStampItem - It describe which type of standard business stamp.
     * @returns void
     */Annotation.prototype.addAnnotation=function(annotationType,options,dynamicStampItem,signStampItem,standardBusinessStampItem){//Initialize the bounds and pageNumber
var offset={x:1,y:1};var pageNumber=0;if(options){if(options.pageNumber&&options.pageNumber>0)pageNumber=options.pageNumber?options.pageNumber-1:0;}//Initialize the pdf annotation object array
var annotationObject=null;var pdfAnnotation=[];this.pdfViewer.annotation.triggerAnnotationUnselectEvent();//Seperate the annotation type with it's method
if(annotationType=='FreeText'){pdfAnnotation[pageNumber]=this.pdfViewer.annotation.freeTextAnnotationModule.updateAddAnnotationDetails(options,offset);this.pdfViewer.annotation.freeTextAnnotationModule.isAddAnnotationProgramatically=true;}else if(annotationType=='StickyNotes'){pdfAnnotation[pageNumber]=this.pdfViewer.annotation.stickyNotesAnnotationModule.updateAddAnnotationDetails(options,offset);this.pdfViewer.annotation.stickyNotesAnnotationModule.isAddAnnotationProgramatically=true;}else if(annotationType=='Highlight'||annotationType=='Underline'||annotationType=='Strikethrough'){if(annotationType=='Highlight')annotationObject=options;else if(annotationType=='Underline')annotationObject=options;else if(annotationType=='Strikethrough')annotationObject=options;pdfAnnotation[pageNumber]=this.pdfViewer.annotation.textMarkupAnnotationModule.updateAddAnnotationDetails(annotationType,annotationObject);this.pdfViewer.annotation.textMarkupAnnotationModule.isAddAnnotationProgramatically=true;}else if(annotationType==='Line'||annotationType==='Arrow'||annotationType==='Rectangle'||annotationType==='Circle'||annotationType==='Polygon'){if(annotationType=='Line')annotationObject=options;else if(annotationType=='Arrow')annotationObject=options;else if(annotationType=='Rectangle')annotationObject=options;else if(annotationType=='Circle')annotationObject=options;else if(annotationType=='Polygon')annotationObject=options;pdfAnnotation[pageNumber]=this.pdfViewer.annotation.shapeAnnotationModule.updateAddAnnotationDetails(annotationType,annotationObject,offset);this.pdfViewer.annotation.shapeAnnotationModule.isAddAnnotationProgramatically=true;}else if(annotationType==='Distance'||annotationType==='Perimeter'||annotationType==='Area'||annotationType==='Radius'||annotationType==='Volume'){if(annotationType=='Distance')annotationObject=options;else if(annotationType=='Perimeter')annotationObject=options;else if(annotationType=='Area')annotationObject=options;else if(annotationType=='Radius')annotationObject=options;else if(annotationType=='Volume')annotationObject=options;pdfAnnotation[pageNumber]=this.pdfViewer.annotation.measureAnnotationModule.updateAddAnnotationDetails(annotationType,annotationObject,offset);this.pdfViewer.annotation.measureAnnotationModule.isAddAnnotationProgramatically=true;}else if(annotationType==='Stamp'){if(options&&options.customStamps){pdfAnnotation[pageNumber]=this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(options,offset,pageNumber,dynamicStampItem,signStampItem,standardBusinessStampItem);}else{pdfAnnotation[pageNumber]=this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(options,offset,pageNumber,dynamicStampItem,signStampItem,standardBusinessStampItem);}this.pdfViewer.annotation.stampAnnotationModule.isAddAnnotationProgramatically=true;}else if(annotationType==='Ink'){pdfAnnotation[pageNumber]=this.pdfViewer.annotation.inkAnnotationModule.updateAddAnnotationDetails(options,offset,pageNumber);this.pdfViewer.annotation.inkAnnotationModule.isAddAnnotationProgramatically=true;}//Annotation rendering can be done with the import annotation method.
var pdf={pdfAnnotation:pdfAnnotation};this.pdfViewerBase.isAddAnnotation=true;this.pdfViewerBase.importAnnotations(pdf);this.pdfViewerBase.isAddAnnotation=false;};/**
     * @param annotation
     * @private
     */Annotation.prototype.triggerAnnotationAddEvent=function(annotation){var annotationType=annotation.shapeAnnotationType;if(annotationType==='Stamp'||annotationType==='Image'||annotationType==='Path'||annotationType==='FreeText'||annotationType==='StickyNotes'||annotationType==='Ink'){var settings=void 0;if(annotationType==='FreeText'){settings={opacity:annotation.opacity,borderColor:annotation.strokeColor,borderWidth:annotation.thickness,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate,fillColor:annotation.fillColor,fontSize:annotation.fontSize,width:annotation.bounds.width,height:annotation.bounds.height,fontColor:annotation.fontColor,fontFamily:annotation.fontFamily,defaultText:annotation.dynamicText,fontStyle:annotation.font,textAlignment:annotation.textAlign};}else{settings={opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate,data:annotation.data};}// eslint-disable-next-line
var bounds={left:annotation.bounds.x,top:annotation.bounds.y,width:annotation.bounds.width,height:annotation.bounds.height};var type=this.getAnnotationType(annotation.shapeAnnotationType,annotation.measureType);// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationAdd(annotation.pageIndex,annotation.annotName,type,bounds,settings);}else if(annotationType==='SignatureText'||annotationType==='SignatureImage'||annotationType==='HandWrittenSignature'){// eslint-disable-next-line
var bounds={left:annotation.bounds.x,top:annotation.bounds.y,width:annotation.bounds.width,height:annotation.bounds.height};// eslint-disable-next-line max-len
this.pdfViewer.fireSignatureAdd(annotation.pageIndex,annotation.signatureName,annotation.shapeAnnotationType,bounds,annotation.opacity,annotation.strokeColor,annotation.thickness,annotation.data);}else{// eslint-disable-next-line
var setting={opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate};var bounds={left:annotation.bounds.x,top:annotation.bounds.y,width:annotation.bounds.width,height:annotation.bounds.height};var type=this.getAnnotationType(annotation.shapeAnnotationType,annotation.measureType);if(type==='Line'||type==='Arrow'||type==='Distance'||type==='Perimeter'){setting.lineHeadStartStyle=this.getArrowString(annotation.sourceDecoraterShapes);setting.lineHeadEndStyle=this.getArrowString(annotation.taregetDecoraterShapes);setting.borderDashArray=annotation.borderDashArray;}var labelSettings=void 0;if(this.pdfViewer.enableShapeLabel){labelSettings={// eslint-disable-next-line max-len
fontColor:annotation.fontColor,fontSize:annotation.fontSize,fontFamily:annotation.fontFamily,opacity:annotation.labelOpacity,labelContent:annotation.labelContent,fillColor:annotation.labelFillColor};// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationAdd(annotation.pageIndex,annotation.annotName,type,bounds,setting,null,null,null,labelSettings);}else{// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationAdd(annotation.pageIndex,annotation.annotName,type,bounds,setting);}}};/**
     * @private
     */Annotation.prototype.triggerAnnotationUnselectEvent=function(){if(this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations[0]){var annotation=this.pdfViewer.selectedItems.annotations[0];if(annotation.shapeAnnotationType!=='HandWrittenSignature'&&annotation.shapeAnnotationType!=='SignatureText'&&annotation.shapeAnnotationType!=='SignatureImage'&&annotation.shapeAnnotationType!=='Path'){this.pdfViewer.fireAnnotationUnSelect(annotation.annotName,annotation.pageIndex,annotation);this.pdfViewer.clearSelection(annotation.pageIndex);}}};/**
     * @private
    */Annotation.prototype.updateFontFamilyRenderSize=function(currentAnnotation,currentValue){var freeTextAnnotation=this.freeTextAnnotationModule;freeTextAnnotation.inputBoxElement.style.fontFamily=currentValue;freeTextAnnotation.autoFitFreeText();var zoomFactor=this.pdfViewerBase.getZoomFactor();var padding=parseFloat(freeTextAnnotation.inputBoxElement.style.paddingLeft);var inputEleHeight=currentAnnotation.bounds.height*zoomFactor;var characterLength=8;var inputEleWidth=parseFloat(freeTextAnnotation.inputBoxElement.style.width)-characterLength;inputEleWidth=inputEleWidth/zoomFactor;inputEleHeight=inputEleHeight/zoomFactor;var heightDiff=inputEleHeight-currentAnnotation.bounds.height;var y=undefined;if(heightDiff>0){y=currentAnnotation.wrapper.offsetY+heightDiff/2;y=y>0?y:undefined;}else{heightDiff=Math.abs(heightDiff);y=currentAnnotation.wrapper.offsetY-heightDiff/2;y=y>0?y:undefined;}var widthDiff=inputEleWidth-currentAnnotation.bounds.width;var x=undefined;if(widthDiff>0){x=currentAnnotation.wrapper.offsetX+widthDiff/2;x=x>0?x:undefined;}else{widthDiff=Math.abs(widthDiff);x=currentAnnotation.wrapper.offsetX-widthDiff/2;}currentAnnotation.bounds.width=inputEleWidth;currentAnnotation.bounds.height=inputEleHeight;this.pdfViewer.nodePropertyChange(currentAnnotation,{fontFamily:currentValue,bounds:{width:currentAnnotation.bounds.width,height:currentAnnotation.bounds.height,y:y,x:x}});this.pdfViewer.renderSelector(currentAnnotation.pageIndex,this.pdfViewer.annotationSelectorSettings);this.modifyInCollections(currentAnnotation,'bounds');};Annotation.prototype.updateCanvas=function(canvas,pageWidth,pageHeight,pageNumber){var ratio=this.pdfViewerBase.getZoomRatio();canvas.width=pageWidth*ratio;canvas.height=pageHeight*ratio;canvas.style.width=pageWidth+'px';canvas.style.height=pageHeight+'px';canvas.style.position='absolute';canvas.style.zIndex='1';this.pdfViewerBase.applyElementStyles(canvas,pageNumber);};return Annotation;}();var __awaiter$4=undefined&&undefined.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value);}).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var __generator$4=undefined&&undefined.__generator||function(thisArg,body){var _={label:0,sent:function sent(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break;}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}if(t[2])_.ops.pop();_.trys.pop();continue;}op=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}};/**
 * The `LinkAnnotation` module is used to handle link annotation actions of PDF viewer.
 *
 * @hidden
 */var LinkAnnotation=/** @class */function(){/**
     * @param pdfViewer
     * @param viewerBase
     * @param pdfViewer
     * @param viewerBase
     * @private
     */function LinkAnnotation(pdfViewer,viewerBase){this.pdfViewer=pdfViewer;this.pdfViewerBase=viewerBase;}/**
     * @param data
     * @param pageIndex
     * @param data
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
LinkAnnotation.prototype.renderHyperlinkContent=function(data,pageIndex){if(this.pdfViewer.enableHyperlink){var hyperlinks=data.hyperlinks;var hyperlinksBounds=data.hyperlinkBounds;this.linkAnnotation=data.linkAnnotation;this.linkPage=data.linkPage;this.annotationY=data.annotationLocation;if(hyperlinks&&hyperlinks.length>0&&hyperlinksBounds.length>0){this.renderWebLink(hyperlinks,hyperlinksBounds,pageIndex);}if(this.linkAnnotation&&this.linkAnnotation.length>0&&this.linkPage.length>0){this.renderDocumentLink(this.linkAnnotation,this.linkPage,this.annotationY,pageIndex);}}};/**
     * @private
     */LinkAnnotation.prototype.disableHyperlinkNavigationUnderObjects=function(eventTarget,evt,element){var objects=findObjectsUnderMouse(element,element.pdfViewer,evt);if(objects.length>0){if(evt.target.classList.contains('e-pv-hyperlink')){eventTarget.style.cursor='move';eventTarget.style.pointerEvents='none';eventTarget.title='';}}else{var hyperlinkObjects=document.getElementsByClassName('e-pv-hyperlink');if(hyperlinkObjects&&hyperlinkObjects.length>0){for(var i=0;i<hyperlinkObjects.length;i++){if(hyperlinkObjects[i].style.pointerEvents==='none')hyperlinkObjects[i].style.pointerEvents='all';if(!hyperlinkObjects[i].title)hyperlinkObjects[i].title=hyperlinkObjects[i].href;}}}};LinkAnnotation.prototype.renderWebLink=function(hyperlinks,hyperlinksBounds,pageIndex){var _this=this;var proxy=this;var isHyperlinkClicked=false;var _loop_1=function _loop_1(i){var aTag=sf.base.createElement('a',{id:'weblinkdiv_'+i});// eslint-disable-next-line
var rect=hyperlinksBounds[i];aTag=this_1.setHyperlinkProperties(aTag,rect,pageIndex);aTag.title=hyperlinks[i];if(hyperlinks[i]&&hyperlinks[i].split('http').length===1){var hyperlinkText="http://"+hyperlinks[i];aTag.setAttribute('href',hyperlinkText);}else{aTag.setAttribute('href',hyperlinks[i]);}if(this_1.pdfViewer.hyperlinkOpenState==='CurrentTab'){aTag.target='_self';aTag.onclick=function(e){return __awaiter$4(_this,void 0,void 0,function(){var isCancel;return __generator$4(this,function(_a){switch(_a.label){case 0:if(!!isHyperlinkClicked)return[3/*break*/,4];e.preventDefault();if(!(proxy.pdfViewerBase.tool instanceof LineTool||proxy.pdfViewerBase.tool instanceof PolygonDrawingTool))return[3/*break*/,1];return[2/*return*/,false];case 1:return[4/*yield*/,proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i],aTag)];case 2:isCancel=_a.sent();if(isCancel){isHyperlinkClicked=true;aTag.click();}return[2/*return*/,isCancel];case 3:return[3/*break*/,5];case 4:isHyperlinkClicked=false;return[2/*return*/,true];case 5:return[2/*return*/];}});});};aTag.onmouseover=function(){proxy.triggerHyperlinkEvent(aTag);};}else if(this_1.pdfViewer.hyperlinkOpenState==='NewTab'){aTag.target='_blank';aTag.onclick=function(e){return __awaiter$4(_this,void 0,void 0,function(){var isCancel;return __generator$4(this,function(_a){switch(_a.label){case 0:if(!!isHyperlinkClicked)return[3/*break*/,4];e.preventDefault();if(!(proxy.pdfViewerBase.tool instanceof LineTool||proxy.pdfViewerBase.tool instanceof PolygonDrawingTool))return[3/*break*/,1];return[2/*return*/,false];case 1:return[4/*yield*/,proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i],aTag)];case 2:isCancel=_a.sent();if(isCancel){isHyperlinkClicked=true;aTag.click();}return[2/*return*/,isCancel];case 3:return[3/*break*/,5];case 4:isHyperlinkClicked=false;return[2/*return*/,true];case 5:return[2/*return*/];}});});};aTag.onmouseover=function(){proxy.triggerHyperlinkEvent(aTag);};}else if(this_1.pdfViewer.hyperlinkOpenState==='NewWindow'){aTag.onclick=function(e){return __awaiter$4(_this,void 0,void 0,function(){var isCancel;return __generator$4(this,function(_a){switch(_a.label){case 0:e.preventDefault();if(!(proxy.pdfViewerBase.tool instanceof LineTool||proxy.pdfViewerBase.tool instanceof PolygonDrawingTool))return[3/*break*/,1];return[2/*return*/,false];case 1:return[4/*yield*/,proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i],aTag)];case 2:isCancel=_a.sent();if(isCancel){window.open(aTag.href,'_blank','scrollbars=yes,resizable=yes');}return[2/*return*/,false];}});});};aTag.onmouseover=function(){proxy.triggerHyperlinkEvent(aTag);};}var pageDiv=document.getElementById(this_1.pdfViewer.dataId+'_pageDiv_'+pageIndex);pageDiv.appendChild(aTag);};var this_1=this;for(var i=0;i<hyperlinks.length;i++){_loop_1(i);}};LinkAnnotation.prototype.triggerHyperlinkEvent=function(aTag){if(this.pdfViewerBase.tool instanceof LineTool||this.pdfViewerBase.tool instanceof PolygonDrawingTool){return false;}else{this.pdfViewer.fireHyperlinkHover(aTag);return true;}};LinkAnnotation.prototype.renderDocumentLink=function(linkAnnotation,linkPage,annotationY,pageIndex){var proxy=this;var _loop_2=function _loop_2(i){var aTag=sf.base.createElement('a',{id:'linkdiv_'+i});// eslint-disable-next-line
var rect=linkAnnotation[i];aTag=this_2.setHyperlinkProperties(aTag,rect,pageIndex);aTag.setAttribute('href','javascript:void(0)');if(linkPage[i]!==undefined&&linkPage[i]>=0){var destPageHeight=this_2.pdfViewerBase.pageSize[pageIndex].height;var destLocation=void 0;var scrollValue=void 0;var pageSize=this_2.pdfViewerBase.pageSize[linkPage[i]];if(pageSize){if(annotationY.length!==0){destLocation=annotationY[i];// eslint-disable-next-line max-len
scrollValue=pageSize.top*this_2.pdfViewerBase.getZoomFactor()+(destPageHeight-destLocation)*this_2.pdfViewerBase.getZoomFactor();}else{// eslint-disable-next-line max-len
scrollValue=pageSize.top*this_2.pdfViewerBase.getZoomFactor();}}if(scrollValue!==undefined){aTag.name=scrollValue.toString();aTag.onclick=function(){if(proxy.pdfViewerBase.tool instanceof LineTool||proxy.pdfViewerBase.tool instanceof PolygonDrawingTool){return false;}else{// eslint-disable-next-line radix
proxy.pdfViewerBase.viewerContainer.scrollTop=parseInt(aTag.name);return false;}};}var pageDiv=document.getElementById(this_2.pdfViewer.dataId+'_pageDiv_'+pageIndex);pageDiv.appendChild(aTag);}};var this_2=this;for(var i=0;i<linkAnnotation.length;i++){_loop_2(i);}};// eslint-disable-next-line
LinkAnnotation.prototype.setHyperlinkProperties=function(aTag,rect,pageIndex){aTag.className='e-pv-hyperlink';aTag.style.background='transparent';aTag.style.position='absolute';aTag.style.left=rect.Left*this.pdfViewerBase.getZoomFactor()+'px';aTag.style.top=rect.Top*this.pdfViewerBase.getZoomFactor()+'px';aTag.style.width=rect.Width*this.pdfViewerBase.getZoomFactor()+'px';if(rect.Height<0){aTag.style.height=-rect.Height*this.pdfViewerBase.getZoomFactor()+'px';aTag.style.top=(rect.Top+rect.Height)*this.pdfViewerBase.getZoomFactor()+'px';}else{aTag.style.height=(rect.Height<0?-rect.Height:rect.Height)*this.pdfViewerBase.getZoomFactor()+'px';}aTag.style.color='transparent';this.pdfViewerBase.applyElementStyles(aTag,pageIndex);return aTag;};/**
     * @param pageNumber
     * @param isAdd
     * @param pageNumber
     * @param isAdd
     * @private
     */LinkAnnotation.prototype.modifyZindexForTextSelection=function(pageNumber,isAdd){if(this.pdfViewerBase.pageCount>0){var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+pageNumber);if(pageDiv){var pageChildNodes=pageDiv.childNodes;for(var i=0;i<pageChildNodes.length;i++){var childElement=pageChildNodes[i];if(childElement.tagName==='A'){if(isAdd){childElement.classList.add('e-pv-onselection');}else{childElement.classList.remove('e-pv-onselection');}}}}}};/**
     * @param element
     * @param isAdd
     * @param element
     * @param isAdd
     * @private
     */LinkAnnotation.prototype.modifyZindexForHyperlink=function(element,isAdd){if(isAdd){element.classList.add('e-pv-onselection');}else{element.classList.remove('e-pv-onselection');}};/**
     * @private
     */LinkAnnotation.prototype.destroy=function(){for(var i=0;i<this.pdfViewerBase.pageCount-1;i++){var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+i);if(pageDiv){// eslint-disable-next-line max-len
var aElement=pageDiv.getElementsByTagName('a');if(aElement.length!==0){for(var index=aElement.length-1;index>=0;index--){aElement[index].parentNode.removeChild(aElement[index]);}}}}};/**
     * @private
     */LinkAnnotation.prototype.getModuleName=function(){return'LinkAnnotation';};return LinkAnnotation;}();/**
 * The `TextMarkupAnnotation` module is used to handle text markup annotation actions of PDF viewer.
 *
 * @hidden
 */var TextMarkupAnnotation=/** @class */function(){/**
     * @param pdfViewer
     * @param viewerBase
     * @private
     */function TextMarkupAnnotation(pdfViewer,viewerBase){var _this=this;/**
         * @private
         */this.currentTextMarkupAddMode='';/**
         * @private
         */this.selectTextMarkupCurrentPage=null;/**
         * @private
         */this.currentTextMarkupAnnotation=null;/**
         * @private
         */this.isAddAnnotationProgramatically=false;this.currentAnnotationIndex=null;this.isAnnotationSelect=false;/**
         * @private
         */this.isDropletClicked=false;/**
         * @private
         */this.isRightDropletClicked=false;/**
         * @private
         */this.isLeftDropletClicked=false;/**
         * @private
         */this.isSelectionMaintained=false;this.isExtended=false;this.isNewAnnotation=false;this.selectedTextMarkup=null;this.multiPageCollection=[];this.triggerAddEvent=false;/**
         * @private
         */this.isSelectedAnnotation=false;this.dropletHeight=20;/**
         * @private
         */this.annotationClickPosition={};// eslint-disable-next-line
this.maintainSelection=function(event){_this.isDropletClicked=true;_this.pdfViewer.textSelectionModule.initiateSelectionByTouch();_this.isExtended=true;_this.pdfViewer.textSelectionModule.selectionRangeArray=[];};// eslint-disable-next-line
this.selectionEnd=function(event){if(_this.isDropletClicked){_this.isDropletClicked=false;}};// eslint-disable-next-line
this.annotationLeftMove=function(event){if(_this.isDropletClicked){_this.isLeftDropletClicked=true;}};// eslint-disable-next-line
this.annotationRightMove=function(event){if(_this.isDropletClicked){_this.isRightDropletClicked=true;}};this.pdfViewer=pdfViewer;this.pdfViewerBase=viewerBase;}/**
     * @private
     */TextMarkupAnnotation.prototype.createAnnotationSelectElement=function(){// eslint-disable-next-line max-len
this.dropDivAnnotationLeft=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_droplet_left',className:'e-pv-drop'});this.dropDivAnnotationLeft.style.borderRight='2px solid';// eslint-disable-next-line max-len
this.dropDivAnnotationRight=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_droplet_right',className:'e-pv-drop'});this.dropDivAnnotationRight.style.borderLeft='2px solid';this.dropElementLeft=sf.base.createElement('div',{className:'e-pv-droplet',id:this.pdfViewer.dataId+'_dropletspan_left'});this.dropElementLeft.style.transform='rotate(0deg)';this.dropDivAnnotationLeft.appendChild(this.dropElementLeft);this.dropElementRight=sf.base.createElement('div',{className:'e-pv-droplet',id:this.pdfViewer.dataId+'_dropletspan_right'});this.dropElementRight.style.transform='rotate(-90deg)';this.dropDivAnnotationRight.appendChild(this.dropElementRight);this.pdfViewerBase.pageContainer.appendChild(this.dropDivAnnotationLeft);this.pdfViewerBase.pageContainer.appendChild(this.dropDivAnnotationRight);this.dropElementLeft.style.top='20px';this.dropElementRight.style.top='20px';this.dropElementRight.style.left='-8px';this.dropElementLeft.style.left='-8px';this.dropDivAnnotationLeft.style.display='none';this.dropDivAnnotationRight.style.display='none';this.dropDivAnnotationLeft.addEventListener('mousedown',this.maintainSelection);this.dropDivAnnotationLeft.addEventListener('mousemove',this.annotationLeftMove);this.dropDivAnnotationLeft.addEventListener('mouseup',this.selectionEnd);this.dropDivAnnotationRight.addEventListener('mousedown',this.maintainSelection);this.dropDivAnnotationRight.addEventListener('mousemove',this.annotationRightMove);this.dropDivAnnotationRight.addEventListener('mouseup',this.selectionEnd);};/**
     * @param target
     * @param x
     * @param y
     * @param target
     * @param x
     * @param y
     * @param target
     * @param x
     * @param y
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.textSelect=function(target,x,y){if(this.isLeftDropletClicked){var leftElement=this.dropDivAnnotationRight.getBoundingClientRect();var rightElement=this.dropDivAnnotationLeft.getBoundingClientRect();var clientX=x;var clientY=y;if(target.classList.contains('e-pv-text')){if(rightElement.top-25>leftElement.top){this.pdfViewer.textSelectionModule.textSelectionOnDrag(target,clientX,clientY,true);}else{this.pdfViewer.textSelectionModule.textSelectionOnDrag(target,clientX,clientY,false);}this.updateLeftposition(clientX,clientY);}}else if(this.isRightDropletClicked){var leftElement=this.dropDivAnnotationLeft.getBoundingClientRect();var clientX=x;var clientY=y;if(target.classList.contains('e-pv-text')){if(clientY>=leftElement.top){this.pdfViewer.textSelectionModule.textSelectionOnDrag(target,clientX,clientY,true);}else{this.pdfViewer.textSelectionModule.textSelectionOnDrag(target,clientX,clientY,false);}this.updatePosition(clientX,clientY);}}};/**
     * @param hide
     * @private
     */TextMarkupAnnotation.prototype.showHideDropletDiv=function(hide){var type=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode;var isEnableResizer=this.isEnableTextMarkupResizer(type);if(isEnableResizer&&this.dropDivAnnotationLeft&&this.dropDivAnnotationRight){if(hide){this.dropDivAnnotationLeft.style.display='none';this.dropDivAnnotationRight.style.display='none';}else{this.dropDivAnnotationLeft.style.display='';this.dropDivAnnotationRight.style.display='';this.updateDropletStyles(type);}}};/**
     * @param type
     * @private
     */TextMarkupAnnotation.prototype.isEnableTextMarkupResizer=function(type){var isEnableResizer=false;if(type){if(type==='Highlight'&&this.pdfViewer.highlightSettings.enableTextMarkupResizer){isEnableResizer=true;}else if(type==='Underline'&&this.pdfViewer.underlineSettings.enableTextMarkupResizer){isEnableResizer=true;}else if(type==='Strikethrough'&&this.pdfViewer.strikethroughSettings.enableTextMarkupResizer){isEnableResizer=true;}else if(this.pdfViewer.enableTextMarkupResizer){isEnableResizer=true;}}else{if(this.pdfViewer.enableTextMarkupResizer){isEnableResizer=true;}else if(this.pdfViewer.highlightSettings.enableTextMarkupResizer){isEnableResizer=true;}else if(this.pdfViewer.underlineSettings.enableTextMarkupResizer){isEnableResizer=true;}else if(this.pdfViewer.strikethroughSettings.enableTextMarkupResizer){isEnableResizer=true;}}return isEnableResizer;};TextMarkupAnnotation.prototype.updateDropletStyles=function(type){if(this.isEnableTextMarkupResizer(type)&&this.dropDivAnnotationLeft&&this.dropDivAnnotationLeft.offsetWidth>0){this.dropDivAnnotationLeft.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropDivAnnotationRight.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropElementLeft.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropElementRight.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropDivAnnotationLeft.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropDivAnnotationRight.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropElementLeft.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropElementRight.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropElementLeft.style.top=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropElementRight.style.top=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';}};TextMarkupAnnotation.prototype.updateAnnotationBounds=function(){this.isSelectionMaintained=false;// eslint-disable-next-line
var annotation=this.currentTextMarkupAnnotation;if(annotation&&annotation.isMultiSelect){this.showHideDropletDiv(true);this.updateMultiAnnotBounds(annotation);}else if(annotation&&annotation.bounds){var canProceed=true;if(document.activeElement&&document.activeElement.tagName=="INPUT"){canProceed=false;}if(canProceed){this.retreieveSelection(annotation,null);this.pdfViewer.textSelectionModule.maintainSelection(this.selectTextMarkupCurrentPage,false);this.isSelectionMaintained=true;window.getSelection().removeAllRanges();}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.updateMultiAnnotBounds=function(annotation){if(!annotation.annotpageNumbers){var annotationList=this.getAnnotations(annotation.pageNumber,null);if(annotationList){for(var z=0;z<annotationList.length;z++){if(annotationList[z].annotName===annotation.annotName){annotation=annotationList[z];break;}}}}var lowestNumber=annotation.annotpageNumbers[0];var highestNumber=annotation.annotpageNumbers[0];for(var p=0;p<annotation.annotpageNumbers.length;p++){var currentPage=annotation.annotpageNumbers[p];if(currentPage>=highestNumber){highestNumber=currentPage;}if(currentPage<=lowestNumber){lowestNumber=currentPage;}}for(var k=lowestNumber;k<=highestNumber;k++){var annotationList=this.getAnnotations(k,null);if(annotationList){for(var j=0;j<annotation.annotNameCollection.length;j++){// eslint-disable-next-line
var currentAnnot=annotation.annotNameCollection[j];for(var z=0;z<annotationList.length;z++){if(annotationList[z].annotName===currentAnnot){// eslint-disable-next-line
var newAnnotation=annotationList[z];this.retreieveSelection(newAnnotation,null);this.pdfViewer.textSelectionModule.maintainSelection(newAnnotation.pageNumber,false);}}}}}this.isSelectionMaintained=true;window.getSelection().removeAllRanges();};// eslint-disable-next-line
TextMarkupAnnotation.prototype.retreieveSelection=function(annotation,element){for(var k=0;k<annotation.bounds.length;k++){// eslint-disable-next-line
var bound=annotation.bounds[k];var x=(bound.left?bound.left:bound.Left)*this.pdfViewerBase.getZoomFactor();var y=(bound.top?bound.top:bound.Top)*this.pdfViewerBase.getZoomFactor();var width=(bound.width?bound.width:bound.Width)*this.pdfViewerBase.getZoomFactor();var height=bound.height?bound.height:bound.Height;// eslint-disable-next-line
var textLayer=this.pdfViewerBase.getElement('_textLayer_'+annotation.pageNumber);if(textLayer){// eslint-disable-next-line
var textDivs=textLayer.childNodes;for(var n=0;n<textDivs.length;n++){if(textDivs[n]){// eslint-disable-next-line
var rangebounds=textDivs[n].getBoundingClientRect();var top_1=this.getClientValueTop(rangebounds.top,annotation.pageNumber);// eslint-disable-next-line max-len
var currentLeft=rangebounds.left-this.pdfViewerBase.getElement('_pageDiv_'+annotation.pageNumber).getBoundingClientRect().left;var totalLeft=currentLeft+rangebounds.width;// eslint-disable-next-line
var textDiVLeft=parseInt(textDivs[n].style.left);// eslint-disable-next-line
var currentTop=parseInt(textDivs[n].style.top);var isLeftBounds=this.pdfViewer.textSelectionModule.checkLeftBounds(currentLeft,textDiVLeft,totalLeft,x);var isTopBounds=this.pdfViewer.textSelectionModule.checkTopBounds(top_1,currentTop,y);if(isLeftBounds&&isTopBounds){element=textDivs[n];break;}}}if(element!=null){// eslint-disable-next-line
var boundingRect=this.pdfViewerBase.getElement('_textLayer_'+annotation.pageNumber).getBoundingClientRect();this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(element,x+boundingRect.left,y+boundingRect.top,false);if(annotation.bounds.length-1===k){// eslint-disable-next-line max-len
this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(element,x+boundingRect.left+width,y+boundingRect.top,false);}}}}};/**
     * @param x
     * @param y
     * @param isSelected
     * @private
     */TextMarkupAnnotation.prototype.updatePosition=function(x,y,isSelected){this.showHideDropletDiv(false);var pageTopValue=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top;var topClientValue=this.getClientValueTop(y,this.pdfViewerBase.currentPageNumber-1);// eslint-disable-next-line
var rightDivElement=document.getElementById(this.pdfViewer.dataId+'_droplet_right');if(isSelected){// eslint-disable-next-line max-len
rightDivElement.style.top=topClientValue*this.pdfViewerBase.getZoomFactor()+pageTopValue*this.pdfViewerBase.getZoomFactor()+'px';}else{// eslint-disable-next-line max-len
rightDivElement.style.top=topClientValue+pageTopValue*this.pdfViewerBase.getZoomFactor()+'px';}// eslint-disable-next-line max-len
rightDivElement.style.left=x+this.pdfViewerBase.viewerContainer.scrollLeft-this.pdfViewerBase.viewerContainer.getBoundingClientRect().left+'px';};/**
     * @param x
     * @param y
     * @param isSelected
     * @param x
     * @param y
     * @param isSelected
     * @private
     */TextMarkupAnnotation.prototype.updateLeftposition=function(x,y,isSelected){this.showHideDropletDiv(false);var pageTopValue=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top;var topClientValue=this.getClientValueTop(y,this.pdfViewerBase.currentPageNumber-1);// eslint-disable-next-line
var leftDivElement=document.getElementById(this.pdfViewer.dataId+'_droplet_left');leftDivElement.style.display='';if(isSelected){// eslint-disable-next-line max-len
leftDivElement.style.top=topClientValue*this.pdfViewerBase.getZoomFactor()+pageTopValue*this.pdfViewerBase.getZoomFactor()+'px';}else{// eslint-disable-next-line max-len
leftDivElement.style.top=topClientValue+pageTopValue*this.pdfViewerBase.getZoomFactor()+'px';}// eslint-disable-next-line max-len
leftDivElement.style.left=x+this.pdfViewerBase.viewerContainer.scrollLeft-this.pdfViewerBase.viewerContainer.getBoundingClientRect().left-this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';};TextMarkupAnnotation.prototype.getClientValueTop=function(clientValue,pageNumber){if(this.pdfViewerBase.getElement('_pageDiv_'+pageNumber)){// eslint-disable-next-line max-len
return clientValue-this.pdfViewerBase.getElement('_pageDiv_'+pageNumber).getBoundingClientRect().top;}else{return clientValue;}};/**
     * @param textMarkupAnnotations
     * @param pageNumber
     * @param isImportTextMarkup
     * @param textMarkupAnnotations
     * @param pageNumber
     * @param isImportTextMarkup
     * @param textMarkupAnnotations
     * @param pageNumber
     * @param isImportTextMarkup
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.renderTextMarkupAnnotationsInPage=function(textMarkupAnnotations,pageNumber,isImportTextMarkup){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(isImportTextMarkup){this.renderTextMarkupAnnotations(null,pageNumber,canvas,this.pdfViewerBase.getZoomFactor());this.renderTextMarkupAnnotations(textMarkupAnnotations,pageNumber,canvas,this.pdfViewerBase.getZoomFactor(),true);}else{this.renderTextMarkupAnnotations(textMarkupAnnotations,pageNumber,canvas,this.pdfViewerBase.getZoomFactor());}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.renderTextMarkupAnnotations=function(textMarkupAnnotations,pageNumber,canvas,factor,isImportAction){if(canvas){var context=canvas.getContext('2d');context.setTransform(1,0,0,1,0,0);context.setLineDash([]);// eslint-disable-next-line
var annotations=void 0;if(!isImportAction){annotations=this.getAnnotations(pageNumber,textMarkupAnnotations);}else{annotations=textMarkupAnnotations;}if(annotations){for(var i=0;i<annotations.length;i++){// eslint-disable-next-line
var annotation=annotations[i];var annotationObject=null;var isAnnotationRotated=void 0;if(annotation.TextMarkupAnnotationType){if(isImportAction&&!annotation.isAlreadyAdded){if(this.pdfViewerBase.isJsonImported){var newArray=[];for(var i_1=0;i_1<annotation.Bounds.length;i_1++){// eslint-disable-next-line
annotation.Bounds[i_1]=this.pdfViewerBase.importJsonForRotatedDocuments(annotation.Rotate,pageNumber,annotation.Bounds[i_1],annotation.AnnotationRotation);annotation.Bounds[i_1].left=annotation.Bounds[i_1].X;annotation.Bounds[i_1].top=annotation.Bounds[i_1].Y;newArray.push(annotation.Bounds[i_1]);}annotation.Bounds=newArray;isAnnotationRotated=this.pdfViewerBase.isPageRotated;}}// eslint-disable-next-line max-len
annotation.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(annotation,pageNumber,annotation.AnnotType);if(!annotation.Author){// eslint-disable-next-line max-len
annotation.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor('textMarkup',annotation.TextMarkupAnnotationType);}if(!annotation.Subject){annotation.Subject=annotation.TextMarkupAnnotationType;}if(annotation.AnnotationSettings&&annotation.AnnotationSettings.isLock){annotation.AnnotationSettings={isLock:annotation.AnnotationSettings.isLock};}else{annotation.AnnotationSettings=this.getAnnotationSettings(annotation.TextMarkupAnnotationType);}var isPrint_1=true;if(annotation.annotationAddMode==='Imported Annotation'){isPrint_1=annotation.IsPrint;}else{isPrint_1=this.getIsPrintValue(annotation.TextMarkupAnnotationType);}// eslint-disable-next-line max-len
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);// eslint-disable-next-line max-len
annotationObject={textMarkupAnnotationType:annotation.TextMarkupAnnotationType,color:annotation.Color,allowedInteractions:annotation.allowedInteractions,opacity:annotation.Opacity,bounds:annotation.Bounds,author:annotation.Author,subject:annotation.Subject,modifiedDate:annotation.ModifiedDate,note:annotation.Note,rect:annotation.Rect,// eslint-disable-next-line max-len
annotName:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},shapeAnnotationType:'textMarkup',pageNumber:pageNumber,textMarkupContent:annotation.TextMarkupContent,textMarkupStartIndex:0,textMarkupEndIndex:0,annotationSelectorSettings:this.getSettings(annotation),// eslint-disable-next-line max-len
customData:this.pdfViewer.annotation.getCustomData(annotation),annotationAddMode:annotation.annotationAddMode,annotationSettings:annotation.AnnotationSettings,isPrint:isPrint_1,isCommentLock:annotation.IsCommentLock,isAnnotationRotated:isAnnotationRotated,annotationRotation:annotation.AnnotationRotation};if(annotation.IsMultiSelect){annotationObject.annotNameCollection=annotation.AnnotNameCollection;annotationObject.annotpageNumbers=annotation.AnnotpageNumbers;annotationObject.isMultiSelect=annotation.IsMultiSelect;}if(annotation.textMarkupContent&&annotation.textMarkupContent!==''){annotationObject.textMarkupContent=annotation.textMarkupContent;annotationObject.textMarkupStartIndex=annotation.textMarkupStartIndex;annotationObject.textMarkupEndIndex=annotation.textMarkupEndIndex;}this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_textMarkup');if(this.isAddAnnotationProgramatically){// eslint-disable-next-line
var settings={opacity:annotationObject.opacity,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate,// eslint-disable-next-line
width:annotationObject.bounds.width,height:annotationObject.bounds.height};this.pdfViewer.fireAnnotationAdd(annotationObject.pageNumber,annotationObject.annotName,annotation.TextMarkupAnnotationType,annotationObject.bounds,settings);}}// eslint-disable-next-line max-len
var type=annotation.TextMarkupAnnotationType?annotation.TextMarkupAnnotationType:annotation.textMarkupAnnotationType;// eslint-disable-next-line
var annotBounds=annotation.Bounds?annotation.Bounds:annotation.bounds;var opacity=annotation.Opacity?annotation.Opacity:annotation.opacity;var color=annotation.Color?annotation.Color:annotation.color;var annotationRotation=annotation.AnnotationRotation?annotation.AnnotationRotation:annotation.annotationRotation;var isPrint=true;if(annotation.TextMarkupAnnotationType){isPrint=annotation.IsPrint;}if(annotation.textMarkupAnnotationType){isPrint=annotation.isPrint;}switch(type){case'Highlight':this.renderHighlightAnnotation(annotBounds,opacity,color,context,factor,isPrint,pageNumber);break;case'Strikethrough':this.renderStrikeoutAnnotation(annotBounds,opacity,color,context,factor,pageNumber,isPrint,annotationRotation);break;case'Underline':this.renderUnderlineAnnotation(annotBounds,opacity,color,context,factor,pageNumber,isPrint,annotationRotation);break;}}}var isMaintainedSelector=false;if(this.currentTextMarkupAnnotation&&this.currentTextMarkupAnnotation.annotpageNumbers){for(var m=0;m<this.currentTextMarkupAnnotation.annotpageNumbers.length;m++){if(pageNumber===this.currentTextMarkupAnnotation.annotpageNumbers[m]){isMaintainedSelector=true;this.isAnnotationSelect=false;break;}}}if(pageNumber===this.selectTextMarkupCurrentPage||isMaintainedSelector){if(!this.isAnnotationSelect){this.maintainAnnotationSelection();}else{this.isAnnotationSelect=false;}}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.getSettings=function(annotation){var selector;if(annotation.AnnotationSelectorSettings){selector=annotation.AnnotationSelectorSettings;}else{selector=this.getSelector(annotation.TextMarkupAnnotationType);}return selector;};/**
     * @param type
     * @private
     */TextMarkupAnnotation.prototype.drawTextMarkupAnnotations=function(type){this.isTextMarkupAnnotationMode=true;this.currentTextMarkupAddMode=type;var isCleared=true;this.multiPageCollection=[];var selectionObject=this.pdfViewer.textSelectionModule?this.pdfViewer.textSelectionModule.selectionRangeArray:[];if(selectionObject.length>0&&!this.isSelectionMaintained){this.convertSelectionToTextMarkup(type,selectionObject,this.pdfViewerBase.getZoomFactor());}var selection=window.getSelection();var targetElement;if(selection&&selection.anchorNode){targetElement=selection.anchorNode.parentElement;}if(this.isEnableTextMarkupResizer(type)&&this.isExtended&&window.getSelection().toString()){var pageBounds=this.getDrawnBounds();if(pageBounds[0]&&pageBounds[0].bounds){// eslint-disable-next-line
var currentAnnot=this.currentTextMarkupAnnotation;for(var k=0;k<pageBounds.length;k++){if(currentAnnot&&currentAnnot.pageNumber===pageBounds[k].pageIndex){this.currentTextMarkupAnnotation=currentAnnot;this.selectTextMarkupCurrentPage=pageBounds[k].pageIndex;this.updateTextMarkupAnnotationBounds(pageBounds,k);}else{if(currentAnnot){if(type===''){type=currentAnnot.textMarkupAnnotationType;}}if(!currentAnnot.isMultiSelect){var isMultiSelect=false;if(this.isMultiAnnotation(type)){this.multiPageCollection.push(currentAnnot);isMultiSelect=true;}// eslint-disable-next-line max-len
this.drawTextMarkups(type,pageBounds[k].bounds,pageBounds[k].pageIndex,pageBounds[k].rect,this.pdfViewerBase.getZoomFactor(),pageBounds[k].textContent,pageBounds[k].startIndex,pageBounds[k].endIndex,isMultiSelect,targetElement);}else{if(currentAnnot.isMultiSelect&&currentAnnot.annotNameCollection){this.modifyCurrentAnnotation(currentAnnot,pageBounds,k);}}}}}}else if(window.getSelection().toString()){var pageBounds=this.getDrawnBounds();var isMultiSelect=this.isMultiPageAnnotations(pageBounds,type);if(pageBounds.length>0){for(var i=0;i<pageBounds.length;i++){if(type===''){isCleared=false;}// eslint-disable-next-line max-len
this.drawTextMarkups(type,pageBounds[i].bounds,pageBounds[i].pageIndex,pageBounds[i].rect,this.pdfViewerBase.getZoomFactor(),pageBounds[i].textContent,pageBounds[i].startIndex,pageBounds[i].endIndex,isMultiSelect,targetElement);}}}if(this.multiPageCollection){for(var j=0;j<this.multiPageCollection.length;j++){this.updateAnnotationNames(this.multiPageCollection[j],this.multiPageCollection[j].pageNumber);}}this.isExtended=false;this.isSelectionMaintained=false;// this.pdfViewerBase.annotationHelper.redoCollection = [];
if(isCleared&&this.pdfViewer.textSelectionModule){this.pdfViewer.textSelectionModule.clearTextSelection();}if(this.isEnableTextMarkupResizer(type)){this.updateAnnotationBounds();}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.isMultiPageAnnotations=function(pageBounds,type){var isMultiSelect=false;for(var n=0;n<pageBounds.length;n++){if(pageBounds[n].pageIndex!==pageBounds[0].pageIndex&&this.isMultiAnnotation(type)){isMultiSelect=true;break;}}return isMultiSelect;};TextMarkupAnnotation.prototype.isMultiAnnotation=function(type){var isSelection=false;if(type==='Highlight'&&this.pdfViewer.highlightSettings.enableMultiPageAnnotation){isSelection=true;}else if(type==='Underline'&&this.pdfViewer.underlineSettings.enableMultiPageAnnotation){isSelection=true;}else if(type==='Strikethrough'&&this.pdfViewer.strikethroughSettings.enableMultiPageAnnotation){isSelection=true;}else if(this.pdfViewer.enableMultiPageAnnotation){isSelection=true;}return isSelection;};// eslint-disable-next-line
TextMarkupAnnotation.prototype.modifyCurrentAnnotation=function(currentAnnot,pageBounds,index){for(var c=0;c<currentAnnot.annotNameCollection.length;c++){// eslint-disable-next-line
var currentAnnots=currentAnnot.annotNameCollection[c];var annotationList=this.getAnnotations(pageBounds[index].pageIndex,null);if(annotationList){for(var z=0;z<annotationList.length;z++){if(annotationList[z].annotName===currentAnnots){this.currentTextMarkupAnnotation=annotationList[z];this.selectTextMarkupCurrentPage=pageBounds[index].pageIndex;this.updateTextMarkupAnnotationBounds(pageBounds,index);break;}}}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.drawAnnotationSelector=function(newAnnotation,annotation,newcanvas){var newBounds=[];var x=0;var y=0;var width=0;var height=0;var currentTop=0;var nextTop=0;var currentLeft=0;var nextLeft=0;var currentRotation=0;var nextRotation=0;for(var i=0;i<newAnnotation.bounds.length;i++){// eslint-disable-next-line
currentTop=newAnnotation.bounds[i].top?newAnnotation.bounds[i].top:newAnnotation.bounds[i].Top;nextTop=!sf.base.isNullOrUndefined(newAnnotation.bounds[i+1])?newAnnotation.bounds[i+1].top?newAnnotation.bounds[i+1].top:newAnnotation.bounds[i+1].Top:0;currentLeft=newAnnotation.bounds[i].left?newAnnotation.bounds[i].left:newAnnotation.bounds[i].Left;nextLeft=!sf.base.isNullOrUndefined(newAnnotation.bounds[i+1])?newAnnotation.bounds[i+1].left?newAnnotation.bounds[i+1].left:newAnnotation.bounds[i+1].Left:0;currentRotation=newAnnotation.bounds[i].rotation;nextRotation=!sf.base.isNullOrUndefined(newAnnotation.bounds[i+1])?newAnnotation.bounds[i+1].rotation:0;var rotation_0_180_exists=currentRotation==0||currentRotation==180;if(newAnnotation.bounds.length>1&&i<newAnnotation.bounds.length-1&&currentTop===nextTop&&rotation_0_180_exists||currentLeft===nextLeft&&!rotation_0_180_exists){newBounds.push(newAnnotation.bounds[i]);}else{if(i===newAnnotation.bounds.length-1||newAnnotation.bounds.length>=1){newBounds.push(newAnnotation.bounds[i]);}if(newBounds.length>=1){var boundsLength=newBounds.length-1;x=newBounds.reduce(function(min,rect){return(rect.left?rect.left:rect.Left||0)<min?rect.left?rect.left:rect.Left||0:min;},Infinity);y=newBounds.reduce(function(min,rect){return(rect.top?rect.top:rect.Top||0)<min?rect.top?rect.top:rect.Top||0:min;},Infinity);if(rotation_0_180_exists){height=newBounds[0].height?newBounds[0].height:newBounds[0].Height;width=newBounds.reduce(function(sum,rect){return sum+(rect.width?rect.width:rect.Width||0);},0);}else{width+=newBounds[0].width?newBounds[0].width:newBounds[0].Width;height=newBounds.reduce(function(sum,rect){return sum+(rect.height?rect.height:rect.Height||0);},0);}}if(!newcanvas){newcanvas=this.pdfViewerBase.getElement('_annotationCanvas_'+newAnnotation.pageNumber);}// eslint-disable-next-line max-len
this.drawAnnotationSelectRect(newcanvas,this.getMagnifiedValue(x-0.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(y-0.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(width+0.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(height+0.5,this.pdfViewerBase.getZoomFactor()),annotation);newBounds=[];width=0;height=0;}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.selectMultiPageAnnotations=function(annotation){for(var k=0;k<annotation.annotNameCollection.length;k++){// eslint-disable-next-line
var currentAnnot=annotation.annotNameCollection[k];if(currentAnnot!==annotation.annotName){for(var p=0;p<annotation.annotpageNumbers.length;p++){var currentPage=annotation.annotpageNumbers[p];var annotationList=this.getAnnotations(currentPage,null);if(annotationList){for(var z=0;z<annotationList.length;z++){if(annotationList[z].annotName===currentAnnot){// eslint-disable-next-line
var newAnnotation=annotationList[z];this.drawAnnotationSelector(newAnnotation,annotation);}}}}}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.deletMultiPageAnnotation=function(annotation){for(var k=0;k<annotation.annotNameCollection.length;k++){// eslint-disable-next-line
var currentAnnot=annotation.annotNameCollection[k];if(currentAnnot!==annotation.annotName){for(var p=0;p<annotation.annotpageNumbers.length;p++){var currentPage=annotation.annotpageNumbers[p];var annotationList=this.getAnnotations(currentPage,null);if(annotationList){for(var z=0;z<annotationList.length;z++){if(annotationList[z].annotName===currentAnnot){// eslint-disable-next-line
var newAnnotation=annotationList[z];var deletedAnnotation=null;deletedAnnotation=annotationList.splice(z,1)[0];this.pdfViewer.annotationModule.addAction(currentPage,z,deletedAnnotation,'Text Markup Deleted',null);this.currentAnnotationIndex=z;this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(deletedAnnotation,'textMarkup');var removeDiv=document.getElementById(deletedAnnotation.annotName);if(removeDiv){if(removeDiv.parentElement.childElementCount===1){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAccordionContainer(removeDiv);}else{removeDiv.remove();}}this.pdfViewer.annotationModule.updateAnnotationCollection(newAnnotation);this.manageAnnotations(annotationList,currentPage);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.updateImportAnnotationCollection(newAnnotation,newAnnotation.pageNumber,'textMarkupAnnotation');var annotationId=newAnnotation.annotName;// eslint-disable-next-line
var annotationBounds=newAnnotation.bounds;this.pdfViewer.annotationModule.renderAnnotations(currentPage,null,null,null);}}}}}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.modifyMultiPageAnnotations=function(annotation,property,value){for(var k=0;k<annotation.annotNameCollection.length;k++){// eslint-disable-next-line
var currentAnnot=annotation.annotNameCollection[k];if(currentAnnot!==annotation.annotName){for(var p=0;p<annotation.annotpageNumbers.length;p++){var currentPage=annotation.annotpageNumbers[p];var annotationList=this.getAnnotations(currentPage,null);if(annotationList){for(var z=0;z<annotationList.length;z++){if(annotationList[z].annotName===currentAnnot){if(property==='Color'){annotationList[z].color=value;}else{annotationList[z].opacity=value;}annotationList[z].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.currentAnnotationIndex=z;if(status===null||status==='changed'){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.addAction(annotationList[z].pageNumber,z,annotationList[z],'Text Markup Property modified',property);}this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationList[z]);this.manageAnnotations(annotationList,currentPage);this.pdfViewer.annotationModule.renderAnnotations(currentPage,null,null,null);}}}}}}};TextMarkupAnnotation.prototype.convertSelectionToTextMarkup=function(type,selectionObject,factor){var isMultiSelect=false;this.triggerAddEvent=false;this.multiPageCollection=[];for(var i=0;i<selectionObject.length;i++){var textValue=selectionObject[i].textContent;// eslint-disable-next-line
var indexes=void 0;if(selectionObject[i].startNode===selectionObject[i].endNode){var parentText=document.getElementById(selectionObject[i].startNode).textContent;indexes=this.getIndexNumbers(selectionObject[i].pageNumber,textValue,parentText);}else{indexes=this.getIndexNumbers(selectionObject[i].pageNumber,textValue);}if(!isMultiSelect){for(var n=1;n<selectionObject.length;n++){if(selectionObject[n].pageNumber!==selectionObject[0].pageNumber&&this.isMultiAnnotation(type)){isMultiSelect=true;break;}}}if(this.isMultiAnnotation(type)&&selectionObject.length-1===i){this.triggerAddEvent=true;}// eslint-disable-next-line max-len
this.drawTextMarkups(type,selectionObject[i].rectangleBounds,selectionObject[i].pageNumber,selectionObject[i].bound,factor,textValue,indexes.startIndex,indexes.endIndex,isMultiSelect,document.getElementById(selectionObject[i].startNode));}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.updateTextMarkupAnnotationBounds=function(pageBounds,currentIndex){if(this.currentTextMarkupAnnotation){var pageAnnotations=this.getAnnotations(pageBounds[currentIndex].pageIndex,null);var annotation=null;if(pageAnnotations){for(var i=0;i<pageAnnotations.length;i++){if(JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(pageAnnotations[i])){pageAnnotations[i].bounds=pageBounds[currentIndex].bounds;pageAnnotations[i].textMarkupContent=pageBounds[currentIndex].textContent;pageAnnotations[i].textMarkupStartIndex=pageBounds[currentIndex].startIndex;pageAnnotations[i].textMarkupEndIndex=pageBounds[currentIndex].endIndex;pageAnnotations[i].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();annotation=pageAnnotations[i];}}this.manageAnnotations(pageAnnotations,pageBounds[currentIndex].pageIndex);this.currentTextMarkupAnnotation=null;this.pdfViewer.annotationModule.renderAnnotations(pageBounds[currentIndex].pageIndex,null,null,null);this.pdfViewerBase.updateDocumentEditedProperty(true);if(annotation){// eslint-disable-next-line
var settings={opacity:annotation.opacity,color:annotation.color,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate};// eslint-disable-next-line max-len
var multiPageCollection=this.multiPageCollectionList(annotation);if(multiPageCollection.length>0){if(pageBounds.length-1===currentIndex){// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationResize(pageBounds[currentIndex].pageIndex,annotation.annotName,annotation.textMarkupAnnotationType,annotation.bounds,settings,annotation.textMarkupContent,annotation.textMarkupStartIndex,annotation.textMarkupEndIndex,null,multiPageCollection);}}else{// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationResize(pageBounds[currentIndex].pageIndex,annotation.annotName,annotation.textMarkupAnnotationType,annotation.bounds,settings,annotation.textMarkupContent,annotation.textMarkupStartIndex,annotation.textMarkupEndIndex,null);}}// eslint-disable-next-line max-len
this.currentAnnotationIndex=null;this.selectTextMarkupCurrentPage=null;}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.multiPageCollectionList=function(annotation){var multiPageCollectionList=[];if(annotation.isMultiSelect&&annotation.annotNameCollection){multiPageCollectionList.push(annotation);for(var k=0;k<annotation.annotNameCollection.length;k++){// eslint-disable-next-line
var currentAnnot=annotation.annotNameCollection[k];if(currentAnnot!==annotation.annotName){for(var p=0;p<annotation.annotpageNumbers.length;p++){var currentPage=annotation.annotpageNumbers[p];var annotationList=this.getAnnotations(currentPage,null);if(annotationList){for(var z=0;z<annotationList.length;z++){if(annotationList[z].annotName===currentAnnot){multiPageCollectionList.push(annotationList[z]);}}}}}}}return multiPageCollectionList;};// eslint-disable-next-line
TextMarkupAnnotation.prototype.updateAnnotationNames=function(annotations,pageNumber){if(annotations){var pageAnnotations=this.getAnnotations(pageNumber,null);var annotation=null;if(pageAnnotations){for(var i=0;i<pageAnnotations.length;i++){if(annotations.annotName===pageAnnotations[i].annotName){// eslint-disable-next-line
var annotNamesCollections=[];// eslint-disable-next-line
var annotpageNumbers=[];for(var p=0;p<this.multiPageCollection.length;p++){annotNamesCollections.push(this.multiPageCollection[p].annotName);annotpageNumbers.push(this.multiPageCollection[p].pageNumber);}pageAnnotations[i].isMultiSelect=true;pageAnnotations[i].annotNameCollection=annotNamesCollections;pageAnnotations[i].annotpageNumbers=annotpageNumbers;annotation=pageAnnotations[i];}}this.manageAnnotations(pageAnnotations,pageNumber);}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.updateAnnotationContent=function(annotation,pageBound){if(annotation){var pageAnnotations=this.getAnnotations(this.selectTextMarkupCurrentPage,null);var annotation_1=null;if(pageAnnotations){for(var i=0;i<pageAnnotations.length;i++){if(JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(pageAnnotations[i])){pageAnnotations[i].textMarkupContent=pageBound.textContent;pageAnnotations[i].textMarkupStartIndex=pageBound.startIndex;pageAnnotations[i].textMarkupEndIndex=pageBound.endIndex;annotation_1=pageAnnotations[i];}this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],this.selectTextMarkupCurrentPage);}this.manageAnnotations(pageAnnotations,this.selectTextMarkupCurrentPage);}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.drawTextMarkups=function(type,bounds,pageNumber,rect,factor,textContent,startIndex,endIndex,isMultiSelect,targetElement){var annotation=null;this.isNewAnnotation=false;var author='Guest';var subject;var context=this.getPageContext(pageNumber);var modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.highlightColor=this.highlightColor?this.highlightColor:this.pdfViewer.highlightSettings.color;this.underlineColor=this.underlineColor?this.underlineColor:this.pdfViewer.underlineSettings.color;this.strikethroughColor=this.strikethroughColor?this.strikethroughColor:this.pdfViewer.strikethroughSettings.color;this.highlightOpacity=this.pdfViewer.highlightSettings.opacity;this.underlineOpacity=this.pdfViewer.underlineSettings.opacity;this.strikethroughOpacity=this.pdfViewer.strikethroughSettings.opacity;this.annotationAddMode='UI Drawn Annotation';// eslint-disable-next-line
var allowedInteractions;var pageDetails=this.pdfViewerBase.pageSize[pageNumber];var annotationRotate=0;var pageRotation=this.getAngle(pageDetails.rotation);if(context){context.setLineDash([]);switch(type){case'Highlight':this.isNewAnnotation=true;subject='Highlight';// eslint-disable-next-line max-len
author=this.pdfViewer.highlightSettings.author!=='Guest'&&this.pdfViewer.highlightSettings.author?this.pdfViewer.highlightSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';allowedInteractions=this.pdfViewer.highlightSettings.allowedInteractions?this.pdfViewer.highlightSettings.allowedInteractions:'None';// eslint-disable-next-line max-len
annotation=this.getAddedAnnotation(type,this.highlightColor,this.highlightOpacity,bounds,author,subject,modifiedDate,'',false,rect,pageNumber,textContent,startIndex,endIndex,isMultiSelect,allowedInteractions,annotationRotate);if(annotation){// eslint-disable-next-line max-len
this.renderHighlightAnnotation(annotation.bounds,annotation.opacity,annotation.color,context,factor,annotation.isPrint,pageNumber);}break;case'Strikethrough':this.isNewAnnotation=true;subject='Strikethrough';// eslint-disable-next-line max-len
author=this.pdfViewer.strikethroughSettings.author!=='Guest'&&this.pdfViewer.strikethroughSettings.author?this.pdfViewer.strikethroughSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';allowedInteractions=this.pdfViewer.strikethroughSettings.allowedInteractions?this.pdfViewer.strikethroughSettings.allowedInteractions:'None';// eslint-disable-next-line max-len
if(targetElement&&targetElement.style.transform!==''){if(targetElement.style.transform.startsWith('rotate(90deg)')){annotationRotate=Math.abs(pageRotation-90);}else if(targetElement.style.transform.startsWith('rotate(180deg)')){annotationRotate=Math.abs(pageRotation-180);}else if(targetElement.style.transform.startsWith('rotate(-90deg)')){annotationRotate=Math.abs(pageRotation-270);}else{annotationRotate=pageRotation;}}annotation=this.getAddedAnnotation(type,this.strikethroughColor,this.strikethroughOpacity,bounds,author,subject,modifiedDate,'',false,rect,pageNumber,textContent,startIndex,endIndex,isMultiSelect,allowedInteractions,annotationRotate);if(annotation){// eslint-disable-next-line max-len
this.renderStrikeoutAnnotation(annotation.bounds,annotation.opacity,annotation.color,context,factor,pageNumber,annotation.isPrint,annotation.annotationRotation);}break;case'Underline':this.isNewAnnotation=true;subject='Underline';// eslint-disable-next-line max-len
author=this.pdfViewer.underlineSettings.author!=='Guest'&&this.pdfViewer.underlineSettings.author?this.pdfViewer.underlineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';allowedInteractions=this.pdfViewer.underlineSettings.allowedInteractions?this.pdfViewer.underlineSettings.allowedInteractions:'None';// eslint-disable-next-line max-len
if(targetElement&&targetElement.style.transform!==''){if(targetElement.style.transform.startsWith('rotate(90deg)')){annotationRotate=Math.abs(pageRotation-90);}else if(targetElement.style.transform.startsWith('rotate(180deg)')){annotationRotate=Math.abs(pageRotation-180);}else if(targetElement.style.transform.startsWith('rotate(-90deg)')){annotationRotate=Math.abs(pageRotation-270);}else{annotationRotate=pageRotation;}}annotation=this.getAddedAnnotation(type,this.underlineColor,this.underlineOpacity,bounds,author,subject,modifiedDate,'',false,rect,pageNumber,textContent,startIndex,endIndex,isMultiSelect,allowedInteractions,annotationRotate);if(annotation){// eslint-disable-next-line max-len
this.renderUnderlineAnnotation(annotation.bounds,annotation.opacity,annotation.color,context,factor,pageNumber,annotation.isPrint,annotation.annotationRotation);}break;}this.isNewAnnotation=false;if(annotation){this.pdfViewerBase.updateDocumentEditedProperty(true);// eslint-disable-next-line
var settings={opacity:annotation.opacity,color:annotation.color,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate};var index=this.pdfViewer.annotationModule.actionCollection[this.pdfViewer.annotationModule.actionCollection.length-1].index;// eslint-disable-next-line max-len
if(this.isMultiAnnotation(type)){if(this.triggerAddEvent){// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationAdd(pageNumber,annotation.annotName,type,annotation.bounds,settings,textContent,startIndex,endIndex,null,this.multiPageCollection);}}else{// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationAdd(pageNumber,annotation.annotName,type,annotation.bounds,settings,textContent,startIndex,endIndex);}}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(type);}}};TextMarkupAnnotation.prototype.getAngle=function(rotation){// eslint-disable-next-line
var angle=0;if(rotation){switch(rotation){case 0:angle=0;break;case 1:angle=90;break;case 2:angle=180;break;case 3:angle=270;break;}}return angle;};// eslint-disable-next-line
TextMarkupAnnotation.prototype.retreiveTextIndex=function(annotation){if(annotation.textMarkupContent===''){this.retreieveSelection(annotation,null);var pageBounds=this.getDrawnBounds();window.getSelection().removeAllRanges();if(pageBounds[0]&&pageBounds[0].bounds){this.updateAnnotationContent(annotation,pageBounds[0]);annotation.textMarkupContent=pageBounds[0].textContent;annotation.textMarkupStartIndex=pageBounds[0].startIndex;annotation.textMarkupEndIndex=pageBounds[0].endIndex;}}return annotation;};// eslint-disable-next-line
TextMarkupAnnotation.prototype.renderHighlightAnnotation=function(bounds,opacity,color,context,factor,isPrint,pageIndex){var zoomRatio=this.pdfViewerBase.getZoomRatio(factor);for(var i=0;i<bounds.length;i++){// eslint-disable-next-line
var bound=bounds[i];context.beginPath();var x=bound.X?bound.X:bound.left;var y=bound.Y?bound.Y:bound.top;var width=bound.Width?bound.Width:bound.width;var height=bound.Height?bound.Height:bound.height;var rotation=bound.Rotation?bound.Rotation:bound.rotation;x=x?x:bound.x;y=y?y:bound.y;// The highlighted position is slightly increased. So Subtract -1 from the height. 
if(rotation>=0){rotation=Math.abs(rotation)/90;}if(rotation==0||rotation==2){height=height-1;}else if(rotation==1||rotation==3){width=width-1;}if(context.canvas.id===this.pdfViewer.dataId+'_print_annotation_layer_'+pageIndex){if(isPrint){// eslint-disable-next-line max-len
context.rect(x*zoomRatio,y*zoomRatio,width*zoomRatio,height*zoomRatio);context.globalAlpha=opacity*0.5;context.closePath();context.fillStyle=color;context.msFillRule='nonzero';context.fill();}}else{// eslint-disable-next-line max-len
context.rect(x*zoomRatio,y*zoomRatio,width*zoomRatio,height*zoomRatio);context.globalAlpha=opacity*0.5;context.closePath();context.fillStyle=color;context.msFillRule='nonzero';context.fill();}}context.save();};// eslint-disable-next-line
TextMarkupAnnotation.prototype.renderStrikeoutAnnotation=function(bounds,opacity,color,context,factor,pageNumber,isPrint,annotationRotation){for(var i=0;i<bounds.length;i++){// eslint-disable-next-line
var bound=this.getProperBounds(bounds[i]);var pageDetails=this.pdfViewerBase.pageSize[pageNumber];var factorRatio=this.pdfViewerBase.getZoomRatio(factor);var rotation=pageDetails.rotation;if(bounds[i].rotation){rotation=Math.abs(bounds[i].rotation)/90;}if(context.canvas.id===this.pdfViewer.element.id+'_print_annotation_layer_'+pageNumber){if(isPrint){if(rotation===1){// eslint-disable-next-line max-len
this.drawLine(opacity,bound.x+bound.width/2,bound.y,bound.width,bound.height,color,factorRatio,context,pageNumber,bounds[i].rotation);}else if(rotation===2){// eslint-disable-next-line max-len
this.drawLine(opacity,bound.x,bound.y+bound.height/2,bound.width,bound.height,color,factorRatio,context,pageNumber,bounds[i].rotation);}else if(rotation===3){this.drawLine(opacity,bound.x,bound.y,bound.width/2,bound.height,color,factorRatio,context,pageNumber,bounds[i].rotation);}else{this.drawLine(opacity,bound.x,bound.y,bound.width,bound.height/2,color,factorRatio,context,pageNumber,bounds[i].rotation);}}}else{if(rotation===1){// eslint-disable-next-line max-len
this.drawLine(opacity,bound.x+bound.width/2,bound.y,bound.width,bound.height,color,factorRatio,context,pageNumber,bounds[i].rotation);}else if(rotation===2){// eslint-disable-next-line max-len
this.drawLine(opacity,bound.x,bound.y+bound.height/2,bound.width,bound.height,color,factorRatio,context,pageNumber,bounds[i].rotation);}else if(rotation===3){this.drawLine(opacity,bound.x,bound.y,bound.width/2,bound.height,color,factorRatio,context,pageNumber,bounds[i].rotation);}else{this.drawLine(opacity,bound.x,bound.y,bound.width,bound.height/2,color,factorRatio,context,pageNumber,bounds[i].rotation);}}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.renderUnderlineAnnotation=function(bounds,opacity,color,context,factor,pageNumber,isPrint,annotationRotation){for(var i=0;i<bounds.length;i++){// eslint-disable-next-line
var boundValues=this.getProperBounds(bounds[i]);var factorRatio=this.pdfViewerBase.getZoomRatio(factor);if(context.canvas.id===this.pdfViewer.dataId+'_print_annotation_layer_'+pageNumber){if(isPrint){// eslint-disable-next-line max-len
this.drawLine(opacity,boundValues.x,boundValues.y,boundValues.width,boundValues.height,color,factorRatio,context,pageNumber,bounds[i].rotation);}}else{this.drawLine(opacity,boundValues.x,boundValues.y,boundValues.width,boundValues.height,color,factorRatio,context,pageNumber,bounds[i].rotation);}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.getProperBounds=function(bound){var x=bound.X?bound.X:bound.left;var y=bound.Y?bound.Y:bound.top;var width=bound.Width?bound.Width:bound.width;var height=bound.Height?bound.Height:bound.height;x=x?x:bound.x;y=y?y:bound.y;return{x:x,y:y,width:width,height:height};};// eslint-disable-next-line max-len
TextMarkupAnnotation.prototype.drawLine=function(opacity,x,y,width,height,color,factor,context,pageNumber,annotationRotation){context.globalAlpha=opacity;if(sf.base.isBlazor()){y=y-1;}context.setLineDash([]);context.beginPath();var pageDetails=this.pdfViewerBase.pageSize[pageNumber];var rotation=pageDetails.rotation;if(annotationRotation>=0){rotation=Math.abs(annotationRotation)/90;}if(rotation==0||rotation==2){height=height-1;}else if(rotation==1||rotation==3){width=width-1;}if(rotation===1){context.moveTo(x*factor,y*factor);context.lineTo(x*factor,(y+height)*factor);}else if(rotation===2){context.moveTo(x*factor,y*factor);context.lineTo((width+x)*factor,y*factor);}else if(rotation===3){context.moveTo((width+x)*factor,y*factor);context.lineTo((width+x)*factor,(y+height)*factor);}else{context.moveTo(x*factor,(y+height)*factor);context.lineTo((width+x)*factor,(y+height)*factor);}context.lineWidth=1;context.strokeStyle=color;context.closePath();context.msFillRule='nonzero';context.stroke();};/**
     * @param textMarkupAnnotations
     * @param pageIndex
     * @param stampData
     * @param shapeData
     * @param measureShapeData
     * @param stickyData
     * @param textMarkupAnnotations
     * @param pageIndex
     * @param stampData
     * @param shapeData
     * @param measureShapeData
     * @param stickyData
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.printTextMarkupAnnotations=function(textMarkupAnnotations,pageIndex,stampData,shapeData,measureShapeData,stickyData){var canvas=sf.base.createElement('canvas',{id:this.pdfViewer.dataId+'_print_annotation_layer_'+pageIndex});canvas.style.width=816+'px';canvas.style.height=1056+'px';var pageWidth=this.pdfViewerBase.pageSize[pageIndex].width;var pageHeight=this.pdfViewerBase.pageSize[pageIndex].height;var zoom=this.pdfViewerBase.getZoomFactor();var zoomRatio=this.pdfViewerBase.getZoomRatio(zoom);canvas.height=pageHeight*zoomRatio;canvas.width=pageWidth*zoomRatio;// eslint-disable-next-line
var textMarkupannotations=this.getAnnotations(pageIndex,null,'_annotations_textMarkup');// eslint-disable-next-line
var shapeAnnotation=this.getAnnotations(pageIndex,null,'_annotations_shape');// eslint-disable-next-line
var measureShapeAnnotation=this.getAnnotations(pageIndex,null,'_annotations_shape_measure');// eslint-disable-next-line
var stampAnnotation=this.getAnnotations(pageIndex,null,'_annotations_stamp');// eslint-disable-next-line
var stickyNoteAnnotation=this.getAnnotations(pageIndex,null,'_annotations_sticky');if(stampAnnotation||shapeAnnotation||stickyNoteAnnotation||measureShapeAnnotation){this.pdfViewer.renderDrawing(canvas,pageIndex);}else{this.pdfViewer.annotation.renderAnnotations(pageIndex,shapeData,measureShapeData,null,canvas);this.pdfViewer.annotation.stampAnnotationModule.renderStampAnnotations(stampData,pageIndex,canvas);this.pdfViewer.annotation.stickyNotesAnnotationModule.renderStickyNotesAnnotations(stickyData,pageIndex,canvas);}var zoomFactor=this.pdfViewerBase.getZoomFactor();if(textMarkupannotations){this.renderTextMarkupAnnotations(null,pageIndex,canvas,zoomFactor);}else{this.renderTextMarkupAnnotations(textMarkupAnnotations,pageIndex,canvas,zoomFactor);}var imageSource=canvas.toDataURL();return imageSource;};/**
     * @private
     */TextMarkupAnnotation.prototype.saveTextMarkupAnnotations=function(){// eslint-disable-next-line
var storeTextMarkupObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_textMarkup');if(this.pdfViewerBase.isStorageExceed){storeTextMarkupObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_textMarkup'];}// eslint-disable-next-line
var textMarkupAnnotations=new Array();for(var j=0;j<this.pdfViewerBase.pageCount;j++){textMarkupAnnotations[j]=[];}if(storeTextMarkupObject&&!this.pdfViewer.annotationSettings.skipDownload){var textMarkupAnnotationCollection=JSON.parse(storeTextMarkupObject);for(var i=0;i<textMarkupAnnotationCollection.length;i++){var newArray=[];var pageAnnotationObject=textMarkupAnnotationCollection[i];if(pageAnnotationObject){for(var z=0;pageAnnotationObject.annotations.length>z;z++){this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);if(this.pdfViewerBase.isJsonExported){if(pageAnnotationObject.annotations[z].isAnnotationRotated){pageAnnotationObject.annotations[z].bounds=this.getBoundsForSave(pageAnnotationObject.annotations[z].bounds,i);}else{var pageDetails=this.pdfViewerBase.pageSize[pageAnnotationObject.pageIndex];if(pageDetails){pageAnnotationObject.annotations[z].annotationRotation=pageDetails.rotation;}}}// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].bounds=JSON.stringify(this.getBoundsForSave(pageAnnotationObject.annotations[z].bounds,i));var colorString=pageAnnotationObject.annotations[z].color;pageAnnotationObject.annotations[z].color=JSON.stringify(this.getRgbCode(colorString));pageAnnotationObject.annotations[z].rect=JSON.stringify(pageAnnotationObject.annotations[z].rect);}newArray=pageAnnotationObject.annotations;}textMarkupAnnotations[pageAnnotationObject.pageIndex]=newArray;}}return JSON.stringify(textMarkupAnnotations);};/**
     * @private
     */TextMarkupAnnotation.prototype.deleteTextMarkupAnnotation=function(){if(this.currentTextMarkupAnnotation){var isLock=false;if(this.currentTextMarkupAnnotation.annotationSettings){// eslint-disable-next-line
isLock=this.currentTextMarkupAnnotation.annotationSettings.isLock;if(this.pdfViewer.annotationModule.checkAllowedInteractions('Delete',this.currentTextMarkupAnnotation)){isLock=false;}}if(!isLock){var deletedAnnotation=null;this.showHideDropletDiv(true);// eslint-disable-next-line
var annotation=this.currentTextMarkupAnnotation;if(this.currentTextMarkupAnnotation.isMultiSelect&&annotation.annotNameCollection){this.deletMultiPageAnnotation(annotation);}var pageAnnotations=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(pageAnnotations){for(var i=0;i<pageAnnotations.length;i++){if(this.currentTextMarkupAnnotation.annotName===pageAnnotations[i].annotName){deletedAnnotation=pageAnnotations.splice(i,1)[0];// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage,i,deletedAnnotation,'Text Markup Deleted',null);this.currentAnnotationIndex=i;this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(deletedAnnotation,'textMarkup');var removeDiv=document.getElementById(deletedAnnotation.annotName);if(removeDiv){if(removeDiv.parentElement.childElementCount===1){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAccordionContainer(removeDiv);}this.pdfViewer._dotnetInstance.invokeMethodAsync('RemoveCommentsCollection',deletedAnnotation.annotName,this.currentAnnotationIndex);}}}this.pdfViewer.annotationModule.updateAnnotationCollection(this.currentTextMarkupAnnotation);this.manageAnnotations(pageAnnotations,this.selectTextMarkupCurrentPage);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.updateImportAnnotationCollection(this.currentTextMarkupAnnotation,this.currentTextMarkupAnnotation.pageNumber,'textMarkupAnnotation');var annotationId=this.currentTextMarkupAnnotation.annotName;// eslint-disable-next-line
var annotationBounds=this.currentTextMarkupAnnotation.bounds;this.currentTextMarkupAnnotation=null;this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null);this.pdfViewerBase.updateDocumentEditedProperty(true);// eslint-disable-next-line max-len
var multiPageCollection=this.multiPageCollectionList(annotation);if(multiPageCollection.length>0){multiPageCollection.push(deletedAnnotation);// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage,annotationId,deletedAnnotation.textMarkupAnnotationType,annotationBounds,deletedAnnotation.textMarkupContent,deletedAnnotation.textMarkupStartIndex,deletedAnnotation.textMarkupEndIndex,multiPageCollection);}else{// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage,annotationId,deletedAnnotation.textMarkupAnnotationType,annotationBounds,deletedAnnotation.textMarkupContent,deletedAnnotation.textMarkupStartIndex,deletedAnnotation.textMarkupEndIndex);}this.currentAnnotationIndex=null;this.selectTextMarkupCurrentPage=null;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();this.pdfViewer.toolbarModule.showToolbar(true);}}}}};/**
     * @param color
     * @private
     */TextMarkupAnnotation.prototype.modifyColorProperty=function(color){if(this.currentTextMarkupAnnotation){var pageAnnotations=this.modifyAnnotationProperty('Color',color,null);this.manageAnnotations(pageAnnotations,this.selectTextMarkupCurrentPage);this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null);this.pdfViewerBase.updateDocumentEditedProperty(true);// eslint-disable-next-line
var annotation=this.currentTextMarkupAnnotation;// eslint-disable-next-line max-len
var multiPageCollection=this.multiPageCollectionList(annotation);if(multiPageCollection.length>0){// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,annotation.annotName,annotation.textMarkupAnnotationType,true,false,false,false,annotation.textMarkupContent,annotation.textMarkupStartIndex,annotation.textMarkupEndIndex,multiPageCollection);this.currentAnnotationIndex=null;}else{// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,annotation.annotName,annotation.textMarkupAnnotationType,true,false,false,false,annotation.textMarkupContent,annotation.textMarkupStartIndex,annotation.textMarkupEndIndex);this.currentAnnotationIndex=null;}}};/**
     * @param args
     * @param isOpacity
     * @private
     */TextMarkupAnnotation.prototype.modifyOpacityProperty=function(args,isOpacity){if(this.currentTextMarkupAnnotation){var pageAnnotations=void 0;if(isOpacity!==null&&isOpacity!==undefined){pageAnnotations=this.modifyAnnotationProperty('Opacity',isOpacity,'changed');}else{pageAnnotations=this.modifyAnnotationProperty('Opacity',args.value/100,args.name);}if(pageAnnotations){this.manageAnnotations(pageAnnotations,this.selectTextMarkupCurrentPage);this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null);if(isOpacity||args.name==='changed'){this.pdfViewerBase.updateDocumentEditedProperty(true);// eslint-disable-next-line
var annotation=this.currentTextMarkupAnnotation;// eslint-disable-next-line max-len
var multiPageCollection=this.multiPageCollectionList(annotation);if(multiPageCollection.length>0){// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,annotation.annotName,annotation.textMarkupAnnotationType,false,true,false,false,annotation.textMarkupContent,annotation.textMarkupStartIndex,annotation.textMarkupEndIndex,multiPageCollection);this.currentAnnotationIndex=null;}else{// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,annotation.annotName,annotation.textMarkupAnnotationType,false,true,false,false,annotation.textMarkupContent,annotation.textMarkupStartIndex,annotation.textMarkupEndIndex);this.currentAnnotationIndex=null;}}}}};/**
     * @param property
     * @param value
     * @param status
     * @param annotName
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.modifyAnnotationProperty=function(property,value,status,annotName){// eslint-disable-next-line
var annotation=this.currentTextMarkupAnnotation;if(annotation.isMultiSelect&&annotation.annotNameCollection){this.modifyMultiPageAnnotations(annotation,property,value);}var pageAnnotations=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(pageAnnotations){for(var i=0;i<pageAnnotations.length;i++){if(JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(pageAnnotations[i])){if(property==='Color'){pageAnnotations[i].color=value;}else if(property==='Opacity'){pageAnnotations[i].opacity=value;}else if(property==='AnnotationSettings'){pageAnnotations[i].annotationSettings={isLock:value};}pageAnnotations[i].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.currentAnnotationIndex=i;if(status===null||status==='changed'){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage,i,this.currentTextMarkupAnnotation,'Text Markup Property modified',property);}this.currentTextMarkupAnnotation=pageAnnotations[i];this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(pageAnnotations[i]);this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],this.selectTextMarkupCurrentPage);}}}return pageAnnotations;};/**
     * @param annotation
     * @param pageNumber
     * @param index
     * @param action
     * @private
     */TextMarkupAnnotation.prototype.undoTextMarkupAction=function(annotation,pageNumber,index,action){var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations){if(action==='Text Markup Added'){this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(pageAnnotations[index],'textMarkup');// eslint-disable-next-line
var removeDiv=document.getElementById(pageAnnotations[index].annotName);if(removeDiv){this.pdfViewer._dotnetInstance.invokeMethodAsync('RemoveCommentsCollection',annotation.annotName,pageNumber);}pageAnnotations.splice(index,1);}else if(action==='Text Markup Deleted'){// eslint-disable-next-line max-len
pageAnnotations.splice(index,0,annotation);}}this.clearCurrentAnnotation();this.pdfViewerBase.updateDocumentEditedProperty(true);this.manageAnnotations(pageAnnotations,pageNumber);this.pdfViewer.annotationModule.renderAnnotations(pageNumber,null,null,null);this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(pageNumber,annotation.shapeAnnotationType);};/**
     * @param annotation
     * @param pageNumber
     * @param index
     * @param property
     * @param isUndoAction
     * @param annotation
     * @param pageNumber
     * @param index
     * @param property
     * @param isUndoAction
     * @param annotation
     * @param pageNumber
     * @param index
     * @param property
     * @param isUndoAction
     * @param annotation
     * @param pageNumber
     * @param index
     * @param property
     * @param isUndoAction
     * @private
     */ // eslint-disable-next-line max-len
TextMarkupAnnotation.prototype.undoRedoPropertyChange=function(annotation,pageNumber,index,property,isUndoAction){var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations){if(property==='Color'){var tempColor=pageAnnotations[index].color;pageAnnotations[index].color=annotation.color;annotation.color=tempColor;}else{var tempOpacity=pageAnnotations[index].opacity;pageAnnotations[index].opacity=annotation.opacity;annotation.opacity=tempOpacity;}this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotation,null,true);if(isUndoAction){annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();}}this.clearCurrentAnnotation();this.pdfViewerBase.updateDocumentEditedProperty(true);this.manageAnnotations(pageAnnotations,pageNumber);this.pdfViewer.annotationModule.renderAnnotations(pageNumber,null,null,null);return annotation;};/**
     * @param annotation
     * @param pageNumber
     * @param index
     * @param action
     * @private
     */TextMarkupAnnotation.prototype.redoTextMarkupAction=function(annotation,pageNumber,index,action){var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations){if(action==='Text Markup Added'){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(pageNumber,annotation.shapeAnnotationType);pageAnnotations.push(annotation);}else if(action==='Text Markup Deleted'){this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(pageAnnotations[index],'textMarkup');// eslint-disable-next-line
var removeDiv=document.getElementById(pageAnnotations[index].annotName);if(removeDiv){if(removeDiv.parentElement.childElementCount===1){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAccordionContainer(removeDiv);}else{removeDiv.remove();}}pageAnnotations.splice(index,1);}}this.clearCurrentAnnotation();this.pdfViewerBase.updateDocumentEditedProperty(true);this.manageAnnotations(pageAnnotations,pageNumber);this.pdfViewer.annotationModule.renderAnnotations(pageNumber,null,null,null);};/**
     * @param pageNumber
     * @param note
     * @param pageNumber
     * @param note
     * @private
     */TextMarkupAnnotation.prototype.saveNoteContent=function(pageNumber,note){var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations){for(var i=0;i<pageAnnotations.length;i++){if(JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(pageAnnotations[i])){pageAnnotations[i].note=note;}}}this.manageAnnotations(pageAnnotations,pageNumber);this.pdfViewerBase.updateDocumentEditedProperty(true);};TextMarkupAnnotation.prototype.clearCurrentAnnotation=function(){if(!this.isExtended){if(this.pdfViewer.isMaintainSelection&&!this.pdfViewer.textSelectionModule.isTextSelection){this.selectTextMarkupCurrentPage=this.selectTextMarkupCurrentPage;this.currentTextMarkupAnnotation=this.currentTextMarkupAnnotation;}else{this.selectTextMarkupCurrentPage=null;this.currentTextMarkupAnnotation=null;}var isSkip=false;// eslint-disable-next-line max-len
if(this.pdfViewer.annotation.freeTextAnnotationModule&&this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus){isSkip=true;}if(!isSkip){this.enableAnnotationPropertiesTool(false);}}};/**
     * @param pageNumber
     * @param isSelect
     * @param pageNumber
     * @param isSelect
     * @private
     */TextMarkupAnnotation.prototype.clearCurrentAnnotationSelection=function(pageNumber,isSelect){if(isSelect){this.isAnnotationSelect=true;}else{this.isAnnotationSelect=false;}var lowerPageIndex=pageNumber-2>=0?pageNumber-2:0;// eslint-disable-next-line max-len
var higherPageIndex=pageNumber+2<this.pdfViewerBase.pageCount?pageNumber+2:this.pdfViewerBase.pageCount-1;for(var k=lowerPageIndex;k<=higherPageIndex;k++){this.clearAnnotationSelection(k);}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.getBoundsForSave=function(bounds,pageIndex){// eslint-disable-next-line
var newArray=[];for(var i=0;i<bounds.length;i++){// eslint-disable-next-line
var bound=this.getAnnotationBounds(bounds[i],pageIndex);newArray.push(bound);}return newArray;};// eslint-disable-next-line
TextMarkupAnnotation.prototype.getAnnotationBounds=function(bounds,pageIndex){var left=bounds.left?bounds.left:bounds.Left;var top=bounds.top?bounds.top:bounds.Top;var height=bounds.height?bounds.height:bounds.Height;var width=bounds.width?bounds.width:bounds.Width;var pageDetails=this.pdfViewerBase.pageSize[pageIndex];left=left?left:bounds.x;top=top?top:bounds.y;if(pageDetails){if(pageDetails.rotation===1){return{left:top,top:pageDetails.width-(left+width),width:height,height:width};}else if(pageDetails.rotation===2){// eslint-disable-next-line max-len
return{left:pageDetails.width-left-width,top:pageDetails.height-top-height,width:width,height:height};}else if(pageDetails.rotation===3){return{left:pageDetails.height-top-height,top:left,width:height,height:width};}else{return{left:left,top:top,width:width,height:height};}}else{return{left:left,top:top,width:width,height:height};}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.getRgbCode=function(colorString){if(!colorString.match(/#([a-z0-9]+)/gi)&&!colorString.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)){colorString=this.pdfViewer.annotationModule.nameToHash(colorString);}var markupStringArray=colorString.split(',');if(sf.base.isNullOrUndefined(markupStringArray[1])){colorString=this.pdfViewer.annotationModule.getValue(colorString,'rgba');markupStringArray=colorString.split(',');}// eslint-disable-next-line radix
var textMarkupR=parseInt(markupStringArray[0].split('(')[1]);// eslint-disable-next-line radix
var textMarkupG=parseInt(markupStringArray[1]);// eslint-disable-next-line radix
var textMarkupB=parseInt(markupStringArray[2]);// eslint-disable-next-line radix
var textMarkupA=parseInt(markupStringArray[3]);return{a:textMarkupA,r:textMarkupR,g:textMarkupG,b:textMarkupB};};TextMarkupAnnotation.prototype.getDrawnBounds=function(){var pageBounds=[];var selection=window.getSelection();if(selection.anchorNode!==null){var range=document.createRange();var isBackWardSelection=this.pdfViewerBase.textLayer.isBackWardSelection(selection);if(selection.anchorNode===selection.focusNode){var pageId=this.pdfViewerBase.textLayer.getPageIndex(selection.anchorNode);var startIndex=0;var endIndex=0;if(!isNaN(pageId)){var pageRect=this.pdfViewerBase.getElement('_pageDiv_'+pageId).getBoundingClientRect();if(this.pdfViewerBase.isMixedSizeDocument){pageRect=this.pdfViewerBase.getElement('_textLayer_'+pageId).getBoundingClientRect();}if(isBackWardSelection){range.setStart(selection.focusNode,selection.focusOffset);range.setEnd(selection.anchorNode,selection.anchorOffset);}else{if(selection.anchorOffset<selection.focusOffset){startIndex=selection.anchorOffset;endIndex=selection.focusOffset;range.setStart(selection.anchorNode,selection.anchorOffset);range.setEnd(selection.focusNode,selection.focusOffset);}else{startIndex=selection.focusOffset;endIndex=selection.anchorOffset;range.setStart(selection.focusNode,selection.focusOffset);range.setEnd(selection.anchorNode,selection.anchorOffset);}}var boundingRect=range.getBoundingClientRect();var pageDetails=this.pdfViewerBase.pageSize[pageId];var annotationRotate=0;var pageRotation=this.getAngle(pageDetails.rotation);var textElement=void 0;if(range.startContainer.parentElement){textElement=range.startContainer.parentElement;}else{textElement=range.startContainer.parentNode;}if(textElement&&textElement.style.transform!==''){if(textElement.style.transform.startsWith('rotate(90deg)')){annotationRotate=90;}else if(textElement.style.transform.startsWith('rotate(180deg)')){annotationRotate=180;}else if(textElement.style.transform.startsWith('rotate(-90deg)')||textElement.style.transform.startsWith('rotate(270deg)')){annotationRotate=270;}else{annotationRotate=0;}}// eslint-disable-next-line
var indexes=this.getIndexNumbers(pageId,range.toString(),range.commonAncestorContainer.textContent.toString());// eslint-disable-next-line max-len
var rectangle={left:this.getDefaultValue(boundingRect.left-pageRect.left),top:this.getDefaultValue(boundingRect.top-pageRect.top),width:this.getDefaultValue(boundingRect.width),height:this.getDefaultValue(boundingRect.height),right:this.getDefaultValue(boundingRect.right-pageRect.left),bottom:this.getDefaultValue(boundingRect.bottom-pageRect.top),rotation:annotationRotate};var rectangleArray=[];rectangleArray.push(rectangle);// eslint-disable-next-line
var rect={left:rectangle.left,top:rectangle.top,right:rectangle.right,bottom:rectangle.bottom,rotation:annotationRotate};pageBounds.push({pageIndex:pageId,bounds:rectangleArray,rect:rect,startIndex:indexes.startIndex,endIndex:indexes.endIndex,textContent:range.toString()});}}else{var startNode=void 0;var endNode=void 0;var selectionStartOffset=void 0;var selectionEndOffset=void 0;if(isBackWardSelection){startNode=selection.focusNode;selectionStartOffset=selection.focusOffset;endNode=selection.anchorNode;selectionEndOffset=selection.anchorOffset;}else{startNode=selection.anchorNode;selectionStartOffset=selection.anchorOffset;endNode=selection.focusNode;selectionEndOffset=selection.focusOffset;}var anchorPageId=this.pdfViewerBase.textLayer.getPageIndex(startNode);var anchorTextId=this.pdfViewerBase.textLayer.getTextIndex(startNode,anchorPageId);var focusPageId=this.pdfViewerBase.textLayer.getPageIndex(endNode);var focusTextId=this.pdfViewerBase.textLayer.getTextIndex(endNode,focusPageId);var startOffset=0;var endOffset=0;var currentId=0;for(var i=anchorPageId;i<=focusPageId;i++){var selectionRects=[];var pageStartId=void 0;var pageEndId=void 0;var pageStartOffset=void 0;var pageEndOffset=void 0;var textDivs=this.pdfViewerBase.getElement('_textLayer_'+i).childNodes;var pageRect=this.pdfViewerBase.getElement('_pageDiv_'+i).getBoundingClientRect();if(this.pdfViewerBase.isMixedSizeDocument){pageRect=this.pdfViewerBase.getElement('_textLayer_'+i).getBoundingClientRect();}if(i===anchorPageId){currentId=anchorTextId;}else{currentId=0;}for(var j=currentId;j<textDivs.length;j++){var textElement=textDivs[j];if(j===currentId){pageStartId=currentId;pageStartOffset=i===anchorPageId?selectionStartOffset:0;}else{pageEndId=j;pageEndOffset=i===focusPageId?selectionEndOffset:textElement.textContent.length;}if(j===anchorTextId&&i===anchorPageId){startOffset=selectionStartOffset;}else{startOffset=0;}if(j===focusTextId&&i===focusPageId){endOffset=selectionEndOffset;}else{endOffset=textElement.textContent.length;}for(var k=0;k<textElement.childNodes.length;k++){var node=textElement.childNodes[k];range.setStart(node,startOffset);range.setEnd(node,endOffset);}var boundingRect=range.getBoundingClientRect();var pageDetails=this.pdfViewerBase.pageSize[i];var annotationRotate=0;var pageRotation=this.getAngle(pageDetails.rotation);if(textElement&&textElement.style.transform!==''){if(textElement.style.transform.startsWith('rotate(90deg)')){annotationRotate=90;}else if(textElement.style.transform.startsWith('rotate(180deg)')){annotationRotate=180;}else if(textElement.style.transform.startsWith('rotate(-90deg)')||textElement.style.transform.startsWith('rotate(270deg)')){annotationRotate=270;}else{annotationRotate=0;}}// eslint-disable-next-line max-len
var rectangle={left:this.getDefaultValue(boundingRect.left-pageRect.left),top:this.getDefaultValue(boundingRect.top-pageRect.top),width:this.getDefaultValue(boundingRect.width),height:this.getDefaultValue(boundingRect.height),right:this.getDefaultValue(boundingRect.right-pageRect.left),bottom:this.getDefaultValue(boundingRect.bottom-pageRect.top),rotation:annotationRotate};selectionRects.push(rectangle);range.detach();if(i===focusPageId&&j===focusTextId){break;}}if(!pageEndId){pageEndId=pageStartId;}if(!pageEndOffset){pageEndOffset=endOffset;}var startElementNode=this.pdfViewerBase.getElement('_text_'+i+'_'+pageStartId).childNodes[0];var endElementNode=this.pdfViewerBase.getElement('_text_'+i+'_'+pageEndId).childNodes[0];var pageRange=document.createRange();pageRange.setStart(startElementNode,pageStartOffset);pageRange.setEnd(endElementNode,pageEndOffset);var pageRectBounds=pageRange.getBoundingClientRect();var textValue=pageRange.toString();// eslint-disable-next-line
var indexes=this.getIndexNumbers(i,textValue);// eslint-disable-next-line max-len
var pageRectangle={left:this.getDefaultValue(pageRectBounds.left-pageRect.left),top:this.getDefaultValue(pageRectBounds.top-pageRect.top),width:this.getDefaultValue(pageRectBounds.width),height:this.getDefaultValue(pageRectBounds.height),right:this.getDefaultValue(pageRectBounds.right-pageRect.left),bottom:this.getDefaultValue(pageRectBounds.bottom-pageRect.top)};// eslint-disable-next-line
var rect={left:pageRectangle.left,top:pageRectangle.top,right:pageRectangle.right,bottom:pageRectangle.bottom};pageBounds.push({pageIndex:i,bounds:selectionRects,rect:rect,startIndex:indexes.startIndex,endIndex:indexes.endIndex,textContent:textValue});}}}selection.removeAllRanges();return pageBounds;};// eslint-disable-next-line
TextMarkupAnnotation.prototype.getIndexNumbers=function(pageNumber,content,parentText){// eslint-disable-next-line
var storedData=this.pdfViewerBase.getLinkInformation(pageNumber);var startIndex;var endIndex;if(storedData){var previousIndex=0;var pageText=storedData.pageText;for(var p=0;p<pageNumber;p++){if(this.pdfViewer.isExtractText){// eslint-disable-next-line
var documentIndex=this.pdfViewer.textSearchModule.documentTextCollection[p][p];var pageTextData=documentIndex.pageText?documentIndex.pageText:documentIndex.PageText;// eslint-disable-next-line max-len
if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.documentTextCollection&&this.pdfViewer.textSearchModule.isTextRetrieved){if(this.pdfViewer.textSearchModule.documentTextCollection[p]){previousIndex=previousIndex+pageTextData.length;}}else{// eslint-disable-next-line max-len
if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.documentTextCollection){if(pageNumber<=this.pdfViewer.textSearchModule.documentTextCollection.length){if(this.pdfViewer.textSearchModule.documentTextCollection[p]){// eslint-disable-next-line max-len
previousIndex=previousIndex+pageTextData.length;}}else{previousIndex=0;break;}}}}}if(!sf.base.isNullOrUndefined(parentText)){var parentIndex=pageText.indexOf(parentText);var initialIndex=parentText.indexOf(content);startIndex=parentIndex+initialIndex+previousIndex;}else{startIndex=pageText.indexOf(content)+previousIndex;}endIndex=startIndex+(content.length-1);}return{startIndex:startIndex,endIndex:endIndex};};/**
     * @param pageNumber
     * @private
     */TextMarkupAnnotation.prototype.rerenderAnnotationsPinch=function(pageNumber){var annotCanvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(annotCanvas){var oldAnnotCanvas=this.pdfViewerBase.getElement('_old_annotationCanvas_'+pageNumber);if(oldAnnotCanvas){if(annotCanvas){oldAnnotCanvas.id=annotCanvas.id;annotCanvas.parentElement.removeChild(annotCanvas);}else{oldAnnotCanvas.id=this.pdfViewer.dataId+'_annotationCanvas_'+pageNumber;}annotCanvas=oldAnnotCanvas;}annotCanvas.style.width='';annotCanvas.style.height='';if(this.pdfViewer.restrictZoomRequest){// eslint-disable-next-line max-len
annotCanvas.style.width=this.pdfViewerBase.pageSize[pageNumber].width*this.pdfViewerBase.getZoomFactor()+'px';// eslint-disable-next-line max-len
annotCanvas.style.height=this.pdfViewerBase.pageSize[pageNumber].height*this.pdfViewerBase.getZoomFactor()+'px';}else{// eslint-disable-next-line max-len
annotCanvas.width=this.pdfViewerBase.pageSize[pageNumber].width*this.pdfViewerBase.getZoomFactor();annotCanvas.height=this.pdfViewerBase.pageSize[pageNumber].height*this.pdfViewerBase.getZoomFactor();}this.renderTextMarkupAnnotations(null,pageNumber,annotCanvas,this.pdfViewerBase.getZoomFactor());}};/**
     * @param pageNumber
     * @private
     */TextMarkupAnnotation.prototype.rerenderAnnotations=function(pageNumber){// eslint-disable-next-line
var oldCanvasCollection=document.querySelectorAll('#'+this.pdfViewer.dataId+'_old_annotationCanvas_'+pageNumber);for(var i=0;i<oldCanvasCollection.length;i++){if(oldCanvasCollection[i]){oldCanvasCollection[i].parentElement.removeChild(oldCanvasCollection[i]);}}var newCanvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(newCanvas){newCanvas.style.display='block';}};/**
     * @param event
     * @private
     */TextMarkupAnnotation.prototype.onTextMarkupAnnotationMouseUp=function(event){var pageNumber=this.pdfViewer.annotationModule.getEventPageNumber(event);if(!sf.base.isNullOrUndefined(pageNumber)&&!isNaN(pageNumber)){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(this.currentTextMarkupAnnotation){this.selectedTextMarkup=this.currentTextMarkupAnnotation;}else{this.selectedTextMarkup=null;}this.clearCurrentSelectedAnnotation();var currentAnnot=this.getCurrentMarkupAnnotation(event.clientX,event.clientY,pageNumber,canvas);if(currentAnnot&&!window.getSelection().toString()){var isLock=false;var isSelection=false;if(currentAnnot.annotationSettings&&currentAnnot.annotationSettings.isLock){isLock=currentAnnot.annotationSettings.isLock;if(isLock&&this.pdfViewer.annotationModule.checkAllowedInteractions('Select',currentAnnot)){isLock=false;if(this.pdfViewer.annotationModule.checkAllowedInteractions('PropertyChange',currentAnnot)){isSelection=false;}else{isSelection=true;}}}if(!isLock){var canvasParentPosition=canvas.parentElement.getBoundingClientRect();var leftClickPosition=event.clientX-canvasParentPosition.left;var topClickPosition=event.clientY-canvasParentPosition.top;this.annotationClickPosition={x:leftClickPosition,y:topClickPosition};this.selectAnnotation(currentAnnot,canvas,pageNumber,event);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(this.currentTextMarkupAnnotation.textMarkupAnnotationType);}this.currentTextMarkupAnnotation=currentAnnot;this.selectTextMarkupCurrentPage=pageNumber;if(!isSelection){this.enableAnnotationPropertiesTool(true);}var commentPanelDiv=document.getElementById(this.pdfViewer.dataId+'_commantPanel');if(commentPanelDiv&&commentPanelDiv.style.display==='block'){// eslint-disable-next-line
var comments=document.getElementById(currentAnnot.annotName);if(comments){if(comments.firstElementChild){comments.firstElementChild.click();}}}if(!sf.base.isBlazor()){if(this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=true;// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);}}}}else{this.clearCurrentAnnotation();}if(this.pdfViewer.isMaintainSelection&&!this.pdfViewer.textSelectionModule.isTextSelection){if(currentAnnot){this.clearCurrentAnnotationSelection(pageNumber);}}else{this.clearCurrentAnnotationSelection(pageNumber);}}else{if(!this.pdfViewerBase.isClickedOnScrollBar(event,true)){this.clearCurrentAnnotation();this.clearCurrentAnnotationSelection(pageNumber);}}};/**
     * @param event
     * @private
     */TextMarkupAnnotation.prototype.onTextMarkupAnnotationTouchEnd=function(event){var pageNumber=this.pdfViewer.annotationModule.getEventPageNumber(event);if(!sf.base.isNullOrUndefined(pageNumber)&&!isNaN(pageNumber)){if(this.currentTextMarkupAnnotation){this.selectedTextMarkup=this.currentTextMarkupAnnotation;}else{this.selectedTextMarkup=null;}this.clearCurrentAnnotationSelection(pageNumber);var touchCanvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);this.clearCurrentSelectedAnnotation();// eslint-disable-next-line max-len
var currentAnnot=this.getCurrentMarkupAnnotation(event.touches[0].clientX,event.touches[0].clientY,pageNumber,touchCanvas);if(currentAnnot){var isLock=false;if(currentAnnot.annotationSettings&&currentAnnot.annotationSettings.isLock){isLock=currentAnnot.annotationSettings.isLock;}if(!isLock){var canvasParentPosition=touchCanvas.parentElement.getBoundingClientRect();var leftClickPosition=event.touches[0].clientX-canvasParentPosition.left;var topClickPosition=event.touches[0].clientY-canvasParentPosition.top;this.annotationClickPosition={x:leftClickPosition,y:topClickPosition};this.selectAnnotation(currentAnnot,touchCanvas,pageNumber,event);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(this.currentTextMarkupAnnotation.textMarkupAnnotationType);}this.currentTextMarkupAnnotation=currentAnnot;this.selectTextMarkupCurrentPage=pageNumber;this.enableAnnotationPropertiesTool(true);// eslint-disable-next-line
var accordionExpand=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+(pageNumber+1));if(accordionExpand){accordionExpand.ej2_instances[0].expandItem(true);}// eslint-disable-next-line
var comments=document.getElementById(currentAnnot.annotName);if(comments){if(!sf.base.Browser.isDevice){comments.firstChild.click();}}}}else{this.clearCurrentAnnotation();}this.clearCurrentAnnotationSelection(pageNumber);}else if(this.selectTextMarkupCurrentPage!=null&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var number=this.selectTextMarkupCurrentPage;this.selectTextMarkupCurrentPage=null;this.clearAnnotationSelection(number);}else{this.clearCurrentAnnotation();this.clearCurrentAnnotationSelection(pageNumber);}};/**
     * @private
     */TextMarkupAnnotation.prototype.clearCurrentSelectedAnnotation=function(){if(this.currentTextMarkupAnnotation){this.clearAnnotationSelection(this.selectTextMarkupCurrentPage);// eslint-disable-next-line
var currentAnnot=this.currentTextMarkupAnnotation;this.pdfViewer.fireAnnotationUnSelect(currentAnnot.annotName,currentAnnot.pageNumber,currentAnnot);this.clearCurrentAnnotation();}};/**
     * @param event
     * @private
     */TextMarkupAnnotation.prototype.onTextMarkupAnnotationMouseMove=function(event){var eventTarget=event.target;// eslint-disable-next-line
var pageIndex=parseInt(eventTarget.id.split('_text_')[1])||parseInt(eventTarget.id.split('_textLayer_')[1])||parseInt(eventTarget.id.split('_annotationCanvas_')[1]);if(event.target&&(eventTarget.id.indexOf('_text')>-1||eventTarget.id.indexOf('_annotationCanvas')>-1||eventTarget.classList.contains('e-pv-hyperlink'))&&this.pdfViewer.annotation){pageIndex=this.pdfViewer.annotation.getEventPageNumber(event);var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageIndex);var currentAnnot=this.getCurrentMarkupAnnotation(event.clientX,event.clientY,pageIndex,canvas);if(currentAnnot){eventTarget.style.cursor='pointer';// eslint-disable-next-line
var currentPosition=this.pdfViewerBase.getMousePosition(event);// eslint-disable-next-line
var relativePosition=this.pdfViewerBase.relativePosition(event);// eslint-disable-next-line
var viewerPositions={left:relativePosition.x,top:relativePosition.y};// eslint-disable-next-line
var mousePositions={left:currentPosition.x,top:currentPosition.y};// eslint-disable-next-line
var annotationSettings={opacity:currentAnnot.opacity,color:currentAnnot.color,author:currentAnnot.author,subject:currentAnnot.subject,modifiedDate:currentAnnot.modifiedDate};// eslint-disable-next-line max-len
this.pdfViewerBase.isMousedOver=true;this.pdfViewer.fireAnnotationMouseover(currentAnnot.annotName,currentAnnot.pageNumber,currentAnnot.textMarkupAnnotationType,currentAnnot.bounds,annotationSettings,mousePositions,viewerPositions);// this.showPopupNote(event, currentAnnot);
}else{this.pdfViewer.annotationModule.hidePopupNote();if(this.pdfViewerBase.isPanMode&&!this.pdfViewerBase.getAnnotationToolStatus()){eventTarget.style.cursor='grab';}if(this.pdfViewerBase.isMousedOver&&!this.pdfViewerBase.isFormFieldMousedOver){this.pdfViewer.fireAnnotationMouseLeave(pageIndex);this.pdfViewerBase.isMousedOver=false;}}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.showPopupNote=function(event,annotation){if(annotation.note){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.showPopupNote(event,annotation.color,annotation.author,annotation.note,annotation.textMarkupAnnotationType);}};TextMarkupAnnotation.prototype.getCurrentMarkupAnnotation=function(clientX,clientY,pageNumber,canvas){var currentTextMarkupAnnotations=[];if(canvas){var canvasParentPosition=canvas.parentElement.getBoundingClientRect();if(canvas.clientWidth!==canvas.parentElement.clientWidth){canvasParentPosition=canvas.getBoundingClientRect();}var leftClickPosition=clientX-canvasParentPosition.left;var topClickPosition=clientY-canvasParentPosition.top;var annotationList=this.getAnnotations(pageNumber,null);var isAnnotationGot=false;if(annotationList){for(var i=0;i<annotationList.length;i++){var annotation=annotationList[i];for(var j=0;j<annotation.bounds.length;j++){// eslint-disable-next-line
var bound=annotation.bounds[j];var left=bound.left?bound.left:bound.Left;var top_2=bound.top?bound.top:bound.Top;var width=bound.width?bound.width:bound.Width;var height=bound.height?bound.height:bound.Height;// eslint-disable-next-line max-len
if(leftClickPosition>=this.getMagnifiedValue(left,this.pdfViewerBase.getZoomFactor())&&leftClickPosition<=this.getMagnifiedValue(left+width,this.pdfViewerBase.getZoomFactor())&&topClickPosition>=this.getMagnifiedValue(top_2,this.pdfViewerBase.getZoomFactor())&&topClickPosition<=this.getMagnifiedValue(top_2+height,this.pdfViewerBase.getZoomFactor())){currentTextMarkupAnnotations.push(annotation);isAnnotationGot=true;}else{if(isAnnotationGot){isAnnotationGot=false;break;}}}}}var currentAnnot=null;if(currentTextMarkupAnnotations.length>1){currentAnnot=this.compareCurrentAnnotations(currentTextMarkupAnnotations);}else if(currentTextMarkupAnnotations.length===1){currentAnnot=currentTextMarkupAnnotations[0];}return currentAnnot;}else{return null;}};TextMarkupAnnotation.prototype.compareCurrentAnnotations=function(annotations){var previousX;var currentAnnotation=null;for(var i=0;i<annotations.length;i++){if(i===annotations.length-1){break;}// eslint-disable-next-line
var firstAnnotBounds=annotations[i].bounds;var firstXposition=firstAnnotBounds[0].left?firstAnnotBounds[0].left:firstAnnotBounds[0].Left;var firstYposition=firstAnnotBounds[0].top?firstAnnotBounds[0].top:firstAnnotBounds[0].Top;// eslint-disable-next-line
var secondAnnotBounds=annotations[i+1].bounds;var secondXposition=secondAnnotBounds[0].left?secondAnnotBounds[0].left:secondAnnotBounds[0].Left;var secondYposition=secondAnnotBounds[0].top?secondAnnotBounds[0].top:secondAnnotBounds[0].Top;if(firstXposition<secondXposition||firstYposition<secondYposition){previousX=secondXposition;currentAnnotation=annotations[i+1];}else{previousX=firstXposition;currentAnnotation=annotations[i];}if(previousX&&i===annotations.length-2){if(previousX===firstXposition&&previousX===secondXposition){previousX=secondXposition;currentAnnotation=annotations[i+1];}}}return currentAnnotation;};/**
     * @param pageNumber
     * @private
     */TextMarkupAnnotation.prototype.clearAnnotationSelection=function(pageNumber){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(canvas){var context=canvas.getContext('2d');context.setLineDash([]);this.pdfViewer.annotationModule.renderAnnotations(pageNumber,null,null,null);}};/**
     * @param annotation
     * @param canvas
     * @param pageNumber
     * @param event
     * @param isProgrammaticSelection
     * @param annotation
     * @param canvas
     * @param pageNumber
     * @param event
     * @param isProgrammaticSelection
     * @private
     */ // eslint-disable-next-line max-len
TextMarkupAnnotation.prototype.selectAnnotation=function(annotation,canvas,pageNumber,event,isProgrammaticSelection){if(this.pdfViewer.selectedItems.annotations[0]){this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.annotations[0].pageIndex);this.pdfViewer.clearSelection(this.selectTextMarkupCurrentPage);}var isLock=false;if(annotation.annotationSettings&&annotation.annotationSettings.isLock){isLock=annotation.annotationSettings.isLock;if(isLock&&this.pdfViewer.annotationModule.checkAllowedInteractions('Select',annotation)){isLock=false;}}if(!isLock){var isCurrentTextMarkup=false;if(!this.currentTextMarkupAnnotation){isCurrentTextMarkup=true;}if(this.selectedTextMarkup&&annotation&&!isProgrammaticSelection){if(this.selectedTextMarkup.annotName===annotation.annotName){isCurrentTextMarkup=false;}else{isCurrentTextMarkup=true;}}if(!isNaN(pageNumber)){this.selectTextMarkupCurrentPage=pageNumber;this.currentTextMarkupAnnotation=annotation;annotation=this.retreiveTextIndex(annotation);this.currentTextMarkupAnnotation=annotation;}if(this.isSelectedAnnotation&&this.pdfViewer.textSelectionModule){this.pdfViewerBase.isSelection=true;this.updateAnnotationBounds();}// eslint-disable-next-line
var currentEvent=event;if(this.isEnableTextMarkupResizer(annotation.textMarkupAnnotationType)&&annotation&&currentEvent&&!currentEvent.touches){this.updateCurrentResizerPosition(annotation);}this.drawAnnotationSelector(annotation,this.currentTextMarkupAnnotation,canvas);if(annotation.isMultiSelect&&annotation.annotNameCollection){this.selectMultiPageAnnotations(annotation);}if(annotation.annotName!==''&&!this.isNewAnnotation){if(isCurrentTextMarkup){var isSelected=false;if(!currentEvent){isSelected=true;}// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.annotationSelect(annotation.annotName,this.selectTextMarkupCurrentPage,annotation,null,false,isSelected);this.selectedTextMarkup=null;}}if(annotation&&this.isEnableTextMarkupResizer(annotation.textMarkupAnnotationType)){this.isTextMarkupAnnotationMode=true;}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.updateCurrentResizerPosition=function(annotation){if(!annotation){annotation=this.currentTextMarkupAnnotation;}if(annotation){if(this.isEnableTextMarkupResizer(annotation.textMarkupAnnotationType)&&annotation){// eslint-disable-next-line
var textElement=this.pdfViewerBase.getElement('_textLayer_'+this.selectTextMarkupCurrentPage);if(textElement){// eslint-disable-next-line
var boundingRect=textElement.getBoundingClientRect();var left=annotation.bounds[0].left?annotation.bounds[0].left:annotation.bounds[0].Left;var top_3=annotation.bounds[0].top?annotation.bounds[0].top:annotation.bounds[0].Top;this.updateLeftposition(left*this.pdfViewerBase.getZoomFactor()+boundingRect.left,boundingRect.top+top_3,true);// eslint-disable-next-line
var endPosition=annotation.bounds[annotation.bounds.length-1];var endLeft=endPosition.left?endPosition.left:endPosition.Left;var endTop=endPosition.top?endPosition.top:endPosition.Top;var endWidth=endPosition.width?endPosition.width:endPosition.Width;// eslint-disable-next-line max-len
this.updatePosition((endLeft+endWidth)*this.pdfViewerBase.getZoomFactor()+boundingRect.left,endTop+boundingRect.top,true);}}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.drawAnnotationSelectRect=function(canvas,x,y,width,height,annotation){var ratio=this.pdfViewerBase.getZoomRatio();if(canvas){var context=canvas.getContext('2d');context.setTransform(1,0,0,1,0,0);context.beginPath();if(typeof annotation.annotationSelectorSettings==='string'){// eslint-disable-next-line max-len
var lineDash=JSON.parse(annotation.annotationSelectorSettings).selectorLineDashArray.length===0?[4]:JSON.parse(annotation.annotationSelectorSettings).selectorLineDashArray;if(lineDash.length>2){lineDash=[lineDash[0],lineDash[1]];}context.setLineDash(lineDash);context.globalAlpha=1;context.rect(x*ratio,y*ratio,width*ratio,height*ratio);context.closePath();// eslint-disable-next-line max-len
var borderColor=JSON.parse(annotation.annotationSelectorSettings).selectionBorderColor===''?'#0000ff':JSON.parse(annotation.annotationSelectorSettings).selectionBorderColor;context.strokeStyle=borderColor;// eslint-disable-next-line max-len
context.lineWidth=JSON.parse(annotation.annotationSelectorSettings).selectionBorderThickness===1?1:annotation.annotationSelectorSettings.selectionBorderThickness;context.stroke();context.save();}else{// eslint-disable-next-line max-len
var lineDash=annotation.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:annotation.annotationSelectorSettings.selectorLineDashArray;if(lineDash.length>2){lineDash=[lineDash[0],lineDash[1]];}context.setLineDash(lineDash);context.globalAlpha=1;context.rect(x*ratio,y*ratio,width*ratio,height*ratio);context.closePath();// eslint-disable-next-line max-len
var borderColor=annotation.annotationSelectorSettings.selectionBorderColor===''?'#0000ff':annotation.annotationSelectorSettings.selectionBorderColor;context.strokeStyle=borderColor;// eslint-disable-next-line max-len
context.lineWidth=annotation.annotationSelectorSettings.selectionBorderThickness?1:annotation.annotationSelectorSettings.selectionBorderThickness;context.stroke();context.save();}}};/**
     * @param isEnable
     * @private
     */TextMarkupAnnotation.prototype.enableAnnotationPropertiesTool=function(isEnable){if(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule){// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector('.e-pv-annotation-color-container');}// eslint-disable-next-line max-len
if(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule){if(!sf.base.Browser.isDevice){this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(isEnable);}}// eslint-disable-next-line max-len
if(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.isMobileAnnotEnabled&&this.pdfViewer.selectedItems.annotations.length===0){if(this.pdfViewer.toolbarModule.annotationToolbarModule){this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(isEnable);var enable=isEnable;if(this.isTextMarkupAnnotationMode){enable=true;}this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(enable);if(this.currentTextMarkupAnnotation){if(!sf.base.isBlazor()){// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement,this.currentTextMarkupAnnotation.color);}else{// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor,this.currentTextMarkupAnnotation.color);}}else{if(!sf.base.isNullOrUndefined(this.isTextMarkupAnnotationMode)&&!this.isTextMarkupAnnotationMode){if(!sf.base.isBlazor()){// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement,'#000000');}else{// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor,'#000000');}}else{this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker();}}}}};/**
     * @private
     */TextMarkupAnnotation.prototype.maintainAnnotationSelection=function(){if(this.currentTextMarkupAnnotation){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+this.selectTextMarkupCurrentPage);if(canvas){this.selectAnnotation(this.currentTextMarkupAnnotation,canvas,this.selectTextMarkupCurrentPage);}}};// private storeAnnotations(pageNumber: number, annotation: ITextMarkupAnnotation): number {
// eslint-disable-next-line
//     let storeObject: any = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');
//     let index: number = 0;
//     if (!storeObject) {
//         let markupAnnotation: IPageAnnotations = { pageIndex: pageNumber, annotations: [] };
//         markupAnnotation.annotations.push(annotation);
//         index = markupAnnotation.annotations.indexOf(annotation);
//         let annotationCollection: IPageAnnotations[] = [];
//         annotationCollection.push(markupAnnotation);
//         let annotationStringified: string = JSON.stringify(annotationCollection);
//         window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);
//     } else {
//         let annotObject: IPageAnnotations[] = JSON.parse(storeObject);
//         window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');
//         let pageIndex: number = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);
//         if (annotObject[pageIndex]) {
//             (annotObject[pageIndex] as IPageAnnotations).annotations.push(annotation);
//             index = (annotObject[pageIndex] as IPageAnnotations).annotations.indexOf(annotation);
//         } else {
//             let markupAnnotation: IPageAnnotations = { pageIndex: pageNumber, annotations: [] };
//             markupAnnotation.annotations.push(annotation);
//             index = markupAnnotation.annotations.indexOf(annotation);
//             annotObject.push(markupAnnotation);
//         }
//         let annotationStringified: string = JSON.stringify(annotObject);
//         window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);
//     }
//     return index;
// }
/**
     * @param pageAnnotations
     * @param pageNumber
     * @private
     */TextMarkupAnnotation.prototype.manageAnnotations=function(pageAnnotations,pageNumber){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_textMarkup');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_textMarkup'];}if(storeObject){var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_textMarkup');}var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_textMarkup']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_textMarkup',annotationStringified);}}};/**
     * @param pageIndex
     * @param textMarkupAnnotations
     * @param id
     * @param pageIndex
     * @param textMarkupAnnotations
     * @param id
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.getAnnotations=function(pageIndex,textMarkupAnnotations,id){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
if(id==null||id==undefined){id='_annotations_textMarkup';}// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+id);if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+id];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=textMarkupAnnotations;}}else{annotationCollection=textMarkupAnnotations;}return annotationCollection;};// eslint-disable-next-line max-len
// eslint-disable-next-line
TextMarkupAnnotation.prototype.getAddedAnnotation=function(type,color,opacity,bounds,author,subject,predefinedDate,note,isCommentLock,rect,pageNumber,textContent,startIndex,endIndex,isMultiSelect,allowedInteractions,annotationRotate){// eslint-disable-next-line max-len
var modifiedDate=predefinedDate?predefinedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('textMarkup',pageNumber+1,type,annotationName,'',author);// eslint-disable-next-line
var annotationSettings=this.getAnnotationSettings(type);var isPrint=this.getIsPrintValue(type);var annotation={// eslint-disable-next-line max-len
textMarkupAnnotationType:type,color:color,opacity:opacity,bounds:bounds,author:author,allowedInteractions:allowedInteractions,subject:subject,modifiedDate:modifiedDate,note:note,rect:rect,annotName:annotationName,comments:[],review:{state:'',stateModel:'',author:author,modifiedDate:modifiedDate},shapeAnnotationType:'textMarkup',pageNumber:pageNumber,// eslint-disable-next-line max-len
textMarkupContent:textContent,textMarkupStartIndex:startIndex,textMarkupEndIndex:endIndex,isMultiSelect:isMultiSelect,annotationSelectorSettings:this.getSelector(type),customData:this.pdfViewer.annotation.getTextMarkupData(subject),annotationAddMode:this.annotationAddMode,annotationSettings:annotationSettings,isPrint:isPrint,isCommentLock:isCommentLock,isAnnotationRotated:false,annotationRotation:annotationRotate};if(isMultiSelect){this.multiPageCollection.push(annotation);}var isSkip=false;if(isMultiSelect&&this.isExtended){isSkip=true;}if(document.getElementById(annotationName)&&!isSkip){document.getElementById(annotationName).addEventListener('mouseup',this.annotationDivSelect(annotation,pageNumber));}var storedIndex=this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotation,'_annotations_textMarkup');this.pdfViewer.annotationModule.addAction(pageNumber,storedIndex,annotation,'Text Markup Added',null);return annotation;};TextMarkupAnnotation.prototype.getSelector=function(type){var selector=this.pdfViewer.annotationSelectorSettings;if(type==='Highlight'&&this.pdfViewer.highlightSettings.annotationSelectorSettings){selector=this.pdfViewer.highlightSettings.annotationSelectorSettings;}else if(type==='Underline'&&this.pdfViewer.underlineSettings.annotationSelectorSettings){selector=this.pdfViewer.underlineSettings.annotationSelectorSettings;}else if(type==='Strikethrough'&&this.pdfViewer.strikethroughSettings.annotationSelectorSettings){selector=this.pdfViewer.strikethroughSettings.annotationSelectorSettings;}return selector;};TextMarkupAnnotation.prototype.getAnnotationSettings=function(type){var annotationSettings={isLock:false};if(type==='Highlight'&&this.pdfViewer.highlightSettings.isLock){annotationSettings={isLock:true};}else if(type==='Underline'&&this.pdfViewer.underlineSettings.isLock){annotationSettings={isLock:true};}else if(type==='Strikethrough'&&this.pdfViewer.strikethroughSettings.isLock){annotationSettings={isLock:true};}else if(this.pdfViewer.annotationSettings.isLock){annotationSettings={isLock:true};}return annotationSettings;};TextMarkupAnnotation.prototype.getIsPrintValue=function(type){var isPrint=true;if(type==='Highlight'){isPrint=this.pdfViewer.highlightSettings.isPrint;}if(type==='Underline'){isPrint=this.pdfViewer.underlineSettings.isPrint;}if(type==='Strikethrough'){isPrint=this.pdfViewer.strikethroughSettings.isPrint;}return isPrint;};// eslint-disable-next-line
TextMarkupAnnotation.prototype.annotationDivSelect=function(annotation,pageNumber){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);this.selectAnnotation(annotation,canvas,pageNumber);if(this.pdfViewer.toolbarModule){if(this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode();this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode();var isLock=false;if(annotation.annotationSettings&&annotation.annotationSettings.isLock){isLock=annotation.annotationSettings.isLock;}if(isLock){if(this.pdfViewer.annotationModule.checkAllowedInteractions('PropertyChange',annotation)){this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(true);this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker();}if(this.pdfViewer.annotationModule.checkAllowedInteractions('Delete',annotation)){this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(true);}}else{this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(true);this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(true);this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker();}this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=true;if(!sf.base.isBlazor()){this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);}}}};TextMarkupAnnotation.prototype.getPageContext=function(pageNumber){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);var context=null;if(canvas){context=canvas.getContext('2d');}return context;};TextMarkupAnnotation.prototype.getDefaultValue=function(value){return value/this.pdfViewerBase.getZoomFactor();};TextMarkupAnnotation.prototype.getMagnifiedValue=function(value,factor){return value*factor;};/**
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.saveImportedTextMarkupAnnotations=function(annotation,pageNumber){var annotationObject=null;annotation.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor('textMarkup',annotation.Subject);if(annotation.AnnotationSettings&&annotation.AnnotationSettings.isLock){annotation.AnnotationSettings={isLock:annotation.AnnotationSettings.isLock};}else{annotation.AnnotationSettings=this.getAnnotationSettings(annotation.TextMarkupAnnotationType);}// eslint-disable-next-line max-len
annotation.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);// eslint-disable-next-line max-len
annotationObject={// eslint-disable-next-line max-len
textMarkupAnnotationType:annotation.TextMarkupAnnotationType,color:annotation.Color,opacity:annotation.Opacity,allowedInteractions:annotation.allowedInteractions,bounds:annotation.Bounds,author:annotation.Author,subject:annotation.Subject,modifiedDate:annotation.ModifiedDate,note:annotation.Note,rect:annotation.Rect,annotName:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},shapeAnnotationType:'textMarkup',pageNumber:pageNumber,textMarkupContent:annotation.TextMarkupContent,textMarkupStartIndex:0,// eslint-disable-next-line max-len
textMarkupEndIndex:0,annotationSelectorSettings:this.getSettings(annotation),customData:this.pdfViewer.annotation.getCustomData(annotation),isMultiSelect:annotation.IsMultiSelect,annotNameCollection:annotation.AnnotNameCollection,annotpageNumbers:annotation.AnnotpageNumbers,// eslint-disable-next-line max-len
annotationAddMode:this.annotationAddMode,annotationSettings:annotation.AnnotationSettings,isPrint:annotation.isPrint,isCommentLock:annotation.IsCommentLock,isAnnotationRotated:false};this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_textMarkup');};/**
     * @param annotation
     * @param pageNumber
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.updateTextMarkupAnnotationCollections=function(annotation,pageNumber){// eslint-disable-next-line
var annotationObject=null;// eslint-disable-next-line max-len
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);annotationObject={// eslint-disable-next-line max-len
textMarkupAnnotationType:annotation.TextMarkupAnnotationType,allowedInteractions:annotation.allowedInteractions,color:annotation.Color,opacity:annotation.Opacity,bounds:annotation.Bounds,author:annotation.Author,subject:annotation.Subject,modifiedDate:annotation.ModifiedDate,note:annotation.Note,rect:annotation.Rect,annotationId:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},shapeAnnotationType:'textMarkup',pageNumber:pageNumber,isMultiSelect:annotation.IsMultiSelect,annotNameCollection:annotation.AnnotNameCollection,annotpageNumbers:annotation.AnnotpageNumbers,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.isPrint,isCommentLock:annotation.IsCommentLock};return annotationObject;};/**
     * @param textMarkUpSettings
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.updateTextMarkupSettings=function(textMarkUpSettings){if(textMarkUpSettings==='highlightSettings'){// eslint-disable-next-line max-len
this.highlightColor=this.pdfViewer.highlightSettings.color?this.pdfViewer.highlightSettings.color:this.highlightColor;// eslint-disable-next-line max-len
this.highlightOpacity=this.pdfViewer.highlightSettings.opacity?this.pdfViewer.highlightSettings.opacity:this.highlightOpacity;}if(textMarkUpSettings==='underlineSettings'){// eslint-disable-next-line max-len
this.underlineColor=this.pdfViewer.underlineSettings.color?this.pdfViewer.underlineSettings.color:this.underlineColor;// eslint-disable-next-line max-len
this.underlineOpacity=this.pdfViewer.underlineSettings.opacity?this.pdfViewer.underlineSettings.opacity:this.underlineOpacity;}if(textMarkUpSettings==='strikethroughSettings'){// eslint-disable-next-line max-len
this.strikethroughColor=this.pdfViewer.strikethroughSettings.color?this.pdfViewer.strikethroughSettings.color:this.strikethroughColor;// eslint-disable-next-line max-len
this.strikethroughOpacity=this.pdfViewer.strikethroughSettings.opacity?this.pdfViewer.strikethroughSettings.opacity:this.strikethroughOpacity;}};/**
     * @private
     */TextMarkupAnnotation.prototype.clear=function(){this.selectTextMarkupCurrentPage=null;this.currentTextMarkupAnnotation=null;this.annotationClickPosition=null;window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_textMarkup');};/**
     * Get vertex points properties
     * @private
     */TextMarkupAnnotation.prototype.getOffsetPoints=function(points){var offsetPoints=[];//Converting points model into vertex property
for(var j=0;j<points.length;j++){offsetPoints[j]={X:points[j].x,Y:points[j].y,Width:points[j].width,Height:points[j].height,Left:points[j].x,Top:points[j].y};}return offsetPoints;};/**
     * This method used to add annotations with using program.
     *
     * @param annotationType - It describes the annotation type
     * @param annotationObject - It describes type of annotation object
     * @returns Object
     * @private
     */TextMarkupAnnotation.prototype.updateAddAnnotationDetails=function(annotationType,annotationObject){//Creating new object if annotationObject is null
if(!annotationObject){annotationObject={pageNumber:0};}//Initialize the annotation settings
var annotSelectorSettings=null;var annotallowedInteractions=null;var textMarkupAnnotationType='';var annotSettings=null;var color='';var bounds=[];//Creating the CurrentDate and Annotation name
var currentDateString=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();if(annotationType=='Highlight'){//Creating annotation settings
annotSelectorSettings=this.pdfViewer.highlightSettings.annotationSelectorSettings?this.pdfViewer.highlightSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.highlightSettings);annotallowedInteractions=this.pdfViewer.highlightSettings.allowedInteractions?this.pdfViewer.highlightSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;textMarkupAnnotationType='Highlight';color=annotationObject.color?annotationObject.color:'#ffff00';}else if(annotationType=='Underline'){//Creating annotation settings
annotSelectorSettings=this.pdfViewer.underlineSettings.annotationSelectorSettings?this.pdfViewer.underlineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.underlineSettings);annotallowedInteractions=this.pdfViewer.underlineSettings.allowedInteractions?this.pdfViewer.underlineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;textMarkupAnnotationType='Underline';color=annotationObject.color?annotationObject.color:'#00ff00';}else if(annotationType=='Strikethrough'){//Creating annotation settings
annotSelectorSettings=this.pdfViewer.strikethroughSettings.annotationSelectorSettings?this.pdfViewer.strikethroughSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.strikethroughSettings);annotallowedInteractions=this.pdfViewer.strikethroughSettings.allowedInteractions?this.pdfViewer.strikethroughSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;textMarkupAnnotationType='Strikethrough';color=annotationObject.color?annotationObject.color:'#ff0000';}annotSettings.isLock=annotationObject.isLock?annotationObject.isLock:false;//Creating the offset points
if(annotationObject.bounds){bounds=this.getOffsetPoints(annotationObject.bounds);}else bounds=[{X:1,Y:1,Width:100,Height:14,Left:1,Top:1,Location:{X:1,Y:1},Size:{Height:14,IsEmpty:false,Width:100}}];//Creating Annotation objects with it's proper properties       
var textMarkupAnnotation=[];var textmarkup={AllowedInteractions:annotationObject.allowedInteractions?annotationObject.allowedInteractions:annotallowedInteractions,AnnotName:annotationName,AnnotNameCollection:null,AnnotType:'textMarkup',AnnotationSelectorSettings:annotationObject.annotationSelectorSettings?annotationObject.annotationSelectorSettings:annotSelectorSettings,AnnotationSettings:annotSettings,Author:annotationObject.author?annotationObject.author:'Guest',Bounds:bounds,Color:annotationObject.color?annotationObject.color:color,Comments:null,CreatedDate:currentDateString,CustomData:annotationObject.customData?annotationObject.customData:null,ExistingCustomData:null,EnableMultiPageAnnotation:annotationObject.enableMultiPageAnnotation?annotationObject.enableMultiPageAnnotation:false,EnableTextMarkupResizer:annotationObject.enableTextMarkupResizer?annotationObject.enableTextMarkupResizer:false,IsCommentLock:false,IsMultiSelect:false,IsLock:annotationObject.isLock?annotationObject.isLock:false,IsPrint:annotationObject.isPrint?annotationObject.isPrint:true,ModifiedDate:currentDateString,Note:'',Opacity:annotationObject.opacity?annotationObject.opacity:1,Rect:{},State:'',StateModel:'',Subject:textMarkupAnnotationType,TextMarkupAnnotationType:textMarkupAnnotationType};//Adding the annotation object to an array and return it
textMarkupAnnotation[0]=textmarkup;return{textMarkupAnnotation:textMarkupAnnotation};};return TextMarkupAnnotation;}();/**
 * @hidden
 */var MeasureAnnotation=/** @class */function(){function MeasureAnnotation(pdfviewer,pdfViewerBase){/**
         * @private
         */this.measureShapeCount=0;/**
         * @private
         */this.isAddAnnotationProgramatically=false;this.pdfViewer=pdfviewer;this.pdfViewerBase=pdfViewerBase;}Object.defineProperty(MeasureAnnotation.prototype,"pixelToPointFactor",{/**
         * @private
         */get:function get(){return 72/96;},enumerable:true,configurable:true});/**
     * @param shapeAnnotations
     * @param pageNumber
     * @param isImportAction
     * @param shapeAnnotations
     * @param pageNumber
     * @param isImportAction
     * @private
     */ // eslint-disable-next-line
MeasureAnnotation.prototype.renderMeasureShapeAnnotations=function(shapeAnnotations,pageNumber,isImportAction){if(shapeAnnotations){if(shapeAnnotations.length>=1){// eslint-disable-next-line
var measureAnnots=this.pdfViewer.annotation.getStoredAnnotations(pageNumber,shapeAnnotations,'_annotations_shape_measure');if(!measureAnnots||isImportAction){for(var i=0;i<shapeAnnotations.length;i++){// eslint-disable-next-line
var annotation=shapeAnnotations[i];var annotationObject=null;this.measureShapeCount=this.measureShapeCount+1;// eslint-disable-next-line max-len
annotation.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(annotation,pageNumber,annotation.AnnotType);var isAnnotationRotated=void 0;if(annotation.ShapeAnnotationType){if(isImportAction){if(this.pdfViewerBase.isJsonImported){annotation.Bounds=this.pdfViewerBase.importJsonForRotatedDocuments(annotation.Rotate,pageNumber,annotation.Bounds,annotation.AnnotationRotation);isAnnotationRotated=this.pdfViewerBase.isPageRotated;}}var vertexPoints=null;if(annotation.VertexPoints){vertexPoints=[];if(isImportAction&&this.pdfViewerBase.isJsonImported){vertexPoints=this.pdfViewerBase.calculateVertexPoints(annotation.Rotate,pageNumber,annotation.VertexPoints,annotation.AnnotationRotation);}else{for(var j=0;j<annotation.VertexPoints.length;j++){var x=annotation.VertexPoints[j].X?annotation.VertexPoints[j].X:annotation.VertexPoints[j].x;var y=annotation.VertexPoints[j].Y?annotation.VertexPoints[j].Y:annotation.VertexPoints[j].y;var point={x:x,y:y};vertexPoints.push(point);}}}if(annotation.Bounds&&annotation.EnableShapeLabel===true){// eslint-disable-next-line max-len
annotation.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds);annotation.LabelBorderColor=annotation.LabelBorderColor?annotation.LabelBorderColor:annotation.StrokeColor;annotation.FontColor=annotation.FontColor?annotation.FontColor:annotation.StrokeColor;annotation.LabelFillColor=annotation.LabelFillColor?annotation.LabelFillColor:annotation.FillColor;annotation.FontSize=annotation.FontSize?annotation.FontSize:16;// eslint-disable-next-line max-len
annotation.LabelSettings=annotation.LabelSettings?annotation.LabelSettings:this.pdfViewer.shapeLabelSettings;}// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);// eslint-disable-next-line max-len
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);var isPrint=annotation.AnnotationSettings.isPrint;var measureObject={// eslint-disable-next-line max-len
ratio:annotation.Calibrate.Ratio,x:this.getNumberFormatArray(annotation.Calibrate.X),distance:this.getNumberFormatArray(annotation.Calibrate.Distance),area:this.getNumberFormatArray(annotation.Calibrate.Area),angle:this.getNumberFormatArray(annotation.Calibrate.Angle),volume:this.getNumberFormatArray(annotation.Calibrate.Volume),targetUnitConversion:annotation.Calibrate.TargetUnitConversion};if(annotation.Calibrate.Depth){measureObject.depth=annotation.Calibrate.Depth;}var left=annotation.Bounds.X?annotation.Bounds.X:annotation.Bounds.x;var top_1=annotation.Bounds.Y?annotation.Bounds.Y:annotation.Bounds.y;var width=annotation.Bounds.Width?annotation.Bounds.Width:annotation.Bounds.width;var height=annotation.Bounds.Height?annotation.Bounds.Height:annotation.Bounds.height;annotationObject={// eslint-disable-next-line max-len
id:'measure'+this.measureShapeCount,shapeAnnotationType:annotation.ShapeAnnotationType,author:annotation.Author,allowedInteractions:annotation.allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,thickness:annotation.Thickness,rectangleDifference:annotation.RectangleDifference,// eslint-disable-next-line max-len
borderStyle:annotation.BorderStyle,borderDashArray:annotation.BorderDashArray,rotateAngle:annotation.RotateAngle,isCloudShape:annotation.IsCloudShape,cloudIntensity:annotation.CloudIntensity,vertexPoints:vertexPoints,lineHeadStart:annotation.LineHeadStart,lineHeadEnd:annotation.LineHeadEnd,isLocked:annotation.IsLocked,// eslint-disable-next-line max-len
bounds:{left:left,top:top_1,width:width,height:height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},caption:annotation.Caption,captionPosition:annotation.CaptionPosition,calibrate:measureObject,leaderLength:annotation.LeaderLength,leaderLineExtension:annotation.LeaderLineExtension,// eslint-disable-next-line max-len
leaderLineOffset:annotation.LeaderLineOffset,indent:annotation.Indent,annotName:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},// eslint-disable-next-line max-len
labelContent:annotation.LabelContent,enableShapeLabel:annotation.EnableShapeLabel,labelFillColor:annotation.LabelFillColor,fontColor:annotation.FontColor,labelBorderColor:annotation.LabelBorderColor,fontSize:annotation.FontSize,// eslint-disable-next-line max-len
labelBounds:annotation.LabelBounds,annotationSelectorSettings:this.getSettings(annotation),labelSettings:annotation.LabelSettings,annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:isPrint,isCommentLock:annotation.IsCommentLock,isAnnotationRotated:isAnnotationRotated};var annot=void 0;// eslint-disable-next-line
var vPoints=annotationObject.vertexPoints;if(vertexPoints==null){vPoints=[];}// eslint-disable-next-line max-len
annotation.AnnotationSelectorSettings=annotation.AnnotationSelectorSettings?annotation.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;// eslint-disable-next-line max-len
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);annot={// eslint-disable-next-line max-len
id:'measure'+this.measureShapeCount,shapeAnnotationType:this.getShapeType(annotationObject),author:annotationObject.author,allowedInteractions:annotation.allowedInteractions,modifiedDate:annotationObject.modifiedDate,subject:annotationObject.subject,notes:annotationObject.note,fillColor:annotationObject.fillColor,strokeColor:annotationObject.strokeColor,opacity:annotationObject.opacity,// eslint-disable-next-line max-len
thickness:annotationObject.thickness,borderStyle:annotationObject.borderStyle,borderDashArray:annotationObject.borderDashArray.toString(),rotateAngle:parseFloat(annotationObject.rotateAngle.split('Angle')[1]),isCloudShape:annotationObject.isCloudShape,cloudIntensity:annotationObject.cloudIntensity,taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(annotationObject.lineHeadEnd),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(annotationObject.lineHeadStart),// eslint-disable-next-line max-len
vertexPoints:vPoints,bounds:{x:annotationObject.bounds.left,y:annotationObject.bounds.top,width:annotationObject.bounds.width,height:annotationObject.bounds.height},leaderHeight:annotationObject.leaderLength,pageIndex:pageNumber,annotName:annotationObject.annotName,comments:annotationObject.comments,review:annotationObject.review,measureType:this.getMeasureType(annotationObject),// eslint-disable-next-line max-len
labelContent:annotation.LabelContent,enableShapeLabel:annotation.EnableShapeLabel,labelFillColor:annotation.LabelFillColor,fontColor:annotation.FontColor,labelBorderColor:annotation.LabelBorderColor,fontSize:annotation.FontSize,labelBounds:annotation.LabelBounds,annotationSelectorSettings:annotation.AnnotationSelectorSettings,annotationSettings:annotationObject.annotationSettings,annotationAddMode:annotation.annotationAddMode,isPrint:isPrint,isCommentLock:annotationObject.isCommentLock};this.pdfViewer.annotation.storeAnnotations(pageNumber,annotationObject,'_annotations_shape_measure');if(this.isAddAnnotationProgramatically){var settings={opacity:annot.opacity,strokeColor:annot.strokeColor,thickness:annot.thickness,modifiedDate:annot.modifiedDate,width:annot.bounds.width,height:annot.bounds.height};this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,annotation.ShapeAnnotationType,annot.bounds,settings);}this.pdfViewer.add(annot);}}}}else if(shapeAnnotations.shapeAnnotationType){var annotationObject=this.createAnnotationObject(shapeAnnotations);this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_shape_measure');this.pdfViewer.annotationModule.triggerAnnotationAdd(shapeAnnotations);}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
MeasureAnnotation.prototype.getSettings=function(annotation){var selector=this.pdfViewer.annotationSelectorSettings;if(annotation.AnnotationSelectorSettings){selector=annotation.AnnotationSelectorSettings;}else{selector=this.getSelector(annotation.Subject);}return selector;};/**
     * @param type
     * @private
     */MeasureAnnotation.prototype.setAnnotationType=function(type){var author='Guest';this.updateMeasureproperties();this.pdfViewerBase.disableTextSelectionMode();switch(type){case'Distance':this.currentAnnotationMode='Distance';var modifiedDateDist=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.distanceSettings.author?this.pdfViewer.distanceSettings.author:'Guest';this.pdfViewer.drawingObject={sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.distanceStartHead),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.distanceEndHead),measureType:'Distance',fillColor:this.distanceFillColor,notes:'',strokeColor:this.distanceStrokeColor,leaderHeight:this.leaderLength,opacity:this.distanceOpacity,thickness:this.distanceThickness,borderDashArray:this.distanceDashArray.toString(),// eslint-disable-next-line max-len
shapeAnnotationType:'Distance',author:author,subject:'Distance calculation',isCommentLock:false};this.pdfViewer.tool='Distance';break;case'Perimeter':this.currentAnnotationMode='Perimeter';var modifiedDatePeri=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.perimeterSettings.author?this.pdfViewer.perimeterSettings.author:'Guest';this.pdfViewer.drawingObject={// eslint-disable-next-line max-len
shapeAnnotationType:'LineWidthArrowHead',fillColor:this.perimeterFillColor,notes:'',strokeColor:this.perimeterStrokeColor,opacity:this.perimeterOpacity,thickness:this.perimeterThickness,sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.perimeterStartHead),// eslint-disable-next-line max-len
taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.perimeterEndHead),measureType:'Perimeter',borderDashArray:this.perimeterDashArray.toString(),author:author,subject:'Perimeter calculation',isCommentLock:false};this.pdfViewer.tool='Perimeter';break;case'Area':this.currentAnnotationMode='Area';var modifiedDateArea=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.areaSettings.author?this.pdfViewer.areaSettings.author:'Guest';this.pdfViewer.drawingObject={// eslint-disable-next-line max-len
shapeAnnotationType:'Polygon',fillColor:this.areaFillColor,notes:'',strokeColor:this.areaStrokeColor,thickness:this.areaThickness,opacity:this.areaOpacity,measureType:'Area',modifiedDate:modifiedDateArea,borderStyle:'',borderDashArray:'0',author:author,subject:'Area calculation',isCommentLock:false};this.pdfViewer.tool='Polygon';break;case'Radius':this.currentAnnotationMode='Radius';var modifiedDateRad=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.radiusSettings.author?this.pdfViewer.radiusSettings.author:'Guest';this.pdfViewer.drawingObject={// eslint-disable-next-line max-len
shapeAnnotationType:'Radius',fillColor:this.radiusFillColor,notes:'',strokeColor:this.radiusStrokeColor,opacity:this.radiusOpacity,thickness:this.radiusThickness,measureType:'Radius',modifiedDate:modifiedDateRad,borderStyle:'',borderDashArray:'0',author:author,subject:'Radius calculation',isCommentLock:false};this.pdfViewer.tool='DrawTool';break;case'Volume':this.currentAnnotationMode='Volume';var modifiedDateVol=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.volumeSettings.author?this.pdfViewer.volumeSettings.author:'Guest';this.pdfViewer.drawingObject={// eslint-disable-next-line max-len
shapeAnnotationType:'Polygon',notes:'',fillColor:this.volumeFillColor,strokeColor:this.volumeStrokeColor,opacity:this.volumeOpacity,thickness:this.volumeThickness,measureType:'Volume',modifiedDate:modifiedDateVol,borderStyle:'',borderDashArray:'0',author:author,subject:'Volume calculation',isCommentLock:false};this.pdfViewer.tool='Polygon';break;}};MeasureAnnotation.prototype.updateMeasureproperties=function(){this.distanceFillColor=this.pdfViewer.distanceSettings.fillColor?this.pdfViewer.distanceSettings.fillColor:'#ff0000';this.distanceStrokeColor=this.pdfViewer.distanceSettings.strokeColor?this.pdfViewer.distanceSettings.strokeColor:'#ff0000';this.distanceOpacity=this.pdfViewer.distanceSettings.opacity?this.pdfViewer.distanceSettings.opacity:1;this.distanceThickness=this.pdfViewer.distanceSettings.thickness?this.pdfViewer.distanceSettings.thickness:1;this.distanceDashArray=this.pdfViewer.distanceSettings.borderDashArray?this.pdfViewer.distanceSettings.borderDashArray:0;this.leaderLength=this.pdfViewer.distanceSettings.leaderLength!=null?this.pdfViewer.distanceSettings.leaderLength:40;// eslint-disable-next-line max-len
this.distanceStartHead=this.pdfViewer.distanceSettings.lineHeadStartStyle?this.pdfViewer.distanceSettings.lineHeadStartStyle:'Closed';this.distanceEndHead=this.pdfViewer.distanceSettings.lineHeadEndStyle?this.pdfViewer.distanceSettings.lineHeadEndStyle:'Closed';this.perimeterFillColor=this.pdfViewer.perimeterSettings.fillColor?this.pdfViewer.perimeterSettings.fillColor:'#ffffff00';this.perimeterStrokeColor=this.pdfViewer.perimeterSettings.strokeColor?this.pdfViewer.perimeterSettings.strokeColor:'#ff0000';this.perimeterOpacity=this.pdfViewer.perimeterSettings.opacity?this.pdfViewer.perimeterSettings.opacity:1;this.perimeterThickness=this.pdfViewer.perimeterSettings.thickness?this.pdfViewer.perimeterSettings.thickness:1;this.perimeterDashArray=this.pdfViewer.perimeterSettings.borderDashArray?this.pdfViewer.perimeterSettings.borderDashArray:0;// eslint-disable-next-line max-len
this.perimeterStartHead=this.pdfViewer.perimeterSettings.lineHeadStartStyle?this.pdfViewer.perimeterSettings.lineHeadStartStyle:'Open';this.perimeterEndHead=this.pdfViewer.perimeterSettings.lineHeadEndStyle?this.pdfViewer.perimeterSettings.lineHeadEndStyle:'Open';this.areaFillColor=this.pdfViewer.areaSettings.fillColor?this.pdfViewer.areaSettings.fillColor:'#ffffff00';this.areaStrokeColor=this.pdfViewer.areaSettings.strokeColor?this.pdfViewer.areaSettings.strokeColor:'#ff0000';this.areaOpacity=this.pdfViewer.areaSettings.opacity?this.pdfViewer.areaSettings.opacity:1;this.areaThickness=this.pdfViewer.areaSettings.thickness?this.pdfViewer.areaSettings.thickness:1;this.radiusFillColor=this.pdfViewer.radiusSettings.fillColor?this.pdfViewer.radiusSettings.fillColor:'#ffffff00';this.radiusStrokeColor=this.pdfViewer.radiusSettings.strokeColor?this.pdfViewer.radiusSettings.strokeColor:'#ff0000';this.radiusOpacity=this.pdfViewer.radiusSettings.opacity?this.pdfViewer.radiusSettings.opacity:1;this.radiusThickness=this.pdfViewer.radiusSettings.thickness?this.pdfViewer.radiusSettings.thickness:1;this.volumeFillColor=this.pdfViewer.volumeSettings.fillColor?this.pdfViewer.volumeSettings.fillColor:'#ffffff00';this.volumeStrokeColor=this.pdfViewer.volumeSettings.strokeColor?this.pdfViewer.volumeSettings.strokeColor:'#ff0000';this.volumeOpacity=this.pdfViewer.volumeSettings.opacity?this.pdfViewer.volumeSettings.opacity:1;this.volumeThickness=this.pdfViewer.volumeSettings.thickness?this.pdfViewer.volumeSettings.thickness:1;this.unit=this.pdfViewer.measurementSettings.conversionUnit.toLowerCase();this.displayUnit=this.pdfViewer.measurementSettings.displayUnit.toLowerCase();this.ratio=this.pdfViewer.measurementSettings.scaleRatio;this.volumeDepth=this.pdfViewer.measurementSettings.depth;this.scaleRatioString='1 '+this.unit+' = '+this.ratio.toString()+' '+this.displayUnit;};MeasureAnnotation.prototype.createAnnotationObject=function(annotationModel){var bound;var labelBound;var annotationName=this.pdfViewer.annotation.createGUID();// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('shape_measure',annotationModel.pageIndex+1,annotationModel.measureType,annotationName,annotationModel.notes,annotationModel.author);annotationModel.annotName=annotationName;annotationModel.author=this.pdfViewer.annotationModule.updateAnnotationAuthor('measure',annotationModel.subject);this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(annotationName,annotationModel.notes);if(annotationModel.wrapper.bounds){bound={// eslint-disable-next-line max-len
left:annotationModel.wrapper.bounds.x,top:annotationModel.wrapper.bounds.y,height:annotationModel.wrapper.bounds.height,width:annotationModel.wrapper.bounds.width,right:annotationModel.wrapper.bounds.right,bottom:annotationModel.wrapper.bounds.bottom};labelBound=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(annotationModel.wrapper.bounds);}else{bound={left:0,top:0,height:0,width:0,right:0,bottom:0};labelBound={left:0,top:0,height:0,width:0,right:0,bottom:0};}// eslint-disable-next-line radix
var borderDashArray=parseInt(annotationModel.borderDashArray);borderDashArray=isNaN(borderDashArray)?0:borderDashArray;// eslint-disable-next-line max-len
var measure={ratio:this.scaleRatioString,x:[this.createNumberFormat('x')],distance:[this.createNumberFormat('d')],area:[this.createNumberFormat('a')]};if(annotationModel.measureType==='Volume'){measure.depth=this.volumeDepth;}// eslint-disable-next-line
var annotationSettings=this.pdfViewer.annotationModule.findAnnotationSettings(annotationModel,true);// eslint-disable-next-line
var allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotationModel);annotationModel.isPrint=annotationSettings.isPrint;var setting=this.pdfViewer.shapeLabelSettings;var labelSettings={borderColor:annotationModel.strokeColor,fillColor:annotationModel.fillColor,fontColor:annotationModel.fontColor,fontSize:annotationModel.fontSize,labelContent:annotationModel.labelContent,labelHeight:setting.labelHeight,labelWidth:setting.labelMaxWidth,opacity:annotationModel.opacity};return{// eslint-disable-next-line max-len
id:annotationModel.id,shapeAnnotationType:this.getShapeAnnotType(annotationModel.measureType),author:annotationModel.author,allowedInteractions:allowedInteractions,subject:annotationModel.subject,note:annotationModel.notes,strokeColor:annotationModel.strokeColor,fillColor:annotationModel.fillColor,opacity:annotationModel.opacity,thickness:annotationModel.thickness,// eslint-disable-next-line max-len
borderStyle:annotationModel.borderStyle,borderDashArray:borderDashArray,bounds:bound,// eslint-disable-next-line max-len
modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),rotateAngle:'RotateAngle'+annotationModel.rotateAngle,isCloudShape:annotationModel.isCloudShape,cloudIntensity:annotationModel.cloudIntensity,// eslint-disable-next-line max-len
vertexPoints:annotationModel.vertexPoints,lineHeadStart:this.pdfViewer.annotation.getArrowTypeForCollection(annotationModel.sourceDecoraterShapes),lineHeadEnd:this.pdfViewer.annotation.getArrowTypeForCollection(annotationModel.taregetDecoraterShapes),rectangleDifference:[],isLocked:annotationSettings.isLock,// eslint-disable-next-line max-len
leaderLength:annotationModel.leaderHeight,leaderLineExtension:2,leaderLineOffset:0,calibrate:measure,caption:true,captionPosition:'Top',indent:this.getIndent(annotationModel.measureType),annotName:annotationName,comments:[],review:{state:'',stateModel:'',modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),author:annotationModel.author},// eslint-disable-next-line max-len
labelContent:annotationModel.labelContent,enableShapeLabel:annotationModel.enableShapeLabel,labelFillColor:annotationModel.labelFillColor,labelBorderColor:annotationModel.labelBorderColor,fontColor:annotationModel.fontColor,fontSize:annotationModel.fontSize,// eslint-disable-next-line max-len
labelBounds:labelBound,annotationSelectorSettings:this.getSelector(annotationModel.subject),labelSettings:labelSettings,annotationSettings:annotationSettings,customData:this.pdfViewer.annotation.getMeasureData(annotationModel.subject),isPrint:annotationModel.isPrint,isCommentLock:annotationModel.isCommentLock,isAnnotationRotated:false};};MeasureAnnotation.prototype.getSelector=function(type){var selector=this.pdfViewer.annotationSelectorSettings;if(type==='Distance calculation'&&this.pdfViewer.distanceSettings.annotationSelectorSettings){selector=this.pdfViewer.distanceSettings.annotationSelectorSettings;}else if(type==='Perimeter calculation'&&this.pdfViewer.perimeterSettings.annotationSelectorSettings){selector=this.pdfViewer.perimeterSettings.annotationSelectorSettings;// eslint-disable-next-line max-len
}else if(type==='Area calculation'&&this.pdfViewer.areaSettings.annotationSelectorSettings){selector=this.pdfViewer.areaSettings.annotationSelectorSettings;}else if(type==='Radius calculation'&&this.pdfViewer.radiusSettings.annotationSelectorSettings){selector=this.pdfViewer.radiusSettings.annotationSelectorSettings;}else if(type==='Volume calculation'&&this.pdfViewer.volumeSettings.annotationSelectorSettings){selector=this.pdfViewer.volumeSettings.annotationSelectorSettings;}return selector;};MeasureAnnotation.prototype.getShapeAnnotType=function(measureType){var annotationType;switch(measureType){case'Distance':annotationType='Line';break;case'Perimeter':annotationType='Polyline';break;case'Area':case'Volume':annotationType='Polygon';break;case'Radius':annotationType='Circle';break;}return annotationType;};MeasureAnnotation.prototype.getShapeType=function(shape){var shapeType;if(shape.shapeAnnotationType==='Line'){shapeType='Distance';}else if(shape.shapeAnnotationType==='Polyline'){shapeType='LineWidthArrowHead';}else if(shape.shapeAnnotationType==='Polygon'&&shape.indent==='PolygonDimension'){shapeType='Polygon';// eslint-disable-next-line max-len
}else if(shape.shapeAnnotationType==='Polygon'&&shape.indent==='PolygonRadius'||shape.shapeAnnotationType==='Circle'){shapeType='Radius';}else if(shape.shapeAnnotationType==='Polygon'&&shape.indent==='PolygonVolume'){shapeType='Polygon';}return shapeType;};MeasureAnnotation.prototype.getMeasureType=function(shape){var measureType;if(shape.shapeAnnotationType==='Line'){measureType='Distance';}else if(shape.shapeAnnotationType==='Polyline'){measureType='Perimeter';}else if(shape.shapeAnnotationType==='Polygon'&&shape.indent==='PolygonDimension'){measureType='Area';// eslint-disable-next-line max-len
}else if(shape.shapeAnnotationType==='Polygon'&&shape.indent==='PolygonRadius'||shape.shapeAnnotationType==='Circle'){measureType='Radius';}else if(shape.shapeAnnotationType==='Polygon'&&shape.indent==='PolygonVolume'){measureType='Volume';}return measureType;};MeasureAnnotation.prototype.getIndent=function(measureType){var indent;switch(measureType){case'Distance':indent='LineDimension';break;case'Perimeter':indent='PolyLineDimension';break;case'Area':indent='PolygonDimension';break;case'Radius':indent='PolygonRadius';break;case'Volume':indent='PolygonVolume';break;}return indent;};// eslint-disable-next-line
MeasureAnnotation.prototype.getNumberFormatArray=function(list){// eslint-disable-next-line
var numberFormatArray=new Array();if(list){for(var i=0;i<list.length;i++){// eslint-disable-next-line max-len
numberFormatArray[i]={unit:list[i].Unit,fractionalType:list[i].FractionalType,conversionFactor:list[i].ConversionFactor,denominator:list[i].Denominator,formatDenominator:list[i].FormatDenominator};}}return numberFormatArray;};MeasureAnnotation.prototype.createNumberFormat=function(type){var cFactor=1;var unit=this.displayUnit;if(type==='x'){cFactor=this.getFactor(this.unit);}if(type==='a'){unit='sq '+this.displayUnit;}// eslint-disable-next-line max-len
var numberFormat={unit:unit,fractionalType:'D',conversionFactor:cFactor,denominator:100,formatDenominator:false};return numberFormat;};/**
     * @private
     */MeasureAnnotation.prototype.saveMeasureShapeAnnotations=function(){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape_measure');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_shape_measure'];}// eslint-disable-next-line
var annotations=new Array();for(var j=0;j<this.pdfViewerBase.pageCount;j++){annotations[j]=[];}if(storeObject&&!this.pdfViewer.annotationSettings.skipDownload){var annotationCollection=JSON.parse(storeObject);for(var i=0;i<annotationCollection.length;i++){var newArray=[];var pageAnnotationObject=annotationCollection[i];if(pageAnnotationObject){for(var z=0;pageAnnotationObject.annotations.length>z;z++){this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);if(this.pdfViewerBase.isJsonExported){if(pageAnnotationObject.annotations[z].isAnnotationRotated){pageAnnotationObject.annotations[z].bounds=this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex);pageAnnotationObject.annotations[z].vertexPoints=this.pdfViewer.annotation.getVertexPoints(pageAnnotationObject.annotations[z].vertexPoints,pageAnnotationObject.pageIndex);}else{var pageDetails=this.pdfViewerBase.pageSize[pageAnnotationObject.pageIndex];if(pageDetails){pageAnnotationObject.annotations[z].annotationRotation=pageDetails.rotation;}}}// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex));var strokeColorString=pageAnnotationObject.annotations[z].strokeColor;pageAnnotationObject.annotations[z].strokeColor=JSON.stringify(this.getRgbCode(strokeColorString));var fillColorString=pageAnnotationObject.annotations[z].fillColor;pageAnnotationObject.annotations[z].fillColor=JSON.stringify(this.getRgbCode(fillColorString));// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].vertexPoints=JSON.stringify(this.pdfViewer.annotation.getVertexPoints(pageAnnotationObject.annotations[z].vertexPoints,pageAnnotationObject.pageIndex));if(pageAnnotationObject.annotations[z].rectangleDifference!==null){// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].rectangleDifference=JSON.stringify(pageAnnotationObject.annotations[z].rectangleDifference);}// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].calibrate=this.getStringifiedMeasure(pageAnnotationObject.annotations[z].calibrate);if(pageAnnotationObject.annotations[z].enableShapeLabel===true){// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].labelBounds=JSON.stringify(this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(JSON.parse(pageAnnotationObject.annotations[z].bounds),pageAnnotationObject.pageIndex));var labelFillColorString=pageAnnotationObject.annotations[z].labelFillColor;pageAnnotationObject.annotations[z].labelFillColor=JSON.stringify(this.getRgbCode(labelFillColorString));var labelBorderColorString=pageAnnotationObject.annotations[z].labelBorderColor;pageAnnotationObject.annotations[z].labelBorderColor=JSON.stringify(this.getRgbCode(labelBorderColorString));pageAnnotationObject.annotations[z].labelSettings.fillColor=labelFillColorString;var fontColorString=pageAnnotationObject.annotations[z].labelSettings.fontColor;pageAnnotationObject.annotations[z].fontColor=JSON.stringify(this.getRgbCode(fontColorString));}}newArray=pageAnnotationObject.annotations;}annotations[pageAnnotationObject.pageIndex]=newArray;}}return JSON.stringify(annotations);};/**
     * @private
     */MeasureAnnotation.prototype.createScaleRatioWindow=function(){var _this=this;if(!sf.base.isBlazor()){var elementID=this.pdfViewer.dataId;// eslint-disable-next-line max-len
var dialogDiv=sf.base.createElement('div',{id:elementID+'_scale_ratio_window',className:'e-pv-scale-ratio-window'});this.pdfViewerBase.pageContainer.appendChild(dialogDiv);var contentElement=this.createRatioUI();this.scaleRatioDialog=new sf.popups.Dialog({showCloseIcon:true,closeOnEscape:false,isModal:true,header:this.pdfViewer.localeObj.getConstant('Scale Ratio'),target:this.pdfViewer.element,content:contentElement,close:function close(){_this.sourceTextBox.destroy();_this.convertUnit.destroy();_this.destTextBox.destroy();_this.dispUnit.destroy();_this.scaleRatioDialog.destroy();var dialogElement=_this.pdfViewerBase.getElement('_scale_ratio_window');dialogElement.parentElement.removeChild(dialogElement);}});if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.scaleRatioDialog.buttons=[// eslint-disable-next-line max-len
{buttonModel:{content:this.pdfViewer.localeObj.getConstant('OK'),isPrimary:true},click:this.onOkClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Cancel')},click:this.onCancelClicked.bind(this)}];}else{this.scaleRatioDialog.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Cancel')},click:this.onCancelClicked.bind(this)},// eslint-disable-next-line max-len
{buttonModel:{content:this.pdfViewer.localeObj.getConstant('OK'),isPrimary:true},click:this.onOkClicked.bind(this)}];}if(this.pdfViewer.enableRtl){this.scaleRatioDialog.enableRtl=true;}this.scaleRatioDialog.appendTo(dialogDiv);this.convertUnit.content=this.createContent(this.pdfViewer.localeObj.getConstant(this.unit)).outerHTML;this.dispUnit.content=this.createContent(this.pdfViewer.localeObj.getConstant(this.displayUnit)).outerHTML;this.depthUnit.content=this.createContent(this.pdfViewer.localeObj.getConstant(this.displayUnit)).outerHTML;}else{this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenScaleRatioDialog');}};MeasureAnnotation.prototype.createRatioUI=function(){var element=sf.base.createElement('div');var elementID=this.pdfViewer.dataId;// eslint-disable-next-line max-len
var items=[{text:this.pdfViewer.localeObj.getConstant('pt'),label:'pt'},{text:this.pdfViewer.localeObj.getConstant('in'),label:'in'},{text:this.pdfViewer.localeObj.getConstant('mm'),label:'mm'},{text:this.pdfViewer.localeObj.getConstant('cm'),label:'cm'},{text:this.pdfViewer.localeObj.getConstant('p'),label:'p'},{text:this.pdfViewer.localeObj.getConstant('ft'),label:'ft'},{text:this.pdfViewer.localeObj.getConstant('ft_in'),label:'ft_in'},{text:this.pdfViewer.localeObj.getConstant('m'),label:'m'}];var labelText=sf.base.createElement('div',{id:elementID+'_scale_ratio_label',className:'e-pv-scale-ratio-text'});labelText.textContent=this.pdfViewer.localeObj.getConstant('Scale Ratio');element.appendChild(labelText);var sourceContainer=sf.base.createElement('div',{id:elementID+'_scale_src_container'});element.appendChild(sourceContainer);// eslint-disable-next-line max-len
var srcInputElement=this.createInputElement('input','e-pv-scale-ratio-src-input',elementID+'_src_input',sourceContainer);this.sourceTextBox=new sf.inputs.NumericTextBox({value:1,format:'##',cssClass:'e-pv-scale-ratio-src-input',min:1,max:100},srcInputElement);// eslint-disable-next-line max-len
var srcUnitElement=this.createInputElement('button','e-pv-scale-ratio-src-unit',elementID+'_src_unit',sourceContainer);this.convertUnit=new sf.splitbuttons.DropDownButton({items:items,cssClass:'e-pv-scale-ratio-src-unit'},srcUnitElement);this.convertUnit.select=this.convertUnitSelect.bind(this);var destinationContainer=sf.base.createElement('div',{id:elementID+'_scale_dest_container'});// eslint-disable-next-line max-len
var destInputElement=this.createInputElement('input','e-pv-scale-ratio-dest-input',elementID+'_dest_input',destinationContainer);this.destTextBox=new sf.inputs.NumericTextBox({value:1,format:'##',cssClass:'e-pv-scale-ratio-dest-input',min:1,max:100},destInputElement);// eslint-disable-next-line max-len
var destUnitElement=this.createInputElement('button','e-pv-scale-ratio-dest-unit',elementID+'_dest_unit',destinationContainer);this.dispUnit=new sf.splitbuttons.DropDownButton({items:items,cssClass:'e-pv-scale-ratio-dest-unit'},destUnitElement);this.dispUnit.select=this.dispUnitSelect.bind(this);element.appendChild(destinationContainer);var depthLabelText=sf.base.createElement('div',{id:elementID+'_depth_label',className:'e-pv-depth-text'});depthLabelText.textContent=this.pdfViewer.localeObj.getConstant('Depth');element.appendChild(depthLabelText);var depthContainer=sf.base.createElement('div',{id:elementID+'_depth_container'});element.appendChild(depthContainer);// eslint-disable-next-line max-len
var depthInputElement=this.createInputElement('input','e-pv-depth-input',elementID+'_depth_input',depthContainer);this.depthTextBox=new sf.inputs.NumericTextBox({value:this.volumeDepth,format:'##',cssClass:'e-pv-depth-input',min:1},depthInputElement);// eslint-disable-next-line max-len
var depthUnitElement=this.createInputElement('button','e-pv-depth-unit',elementID+'_depth_unit',depthContainer);this.depthUnit=new sf.splitbuttons.DropDownButton({items:items,cssClass:'e-pv-depth-unit'},depthUnitElement);this.depthUnit.select=this.depthUnitSelect.bind(this);return element;};MeasureAnnotation.prototype.convertUnitSelect=function(args){this.convertUnit.content=this.createContent(args.item.text).outerHTML;};MeasureAnnotation.prototype.dispUnitSelect=function(args){this.dispUnit.content=this.createContent(args.item.text).outerHTML;this.depthUnit.content=this.createContent(args.item.text).outerHTML;};MeasureAnnotation.prototype.depthUnitSelect=function(args){this.depthUnit.content=this.createContent(args.item.text).outerHTML;};MeasureAnnotation.prototype.createContent=function(text){var divElement=sf.base.createElement('div',{className:'e-pv-scale-unit-content'});divElement.textContent=text;return divElement;};MeasureAnnotation.prototype.createInputElement=function(input,className,idString,parentElement){var container=sf.base.createElement('div',{id:idString+'_container',className:className+'-container'});var textBoxInput=sf.base.createElement(input,{id:idString});if(input==='input'){textBoxInput.type='text';}container.appendChild(textBoxInput);parentElement.appendChild(container);return textBoxInput;};/**
     * @private
     */MeasureAnnotation.prototype.onOkClicked=function(){if(sf.base.isBlazor()){// eslint-disable-next-line
var unitElement=document.querySelector('#'+this.pdfViewer.dataId+'_src_unit');// eslint-disable-next-line
var displayElement=document.querySelector('#'+this.pdfViewer.dataId+'_dest_unit');// eslint-disable-next-line
var sourceTextBox=document.querySelector('#'+this.pdfViewer.dataId+'_ratio_input');// eslint-disable-next-line
var destTextBox=document.querySelector('#'+this.pdfViewer.dataId+'_dest_input');// eslint-disable-next-line
var depthTextBox=document.querySelector('#'+this.pdfViewer.dataId+'_depth_input');if(unitElement&&displayElement&&sourceTextBox&&destTextBox&&depthTextBox){this.unit=unitElement.value;this.displayUnit=displayElement.value;// eslint-disable-next-line
this.ratio=parseInt(destTextBox.value)/parseInt(sourceTextBox.value);// eslint-disable-next-line
this.volumeDepth=parseInt(depthTextBox.value);}// eslint-disable-next-line
this.scaleRatioString=parseInt(sourceTextBox.value)+' '+this.unit+' = '+parseInt(destTextBox.value)+' '+this.displayUnit;this.updateMeasureValues(this.scaleRatioString,this.displayUnit,this.unit,this.volumeDepth);}else{this.unit=this.getContent(this.convertUnit.content);this.displayUnit=this.getContent(this.dispUnit.content);this.ratio=this.destTextBox.value/this.sourceTextBox.value;this.volumeDepth=this.depthTextBox.value;this.scaleRatioString=this.sourceTextBox.value+' '+this.unit+' = '+this.destTextBox.value+' '+this.displayUnit;this.scaleRatioDialog.hide();var originalUnit=void 0;var originalDisplayUnit=void 0;originalUnit=this.restoreUnit(this.convertUnit);originalDisplayUnit=this.restoreUnit(this.dispUnit);this.updateMeasureValues(this.scaleRatioString,originalDisplayUnit,originalUnit,this.volumeDepth);}};MeasureAnnotation.prototype.restoreUnit=function(dropdownObject){var calibUnit;for(var i=0;i<dropdownObject.items.length;i++){var convertUnitItem=dropdownObject.items[i];if(this.unit===convertUnitItem.text){calibUnit=convertUnitItem.label;}}return calibUnit;};/**
     * @param ratio
     * @param displayUnit
     * @param conversionUnit
     * @param depth
     * @private
     */MeasureAnnotation.prototype.updateMeasureValues=function(ratio,displayUnit,conversionUnit,depth){this.scaleRatioString=ratio;this.displayUnit=displayUnit;this.unit=conversionUnit;this.volumeDepth=depth;for(var i=0;i<this.pdfViewerBase.pageCount;i++){var pageAnnotations=this.getAnnotations(i,null);if(pageAnnotations){for(var j=0;j<pageAnnotations.length;j++){pageAnnotations=this.getAnnotations(i,null);var measureObject=pageAnnotations[j];if(!measureObject.annotationSettings.isLock){measureObject.calibrate.ratio=ratio;measureObject.calibrate.x[0].unit=displayUnit;measureObject.calibrate.distance[0].unit=displayUnit;measureObject.calibrate.area[0].unit=displayUnit;measureObject.calibrate.x[0].conversionFactor=this.getFactor(conversionUnit);if(measureObject.indent==='PolygonVolume'){measureObject.calibrate.depth=depth;}pageAnnotations[j]=measureObject;this.manageAnnotations(pageAnnotations,i);this.pdfViewer.annotation.updateCalibrateValues(this.getAnnotationBaseModel(measureObject.id));}}}this.pdfViewer.annotation.renderAnnotations(i,null,null,null,null,false);}};MeasureAnnotation.prototype.getAnnotationBaseModel=function(id){var annotationBase=null;for(var i=0;i<this.pdfViewer.annotations.length;i++){if(id===this.pdfViewer.annotations[i].id){annotationBase=this.pdfViewer.annotations[i];break;}}return annotationBase;};MeasureAnnotation.prototype.getContent=function(unit){return unit.split('</div>')[0].split('">')[1];};/**
     * @param value
     * @param currentAnnot
     * @private
     */ // eslint-disable-next-line
MeasureAnnotation.prototype.setConversion=function(value,currentAnnot){// eslint-disable-next-line
var values;if(currentAnnot){var pageIndex=currentAnnot.pageIndex;if(currentAnnot.id==='diagram_helper'){pageIndex=currentAnnot.pageIndex?currentAnnot.pageIndex:this.pdfViewerBase.activeElements.activePageID;currentAnnot=this.getCurrentObject(pageIndex,null,currentAnnot.annotName);}if(currentAnnot){values=this.getCurrentValues(currentAnnot.id,pageIndex);}else{values=this.getCurrentValues();}}else{values=this.getCurrentValues();}var scaledValue=value*values.ratio;return this.convertPointToUnits(values.factor,scaledValue,values.unit);};MeasureAnnotation.prototype.onCancelClicked=function(){this.scaleRatioDialog.hide();};/**
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isNewlyAdded
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isNewlyAdded
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isNewlyAdded
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isNewlyAdded
     * @private
     */ // eslint-disable-next-line
MeasureAnnotation.prototype.modifyInCollection=function(property,pageNumber,annotationBase,isNewlyAdded){if(!isNewlyAdded){this.pdfViewerBase.updateDocumentEditedProperty(true);}var currentAnnotObject=null;var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations!=null&&annotationBase){for(var i=0;i<pageAnnotations.length;i++){if(annotationBase.id===pageAnnotations[i].id){if(property==='bounds'){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase,true);if(pageAnnotations[i].shapeAnnotationType==='Line'||pageAnnotations[i].shapeAnnotationType==='Polyline'){pageAnnotations[i].vertexPoints=annotationBase.vertexPoints;// eslint-disable-next-line max-len
pageAnnotations[i].bounds={left:annotationBase.bounds.x,top:annotationBase.bounds.y,width:annotationBase.bounds.width,height:annotationBase.bounds.height,right:annotationBase.bounds.right,bottom:annotationBase.bounds.bottom};}else if(pageAnnotations[i].shapeAnnotationType==='Polygon'){pageAnnotations[i].vertexPoints=annotationBase.vertexPoints;// eslint-disable-next-line max-len
pageAnnotations[i].bounds={left:annotationBase.bounds.x,top:annotationBase.bounds.y,width:annotationBase.bounds.width,height:annotationBase.bounds.height,right:annotationBase.bounds.right,bottom:annotationBase.bounds.bottom};}else{// eslint-disable-next-line max-len
pageAnnotations[i].bounds={left:annotationBase.bounds.x,top:annotationBase.bounds.y,width:annotationBase.bounds.width,height:annotationBase.bounds.height,right:annotationBase.bounds.right,bottom:annotationBase.bounds.bottom};}if(pageAnnotations[i].enableShapeLabel===true&&annotationBase.wrapper){// eslint-disable-next-line max-len
pageAnnotations[i].labelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(annotationBase.wrapper.bounds);}}else if(property==='fill'){pageAnnotations[i].fillColor=annotationBase.wrapper.children[0].style.fill;if(this.pdfViewer.enableShapeLabel){pageAnnotations[i].labelFillColor=annotationBase.wrapper.children[0].style.fill;}}else if(property==='stroke'){pageAnnotations[i].strokeColor=annotationBase.wrapper.children[0].style.strokeColor;}else if(property==='opacity'){pageAnnotations[i].opacity=annotationBase.wrapper.children[0].style.opacity;}else if(property==='thickness'){pageAnnotations[i].thickness=annotationBase.wrapper.children[0].style.strokeWidth;}else if(property==='dashArray'){pageAnnotations[i].borderDashArray=annotationBase.wrapper.children[0].style.strokeDashArray;pageAnnotations[i].borderStyle=annotationBase.borderStyle;}else if(property==='startArrow'){// eslint-disable-next-line max-len
pageAnnotations[i].lineHeadStart=this.pdfViewer.annotation.getArrowTypeForCollection(annotationBase.sourceDecoraterShapes);}else if(property==='endArrow'){// eslint-disable-next-line max-len
pageAnnotations[i].lineHeadEnd=this.pdfViewer.annotation.getArrowTypeForCollection(annotationBase.taregetDecoraterShapes);}else if(property==='leaderLength'){pageAnnotations[i].leaderLength=annotationBase.leaderHeight;}else if(property==='notes'){pageAnnotations[i].note=annotationBase.notes;if(pageAnnotations[i].enableShapeLabel===true){pageAnnotations[i].labelContent=annotationBase.notes;}}else if(property==='delete'){currentAnnotObject=pageAnnotations.splice(i,1)[0];break;}else if(property==='labelContent'){pageAnnotations[i].note=annotationBase.labelContent;pageAnnotations[i].labelContent=annotationBase.labelContent;break;}else if(property==='fontColor'){pageAnnotations[i].fontColor=annotationBase.fontColor;}else if(property==='fontSize'){pageAnnotations[i].fontSize=annotationBase.fontSize;}// eslint-disable-next-line max-len
pageAnnotations[i].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],pageNumber);}}this.manageAnnotations(pageAnnotations,pageNumber);}return currentAnnotObject;};/**
     * @param pageNumber
     * @param annotationBase
     * @param pageNumber
     * @param annotationBase
     * @private
     */MeasureAnnotation.prototype.addInCollection=function(pageNumber,annotationBase){var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations){pageAnnotations.push(annotationBase);}this.manageAnnotations(pageAnnotations,pageNumber);};MeasureAnnotation.prototype.manageAnnotations=function(pageAnnotations,pageNumber){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape_measure');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_shape_measure'];}if(storeObject){var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_shape_measure');}var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_shape_measure']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_shape_measure',annotationStringified);}}};// eslint-disable-next-line
MeasureAnnotation.prototype.getAnnotations=function(pageIndex,shapeAnnotations){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape_measure');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_shape_measure'];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=shapeAnnotations;}}else{annotationCollection=shapeAnnotations;}return annotationCollection;};MeasureAnnotation.prototype.getCurrentObject=function(pageNumber,id,annotName){var currentAnnotObject=null;var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations!=null){for(var i=0;i<pageAnnotations.length;i++){if(id){if(id===pageAnnotations[i].id){currentAnnotObject=pageAnnotations[i];break;}}else if(annotName){if(annotName===pageAnnotations[i].annotName){currentAnnotObject=pageAnnotations[i];break;}}}}return currentAnnotObject;};// eslint-disable-next-line
MeasureAnnotation.prototype.getCurrentValues=function(id,pageNumber){var ratio;var unit;var factor;var depth;if(id&&!isNaN(pageNumber)){var currentAnnotObject=this.getCurrentObject(pageNumber,id);if(currentAnnotObject){ratio=this.getCurrentRatio(currentAnnotObject.calibrate.ratio);unit=currentAnnotObject.calibrate.x[0].unit;factor=currentAnnotObject.calibrate.x[0].conversionFactor;depth=currentAnnotObject.calibrate.depth;}else{ratio=this.ratio;unit=this.displayUnit;factor=this.getFactor(this.unit);depth=this.volumeDepth;}}else{ratio=this.ratio;unit=this.displayUnit;factor=this.getFactor(this.unit);depth=this.volumeDepth;}return{ratio:ratio,unit:unit,factor:factor,depth:depth};};MeasureAnnotation.prototype.getCurrentRatio=function(ratioString){var stringArray=ratioString.split(' ');if(stringArray[3]==='='){return parseFloat(stringArray[4])/parseFloat(stringArray[0]);}else{return parseFloat(stringArray[3])/parseFloat(stringArray[0]);}};/**
     * @param points
     * @param id
     * @param pageNumber
     * @param points
     * @param id
     * @param pageNumber
     * @param points
     * @param id
     * @param pageNumber
     * @private
     */MeasureAnnotation.prototype.calculateArea=function(points,id,pageNumber){// eslint-disable-next-line
var values=this.getCurrentValues(id,pageNumber);var area=this.getArea(points,values.factor,values.unit)*values.ratio;if(values.unit==='ft_in'){// eslint-disable-next-line
var calculateValue=Math.round(area*100)/100;if(calculateValue>=12){calculateValue=(Math.round(calculateValue/12*100)/100).toString();calculateValue=calculateValue.split('.');if(calculateValue[1]){// eslint-disable-next-line
var inchValue=0;if(calculateValue[1].charAt(1)){// eslint-disable-next-line
inchValue=parseInt(calculateValue[1].charAt(0))+'.'+parseInt(calculateValue[1].charAt(1));inchValue=Math.round(inchValue);}else{inchValue=calculateValue[1];}if(!inchValue){return calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('sq')+' '+this.pdfViewer.localeObj.getConstant('ft');}else{return calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('sq')+' '+this.pdfViewer.localeObj.getConstant('ft')+' '+inchValue+' '+this.pdfViewer.localeObj.getConstant('in');}}else{return calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('sq')+' '+this.pdfViewer.localeObj.getConstant('ft');}}else{return Math.round(area*100)/100+' '+this.pdfViewer.localeObj.getConstant('sq')+' '+this.pdfViewer.localeObj.getConstant('in');}}if(values.unit==='m'){return area*100/100+' '+this.pdfViewer.localeObj.getConstant('sq')+' '+this.pdfViewer.localeObj.getConstant(values.unit);}return Math.round(area*100)/100+' '+this.pdfViewer.localeObj.getConstant('sq')+' '+this.pdfViewer.localeObj.getConstant(values.unit);};MeasureAnnotation.prototype.getArea=function(points,factor,unit){var area=0;var j=points.length-1;for(var i=0;i<points.length;i++){// eslint-disable-next-line max-len
area+=(points[j].x*this.pixelToPointFactor*factor+points[i].x*this.pixelToPointFactor*factor)*(points[j].y*this.pixelToPointFactor*factor-points[i].y*this.pixelToPointFactor*factor);j=i;}if(unit==='ft_in'){return Math.abs(area*2.0);}else{return Math.abs(area/2.0);}};/**
     * @param points
     * @param id
     * @param pageNumber
     * @param points
     * @param id
     * @param pageNumber
     * @param points
     * @param id
     * @param pageNumber
     * @private
     */MeasureAnnotation.prototype.calculateVolume=function(points,id,pageNumber){// eslint-disable-next-line
var values=this.getCurrentValues(id,pageNumber);var depth=values.depth?values.depth:this.volumeDepth;var area=this.getArea(points,values.factor,values.unit);var volume=area*(depth*this.convertUnitToPoint(values.unit)*values.factor)*values.ratio;if(values.unit==='ft_in'){// eslint-disable-next-line
var calculateValue=Math.round(volume*100)/100;if(calculateValue>=12){calculateValue=(Math.round(calculateValue/12*100)/100).toString();calculateValue=calculateValue.split('.');if(calculateValue[1]){// eslint-disable-next-line
var inchValue=0;if(calculateValue[1].charAt(1)){// eslint-disable-next-line
inchValue=parseInt(calculateValue[1].charAt(0))+'.'+parseInt(calculateValue[1].charAt(1));inchValue=Math.round(inchValue);}else{inchValue=calculateValue[1];}if(!inchValue){return calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('cu')+' '+this.pdfViewer.localeObj.getConstant('ft');}else{return calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('cu')+' '+this.pdfViewer.localeObj.getConstant('ft')+' '+inchValue+' '+this.pdfViewer.localeObj.getConstant('in');}}else{return calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('cu')+' '+this.pdfViewer.localeObj.getConstant('ft');}}else{return Math.round(volume*100)/100+' '+this.pdfViewer.localeObj.getConstant('cu')+' '+this.pdfViewer.localeObj.getConstant('in');}}return Math.round(volume*100)/100+' '+this.pdfViewer.localeObj.getConstant('cu')+' '+this.pdfViewer.localeObj.getConstant(values.unit);};/**
     * @param pdfAnnotationBase
     * @private
     */MeasureAnnotation.prototype.calculatePerimeter=function(pdfAnnotationBase){var perimeter=sf.drawings.Point.getLengthFromListOfPoints(pdfAnnotationBase.vertexPoints);return this.setConversion(perimeter*this.pixelToPointFactor,pdfAnnotationBase);};MeasureAnnotation.prototype.getFactor=function(unit){var factor;switch(unit){case'in':factor=1/72;break;case'cm':factor=1/28.346;break;case'mm':factor=1/2.835;break;case'pt':factor=1;break;case'p':factor=1/12;break;case'ft':factor=1/864;break;case'ft_in':factor=1/72;break;case'm':factor=1/2834.64567;break;}return factor;};MeasureAnnotation.prototype.convertPointToUnits=function(factor,value,unit){var convertedValue;if(unit==='ft_in'){// eslint-disable-next-line
var calculateValue=Math.round(value*factor*100)/100;if(calculateValue>=12){calculateValue=(Math.round(calculateValue/12*100)/100).toString();calculateValue=calculateValue.split('.');if(calculateValue[1]){// eslint-disable-next-line
var inchValue=0;if(calculateValue[1].charAt(1)){// eslint-disable-next-line
inchValue=parseInt(calculateValue[1].charAt(0))+'.'+parseInt(calculateValue[1].charAt(1));inchValue=Math.round(inchValue);}else{inchValue=calculateValue[1];}if(!inchValue){convertedValue=calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('ft');}else{convertedValue=calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('ft')+' '+inchValue+' '+this.pdfViewer.localeObj.getConstant('in');}}else{convertedValue=calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('ft');}}else{convertedValue=Math.round(value*factor*100)/100+' '+this.pdfViewer.localeObj.getConstant('in');}}else{convertedValue=Math.round(value*factor*100)/100+' '+this.pdfViewer.localeObj.getConstant(unit);}return convertedValue;};MeasureAnnotation.prototype.convertUnitToPoint=function(unit){var factor;switch(unit){case'in':factor=72;break;case'cm':factor=28.346;break;case'mm':factor=2.835;break;case'pt':factor=1;break;case'p':factor=12;break;case'ft':factor=864;break;case'ft_in':factor=72;break;case'm':factor=2834.64567;break;}return factor;};// eslint-disable-next-line
MeasureAnnotation.prototype.getStringifiedMeasure=function(measure){if(!sf.base.isNullOrUndefined(measure)){measure.angle=JSON.stringify(measure.angle);measure.area=JSON.stringify(measure.area);measure.distance=JSON.stringify(measure.distance);measure.volume=JSON.stringify(measure.volume);}return JSON.stringify(measure);};// eslint-disable-next-line
MeasureAnnotation.prototype.getRgbCode=function(colorString){if(!colorString.match(/#([a-z0-9]+)/gi)&&!colorString.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)){colorString=this.pdfViewer.annotationModule.nameToHash(colorString);}var stringArray=colorString.split(',');if(sf.base.isNullOrUndefined(stringArray[1])){colorString=this.pdfViewer.annotationModule.getValue(colorString,'rgba');stringArray=colorString.split(',');}// eslint-disable-next-line radix
var r=parseInt(stringArray[0].split('(')[1]);// eslint-disable-next-line radix
var g=parseInt(stringArray[1]);// eslint-disable-next-line radix
var b=parseInt(stringArray[2]);// eslint-disable-next-line radix
var a=parseInt(stringArray[3]);return{r:r,g:g,b:b,a:a};};/**
     * @param annotation
     * @param pageNumber
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
MeasureAnnotation.prototype.saveImportedMeasureAnnotations=function(annotation,pageNumber){var annotationObject=null;var vertexPoints=null;if(annotation.VertexPoints){vertexPoints=[];for(var j=0;j<annotation.VertexPoints.length;j++){var point={x:annotation.VertexPoints[j].X,y:annotation.VertexPoints[j].Y};vertexPoints.push(point);}}var measureObject={// eslint-disable-next-line max-len
ratio:annotation.Calibrate.Ratio,x:this.getNumberFormatArray(annotation.Calibrate.X),distance:this.getNumberFormatArray(annotation.Calibrate.Distance),area:this.getNumberFormatArray(annotation.Calibrate.Area),angle:this.getNumberFormatArray(annotation.Calibrate.Angle),volume:this.getNumberFormatArray(annotation.Calibrate.Volume),targetUnitConversion:annotation.Calibrate.TargetUnitConversion};if(annotation.Calibrate.Depth){measureObject.depth=annotation.Calibrate.Depth;}if(annotation.Bounds&&annotation.EnableShapeLabel===true){// eslint-disable-next-line max-len
annotation.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds);annotation.LabelBorderColor=annotation.LabelBorderColor?annotation.LabelBorderColor:annotation.StrokeColor;annotation.FontColor=annotation.FontColor?annotation.FontColor:annotation.StrokeColor;annotation.LabelFillColor=annotation.LabelFillColor?annotation.LabelFillColor:annotation.FillColor;annotation.FontSize=annotation.FontSize?annotation.FontSize:16;annotation.LabelSettings=annotation.LabelSettings?annotation.LabelSettings:this.pdfViewer.shapeLabelSettings;}// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);annotation.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor('measure',annotation.Subject);annotationObject={// eslint-disable-next-line max-len
id:'measure',shapeAnnotationType:annotation.ShapeAnnotationType,author:annotation.Author,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,thickness:annotation.Thickness,rectangleDifference:annotation.RectangleDifference,// eslint-disable-next-line max-len
borderStyle:annotation.BorderStyle,borderDashArray:annotation.BorderDashArray,rotateAngle:annotation.RotateAngle,isCloudShape:annotation.IsCloudShape,cloudIntensity:annotation.CloudIntensity,vertexPoints:vertexPoints,lineHeadStart:annotation.LineHeadStart,lineHeadEnd:annotation.LineHeadEnd,isLocked:annotation.IsLocked,// eslint-disable-next-line max-len
bounds:{left:annotation.Bounds.X,top:annotation.Bounds.Y,width:annotation.Bounds.Width,height:annotation.Bounds.Height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},caption:annotation.Caption,captionPosition:annotation.CaptionPosition,calibrate:measureObject,leaderLength:annotation.LeaderLength,leaderLineExtension:annotation.LeaderLineExtension,// eslint-disable-next-line max-len
leaderLineOffset:annotation.LeaderLineOffset,indent:annotation.Indent,annotName:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},labelContent:annotation.LabelContent,enableShapeLabel:annotation.EnableShapeLabel,labelFillColor:annotation.LabelFillColor,labelBorderColor:annotation.LabelBorderColor,fontColor:annotation.FontColor,fontSize:annotation.FontSize,// eslint-disable-next-line max-len
labelBounds:annotation.LabelBounds,annotationSelectorSettings:this.getSettings(annotation),labelSettings:annotation.LabelSettings,annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.IsPrint,isCommentLock:annotation.IsCommentLock,isAnnotationRotated:false};this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_shape_measure');};/**
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
MeasureAnnotation.prototype.updateMeasureAnnotationCollections=function(annotation,pageNumber){// eslint-disable-next-line
var annotationObject=null;var vertexPoints=null;if(annotation.VertexPoints){vertexPoints=[];for(var j=0;j<annotation.VertexPoints.length;j++){var point={x:annotation.VertexPoints[j].X,y:annotation.VertexPoints[j].Y};vertexPoints.push(point);}}var measureObject={// eslint-disable-next-line max-len
ratio:annotation.Calibrate.Ratio,x:this.getNumberFormatArray(annotation.Calibrate.X),distance:this.getNumberFormatArray(annotation.Calibrate.Distance),area:this.getNumberFormatArray(annotation.Calibrate.Area),angle:this.getNumberFormatArray(annotation.Calibrate.Angle),volume:this.getNumberFormatArray(annotation.Calibrate.Volume),targetUnitConversion:annotation.Calibrate.TargetUnitConversion};if(annotation.Calibrate.Depth){measureObject.depth=annotation.Calibrate.Depth;}if(annotation.Bounds&&annotation.EnableShapeLabel===true){// eslint-disable-next-line max-len
annotation.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds);annotation.LabelBorderColor=annotation.LabelBorderColor?annotation.LabelBorderColor:annotation.StrokeColor;annotation.FontColor=annotation.FontColor?annotation.FontColor:annotation.StrokeColor;annotation.LabelFillColor=annotation.LabelFillColor?annotation.LabelFillColor:annotation.FillColor;annotation.FontSize=annotation.FontSize?annotation.FontSize:16;var settings=this.pdfViewer.shapeLabelSettings;var labelSettings={borderColor:annotation.StrokeColor,fillColor:annotation.FillColor,fontColor:annotation.FontColor,fontSize:annotation.FontSize,labelContent:annotation.LabelContent,labelHeight:settings.labelHeight,labelWidth:settings.labelWidth,opacity:annotation.Opacity};annotation.LabelSettings=annotation.LabelSettings?annotation.LabelSettings:labelSettings;}// eslint-disable-next-line max-len
annotation.AnnotationSelectorSettings=annotation.AnnotationSelectorSettings?annotation.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);if(annotation.IsLocked){annotation.AnnotationSettings.isLock=annotation.IsLocked;}annotationObject={// eslint-disable-next-line max-len
id:'measure',shapeAnnotationType:annotation.ShapeAnnotationType,author:annotation.Author,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,thickness:annotation.Thickness,rectangleDifference:annotation.RectangleDifference,// eslint-disable-next-line max-len
borderStyle:annotation.BorderStyle,borderDashArray:annotation.BorderDashArray,rotateAngle:annotation.RotateAngle,isCloudShape:annotation.IsCloudShape,cloudIntensity:annotation.CloudIntensity,vertexPoints:vertexPoints,lineHeadStart:annotation.LineHeadStart,lineHeadEnd:annotation.LineHeadEnd,isLocked:annotation.IsLocked,// eslint-disable-next-line max-len
bounds:{left:annotation.Bounds.X,top:annotation.Bounds.Y,width:annotation.Bounds.Width,height:annotation.Bounds.Height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},caption:annotation.Caption,captionPosition:annotation.CaptionPosition,calibrate:measureObject,leaderLength:annotation.LeaderLength,leaderLineExtension:annotation.LeaderLineExtension,// eslint-disable-next-line max-len
leaderLineOffset:annotation.LeaderLineOffset,indent:annotation.Indent,annotationId:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},labelContent:annotation.LabelContent,enableShapeLabel:annotation.EnableShapeLabel,labelFillColor:annotation.LabelFillColor,labelBorderColor:annotation.LabelBorderColor,fontColor:annotation.FontColor,fontSize:annotation.FontSize,// eslint-disable-next-line max-len
labelBounds:annotation.LabelBounds,pageNumber:pageNumber,annotationSelectorSettings:annotation.AnnotationSelectorSettings,labelSettings:annotation.labelSettings,annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.IsPrint};return annotationObject;};/**
    * This method used to add annotations with using program.
    *
    * @param annotationType - It describes the annotation type
    * @param annotationObject - It describes type of annotation object
    * @param offset - It describes about the annotation bounds or location
    * @returns Object
    * @private
    */MeasureAnnotation.prototype.updateAddAnnotationDetails=function(annotationType,annotationObject,offset){//Creating new object if annotationObject is null
if(!annotationObject){annotationObject={offset:{x:10,y:10},pageNumber:0,width:undefined,height:undefined};offset=annotationObject.offset;}else if(!annotationObject.offset)offset={x:10,y:10};else offset=annotationObject.offset;//Initialize the annotation settings
var annotationSelectorSettings=null;var allowedInteractions=null;var annotationSettings=null;var measureAnnotationType='';var shapeAnnotationType='';var subject='';var isArrow=false;var vertexPoints=[];//Creating the CurrentDate and Annotation name
var currentDateString=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();if(annotationType=='Distance'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.lineSettings.annotationSelectorSettings?this.pdfViewer.lineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.lineSettings);allowedInteractions=this.pdfViewer.lineSettings.allowedInteractions?this.pdfViewer.lineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;measureAnnotationType='LineDimension';shapeAnnotationType='Line';subject='Distance calculation';isArrow=true;if(annotationObject.vertexPoints)vertexPoints=annotationObject.vertexPoints;else vertexPoints=[{x:offset.x,y:offset.y},{x:offset.x+100,y:offset.y}];annotationObject.width=annotationObject.width?annotationObject.width:1;annotationObject.height=annotationObject.height?annotationObject.height:1;}else if(annotationType=='Perimeter'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.arrowSettings.annotationSelectorSettings?this.pdfViewer.arrowSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.arrowSettings);allowedInteractions=this.pdfViewer.arrowSettings.allowedInteractions?this.pdfViewer.arrowSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;measureAnnotationType='PolyLineDimension';shapeAnnotationType='Polyline';subject='Perimeter calculation';isArrow=true;if(annotationObject.vertexPoints)vertexPoints=annotationObject.vertexPoints;else vertexPoints=[{x:offset.x,y:offset.y},{x:offset.x+85,y:offset.y},{x:offset.x+86,y:offset.y+62}];annotationObject.width=annotationObject.width?annotationObject.width:1;annotationObject.height=annotationObject.height?annotationObject.height:1;}else if(annotationType=='Area'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.rectangleSettings.annotationSelectorSettings?this.pdfViewer.rectangleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.rectangleSettings);allowedInteractions=this.pdfViewer.rectangleSettings.allowedInteractions?this.pdfViewer.rectangleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;measureAnnotationType='PolygonDimension';shapeAnnotationType='Polygon';subject='Area calculation';if(annotationObject.vertexPoints)vertexPoints=annotationObject.vertexPoints;else vertexPoints=[{x:offset.x,y:offset.y},{x:offset.x+88,y:offset.y-1},{x:offset.x+89,y:offset.y+53},{x:offset.x,y:offset.y}];annotationObject.width=annotationObject.width?annotationObject.width:1;annotationObject.height=annotationObject.height?annotationObject.height:1;}else if(annotationType=='Radius'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.circleSettings.annotationSelectorSettings?this.pdfViewer.circleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.circleSettings);allowedInteractions=this.pdfViewer.circleSettings.allowedInteractions?this.pdfViewer.circleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;measureAnnotationType='PolygonRadius';shapeAnnotationType='Circle';subject='Radius calculation';annotationObject.width=annotationObject.width?annotationObject.width:100;annotationObject.height=annotationObject.height?annotationObject.height:100;vertexPoints=null;}else if(annotationType=='Volume'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.polygonSettings.annotationSelectorSettings?this.pdfViewer.polygonSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.polygonSettings);allowedInteractions=this.pdfViewer.polygonSettings.allowedInteractions?this.pdfViewer.polygonSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;measureAnnotationType='PolygonVolume';shapeAnnotationType='Polygon';subject='Volume calculation';if(annotationObject.vertexPoints)vertexPoints=annotationObject.vertexPoints;else vertexPoints=[{x:offset.x,y:offset.y},{x:offset.x,y:offset.y+109},{x:offset.x+120,y:offset.y+109},{x:offset.x+120,y:offset.y-1},{x:offset.x,y:offset.y}];annotationObject.width=annotationObject.width?annotationObject.width:1;annotationObject.height=annotationObject.height?annotationObject.height:1;}annotationSettings.isLock=annotationObject.isLock?annotationObject.isLock:false;annotationSettings.minHeight=annotationObject.minHeight?annotationObject.minHeight:0;annotationSettings.minWidth=annotationObject.minWidth?annotationObject.minWidth:0;annotationSettings.maxWidth=annotationObject.maxWidth?annotationObject.maxWidth:0;annotationSettings.maxHeight=annotationObject.maxHeight?annotationObject.maxHeight:0;//Calculating area for all the measurements
var values={depth:96,factor:0.013888888888888888,ratio:1,unit:'in'};var notes='';if(vertexPoints||annotationType=='Radius'||annotationType=='Volume'){if(annotationType=='Distance'||annotationType=='Perimeter'||annotationType=='Radius'){var length_1=0;if(annotationType=='Radius'){length_1=annotationObject.width/2*this.pixelToPointFactor;}else{for(var i_1=0;i_1<vertexPoints.length-1;i_1++){length_1+=Math.sqrt(Math.pow(vertexPoints[i_1].x-vertexPoints[i_1+1].x,2)+Math.pow(vertexPoints[i_1].y-vertexPoints[i_1+1].y,2));}length_1=length_1*this.pixelToPointFactor;}var scaledValue=length_1*values.ratio;notes=this.convertPointToUnits(values.factor,scaledValue,values.unit);}else if(annotationType=='Area'||annotationType=='Volume'){var area=0;var j=vertexPoints.length-1;for(var i=0;i<vertexPoints.length;i++){area+=(vertexPoints[j].x*this.pixelToPointFactor*values.factor+vertexPoints[i].x*this.pixelToPointFactor*values.factor)*(vertexPoints[j].y*this.pixelToPointFactor*values.factor-vertexPoints[i].y*this.pixelToPointFactor*values.factor);j=i;}area=Math.abs(area/2.0);if(annotationType=='Volume'){area=area*(values.depth*this.convertUnitToPoint(values.unit)*values.factor)*values.ratio;notes=Math.round(area*100)/100+this.pdfViewer.localeObj.getConstant('cu')+' '+this.pdfViewer.localeObj.getConstant(values.unit);}else notes=Math.round(area*100)/100+this.pdfViewer.localeObj.getConstant('sq')+' '+this.pdfViewer.localeObj.getConstant(values.unit);}}//Converting points model into vertex property
if(vertexPoints)vertexPoints=this.pdfViewer.annotation.getVertexPointsXY(vertexPoints);//Creating Annotation objects with it's proper properties
var measureShapeAnnotation=[];var shape={AllowedInteractions:annotationObject.allowedInteractions?annotationObject.allowedInteractions:allowedInteractions,AnnotName:annotationName,AnnotType:'shape_measure',AnnotationSelectorSettings:annotationObject.annotationSelectorSettings?annotationObject.annotationSelectorSettings:annotationSelectorSettings,AnnotationSettings:annotationSettings,Author:annotationObject.author?annotationObject.author:'Guest',BorderDashArray:annotationObject.borderDashArray?annotationObject.borderDashArray:0,BorderStyle:'Solid',Bounds:{X:offset.x,Y:offset.y,Width:annotationObject.width,Height:annotationObject.height,Left:offset.x,Top:offset.y,Location:{X:offset.x,Y:offset.y},Size:{Height:annotationObject.height,IsEmpty:false,Width:annotationObject.width}},Calibrate:{Area:[{ConversionFactor:1,Denominator:100,FormatDenominator:false,FractionalType:'D',Unit:'sq in'}],Depth:annotationObject.depth?annotationObject.depth:0,Distance:[{ConversionFactor:1,Denominator:100,FormatDenominator:false,FractionalType:'D',Unit:'in'}],Ratio:'1 in = 1 in',TargetUnitConversion:0,Volume:null,X:[{ConversionFactor:0.013888889,Denominator:100,FormatDenominator:false,FractionalType:'D',Unit:'in'}]},Caption:true,CaptionPosition:'Top',CloudIntensity:0,Comments:null,CustomData:annotationObject.customData?annotationObject.customData:null,CreatedDate:currentDateString,EnableShapeLabel:false,ExistingCustomData:null,FillColor:annotationObject.fillColor?annotationObject.fillColor:'#ffffff00',FontColor:null,FontSize:0,Indent:measureAnnotationType,IsCloudShape:false,IsCommentLock:false,IsLocked:annotationObject.isLock?annotationObject.isLock:false,IsPrint:annotationObject.isPrint?annotationObject.isPrint:true,LabelBorderColor:null,LabelBounds:{X:0,Y:0,Width:0,Height:0},LabelContent:null,LabelFillColor:null,LabelSettings:null,LeaderLength:0,LeaderLineExtension:0,LeaderLineOffset:0,LineHeadEnd:annotationObject.lineHeadStartStyle?annotationObject.lineHeadStartStyle:isArrow?'ClosedArrow':'None',LineHeadStart:annotationObject.lineHeadEndStyle?annotationObject.lineHeadEndStyle:isArrow?'ClosedArrow':'None',ModifiedDate:'',Note:notes,Opacity:annotationObject.opacity?annotationObject.opacity:1,RectangleDifference:null,RotateAngle:'RotateAngle0',ShapeAnnotationType:shapeAnnotationType,State:'',StateModel:'',StrokeColor:annotationObject.strokeColor?annotationObject.strokeColor:'#ff0000',Subject:subject,Thickness:annotationObject.thickness?annotationObject.thickness:1,VertexPoints:vertexPoints};//Adding the annotation object to an array and return it
measureShapeAnnotation[0]=shape;return{measureShapeAnnotation:measureShapeAnnotation};};return MeasureAnnotation;}();/**
 * @hidden
 */var ShapeAnnotation=/** @class */function(){function ShapeAnnotation(pdfviewer,pdfViewerBase){/**
         * @private
         */this.shapeCount=0;/**
         * @private
         */this.isAddAnnotationProgramatically=false;this.pdfViewer=pdfviewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @param shapeAnnotations
     * @param pageNumber
     * @param isImportAcion
     * @private
     */ // eslint-disable-next-line
ShapeAnnotation.prototype.renderShapeAnnotations=function(shapeAnnotations,pageNumber,isImportAcion){if(shapeAnnotations){if(shapeAnnotations.length>=1){// eslint-disable-next-line
var shapeAnnots=this.pdfViewer.annotation.getStoredAnnotations(pageNumber,shapeAnnotations,'_annotations_shape');if(!shapeAnnots||isImportAcion){for(var i=0;i<shapeAnnotations.length;i++){// eslint-disable-next-line
var annotation=shapeAnnotations[i];annotation.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(annotation,pageNumber,annotation.AnnotType);var annotationObject=null;this.shapeCount=this.shapeCount+1;var isAnnotationRotated=void 0;if(annotation.ShapeAnnotationType){if(isImportAcion&&!annotation.isAlreadyAdded){if(this.pdfViewerBase.isJsonImported){annotation.Bounds=this.pdfViewerBase.importJsonForRotatedDocuments(annotation.Rotate,pageNumber,annotation.Bounds,annotation.AnnotationRotation);isAnnotationRotated=this.pdfViewerBase.isPageRotated;}}var vertexPoints=null;if(annotation.VertexPoints){vertexPoints=[];if(isImportAcion&&this.pdfViewerBase.isJsonImported){vertexPoints=this.pdfViewerBase.calculateVertexPoints(annotation.Rotate,pageNumber,annotation.VertexPoints,annotation.AnnotationRotation);}else{for(var j=0;j<annotation.VertexPoints.length;j++){var x=annotation.VertexPoints[j].X?annotation.VertexPoints[j].X:annotation.VertexPoints[j].x;var y=annotation.VertexPoints[j].Y?annotation.VertexPoints[j].Y:annotation.VertexPoints[j].y;var point={x:x,y:y};vertexPoints.push(point);}}}// eslint-disable-next-line
if(annotation.Bounds&&annotation.EnableShapeLabel===true){// eslint-disable-next-line max-len
annotation.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds);// eslint-disable-next-line max-len
annotation.LabelBorderColor=annotation.LabelBorderColor?annotation.LabelBorderColor:annotation.StrokeColor;annotation.FontColor=annotation.FontColor?annotation.FontColor:annotation.StrokeColor;annotation.LabelFillColor=annotation.LabelFillColor?annotation.LabelFillColor:annotation.FillColor;annotation.FontSize=annotation.FontSize?annotation.FontSize:16;// eslint-disable-next-line max-len
annotation.LabelSettings=annotation.LabelSettings?annotation.LabelSettings:this.pdfViewer.shapeLabelSettings;}// eslint-disable-next-line max-len
annotation.AnnotationSelectorSettings=annotation.AnnotationSelectorSettings?annotation.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);// eslint-disable-next-line max-len
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);var isPrint=true;if(annotation.annotationAddMode==='Imported Annotation'){isPrint=annotation.IsPrint;}else{isPrint=annotation.AnnotationSettings.isPrint;}var left=annotation.Bounds.X?annotation.Bounds.X:annotation.Bounds.x;var top_1=annotation.Bounds.Y?annotation.Bounds.Y:annotation.Bounds.y;var width=annotation.Bounds.Width?annotation.Bounds.Width:annotation.Bounds.width;var height=annotation.Bounds.Height?annotation.Bounds.Height:annotation.Bounds.height;// eslint-disable-next-line max-len
annotationObject={id:'shape'+this.shapeCount,shapeAnnotationType:annotation.ShapeAnnotationType,author:annotation.Author,allowedInteractions:annotation.allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,pageNumber:pageNumber,// eslint-disable-next-line max-len
note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,thickness:annotation.Thickness,rectangleDifference:annotation.RectangleDifference,borderStyle:annotation.BorderStyle,borderDashArray:annotation.BorderDashArray,rotateAngle:annotation.RotateAngle,isCloudShape:annotation.IsCloudShape,// eslint-disable-next-line max-len
cloudIntensity:annotation.CloudIntensity,vertexPoints:vertexPoints,lineHeadStart:annotation.LineHeadStart,lineHeadEnd:annotation.LineHeadEnd,isLocked:annotation.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},annotName:annotation.AnnotName,bounds:{left:left,top:top_1,width:width,height:height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},// eslint-disable-next-line max-len
labelContent:annotation.LabelContent,enableShapeLabel:annotation.EnableShapeLabel,labelFillColor:annotation.LabelFillColor,fontColor:annotation.FontColor,labelBorderColor:annotation.LabelBorderColor,fontSize:annotation.FontSize,// eslint-disable-next-line max-len
labelBounds:annotation.LabelBounds,annotationSelectorSettings:this.getSettings(annotation),labelSettings:annotation.LabelSettings,annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:isPrint,isCommentLock:annotation.IsCommentLock,isAnnotationRotated:isAnnotationRotated};var annot=void 0;// eslint-disable-next-line
var vPoints=annotationObject.vertexPoints;if(vertexPoints==null){vPoints=[];}// eslint-disable-next-line max-len
annotation.AnnotationSelectorSettings=annotation.AnnotationSelectorSettings?annotation.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annot={// eslint-disable-next-line max-len
id:'shape'+this.shapeCount,shapeAnnotationType:this.getShapeType(annotationObject),author:annotationObject.author,allowedInteractions:annotationObject.allowedInteractions,modifiedDate:annotationObject.modifiedDate,annotName:annotationObject.annotName,subject:annotationObject.subject,notes:annotationObject.note,fillColor:annotationObject.fillColor,strokeColor:annotationObject.strokeColor,opacity:annotationObject.opacity,// eslint-disable-next-line max-len
thickness:annotationObject.thickness,borderStyle:annotationObject.borderStyle,borderDashArray:annotationObject.borderDashArray?annotationObject.borderDashArray.toString():'0',rotateAngle:parseFloat(annotationObject.rotateAngle.split('Angle')[1]),comments:annotationObject.comments,review:annotationObject.review,isCloudShape:annotationObject.isCloudShape,cloudIntensity:annotationObject.cloudIntensity,taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(annotationObject.lineHeadEnd),// eslint-disable-next-line max-len
sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(annotationObject.lineHeadStart),vertexPoints:vPoints,bounds:{x:annotationObject.bounds.left,y:annotationObject.bounds.top,width:annotationObject.bounds.width,height:annotationObject.bounds.height},pageIndex:annotationObject.pageNumber,// eslint-disable-next-line max-len
labelContent:annotation.LabelContent,enableShapeLabel:annotation.EnableShapeLabel,labelFillColor:annotation.LabelFillColor,fontColor:annotation.FontColor,labelBorderColor:annotation.LabelBorderColor,fontSize:annotation.FontSize,labelBounds:annotation.LabelBounds,annotationSelectorSettings:annotation.AnnotationSelectorSettings,annotationSettings:annotationObject.annotationSettings,annotationAddMode:annotation.annotationAddMode,isPrint:isPrint,isCommentLock:annotationObject.isCommentLock};var addedAnnot=this.pdfViewer.add(annot);this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_shape');if(this.isAddAnnotationProgramatically){var settings={opacity:annot.opacity,strokeColor:annot.strokeColor,thickness:annot.thickness,modifiedDate:annot.modifiedDate,width:annot.bounds.width,height:annot.bounds.height};this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,annotation.ShapeAnnotationType,annot.bounds,settings);}}}}}else if(shapeAnnotations.shapeAnnotationType){var annotationObject=this.createAnnotationObject(shapeAnnotations);if(!sf.base.isNullOrUndefined(shapeAnnotations.formFieldAnnotationType)&&shapeAnnotations.formFieldAnnotationType!=="")this.pdfViewer.annotationModule.isFormFieldShape=true;else this.pdfViewer.annotationModule.isFormFieldShape=false;this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_shape');this.pdfViewer.annotationModule.triggerAnnotationAdd(shapeAnnotations);}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
ShapeAnnotation.prototype.getSettings=function(annotation){var selector=this.pdfViewer.annotationSelectorSettings;if(annotation.AnnotationSelectorSettings){selector=annotation.AnnotationSelectorSettings;}else{selector=this.getSelector(annotation.ShapeAnnotationType,annotation.Subject);}return selector;};/**
     * @param type
     * @private
     */ShapeAnnotation.prototype.setAnnotationType=function(type){this.updateShapeProperties();this.pdfViewerBase.disableTextSelectionMode();var author='Guest';switch(type){case'Line':this.currentAnnotationMode='Line';// eslint-disable-next-line max-len
var modifiedDateLine=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.lineSettings.author?this.pdfViewer.lineSettings.author:'Guest';this.pdfViewer.drawingObject={// eslint-disable-next-line max-len
shapeAnnotationType:this.setShapeType('Line'),fillColor:this.lineFillColor,notes:'',strokeColor:this.lineStrokeColor,opacity:this.lineOpacity,thickness:this.lineThickness,modifiedDate:modifiedDateLine,borderDashArray:this.lineDashArray.toString(),// eslint-disable-next-line max-len
sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.lineStartHead.toString()),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.lineEndHead.toString()),author:author,subject:'Line',lineHeadStart:this.lineStartHead,lineHeadEnd:this.lineEndHead,isCommentLock:false};this.pdfViewer.tool='Line';break;case'Arrow':this.currentAnnotationMode='Arrow';// eslint-disable-next-line max-len
var modifiedDateArrow=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.arrowSettings.author?this.pdfViewer.arrowSettings.author:'Guest';this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType('Arrow'),opacity:this.arrowOpacity,// eslint-disable-next-line max-len
sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.arrowStartHead.toString()),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.arrowEndHead.toString()),// eslint-disable-next-line max-len
fillColor:this.arrowFillColor,strokeColor:this.arrowStrokeColor,notes:'',thickness:this.arrowThickness,borderDashArray:this.arrowDashArray.toString(),author:author,subject:'Arrow',// eslint-disable-next-line max-len
modifiedDate:modifiedDateArrow,lineHeadStart:this.arrowStartHead,lineHeadEnd:this.arrowEndHead,isCommentLock:false};this.pdfViewer.tool='Line';break;case'Rectangle':this.currentAnnotationMode='Rectangle';// eslint-disable-next-line max-len
var modifiedDateRect=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.rectangleSettings.author?this.pdfViewer.rectangleSettings.author:'Guest';this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType('Rectangle'),strokeColor:this.rectangleStrokeColor,fillColor:this.rectangleFillColor,opacity:this.rectangleOpacity,notes:'',thickness:this.rectangleThickness,borderDashArray:'0',modifiedDate:modifiedDateRect,author:author,subject:'Rectangle',isCommentLock:false};this.pdfViewer.tool='DrawTool';break;case'Circle':this.currentAnnotationMode='Circle';// eslint-disable-next-line max-len
var modifiedDateCir=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.circleSettings.author?this.pdfViewer.circleSettings.author:'Guest';this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType('Circle'),strokeColor:this.circleStrokeColor,fillColor:this.circleFillColor,opacity:this.circleOpacity,notes:'',thickness:this.circleThickness,borderDashArray:'0',modifiedDate:modifiedDateCir,author:author,subject:'Circle',isCommentLock:false};this.pdfViewer.tool='DrawTool';break;case'Polygon':this.currentAnnotationMode='Polygon';// eslint-disable-next-line max-len
var modifiedDatePolygon=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.polygonSettings.author?this.pdfViewer.polygonSettings.author:'Guest';this.pdfViewer.drawingObject={strokeColor:this.polygonStrokeColor,fillColor:this.polygonFillColor,opacity:this.polygonOpacity,thickness:this.polygonThickness,borderDashArray:'0',notes:'',author:author,subject:'Polygon',modifiedDate:modifiedDatePolygon,borderStyle:'',isCommentLock:false};this.pdfViewer.tool='Polygon';break;}};ShapeAnnotation.prototype.updateShapeProperties=function(){this.lineFillColor=this.pdfViewer.lineSettings.fillColor?this.pdfViewer.lineSettings.fillColor:'#ffffff00';this.lineStrokeColor=this.pdfViewer.lineSettings.strokeColor?this.pdfViewer.lineSettings.strokeColor:'#ff0000';this.lineThickness=this.pdfViewer.lineSettings.thickness?this.pdfViewer.lineSettings.thickness:1;this.lineOpacity=this.pdfViewer.lineSettings.opacity?this.pdfViewer.lineSettings.opacity:1;this.lineDashArray=this.pdfViewer.lineSettings.borderDashArray?this.pdfViewer.lineSettings.borderDashArray:0;this.lineStartHead=this.pdfViewer.lineSettings.lineHeadStartStyle?this.pdfViewer.lineSettings.lineHeadStartStyle:'None';this.lineEndHead=this.pdfViewer.lineSettings.lineHeadEndStyle?this.pdfViewer.lineSettings.lineHeadEndStyle:'None';this.arrowFillColor=this.pdfViewer.arrowSettings.fillColor?this.pdfViewer.arrowSettings.fillColor:'#ffffff00';this.arrowStrokeColor=this.pdfViewer.arrowSettings.strokeColor?this.pdfViewer.arrowSettings.strokeColor:'#ff0000';this.arrowThickness=this.pdfViewer.arrowSettings.thickness?this.pdfViewer.arrowSettings.thickness:1;this.arrowOpacity=this.pdfViewer.arrowSettings.opacity?this.pdfViewer.arrowSettings.opacity:1;this.arrowDashArray=this.pdfViewer.arrowSettings.borderDashArray?this.pdfViewer.arrowSettings.borderDashArray:0;this.arrowStartHead=this.pdfViewer.arrowSettings.lineHeadStartStyle?this.pdfViewer.arrowSettings.lineHeadStartStyle:'Closed';this.arrowEndHead=this.pdfViewer.arrowSettings.lineHeadEndStyle?this.pdfViewer.arrowSettings.lineHeadEndStyle:'Closed';this.rectangleFillColor=this.pdfViewer.rectangleSettings.fillColor?this.pdfViewer.rectangleSettings.fillColor:'#ffffff00';this.rectangleStrokeColor=this.pdfViewer.rectangleSettings.strokeColor?this.pdfViewer.rectangleSettings.strokeColor:'#ff0000';this.rectangleThickness=this.pdfViewer.rectangleSettings.thickness?this.pdfViewer.rectangleSettings.thickness:1;this.rectangleOpacity=this.pdfViewer.rectangleSettings.opacity?this.pdfViewer.rectangleSettings.opacity:1;this.circleFillColor=this.pdfViewer.circleSettings.fillColor?this.pdfViewer.circleSettings.fillColor:'#ffffff00';this.circleStrokeColor=this.pdfViewer.circleSettings.strokeColor?this.pdfViewer.circleSettings.strokeColor:'#ff0000';this.circleThickness=this.pdfViewer.circleSettings.thickness?this.pdfViewer.circleSettings.thickness:1;this.circleOpacity=this.pdfViewer.circleSettings.opacity?this.pdfViewer.circleSettings.opacity:1;this.polygonFillColor=this.pdfViewer.polygonSettings.fillColor?this.pdfViewer.polygonSettings.fillColor:'#ffffff00';this.polygonStrokeColor=this.pdfViewer.polygonSettings.strokeColor?this.pdfViewer.polygonSettings.strokeColor:'#ff0000';this.polygonThickness=this.pdfViewer.polygonSettings.thickness?this.pdfViewer.polygonSettings.thickness:1;this.polygonOpacity=this.pdfViewer.polygonSettings.opacity?this.pdfViewer.polygonSettings.opacity:1;};ShapeAnnotation.prototype.setShapeType=function(shape){var shapeType;switch(shape){case'Line':shapeType='Line';break;case'Circle':shapeType='Ellipse';break;case'Square':shapeType='Rectangle';break;case'Polyline':shapeType='Line';break;case'Arrow':shapeType='LineWidthArrowHead';break;}return shapeType;};ShapeAnnotation.prototype.getShapeType=function(shape){var shapeType;switch(shape.shapeAnnotationType){case'Line':shapeType='Line';break;case'Circle':shapeType='Ellipse';break;case'Square':shapeType='Rectangle';break;case'Polyline':shapeType='Line';break;case'Polygon':shapeType='Polygon';break;}// eslint-disable-next-line max-len
if((shape.shapeAnnotationType==='Line'||shape.shapeAnnotationType==='Polyline')&&(shape.lineHeadStart!=='None'||shape.lineHeadEnd!=='None')){shapeType='LineWidthArrowHead';}return shapeType;};ShapeAnnotation.prototype.getShapeAnnotType=function(shape){var shapeType;switch(shape){case'Line':case'LineWidthArrowHead':shapeType='Line';break;case'Rectangle':shapeType='Square';break;case'Ellipse':shapeType='Circle';break;case'Polygon':shapeType='Polygon';break;}return shapeType;};/**
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @private
     */ // eslint-disable-next-line
ShapeAnnotation.prototype.modifyInCollection=function(property,pageNumber,annotationBase){if(!sf.base.isNullOrUndefined(annotationBase.formFieldAnnotationType)&&annotationBase.formFieldAnnotationType!=="")this.pdfViewer.annotationModule.isFormFieldShape=true;else this.pdfViewer.annotationModule.isFormFieldShape=false;this.pdfViewerBase.updateDocumentEditedProperty(true);var currentAnnotObject=null;if(annotationBase){if(property==='bounds'){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase,true);}}var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations!=null&&annotationBase){for(var i=0;i<pageAnnotations.length;i++){if(annotationBase.id===pageAnnotations[i].id){if(property==='bounds'){if(pageAnnotations[i].shapeAnnotationType==='Line'){pageAnnotations[i].vertexPoints=annotationBase.vertexPoints;// eslint-disable-next-line max-len
pageAnnotations[i].bounds={left:annotationBase.bounds.x,top:annotationBase.bounds.y,width:annotationBase.bounds.width,height:annotationBase.bounds.height,right:annotationBase.bounds.right,bottom:annotationBase.bounds.bottom};}else if(pageAnnotations[i].shapeAnnotationType==='Polygon'){pageAnnotations[i].vertexPoints=annotationBase.vertexPoints;// eslint-disable-next-line max-len
pageAnnotations[i].bounds={left:annotationBase.bounds.x,top:annotationBase.bounds.y,width:annotationBase.bounds.width,height:annotationBase.bounds.height,right:annotationBase.bounds.right,bottom:annotationBase.bounds.bottom};}else{// eslint-disable-next-line max-len
pageAnnotations[i].bounds={left:annotationBase.bounds.x,top:annotationBase.bounds.y,width:annotationBase.bounds.width,height:annotationBase.bounds.height,right:annotationBase.bounds.right,bottom:annotationBase.bounds.bottom};}if(pageAnnotations[i].enableShapeLabel===true&&annotationBase.wrapper){var labelTop=0;var labelLeft=0;var labelWidth=0;var labelHeight=24.6;var labelMaxWidth=151;if(annotationBase.wrapper.bounds.width){// eslint-disable-next-line max-len
labelWidth=annotationBase.wrapper.bounds.width/2;labelWidth=labelWidth>0&&labelWidth<labelMaxWidth?labelWidth:labelMaxWidth;}if(annotationBase.wrapper.bounds.left){// eslint-disable-next-line max-len
labelLeft=annotationBase.wrapper.bounds.left+annotationBase.wrapper.bounds.width/2-labelWidth/2;}if(annotationBase.wrapper.bounds.top){// eslint-disable-next-line max-len
labelTop=annotationBase.wrapper.bounds.top+annotationBase.wrapper.bounds.height/2-12.3;}// eslint-disable-next-line max-len
pageAnnotations[i].labelBounds={left:labelLeft,top:labelTop,width:labelWidth,height:labelHeight,right:0,bottom:0};}}else if(property==='fill'){pageAnnotations[i].fillColor=annotationBase.wrapper.children[0].style.fill;}else if(property==='stroke'){pageAnnotations[i].strokeColor=annotationBase.wrapper.children[0].style.strokeColor;}else if(property==='opacity'){pageAnnotations[i].opacity=annotationBase.wrapper.children[0].style.opacity;}else if(property==='thickness'){pageAnnotations[i].thickness=annotationBase.wrapper.children[0].style.strokeWidth;}else if(property==='dashArray'){pageAnnotations[i].borderDashArray=annotationBase.wrapper.children[0].style.strokeDashArray;pageAnnotations[i].borderStyle=annotationBase.borderStyle;}else if(property==='startArrow'){// eslint-disable-next-line max-len
pageAnnotations[i].lineHeadStart=this.pdfViewer.annotation.getArrowTypeForCollection(annotationBase.sourceDecoraterShapes);}else if(property==='endArrow'){// eslint-disable-next-line max-len
pageAnnotations[i].lineHeadEnd=this.pdfViewer.annotation.getArrowTypeForCollection(annotationBase.taregetDecoraterShapes);}else if(property==='notes'){pageAnnotations[i].note=annotationBase.notes;}else if(property==='delete'){currentAnnotObject=pageAnnotations.splice(i,1)[0];break;}else if(property==='labelContent'){pageAnnotations[i].note=annotationBase.labelContent;pageAnnotations[i].labelContent=annotationBase.labelContent;break;}else if(property==='fontColor'){pageAnnotations[i].fontColor=annotationBase.fontColor;}else if(property==='fontSize'){pageAnnotations[i].fontSize=annotationBase.fontSize;}pageAnnotations[i].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],pageNumber);}}this.manageAnnotations(pageAnnotations,pageNumber);}return currentAnnotObject;};/**
     * @param pageNumber
     * @param annotationBase
     * @param pageNumber
     * @param annotationBase
     * @private
     */ShapeAnnotation.prototype.addInCollection=function(pageNumber,annotationBase){var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations){pageAnnotations.push(annotationBase);}this.manageAnnotations(pageAnnotations,pageNumber);};/**
     * @private
     */ShapeAnnotation.prototype.saveShapeAnnotations=function(){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_shape'];}// eslint-disable-next-line
var annotations=new Array();for(var j=0;j<this.pdfViewerBase.pageCount;j++){annotations[j]=[];}if(storeObject&&!this.pdfViewer.annotationSettings.skipDownload){var annotationCollection=JSON.parse(storeObject);for(var i=0;i<annotationCollection.length;i++){var newArray=[];var pageAnnotationObject=annotationCollection[i];if(pageAnnotationObject){for(var z=0;pageAnnotationObject.annotations.length>z;z++){if(!this.pdfViewerBase.checkFormFieldCollection(pageAnnotationObject.annotations[z].id)){this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);if(this.pdfViewerBase.isJsonExported){if(pageAnnotationObject.annotations[z].isAnnotationRotated){pageAnnotationObject.annotations[z].bounds=this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex);pageAnnotationObject.annotations[z].vertexPoints=this.pdfViewer.annotation.getVertexPoints(pageAnnotationObject.annotations[z].vertexPoints,pageAnnotationObject.pageIndex);}else{var pageDetails=this.pdfViewerBase.pageSize[pageAnnotationObject.pageIndex];if(pageDetails){pageAnnotationObject.annotations[z].annotationRotation=pageDetails.rotation;}}}// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex));var strokeColorString=pageAnnotationObject.annotations[z].strokeColor;pageAnnotationObject.annotations[z].strokeColor=JSON.stringify(this.getRgbCode(strokeColorString));var fillColorString=pageAnnotationObject.annotations[z].fillColor;pageAnnotationObject.annotations[z].fillColor=JSON.stringify(this.getRgbCode(fillColorString));// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].vertexPoints=JSON.stringify(this.pdfViewer.annotation.getVertexPoints(pageAnnotationObject.annotations[z].vertexPoints,pageAnnotationObject.pageIndex));if(pageAnnotationObject.annotations[z].rectangleDifference!==null){// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].rectangleDifference=JSON.stringify(pageAnnotationObject.annotations[z].rectangleDifference);}if(pageAnnotationObject.annotations[z].enableShapeLabel===true){// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].labelBounds=JSON.stringify(this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(JSON.parse(pageAnnotationObject.annotations[z].bounds)));var labelFillColorString=pageAnnotationObject.annotations[z].labelFillColor;pageAnnotationObject.annotations[z].labelFillColor=JSON.stringify(this.getRgbCode(labelFillColorString));var labelBorderColorString=pageAnnotationObject.annotations[z].labelBorderColor;pageAnnotationObject.annotations[z].labelBorderColor=JSON.stringify(this.getRgbCode(labelBorderColorString));pageAnnotationObject.annotations[z].labelSettings.fillColor=labelFillColorString;var fontColorString=pageAnnotationObject.annotations[z].labelSettings.fontColor;pageAnnotationObject.annotations[z].fontColor=JSON.stringify(this.getRgbCode(fontColorString));}}else{pageAnnotationObject.annotations[z]="";}}pageAnnotationObject.annotations=pageAnnotationObject.annotations.filter(function(item){return item;});newArray=pageAnnotationObject.annotations;}annotations[pageAnnotationObject.pageIndex]=newArray;}}return JSON.stringify(annotations);};ShapeAnnotation.prototype.manageAnnotations=function(pageAnnotations,pageNumber){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_shape'];}if(storeObject){var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_shape');}var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_shape']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_shape',annotationStringified);}}};ShapeAnnotation.prototype.createAnnotationObject=function(annotationModel){var bound;var labelBound;var annotationName=this.pdfViewer.annotation.createGUID();if(!annotationModel.formFieldAnnotationType){// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('shape',annotationModel.pageIndex+1,annotationModel.shapeAnnotationType,annotationName,'',annotationModel.author);}annotationModel.annotName=annotationName;if(annotationModel.wrapper.bounds){bound={// eslint-disable-next-line max-len
left:annotationModel.wrapper.bounds.x,top:annotationModel.wrapper.bounds.y,height:annotationModel.wrapper.bounds.height,width:annotationModel.wrapper.bounds.width,right:annotationModel.wrapper.bounds.right,bottom:annotationModel.wrapper.bounds.bottom};labelBound=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(annotationModel.wrapper.bounds);}else{bound={left:0,top:0,height:0,width:0,right:0,bottom:0};labelBound={left:0,top:0,height:0,width:0,right:0,bottom:0};}if(annotationModel.subject==='Line'&&annotationModel.shapeAnnotationType==='Polygon'){annotationModel.author=this.pdfViewer.annotationModule.updateAnnotationAuthor('shape','Polygon');}else{annotationModel.author=this.pdfViewer.annotationModule.updateAnnotationAuthor('shape',annotationModel.subject);}this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(annotationName,annotationModel.notes);// eslint-disable-next-line radix
var borderDashArray=parseInt(annotationModel.borderDashArray);borderDashArray=isNaN(borderDashArray)?0:borderDashArray;// eslint-disable-next-line
var annotationSettings=this.pdfViewer.annotationModule.findAnnotationSettings(annotationModel,true);annotationModel.isPrint=annotationSettings.isPrint;var setting=this.pdfViewer.shapeLabelSettings;var labelSettings={borderColor:annotationModel.strokeColor,fillColor:annotationModel.fillColor,fontColor:annotationModel.fontColor,fontSize:annotationModel.fontSize,labelContent:annotationModel.labelContent,labelHeight:setting.labelHeight,labelWidth:setting.labelMaxWidth,opacity:annotationModel.opacity};return{// eslint-disable-next-line max-len
id:annotationModel.id,shapeAnnotationType:this.getShapeAnnotType(annotationModel.shapeAnnotationType),author:annotationModel.author,allowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotationModel),subject:annotationModel.subject,note:annotationModel.notes,strokeColor:annotationModel.strokeColor,annotName:annotationName,comments:[],review:{state:'',stateModel:'',modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),author:annotationModel.author},fillColor:annotationModel.fillColor,opacity:annotationModel.opacity,thickness:annotationModel.thickness,pageNumber:annotationModel.pageIndex,// eslint-disable-next-line max-len
borderStyle:annotationModel.borderStyle,borderDashArray:borderDashArray,bounds:bound,modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),rotateAngle:'RotateAngle'+annotationModel.rotateAngle,isCloudShape:annotationModel.isCloudShape,cloudIntensity:annotationModel.cloudIntensity,// eslint-disable-next-line max-len
vertexPoints:annotationModel.vertexPoints,lineHeadStart:this.pdfViewer.annotation.getArrowTypeForCollection(annotationModel.sourceDecoraterShapes),lineHeadEnd:this.pdfViewer.annotation.getArrowTypeForCollection(annotationModel.taregetDecoraterShapes),rectangleDifference:[],isLocked:annotationSettings.isLock,// eslint-disable-next-line max-len
labelContent:annotationModel.labelContent,enableShapeLabel:annotationModel.enableShapeLabel,labelFillColor:annotationModel.labelFillColor,fontColor:annotationModel.fontColor,labelBorderColor:annotationModel.labelBorderColor,fontSize:annotationModel.fontSize,// eslint-disable-next-line max-len
labelBounds:labelBound,annotationSelectorSettings:this.getSelector(annotationModel.shapeAnnotationType,annotationModel.subject),labelSettings:labelSettings,annotationSettings:annotationSettings,customData:this.pdfViewer.annotation.getShapeData(annotationModel.shapeAnnotationType,annotationModel.subject),isPrint:annotationModel.isPrint,isCommentLock:annotationModel.isCommentLock,isAnnotationRotated:false};};ShapeAnnotation.prototype.getSelector=function(type,subject){var selector=this.pdfViewer.annotationSelectorSettings;if(type==='Line'&&subject!=='Arrow'&&this.pdfViewer.lineSettings.annotationSelectorSettings){selector=this.pdfViewer.lineSettings.annotationSelectorSettings;}else if((type==='LineWidthArrowHead'||subject==='Arrow')&&this.pdfViewer.lineSettings.annotationSelectorSettings){selector=this.pdfViewer.arrowSettings.annotationSelectorSettings;}else if((type==='Rectangle'||type==='Square')&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){selector=this.pdfViewer.rectangleSettings.annotationSelectorSettings;}else if((type==='Ellipse'||type==='Circle')&&this.pdfViewer.circleSettings.annotationSelectorSettings){selector=this.pdfViewer.circleSettings.annotationSelectorSettings;}else if(type==='Polygon'&&this.pdfViewer.polygonSettings.annotationSelectorSettings){selector=this.pdfViewer.polygonSettings.annotationSelectorSettings;}return selector;};// eslint-disable-next-line
ShapeAnnotation.prototype.getAnnotations=function(pageIndex,shapeAnnotations){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_shape'];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=shapeAnnotations;}}else{annotationCollection=shapeAnnotations;}return annotationCollection;};// eslint-disable-next-line
ShapeAnnotation.prototype.getRgbCode=function(colorString){if(!colorString.match(/#([a-z0-9]+)/gi)&&!colorString.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)){colorString=this.pdfViewer.annotationModule.nameToHash(colorString);}var stringArray=colorString.split(',');if(sf.base.isNullOrUndefined(stringArray[1])){colorString=this.pdfViewer.annotationModule.getValue(colorString,'rgba');stringArray=colorString.split(',');}// eslint-disable-next-line radix
var r=parseInt(stringArray[0].split('(')[1]);// eslint-disable-next-line radix
var g=parseInt(stringArray[1]);// eslint-disable-next-line radix
var b=parseInt(stringArray[2]);// eslint-disable-next-line radix
var a=parseFloat(stringArray[3]);return{r:r,g:g,b:b,a:a};};/**
     * @param annotation
     * @param pageNumber
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
ShapeAnnotation.prototype.saveImportedShapeAnnotations=function(annotation,pageNumber){var annotationObject=null;var vertexPoints=null;annotation.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor('shape',annotation.Subject);if(annotation.VertexPoints){vertexPoints=[];for(var j=0;j<annotation.VertexPoints.length;j++){var point={x:annotation.VertexPoints[j].X,y:annotation.VertexPoints[j].Y};vertexPoints.push(point);}}if(annotation.Bounds&&annotation.EnableShapeLabel===true){// eslint-disable-next-line max-len
annotation.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds);// eslint-disable-next-line max-len
annotation.LabelBorderColor=annotation.LabelBorderColor?annotation.LabelBorderColor:annotation.StrokeColor;annotation.FontColor=annotation.FontColor?annotation.FontColor:annotation.StrokeColor;annotation.LabelFillColor=annotation.LabelFillColor?annotation.LabelFillColor:annotation.FillColor;annotation.FontSize=annotation.FontSize?annotation.FontSize:16;annotation.LabelSettings=annotation.LabelSettings?annotation.LabelSettings:this.pdfViewer.shapeLabelSettings;}// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);// eslint-disable-next-line max-len
annotation.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);// eslint-disable-next-line max-len
annotationObject={id:'shape',shapeAnnotationType:annotation.ShapeAnnotationType,author:annotation.Author,allowedInteractions:annotation.allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,pageNumber:pageNumber,// eslint-disable-next-line max-len
note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,thickness:annotation.Thickness,rectangleDifference:annotation.RectangleDifference,borderStyle:annotation.BorderStyle,borderDashArray:annotation.BorderDashArray,rotateAngle:annotation.RotateAngle,isCloudShape:annotation.IsCloudShape,// eslint-disable-next-line max-len
cloudIntensity:annotation.CloudIntensity,vertexPoints:vertexPoints,lineHeadStart:annotation.LineHeadStart,lineHeadEnd:annotation.LineHeadEnd,isLocked:annotation.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},annotName:annotation.AnnotName,bounds:{left:annotation.Bounds.X,top:annotation.Bounds.Y,width:annotation.Bounds.Width,height:annotation.Bounds.Height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},labelContent:annotation.LabelContent,enableShapeLabel:annotation.EnableShapeLabel,labelFillColor:annotation.LabelFillColor,labelBorderColor:annotation.LabelBorderColor,fontColor:annotation.FontColor,fontSize:annotation.FontSize,// eslint-disable-next-line max-len
labelBounds:annotation.LabelBounds,annotationSelectorSettings:this.getSettings(annotation),labelSettings:annotation.LabelSettings,annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.IsPrint,isCommentLock:annotation.IsCommentLock,isAnnotationRotated:false};this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_shape');};/**
     * @param annotation
     * @param pageNumber
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
ShapeAnnotation.prototype.updateShapeAnnotationCollections=function(annotation,pageNumber){// eslint-disable-next-line
var annotationObject=null;var vertexPoints=null;if(annotation.VertexPoints){vertexPoints=[];for(var j=0;j<annotation.VertexPoints.length;j++){var point={x:annotation.VertexPoints[j].X,y:annotation.VertexPoints[j].Y};vertexPoints.push(point);}}if(annotation.Bounds&&annotation.EnableShapeLabel===true){// eslint-disable-next-line max-len
annotation.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds);// eslint-disable-next-line max-len
annotation.LabelBorderColor=annotation.LabelBorderColor?annotation.LabelBorderColor:annotation.StrokeColor;annotation.FontColor=annotation.FontColor?annotation.FontColor:annotation.StrokeColor;annotation.LabelFillColor=annotation.LabelFillColor?annotation.LabelFillColor:annotation.FillColor;annotation.FontSize=annotation.FontSize?annotation.FontSize:16;var settings=this.pdfViewer.shapeLabelSettings;var labelSettings={borderColor:annotation.StrokeColor,fillColor:annotation.FillColor,fontColor:annotation.FontColor,fontSize:annotation.FontSize,labelContent:annotation.LabelContent,labelHeight:settings.labelHeight,labelWidth:settings.labelWidth,opacity:annotation.Opacity};annotation.LabelSettings=annotation.LabelSettings?annotation.LabelSettings:labelSettings;}// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);if(annotation.IsLocked){annotation.AnnotationSettings.isLock=annotation.IsLocked;}// eslint-disable-next-line max-len
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);// eslint-disable-next-line max-len
annotationObject={id:'shape',shapeAnnotationType:annotation.ShapeAnnotationType,author:annotation.Author,allowedInteractions:annotation.allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,// eslint-disable-next-line max-len
note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,thickness:annotation.Thickness,rectangleDifference:annotation.RectangleDifference,borderStyle:annotation.BorderStyle,borderDashArray:annotation.BorderDashArray,rotateAngle:annotation.RotateAngle,isCloudShape:annotation.IsCloudShape,// eslint-disable-next-line max-len
cloudIntensity:annotation.CloudIntensity,vertexPoints:vertexPoints,lineHeadStart:annotation.LineHeadStart,lineHeadEnd:annotation.LineHeadEnd,isLocked:annotation.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},annotationId:annotation.AnnotName,bounds:{left:annotation.Bounds.X,top:annotation.Bounds.Y,width:annotation.Bounds.Width,height:annotation.Bounds.Height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},labelContent:annotation.LabelContent,enableShapeLabel:annotation.EnableShapeLabel,labelFillColor:annotation.LabelFillColor,labelBorderColor:annotation.LabelBorderColor,fontColor:annotation.FontColor,fontSize:annotation.FontSize,// eslint-disable-next-line max-len
labelBounds:annotation.LabelBounds,pageNumber:pageNumber,labelSettings:annotation.LabelSettings,annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.IsPrint};return annotationObject;};/**
     * This method used to add annotations with using program.
     *
     * @param annotationType - It describes the annotation type
     * @param annotationObject - It describes type of annotation object
     * @param offset - It describes about the annotation bounds or location
     * @returns Object
     * @private
     */ShapeAnnotation.prototype.updateAddAnnotationDetails=function(annotationType,annotationObject,offset){//Creating new object if annotationObject is null
if(!annotationObject){annotationObject={offset:{x:10,y:10},pageNumber:0,width:undefined,height:undefined};offset=annotationObject.offset;}else if(!annotationObject.offset)offset={x:10,y:10};else offset=annotationObject.offset;//Initialize the annotation settings
var annotationSelectorSettings=null;var allowedInteractions=null;var annotationSettings=null;var shapeAnnotationType='';var isArrow=false;var vertexPoints=null;//Creating the CurrentDate and Annotation name
var currentDateString=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();if(annotationType=='Line'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.lineSettings.annotationSelectorSettings?this.pdfViewer.lineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.lineSettings);allowedInteractions=this.pdfViewer.lineSettings.allowedInteractions?this.pdfViewer.lineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;shapeAnnotationType='Line';if(annotationObject.vertexPoints)vertexPoints=annotationObject.vertexPoints;else vertexPoints=[{x:offset.x,y:offset.y},{x:offset.x+100,y:offset.y}];annotationObject.width=annotationObject.width?annotationObject.width:1;annotationObject.height=annotationObject.height?annotationObject.height:1;}else if(annotationType=='Arrow'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.arrowSettings.annotationSelectorSettings?this.pdfViewer.arrowSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.arrowSettings);allowedInteractions=this.pdfViewer.arrowSettings.allowedInteractions?this.pdfViewer.arrowSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;shapeAnnotationType='Line';isArrow=true;if(annotationObject.vertexPoints)vertexPoints=annotationObject.vertexPoints;else vertexPoints=[{x:offset.x,y:offset.y},{x:offset.x+100,y:offset.y}];annotationObject.width=annotationObject.width?annotationObject.width:1;annotationObject.height=annotationObject.height?annotationObject.height:1;}else if(annotationType=='Rectangle'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.rectangleSettings.annotationSelectorSettings?this.pdfViewer.rectangleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.rectangleSettings);allowedInteractions=this.pdfViewer.rectangleSettings.allowedInteractions?this.pdfViewer.rectangleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;shapeAnnotationType='Square';annotationObject.width=annotationObject.width?annotationObject.width:150;annotationObject.height=annotationObject.height?annotationObject.height:75;}else if(annotationType=='Circle'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.circleSettings.annotationSelectorSettings?this.pdfViewer.circleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.circleSettings);allowedInteractions=this.pdfViewer.circleSettings.allowedInteractions?this.pdfViewer.circleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;shapeAnnotationType='Circle';annotationObject.width=annotationObject.width?annotationObject.width:100;annotationObject.height=annotationObject.height?annotationObject.height:90;}else if(annotationType=='Polygon'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.polygonSettings.annotationSelectorSettings?this.pdfViewer.polygonSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.polygonSettings);allowedInteractions=this.pdfViewer.polygonSettings.allowedInteractions?this.pdfViewer.polygonSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;shapeAnnotationType='Polygon';if(annotationObject.vertexPoints)vertexPoints=annotationObject.vertexPoints;else vertexPoints=[{x:offset.x,y:offset.y},{x:offset.x+42,y:offset.y-29},{x:offset.x+89,y:offset.y-1},{x:offset.x+78,y:offset.y+42},{x:offset.x+11,y:offset.y+42},{x:offset.x,y:offset.y}];annotationObject.width=annotationObject.width?annotationObject.width:1;annotationObject.height=annotationObject.height?annotationObject.height:1;}annotationSettings.isLock=annotationObject.isLock?annotationObject.isLock:false;annotationSettings.minHeight=annotationObject.minHeight?annotationObject.minHeight:0;annotationSettings.minWidth=annotationObject.minWidth?annotationObject.minWidth:0;annotationSettings.maxWidth=annotationObject.maxWidth?annotationObject.maxWidth:0;annotationSettings.maxHeight=annotationObject.maxHeight?annotationObject.maxHeight:0;//Converting points model into vertex property
if(vertexPoints)vertexPoints=this.pdfViewer.annotation.getVertexPointsXY(vertexPoints);//Creating Annotation objects with it's proper properties
var shapeAnnotation=[];var shape={AllowedInteractions:annotationObject.allowedInteractions?annotationObject.allowedInteractions:allowedInteractions,AnnotName:annotationName,AnnotType:'shape',AnnotationSelectorSettings:annotationObject.annotationSelectorSettings?annotationObject.annotationSelectorSettings:annotationSelectorSettings,AnnotationSettings:annotationSettings,Author:annotationObject.author?annotationObject.author:'Guest',BorderDashArray:annotationObject.borderDashArray?annotationObject.borderDashArray:0,BorderStyle:'Solid',Bounds:{X:offset.x,Y:offset.y,Width:annotationObject.width,Height:annotationObject.height,Left:offset.x,Top:offset.y,Location:{X:offset.x,Y:offset.y},Size:{Height:annotationObject.height,IsEmpty:false,Width:annotationObject.width}},CloudIntensity:0,Comments:null,CustomData:annotationObject.customData?annotationObject.customData:null,CreatedDate:currentDateString,EnableShapeLabel:false,ExistingCustomData:null,FillColor:annotationObject.fillColor?annotationObject.fillColor:'#ffffff00',FontColor:null,FontSize:0,IsCloudShape:false,IsCommentLock:false,IsLocked:annotationObject.isLock?annotationObject.isLock:false,IsPrint:annotationObject.isPrint?annotationObject.isPrint:true,LabelBorderColor:null,LabelBounds:{X:0,Y:0,Width:0,Height:0},LabelContent:null,LabelFillColor:null,LabelSettings:null,LineHeadEnd:annotationObject.lineHeadStartStyle?annotationObject.lineHeadStartStyle:isArrow?'ClosedArrow':'None',LineHeadStart:annotationObject.lineHeadEndStyle?annotationObject.lineHeadEndStyle:isArrow?'ClosedArrow':'None',ModifiedDate:'',Note:'',Opacity:annotationObject.opacity?annotationObject.opacity:1,RectangleDifference:null,RotateAngle:'RotateAngle0',ShapeAnnotationType:shapeAnnotationType,State:'',StateModel:'',StrokeColor:annotationObject.strokeColor?annotationObject.strokeColor:'#ff0000',Subject:annotationType.toString(),Thickness:annotationObject.thickness?annotationObject.thickness:1,VertexPoints:vertexPoints};//Adding the annotation object to an array and return it
shapeAnnotation[0]=shape;return{shapeAnnotation:shapeAnnotation};};return ShapeAnnotation;}();/**
 * The `StampAnnotation` module is used to handle annotation actions of PDF viewer.
 *
 * @hidden
 */var StampAnnotation=/** @class */function(){function StampAnnotation(pdfviewer,pdfViewerBase){/**
         * @private
         */this.isStampAddMode=false;/**
         * @private
         */ // eslint-disable-next-line
this.stampPageNumber=[];/**
         * @private
         */this.isAddAnnotationProgramatically=false;/**
         * @private
         */this.customStampName=null;this.dynamicText='';this.pdfViewer=pdfviewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @param stampAnnotations
     * @param pageNumber
     * @param canvass
     * @param isImport
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.renderStampAnnotations=function(stampAnnotations,pageNumber,canvass,isImport){var isStampAdded=false;for(var p=0;p<this.stampPageNumber.length;p++){if(this.stampPageNumber[p]===pageNumber){isStampAdded=true;break;}}if(isImport){isStampAdded=false;}if(stampAnnotations&&!isStampAdded){this.stampPageNumber.push(pageNumber);var _loop_1=function _loop_1(s){// eslint-disable-next-line
var annotation=stampAnnotations[s];annotation.annotationAddMode=this_1.pdfViewer.annotationModule.findAnnotationMode(annotation,pageNumber,annotation.AnnotType);// eslint-disable-next-line
var Apperance=annotation['Apperarance'];// eslint-disable-next-line
var position=annotation['Rect'];// eslint-disable-next-line
var opacity=annotation['Opacity'];// eslint-disable-next-line
var annotationSelectorSettings=annotation["AnnotationSelectorSettings"];// eslint-disable-next-line
var pageIndex=parseFloat(stampAnnotations[s]['pageNumber']);/* eslint-disable */if(isNaN(pageIndex)){pageIndex=stampAnnotations[s]['PageNumber'];}// eslint-disable-next-line
var stampName=annotation['IsDynamic'];var pageDiv=document.getElementById(this_1.pdfViewer.dataId+'_pageDiv_'+pageIndex);// eslint-disable-next-line
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this_1.pdfViewer.annotationModule.updateSettings(this_1.pdfViewer.stampSettings);// eslint-disable-next-line
var isImageStamp=this_1.stampImageData(annotation);if(stampName&&annotation['Subject']&&annotation['Subject']!=='Draft'&&!isImageStamp){// eslint-disable-next-line
this_1.retrieveDynamicStampAnnotation(annotation['Subject']);this_1.isExistingStamp=true;var currentLocation=this_1.calculateImagePosition(position,true);// eslint-disable-next-line
var rotation=annotation['RotateAngle'];for(var d=0;d<Apperance.length;d++){// eslint-disable-next-line
var stampShapes=Apperance[d];// eslint-disable-next-line
var stampType=stampShapes['type'];// eslint-disable-next-line
if(stampType==='string'&&stampShapes['text']!==undefined){// eslint-disable-next-line
var text=void 0;if(!isImport){// eslint-disable-next-line
text=stampShapes['text'].split('(')[1].split(')')[0];}else{// eslint-disable-next-line
text=stampShapes['text'];}if(text.split('(').length===2){if(text.split('(')[1].split(')')[0].toLowerCase()!==annotation['Subject'].toLowerCase()){this_1.dynamicText+=text.split('(')[1].split(')')[0];}}else if(text.toLowerCase()!==annotation['Subject'].toLowerCase()){this_1.dynamicText+=text;}}}// eslint-disable-next-line max-len
this_1.renderStamp(currentLocation.left,currentLocation.top,currentLocation.width,currentLocation.height,pageIndex,opacity,rotation,canvass,annotation,true);}// eslint-disable-next-line
else if(annotation['Subject']&&!isImageStamp){// eslint-disable-next-line
this_1.retrievestampAnnotation(annotation['Subject']);this_1.isExistingStamp=true;var currentLocation=this_1.calculateImagePosition(position,true);// eslint-disable-next-line
var rotation=annotation['RotateAngle'];// eslint-disable-next-line max-len
this_1.renderStamp(currentLocation.left,currentLocation.top,currentLocation.width,currentLocation.height,pageIndex,opacity,rotation,canvass,annotation);this_1.isExistingStamp=false;}else{if(Apperance){var _loop_2=function _loop_2(j){// eslint-disable-next-line
var stampShapes=Apperance[j];// eslint-disable-next-line
var imageData=stampShapes['imagedata'];// eslint-disable-next-line
var matrix=stampShapes['matrix'];// eslint-disable-next-line
var currentDate=stampShapes['CreationDate'];// eslint-disable-next-line
var modifiedDate=stampShapes['ModifiedDate'];// eslint-disable-next-line
var rotationAngle=stampShapes['RotateAngle'];if(imageData){var image_1;if(window.customStampCollection&&window.customStampCollection.get(annotation.AnnotName)){image_1=window.customStampCollection.get(annotation.AnnotName);}else{image_1=new Image();image_1.src=imageData;}// eslint-disable-next-line
var proxy_1=this_1;if(image_1.complete){this_1.customStampLoad(this_1,position,annotation,pageIndex,image_1,currentDate,modifiedDate,rotationAngle,opacity,canvass);}else{image_1.onload=function(){proxy_1.customStampLoad(proxy_1,position,annotation,pageIndex,image_1,currentDate,modifiedDate,rotationAngle,opacity,canvass);};}}};for(var j=0;j<Apperance.length;j++){_loop_2(j);}}}};var this_1=this;for(var s=0;s<stampAnnotations.length;s++){_loop_1(s);}}};/**
     * @private
     */StampAnnotation.prototype.customStampLoad=function(proxy,position,annotation,pageIndex,image,currentDate,modifiedDate,rotationAngle,opacity,canvass){if(position){var y=parseFloat(position.y?position.y:position.Y);if(y<0){position.Y=(proxy.pdfViewerBase.pageSize[pageIndex].height+y)*(72/96);}}var currentLocation=proxy.calculateImagePosition(position,true);// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:proxy.pdfViewer.customStampSettings.annotationSettings;// eslint-disable-next-line max-len
proxy.renderCustomImage(currentLocation,pageIndex,image,currentDate,modifiedDate,rotationAngle,opacity,canvass,true,annotation);};/**
     * @private
     */StampAnnotation.prototype.moveStampElement=function(X,Y,pageIndex){var zoomFactor=this.pdfViewerBase.getZoomFactor();X=X/zoomFactor;Y=Y/zoomFactor;// eslint-disable-next-line max-len
var author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:'Guest';if(this.pdfViewerBase.isDynamicStamp){if(this.pdfViewer.dateTimeFormat){var dateTime=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
this.dynamicText='By '+author+' at '+dateTime+' ';}else{// eslint-disable-next-line
var today=new Date().toString().split(' ').splice(1,3).join(' ');// eslint-disable-next-line
var time=new Date().toLocaleTimeString();this.dynamicText='By '+author+' at '+time+' , '+today+'   ';}}var annot;// eslint-disable-next-line
var annotation=this.currentStampAnnotation;if(annotation&&annotation.shapeAnnotationType==='Image'){annot={// eslint-disable-next-line max-len
id:'stamp'+this.pdfViewerBase.customStampCount,bounds:{x:X,y:Y,width:annotation.bounds.width,height:annotation.bounds.height},pageIndex:pageIndex,data:annotation.data,modifiedDate:annotation.modifiedDate,shapeAnnotationType:'Image',opacity:annotation.opacity,rotateAngle:annotation.RotationAngle,annotName:annotation.annotationName?annotation.annotationName:annotation.annotName,comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:annotation.author}};}else if(annotation){annot={// eslint-disable-next-line max-len
id:'stamp'+this.pdfViewerBase.customStampCount,bounds:{x:X,y:Y,width:annotation.width,height:annotation.height},pageIndex:pageIndex,data:annotation.pathdata,// eslint-disable-next-line max-len
shapeAnnotationType:'Stamp',strokeColor:annotation.strokeColor,fillColor:annotation.fillColor,opacity:0.5,stampFillColor:annotation.stampFillColor,stampStrokeColor:annotation.stampStrokeColor,rotateAngle:annotation.RotateAngle,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,subject:annotation.iconName,annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings};}if(this.pdfViewerBase.currentSignatureAnnot){annotation=this.pdfViewerBase.currentSignatureAnnot;if(annotation.shapeAnnotationType==='SignatureText'){annot={// eslint-disable-next-line max-len
id:'sign'+this.pdfViewerBase.signatureCount,bounds:{x:X,y:Y,width:annotation.bounds.width,height:annotation.bounds.height},pageIndex:pageIndex,data:annotation.data,modifiedDate:'',shapeAnnotationType:'SignatureText',thickness:annotation.thickness,strokeColor:annotation.strokeColor,opacity:annotation.opacity,signatureName:annotation.signatureName,fontFamily:annotation.fontFamily,fontSize:annotation.bounds.height/2};}else if(annotation.shapeAnnotationType==='SignatureImage'){annot={// eslint-disable-next-line max-len
id:'sign'+this.pdfViewerBase.signatureCount,bounds:{x:X,y:Y,width:annotation.bounds.width,height:annotation.bounds.height},pageIndex:pageIndex,data:annotation.data,modifiedDate:'',shapeAnnotationType:'SignatureImage',thickness:annotation.thickness,strokeColor:annotation.strokeColor,opacity:annotation.opacity,signatureName:annotation.signatureName};}else{annot={// eslint-disable-next-line max-len
id:'sign'+this.pdfViewerBase.signatureCount,bounds:{x:X,y:Y,width:annotation.bounds.width,height:annotation.bounds.height},pageIndex:pageIndex,data:annotation.data,// eslint-disable-next-line max-len
shapeAnnotationType:'HandWrittenSignature',thickness:annotation.thickness,strokeColor:annotation.strokeColor,opacity:annotation.opacity,signatureName:annotation.signatureName};}}return annot;};// eslint-disable-next-line
StampAnnotation.prototype.ConvertPointToPixel=function(number){return number*(96/72);};// eslint-disable-next-line
StampAnnotation.prototype.calculateImagePosition=function(position,flags){var positions={width:0,height:0,left:0,top:0};var x=parseFloat(position.x?position.x:position.X);var y=parseFloat(position.y?position.y:position.Y);var newWidth=parseFloat(position.width?position.width:position.Width);var newHeight=parseFloat(position.height?position.height:position.Height);if(flags){var width=this.ConvertPointToPixel(newWidth);var height=this.ConvertPointToPixel(newHeight);var left=this.ConvertPointToPixel(x);var top_1=this.ConvertPointToPixel(y);positions={width:width,height:height,left:left,top:top_1};}else{positions={width:newWidth,height:newHeight,left:x,top:y};}return positions;};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.createCustomStampAnnotation=function(imageSource,annotName){var _this=this;var pageIndex=this.pdfViewerBase.currentPageNumber-1;var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+pageIndex);var image=new Image();// eslint-disable-next-line
var proxy=this;image.onload=function(){var zoomFactor=_this.pdfViewerBase.getZoomFactor();// eslint-disable-next-line max-len
var customStampWidth=_this.pdfViewer.customStampSettings.width>0?_this.pdfViewer.customStampSettings.width:100;var customStampHeight=_this.pdfViewer.customStampSettings.height>0?_this.pdfViewer.customStampSettings.height:100;var customStampleft=0;var customStamptop=0;// eslint-disable-next-line max-len
if(_this.pdfViewer.customStampSettings.left>0&&_this.pdfViewer.customStampSettings.left<parseFloat(pageDiv.style.width)){customStampleft=_this.pdfViewer.customStampSettings.left;}else{customStampleft=(parseFloat(pageDiv.style.width)/2-customStampWidth/2)/zoomFactor;}// eslint-disable-next-line max-len
if(_this.pdfViewer.customStampSettings.top>0&&_this.pdfViewer.customStampSettings.top<parseFloat(pageDiv.style.height)){customStamptop=_this.pdfViewer.customStampSettings.top;}else{customStamptop=(parseFloat(pageDiv.style.height)/2-customStampHeight/2)/zoomFactor;}// eslint-disable-next-line max-len
var positions={width:customStampWidth,height:customStampHeight,left:customStampleft,top:customStamptop};// eslint-disable-next-line
var currentDate=new Date().toLocaleDateString();// eslint-disable-next-line
var modifiedDate=_this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var rotationAngle=0;proxy.renderCustomImage(positions,pageIndex,image,currentDate,modifiedDate,rotationAngle,1,null,null,null,annotName);};image.src=imageSource;};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.renderStamp=function(X,Y,width,height,pageIndex,opacity,rotation,canvass,existingAnnotation,isDynamic){if(sf.base.Browser.isDevice){this.pdfViewerBase.customStampCount+=1;}// eslint-disable-next-line max-len
var author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:'Guest';if(this.pdfViewerBase.isDynamicStamp){// eslint-disable-next-line
var today=new Date().toString().split(' ').splice(1,3).join(' ');// eslint-disable-next-line
var time=new Date().toLocaleTimeString();this.dynamicText='By '+author+' at '+time+' , '+today+' ';}if(isDynamic){this.dynamicText+=' ';this.pdfViewerBase.isDynamicStamp=true;}var annot;var annotationObject=null;// eslint:disable-next-line
var annotationAddMode=existingAnnotation?existingAnnotation.annotationAddMode:'UI Drawn Annotation';// eslint-disable-next-line
var annotation=this.currentStampAnnotation;if(annotation){if(width!==null&&height!==null){annotation.width=width;annotation.height=height;annotation.Opacity=opacity;annotation.RotateAngle=rotation;// eslint-disable-next-line
var annotationName=existingAnnotation['AnnotName'];annotation.AnnotName=annotationName;// eslint-disable-next-line
var state=existingAnnotation['State'];annotation.State=state;// eslint-disable-next-line
var annotationSettings=existingAnnotation["AnnotationSettings"];// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotationSettings?annotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);// eslint-disable-next-line
var annotationSelectorSettings=existingAnnotation['AnnotationSelectorSettings'];// eslint-disable-next-line max-len
annotation.AnnotationSelectorSettings=annotationSelectorSettings?annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;// eslint-disable-next-line
var modifiedDate=existingAnnotation['ModifiedDate'];annotation.ModifiedDate=modifiedDate;// eslint-disable-next-line
var stateModel=existingAnnotation['StateNodel'];annotation.StateModel=stateModel;// eslint-disable-next-line
var lock=existingAnnotation['IsCommentLock'];annotation.IsCommentLock=lock;// eslint-disable-next-line
var text=existingAnnotation['Note'];annotation.Note=text;// eslint-disable-next-line
var author_1=existingAnnotation['Author'];annotation.Author=author_1;// eslint-disable-next-line
var subject=existingAnnotation['Subject'];annotation.Subject=subject;// eslint-disable-next-line
var customData=this.pdfViewer.annotation.getCustomData(existingAnnotation);// eslint-disable-next-line
annotation.allowedInteractions=existingAnnotation['AllowedInteractions']?existingAnnotation['AllowedInteractions']:existingAnnotation['allowedInteractions']?existingAnnotation['allowedInteractions']:['None'];annotation.CustomData=customData;// eslint-disable-next-line
var isPrint=true;if(annotation.annotationAddMode==='Imported Annotation'){isPrint=existingAnnotation['IsPrint'];}else{isPrint=existingAnnotation.AnnotationSettings.isPrint;}annotation.isPrint=isPrint;if(annotation.Author===null){// eslint-disable-next-line max-len
annotation.Author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:'Guest';}// eslint-disable-next-line
var annotationComments=existingAnnotation['Comments'];annotation.Comments=this.pdfViewer.annotationModule.getAnnotationComments(annotationComments,existingAnnotation,author_1);}else{var annotationName=this.pdfViewer.annotation.createGUID();this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('stamp',pageIndex+1,'',annotationName,'',annotation.author);annotation.AnnotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings);annotation.AnnotName=annotationName;annotation.Comments=[];annotation.State='';annotation.StateModel='';annotation.Note='';annotation.Opacity=1;annotation.RotateAngle=0;annotation.ModifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
annotation.Author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:'Guest';}// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(annotation.pathdata);// eslint-disable-next-line
var csData=sf.drawings.splitArrayCollection(collectionData);// eslint:disable-next-line
var annotationAddMode_1=existingAnnotation?existingAnnotation.annotationAddMode:'UI Drawn Annotation';// eslint-disable-next-line max-len
annotation.AnnotationSelectorSettings=annotation.AnnotationSelectorSettings?annotation.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annot={// eslint-disable-next-line max-len
id:'stamp'+this.pdfViewerBase.customStampCount,bounds:{x:X,y:Y,width:annotation.width,height:annotation.height},pageIndex:pageIndex,data:annotation.pathdata,modifiedDate:annotation.ModifiedDate,// eslint-disable-next-line max-len
shapeAnnotationType:'Stamp',strokeColor:annotation.strokeColor,fillColor:annotation.fillColor,opacity:annotation.Opacity,stampFillColor:annotation.stampFillColor,stampStrokeColor:annotation.stampStrokeColor,rotateAngle:annotation.RotateAngle,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,annotName:annotation.AnnotName,notes:annotation.Note,comments:annotation.Comments,review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},subject:annotation.iconName,// eslint-disable-next-line
annotationSelectorSettings:annotation.AnnotationSelectorSettings,annotationSettings:annotation.AnnotationSettings,allowedInteractions:annotation.allowedInteractions,annotationAddMode:annotationAddMode_1,isPrint:annotation.isPrint,isCommentLock:annotation.IsCommentLock};annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:'path',author:annotation.Author,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,strokeColor:annotation.strokeColor,fillColor:annotation.fillColor,opacity:annotation.Opacity,stampFillcolor:annotation.stampFillColor,// eslint-disable-next-line max-len
rotateAngle:annotation.RotateAngle,creationDate:annotation.creationDate,pageNumber:pageIndex,icon:annotation.iconName,stampAnnotationPath:csData,randomId:'stamp'+this.pdfViewerBase.customStampCount,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,bounds:{left:X,top:Y,width:annotation.width,height:annotation.height},annotName:annotation.AnnotName,comments:annotation.Comments,review:{state:annotation.State,stateModel:annotation.StateModel,author:annotation.Author,modifiedDate:annotation.ModifiedDate},shapeAnnotationType:'stamp',// eslint-disable-next-line max-len
annotationSelectorSettings:this.getSettings(annotation),annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),allowedInteractions:annotation.allowedInteractions,isPrint:annotation.isPrint,isCommentLock:annotation.IsCommentLock,isMaskedImage:annotation.IsMaskedImage,customStampName:''};this.storeStampInSession(pageIndex,annotationObject);if(this.isAddAnnotationProgramatically){this.triggerAnnotationAdd(annot,annotation);}this.pdfViewer.add(annot);// eslint-disable-next-line
if(canvass!=undefined&&canvass!=null){canvass=canvass;}else{canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);}// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvass,pageIndex);if(this.pdfViewerBase.stampAdded){this.triggerAnnotationAdd(annot,annotation);this.pdfViewerBase.isNewStamp=true;this.pdfViewer.annotation.addAction(pageIndex,null,annot,'Addition','',annot,annot);}this.pdfViewerBase.stampAdded=false;if(!this.isExistingStamp){annotation.creationDate=new Date().toLocaleDateString();// eslint-disable-next-line max-len
annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();}}this.resetAnnotation();};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.getSettings=function(annotation){var selector=this.pdfViewer.annotationSelectorSettings;if(annotation.AnnotationSelectorSettings){selector=annotation.AnnotationSelectorSettings;}else if(this.pdfViewer.stampSettings.annotationSelectorSettings){selector=this.pdfViewer.stampSettings.annotationSelectorSettings;}return selector;};/**
     * @private
     */StampAnnotation.prototype.resetAnnotation=function(){this.pdfViewerBase.isDynamicStamp=false;this.dynamicText='';this.currentStampAnnotation=null;if(!sf.base.Browser.isDevice){this.pdfViewerBase.customStampCount+=1;}};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.updateDeleteItems=function(pageNumber,annotation,opacity){this.pdfViewerBase.updateDocumentEditedProperty(true);var annotationObject=null;var isStampSaved=false;annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
annotation.author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:'Guest';if(opacity){var annotationName=annotation.annotName?annotation.annotName:this.pdfViewer.annotation.createGUID();this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('stamp',pageNumber+1,'',annotationName,'',annotation.author);annotation.annotName=annotationName;annotation.Comments=[];annotation.State='';annotation.StateModel='';annotation.Note='';annotation.Opacity=1;annotation.RotateAngle=0;}if(annotation.shapeAnnotationType==='Stamp'){annotation.isPrint=this.pdfViewer.stampSettings.isPrint;}// eslint-disable-next-line
var annotationSelectorSettings=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;// eslint-disable-next-line
var allowedInteractions=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;if(annotation.shapeAnnotationType==='Image'){// eslint-disable-next-line max-len
annotation.Author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:'Guest';annotation.isPrint=this.pdfViewer.customStampSettings.isPrint;var undoCollection=this.pdfViewer.annotationModule.undoCommentsElement;if(!this.customStampName){for(var i=0;i<undoCollection.length;i++){if(annotation.annotName===undoCollection[i].annotName){this.customStampName=undoCollection[i].customStampName;}}}annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:'image',author:annotation.author,modifiedDate:annotation.modifiedDate,subject:'',note:'',strokeColor:'',fillColor:'',opacity:opacity,// eslint-disable-next-line max-len
rotateAngle:'0',creationDate:annotation.currentDate,pageNumber:pageNumber,icon:'',stampAnnotationPath:annotation.data,randomId:'stamp'+this.pdfViewerBase.customStampCount,// eslint-disable-next-line max-len
bounds:{left:annotation.bounds.x,top:annotation.bounds.y,width:annotation.bounds.width,height:annotation.bounds.height},stampFillcolor:'',isDynamicStamp:false,annotName:annotation.annotName,comments:[],review:{state:'',stateModel:'',author:annotation.author,modifiedDate:annotation.modifiedDate},shapeAnnotationType:'stamp',// eslint-disable-next-line max-len
annotationSelectorSettings:annotationSelectorSettings,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),customData:this.pdfViewer.annotationModule.getData('image'),isPrint:annotation.isPrint,allowedInteractions:allowedInteractions,isCommentLock:false,isMaskedImage:annotation.isMaskedImage,customStampName:this.customStampName};}else if(annotation.stampAnnotationType){annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:annotation.stampAnnotationType,author:annotation.author,modifiedDate:annotation.modifiedDate,subject:annotation.Subject,note:annotation.Note,strokeColor:annotation.strokeColor,fillColor:annotation.fillColor,opacity:annotation.opacity,stampFillcolor:annotation.stampFillcolor,// eslint-disable-next-line max-len
rotateAngle:annotation.rotateAngle,creationDate:annotation.creationDate,pageNumber:annotation.pageNumber,icon:annotation.icon,stampAnnotationPath:annotation.stampAnnotationPath,randomId:annotation.randomId,isDynamicStamp:annotation.isDynamicStamp,dynamicText:annotation.dynamicText,bounds:{left:annotation.bounds.left,top:annotation.bounds.top,width:annotation.bounds.width,height:annotation.bounds.height},annotName:annotation.annotName,comments:annotation.Comments,review:{state:annotation.State,stateModel:annotation.StateModel,author:annotation.author,modifiedDate:annotation.ModifiedDate},shapeAnnotationType:'stamp',// eslint-disable-next-line max-len
annotationSelectorSettings:annotationSelectorSettings,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),customData:this.pdfViewer.annotationModule.getData(annotation.stampAnnotationType),isPrint:annotation.isPrint,allowedInteractions:allowedInteractions,isCommentLock:annotation.isCommentLock,isMaskedImage:annotation.isMaskedImage,customStampName:''};}else{annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:annotation.shapeAnnotationType,author:annotation.author,modifiedDate:annotation.modifiedDate,subject:annotation.subject,note:annotation.notes,strokeColor:annotation.strokeColor,fillColor:annotation.fillColor,opacity:annotation.opacity,stampFillcolor:annotation.stampFillColor,// eslint-disable-next-line max-len
rotateAngle:annotation.rotateAngle,creationDate:annotation.creationDate,pageNumber:annotation.pageIndex,icon:annotation.subject,stampAnnotationPath:annotation.data,randomId:annotation.id,isDynamicStamp:annotation.isDynamicStamp,dynamicText:annotation.dynamicText,shapeAnnotationType:'stamp',bounds:{left:annotation.bounds.x,top:annotation.bounds.y,width:annotation.bounds.width,height:annotation.bounds.height},annotName:annotation.annotName,comments:annotation.Comments,review:{state:annotation.State,stateModel:annotation.StateModel,author:annotation.author,modifiedDate:annotation.ModifiedDate},// eslint-disable-next-line max-len
annotationSelectorSettings:annotationSelectorSettings,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),customData:this.pdfViewer.annotationModule.getData(annotation.shapeAnnotationType),isPrint:annotation.isPrint,allowedInteractions:allowedInteractions,isCommentLock:annotation.isCommentLock,isMaskedImage:annotation.isMaskedImage,customStampName:''};}if(opacity){if(annotation.shapeAnnotationType!=='Image'){// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(annotation.data);// eslint-disable-next-line
var csData=sf.drawings.splitArrayCollection(collectionData);annotationObject.stampAnnotationPath=csData;}annotation.creationDate=new Date().toLocaleDateString();if(!sf.base.Browser.isDevice){annotationObject.bounds.width=annotation.wrapper.actualSize.width;annotationObject.bounds.height=annotation.wrapper.actualSize.height;annotationObject.bounds.left=annotation.wrapper.bounds.x;annotationObject.bounds.top=annotation.wrapper.bounds.y;}annotationObject.opacity=opacity;if(this.pdfViewerBase.stampAdded){this.storeStampInSession(pageNumber,annotationObject);isStampSaved=true;// eslint-disable-next-line
var bounds={left:annotationObject.bounds.left,top:annotationObject.bounds.top,width:annotationObject.bounds.width,height:annotationObject.bounds.height};this.pdfViewerBase.updateDocumentEditedProperty(true);// eslint-disable-next-line max-len
// eslint-disable-next-line
var settings={opacity:annotationObject.opacity,author:annotationObject.author,modifiedDate:annotationObject.modifiedDate};if(annotation.shapeAnnotationType==='Image'){this.pdfViewerBase.stampAdded=false;this.pdfViewer.fireAnnotationAdd(annotationObject.pageNumber,annotationObject.annotName,'Image',bounds,settings,null,null,null,null,null,this.customStampName);this.customStampName=null;}else{this.pdfViewer.fireAnnotationAdd(annotationObject.pageNumber,annotationObject.annotName,'Stamp',bounds,settings);}// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageNumber,null,annotation,'Addition','',annotation,annotationObject);}}if(!isStampSaved){this.storeStampInSession(pageNumber,annotationObject);}};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.renderCustomImage=function(position,pageIndex,image,currentDate,modifiedDate,RotationAngle,opacity,canvas,isExistingStamp,annotation,annotName){var annot;var annotationObject=null;var annotationName;var author;var isCommentsLock;// eslint-disable-next-line
var isCustomStamp=this.pdfViewer.customStampSettings.left>0&&this.pdfViewer.customStampSettings.top>0?true:false;// eslint-disable-next-line
var annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings);// eslint-disable-next-line
var allowedInteractions=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;if(sf.base.Browser.isDevice){this.pdfViewerBase.customStampCount+=1;}if(isExistingStamp){annotationName=annotation.AnnotName;author=annotation.Author;isCommentsLock=annotation.IsCommentLock;// eslint-disable-next-line max-len
annotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings);// eslint-disable-next-line max-len
allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);if(author===null){// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:'Guest';}}else{annotationName=this.pdfViewer.annotation.createGUID();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:'Guest';isCommentsLock=false;}if(!modifiedDate){modifiedDate=annotation.ModifiedDate?annotation.ModifiedDate:new Date().toLocaleString();}var annotationAddMode=annotation?annotation.annotationAddMode:'UI Drawn Annotation ';var isPrint=true;if(!isExistingStamp){isPrint=this.pdfViewer.customStampSettings.isPrint;}else{if(annotation.annotationAddMode==='Imported Annotation'){isPrint=annotation.IsPrint;}else{isPrint=annotation.AnnotationSettings.isPrint;}}annot={// eslint-disable-next-line max-len
id:'stamp'+this.pdfViewerBase.customStampCount,allowedInteractions:allowedInteractions,bounds:{x:position.left,y:position.top,width:position.width,height:position.height},pageIndex:pageIndex,data:image.src,modifiedDate:modifiedDate,shapeAnnotationType:'Image',opacity:opacity,rotateAngle:RotationAngle,annotName:annotationName,comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:author},// eslint-disable-next-line max-len
annotationSettings:annotationSettings,annotationAddMode:annotationAddMode,signatureName:annotName,isPrint:isPrint,isCommentLock:isCommentsLock};this.currentStampAnnotation=annot;// eslint-disable-next-line
var annotationSelectorSettings=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;if(isExistingStamp||isCustomStamp){if(!annotation){this.isStampAnnotSelected=false;annotation=annot;// eslint-disable-next-line
annotation.Note='';// eslint-disable-next-line
annotation.State='';// eslint-disable-next-line
annotation.StateModel='';this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('stamp',pageIndex+1,'',annotationName,'',author);}annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:'image',author:author,allowedInteractions:allowedInteractions,modifiedDate:modifiedDate,subject:'',note:annotation.Note,strokeColor:'',fillColor:'',opacity:opacity,// eslint-disable-next-line max-len
rotateAngle:'0',creationDate:currentDate,pageNumber:pageIndex,icon:'',stampAnnotationPath:image.src,randomId:'stamp'+this.pdfViewerBase.customStampCount,// eslint-disable-next-line max-len
bounds:{left:position.left,top:position.top,width:position.width,height:position.height},stampFillcolor:'',isDynamicStamp:false,annotName:annotationName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,author:author,modifiedDate:modifiedDate},shapeAnnotationType:'stamp',// eslint-disable-next-line max-len
annotationSelectorSettings:annotationSelectorSettings,annotationSettings:annotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:isPrint,isCommentLock:isCommentsLock,isMaskedImage:annotation.IsMaskedImage,customStampName:annotation.CustomStampName};this.storeStampInSession(pageIndex,annotationObject);annot.comments=this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author);annot.review={state:annotation.State,stateModel:annotation.StateModel,author:author,modifiedDate:modifiedDate};if(this.isAddAnnotationProgramatically){// eslint-disable-next-line
var settings={opacity:annot.opacity,borderColor:annot.strokeColor,borderWidth:annot.thickness,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate,// eslint-disable-next-line
fillColor:annot.fillColor,fontSize:annot.fontSize,width:annot.bounds.width,height:annot.bounds.height,fontColor:annot.fontColor,fontFamily:annot.fontFamily,defaultText:annot.dynamicText,fontStyle:annot.font,textAlignment:annot.textAlign};this.customStampName=this.customStampName?this.customStampName:this.currentStampAnnotation.signatureName?this.currentStampAnnotation.signatureName:annotation.id;this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,'Image',annot.bounds,settings,null,null,null,null,null,this.customStampName);this.customStampName=null;}this.pdfViewer.add(annot);// eslint-disable-next-line
if(canvas!=undefined&&canvas!=null){canvas=canvas;}else{canvas=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);}// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvas,pageIndex);if(this.pdfViewerBase.stampAdded){// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageIndex,null,annot,'Addition','',annot,annot);}}if(!sf.base.Browser.isDevice){this.pdfViewerBase.customStampCount+=1;}};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.retrieveDynamicStampAnnotation=function(icontype){var stampCollection;if(icontype){switch(icontype.trim()){case'Revised':{stampCollection={iconName:'Revised',// eslint-disable-next-line max-len
pathdata:'M19.68,21.22a3.94,3.94,0,0,1-1.1-1.9L16,11.87l-.21-.64a20.77,20.77,0,0,0,2.11-.58,7.24,7.24,0,0,0,2-1.09,5.65,5.65,0,0,0,1.72-2.12,5.4,5.4,0,0,0,.52-2.2A4.15,4.15,0,0,0,19.1,1.05a14.58,14.58,0,0,0-4.72-.6H5.31v.86a7,7,0,0,1,2,.33c.3.14.45.48.45,1a6.1,6.1,0,0,1-.14,1.08l-.21.8L3.31,19.32a3.35,3.35,0,0,1-.94,1.78,3.58,3.58,0,0,1-1.74.57v.86h9.83v-.86a6.22,6.22,0,0,1-2-.35c-.29-.15-.43-.52-.43-1.11,0-.1,0-.21,0-.31a2.36,2.36,0,0,1,0-.28l.28-1.14,1.95-6.86h.93l3.56,10.91h6.25v-.88A3.05,3.05,0,0,1,19.68,21.22ZM13.29,10.31a14,14,0,0,1-2.63.23l2-7.56a2.67,2.67,0,0,1,.52-1.17,1.4,1.4,0,0,1,1-.3,2.74,2.74,0,0,1,2.33.91,3.72,3.72,0,0,1,.69,2.3,6.4,6.4,0,0,1-.49,2.52,6.72,6.72,0,0,1-1.06,1.82A4.11,4.11,0,0,1,13.29,10.31ZM26,.45H43.74l-1.4,6.27-.88-.15a6,6,0,0,0-.78-3.4c-.84-1.12-2.54-1.69-5.11-1.69a2.9,2.9,0,0,0-1.68.32A2.34,2.34,0,0,0,33.26,3l-1.95,7.33a13.55,13.55,0,0,0,4.48-.56c.68-.32,1.44-1.3,2.27-2.92l.91.11-2.44,9-.91-.16a7.27,7.27,0,0,0,.09-.82q0-.35,0-.57a2.69,2.69,0,0,0-1-2.4A7.57,7.57,0,0,0,31,11.38l-2.17,8c0,.2-.09.38-.12.57a2.62,2.62,0,0,0,0,.43.92.92,0,0,0,.35.74,2.54,2.54,0,0,0,1.49.29,13.84,13.84,0,0,0,5.11-.84A9.85,9.85,0,0,0,40.73,16l.81.14-1.95,6.42h-18v-.9a3.43,3.43,0,0,0,1.42-.53A3.42,3.42,0,0,0,24,19.32L28,4.51c.1-.37.18-.72.25-1a4.23,4.23,0,0,0,.09-.78c0-.56-.15-.91-.44-1.06a6.85,6.85,0,0,0-2-.34ZM63.4,3.37,51,23.15H49.9L47.39,6.34a17.25,17.25,0,0,0-.93-4.24c-.25-.43-.93-.7-2.05-.79V.45h9.86v.86a5.47,5.47,0,0,0-1.72.19,1.14,1.14,0,0,0-.81,1.16,3,3,0,0,0,0,.31l0,.32L53.5,16.43l6.24-9.85c.49-.79.94-1.57,1.33-2.36a4.45,4.45,0,0,0,.6-1.85.88.88,0,0,0-.61-.9,6.11,6.11,0,0,0-1.52-.16V.45h6.34v.86a3.88,3.88,0,0,0-1.16.5A5.73,5.73,0,0,0,63.4,3.37ZM70.08,20c0,.11,0,.22,0,.31,0,.56.15.91.45,1.06a6.39,6.39,0,0,0,1.95.35v.86H62.63v-.86a3.58,3.58,0,0,0,1.74-.57,3.35,3.35,0,0,0,.94-1.78l4-14.81q.18-.63.27-1a3.78,3.78,0,0,0,.09-.75c0-.56-.16-.91-.47-1.06a7,7,0,0,0-2-.34V.45h9.83v.86a3.61,3.61,0,0,0-1.75.58,3.37,3.37,0,0,0-.91,1.78L70.4,18.48l-.26,1.14Zm19.26-7.23a6.37,6.37,0,0,1,1.07,3.62,6.58,6.58,0,0,1-2.06,4.71,7.54,7.54,0,0,1-5.65,2.1A10.15,10.15,0,0,1,80.89,23a11.42,11.42,0,0,1-1.8-.49l-.83-.3-.58-.2a2,2,0,0,0-.38,0,1,1,0,0,0-.78.26,3.89,3.89,0,0,0-.52.92H75l1.19-7.4,1,.07a14.63,14.63,0,0,0,.28,2.3,5.27,5.27,0,0,0,2.79,3.44,4.73,4.73,0,0,0,2.06.44,3.85,3.85,0,0,0,3.07-1.26,4.39,4.39,0,0,0,1.09-2.94q0-2.09-4.05-5.25c-2.7-2.22-4-4.26-4-6.14a6.31,6.31,0,0,1,1.78-4.53,6.51,6.51,0,0,1,5-1.87,9.67,9.67,0,0,1,1.82.18A6.54,6.54,0,0,1,88,.45l.84.28.56.13a2.59,2.59,0,0,0,.52.06,1.4,1.4,0,0,0,.88-.24,2.2,2.2,0,0,0,.53-.6h1L91,6.69l-.85-.12L90,5.49a6,6,0,0,0-1-2.62,3.82,3.82,0,0,0-3.38-1.73A3,3,0,0,0,82.9,2.53a3.6,3.6,0,0,0-.58,2,3.44,3.44,0,0,0,.59,2,6,6,0,0,0,1,1l2.85,2.33A12.75,12.75,0,0,1,89.34,12.72ZM110.27,16l.81.14-2,6.42H90.85v-.86a3.66,3.66,0,0,0,1.74-.57,3.42,3.42,0,0,0,.93-1.78l4-14.81c.1-.37.18-.72.25-1a4.23,4.23,0,0,0,.09-.78c0-.56-.14-.91-.44-1.06a6.85,6.85,0,0,0-2-.34V.45h17.77l-1.4,6.27L111,6.57a6,6,0,0,0-.78-3.4c-.84-1.12-2.54-1.69-5.1-1.69a2.92,2.92,0,0,0-1.69.32A2.34,2.34,0,0,0,102.8,3l-2,7.33a13.55,13.55,0,0,0,4.48-.56c.69-.32,1.44-1.3,2.27-2.92l.92.11-2.45,9-.91-.16a7.27,7.27,0,0,0,.09-.82q0-.35,0-.57a2.69,2.69,0,0,0-1-2.4,7.57,7.57,0,0,0-3.79-.64l-2.17,8c0,.2-.09.38-.12.57a2.62,2.62,0,0,0,0,.43.92.92,0,0,0,.35.74,2.54,2.54,0,0,0,1.49.29,13.84,13.84,0,0,0,5.11-.84A9.81,9.81,0,0,0,110.27,16Zm22.65-13Q130.39.45,125.52.45h-9.58v.86a7,7,0,0,1,2,.34c.31.15.47.5.47,1.06a3.61,3.61,0,0,1-.09.74c-.06.29-.15.64-.26,1.06L114,19.31a3.18,3.18,0,0,1-1.15,1.91,3.57,3.57,0,0,1-1.53.45v.86h9.47a14.87,14.87,0,0,0,10.95-4.14,12,12,0,0,0,3.75-8.77A8.94,8.94,0,0,0,132.92,2.94ZM129,15.36q-2.62,6.06-8.52,6.05a2.46,2.46,0,0,1-1.42-.29,1.05,1.05,0,0,1-.4-.93,2.24,2.24,0,0,1,0-.34,2.65,2.65,0,0,1,.08-.43l4.55-16.67a2,2,0,0,1,.54-.92,2.2,2.2,0,0,1,1.44-.35,4.74,4.74,0,0,1,4.47,2.22,7.9,7.9,0,0,1,.83,3.9A19.32,19.32,0,0,1,129,15.36Z',opacity:1,strokeColor:'',fillColor:'#192760',width:127.47,height:55.84601,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'Reviewed':{stampCollection={iconName:'Reviewed',// eslint-disable-next-line max-len
pathdata:'M17.37,18.25a3.47,3.47,0,0,1-1-1.67L14.17,10c0-.07-.1-.26-.19-.56A14.71,14.71,0,0,0,15.83,9a6.08,6.08,0,0,0,1.76-1A4.92,4.92,0,0,0,19.1,6.14a4.71,4.71,0,0,0,.46-1.93A3.65,3.65,0,0,0,16.86.52,12.83,12.83,0,0,0,12.72,0h-8V.75a6.62,6.62,0,0,1,1.72.3c.26.12.39.41.39.88a4.56,4.56,0,0,1-.13.94c0,.2-.1.44-.17.7L3,16.58a2.87,2.87,0,0,1-.82,1.56,3.15,3.15,0,0,1-1.53.51v.75H9.27v-.75a5.88,5.88,0,0,1-1.74-.31c-.25-.13-.37-.46-.37-1a2.53,2.53,0,0,1,0-.28,1.44,1.44,0,0,1,0-.24l.24-1,1.71-6H10l3.13,9.59h5.49v-.77A2.71,2.71,0,0,1,17.37,18.25ZM11.75,8.67a12.06,12.06,0,0,1-2.3.19L11.2,2.22a2.2,2.2,0,0,1,.46-1,1.19,1.19,0,0,1,.87-.27,2.41,2.41,0,0,1,2.05.8,3.29,3.29,0,0,1,.6,2A5.63,5.63,0,0,1,14.75,6a6.06,6.06,0,0,1-.93,1.59A3.65,3.65,0,0,1,11.75,8.67ZM22.9,0H38.52L37.29,5.51l-.78-.13a5.34,5.34,0,0,0-.68-3c-.74-1-2.24-1.48-4.49-1.48a2.68,2.68,0,0,0-1.49.27,2.09,2.09,0,0,0-.54,1L27.59,8.67a12.08,12.08,0,0,0,3.94-.5,5.69,5.69,0,0,0,2-2.56l.81.1-2.16,7.93-.79-.15c0-.27.06-.51.08-.71s0-.37,0-.5a2.34,2.34,0,0,0-.85-2.11A6.61,6.61,0,0,0,27.3,9.6l-1.91,7.08a4.91,4.91,0,0,0-.1.5,2,2,0,0,0,0,.38.83.83,0,0,0,.31.65,2.29,2.29,0,0,0,1.31.25,12.21,12.21,0,0,0,4.49-.73,8.69,8.69,0,0,0,4.51-4.09l.71.12L34.86,19.4H19.05v-.79a2.88,2.88,0,0,0,1.28-.47,2.94,2.94,0,0,0,.82-1.56l3.56-13q.13-.49.21-.9A3.26,3.26,0,0,0,25,2q0-.73-.39-.93A6.44,6.44,0,0,0,22.9.75ZM55.79,2.57,44.86,20h-.93L41.72,5.17a16.05,16.05,0,0,0-.81-3.73c-.22-.37-.82-.6-1.81-.69V0h8.67V.75a5,5,0,0,0-1.52.17,1,1,0,0,0-.7,1,2.53,2.53,0,0,0,0,.28l0,.27L47.09,14l5.48-8.66C53,4.69,53.4,4,53.75,3.32a4,4,0,0,0,.52-1.63.78.78,0,0,0-.54-.8A5.88,5.88,0,0,0,52.4.75V0H58V.75a3.55,3.55,0,0,0-1,.44A5.18,5.18,0,0,0,55.79,2.57ZM62,18.34a6,6,0,0,0,1.71.31v.75H55.12v-.75a3.15,3.15,0,0,0,1.53-.51,2.94,2.94,0,0,0,.82-1.56L61,3.57c.1-.37.18-.68.23-.93A2.81,2.81,0,0,0,61.34,2c0-.49-.13-.8-.41-.93a6.61,6.61,0,0,0-1.71-.3V0h8.63V.75a3.17,3.17,0,0,0-1.53.51,3,3,0,0,0-.8,1.57l-3.58,13-.22,1a2.74,2.74,0,0,0,0,.28,1.41,1.41,0,0,0,0,.28C61.64,17.9,61.78,18.21,62,18.34ZM69.13,0H84.75L83.52,5.51l-.78-.13a5.34,5.34,0,0,0-.68-3c-.74-1-2.24-1.48-4.49-1.48a2.68,2.68,0,0,0-1.49.27,2.09,2.09,0,0,0-.54,1L73.82,8.67a12.08,12.08,0,0,0,3.94-.5,5.69,5.69,0,0,0,2-2.56l.81.1L78.4,13.64l-.79-.15c0-.27.07-.51.08-.71s0-.37,0-.5a2.34,2.34,0,0,0-.85-2.11,6.61,6.61,0,0,0-3.33-.57l-1.91,7.08a4.91,4.91,0,0,0-.1.5,2,2,0,0,0,0,.38.83.83,0,0,0,.31.65,2.29,2.29,0,0,0,1.31.25,12.21,12.21,0,0,0,4.49-.73,8.69,8.69,0,0,0,4.51-4.09l.71.12L81.1,19.4H65v-.75a3.15,3.15,0,0,0,1.53-.51,2.94,2.94,0,0,0,.82-1.56l3.56-13q.14-.49.21-.9A3.26,3.26,0,0,0,71.24,2q0-.73-.39-.93a6.44,6.44,0,0,0-1.72-.3Zm39.15,2.83L100,20h-.84L97.41,5.85,90.67,20h-.84L87.58,3.13A3.83,3.83,0,0,0,87,1.23,2.84,2.84,0,0,0,85.33.71V0h8.06V.75A2.55,2.55,0,0,0,92.27,1a1.33,1.33,0,0,0-.66,1.31c0,.06,0,.13,0,.19s0,.15,0,.26l1.15,10.16,4.32-9a1,1,0,0,0,0-.27,3.33,3.33,0,0,0-.64-2.38A2.5,2.5,0,0,0,95.06.71V0h7.78V.71a2.9,2.9,0,0,0-1.4.34c-.27.19-.41.6-.41,1.24,0,.13,0,.32,0,.55,0,.4.08.88.14,1.47l1,8.47,4.51-9.42a7.12,7.12,0,0,0,.29-.74,2.48,2.48,0,0,0,.14-.79.9.9,0,0,0-.48-.93,3.25,3.25,0,0,0-1.34-.19V0h5.41V.71a2.34,2.34,0,0,0-1.1.35A4.56,4.56,0,0,0,108.28,2.83Zm16.45,10.81.71.12-1.71,5.64H107.66v-.75a3.15,3.15,0,0,0,1.53-.51,2.87,2.87,0,0,0,.82-1.56l3.57-13q.12-.49.21-.9a3.17,3.17,0,0,0,.08-.69q0-.73-.39-.93a6.44,6.44,0,0,0-1.72-.3V0h15.62l-1.23,5.51-.78-.13a5.26,5.26,0,0,0-.68-3C124,1.4,122.46.91,120.2.91a2.64,2.64,0,0,0-1.48.27,2.09,2.09,0,0,0-.55,1l-1.72,6.45a12,12,0,0,0,3.94-.5,5.62,5.62,0,0,0,2-2.56l.81.1L121,13.64l-.79-.15c0-.27.06-.51.07-.71s0-.37,0-.5a2.34,2.34,0,0,0-.86-2.11,6.57,6.57,0,0,0-3.32-.57l-1.91,7.08a5,5,0,0,0-.11.5,3.14,3.14,0,0,0,0,.38.8.8,0,0,0,.31.65,2.25,2.25,0,0,0,1.3.25,12.26,12.26,0,0,0,4.5-.73A8.67,8.67,0,0,0,124.73,13.64ZM144.64,2.19Q142.41,0,138.14,0h-8.42V.75a6.61,6.61,0,0,1,1.71.3c.28.13.41.44.41.93a2.81,2.81,0,0,1-.08.66c0,.25-.12.56-.23.93l-3.56,13a2.78,2.78,0,0,1-1,1.68,3.44,3.44,0,0,1-1.35.4v.75h8.32a13.06,13.06,0,0,0,9.63-3.64,10.49,10.49,0,0,0,3.3-7.7A7.87,7.87,0,0,0,144.64,2.19ZM141.2,13.1q-2.31,5.32-7.48,5.32a2.27,2.27,0,0,1-1.26-.25,1,1,0,0,1-.34-.82,1.62,1.62,0,0,1,0-.3,2.16,2.16,0,0,1,.08-.38l4-14.65a1.63,1.63,0,0,1,.47-.81A2,2,0,0,1,138,.91a4.16,4.16,0,0,1,3.93,1.95,7,7,0,0,1,.72,3.42A16.82,16.82,0,0,1,141.2,13.1Z',opacity:1,strokeColor:'',fillColor:'#192760',width:127.70402,height:55.84601,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'Received':{stampCollection={iconName:'Received',// eslint-disable-next-line max-len
pathdata:'M18.17,8.76a5,5,0,0,0,1.57-1.93,5,5,0,0,0,.47-2A3.76,3.76,0,0,0,17.42,1,13,13,0,0,0,13.13.48H4.89v.78a6.49,6.49,0,0,1,1.77.31c.27.12.41.43.41.91a5.87,5.87,0,0,1-.13,1c-.05.2-.12.44-.19.72L3.06,17.64a3,3,0,0,1-.84,1.61,3.36,3.36,0,0,1-1.59.53v.77H9.57v-.77a6.17,6.17,0,0,1-1.8-.32c-.26-.14-.39-.48-.39-1a2.46,2.46,0,0,1,0-.28,1.78,1.78,0,0,1,0-.26l.25-1,1.78-6.25h.84l3.24,9.92h5.66v-.8A2.76,2.76,0,0,1,18,19.36a3.57,3.57,0,0,1-1-1.72l-2.31-6.78c0-.07-.09-.27-.19-.58.87-.2,1.51-.38,1.92-.52A6.56,6.56,0,0,0,18.17,8.76Zm-2.93-2.1a6.19,6.19,0,0,1-1,1.65,3.85,3.85,0,0,1-2.14,1.14,12.92,12.92,0,0,1-2.39.2l1.81-6.87A2.5,2.5,0,0,1,12,1.72a1.27,1.27,0,0,1,.9-.27,2.5,2.5,0,0,1,2.12.83,3.35,3.35,0,0,1,.62,2.09A5.81,5.81,0,0,1,15.24,6.66ZM30.3,2.78,28.52,9.45a12.53,12.53,0,0,0,4.08-.51,5.91,5.91,0,0,0,2-2.66l.84.11-2.23,8.2-.82-.15c0-.28.07-.53.08-.74a5.17,5.17,0,0,0,0-.52A2.43,2.43,0,0,0,31.66,11a6.87,6.87,0,0,0-3.44-.58l-2,7.32a3.61,3.61,0,0,0-.11.51,2.31,2.31,0,0,0,0,.4.83.83,0,0,0,.32.67,2.32,2.32,0,0,0,1.35.26,12.58,12.58,0,0,0,4.65-.76,9,9,0,0,0,4.67-4.23l.73.13-1.77,5.83H19.8v-.83A2.83,2.83,0,0,0,21,19.25a3.09,3.09,0,0,0,.85-1.61L25.54,4.17c.09-.34.16-.65.22-.93a3.35,3.35,0,0,0,.09-.71c0-.5-.13-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48H39.82l-1.27,5.7-.81-.13A5.44,5.44,0,0,0,37,3Q35.9,1.42,32.4,1.42a2.69,2.69,0,0,0-1.54.29A2.08,2.08,0,0,0,30.3,2.78ZM56.56,6.1c0-.07,0-.18,0-.33a4.89,4.89,0,0,0-1.12-3.53,3.75,3.75,0,0,0-2.82-1.16c-2.33,0-4.35,1.55-6.07,4.63a17.09,17.09,0,0,0-2.31,8.43c0,2.08.47,3.5,1.43,4.27a4.89,4.89,0,0,0,3.11,1.15,6.84,6.84,0,0,0,4.14-1.45A11.51,11.51,0,0,0,55,16l.91.66A10.08,10.08,0,0,1,52.26,20a9.33,9.33,0,0,1-4.34,1.11A8.56,8.56,0,0,1,42,19a7.25,7.25,0,0,1-2.35-5.67A13.53,13.53,0,0,1,43.22,4a11.19,11.19,0,0,1,8.56-4A12.34,12.34,0,0,1,55,.44,13.17,13.17,0,0,0,56.9.88a1,1,0,0,0,.71-.24A2.94,2.94,0,0,0,58.06,0H59L57.45,7l-.94-.18C56.54,6.42,56.55,6.17,56.56,6.1Zm18,8.49.74.13-1.78,5.83H56.87v-.77a3.31,3.31,0,0,0,1.58-.53,3.09,3.09,0,0,0,.85-1.61L63,4.17c.09-.34.16-.65.22-.93a3.35,3.35,0,0,0,.09-.71c0-.5-.14-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48H77.26L76,6.18l-.81-.13A5.44,5.44,0,0,0,74.48,3q-1.14-1.54-4.64-1.54a2.69,2.69,0,0,0-1.54.29,2.08,2.08,0,0,0-.56,1.07L66,9.45A12.53,12.53,0,0,0,70,8.94a5.91,5.91,0,0,0,2-2.66l.84.11-2.23,8.2-.82-.15c0-.28.07-.53.08-.74a5.17,5.17,0,0,0,0-.52A2.43,2.43,0,0,0,69.1,11a6.87,6.87,0,0,0-3.44-.58l-2,7.32a3.61,3.61,0,0,0-.11.51,2.31,2.31,0,0,0,0,.4.83.83,0,0,0,.32.67,2.32,2.32,0,0,0,1.35.26,12.58,12.58,0,0,0,4.65-.76A8.91,8.91,0,0,0,74.52,14.59Zm31-11.45-11.31,18h-1L91,5.83A16.56,16.56,0,0,0,90.12,2c-.2-.34-.71-.56-1.51-.67a3,3,0,0,0-1.31.48,3.08,3.08,0,0,0-.82,1.62l-3.7,13.47-.24,1c0,.1,0,.2-.05.3s0,.2,0,.28c0,.51.14.83.41,1a6.21,6.21,0,0,0,1.77.32v.77H75.72v-.77a3.31,3.31,0,0,0,1.58-.53,3.09,3.09,0,0,0,.85-1.61L81.83,4.17c.11-.38.19-.7.25-.95a3.75,3.75,0,0,0,.08-.69c0-.5-.15-.82-.43-1A6.49,6.49,0,0,0,80,1.26V.48H97.22v.78a4.92,4.92,0,0,0-1.57.18,1,1,0,0,0-.73,1.05,2.81,2.81,0,0,0,0,.29l0,.28,1.56,12,5.67-9a24.21,24.21,0,0,0,1.21-2.14,4.07,4.07,0,0,0,.54-1.68.79.79,0,0,0-.55-.82A5.69,5.69,0,0,0,102,1.26V.48h5.76v.78a3.5,3.5,0,0,0-1,.46A5.16,5.16,0,0,0,105.52,3.14Zm16.83,11.45.73.13-1.77,5.83H104.69v-.77a3.31,3.31,0,0,0,1.58-.53,3,3,0,0,0,.85-1.61l3.69-13.47c.08-.34.16-.65.22-.93a4,4,0,0,0,.08-.71c0-.5-.13-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48h16.16l-1.28,5.7-.8-.13A5.43,5.43,0,0,0,122.3,3q-1.14-1.54-4.64-1.54a2.67,2.67,0,0,0-1.53.29,2.16,2.16,0,0,0-.57,1.07l-1.78,6.67a12.53,12.53,0,0,0,4.08-.51,5.91,5.91,0,0,0,2.06-2.66l.83.11-2.22,8.2-.82-.15c0-.28.06-.53.08-.74s0-.38,0-.52a2.45,2.45,0,0,0-.88-2.18,6.9,6.9,0,0,0-3.44-.58l-2,7.32c-.05.18-.08.35-.11.51a3.58,3.58,0,0,0,0,.4.81.81,0,0,0,.32.67,2.28,2.28,0,0,0,1.35.26,12.62,12.62,0,0,0,4.65-.76A9,9,0,0,0,122.35,14.59ZM142.94,2.75Q140.63.48,136.21.48h-8.7v.78a6.66,6.66,0,0,1,1.77.31q.42.21.42,1a2.91,2.91,0,0,1-.08.68q-.08.39-.24,1L125.7,17.62a2.93,2.93,0,0,1-1,1.75,3.54,3.54,0,0,1-1.39.41v.77h8.61a13.5,13.5,0,0,0,10-3.76,10.84,10.84,0,0,0,3.41-8A8.14,8.14,0,0,0,142.94,2.75ZM139.38,14q-2.38,5.51-7.74,5.5a2.35,2.35,0,0,1-1.29-.26,1,1,0,0,1-.36-.85,1.78,1.78,0,0,1,0-.31,2.08,2.08,0,0,1,.08-.39l4.13-15.15a1.76,1.76,0,0,1,.49-.84A2,2,0,0,1,136,1.42a4.32,4.32,0,0,1,4.07,2A7.17,7.17,0,0,1,140.83,7,17.49,17.49,0,0,1,139.38,14Z',opacity:1,strokeColor:'',fillColor:'#192760',width:127.70402,height:55.84601,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'Approved':{stampCollection={iconName:'Approved',// eslint-disable-next-line max-len
pathdata:'M19,20.22H10.55v-.71a4.26,4.26,0,0,0,1.79-.41,1.37,1.37,0,0,0,.53-1.29c0-.22,0-.75-.16-1.58,0-.17-.11-.89-.29-2.15H6.06l-1.72,3a4,4,0,0,0-.31.66,2,2,0,0,0-.14.69c0,.41.12.67.37.78a5.42,5.42,0,0,0,1.53.3v.71H0v-.71A4,4,0,0,0,1.21,19a5.68,5.68,0,0,0,1.28-1.56L13.45.07h.76L17,17a4.35,4.35,0,0,0,.7,2.08,2.4,2.4,0,0,0,1.31.44Zm-6.83-7.31L11.13,5.73,6.76,12.91Zm7.18,6.52a3,3,0,0,0,1.33-.49,3,3,0,0,0,.84-1.59L25.19,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22,9.53,9.53,0,0,1-5.69,1.58l-.85,0-1.71-.11L26,16.6l-.25,1a1,1,0,0,0-.05.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76H19.39Zm8.52-9.66.54.06h.48a5.81,5.81,0,0,0,2.3-.36,3.47,3.47,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,8.94,8.94,0,0,0,.3-2,3.29,3.29,0,0,0-.58-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.71,2.71,0,0,0-.46,1Zm8,9.69a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59L42,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22A9.53,9.53,0,0,1,47,10.87l-.85,0-1.71-.11L42.79,16.6l-.25,1a1.45,1.45,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76h-8.7Zm8.74-9.69.54.06h.48A5.81,5.81,0,0,0,48,9.48a3.41,3.41,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,9,9,0,0,0,.31-2,3.29,3.29,0,0,0-.59-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.88,2.88,0,0,0-.46,1Zm7.95,9.69a3.27,3.27,0,0,0,1.56-.52A3.06,3.06,0,0,0,55,17.35L58.64,4.11l.18-.71a4.72,4.72,0,0,0,.13-1c0-.47-.13-.77-.4-.9a6.74,6.74,0,0,0-1.74-.3V.48h8.11A13,13,0,0,1,69.14,1a3.7,3.7,0,0,1,2.74,3.75,4.8,4.8,0,0,1-.46,2,5,5,0,0,1-1.54,1.9,6.55,6.55,0,0,1-1.79,1,19.35,19.35,0,0,1-1.89.52c.1.3.16.49.2.57l2.27,6.66a3.49,3.49,0,0,0,1,1.7,3.08,3.08,0,0,0,1.6.41v.76H65.33l-3.19-9.76h-.83L59.57,16.6l-.25,1a1.87,1.87,0,0,0,0,.25,2.64,2.64,0,0,0,0,.28q0,.8.39,1a5.88,5.88,0,0,0,1.76.32v.76H52.62ZM63.94,9.3a3.79,3.79,0,0,0,2.11-1.13A6,6,0,0,0,67,6.55a5.84,5.84,0,0,0,.44-2.26,3.31,3.31,0,0,0-.61-2,2.47,2.47,0,0,0-2.09-.81,1.25,1.25,0,0,0-.88.26,2.34,2.34,0,0,0-.47,1.05L61.59,9.5A13.42,13.42,0,0,0,63.94,9.3ZM76.39,4.53Q80.26,0,85,0a7.34,7.34,0,0,1,5.23,1.92,6.76,6.76,0,0,1,2,5.19,13.9,13.9,0,0,1-3.62,9.07q-3.86,4.61-8.88,4.6a7.06,7.06,0,0,1-5.13-1.92,6.86,6.86,0,0,1-2-5.14A14,14,0,0,1,76.39,4.53ZM77.3,18a2.56,2.56,0,0,0,2.57,1.78A4.62,4.62,0,0,0,83,18.47,14.42,14.42,0,0,0,86,13.54a27.18,27.18,0,0,0,1.52-4.83,20.67,20.67,0,0,0,.54-4.11,4.38,4.38,0,0,0-.73-2.55A2.62,2.62,0,0,0,85,1q-3.68,0-6.19,6.54a24.29,24.29,0,0,0-1.9,8.26A5.91,5.91,0,0,0,77.3,18ZM102.23.48v.76a5.19,5.19,0,0,0-1.55.17,1,1,0,0,0-.72,1,2.46,2.46,0,0,0,0,.28L100,3l1.52,11.76L107.11,6c.44-.71.84-1.41,1.2-2.11a4.06,4.06,0,0,0,.53-1.66.79.79,0,0,0-.55-.81,6.11,6.11,0,0,0-1.35-.14V.48h5.67v.76a3.31,3.31,0,0,0-1,.45,5.33,5.33,0,0,0-1.18,1.4L99.26,20.78h-.94l-2.25-15A15.49,15.49,0,0,0,95.24,2c-.22-.39-.84-.62-1.83-.71V.48Zm7.35,19a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59l3.62-13.24c.09-.34.16-.64.22-.92a3.27,3.27,0,0,0,.09-.7c0-.5-.14-.81-.4-.94a6.13,6.13,0,0,0-1.75-.31V.48h15.89l-1.25,5.6L127.6,6a5.32,5.32,0,0,0-.7-3q-1.12-1.52-4.56-1.51a2.61,2.61,0,0,0-1.51.28,2.12,2.12,0,0,0-.56,1.06L118.52,9.3a12.1,12.1,0,0,0,4-.51,5.8,5.8,0,0,0,2-2.61l.82.1-2.19,8.07-.81-.14c0-.28.07-.52.08-.73s0-.37,0-.51a2.4,2.4,0,0,0-.87-2.15,6.76,6.76,0,0,0-3.38-.57l-1.94,7.2a3.34,3.34,0,0,0-.11.51,3.67,3.67,0,0,0,0,.39.81.81,0,0,0,.32.66,2.3,2.3,0,0,0,1.33.26,12.39,12.39,0,0,0,4.57-.75A8.84,8.84,0,0,0,127,14.35l.72.13-1.74,5.74H109.58Zm18.27,0a3.27,3.27,0,0,0,1.37-.41,2.85,2.85,0,0,0,1-1.71l3.63-13.23c.1-.38.18-.69.23-1a3,3,0,0,0,.09-.67c0-.5-.15-.81-.42-.94A6.38,6.38,0,0,0,132,1.24V.48h8.57c2.9,0,5.1.74,6.62,2.22a8,8,0,0,1,2.26,6,10.72,10.72,0,0,1-3.35,7.84,13.3,13.3,0,0,1-9.8,3.7h-8.47ZM144.4,3.39a4.23,4.23,0,0,0-4-2,2,2,0,0,0-1.29.31,1.74,1.74,0,0,0-.48.83l-4.07,14.9a3.24,3.24,0,0,0-.07.39,1.69,1.69,0,0,0,0,.3,1,1,0,0,0,.36.84,2.27,2.27,0,0,0,1.27.26q5.26,0,7.62-5.42a17.25,17.25,0,0,0,1.43-6.94A7,7,0,0,0,144.4,3.39Z',opacity:1,strokeColor:'',fillColor:'#516c30',width:127.70402,height:55.84601,stampFillColor:'#e6eddf',stampStrokeColor:''};}break;case'Confidential':{stampCollection={iconName:'Confidential',// eslint-disable-next-line max-len
pathdata:'M13.71,0,12.63,6.9,12,6.73c0-.41,0-.66,0-.73s0-.18,0-.32a6.16,6.16,0,0,0-.79-3.47,2.37,2.37,0,0,0-2-1.14c-1.64,0-3.07,1.51-4.29,4.55a22,22,0,0,0-1.64,8.29c0,2,.34,3.44,1,4.2A3,3,0,0,0,6.5,19.24a4.08,4.08,0,0,0,2.93-1.43,10.47,10.47,0,0,0,1.5-2.09l.64.65A8.84,8.84,0,0,1,9,19.72a5.24,5.24,0,0,1-3.08,1.09,5.16,5.16,0,0,1-4.21-2.08A8.68,8.68,0,0,1,0,13.16,16.5,16.5,0,0,1,2.55,3.92Q5.1,0,8.61,0a6.35,6.35,0,0,1,2.25.43,6.62,6.62,0,0,0,1.38.43.55.55,0,0,0,.5-.23A2.61,2.61,0,0,0,13.06,0ZM27.49,7.11a17.19,17.19,0,0,1-2.61,9.07q-2.77,4.61-6.39,4.6a4.42,4.42,0,0,1-3.7-1.92,8.47,8.47,0,0,1-1.43-5.14A17.31,17.31,0,0,1,16,4.53C17.88,1.51,20,0,22.25,0A4.53,4.53,0,0,1,26,1.92,8.27,8.27,0,0,1,27.49,7.11ZM24.42,4.6a5.71,5.71,0,0,0-.53-2.55A1.76,1.76,0,0,0,22.24,1q-2.65,0-4.45,6.54a31.93,31.93,0,0,0-1.37,8.26A8.15,8.15,0,0,0,16.67,18c.34,1.19,1,1.78,1.85,1.78a2.9,2.9,0,0,0,2.28-1.29,15.85,15.85,0,0,0,2.13-4.93A34.08,34.08,0,0,0,24,8.71,28.5,28.5,0,0,0,24.42,4.6ZM42.75,1.3l.3-.06V.48H38.69v.76a2.55,2.55,0,0,1,1.16.33,1.8,1.8,0,0,1,.51,1.48,10.11,10.11,0,0,1-.13,1.34c-.06.41-.14.87-.24,1.39l-1.65,8.34L33.73.48H29.45v.76a2.66,2.66,0,0,1,1,.24,1.88,1.88,0,0,1,.65,1.06l.09.3L28.81,15a20.72,20.72,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.55,2.55,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,.05-.79c.06-.43.17-1.09.34-2L31.89,4.38l5.52,16.33h.52l3-15a22.58,22.58,0,0,1,.87-3.42A1.42,1.42,0,0,1,42.75,1.3ZM55.53.48H44.23v.76a3.63,3.63,0,0,1,1.26.3c.19.13.29.42.29.9a7.08,7.08,0,0,1-.09,1c0,.2-.08.44-.13.71L43,17.34a3.47,3.47,0,0,1-.59,1.58,1.91,1.91,0,0,1-1.13.54v.76h6.29v-.76a2.13,2.13,0,0,1-1-.19A1.23,1.23,0,0,1,46,18.1c0-.1,0-.21,0-.31s0-.23.05-.35l1.4-7.21a3.15,3.15,0,0,1,2.37.64A3.21,3.21,0,0,1,50.38,13c0,.11,0,.28,0,.49s0,.46-.06.75l.58.14,1.58-8.07-.59-.1a5.79,5.79,0,0,1-1.43,2.59,6.17,6.17,0,0,1-2.77.52l1.26-6.54a2.06,2.06,0,0,1,.42-1.08,1.39,1.39,0,0,1,1-.26c1.62,0,2.7.51,3.24,1.54a7.11,7.11,0,0,1,.49,3l.57.13Zm3.69,17.71c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1L62.06,3.36a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H57.44v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1L56.16,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.3,3.3,0,0,1-1.26-.32C59.32,19,59.22,18.69,59.22,18.19Zm18-9.51a13,13,0,0,1-2.42,7.84,8.31,8.31,0,0,1-7,3.7H61.6v-.76a2,2,0,0,0,1-.41,3.14,3.14,0,0,0,.73-1.71L65.93,4.11c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.17A5.52,5.52,0,0,1,75.53,2.7,9.91,9.91,0,0,1,77.17,8.68ZM74,6.87a9.22,9.22,0,0,0-.53-3.48,2.91,2.91,0,0,0-2.87-2,1.12,1.12,0,0,0-.93.31,1.81,1.81,0,0,0-.35.83l-2.93,14.9a3,3,0,0,0-.05.39c0,.11,0,.21,0,.3a1.17,1.17,0,0,0,.25.84,1.3,1.3,0,0,0,.92.26q3.8,0,5.49-5.42A23.26,23.26,0,0,0,74,6.87Zm11.3,11.65a6.72,6.72,0,0,1-3.29.75,1.3,1.3,0,0,1-1-.26,1,1,0,0,1-.23-.66,3.28,3.28,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.4-7.2a3.73,3.73,0,0,1,2.43.57A2.87,2.87,0,0,1,85.43,13c0,.14,0,.31,0,.51s0,.45-.06.73l.59.14,1.57-8.07-.59-.1a5.79,5.79,0,0,1-1.46,2.61,6.5,6.5,0,0,1-2.89.51l1.26-6.56a2.41,2.41,0,0,1,.41-1.06c.16-.19.52-.28,1.08-.28,1.65,0,2.75.5,3.29,1.51a7,7,0,0,1,.5,3l.57.13.9-5.6H79.14v.76a3.35,3.35,0,0,1,1.26.31c.19.13.29.44.29.94a5,5,0,0,1-.07.7c0,.28-.09.58-.15.92L77.86,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.13.52v.76H87.91l1.25-5.74-.52-.13A7.69,7.69,0,0,1,85.34,18.52ZM105.8,1.24V.48h-4.37v.76a2.55,2.55,0,0,1,1.16.33,1.77,1.77,0,0,1,.52,1.48A10.58,10.58,0,0,1,103,4.39c-.06.41-.13.87-.23,1.39l-1.66,8.34L96.47.48H92.19v.76a2.61,2.61,0,0,1,1,.24,1.83,1.83,0,0,1,.65,1.06l.1.3L91.55,15a19,19,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.59,2.59,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,0-.79c.06-.43.17-1.09.35-2L94.63,4.38l5.52,16.33h.53l2.95-15a22.93,22.93,0,0,1,.86-3.42,1.42,1.42,0,0,1,1-1Zm11.4,4.9L118,.48H106.28l-.82,5,.55.2a8,8,0,0,1,1.87-3.16,3.7,3.7,0,0,1,2.7-1.06l-3.12,15.85a2.94,2.94,0,0,1-.87,1.85,2.48,2.48,0,0,1-1.34.26v.76h7v-.76a4.24,4.24,0,0,1-1.43-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.18-1,3-15.1a2.73,2.73,0,0,1,1.79.63c.75.7,1.13,2,1.17,3.94Zm3.57,12.05c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1,2.62-13.24a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H119v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1l-2.61,13.24a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.36,3.36,0,0,1-1.26-.32C120.87,19,120.77,18.69,120.77,18.19Zm28.86-3.71-1.24,5.74H130.3v-.71a2.48,2.48,0,0,0,1.3-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.21-2.15h-4.58l-1.24,3a5.1,5.1,0,0,0-.22.66,2.45,2.45,0,0,0-.1.69c0,.41.09.67.26.78a3.05,3.05,0,0,0,1.11.3v.71h-4.17v-.71a2.66,2.66,0,0,0,.87-.53,5.79,5.79,0,0,0,.92-1.56L132.39.07h.55L135,17a5.53,5.53,0,0,0,.5,2.08,1.67,1.67,0,0,0,1.14.46v0a1.93,1.93,0,0,0,1.12-.52,3.52,3.52,0,0,0,.6-1.6l2.61-13.23c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.73v.76a3.23,3.23,0,0,0-1.49.48,3.06,3.06,0,0,0-.64,1.64l-2.77,14.08c0,.16-.05.3-.07.44s0,.29,0,.47a.79.79,0,0,0,.31.71,1.55,1.55,0,0,0,.87.21,6.83,6.83,0,0,0,3.79-1,8.42,8.42,0,0,0,2.81-3.88ZM131.5,12.91l-.78-7.18-3.14,7.18Z',opacity:1,strokeColor:'',fillColor:'#8a251a',width:127.70402,height:55.84601,stampFillColor:'#f6dedd',stampStrokeColor:''};}break;case'NotApproved':case'Not Approved':{stampCollection={iconName:'Not Approved',// eslint-disable-next-line max-len
pathdata:'M0,19.46a1.56,1.56,0,0,0,1.16-.9A19.84,19.84,0,0,0,2.1,15L4.42,2.84l-.09-.3a1.82,1.82,0,0,0-.64-1.06,2.41,2.41,0,0,0-1-.24V.48H6.88l4.49,13.64L13,5.78c.09-.52.17-1,.22-1.39a10.11,10.11,0,0,0,.13-1.34,1.83,1.83,0,0,0-.49-1.48,2.49,2.49,0,0,0-1.13-.33V.48H16v.76l-.29.06a1.42,1.42,0,0,0-1,1,23.7,23.7,0,0,0-.84,3.42L11,20.71h-.51L5.1,4.38,3,15c-.17.87-.28,1.53-.33,2a5.32,5.32,0,0,0,0,.79,1.69,1.69,0,0,0,.54,1.44,2.48,2.48,0,0,0,1.1.32v.76H0ZM17.73,4.53C19.54,1.51,21.55,0,23.79,0a4.4,4.4,0,0,1,3.66,1.92,8.52,8.52,0,0,1,1.43,5.19,17.56,17.56,0,0,1-2.53,9.07q-2.7,4.61-6.21,4.6a4.24,4.24,0,0,1-3.6-1.92,8.6,8.6,0,0,1-1.39-5.14A17.68,17.68,0,0,1,17.73,4.53ZM18.37,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29,16.41,16.41,0,0,0,2.06-4.93,35.53,35.53,0,0,0,1.06-4.83A28.26,28.26,0,0,0,25.9,4.6a5.86,5.86,0,0,0-.52-2.55A1.7,1.7,0,0,0,23.78,1Q21.2,1,19.45,7.53a33,33,0,0,0-1.33,8.26A8.15,8.15,0,0,0,18.37,18Zm11.08,1.48a2.34,2.34,0,0,0,1.3-.26,3,3,0,0,0,.85-1.85l3-15.85A3.54,3.54,0,0,0,32,2.56a8,8,0,0,0-1.82,3.16l-.53-.2.8-5H41.81l-.74,5.66-.54-.07c0-1.92-.41-3.24-1.13-3.94a2.6,2.6,0,0,0-1.74-.63L34.79,16.6l-.17,1a2.43,2.43,0,0,0,0,.33,2.26,2.26,0,0,0,0,.26c0,.5.11.82.33.95a3.94,3.94,0,0,0,1.39.3v.76H29.45Zm26.65.76H50.18v-.71a2.28,2.28,0,0,0,1.25-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.2-2.15H47l-1.2,3c-.08.2-.15.42-.22.66a2.84,2.84,0,0,0-.09.69c0,.41.08.67.25.78a2.91,2.91,0,0,0,1.08.3v.71H42.79v-.71a2.44,2.44,0,0,0,.85-.53,5.59,5.59,0,0,0,.9-1.56L52.21.07h.53l2,16.88A5.46,5.46,0,0,0,55.2,19a1.36,1.36,0,0,0,.9.43Zm-4.76-7.31-.76-7.18-3,7.18Zm4.95,6.53a1.82,1.82,0,0,0,1-.5,3.56,3.56,0,0,0,.58-1.59L60.42,4.11c.06-.3.1-.6.15-.9a5.46,5.46,0,0,0,.06-.72c0-.52-.13-.86-.4-1a2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.26.73,1.9,2.07,1.9,4a5.81,5.81,0,0,1-1.54,4.22,5.32,5.32,0,0,1-4,1.58l-.59,0-1.2-.11L61,16.6l-.17,1a2.72,2.72,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29c0,.5.09.81.28.94a3.26,3.26,0,0,0,1.23.31v.76h-6Zm6-9.67.38.06H63a3,3,0,0,0,1.62-.36,2.87,2.87,0,0,0,1-1.18,7.28,7.28,0,0,0,.6-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.44,1.44,0,0,0-1.39-.79.71.71,0,0,0-.65.28,3.7,3.7,0,0,0-.32,1Zm5.61,9.69A1.86,1.86,0,0,0,69,18.94a3.54,3.54,0,0,0,.59-1.59L72.15,4.11q.09-.45.15-.9a5.73,5.73,0,0,0,.07-.72,1.1,1.1,0,0,0-.41-1,2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.27.73,1.9,2.07,1.9,4a5.77,5.77,0,0,1-1.54,4.22,5.31,5.31,0,0,1-4,1.58l-.6,0-1.2-.11L72.74,16.6l-.17,1a2.72,2.72,0,0,0,0,.3c0,.1,0,.19,0,.29,0,.5.1.81.29.94a3.15,3.15,0,0,0,1.23.31v.76h-6.1Zm6.12-9.69.38.06h.33a3,3,0,0,0,1.62-.36,3,3,0,0,0,1-1.18,7.67,7.67,0,0,0,.59-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.43,1.43,0,0,0-1.38-.79.73.73,0,0,0-.66.28,3.7,3.7,0,0,0-.32,1Zm5.57,9.69a1.9,1.9,0,0,0,1.09-.52,3.56,3.56,0,0,0,.58-1.59L83.84,4.11c0-.27.09-.51.13-.71a7.08,7.08,0,0,0,.09-1c0-.47-.1-.77-.28-.9a3.53,3.53,0,0,0-1.22-.3V.48h5.68a6.57,6.57,0,0,1,3,.53q1.92,1,1.92,3.75a6.79,6.79,0,0,1-.32,2,5.23,5.23,0,0,1-1.08,1.9,4.56,4.56,0,0,1-1.25,1,11.62,11.62,0,0,1-1.33.52c.07.3.12.49.14.57l1.59,6.66a4.07,4.07,0,0,0,.69,1.7,1.72,1.72,0,0,0,1.13.41v.76H88.52l-2.23-9.76h-.58L84.49,16.6l-.17,1a1,1,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28c0,.53.09.86.26,1a3.11,3.11,0,0,0,1.24.32v.76H79.63ZM87.55,9.3A2.59,2.59,0,0,0,89,8.17a7.24,7.24,0,0,0,.66-1.62A8.18,8.18,0,0,0,90,4.29a4.32,4.32,0,0,0-.43-2,1.5,1.5,0,0,0-1.45-.81.71.71,0,0,0-.62.26,2.78,2.78,0,0,0-.33,1.05L85.91,9.5A6.63,6.63,0,0,0,87.55,9.3Zm8.72-4.77Q99,0,102.32,0A4.37,4.37,0,0,1,106,1.92a8.46,8.46,0,0,1,1.44,5.19,17.58,17.58,0,0,1-2.54,9.07q-2.7,4.61-6.21,4.6a4.27,4.27,0,0,1-3.6-1.92,8.67,8.67,0,0,1-1.38-5.14A17.68,17.68,0,0,1,96.27,4.53ZM96.9,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29A16.63,16.63,0,0,0,103,13.54a37.1,37.1,0,0,0,1.06-4.83,29.49,29.49,0,0,0,.38-4.11,5.86,5.86,0,0,0-.51-2.55A1.71,1.71,0,0,0,102.31,1C100.6,1,99.15,3.17,98,7.53a33.42,33.42,0,0,0-1.33,8.26A8.57,8.57,0,0,0,96.9,18ZM114.35.48v.76a2.57,2.57,0,0,0-1.08.17,1.07,1.07,0,0,0-.5,1,2.53,2.53,0,0,0,0,.28,2.64,2.64,0,0,0,0,.28l1.07,11.76L117.77,6c.31-.71.59-1.41.84-2.11A5.25,5.25,0,0,0,119,2.19a.85.85,0,0,0-.38-.81,3.09,3.09,0,0,0-.95-.14V.48h4v.76a2.08,2.08,0,0,0-.73.45,5.35,5.35,0,0,0-.82,1.4l-7.79,17.69h-.66L110,5.74A22,22,0,0,0,109.46,2c-.16-.39-.58-.62-1.28-.71V.48Zm5.15,19a1.83,1.83,0,0,0,1.08-.52,3.42,3.42,0,0,0,.59-1.59l2.54-13.24c.06-.34.11-.64.15-.92a4.83,4.83,0,0,0,.06-.7c0-.5-.09-.81-.28-.94a3.14,3.14,0,0,0-1.22-.31V.48h11.12l-.87,5.6L132.11,6a7,7,0,0,0-.49-3c-.52-1-1.59-1.51-3.19-1.51-.55,0-.9.09-1.06.28A2.44,2.44,0,0,0,127,2.74L125.76,9.3a6.21,6.21,0,0,0,2.81-.51A6,6,0,0,0,130,6.18l.58.1L129,14.35l-.56-.14c0-.28,0-.52,0-.73s0-.37,0-.51a2.92,2.92,0,0,0-.61-2.15,3.55,3.55,0,0,0-2.37-.57l-1.36,7.2a4.79,4.79,0,0,0-.07.51,3.28,3.28,0,0,0,0,.39,1,1,0,0,0,.22.66,1.24,1.24,0,0,0,.93.26,6.43,6.43,0,0,0,3.21-.75,7.67,7.67,0,0,0,3.21-4.17l.5.13-1.22,5.74H119.5Zm12.79,0a1.87,1.87,0,0,0,1-.41,3.23,3.23,0,0,0,.71-1.71L136.5,4.11c.07-.38.13-.69.17-1a5.89,5.89,0,0,0,.05-.67c0-.5-.1-.81-.29-.94a3.32,3.32,0,0,0-1.22-.31V.48h6a5.35,5.35,0,0,1,4.63,2.22,10.11,10.11,0,0,1,1.58,6,13.3,13.3,0,0,1-2.34,7.84,8,8,0,0,1-6.86,3.7h-5.93ZM143.87,3.39a2.84,2.84,0,0,0-2.79-2,1.08,1.08,0,0,0-.91.31,1.93,1.93,0,0,0-.34.83L137,17.44a3.1,3.1,0,0,0-.06.39c0,.11,0,.21,0,.3a1.22,1.22,0,0,0,.24.84,1.26,1.26,0,0,0,.9.26q3.67,0,5.33-5.42a23.91,23.91,0,0,0,1-6.94A9.45,9.45,0,0,0,143.87,3.39Z',opacity:1,strokeColor:'',fillColor:'#8a251a',width:127.70402,height:55.84601,stampFillColor:'#f6dedd',stampStrokeColor:''};}break;}if(stampCollection){stampCollection.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.currentStampAnnotation=stampCollection;return stampCollection;}}};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.retrievestampAnnotation=function(icontype){if(icontype){var stampCollection=void 0;switch(icontype.trim()){// eslint-disable-next-line
case'Approved':{stampCollection={iconName:'Approved',// eslint-disable-next-line max-len
pathdata:'M19,20.22H10.55v-.71a4.26,4.26,0,0,0,1.79-.41,1.37,1.37,0,0,0,.53-1.29c0-.22,0-.75-.16-1.58,0-.17-.11-.89-.29-2.15H6.06l-1.72,3a4,4,0,0,0-.31.66,2,2,0,0,0-.14.69c0,.41.12.67.37.78a5.42,5.42,0,0,0,1.53.3v.71H0v-.71A4,4,0,0,0,1.21,19a5.68,5.68,0,0,0,1.28-1.56L13.45.07h.76L17,17a4.35,4.35,0,0,0,.7,2.08,2.4,2.4,0,0,0,1.31.44Zm-6.83-7.31L11.13,5.73,6.76,12.91Zm7.18,6.52a3,3,0,0,0,1.33-.49,3,3,0,0,0,.84-1.59L25.19,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22,9.53,9.53,0,0,1-5.69,1.58l-.85,0-1.71-.11L26,16.6l-.25,1a1,1,0,0,0-.05.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76H19.39Zm8.52-9.66.54.06h.48a5.81,5.81,0,0,0,2.3-.36,3.47,3.47,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,8.94,8.94,0,0,0,.3-2,3.29,3.29,0,0,0-.58-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.71,2.71,0,0,0-.46,1Zm8,9.69a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59L42,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22A9.53,9.53,0,0,1,47,10.87l-.85,0-1.71-.11L42.79,16.6l-.25,1a1.45,1.45,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76h-8.7Zm8.74-9.69.54.06h.48A5.81,5.81,0,0,0,48,9.48a3.41,3.41,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,9,9,0,0,0,.31-2,3.29,3.29,0,0,0-.59-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.88,2.88,0,0,0-.46,1Zm7.95,9.69a3.27,3.27,0,0,0,1.56-.52A3.06,3.06,0,0,0,55,17.35L58.64,4.11l.18-.71a4.72,4.72,0,0,0,.13-1c0-.47-.13-.77-.4-.9a6.74,6.74,0,0,0-1.74-.3V.48h8.11A13,13,0,0,1,69.14,1a3.7,3.7,0,0,1,2.74,3.75,4.8,4.8,0,0,1-.46,2,5,5,0,0,1-1.54,1.9,6.55,6.55,0,0,1-1.79,1,19.35,19.35,0,0,1-1.89.52c.1.3.16.49.2.57l2.27,6.66a3.49,3.49,0,0,0,1,1.7,3.08,3.08,0,0,0,1.6.41v.76H65.33l-3.19-9.76h-.83L59.57,16.6l-.25,1a1.87,1.87,0,0,0,0,.25,2.64,2.64,0,0,0,0,.28q0,.8.39,1a5.88,5.88,0,0,0,1.76.32v.76H52.62ZM63.94,9.3a3.79,3.79,0,0,0,2.11-1.13A6,6,0,0,0,67,6.55a5.84,5.84,0,0,0,.44-2.26,3.31,3.31,0,0,0-.61-2,2.47,2.47,0,0,0-2.09-.81,1.25,1.25,0,0,0-.88.26,2.34,2.34,0,0,0-.47,1.05L61.59,9.5A13.42,13.42,0,0,0,63.94,9.3ZM76.39,4.53Q80.26,0,85,0a7.34,7.34,0,0,1,5.23,1.92,6.76,6.76,0,0,1,2,5.19,13.9,13.9,0,0,1-3.62,9.07q-3.86,4.61-8.88,4.6a7.06,7.06,0,0,1-5.13-1.92,6.86,6.86,0,0,1-2-5.14A14,14,0,0,1,76.39,4.53ZM77.3,18a2.56,2.56,0,0,0,2.57,1.78A4.62,4.62,0,0,0,83,18.47,14.42,14.42,0,0,0,86,13.54a27.18,27.18,0,0,0,1.52-4.83,20.67,20.67,0,0,0,.54-4.11,4.38,4.38,0,0,0-.73-2.55A2.62,2.62,0,0,0,85,1q-3.68,0-6.19,6.54a24.29,24.29,0,0,0-1.9,8.26A5.91,5.91,0,0,0,77.3,18ZM102.23.48v.76a5.19,5.19,0,0,0-1.55.17,1,1,0,0,0-.72,1,2.46,2.46,0,0,0,0,.28L100,3l1.52,11.76L107.11,6c.44-.71.84-1.41,1.2-2.11a4.06,4.06,0,0,0,.53-1.66.79.79,0,0,0-.55-.81,6.11,6.11,0,0,0-1.35-.14V.48h5.67v.76a3.31,3.31,0,0,0-1,.45,5.33,5.33,0,0,0-1.18,1.4L99.26,20.78h-.94l-2.25-15A15.49,15.49,0,0,0,95.24,2c-.22-.39-.84-.62-1.83-.71V.48Zm7.35,19a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59l3.62-13.24c.09-.34.16-.64.22-.92a3.27,3.27,0,0,0,.09-.7c0-.5-.14-.81-.4-.94a6.13,6.13,0,0,0-1.75-.31V.48h15.89l-1.25,5.6L127.6,6a5.32,5.32,0,0,0-.7-3q-1.12-1.52-4.56-1.51a2.61,2.61,0,0,0-1.51.28,2.12,2.12,0,0,0-.56,1.06L118.52,9.3a12.1,12.1,0,0,0,4-.51,5.8,5.8,0,0,0,2-2.61l.82.1-2.19,8.07-.81-.14c0-.28.07-.52.08-.73s0-.37,0-.51a2.4,2.4,0,0,0-.87-2.15,6.76,6.76,0,0,0-3.38-.57l-1.94,7.2a3.34,3.34,0,0,0-.11.51,3.67,3.67,0,0,0,0,.39.81.81,0,0,0,.32.66,2.3,2.3,0,0,0,1.33.26,12.39,12.39,0,0,0,4.57-.75A8.84,8.84,0,0,0,127,14.35l.72.13-1.74,5.74H109.58Zm18.27,0a3.27,3.27,0,0,0,1.37-.41,2.85,2.85,0,0,0,1-1.71l3.63-13.23c.1-.38.18-.69.23-1a3,3,0,0,0,.09-.67c0-.5-.15-.81-.42-.94A6.38,6.38,0,0,0,132,1.24V.48h8.57c2.9,0,5.1.74,6.62,2.22a8,8,0,0,1,2.26,6,10.72,10.72,0,0,1-3.35,7.84,13.3,13.3,0,0,1-9.8,3.7h-8.47ZM144.4,3.39a4.23,4.23,0,0,0-4-2,2,2,0,0,0-1.29.31,1.74,1.74,0,0,0-.48.83l-4.07,14.9a3.24,3.24,0,0,0-.07.39,1.69,1.69,0,0,0,0,.3,1,1,0,0,0,.36.84,2.27,2.27,0,0,0,1.27.26q5.26,0,7.62-5.42a17.25,17.25,0,0,0,1.43-6.94A7,7,0,0,0,144.4,3.39Z',opacity:1,strokeColor:'',fillColor:'#516c30',width:149.474,height:20.783,stampFillColor:'#e6eddf',stampStrokeColor:''};}break;case'Confidential':{stampCollection={iconName:'Confidential',// eslint-disable-next-line max-len
pathdata:'M13.71,0,12.63,6.9,12,6.73c0-.41,0-.66,0-.73s0-.18,0-.32a6.16,6.16,0,0,0-.79-3.47,2.37,2.37,0,0,0-2-1.14c-1.64,0-3.07,1.51-4.29,4.55a22,22,0,0,0-1.64,8.29c0,2,.34,3.44,1,4.2A3,3,0,0,0,6.5,19.24a4.08,4.08,0,0,0,2.93-1.43,10.47,10.47,0,0,0,1.5-2.09l.64.65A8.84,8.84,0,0,1,9,19.72a5.24,5.24,0,0,1-3.08,1.09,5.16,5.16,0,0,1-4.21-2.08A8.68,8.68,0,0,1,0,13.16,16.5,16.5,0,0,1,2.55,3.92Q5.1,0,8.61,0a6.35,6.35,0,0,1,2.25.43,6.62,6.62,0,0,0,1.38.43.55.55,0,0,0,.5-.23A2.61,2.61,0,0,0,13.06,0ZM27.49,7.11a17.19,17.19,0,0,1-2.61,9.07q-2.77,4.61-6.39,4.6a4.42,4.42,0,0,1-3.7-1.92,8.47,8.47,0,0,1-1.43-5.14A17.31,17.31,0,0,1,16,4.53C17.88,1.51,20,0,22.25,0A4.53,4.53,0,0,1,26,1.92,8.27,8.27,0,0,1,27.49,7.11ZM24.42,4.6a5.71,5.71,0,0,0-.53-2.55A1.76,1.76,0,0,0,22.24,1q-2.65,0-4.45,6.54a31.93,31.93,0,0,0-1.37,8.26A8.15,8.15,0,0,0,16.67,18c.34,1.19,1,1.78,1.85,1.78a2.9,2.9,0,0,0,2.28-1.29,15.85,15.85,0,0,0,2.13-4.93A34.08,34.08,0,0,0,24,8.71,28.5,28.5,0,0,0,24.42,4.6ZM42.75,1.3l.3-.06V.48H38.69v.76a2.55,2.55,0,0,1,1.16.33,1.8,1.8,0,0,1,.51,1.48,10.11,10.11,0,0,1-.13,1.34c-.06.41-.14.87-.24,1.39l-1.65,8.34L33.73.48H29.45v.76a2.66,2.66,0,0,1,1,.24,1.88,1.88,0,0,1,.65,1.06l.09.3L28.81,15a20.72,20.72,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.55,2.55,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,.05-.79c.06-.43.17-1.09.34-2L31.89,4.38l5.52,16.33h.52l3-15a22.58,22.58,0,0,1,.87-3.42A1.42,1.42,0,0,1,42.75,1.3ZM55.53.48H44.23v.76a3.63,3.63,0,0,1,1.26.3c.19.13.29.42.29.9a7.08,7.08,0,0,1-.09,1c0,.2-.08.44-.13.71L43,17.34a3.47,3.47,0,0,1-.59,1.58,1.91,1.91,0,0,1-1.13.54v.76h6.29v-.76a2.13,2.13,0,0,1-1-.19A1.23,1.23,0,0,1,46,18.1c0-.1,0-.21,0-.31s0-.23.05-.35l1.4-7.21a3.15,3.15,0,0,1,2.37.64A3.21,3.21,0,0,1,50.38,13c0,.11,0,.28,0,.49s0,.46-.06.75l.58.14,1.58-8.07-.59-.1a5.79,5.79,0,0,1-1.43,2.59,6.17,6.17,0,0,1-2.77.52l1.26-6.54a2.06,2.06,0,0,1,.42-1.08,1.39,1.39,0,0,1,1-.26c1.62,0,2.7.51,3.24,1.54a7.11,7.11,0,0,1,.49,3l.57.13Zm3.69,17.71c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1L62.06,3.36a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H57.44v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1L56.16,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.3,3.3,0,0,1-1.26-.32C59.32,19,59.22,18.69,59.22,18.19Zm18-9.51a13,13,0,0,1-2.42,7.84,8.31,8.31,0,0,1-7,3.7H61.6v-.76a2,2,0,0,0,1-.41,3.14,3.14,0,0,0,.73-1.71L65.93,4.11c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.17A5.52,5.52,0,0,1,75.53,2.7,9.91,9.91,0,0,1,77.17,8.68ZM74,6.87a9.22,9.22,0,0,0-.53-3.48,2.91,2.91,0,0,0-2.87-2,1.12,1.12,0,0,0-.93.31,1.81,1.81,0,0,0-.35.83l-2.93,14.9a3,3,0,0,0-.05.39c0,.11,0,.21,0,.3a1.17,1.17,0,0,0,.25.84,1.3,1.3,0,0,0,.92.26q3.8,0,5.49-5.42A23.26,23.26,0,0,0,74,6.87Zm11.3,11.65a6.72,6.72,0,0,1-3.29.75,1.3,1.3,0,0,1-1-.26,1,1,0,0,1-.23-.66,3.28,3.28,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.4-7.2a3.73,3.73,0,0,1,2.43.57A2.87,2.87,0,0,1,85.43,13c0,.14,0,.31,0,.51s0,.45-.06.73l.59.14,1.57-8.07-.59-.1a5.79,5.79,0,0,1-1.46,2.61,6.5,6.5,0,0,1-2.89.51l1.26-6.56a2.41,2.41,0,0,1,.41-1.06c.16-.19.52-.28,1.08-.28,1.65,0,2.75.5,3.29,1.51a7,7,0,0,1,.5,3l.57.13.9-5.6H79.14v.76a3.35,3.35,0,0,1,1.26.31c.19.13.29.44.29.94a5,5,0,0,1-.07.7c0,.28-.09.58-.15.92L77.86,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.13.52v.76H87.91l1.25-5.74-.52-.13A7.69,7.69,0,0,1,85.34,18.52ZM105.8,1.24V.48h-4.37v.76a2.55,2.55,0,0,1,1.16.33,1.77,1.77,0,0,1,.52,1.48A10.58,10.58,0,0,1,103,4.39c-.06.41-.13.87-.23,1.39l-1.66,8.34L96.47.48H92.19v.76a2.61,2.61,0,0,1,1,.24,1.83,1.83,0,0,1,.65,1.06l.1.3L91.55,15a19,19,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.59,2.59,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,0-.79c.06-.43.17-1.09.35-2L94.63,4.38l5.52,16.33h.53l2.95-15a22.93,22.93,0,0,1,.86-3.42,1.42,1.42,0,0,1,1-1Zm11.4,4.9L118,.48H106.28l-.82,5,.55.2a8,8,0,0,1,1.87-3.16,3.7,3.7,0,0,1,2.7-1.06l-3.12,15.85a2.94,2.94,0,0,1-.87,1.85,2.48,2.48,0,0,1-1.34.26v.76h7v-.76a4.24,4.24,0,0,1-1.43-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.18-1,3-15.1a2.73,2.73,0,0,1,1.79.63c.75.7,1.13,2,1.17,3.94Zm3.57,12.05c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1,2.62-13.24a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H119v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1l-2.61,13.24a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.36,3.36,0,0,1-1.26-.32C120.87,19,120.77,18.69,120.77,18.19Zm28.86-3.71-1.24,5.74H130.3v-.71a2.48,2.48,0,0,0,1.3-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.21-2.15h-4.58l-1.24,3a5.1,5.1,0,0,0-.22.66,2.45,2.45,0,0,0-.1.69c0,.41.09.67.26.78a3.05,3.05,0,0,0,1.11.3v.71h-4.17v-.71a2.66,2.66,0,0,0,.87-.53,5.79,5.79,0,0,0,.92-1.56L132.39.07h.55L135,17a5.53,5.53,0,0,0,.5,2.08,1.67,1.67,0,0,0,1.14.46v0a1.93,1.93,0,0,0,1.12-.52,3.52,3.52,0,0,0,.6-1.6l2.61-13.23c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.73v.76a3.23,3.23,0,0,0-1.49.48,3.06,3.06,0,0,0-.64,1.64l-2.77,14.08c0,.16-.05.3-.07.44s0,.29,0,.47a.79.79,0,0,0,.31.71,1.55,1.55,0,0,0,.87.21,6.83,6.83,0,0,0,3.79-1,8.42,8.42,0,0,0,2.81-3.88ZM131.5,12.91l-.78-7.18-3.14,7.18Z',opacity:1,strokeColor:'',fillColor:'#192760',width:149.633,height:20.811,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'Witness':{stampCollection={iconName:'Witness',// eslint-disable-next-line max-len
pathdata:'M19.63,2.67,12.77,16.84h-.69L10.63,5.17,5.05,16.84H4.36L2.5,2.92A3.13,3.13,0,0,0,2,1.35,2.38,2.38,0,0,0,.63.91V.33H7.3V1a2.27,2.27,0,0,0-.92.17A1.11,1.11,0,0,0,5.84,2.2v.16c0,.05,0,.13,0,.22L6.81,11l3.57-7.48a.79.79,0,0,0,0-.23,2.78,2.78,0,0,0-.53-2A2.23,2.23,0,0,0,8.68.91V.33h6.45V.91A2.42,2.42,0,0,0,14,1.2c-.23.16-.34.5-.34,1,0,.11,0,.26,0,.46s.07.73.12,1.21l.8,7L18.3,3.11c.09-.19.17-.4.25-.62a2.11,2.11,0,0,0,.11-.65.73.73,0,0,0-.4-.76,2.73,2.73,0,0,0-1.1-.17V.33h4.47V.91a1.92,1.92,0,0,0-.91.3A3.66,3.66,0,0,0,19.63,2.67ZM29.76.33H22.62V1A5.07,5.07,0,0,1,24,1.2c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L21.17,14.05a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h7.15v-.62A5.09,5.09,0,0,1,25,15.51c-.22-.11-.33-.37-.33-.77a2,2,0,0,1,0-.23c0-.08,0-.16,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,29.76,1ZM41.9,4.88l.63,0,.86-4.6H30.2l-.93,4.1.62.16A6.6,6.6,0,0,1,32,2a5.22,5.22,0,0,1,3.06-.86L31.53,14.05a2.24,2.24,0,0,1-1,1.5,3.67,3.67,0,0,1-1.51.21v.62H37v-.62a6,6,0,0,1-1.62-.24c-.26-.1-.39-.36-.39-.77,0-.07,0-.14,0-.21s0-.16.05-.27l.2-.83L38.57,1.16a3.76,3.76,0,0,1,2,.52A3.69,3.69,0,0,1,41.9,4.88ZM59.24,1,59.58,1V.33H54.65V1A3.78,3.78,0,0,1,56,1.22a1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.71-.27,1.13l-1.87,6.79L49.05.33H44.21V1a3.51,3.51,0,0,1,1.13.2,1.51,1.51,0,0,1,.74.85l.1.25L43.49,12.1A13.5,13.5,0,0,1,42.4,15a1.87,1.87,0,0,1-1.35.72v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.19,1.19,0,0,1-.64-1.17,3.55,3.55,0,0,1,.06-.64q.11-.53.39-1.59L47,3.5,53.2,16.78h.59L57.13,4.6a15.29,15.29,0,0,1,1-2.78A1.51,1.51,0,0,1,59.24,1Zm7.26.31a2.11,2.11,0,0,1,1.23-.23c1.87,0,3.1.41,3.71,1.23A4.39,4.39,0,0,1,72,4.78l.64.11,1-4.56H60.75V1a5,5,0,0,1,1.42.25c.22.11.32.36.32.77a2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74l-3,10.77a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h13.3l1.42-4.66-.59-.11A7.1,7.1,0,0,1,67.75,15a10,10,0,0,1-3.72.61A1.86,1.86,0,0,1,63,15.4a.67.67,0,0,1-.26-.54,2.36,2.36,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.48,5.48,0,0,1,2.75.47,2,2,0,0,1,.71,1.75c0,.11,0,.25,0,.41s0,.37-.06.6l.65.11L70.2,5.05,69.54,5a4.69,4.69,0,0,1-1.65,2.12,10.06,10.06,0,0,1-3.26.41l1.42-5.33A1.75,1.75,0,0,1,66.5,1.31ZM80.88.83a2.77,2.77,0,0,1,2.46,1.26A4.36,4.36,0,0,1,84,4l.08.78.62.08,1-4.8H85a1.77,1.77,0,0,1-.38.43A1,1,0,0,1,84,.67a2.76,2.76,0,0,1-.37,0l-.41-.1-.61-.2a4.78,4.78,0,0,0-.79-.2A6.71,6.71,0,0,0,80.46,0a4.76,4.76,0,0,0-3.62,1.36,4.61,4.61,0,0,0-1.29,3.29q0,2.05,2.94,4.47t2.94,3.82a3.19,3.19,0,0,1-.79,2.14,2.8,2.8,0,0,1-2.23.92,3.43,3.43,0,0,1-1.5-.33,3.82,3.82,0,0,1-2-2.5,10.33,10.33,0,0,1-.2-1.67L74,11.45l-.87,5.38h.73a2.85,2.85,0,0,1,.38-.67A.75.75,0,0,1,74.8,16a1.12,1.12,0,0,1,.27,0l.42.15.61.22a8.62,8.62,0,0,0,1.3.35,7.53,7.53,0,0,0,1.32.12,5.48,5.48,0,0,0,4.11-1.53,4.77,4.77,0,0,0,1.49-3.43,4.59,4.59,0,0,0-.77-2.63,9.31,9.31,0,0,0-1.87-2L79.61,5.5a4.31,4.31,0,0,1-.74-.77,2.55,2.55,0,0,1-.43-1.45,2.68,2.68,0,0,1,.42-1.44A2.23,2.23,0,0,1,80.88.83Zm12.31,0a2.8,2.8,0,0,1,2.47,1.26A4.49,4.49,0,0,1,96.35,4l.08.78.62.08,1-4.8h-.71a1.62,1.62,0,0,1-.39.43,1,1,0,0,1-.64.18,2.9,2.9,0,0,1-.38,0l-.41-.1-.61-.2a4.65,4.65,0,0,0-.78-.2A6.88,6.88,0,0,0,92.77,0a4.73,4.73,0,0,0-3.61,1.36,4.57,4.57,0,0,0-1.3,3.29q0,2.05,2.94,4.47c2,1.54,3,2.81,3,3.82a3.2,3.2,0,0,1-.8,2.14,2.78,2.78,0,0,1-2.23.92,3.36,3.36,0,0,1-1.49-.33A3.68,3.68,0,0,1,88,14.73a3.76,3.76,0,0,1-.81-1.56A10.6,10.6,0,0,1,87,11.5l-.7-.05-.86,5.38h.72a2.85,2.85,0,0,1,.38-.67.78.78,0,0,1,.57-.19,1.12,1.12,0,0,1,.27,0l.42.15.61.22a8.74,8.74,0,0,0,1.31.35,7.37,7.37,0,0,0,1.32.12,5.49,5.49,0,0,0,4.11-1.53,4.81,4.81,0,0,0,1.49-3.43,4.67,4.67,0,0,0-.77-2.63A9.57,9.57,0,0,0,94,7.2L91.93,5.5a4,4,0,0,1-.74-.77,2.48,2.48,0,0,1-.43-1.45,2.68,2.68,0,0,1,.42-1.44A2.2,2.2,0,0,1,93.19.83Z',opacity:1,strokeColor:'',fillColor:'#192760',width:97.39,height:16.84,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'InitialHere':case'Initial Here':{stampCollection={iconName:'Initial Here',// eslint-disable-next-line max-len
pathdata:'M6.36,15.51a5.09,5.09,0,0,0,1.42.25v.62H.63v-.62a2.62,2.62,0,0,0,1.27-.42,2.47,2.47,0,0,0,.68-1.29l3-10.77c.08-.3.15-.56.19-.77A2.86,2.86,0,0,0,5.78,2c0-.41-.11-.66-.34-.77A5.07,5.07,0,0,0,4,1V.33h7.14V1a2.76,2.76,0,0,0-1.27.42,2.5,2.5,0,0,0-.66,1.3l-3,10.77-.19.83c0,.08,0,.16,0,.24a2,2,0,0,0,0,.23C6,15.14,6.14,15.4,6.36,15.51ZM27,1,27.36,1V.33H22.43V1a3.78,3.78,0,0,1,1.31.27,1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.71-.27,1.13L22,11.43,16.83.33H12V1a3.49,3.49,0,0,1,1.12.2,1.51,1.51,0,0,1,.74.85l.11.25-2.7,9.85A13,13,0,0,1,10.18,15a1.85,1.85,0,0,1-1.35.72v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.19,1.19,0,0,1-.63-1.17,4.72,4.72,0,0,1,.05-.64q.1-.53.39-1.59l2.39-8.6L21,16.78h.6L24.91,4.6a15.29,15.29,0,0,1,1-2.78A1.51,1.51,0,0,1,27,1ZM35.78.33H28.64V1a5.16,5.16,0,0,1,1.41.25c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L27.19,14.05a2.47,2.47,0,0,1-.68,1.29,2.66,2.66,0,0,1-1.27.42v.62h7.15v-.62A5.09,5.09,0,0,1,31,15.51c-.22-.11-.33-.37-.33-.77a2,2,0,0,1,0-.23,2,2,0,0,1,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,35.78,1Zm12.76,4.6.87-4.6H36.22l-.93,4.1.62.16A6.52,6.52,0,0,1,38,2a5.21,5.21,0,0,1,3-.86L37.55,14.05a2.24,2.24,0,0,1-1,1.5,3.7,3.7,0,0,1-1.51.21v.62H43v-.62a5.79,5.79,0,0,1-1.61-.24c-.26-.1-.39-.36-.39-.77a1.48,1.48,0,0,1,0-.21,2,2,0,0,1,0-.27l.2-.83L44.58,1.16a3.77,3.77,0,0,1,2,.52,3.74,3.74,0,0,1,1.31,3.2Zm4,9.81a.93.93,0,0,1,0-.23,2,2,0,0,1,0-.24l.18-.83,3-10.77a2.42,2.42,0,0,1,.67-1.3A2.72,2.72,0,0,1,57.72,1V.33H50.57V1A5.26,5.26,0,0,1,52,1.2c.23.11.34.36.34.77a2.28,2.28,0,0,1-.07.54,7.71,7.71,0,0,1-.19.77l-3,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62h7.14v-.62a5.07,5.07,0,0,1-1.41-.25C52.69,15.4,52.58,15.14,52.58,14.74Zm32-3.13.57.11-1.4,4.66H63.34v-.57a3.65,3.65,0,0,0,1.46-.34c.29-.16.43-.51.43-1,0-.18,0-.61-.13-1.29,0-.14-.09-.73-.23-1.75H59.69l-1.4,2.44a3.38,3.38,0,0,0-.25.54,1.64,1.64,0,0,0-.11.56q0,.5.3.63a4.41,4.41,0,0,0,1.25.25v.57H54.76v-.57a3.36,3.36,0,0,0,1-.43,4.58,4.58,0,0,0,1-1.27L65.7,0h.62l2.3,13.72a3.49,3.49,0,0,0,.56,1.7,2.34,2.34,0,0,0,1.29.37v0a2.58,2.58,0,0,0,1.26-.42,2.46,2.46,0,0,0,.68-1.3L75.35,3.28c.09-.3.16-.56.2-.77A2.86,2.86,0,0,0,75.61,2c0-.41-.11-.66-.34-.77A5.17,5.17,0,0,0,73.85,1V.33h7.61V1a4.77,4.77,0,0,0-1.69.39A2.27,2.27,0,0,0,79,2.67L75.92,14.12c0,.13,0,.25-.07.36a2.21,2.21,0,0,0,0,.39.59.59,0,0,0,.35.57,2.33,2.33,0,0,0,1,.17,10.06,10.06,0,0,0,4.28-.84A7.67,7.67,0,0,0,84.6,11.61ZM64.7,10.44,63.81,4.6l-3.55,5.84Zm38,4.32a.71.71,0,0,1,0-.16s0-.16.07-.34l.2-.83L106,2.67a2.43,2.43,0,0,1,.79-1.39A2.78,2.78,0,0,1,107.9,1V.33h-7.15V1a4.45,4.45,0,0,1,1.27.19.81.81,0,0,1,.47.83,2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74l-1.14,4.16h-5.7L96.7,2.67a2.27,2.27,0,0,1,.73-1.33A4.77,4.77,0,0,1,99.12,1V.33H91.51V1a5.09,5.09,0,0,1,1.42.25c.22.11.33.36.33.77a2.93,2.93,0,0,1-.08.58c-.05.24-.1.48-.17.73L90.07,14a2.73,2.73,0,0,1-.65,1.29,2.47,2.47,0,0,1-1.3.43v.62h7.15v-.62a5.13,5.13,0,0,1-1.42-.24c-.21-.1-.31-.34-.31-.72a3.11,3.11,0,0,1,0-.57c0-.16.1-.43.19-.8L95.12,8.5h5.7L99.31,14a2.21,2.21,0,0,1-.74,1.33,4.36,4.36,0,0,1-1.69.39v.62h7.63v-.62a4.72,4.72,0,0,1-1.25-.17A.8.8,0,0,1,102.73,14.76Zm13.38.24a10.07,10.07,0,0,1-3.72.61,1.86,1.86,0,0,1-1.08-.21.67.67,0,0,1-.26-.54,2.36,2.36,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.51,5.51,0,0,1,2.75.47,2,2,0,0,1,.7,1.75c0,.11,0,.25,0,.41s0,.37-.07.6l.66.11,1.78-6.56L117.89,5a4.63,4.63,0,0,1-1.65,2.12A10,10,0,0,1,113,7.5l1.43-5.33a1.6,1.6,0,0,1,.45-.86,2.07,2.07,0,0,1,1.23-.23c1.86,0,3.1.41,3.71,1.23a4.32,4.32,0,0,1,.56,2.47l.65.11,1-4.56H109.1V1a5.1,5.1,0,0,1,1.43.25c.21.11.32.36.32.77a3.63,3.63,0,0,1-.07.57c0,.22-.11.47-.18.74l-2.95,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62H119l1.42-4.66-.58-.11A7.17,7.17,0,0,1,116.11,15ZM144.36,2.17,142.93,7.5a10.13,10.13,0,0,0,3.27-.41A4.69,4.69,0,0,0,147.84,5l.67.08-1.78,6.56-.66-.11c0-.23.06-.43.07-.6s0-.3,0-.41a2,2,0,0,0-.7-1.75,5.51,5.51,0,0,0-2.75-.47l-1.58,5.86a3.38,3.38,0,0,0-.09.41,2.36,2.36,0,0,0,0,.32.67.67,0,0,0,.26.54,1.86,1.86,0,0,0,1.08.21,10.07,10.07,0,0,0,3.72-.61,7.14,7.14,0,0,0,3.73-3.39l.58.11L149,16.38H131l-2.59-7.93h-.68l-1.42,5-.2.83,0,.2a1.77,1.77,0,0,0,0,.23c0,.43.1.7.31.81a4.87,4.87,0,0,0,1.43.25v.62h-7.14v-.62a2.58,2.58,0,0,0,1.26-.42,2.4,2.4,0,0,0,.68-1.29l3-10.77.15-.57a4.09,4.09,0,0,0,.1-.79c0-.38-.11-.62-.32-.72A4.8,4.8,0,0,0,124,1V.33h6.6a10.58,10.58,0,0,1,3.42.43,3,3,0,0,1,2.24,3.05,4,4,0,0,1-.38,1.6A4,4,0,0,1,134.66,7a5.47,5.47,0,0,1-1.45.8c-.33.11-.85.25-1.54.42a4.73,4.73,0,0,0,.16.46l1.85,5.42a2.81,2.81,0,0,0,.8,1.38,2.42,2.42,0,0,0,1.23.32,2.53,2.53,0,0,0,1.22-.41,2.47,2.47,0,0,0,.68-1.29l2.94-10.77c.07-.27.13-.52.18-.74A2.73,2.73,0,0,0,140.8,2c0-.41-.11-.66-.32-.77A5.1,5.1,0,0,0,139.05,1V.33H152l-1,4.56-.65-.11a4.32,4.32,0,0,0-.56-2.47c-.61-.82-1.85-1.23-3.71-1.23a2.07,2.07,0,0,0-1.23.23A1.67,1.67,0,0,0,144.36,2.17ZM131.54,6.59a5,5,0,0,0,.77-1.32,4.68,4.68,0,0,0,.36-1.84,2.74,2.74,0,0,0-.5-1.67,2,2,0,0,0-1.7-.66,1,1,0,0,0-.72.22,2,2,0,0,0-.38.85l-1.45,5.49a10.33,10.33,0,0,0,1.91-.16A3.07,3.07,0,0,0,131.54,6.59Z',opacity:1,strokeColor:'',fillColor:'#192760',width:151.345,height:16.781,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'SignHere':case'Sign Here':{stampCollection={iconName:'Sign Here',// eslint-disable-next-line max-len
pathdata:'M6.38,1.9A2.56,2.56,0,0,0,6,3.34a2.49,2.49,0,0,0,.44,1.45,3.9,3.9,0,0,0,.73.76l2.07,1.7a9.34,9.34,0,0,1,1.87,2.06,4.6,4.6,0,0,1,.78,2.63,4.78,4.78,0,0,1-1.5,3.43A5.46,5.46,0,0,1,6.23,16.9a7.34,7.34,0,0,1-1.31-.12,7.48,7.48,0,0,1-1.31-.36L3,16.2l-.42-.14a1.12,1.12,0,0,0-.27,0,.71.71,0,0,0-.57.19,2.85,2.85,0,0,0-.38.67H.63l.87-5.38.69,0a10.34,10.34,0,0,0,.2,1.68,3.82,3.82,0,0,0,2,2.5,3.42,3.42,0,0,0,1.5.32,2.76,2.76,0,0,0,2.23-.92A3.14,3.14,0,0,0,8.94,13c0-1-1-2.29-2.94-3.82S3.06,6.08,3.06,4.71A4.59,4.59,0,0,1,4.35,1.42,4.76,4.76,0,0,1,8,.06,6.71,6.71,0,0,1,9.29.19a4.78,4.78,0,0,1,.79.2l.61.2.41.1a2.76,2.76,0,0,0,.37,0,1,1,0,0,0,.65-.18A1.75,1.75,0,0,0,12.5.12h.72l-1,4.8-.62-.08-.09-.79a4.45,4.45,0,0,0-.69-1.91A2.78,2.78,0,0,0,8.39.89,2.2,2.2,0,0,0,6.38,1.9ZM22.8.39H15.66V1a4.71,4.71,0,0,1,1.41.25c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L14.21,14.11a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h7.15v-.62A4.63,4.63,0,0,1,18,15.56c-.22-.1-.33-.36-.33-.77a1.8,1.8,0,0,1,0-.22c0-.08,0-.16,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,22.8,1ZM38.09,9.14V8.52H31.18v.62a5.05,5.05,0,0,1,1.44.28c.22.1.32.35.32.75a13.35,13.35,0,0,1-.54,2.54,19.13,19.13,0,0,1-.54,1.87A1.85,1.85,0,0,1,31,15.66a3.77,3.77,0,0,1-1.78.35A3.71,3.71,0,0,1,27,15.38c-1.09-.77-1.64-2.13-1.64-4.08a13.74,13.74,0,0,1,1.78-6.69q2.05-3.72,5-3.72a2.93,2.93,0,0,1,3,1.86,6.09,6.09,0,0,1,.4,2.48l.69.08L37.44,0h-.71a2.44,2.44,0,0,1-.41.53.82.82,0,0,1-.58.2A9.14,9.14,0,0,1,34.33.36,9.23,9.23,0,0,0,31.73,0a9.4,9.4,0,0,0-7.46,3.42,10.46,10.46,0,0,0-2.65,7,5.88,5.88,0,0,0,2.2,4.83,7.77,7.77,0,0,0,5,1.64A13.06,13.06,0,0,0,32,16.52a14.26,14.26,0,0,0,2.33-.75l.67-.3,1.2-4.36a4.15,4.15,0,0,1,.62-1.59A2.28,2.28,0,0,1,38.09,9.14ZM50.36,1a3.36,3.36,0,0,1,1.31.27,1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.7-.27,1.13L50,11.48,44.76.39H39.93V1a3.49,3.49,0,0,1,1.12.2,1.51,1.51,0,0,1,.74.85l.1.25L39.2,12.16a12.62,12.62,0,0,1-1.09,2.93,1.86,1.86,0,0,1-1.35.73v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.21,1.21,0,0,1-.63-1.17,4.72,4.72,0,0,1,0-.64q.1-.52.39-1.59l2.39-8.6,6.23,13.28h.6L52.84,4.66a15.29,15.29,0,0,1,1-2.78A1.52,1.52,0,0,1,55,1.05l.34,0V.39H50.36Zm22.33,13.8a.66.66,0,0,1,0-.15c0-.05,0-.16.07-.34l.2-.83L75.91,2.73a2.43,2.43,0,0,1,.79-1.39A2.78,2.78,0,0,1,77.86,1V.39H70.71V1A4.45,4.45,0,0,1,72,1.2a.81.81,0,0,1,.47.83,2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74L71.07,7.5h-5.7l1.29-4.77a2.27,2.27,0,0,1,.73-1.33A4.36,4.36,0,0,1,69.08,1V.39H61.47V1a4.73,4.73,0,0,1,1.42.25c.22.11.33.36.33.77a2.93,2.93,0,0,1-.08.58c0,.24-.1.48-.17.73L60,14.1a2.73,2.73,0,0,1-.65,1.29,2.47,2.47,0,0,1-1.3.43v.62h7.15v-.62a5.13,5.13,0,0,1-1.42-.24c-.21-.1-.31-.34-.31-.72a3,3,0,0,1,0-.57c0-.16.1-.43.19-.8l1.35-4.94h5.7L69.27,14.1a2.21,2.21,0,0,1-.74,1.33,4.77,4.77,0,0,1-1.69.39v.62h7.63v-.62a4.72,4.72,0,0,1-1.25-.17A.82.82,0,0,1,72.69,14.81Zm13.38.25a10.28,10.28,0,0,1-3.72.61,1.86,1.86,0,0,1-1.08-.21.67.67,0,0,1-.26-.54,2.23,2.23,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.51,5.51,0,0,1,2.75.47,2,2,0,0,1,.7,1.75c0,.11,0,.24,0,.41s0,.37-.07.59l.66.12,1.78-6.56L87.85,5a4.75,4.75,0,0,1-1.64,2.12,10.13,10.13,0,0,1-3.27.41l1.43-5.33a1.56,1.56,0,0,1,.45-.86,2.07,2.07,0,0,1,1.23-.23c1.86,0,3.1.41,3.71,1.23a4.32,4.32,0,0,1,.56,2.47L91,5,92,.39H79.06V1a4.75,4.75,0,0,1,1.43.25c.21.11.32.36.32.77a2.73,2.73,0,0,1-.07.57c0,.22-.11.47-.18.74l-3,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62H89l1.41-4.66-.58-.11A7.22,7.22,0,0,1,86.07,15.06ZM114.32,2.23l-1.43,5.33a10.13,10.13,0,0,0,3.27-.41A4.75,4.75,0,0,0,117.8,5l.67.08-1.78,6.56-.66-.12c0-.22.06-.42.07-.59s0-.3,0-.41a2,2,0,0,0-.71-1.75,5.51,5.51,0,0,0-2.75-.47l-1.58,5.86a3.38,3.38,0,0,0-.09.41,2.23,2.23,0,0,0,0,.32.67.67,0,0,0,.26.54,1.86,1.86,0,0,0,1.08.21,10.28,10.28,0,0,0,3.72-.61,7.22,7.22,0,0,0,3.73-3.39l.58.11-1.41,4.66h-18L98.33,8.51h-.68l-1.42,5-.2.83,0,.2a1.77,1.77,0,0,0,0,.23c0,.43.1.7.31.8a4.51,4.51,0,0,0,1.43.26v.62H90.59v-.62a2.58,2.58,0,0,0,1.26-.42,2.4,2.4,0,0,0,.68-1.29l3-10.77.15-.57a4.09,4.09,0,0,0,.1-.79c0-.38-.11-.62-.32-.73A5.3,5.3,0,0,0,94,1V.39h6.6A10.58,10.58,0,0,1,104,.82a3,3,0,0,1,2.24,3.05,4,4,0,0,1-.38,1.6A4.06,4.06,0,0,1,104.62,7a5.32,5.32,0,0,1-1.45.8c-.33.11-.84.25-1.54.42.08.24.13.4.16.46l1.85,5.42a2.81,2.81,0,0,0,.8,1.38,2.42,2.42,0,0,0,1.23.32,2.64,2.64,0,0,0,1.22-.41,2.47,2.47,0,0,0,.68-1.29l2.94-10.77c.07-.27.13-.52.18-.74a2.73,2.73,0,0,0,.07-.57c0-.41-.11-.66-.32-.77A4.75,4.75,0,0,0,109,1V.39h12.93l-1,4.56-.64-.11a4.39,4.39,0,0,0-.57-2.47c-.61-.82-1.85-1.23-3.71-1.23a2.07,2.07,0,0,0-1.23.23A1.7,1.7,0,0,0,114.32,2.23ZM101.5,6.64a4.76,4.76,0,0,0,.77-1.31,4.68,4.68,0,0,0,.36-1.84,2.72,2.72,0,0,0-.5-1.67,2,2,0,0,0-1.7-.66.94.94,0,0,0-.71.22,1.81,1.81,0,0,0-.39.85L97.88,7.72a10.33,10.33,0,0,0,1.91-.16A3,3,0,0,0,101.5,6.64Z',opacity:1,strokeColor:'',fillColor:'#192760',width:121.306,height:16.899,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'Accepted':{stampCollection={iconName:'Accepted',// eslint-disable-next-line max-len
pathdata:'M22.409294,0.00021190348 C22.64747,0.0056831966 22.875833,0.11701412 23.023336,0.32638185 23.631345,1.1873664 25.36437,2.8183636 27.4584,4.1123583 28.000408,4.4483535 28.015407,5.227338 27.477398,5.5713293 23.803344,7.9272954 12.881201,15.464245 9.4751583,23.800168 9.2091556,24.452168 8.3321453,24.542164 7.9521352,23.95016 6.0691143,21.014182 1.8990528,14.526234 0.095028103,11.832258 -0.13796928,11.485277 0.081027784,11.023275 0.49603404,10.97927 1.9670546,10.824272 4.8490969,10.421291,6.5811144,9.5293013 6.9811216,9.3233086 7.4691268,9.5782811 7.5601316,10.019287 7.847138,11.400286 8.4021459,13.83224 8.952148,14.781236 8.952148,14.781236 16.385246,3.2303471 21.985326,0.10638282 22.119951,0.031756414 22.266389,-0.003070501 22.409294,0.00021190348 z',opacity:1,strokeColor:'',fillColor:'#516c30',width:27.873,height:24.346,stampFillColor:'#e6eddf',stampStrokeColor:''};}break;case'Rejected':{stampCollection={iconName:'Rejected',// eslint-disable-next-line max-len
pathdata:'M3.8779989,0 L11.294,7.4140023 18.710001,0 22.588001,3.8779911 15.172998,11.293032 22.588001,18.707033 18.710001,22.586 11.294,15.169985 3.8779989,22.586 0,18.707033 7.4150017,11.293032 0,3.8779911 z',opacity:1,strokeColor:'',fillColor:'#8a251a',width:22.588,height:22.586,stampFillColor:'#f6dedd',stampStrokeColor:''};}break;case'Rejected_with_border':{stampCollection={iconName:'Rejected_with_border',// eslint-disable-next-line max-len
pathdata:'M3.8779989,0 L11.294,7.4140023 18.710001,0 22.588001,3.8779911 15.172998,11.293032 22.588001,18.707033 18.710001,22.586 11.294,15.169985 3.8779989,22.586 0,18.707033 7.4150017,11.293032 0,3.8779911 z',opacity:1,strokeColor:'',fillColor:'#192760',width:22.588,height:24.346,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'NotApproved':case'Not Approved':{stampCollection={iconName:'Not Approved',// eslint-disable-next-line max-len
pathdata:'M0,19.46a1.56,1.56,0,0,0,1.16-.9A19.84,19.84,0,0,0,2.1,15L4.42,2.84l-.09-.3a1.82,1.82,0,0,0-.64-1.06,2.41,2.41,0,0,0-1-.24V.48H6.88l4.49,13.64L13,5.78c.09-.52.17-1,.22-1.39a10.11,10.11,0,0,0,.13-1.34,1.83,1.83,0,0,0-.49-1.48,2.49,2.49,0,0,0-1.13-.33V.48H16v.76l-.29.06a1.42,1.42,0,0,0-1,1,23.7,23.7,0,0,0-.84,3.42L11,20.71h-.51L5.1,4.38,3,15c-.17.87-.28,1.53-.33,2a5.32,5.32,0,0,0,0,.79,1.69,1.69,0,0,0,.54,1.44,2.48,2.48,0,0,0,1.1.32v.76H0ZM17.73,4.53C19.54,1.51,21.55,0,23.79,0a4.4,4.4,0,0,1,3.66,1.92,8.52,8.52,0,0,1,1.43,5.19,17.56,17.56,0,0,1-2.53,9.07q-2.7,4.61-6.21,4.6a4.24,4.24,0,0,1-3.6-1.92,8.6,8.6,0,0,1-1.39-5.14A17.68,17.68,0,0,1,17.73,4.53ZM18.37,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29,16.41,16.41,0,0,0,2.06-4.93,35.53,35.53,0,0,0,1.06-4.83A28.26,28.26,0,0,0,25.9,4.6a5.86,5.86,0,0,0-.52-2.55A1.7,1.7,0,0,0,23.78,1Q21.2,1,19.45,7.53a33,33,0,0,0-1.33,8.26A8.15,8.15,0,0,0,18.37,18Zm11.08,1.48a2.34,2.34,0,0,0,1.3-.26,3,3,0,0,0,.85-1.85l3-15.85A3.54,3.54,0,0,0,32,2.56a8,8,0,0,0-1.82,3.16l-.53-.2.8-5H41.81l-.74,5.66-.54-.07c0-1.92-.41-3.24-1.13-3.94a2.6,2.6,0,0,0-1.74-.63L34.79,16.6l-.17,1a2.43,2.43,0,0,0,0,.33,2.26,2.26,0,0,0,0,.26c0,.5.11.82.33.95a3.94,3.94,0,0,0,1.39.3v.76H29.45Zm26.65.76H50.18v-.71a2.28,2.28,0,0,0,1.25-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.2-2.15H47l-1.2,3c-.08.2-.15.42-.22.66a2.84,2.84,0,0,0-.09.69c0,.41.08.67.25.78a2.91,2.91,0,0,0,1.08.3v.71H42.79v-.71a2.44,2.44,0,0,0,.85-.53,5.59,5.59,0,0,0,.9-1.56L52.21.07h.53l2,16.88A5.46,5.46,0,0,0,55.2,19a1.36,1.36,0,0,0,.9.43Zm-4.76-7.31-.76-7.18-3,7.18Zm4.95,6.53a1.82,1.82,0,0,0,1-.5,3.56,3.56,0,0,0,.58-1.59L60.42,4.11c.06-.3.1-.6.15-.9a5.46,5.46,0,0,0,.06-.72c0-.52-.13-.86-.4-1a2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.26.73,1.9,2.07,1.9,4a5.81,5.81,0,0,1-1.54,4.22,5.32,5.32,0,0,1-4,1.58l-.59,0-1.2-.11L61,16.6l-.17,1a2.72,2.72,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29c0,.5.09.81.28.94a3.26,3.26,0,0,0,1.23.31v.76h-6Zm6-9.67.38.06H63a3,3,0,0,0,1.62-.36,2.87,2.87,0,0,0,1-1.18,7.28,7.28,0,0,0,.6-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.44,1.44,0,0,0-1.39-.79.71.71,0,0,0-.65.28,3.7,3.7,0,0,0-.32,1Zm5.61,9.69A1.86,1.86,0,0,0,69,18.94a3.54,3.54,0,0,0,.59-1.59L72.15,4.11q.09-.45.15-.9a5.73,5.73,0,0,0,.07-.72,1.1,1.1,0,0,0-.41-1,2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.27.73,1.9,2.07,1.9,4a5.77,5.77,0,0,1-1.54,4.22,5.31,5.31,0,0,1-4,1.58l-.6,0-1.2-.11L72.74,16.6l-.17,1a2.72,2.72,0,0,0,0,.3c0,.1,0,.19,0,.29,0,.5.1.81.29.94a3.15,3.15,0,0,0,1.23.31v.76h-6.1Zm6.12-9.69.38.06h.33a3,3,0,0,0,1.62-.36,3,3,0,0,0,1-1.18,7.67,7.67,0,0,0,.59-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.43,1.43,0,0,0-1.38-.79.73.73,0,0,0-.66.28,3.7,3.7,0,0,0-.32,1Zm5.57,9.69a1.9,1.9,0,0,0,1.09-.52,3.56,3.56,0,0,0,.58-1.59L83.84,4.11c0-.27.09-.51.13-.71a7.08,7.08,0,0,0,.09-1c0-.47-.1-.77-.28-.9a3.53,3.53,0,0,0-1.22-.3V.48h5.68a6.57,6.57,0,0,1,3,.53q1.92,1,1.92,3.75a6.79,6.79,0,0,1-.32,2,5.23,5.23,0,0,1-1.08,1.9,4.56,4.56,0,0,1-1.25,1,11.62,11.62,0,0,1-1.33.52c.07.3.12.49.14.57l1.59,6.66a4.07,4.07,0,0,0,.69,1.7,1.72,1.72,0,0,0,1.13.41v.76H88.52l-2.23-9.76h-.58L84.49,16.6l-.17,1a1,1,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28c0,.53.09.86.26,1a3.11,3.11,0,0,0,1.24.32v.76H79.63ZM87.55,9.3A2.59,2.59,0,0,0,89,8.17a7.24,7.24,0,0,0,.66-1.62A8.18,8.18,0,0,0,90,4.29a4.32,4.32,0,0,0-.43-2,1.5,1.5,0,0,0-1.45-.81.71.71,0,0,0-.62.26,2.78,2.78,0,0,0-.33,1.05L85.91,9.5A6.63,6.63,0,0,0,87.55,9.3Zm8.72-4.77Q99,0,102.32,0A4.37,4.37,0,0,1,106,1.92a8.46,8.46,0,0,1,1.44,5.19,17.58,17.58,0,0,1-2.54,9.07q-2.7,4.61-6.21,4.6a4.27,4.27,0,0,1-3.6-1.92,8.67,8.67,0,0,1-1.38-5.14A17.68,17.68,0,0,1,96.27,4.53ZM96.9,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29A16.63,16.63,0,0,0,103,13.54a37.1,37.1,0,0,0,1.06-4.83,29.49,29.49,0,0,0,.38-4.11,5.86,5.86,0,0,0-.51-2.55A1.71,1.71,0,0,0,102.31,1C100.6,1,99.15,3.17,98,7.53a33.42,33.42,0,0,0-1.33,8.26A8.57,8.57,0,0,0,96.9,18ZM114.35.48v.76a2.57,2.57,0,0,0-1.08.17,1.07,1.07,0,0,0-.5,1,2.53,2.53,0,0,0,0,.28,2.64,2.64,0,0,0,0,.28l1.07,11.76L117.77,6c.31-.71.59-1.41.84-2.11A5.25,5.25,0,0,0,119,2.19a.85.85,0,0,0-.38-.81,3.09,3.09,0,0,0-.95-.14V.48h4v.76a2.08,2.08,0,0,0-.73.45,5.35,5.35,0,0,0-.82,1.4l-7.79,17.69h-.66L110,5.74A22,22,0,0,0,109.46,2c-.16-.39-.58-.62-1.28-.71V.48Zm5.15,19a1.83,1.83,0,0,0,1.08-.52,3.42,3.42,0,0,0,.59-1.59l2.54-13.24c.06-.34.11-.64.15-.92a4.83,4.83,0,0,0,.06-.7c0-.5-.09-.81-.28-.94a3.14,3.14,0,0,0-1.22-.31V.48h11.12l-.87,5.6L132.11,6a7,7,0,0,0-.49-3c-.52-1-1.59-1.51-3.19-1.51-.55,0-.9.09-1.06.28A2.44,2.44,0,0,0,127,2.74L125.76,9.3a6.21,6.21,0,0,0,2.81-.51A6,6,0,0,0,130,6.18l.58.1L129,14.35l-.56-.14c0-.28,0-.52,0-.73s0-.37,0-.51a2.92,2.92,0,0,0-.61-2.15,3.55,3.55,0,0,0-2.37-.57l-1.36,7.2a4.79,4.79,0,0,0-.07.51,3.28,3.28,0,0,0,0,.39,1,1,0,0,0,.22.66,1.24,1.24,0,0,0,.93.26,6.43,6.43,0,0,0,3.21-.75,7.67,7.67,0,0,0,3.21-4.17l.5.13-1.22,5.74H119.5Zm12.79,0a1.87,1.87,0,0,0,1-.41,3.23,3.23,0,0,0,.71-1.71L136.5,4.11c.07-.38.13-.69.17-1a5.89,5.89,0,0,0,.05-.67c0-.5-.1-.81-.29-.94a3.32,3.32,0,0,0-1.22-.31V.48h6a5.35,5.35,0,0,1,4.63,2.22,10.11,10.11,0,0,1,1.58,6,13.3,13.3,0,0,1-2.34,7.84,8,8,0,0,1-6.86,3.7h-5.93ZM143.87,3.39a2.84,2.84,0,0,0-2.79-2,1.08,1.08,0,0,0-.91.31,1.93,1.93,0,0,0-.34.83L137,17.44a3.1,3.1,0,0,0-.06.39c0,.11,0,.21,0,.3a1.22,1.22,0,0,0,.24.84,1.26,1.26,0,0,0,.9.26q3.67,0,5.33-5.42a23.91,23.91,0,0,0,1-6.94A9.45,9.45,0,0,0,143.87,3.39Z',opacity:1,strokeColor:'',fillColor:'#8a251a',width:147.425,height:20.783,stampFillColor:'#f6dedd',stampStrokeColor:''};}break;case'Draft':{stampCollection={iconName:'Draft',// eslint-disable-next-line max-len
pathdata:'M24.92,3Q22,.46,16.4.46h-11v.87a9.38,9.38,0,0,1,2.24.35q.54.23.54,1.08a3.24,3.24,0,0,1-.1.76c-.07.29-.17.65-.31,1.08L3.08,19.69a3.26,3.26,0,0,1-1.32,1.95A4.67,4.67,0,0,1,0,22.1V23H10.91q7.8,0,12.61-4.22a11.56,11.56,0,0,0,4.32-8.94A8.58,8.58,0,0,0,24.92,3ZM20.41,15.66a10.18,10.18,0,0,1-9.8,6.18A3.18,3.18,0,0,1,9,21.54a1,1,0,0,1-.46-.95,2.47,2.47,0,0,1,0-.35,3,3,0,0,1,.1-.44l5.24-17a1.91,1.91,0,0,1,.62-.95,2.81,2.81,0,0,1,1.66-.35c2.44,0,4.15.76,5.15,2.27a7.29,7.29,0,0,1,.94,4A17.63,17.63,0,0,1,20.41,15.66ZM49.75,9.74a5.84,5.84,0,0,0,2-2.16,5.1,5.1,0,0,0,.59-2.24c0-2.1-1.18-3.53-3.54-4.27A18.67,18.67,0,0,0,43.36.46H32.92v.87a8.79,8.79,0,0,1,2.24.35c.35.14.52.48.52,1a5.36,5.36,0,0,1-.17,1.11c-.06.23-.14.5-.23.8L30.61,19.7a3.26,3.26,0,0,1-1.08,1.81,4.44,4.44,0,0,1-2,.59V23H38.85V22.1a8.54,8.54,0,0,1-2.28-.36c-.32-.15-.49-.53-.49-1.13,0-.11,0-.21,0-.32a1.15,1.15,0,0,1,.06-.28l.31-1.16,2.25-7h1.07L43.89,23h7.64V22.1a4.27,4.27,0,0,1-2.07-.47,3.91,3.91,0,0,1-1.27-1.93l-2.92-7.6a4.67,4.67,0,0,1-.25-.65c1.1-.23,1.91-.42,2.43-.59A8.49,8.49,0,0,0,49.75,9.74ZM46,7.39a6.73,6.73,0,0,1-1.21,1.84,5,5,0,0,1-2.72,1.29,19.56,19.56,0,0,1-3,.23L41.38,3A2.54,2.54,0,0,1,42,1.85a1.76,1.76,0,0,1,1.14-.31,3.38,3.38,0,0,1,2.69.93,3.52,3.52,0,0,1,.79,2.34A5.94,5.94,0,0,1,46,7.39Zm27.9,11.85L70.29,0h-1L55.21,19.78a6.61,6.61,0,0,1-1.66,1.78,5.3,5.3,0,0,1-1.55.6V23h7.45v-.81a8,8,0,0,1-2-.34.85.85,0,0,1-.47-.89,2,2,0,0,1,.17-.79,5.32,5.32,0,0,1,.4-.75L59.8,16H68c.22,1.44.35,2.25.37,2.45a16,16,0,0,1,.2,1.81,1.51,1.51,0,0,1-.67,1.47,6.38,6.38,0,0,1-2.31.46V23H77.1v-.81a4.28,4.28,0,0,1-2.28-.55A4.47,4.47,0,0,1,73.93,19.24ZM60.7,14.64l5.62-8.19,1.4,8.19ZM84,.46h20.2l-1.61,6.39-1-.15a5.61,5.61,0,0,0-.88-3.43Q99.2,1.52,94.86,1.51a3.56,3.56,0,0,0-1.76.3A2.05,2.05,0,0,0,92.34,3L90.1,10.5A16.53,16.53,0,0,0,95,9.91c.77-.33,1.62-1.32,2.56-3l1.06.12-2.82,9.2-1-.17c0-.33.08-.61.1-.85s0-.43,0-.56a2.76,2.76,0,0,0-1-2.38c-.66-.49-2.07-.73-4.23-.73l-2.5,8.22a3.56,3.56,0,0,0-.09.39,1.55,1.55,0,0,0,0,.37,1.32,1.32,0,0,0,1,1.33,5.52,5.52,0,0,0,1.78.21V23H78.58V22.1a4.35,4.35,0,0,0,2-.61,3.33,3.33,0,0,0,1.06-1.8L86.32,4.6c.09-.31.16-.58.23-.81a5.05,5.05,0,0,0,.16-1.1c0-.53-.17-.87-.52-1A8.7,8.7,0,0,0,84,1.33Zm24.1,0h20.89l-1.37,6.46-1-.08c-.07-2.2-.76-3.69-2.09-4.49a6.61,6.61,0,0,0-3.2-.72L116,18.84,115.7,20a2.63,2.63,0,0,0-.07.38,1.51,1.51,0,0,0,0,.3c0,.57.2.94.61,1.08a11.19,11.19,0,0,0,2.56.34V23H106.2V22.1a6.49,6.49,0,0,0,2.4-.3,3.19,3.19,0,0,0,1.56-2.1l5.58-18.07a9.07,9.07,0,0,0-4.83,1.2,9.52,9.52,0,0,0-3.34,3.61l-1-.23Z',opacity:1,strokeColor:'',fillColor:'#192760',width:128.941,height:22.97,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'Final':{stampCollection={iconName:'Final',// eslint-disable-next-line max-len
pathdata:'M24.94,6l-1.06-.13a4.37,4.37,0,0,0-.91-3q-1.51-1.54-6-1.54a4.28,4.28,0,0,0-1.83.26,1.8,1.8,0,0,0-.78,1.08L12,9.21a20.26,20.26,0,0,0,5.15-.52A6.49,6.49,0,0,0,19.8,6.1l1.1.1L18,14.27l-1.09-.15a6.34,6.34,0,0,0,.11-.74c0-.22,0-.38,0-.5a2.26,2.26,0,0,0-1-2.09c-.68-.42-2.15-.63-4.39-.63L9,17.37a3.09,3.09,0,0,0-.1.34,1.22,1.22,0,0,0,0,.32,1.18,1.18,0,0,0,1,1.17,7,7,0,0,0,1.86.18v.77H0v-.77a5.14,5.14,0,0,0,2.11-.53,3,3,0,0,0,1.1-1.58L8.06,4c.09-.27.17-.5.23-.7a3.74,3.74,0,0,0,.18-1,.83.83,0,0,0-.55-.89,10.94,10.94,0,0,0-2.33-.3V.4h21Zm8.54,12.11a1.49,1.49,0,0,1,0-.28,2.46,2.46,0,0,1,.07-.29l.3-1L38.76,3.29a2.93,2.93,0,0,1,1.09-1.6A5.42,5.42,0,0,1,42,1.17V.4H30.17v.77a10.52,10.52,0,0,1,2.34.31.88.88,0,0,1,.56.94,2.58,2.58,0,0,1-.11.67c-.07.26-.18.57-.32,1L27.79,17.28a2.94,2.94,0,0,1-1.12,1.59,5.28,5.28,0,0,1-2.09.51v.77H36.36v-.77A10.22,10.22,0,0,1,34,19.07.89.89,0,0,1,33.48,18.12ZM66.19,2.24a2.53,2.53,0,0,1,1.87-1l.56-.06V.4H60.5v.77a8,8,0,0,1,2.16.33,1.47,1.47,0,0,1,1,1.48,5.61,5.61,0,0,1-.25,1.34c-.11.4-.25.87-.43,1.38l-3.08,8.35L51.26.4h-8v.77a8.44,8.44,0,0,1,1.86.24,2.26,2.26,0,0,1,1.22,1.05l.17.31L42.11,14.88a13.74,13.74,0,0,1-1.8,3.61,3.36,3.36,0,0,1-2.22.89v.77h8.23v-.77a7.75,7.75,0,0,1-2.1-.31,1.45,1.45,0,0,1-1-1.44,3.56,3.56,0,0,1,.1-.79,16.15,16.15,0,0,1,.64-2L47.85,4.31,58.11,20.64h1l5.5-15A15.48,15.48,0,0,1,66.19,2.24Zm23,17.13v.78H78.08v-.71A7.47,7.47,0,0,0,80.49,19a1.25,1.25,0,0,0,.7-1.29A13.26,13.26,0,0,0,81,16.16c0-.18-.16-.89-.39-2.15H72.06l-2.3,3a3.7,3.7,0,0,0-.42.66,1.54,1.54,0,0,0-.18.69.74.74,0,0,0,.49.78,10.28,10.28,0,0,0,2.06.3v.71H63.94v-.71a6.43,6.43,0,0,0,1.63-.53,6.63,6.63,0,0,0,1.72-1.56L82,0h1l3.78,16.88A3.69,3.69,0,0,0,87.7,19,3.53,3.53,0,0,0,89.24,19.37Zm-8.93-6.53L78.86,5.65,73,12.84Zm32.8,1.44a11.51,11.51,0,0,1-5.23,3.88,21.36,21.36,0,0,1-7,1A4.88,4.88,0,0,1,99.22,19a.74.74,0,0,1-.58-.71,2.33,2.33,0,0,1,0-.48c0-.13.08-.28.13-.43L104,3.29a2.72,2.72,0,0,1,1.19-1.64,9.4,9.4,0,0,1,2.79-.48V.4H95.4v.77a10.42,10.42,0,0,1,2.34.31.88.88,0,0,1,.56.94,2.58,2.58,0,0,1-.11.67c-.07.25-.17.57-.31.94L93,17.27a2.92,2.92,0,0,1-1.12,1.6,4.59,4.59,0,0,1-1.71.47v.81h21.55l2.32-5.74Z',opacity:1,strokeColor:'',fillColor:'#516c30',width:114.058,height:20.639,stampFillColor:'#e6eddf',stampStrokeColor:''};}break;case'Completed':{stampCollection={iconName:'Completed',// eslint-disable-next-line max-len
pathdata:'M16.37,0,15.08,6.9l-.79-.17c0-.41,0-.66,0-.73a2.73,2.73,0,0,0,0-.32,5.33,5.33,0,0,0-.94-3.47A3,3,0,0,0,11,1.07c-2,0-3.68,1.51-5.13,4.55a18.84,18.84,0,0,0-2,8.29q0,3.06,1.2,4.2a3.82,3.82,0,0,0,2.64,1.13,5.3,5.3,0,0,0,3.51-1.43,10.75,10.75,0,0,0,1.78-2.09l.77.65a9.32,9.32,0,0,1-3.12,3.35A7,7,0,0,1,7,20.81a6.66,6.66,0,0,1-5-2.08,7.72,7.72,0,0,1-2-5.57A14.57,14.57,0,0,1,3.05,3.92Q6.1,0,10.29,0A8.92,8.92,0,0,1,13,.43a9.09,9.09,0,0,0,1.65.43.72.72,0,0,0,.6-.23A2.55,2.55,0,0,0,15.6,0ZM32.83,7.11a15.24,15.24,0,0,1-3.11,9.07q-3.31,4.61-7.63,4.6a5.63,5.63,0,0,1-4.42-1.92A7.47,7.47,0,0,1,16,13.72a15.27,15.27,0,0,1,3.18-9.19Q22.46,0,26.57,0a5.82,5.82,0,0,1,4.5,1.92A7.35,7.35,0,0,1,32.83,7.11ZM29.16,4.6a4.92,4.92,0,0,0-.63-2.55,2.14,2.14,0,0,0-2-1.06Q23.4,1,21.24,7.53a27.45,27.45,0,0,0-1.63,8.26A6.68,6.68,0,0,0,19.92,18a2.24,2.24,0,0,0,2.2,1.78,3.71,3.71,0,0,0,2.73-1.29,15,15,0,0,0,2.54-4.93,30.56,30.56,0,0,0,1.3-4.83A23,23,0,0,0,29.16,4.6Zm21.2,13.62a3.83,3.83,0,0,1,.08-.75,8.6,8.6,0,0,1,.19-.88L53.75,3.31a3,3,0,0,1,.85-1.67,2.72,2.72,0,0,1,1.21-.4V.48H50.42L42.66,14.39,41.21.48h-5.8v.76a4.65,4.65,0,0,1,1.45.21c.26.11.38.37.38.78a4.57,4.57,0,0,1-.08.75c-.06.28-.13.61-.23,1L34.34,15a16.85,16.85,0,0,1-1.16,3.65,1.9,1.9,0,0,1-1.42.86v.76h5.3v-.76a3.22,3.22,0,0,1-1.32-.29A1.48,1.48,0,0,1,35,17.74a8.32,8.32,0,0,1,.17-1.42c.07-.37.17-.82.3-1.37L38.06,4.23l1.71,16.38h.71L50,3.76l-3.2,13.58A2.84,2.84,0,0,1,46,19a4.06,4.06,0,0,1-1.76.49v.76h7.93v-.76a4.79,4.79,0,0,1-1.49-.31Q50.36,19,50.36,18.22ZM67.69,9.29a7.39,7.39,0,0,1-4.89,1.58l-.73,0-1.48-.11L59.21,16.6l-.21,1a1,1,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.12.81.35.94a4.74,4.74,0,0,0,1.51.31v.76H53.31v-.76a2.52,2.52,0,0,0,1.33-.52,3.18,3.18,0,0,0,.72-1.59L58.48,4.11q.1-.45.18-.9a4.48,4.48,0,0,0,.08-.72,1,1,0,0,0-.49-1,4.36,4.36,0,0,0-1.36-.23V.48h7.29a7.29,7.29,0,0,1,3.07.57,4,4,0,0,1,2.33,4A5.22,5.22,0,0,1,67.69,9.29Zm-1.8-5a3.65,3.65,0,0,0-.51-2,1.85,1.85,0,0,0-1.7-.79,1,1,0,0,0-.8.28,3.27,3.27,0,0,0-.4,1l-1.66,7,.47.06h.41a4.37,4.37,0,0,0,2-.36,3.14,3.14,0,0,0,1.2-1.18,6.51,6.51,0,0,0,.74-2A9.87,9.87,0,0,0,65.89,4.25Zm16.9,10.1a8.71,8.71,0,0,1-3.35,3.88,9.36,9.36,0,0,1-4.53,1,2.15,2.15,0,0,1-1-.21.75.75,0,0,1-.37-.71,3.18,3.18,0,0,1,0-.47c0-.14,0-.28.08-.44l3.3-14.08a2.94,2.94,0,0,1,.77-1.64,4.47,4.47,0,0,1,1.79-.48V.48h-8v.76a4.8,4.8,0,0,1,1.5.31c.23.13.35.44.35.94a4.36,4.36,0,0,1-.06.67c0,.26-.12.57-.21,1L69.9,17.34a3.18,3.18,0,0,1-.72,1.6,2.53,2.53,0,0,1-1.34.52v.76H81.91l1.49-5.74ZM85.73,1.24a4.59,4.59,0,0,1,1.5.31c.23.13.34.44.34.94a3.84,3.84,0,0,1-.07.7c0,.28-.11.58-.19.92L84.2,17.35a3.18,3.18,0,0,1-.72,1.59,2.27,2.27,0,0,1-1.06.47h-.07v.8H96.2l1.5-5.74-.62-.13a8.14,8.14,0,0,1-3.94,4.17,9.39,9.39,0,0,1-3.94.75A1.75,1.75,0,0,1,88.06,19a.87.87,0,0,1-.27-.66,3.28,3.28,0,0,1,0-.39,5,5,0,0,1,.09-.51l1.67-7.2a5.16,5.16,0,0,1,2.91.57A2.58,2.58,0,0,1,93.24,13c0,.14,0,.31,0,.51s0,.45-.07.73l.7.14,1.88-8.07L95,6.18a5.62,5.62,0,0,1-1.74,2.61,9.05,9.05,0,0,1-3.45.51l1.51-6.56a2.23,2.23,0,0,1,.47-1.06,2,2,0,0,1,1.3-.28c2,0,3.29.5,3.93,1.51a6.13,6.13,0,0,1,.6,3l.68.13L99.4.48H85.73ZM114,6.14l.92-5.66h-14l-1,5,.66.2a7.81,7.81,0,0,1,2.23-3.16,4.91,4.91,0,0,1,3.23-1.06l-3.73,15.85a2.84,2.84,0,0,1-1,1.85,3.48,3.48,0,0,1-1.6.26v.76h8.4v-.76a5.82,5.82,0,0,1-1.71-.3c-.27-.13-.41-.45-.41-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.21-1,3.53-15.1a3.65,3.65,0,0,1,2.14.63c.89.7,1.35,2,1.39,3.94Zm9.44,12.38a9.39,9.39,0,0,1-3.94.75,1.77,1.77,0,0,1-1.14-.26.87.87,0,0,1-.27-.66,3.28,3.28,0,0,1,0-.39,5,5,0,0,1,.09-.51l1.67-7.2a5.12,5.12,0,0,1,2.91.57,2.58,2.58,0,0,1,.75,2.15c0,.14,0,.31,0,.51s0,.45-.07.73l.7.14L126,6.28l-.7-.1a5.78,5.78,0,0,1-1.74,2.61,9.16,9.16,0,0,1-3.46.51l1.51-6.56a2.14,2.14,0,0,1,.48-1.06,2,2,0,0,1,1.3-.28c2,0,3.28.5,3.92,1.51a6,6,0,0,1,.6,3l.68.13,1.08-5.6H116v.76a4.67,4.67,0,0,1,1.51.31c.22.13.34.44.34.94a4,4,0,0,1-.08.7c0,.28-.11.58-.18.92l-3.12,13.24a3.18,3.18,0,0,1-.72,1.59,2.56,2.56,0,0,1-1.34.52v.76h14.06l1.5-5.74-.62-.13A8.14,8.14,0,0,1,123.39,18.52Zm23.32-9.84a11.62,11.62,0,0,1-2.89,7.84,10.6,10.6,0,0,1-8.42,3.7h-7.29v-.76a2.58,2.58,0,0,0,1.18-.41,2.94,2.94,0,0,0,.88-1.71l3.11-13.23c.09-.38.16-.69.21-1a4.49,4.49,0,0,0,.07-.67c0-.5-.12-.81-.36-.94a4.8,4.8,0,0,0-1.5-.31V.48h7.36a7.16,7.16,0,0,1,5.69,2.22A8.72,8.72,0,0,1,146.71,8.68ZM143,6.87a8,8,0,0,0-.64-3.48,3.52,3.52,0,0,0-3.44-2,1.52,1.52,0,0,0-1.11.31,1.75,1.75,0,0,0-.41.83l-3.5,14.9c0,.14,0,.27-.07.39s0,.21,0,.3a1.06,1.06,0,0,0,.3.84,1.75,1.75,0,0,0,1.1.26q4.53,0,6.55-5.42A19.84,19.84,0,0,0,143,6.87Z',opacity:1,strokeColor:'',fillColor:'#516c30',width:146.706,height:20.811,stampFillColor:'#e6eddf',stampStrokeColor:''};}break;case'ForPublicRelease':case'For Public Release':{stampCollection={iconName:'For Public Release',// eslint-disable-next-line max-len
pathdata:'M10.33.48l-.65,5.6L9.27,6a9.74,9.74,0,0,0-.36-3A2.27,2.27,0,0,0,6.57,1.4a.85.85,0,0,0-.71.26,2.67,2.67,0,0,0-.3,1.08L4.65,9.28a3.45,3.45,0,0,0,2-.52,6.65,6.65,0,0,0,1-2.59l.43.1L7,14.34l-.42-.14c0-.29,0-.54,0-.75s0-.38,0-.49a4.17,4.17,0,0,0-.39-2.09,1.91,1.91,0,0,0-1.71-.64l-1,7.21c0,.13,0,.24,0,.35s0,.21,0,.31a1.45,1.45,0,0,0,.38,1.17,1.17,1.17,0,0,0,.72.19v.76H0v-.76a1.31,1.31,0,0,0,.82-.54,4.39,4.39,0,0,0,.42-1.58L3.13,4.11c0-.27.06-.51.09-.71,0-.41.07-.73.07-1a1.34,1.34,0,0,0-.21-.9,2.13,2.13,0,0,0-.91-.3V.48ZM20.5,7.11a22.43,22.43,0,0,1-1.88,9.07q-2,4.61-4.62,4.6a3,3,0,0,1-2.67-1.92,10.91,10.91,0,0,1-1-5.14,22.46,22.46,0,0,1,1.92-9.19Q14.23,0,16.71,0a3.11,3.11,0,0,1,2.72,1.92A10.72,10.72,0,0,1,20.5,7.11ZM18.28,4.6a7.7,7.7,0,0,0-.38-2.55c-.26-.7-.65-1-1.19-1-1.28,0-2.35,2.17-3.22,6.53a43.69,43.69,0,0,0-1,8.26,10.72,10.72,0,0,0,.19,2.2c.24,1.18.69,1.77,1.33,1.77s1.16-.43,1.65-1.29a19.35,19.35,0,0,0,1.54-4.93A48.7,48.7,0,0,0,18,8.71,38.21,38.21,0,0,0,18.28,4.6Zm11.59.16a8.73,8.73,0,0,1-.24,2,5.64,5.64,0,0,1-.8,1.9,3.49,3.49,0,0,1-.93,1,7.31,7.31,0,0,1-1,.52c0,.3.08.49.1.57l1.18,6.66a4.54,4.54,0,0,0,.52,1.7,1.1,1.1,0,0,0,.83.41v.76H26.46l-1.65-9.76h-.43l-.91,6.14-.13,1a2,2,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28,1.57,1.57,0,0,0,.2,1,1.77,1.77,0,0,0,.92.32v.76H19.86v-.76a1.33,1.33,0,0,0,.81-.52,4.35,4.35,0,0,0,.43-1.59L23,4.11c0-.27.07-.51.09-.71a8.23,8.23,0,0,0,.07-1,1.3,1.3,0,0,0-.21-.9,2.08,2.08,0,0,0-.91-.3V.48h4.22A3.79,3.79,0,0,1,28.44,1C29.4,1.66,29.87,2.91,29.87,4.76Zm-2.31-.47a5.77,5.77,0,0,0-.32-2,1.12,1.12,0,0,0-1.09-.81.5.5,0,0,0-.46.26,3.87,3.87,0,0,0-.24,1.05L24.52,9.5a3.73,3.73,0,0,0,1.22-.2,2.1,2.1,0,0,0,1.1-1.13,8.41,8.41,0,0,0,.49-1.62A10.75,10.75,0,0,0,27.56,4.29Zm14.92.78a7.06,7.06,0,0,1-1.14,4.22,3.5,3.5,0,0,1-3,1.58l-.44,0-.89-.11-.84,5.86-.12,1a1.45,1.45,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29,1.38,1.38,0,0,0,.21.94,1.93,1.93,0,0,0,.91.31v.76H32.65v-.76a1.28,1.28,0,0,0,.8-.52,4.3,4.3,0,0,0,.44-1.59L35.77,4.11c0-.3.08-.6.11-.9a5.21,5.21,0,0,0,0-.72,1.29,1.29,0,0,0-.3-1,1.82,1.82,0,0,0-.81-.23V.48h4.4a3,3,0,0,1,1.86.57C42,1.78,42.48,3.12,42.48,5.07Zm-2.23-.82a5.74,5.74,0,0,0-.3-2,1.07,1.07,0,0,0-1-.79.5.5,0,0,0-.49.28,5.11,5.11,0,0,0-.24,1l-1,7,.28.06h.25a1.79,1.79,0,0,0,1.2-.36,2.88,2.88,0,0,0,.73-1.18,10.56,10.56,0,0,0,.44-2A15.74,15.74,0,0,0,40.25,4.25Zm12.91-3V.48H50v.76a1.46,1.46,0,0,1,.82.32A2,2,0,0,1,51.24,3a15,15,0,0,1-.14,1.57q0-.17-.15,1.17l-.89,6.16a29.63,29.63,0,0,1-1,4.77c-.55,1.63-1.31,2.44-2.28,2.44a1.59,1.59,0,0,1-1.38-.77,4.16,4.16,0,0,1-.5-2.23q0-.63.15-2c.06-.5.15-1.14.27-1.93l1.26-8.84a4.13,4.13,0,0,1,.46-1.66,1.66,1.66,0,0,1,1-.46V.48H43.34v.76a2,2,0,0,1,.9.3,1.3,1.3,0,0,1,.21.9,7.27,7.27,0,0,1,0,.75c0,.29-.07.59-.11.92l-1,7.24c-.16,1.14-.27,1.93-.32,2.38a19.16,19.16,0,0,0-.12,2,6.13,6.13,0,0,0,1,3.71,2.93,2.93,0,0,0,2.43,1.33c1.39,0,2.45-.9,3.17-2.69a29.58,29.58,0,0,0,1.23-5.61l1-6.74A24.45,24.45,0,0,1,52.3,2.1,1.22,1.22,0,0,1,53.16,1.24Zm7.14,9.82a5.87,5.87,0,0,1,.68,3,8.55,8.55,0,0,1-1,4.27,3.68,3.68,0,0,1-3.48,1.84H51.82v-.76a1.3,1.3,0,0,0,.72-.4,3.94,3.94,0,0,0,.52-1.71L55,4.1c0-.39.09-.72.12-1s0-.46,0-.6c0-.53-.07-.86-.23-1A1.64,1.64,0,0,0,54,1.24V.48h4.17a3.4,3.4,0,0,1,2.67,1,4.91,4.91,0,0,1,1,3.38,5.33,5.33,0,0,1-1.17,3.61,4.8,4.8,0,0,1-1.68,1.22A4.84,4.84,0,0,1,60.3,11.06Zm-1.66,2.45a3.81,3.81,0,0,0-.73-2.74,2.63,2.63,0,0,0-1.58-.52l-1,7.2a4,4,0,0,0-.05.4c0,.15,0,.32,0,.51a.9.9,0,0,0,.33.82,1.13,1.13,0,0,0,.59.12c1,0,1.67-.87,2.1-2.59A13.54,13.54,0,0,0,58.64,13.51Zm.12-5.29A5.92,5.92,0,0,0,59.4,6.1a12.74,12.74,0,0,0,.13-1.74,6.54,6.54,0,0,0-.29-2.11,1.11,1.11,0,0,0-1.13-.81.49.49,0,0,0-.49.32,3.52,3.52,0,0,0-.23,1l-.94,6.62A7.45,7.45,0,0,0,58,9,1.8,1.8,0,0,0,58.76,8.22Zm11.71,6.14a8.78,8.78,0,0,1-2,3.87,4,4,0,0,1-2.74,1,.89.89,0,0,1-.63-.21.93.93,0,0,1-.22-.7,3.4,3.4,0,0,1,0-.48c0-.14,0-.28,0-.44l2-14.08a3.8,3.8,0,0,1,.47-1.64,1.94,1.94,0,0,1,1.08-.48V.48H63.6v.76a2,2,0,0,1,.91.31,1.36,1.36,0,0,1,.22.94c0,.2,0,.42,0,.67s-.07.57-.13,1L62.68,17.34a4.31,4.31,0,0,1-.44,1.6,1.28,1.28,0,0,1-.8.52v.76h8.5l.9-5.74ZM76.89.48H72.32v.76a1.92,1.92,0,0,1,.9.31c.15.13.22.44.22.94a5.56,5.56,0,0,1,0,.67c0,.26-.07.57-.12,1L71.39,17.35A4.35,4.35,0,0,1,71,18.94a1.33,1.33,0,0,1-.81.52v.76h4.57v-.76a1.81,1.81,0,0,1-.91-.32,1.39,1.39,0,0,1-.21-.94c0-.09,0-.18,0-.28l0-.3.12-1L75.65,3.36a4.43,4.43,0,0,1,.43-1.6,1.3,1.3,0,0,1,.81-.52Zm8.46.15A.38.38,0,0,1,85,.87a4.12,4.12,0,0,1-1-.44A3.51,3.51,0,0,0,82.37,0Q79.84,0,78,3.92a21.42,21.42,0,0,0-1.84,9.24,11.15,11.15,0,0,0,1.2,5.57,3.51,3.51,0,0,0,3.05,2.08,3.15,3.15,0,0,0,2.21-1.09,8.92,8.92,0,0,0,1.89-3.35L84,15.72A11.08,11.08,0,0,1,83,17.81a2.71,2.71,0,0,1-2.12,1.43,2,2,0,0,1-1.59-1.13,8.33,8.33,0,0,1-.74-4.2A29.46,29.46,0,0,1,79.7,5.62Q81,1.08,82.8,1.07c.59,0,1.07.38,1.45,1.14a8,8,0,0,1,.57,3.47,2.73,2.73,0,0,1,0,.32c0,.08,0,.32,0,.73l.48.17L86.05,0h-.47A2.93,2.93,0,0,1,85.35.63Zm21.41,13.73.37.12-.9,5.74H94.72l-1.66-9.76h-.43l-.91,6.14-.13,1c0,.08,0,.16,0,.25s0,.19,0,.28a1.57,1.57,0,0,0,.2,1,1.81,1.81,0,0,0,.92.32v.76H88.11v-.76a1.3,1.3,0,0,0,.81-.52,4.35,4.35,0,0,0,.43-1.59L91.24,4.11c0-.27.07-.51.09-.71a8.23,8.23,0,0,0,.07-1,1.3,1.3,0,0,0-.21-.9,2.08,2.08,0,0,0-.91-.3V.48h4.23A3.81,3.81,0,0,1,96.7,1c1,.65,1.43,1.9,1.43,3.75a8.73,8.73,0,0,1-.24,2,5.66,5.66,0,0,1-.81,1.9,3.49,3.49,0,0,1-.93,1,6.73,6.73,0,0,1-1,.52c0,.3.09.49.1.57l1.18,6.66a4.74,4.74,0,0,0,.52,1.7,1,1,0,0,0,.78.39,1.23,1.23,0,0,0,.78-.5A4.3,4.3,0,0,0,99,17.35l1.88-13.24c.05-.34.09-.64.12-.92a6.28,6.28,0,0,0,0-.7,1.45,1.45,0,0,0-.2-.94,2,2,0,0,0-.91-.31V.48h8.26l-.65,5.6L107.1,6a9.57,9.57,0,0,0-.36-3,2.3,2.3,0,0,0-2.38-1.51c-.41,0-.67.09-.78.28a2.87,2.87,0,0,0-.29,1.06l-.91,6.56a3.57,3.57,0,0,0,2.08-.51,6.59,6.59,0,0,0,1.06-2.61l.42.1-1.14,8.08-.42-.15c0-.28,0-.52.05-.73s0-.37,0-.51a3.6,3.6,0,0,0-.46-2.15,2.14,2.14,0,0,0-1.75-.57l-1,7.2a4.7,4.7,0,0,0-.06.51c0,.16,0,.29,0,.39a1.12,1.12,0,0,0,.17.66.77.77,0,0,0,.69.26,3.77,3.77,0,0,0,2.37-.75A7.71,7.71,0,0,0,106.76,14.36ZM95.09,8.17a7.75,7.75,0,0,0,.49-1.62,10.75,10.75,0,0,0,.23-2.26,5.77,5.77,0,0,0-.32-2,1.11,1.11,0,0,0-1.08-.81.48.48,0,0,0-.46.26,3.44,3.44,0,0,0-.25,1.05L92.78,9.5A3.78,3.78,0,0,0,94,9.3,2.08,2.08,0,0,0,95.09,8.17Zm21.32,6.19a8.67,8.67,0,0,1-2,3.87,4,4,0,0,1-2.73,1,.89.89,0,0,1-.63-.21.93.93,0,0,1-.23-.7c0-.19,0-.35,0-.48s0-.28,0-.44l2-14.08a3.84,3.84,0,0,1,.46-1.64,2,2,0,0,1,1.08-.48V.48h-4.86v.76a2,2,0,0,1,.91.31,1.38,1.38,0,0,1,.21.94,5.56,5.56,0,0,1,0,.67c0,.26-.07.57-.12,1l-1.89,13.23a4.16,4.16,0,0,1-.43,1.6,1.27,1.27,0,0,1-.81.52v.76h8.51l.9-5.74Zm8.64,0a7.71,7.71,0,0,1-2.38,4.16,3.82,3.82,0,0,1-2.38.75.77.77,0,0,1-.69-.26,1.2,1.2,0,0,1-.17-.66c0-.1,0-.23,0-.39a4.7,4.7,0,0,1,.06-.51l1-7.2a2.17,2.17,0,0,1,1.76.57,3.69,3.69,0,0,1,.45,2.15c0,.14,0,.31,0,.51s0,.45,0,.73l.42.15,1.13-8.08-.42-.1a6.79,6.79,0,0,1-1,2.61,3.63,3.63,0,0,1-2.09.51l.91-6.56a2.87,2.87,0,0,1,.29-1.06c.12-.19.38-.28.78-.28A2.3,2.3,0,0,1,125,2.91a9.57,9.57,0,0,1,.36,3l.41.13.65-5.6h-8.26v.76a1.93,1.93,0,0,1,.91.31,1.45,1.45,0,0,1,.2.94,6.28,6.28,0,0,1,0,.7c0,.28-.07.58-.11.92l-1.89,13.24a4.35,4.35,0,0,1-.43,1.59,1.33,1.33,0,0,1-.81.52v.76h8.5l.91-5.74Zm10.29,5.15v.71h-4.65v-.71a1.44,1.44,0,0,0,.93-.41,2.08,2.08,0,0,0,.27-1.29c0-.22,0-.75-.08-1.58,0-.17-.06-.89-.15-2.15h-3.31l-.89,3a5.32,5.32,0,0,0-.16.66,3.4,3.4,0,0,0-.08.69,1.06,1.06,0,0,0,.2.78,1.68,1.68,0,0,0,.79.3v.71h-3v-.71a1.8,1.8,0,0,0,.63-.53,6.45,6.45,0,0,0,.67-1.56L132.19.07h.4L134.06,17a7.15,7.15,0,0,0,.36,2.08A1.13,1.13,0,0,0,135.34,19.51Zm-3.79-6.6L131,5.73l-2.27,7.18Zm9.6-4-1.32-2.09a4.57,4.57,0,0,1-.47-.94,5.12,5.12,0,0,1-.28-1.78,5.57,5.57,0,0,1,.27-1.77c.27-.83.7-1.24,1.29-1.24s1.21.51,1.57,1.54A8.78,8.78,0,0,1,142.65,5l.06,1,.39.1.63-5.91h-.46a2.09,2.09,0,0,1-.25.54.46.46,0,0,1-.41.21.57.57,0,0,1-.24-.05,1.23,1.23,0,0,1-.26-.12l-.39-.24a2.34,2.34,0,0,0-.5-.25,2.41,2.41,0,0,0-.85-.16,2.55,2.55,0,0,0-2.31,1.67,9.11,9.11,0,0,0-.83,4.05,10.47,10.47,0,0,0,1.88,5.5A9.21,9.21,0,0,1,141,16a6.49,6.49,0,0,1-.5,2.63,1.59,1.59,0,0,1-1.43,1.14,1.42,1.42,0,0,1-1-.4,3.55,3.55,0,0,1-.78-1.16,7.09,7.09,0,0,1-.52-1.92c-.05-.43-.1-1.12-.13-2.06l-.44-.06-.55,6.62h.46a4.11,4.11,0,0,1,.25-.82.36.36,0,0,1,.36-.23.47.47,0,0,1,.17,0,2.38,2.38,0,0,1,.27.18l.39.27a3.52,3.52,0,0,0,.84.43,2.48,2.48,0,0,0,.84.15,2.91,2.91,0,0,0,2.63-1.88,9.24,9.24,0,0,0,1-4.21,9.85,9.85,0,0,0-.49-3.24A12.1,12.1,0,0,0,141.15,8.92Zm7.75-7.24c.12-.19.38-.28.78-.28a2.3,2.3,0,0,1,2.38,1.51,9.57,9.57,0,0,1,.36,3l.41.13.65-5.6h-8.26v.76a1.93,1.93,0,0,1,.91.31c.14.13.2.44.2.94a6.28,6.28,0,0,1,0,.7c0,.28-.07.58-.11.92l-1.89,13.24a4.35,4.35,0,0,1-.43,1.59,1.33,1.33,0,0,1-.81.52v.76h8.5l.91-5.74-.38-.12a7.71,7.71,0,0,1-2.38,4.16,3.82,3.82,0,0,1-2.38.75.77.77,0,0,1-.69-.26,1.2,1.2,0,0,1-.17-.66c0-.1,0-.23,0-.39a4.7,4.7,0,0,1,.06-.51l1-7.2a2.17,2.17,0,0,1,1.76.57,3.69,3.69,0,0,1,.45,2.15c0,.14,0,.31,0,.51s0,.45,0,.73l.42.15,1.14-8.08-.43-.1a6.79,6.79,0,0,1-1.05,2.61,3.63,3.63,0,0,1-2.09.51l.91-6.56A2.87,2.87,0,0,1,148.9,1.68Z',opacity:1,strokeColor:'',fillColor:'#192760',width:153.485,height:20.812,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'NotForPublicRelease':case'Not For Public Release':{stampCollection={iconName:'Not For Public Release',// eslint-disable-next-line max-len
pathdata:'M9,2.35q-.21.9-.51,3.48L6.69,21.05H6.38L3.11,4.45,1.85,15.19c-.1.89-.17,1.56-.2,2s0,.55,0,.81A2.39,2.39,0,0,0,2,19.45a1.09,1.09,0,0,0,.67.33v.77H0v-.77a1.22,1.22,0,0,0,.71-.91,33.91,33.91,0,0,0,.57-3.68L2.7,2.88l-.06-.3a2.09,2.09,0,0,0-.39-1.07,1,1,0,0,0-.59-.25V.48H4.2L6.93,14.36l1-8.49c.06-.53.11-1,.14-1.4.06-.63.08-1.08.08-1.37a2.67,2.67,0,0,0-.3-1.5,1.07,1.07,0,0,0-.69-.34V.48H9.73v.78l-.18.06C9.29,1.41,9.09,1.75,9,2.35ZM16.74,2a13.19,13.19,0,0,1,.87,5.28,27.45,27.45,0,0,1-1.54,9.22q-1.65,4.66-3.79,4.67-1.35,0-2.19-1.95a13.31,13.31,0,0,1-.85-5.23A27.59,27.59,0,0,1,10.82,4.6C11.91,1.53,13.15,0,14.51,0,15.41,0,16.16.65,16.74,2Zm-.95,2.73a9.33,9.33,0,0,0-.31-2.59c-.21-.72-.54-1.08-1-1.08-1.05,0-1.92,2.21-2.64,6.64a54.69,54.69,0,0,0-.81,8.4,14.21,14.21,0,0,0,.15,2.23c.2,1.2.57,1.8,1.1,1.8s.95-.43,1.35-1.31a22.84,22.84,0,0,0,1.26-5c.28-1.55.49-3.19.65-4.91S15.79,5.74,15.79,4.68Zm2.3.93.32.21A10.7,10.7,0,0,1,19.52,2.6a1.87,1.87,0,0,1,1.6-1.08L19.27,17.63a4,4,0,0,1-.52,1.88,1,1,0,0,1-.79.27v.77h4.17v-.77a1.72,1.72,0,0,1-.85-.3,1.56,1.56,0,0,1-.2-1,2.44,2.44,0,0,1,0-.27c0-.08,0-.2,0-.33l.11-1L23,1.52A1.31,1.31,0,0,1,24,2.17a8.49,8.49,0,0,1,.69,4l.33.07L25.5.48H18.57ZM28.75.48v.78a1.39,1.39,0,0,1,.74.31,1.44,1.44,0,0,1,.18.9q0,.36-.06,1c0,.2-.05.44-.07.71L28,17.62a5.34,5.34,0,0,1-.35,1.61,1.05,1.05,0,0,1-.67.55v.77H30.7v-.77a.82.82,0,0,1-.6-.2,1.69,1.69,0,0,1-.31-1.18c0-.11,0-.22,0-.32l0-.35.83-7.33a1.42,1.42,0,0,1,1.4.64,5,5,0,0,1,.33,2.13c0,.12,0,.28,0,.5s0,.47,0,.76l.34.15.94-8.21-.35-.1a8.12,8.12,0,0,1-.85,2.64,2.42,2.42,0,0,1-1.64.52l.74-6.65a3.34,3.34,0,0,1,.25-1.1.64.64,0,0,1,.59-.26A1.91,1.91,0,0,1,34.28,3a11.32,11.32,0,0,1,.29,3.06l.34.13.54-5.7Zm15,6.75a27.46,27.46,0,0,1-1.55,9.22q-1.65,4.66-3.79,4.67-1.35,0-2.19-1.95a13.49,13.49,0,0,1-.85-5.23A27.59,27.59,0,0,1,37,4.6Q38.65,0,40.69,0c.91,0,1.65.65,2.23,2A13.17,13.17,0,0,1,43.8,7.23ZM42,4.68a9.3,9.3,0,0,0-.32-2.59c-.21-.72-.53-1.08-1-1.08Q39.12,1,38,7.65a54.69,54.69,0,0,0-.81,8.4,13,13,0,0,0,.16,2.23c.2,1.2.56,1.8,1.09,1.8s1-.43,1.35-1.31a23.28,23.28,0,0,0,1.27-5c.27-1.55.49-3.19.64-4.91S42,5.74,42,4.68ZM50.32,1c.78.66,1.17,1.93,1.17,3.8a11,11,0,0,1-.19,2,7.2,7.2,0,0,1-.66,1.93,3.45,3.45,0,0,1-.77,1,5.58,5.58,0,0,1-.8.52c0,.31.07.51.08.58l1,6.78a5.63,5.63,0,0,0,.42,1.72.85.85,0,0,0,.69.42v.77H48.69l-1.36-9.92H47l-.75,6.25-.1,1c0,.08,0,.16,0,.26v.28a1.94,1.94,0,0,0,.16,1,1.39,1.39,0,0,0,.75.32v.77H43.27v-.77a1.07,1.07,0,0,0,.66-.53,4.83,4.83,0,0,0,.36-1.61L45.84,4.18c0-.28.06-.52.08-.72,0-.42,0-.75,0-1a1.48,1.48,0,0,0-.17-.91,1.39,1.39,0,0,0-.74-.31V.48h3.46A2.67,2.67,0,0,1,50.32,1Zm-.73,3.34a7.2,7.2,0,0,0-.26-2.09c-.18-.55-.47-.83-.89-.83a.4.4,0,0,0-.38.27,4.46,4.46,0,0,0-.2,1.06L47.1,9.65a2.39,2.39,0,0,0,1-.2A2,2,0,0,0,49,8.31a10,10,0,0,0,.4-1.65A12.71,12.71,0,0,0,49.59,4.37Zm11.1-3.3c.77.74,1.16,2.1,1.16,4.09a8.51,8.51,0,0,1-.94,4.28A2.78,2.78,0,0,1,58.48,11h-.36l-.73-.12-.69,6-.11,1c0,.1,0,.2,0,.3s0,.2,0,.3a1.7,1.7,0,0,0,.17.95,1.47,1.47,0,0,0,.75.32v.77H53.77v-.77a1.07,1.07,0,0,0,.66-.53,4.83,4.83,0,0,0,.36-1.61L56.34,4.17l.09-.9c0-.31,0-.55,0-.74a1.58,1.58,0,0,0-.25-1,1.33,1.33,0,0,0-.67-.23V.48h3.62A2.11,2.11,0,0,1,60.69,1.07ZM60,4.32a7,7,0,0,0-.25-2.06c-.17-.53-.45-.8-.84-.8a.4.4,0,0,0-.4.29,6.14,6.14,0,0,0-.2,1L57.5,9.93l.23.06h.21a1.3,1.3,0,0,0,1-.36,3.17,3.17,0,0,0,.6-1.2,12.69,12.69,0,0,0,.36-2A19.64,19.64,0,0,0,60,4.32Zm10.6-3.06V.48H68v.78a1.17,1.17,0,0,1,.68.32A2.43,2.43,0,0,1,69,3.05c0,.32,0,.85-.11,1.6,0-.12,0,.27-.12,1.18l-.73,6.26a36.28,36.28,0,0,1-.8,4.86c-.45,1.65-1.07,2.47-1.87,2.47a1.27,1.27,0,0,1-1.13-.78,5.05,5.05,0,0,1-.41-2.27c0-.43,0-1.1.13-2,.05-.51.12-1.17.21-2l1-9a4.69,4.69,0,0,1,.38-1.69,1.24,1.24,0,0,1,.8-.47V.48H62.55v.78a1.39,1.39,0,0,1,.74.31,1.56,1.56,0,0,1,.17.91c0,.21,0,.47,0,.76s-.06.6-.1.94l-.85,7.36c-.14,1.15-.23,2-.27,2.42-.06.76-.1,1.44-.1,2a7.4,7.4,0,0,0,.81,3.78,2.35,2.35,0,0,0,2,1.35c1.14,0,2-.91,2.6-2.74a35.69,35.69,0,0,0,1-5.7l.79-6.85a30.83,30.83,0,0,1,.58-3.7A1.15,1.15,0,0,1,70.61,1.26Zm5.86,10a7.16,7.16,0,0,1,.56,3.1,10.31,10.31,0,0,1-.86,4.34,2.93,2.93,0,0,1-2.86,1.87h-3.8v-.77a1.07,1.07,0,0,0,.59-.41,4.64,4.64,0,0,0,.43-1.73L72.08,4.17c0-.4.08-.73.1-1s0-.46,0-.61a1.83,1.83,0,0,0-.19-1,1.22,1.22,0,0,0-.73-.28V.48h3.43a2.58,2.58,0,0,1,2.19,1.06A5.92,5.92,0,0,1,77.69,5a6.3,6.3,0,0,1-1,3.67,4.18,4.18,0,0,1-1.39,1.24A4.36,4.36,0,0,1,76.47,11.24Zm-1.36,2.49a4.59,4.59,0,0,0-.6-2.79,2,2,0,0,0-1.3-.52l-.84,7.32c0,.12,0,.25,0,.4s0,.33,0,.52a1.06,1.06,0,0,0,.27.84.77.77,0,0,0,.48.11c.8,0,1.38-.87,1.73-2.63A17.3,17.3,0,0,0,75.11,13.73Zm.1-5.38a7.33,7.33,0,0,0,.52-2.15,15,15,0,0,0,.11-1.77,7.89,7.89,0,0,0-.24-2.14c-.16-.55-.46-.83-.93-.83a.42.42,0,0,0-.4.33,4.42,4.42,0,0,0-.19,1l-.77,6.73a5.23,5.23,0,0,0,1.27-.36A1.77,1.77,0,0,0,75.21,8.35Zm9.61,6.24a9.73,9.73,0,0,1-1.66,3.94,2.93,2.93,0,0,1-2.25,1,.64.64,0,0,1-.51-.21,1,1,0,0,1-.19-.71c0-.19,0-.35,0-.49s0-.29,0-.44L81.91,3.41a4.53,4.53,0,0,1,.38-1.66,1.47,1.47,0,0,1,.88-.49V.48h-4v.78a1.39,1.39,0,0,1,.75.32,1.59,1.59,0,0,1,.18.95c0,.2,0,.43,0,.68s0,.58-.1,1L78.42,17.62a5.28,5.28,0,0,1-.35,1.63,1.12,1.12,0,0,1-.67.53v.77h7l.73-5.83ZM90.09,1.26V.48H86.34v.78a1.38,1.38,0,0,1,.74.32,1.59,1.59,0,0,1,.18.95q0,.3,0,.69c0,.25-.06.57-.11.95L85.58,17.64a5.41,5.41,0,0,1-.36,1.61,1.07,1.07,0,0,1-.66.53v.77h3.75v-.77a1.47,1.47,0,0,1-.75-.32,1.78,1.78,0,0,1-.17-1c0-.08,0-.18,0-.28s0-.2,0-.3l.1-1L89.07,3.41a5.68,5.68,0,0,1,.35-1.62A1.1,1.1,0,0,1,90.09,1.26Zm7-.62a.33.33,0,0,1-.3.24,3.1,3.1,0,0,1-.82-.44A2.5,2.5,0,0,0,94.59,0Q92.51,0,91,4a26.57,26.57,0,0,0-1.51,9.39,13.57,13.57,0,0,0,1,5.67c.66,1.41,1.49,2.11,2.5,2.11A2.46,2.46,0,0,0,94.79,20a9.66,9.66,0,0,0,1.55-3.4L96,16a12.68,12.68,0,0,1-.89,2.13c-.54,1-1.12,1.45-1.74,1.45-.47,0-.91-.39-1.31-1.15a10.33,10.33,0,0,1-.6-4.27,36.59,36.59,0,0,1,1-8.43c.72-3.08,1.57-4.63,2.54-4.63.48,0,.88.39,1.19,1.16a10,10,0,0,1,.47,3.53V6.1c0,.07,0,.32,0,.74L97,7l.64-7h-.38A4.28,4.28,0,0,1,97,.64Zm17.57,14,.31.13-.75,5.83h-9.45l-1.35-9.92H103l-.74,6.25-.11,1c0,.08,0,.16,0,.26v.28a1.94,1.94,0,0,0,.16,1,1.39,1.39,0,0,0,.75.32v.77H99.3v-.77a1.12,1.12,0,0,0,.67-.53,5.18,5.18,0,0,0,.35-1.61l1.55-13.46c0-.28.06-.52.08-.72,0-.42,0-.75,0-1a1.48,1.48,0,0,0-.17-.91,1.39,1.39,0,0,0-.74-.31V.48h3.46a2.64,2.64,0,0,1,1.8.55c.78.66,1.17,1.93,1.17,3.8a11,11,0,0,1-.19,2,6.57,6.57,0,0,1-.66,1.93,3.61,3.61,0,0,1-.76,1,6.48,6.48,0,0,1-.81.52c0,.31.07.51.08.58l1,6.78a5.63,5.63,0,0,0,.42,1.72.84.84,0,0,0,.65.4,1.06,1.06,0,0,0,.64-.51,5.41,5.41,0,0,0,.36-1.61l1.54-13.47c0-.34.07-.65.1-.92s0-.52,0-.72a1.61,1.61,0,0,0-.17-.95,1.31,1.31,0,0,0-.74-.32V.48h6.78l-.53,5.7-.34-.13a11.8,11.8,0,0,0-.3-3.09,1.92,1.92,0,0,0-2-1.54c-.33,0-.55.1-.64.29a3.46,3.46,0,0,0-.24,1.07L111,9.45a2.6,2.6,0,0,0,1.72-.51,7.79,7.79,0,0,0,.86-2.66l.35.11-.93,8.2-.35-.15c0-.28,0-.53,0-.74v-.52a4.42,4.42,0,0,0-.37-2.18,1.56,1.56,0,0,0-1.44-.58l-.83,7.32c0,.18,0,.35,0,.51s0,.3,0,.4a1.45,1.45,0,0,0,.13.67c.09.18.28.26.57.26a2.72,2.72,0,0,0,2-.76A8.33,8.33,0,0,0,114.61,14.59ZM105,8.31a9.81,9.81,0,0,0,.41-1.65,13.72,13.72,0,0,0,.18-2.29,6.87,6.87,0,0,0-.26-2.09c-.17-.55-.47-.83-.89-.83a.4.4,0,0,0-.38.27,5.05,5.05,0,0,0-.2,1.06l-.76,6.87a2.39,2.39,0,0,0,1-.2A2,2,0,0,0,105,8.31Zm17.51,6.28a9.86,9.86,0,0,1-1.67,3.94,2.93,2.93,0,0,1-2.25,1,.64.64,0,0,1-.51-.21,1.1,1.1,0,0,1-.19-.71c0-.19,0-.35,0-.49s0-.29,0-.44l1.64-14.32A4.53,4.53,0,0,1,120,1.75a1.47,1.47,0,0,1,.89-.49V.48h-4v.78a1.39,1.39,0,0,1,.75.32,1.59,1.59,0,0,1,.18.95c0,.2,0,.43,0,.68s0,.58-.1,1l-1.55,13.45a5.28,5.28,0,0,1-.35,1.63,1.1,1.1,0,0,1-.66.53v.77h7l.74-5.83Zm7.09,0a8.33,8.33,0,0,1-2,4.23,2.73,2.73,0,0,1-2,.76c-.29,0-.48-.08-.57-.26a1.45,1.45,0,0,1-.13-.67c0-.1,0-.23,0-.4s0-.33,0-.51l.83-7.32a1.58,1.58,0,0,1,1.44.58,4.42,4.42,0,0,1,.37,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.34.15.94-8.2-.35-.11a7.71,7.71,0,0,1-.87,2.66,2.56,2.56,0,0,1-1.71.51l.75-6.67A3.46,3.46,0,0,1,127,1.71c.09-.19.31-.29.64-.29a1.92,1.92,0,0,1,2,1.54,11.8,11.8,0,0,1,.3,3.09l.33.13.54-5.7H124v.78a1.31,1.31,0,0,1,.75.32,1.7,1.7,0,0,1,.17.95,6.75,6.75,0,0,1,0,.72c0,.27-.05.58-.09.92l-1.55,13.47a5.18,5.18,0,0,1-.35,1.61,1.12,1.12,0,0,1-.67.53v.77h7l.75-5.83Zm8.45,5.24v.72h-3.83v-.72a1.11,1.11,0,0,0,.77-.41,2.52,2.52,0,0,0,.23-1.31c0-.23,0-.77-.07-1.62,0-.17-.05-.9-.13-2.18h-2.71l-.74,3c0,.2-.09.43-.13.67a4.44,4.44,0,0,0-.06.71,1.27,1.27,0,0,0,.16.79,1.35,1.35,0,0,0,.65.3v.72h-2.47v-.72a1.66,1.66,0,0,0,.52-.54,7.25,7.25,0,0,0,.55-1.58L135.49.07h.33L137,17.23a8.87,8.87,0,0,0,.3,2.11A.9.9,0,0,0,138.08,19.83ZM135,13.12l-.47-7.3-1.86,7.3Zm7.88-4-1.09-2.13a6.38,6.38,0,0,1-.39-1,6.65,6.65,0,0,1-.23-1.82,6.93,6.93,0,0,1,.23-1.8q.33-1.26,1-1.26c.57,0,1,.53,1.3,1.57a10.87,10.87,0,0,1,.36,2.39l0,1,.33.1.51-6h-.38a2.26,2.26,0,0,1-.2.54.38.38,0,0,1-.34.22.54.54,0,0,1-.19-.05l-.22-.13-.32-.25a2.36,2.36,0,0,0-.41-.25,1.82,1.82,0,0,0-.7-.16c-.81,0-1.44.57-1.9,1.7a11.21,11.21,0,0,0-.68,4.12,12.36,12.36,0,0,0,1.55,5.58,10.74,10.74,0,0,1,1.54,4.78,7.8,7.8,0,0,1-.41,2.67c-.28.76-.67,1.15-1.17,1.15a1.07,1.07,0,0,1-.79-.4,3.78,3.78,0,0,1-.64-1.18,7.79,7.79,0,0,1-.42-1.95c-.05-.44-.08-1.14-.11-2.1l-.36-.06-.46,6.73h.38a6.32,6.32,0,0,1,.2-.83.31.31,0,0,1,.3-.24.21.21,0,0,1,.14,0,1.06,1.06,0,0,1,.22.18l.32.27a3,3,0,0,0,.69.44,1.72,1.72,0,0,0,.69.15c.92,0,1.64-.63,2.16-1.91a11.22,11.22,0,0,0,.78-4.28,12.2,12.2,0,0,0-.4-3.29A14.21,14.21,0,0,0,142.85,9.07Zm6.36-7.36c.09-.19.31-.29.64-.29a1.92,1.92,0,0,1,2,1.54,11.8,11.8,0,0,1,.3,3.09l.33.13L153,.48h-6.79v.78a1.31,1.31,0,0,1,.75.32,1.7,1.7,0,0,1,.17.95,6.75,6.75,0,0,1,0,.72c0,.27-.05.58-.09.92l-1.55,13.47a5.18,5.18,0,0,1-.35,1.61,1.12,1.12,0,0,1-.67.53v.77h7l.75-5.83-.31-.13a8.33,8.33,0,0,1-2,4.23,2.73,2.73,0,0,1-2,.76c-.29,0-.48-.08-.57-.26a1.45,1.45,0,0,1-.13-.67c0-.1,0-.23,0-.4s0-.33.05-.51l.83-7.32a1.58,1.58,0,0,1,1.44.58,4.42,4.42,0,0,1,.37,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.34.15.94-8.2-.35-.11a7.71,7.71,0,0,1-.87,2.66,2.56,2.56,0,0,1-1.71.51L149,2.78A3.46,3.46,0,0,1,149.21,1.71Z',opacity:1,strokeColor:'',fillColor:'#192760',width:152.969,height:21.152,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'ForComment':case'For Comment':{stampCollection={iconName:'For Comment',// eslint-disable-next-line max-len
pathdata:'M14.1.48l-.89,5.6L12.65,6a7.14,7.14,0,0,0-.48-3c-.54-1-1.6-1.54-3.19-1.54a1.37,1.37,0,0,0-1,.26,2.06,2.06,0,0,0-.42,1.08L6.35,9.28a6,6,0,0,0,2.73-.52,5.92,5.92,0,0,0,1.41-2.59l.58.1L9.52,14.34,9,14.2c0-.29,0-.54.05-.75s0-.38,0-.49a3.15,3.15,0,0,0-.55-2.09,3.07,3.07,0,0,0-2.32-.64L4.77,17.44c0,.13,0,.24-.06.35s0,.21,0,.31a1.23,1.23,0,0,0,.53,1.17,2,2,0,0,0,1,.19v.76H0v-.76a1.91,1.91,0,0,0,1.12-.54,3.56,3.56,0,0,0,.58-1.58L4.27,4.11c.05-.27.09-.51.12-.71a7.42,7.42,0,0,0,.1-1c0-.48-.1-.77-.29-.9A3.54,3.54,0,0,0,3,1.24V.48ZM28,7.11a17.42,17.42,0,0,1-2.57,9.07q-2.75,4.61-6.3,4.6a4.33,4.33,0,0,1-3.65-1.92,8.53,8.53,0,0,1-1.41-5.14,17.56,17.56,0,0,1,2.62-9.19Q19.43,0,22.82,0a4.48,4.48,0,0,1,3.72,1.92A8.46,8.46,0,0,1,28,7.11ZM25,4.6a5.72,5.72,0,0,0-.52-2.55,1.72,1.72,0,0,0-1.63-1c-1.74,0-3.2,2.17-4.39,6.53a32.66,32.66,0,0,0-1.35,8.26,8.24,8.24,0,0,0,.26,2.2c.33,1.18.94,1.77,1.82,1.77a2.88,2.88,0,0,0,2.25-1.29,16.48,16.48,0,0,0,2.1-4.93,37.09,37.09,0,0,0,1.07-4.83A28.26,28.26,0,0,0,25,4.6Zm15.83.16a6.49,6.49,0,0,1-.33,2,5.12,5.12,0,0,1-1.09,1.9,4.65,4.65,0,0,1-1.27,1,11.5,11.5,0,0,1-1.35.52c.07.3.12.49.14.57l1.62,6.66a3.79,3.79,0,0,0,.7,1.7,1.75,1.75,0,0,0,1.14.41v.76H36.13l-2.26-9.76h-.59L32,16.6l-.17,1,0,.25a2.62,2.62,0,0,0,0,.28q0,.8.27,1a3,3,0,0,0,1.25.32v.76H27.11v-.76a1.93,1.93,0,0,0,1.11-.52,3.54,3.54,0,0,0,.59-1.59L31.38,4.11c.06-.27.1-.51.13-.71a6,6,0,0,0,.1-1c0-.47-.1-.77-.29-.9a3.54,3.54,0,0,0-1.24-.3V.48h5.76a6.77,6.77,0,0,1,3,.53Q40.79,2,40.79,4.76Zm-3.16-.47a4.35,4.35,0,0,0-.44-2,1.54,1.54,0,0,0-1.48-.81.75.75,0,0,0-.63.26,2.78,2.78,0,0,0-.33,1.05L33.48,9.5a6.85,6.85,0,0,0,1.67-.2,2.55,2.55,0,0,0,1.49-1.13,6.37,6.37,0,0,0,.67-1.62A7.81,7.81,0,0,0,37.63,4.29ZM58.49,0a2.61,2.61,0,0,1-.32.63.55.55,0,0,1-.49.24A7,7,0,0,1,56.31.43,6.15,6.15,0,0,0,54.1,0q-3.47,0-6,3.92a16.73,16.73,0,0,0-2.51,9.24,8.73,8.73,0,0,0,1.64,5.57,5,5,0,0,0,7.19,1A8.89,8.89,0,0,0,57,16.37l-.64-.65a10.47,10.47,0,0,1-1.47,2.09A4,4,0,0,1,52,19.24a2.89,2.89,0,0,1-2.17-1.13c-.67-.75-1-2.15-1-4.2a22.2,22.2,0,0,1,1.62-8.29q1.8-4.54,4.23-4.55a2.33,2.33,0,0,1,2,1.14,6.16,6.16,0,0,1,.78,3.47c0,.14,0,.25,0,.32s0,.32,0,.73l.66.17L59.12,0ZM72.71,7.11a17.33,17.33,0,0,1-2.57,9.07c-1.82,3.07-3.93,4.6-6.3,4.6a4.34,4.34,0,0,1-3.65-1.92,8.53,8.53,0,0,1-1.4-5.14A17.55,17.55,0,0,1,61.4,4.53Q64.15,0,67.54,0a4.48,4.48,0,0,1,3.72,1.92A8.39,8.39,0,0,1,72.71,7.11Zm-3-2.51a5.72,5.72,0,0,0-.52-2.55,1.72,1.72,0,0,0-1.63-1c-1.74,0-3.2,2.17-4.39,6.53a32.66,32.66,0,0,0-1.35,8.26,8.24,8.24,0,0,0,.26,2.2c.33,1.18.94,1.77,1.82,1.77a2.85,2.85,0,0,0,2.25-1.29,16,16,0,0,0,2.1-4.93,34.08,34.08,0,0,0,1.07-4.83A28.26,28.26,0,0,0,69.68,4.6Zm17.5,13.62a4.63,4.63,0,0,1,.07-.75c0-.3.09-.59.15-.88L90,3.31a3.32,3.32,0,0,1,.7-1.67,2,2,0,0,1,1-.4V.48H87.23l-6.4,13.91L79.63.48H74.84v.76a3.29,3.29,0,0,1,1.2.21c.21.11.31.37.31.78a4.35,4.35,0,0,1-.07.75c0,.28-.11.61-.18,1L74,15a19.63,19.63,0,0,1-1,3.65,1.54,1.54,0,0,1-1.17.86v.76H76.2v-.76a2.31,2.31,0,0,1-1.09-.29,1.6,1.6,0,0,1-.58-1.43,8.8,8.8,0,0,1,.14-1.42c0-.37.14-.82.24-1.37L77,4.24l1.41,16.37H79L86.89,3.76,84.25,17.34A2.94,2.94,0,0,1,83.61,19a2.87,2.87,0,0,1-1.44.49v.76h6.54v-.76a3.39,3.39,0,0,1-1.23-.31Q87.18,19,87.18,18.22Zm17.73,0a4.63,4.63,0,0,1,.07-.75c0-.3.1-.59.16-.88l2.58-13.28a3.24,3.24,0,0,1,.69-1.67,2,2,0,0,1,1-.4V.48H105l-6.4,13.91L97.36.48H92.57v.76a3.29,3.29,0,0,1,1.2.21c.21.11.32.37.32.78A5.65,5.65,0,0,1,94,3c0,.28-.11.61-.19,1L91.69,15a19.63,19.63,0,0,1-1,3.65,1.54,1.54,0,0,1-1.17.86v.76h4.38v-.76a2.33,2.33,0,0,1-1.1-.29,1.6,1.6,0,0,1-.58-1.43,10.12,10.12,0,0,1,.14-1.42c.06-.37.14-.82.25-1.37L94.76,4.24l1.41,16.37h.59l7.86-16.85L102,17.34a3.1,3.1,0,0,1-.64,1.63,3,3,0,0,1-1.45.49v.76h6.55v-.76a3.46,3.46,0,0,1-1.24-.31Q104.91,19,104.91,18.22Zm11.52.3a6.56,6.56,0,0,1-3.25.75,1.27,1.27,0,0,1-.94-.26,1,1,0,0,1-.22-.66,3,3,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.38-7.2a3.65,3.65,0,0,1,2.4.57,2.92,2.92,0,0,1,.62,2.15c0,.14,0,.31,0,.51s0,.45-.06.73l.58.15,1.55-8.08-.58-.1a5.92,5.92,0,0,1-1.44,2.61,6.32,6.32,0,0,1-2.85.51L115,2.74a2.44,2.44,0,0,1,.39-1.06,1.43,1.43,0,0,1,1.07-.28c1.63,0,2.71.5,3.25,1.51a7.37,7.37,0,0,1,.49,3l.56.13.89-5.6H110.31v.76a3.28,3.28,0,0,1,1.25.31c.19.13.28.44.28.94a4.83,4.83,0,0,1-.06.7c0,.28-.09.58-.16.92l-2.57,13.24a3.54,3.54,0,0,1-.59,1.59,1.93,1.93,0,0,1-1.11.52v.76H119l1.24-5.74-.51-.12A7.7,7.7,0,0,1,116.43,18.52ZM136.6,1.24V.48h-4.3v.76a2.5,2.5,0,0,1,1.14.33A1.8,1.8,0,0,1,134,3.05a10.58,10.58,0,0,1-.14,1.34c-.05.41-.13.87-.22,1.39L132,14.12,127.41.48h-4.22v.76a2.53,2.53,0,0,1,1,.24,1.82,1.82,0,0,1,.64,1.06l.1.3L122.55,15a19.54,19.54,0,0,1-1,3.61,1.59,1.59,0,0,1-1.18.9v.76h4.37v-.76a2.5,2.5,0,0,1-1.12-.32,1.67,1.67,0,0,1-.55-1.44,5.32,5.32,0,0,1,0-.79c0-.43.17-1.09.34-2l2.08-10.57L131,20.71h.52l2.91-15a24.72,24.72,0,0,1,.85-3.42,1.42,1.42,0,0,1,1-1Zm.48-.76-.81,5,.54.2a8.1,8.1,0,0,1,1.85-3.16,3.63,3.63,0,0,1,2.66-1.06l-3.08,15.85a3,3,0,0,1-.86,1.85,2.42,2.42,0,0,1-1.32.26v.76H143v-.76a4,4,0,0,1-1.41-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.17-1,2.92-15.1a2.64,2.64,0,0,1,1.76.63c.74.7,1.12,2,1.15,3.94l.55.07L148.6.48Z',opacity:1,strokeColor:'',fillColor:'#192760',width:148.603,height:20.812,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'Void':{stampCollection={iconName:'Void',// eslint-disable-next-line max-len
pathdata:'M27.88,1.72a6.53,6.53,0,0,0-1.81,1.42L9,21.12H7.54L4.09,5.83A11.83,11.83,0,0,0,2.82,2Q2.3,1.4,0,1.26V.48H13.54v.78a11,11,0,0,0-2.37.18q-1.11.27-1.11,1.05a1.43,1.43,0,0,0,0,.29c0,.09,0,.19,0,.28l2.35,12,8.56-9a25.11,25.11,0,0,0,1.83-2.14,3.15,3.15,0,0,0,.82-1.68c0-.41-.28-.69-.84-.82a12.57,12.57,0,0,0-2.08-.15V.48h8.7v.78A7.11,7.11,0,0,0,27.88,1.72ZM57.37,7.23q0,4.85-5.56,9.22a21.41,21.41,0,0,1-13.62,4.67,14.41,14.41,0,0,1-7.89-1.95,6,6,0,0,1-3-5.23q0-4.92,5.66-9.34A21.12,21.12,0,0,1,46.2,0a15,15,0,0,1,8,2A6,6,0,0,1,57.37,7.23ZM50.82,4.68a3.46,3.46,0,0,0-1.13-2.59A4.93,4.93,0,0,0,46.17,1q-5.64,0-9.49,6.64c-1.94,3.36-2.92,6.16-2.92,8.4a4.27,4.27,0,0,0,.56,2.23q1.08,1.8,3.93,1.8a9.24,9.24,0,0,0,4.87-1.31,15.24,15.24,0,0,0,4.54-5A21.81,21.81,0,0,0,50,8.85,14.23,14.23,0,0,0,50.82,4.68ZM66,18.49a1.49,1.49,0,0,1,0-.28c0-.1,0-.2.08-.3l.35-1L72,3.41a2.94,2.94,0,0,1,1.25-1.62,6.79,6.79,0,0,1,2.4-.53V.48H62.19v.78a13.27,13.27,0,0,1,2.67.32.88.88,0,0,1,.64.95,2.38,2.38,0,0,1-.12.69c-.08.25-.2.57-.36.95L59.45,17.64a3,3,0,0,1-1.28,1.61,6.84,6.84,0,0,1-2.39.53v.77H69.27v-.77a13.72,13.72,0,0,1-2.67-.32A.9.9,0,0,1,66,18.49Zm38.25-9.67q0,4.59-5.15,8-5.73,3.77-15,3.76h-13v-.77a7.4,7.4,0,0,0,2.1-.41,3.08,3.08,0,0,0,1.57-1.75L80.28,4.17c.16-.38.28-.7.37-1a2.27,2.27,0,0,0,.12-.68.89.89,0,0,0-.64-.95,13.41,13.41,0,0,0-2.68-.32V.48H90.6q6.68,0,10.15,2.27A6.92,6.92,0,0,1,104.23,8.82ZM97.58,7a5.28,5.28,0,0,0-1.13-3.54q-1.77-2-6.14-2a4.24,4.24,0,0,0-2,.32,1.77,1.77,0,0,0-.74.84L81.35,17.73a1.72,1.72,0,0,0-.12.39,1.89,1.89,0,0,0,0,.31.89.89,0,0,0,.54.85,5.1,5.1,0,0,0,2,.26q8.07,0,11.68-5.5A12.61,12.61,0,0,0,97.58,7Z',opacity:1,strokeColor:'',fillColor:'#8a251a',width:104.233,height:21.123,stampFillColor:'#f6dedd',stampStrokeColor:''};}break;case'PreliminaryResults':case'Preliminary Results':{stampCollection={iconName:'Preliminary Results',// eslint-disable-next-line max-len
pathdata:'M9.23,5.08q0-3-1.32-4.08A2.6,2.6,0,0,0,6.17.41H2v.78a1.5,1.5,0,0,1,.76.23,1.39,1.39,0,0,1,.28,1c0,.19,0,.43,0,.73s-.07.61-.1.91L1.17,17.56a4.76,4.76,0,0,1-.41,1.62A1.18,1.18,0,0,1,0,19.7v.78H4.25V19.7a1.77,1.77,0,0,1-.86-.31,1.5,1.5,0,0,1-.2-1c0-.09,0-.19,0-.3a1.36,1.36,0,0,1,0-.29l.12-1,.78-6L5,11h.41a3.21,3.21,0,0,0,2.78-1.6A7.57,7.57,0,0,0,9.23,5.08ZM7,6.32a10,10,0,0,1-.42,2,3,3,0,0,1-.68,1.21,1.63,1.63,0,0,1-1.13.36H4.53l-.27-.06,1-7.15a4.75,4.75,0,0,1,.22-1,.45.45,0,0,1,.46-.29,1,1,0,0,1,1,.8,6.22,6.22,0,0,1,.29,2.06A18,18,0,0,1,7,6.32ZM23.4,18.75a3.35,3.35,0,0,1-2.23.76.68.68,0,0,1-.64-.26,1.27,1.27,0,0,1-.16-.68c0-.09,0-.23,0-.39s0-.34.05-.51l.95-7.33a1.92,1.92,0,0,1,1.65.59,4,4,0,0,1,.42,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.4.15,1.07-8.21-.4-.1a7,7,0,0,1-1,2.65,3.15,3.15,0,0,1-2,.52l.85-6.67a3,3,0,0,1,.28-1.08c.11-.19.35-.28.73-.28a2.16,2.16,0,0,1,2.23,1.54A10.27,10.27,0,0,1,26,6l.39.13L27,.41H19.2v.78a1.67,1.67,0,0,1,.86.31,1.52,1.52,0,0,1,.19,1,6.58,6.58,0,0,1,0,.71c0,.28-.07.59-.11.93L18.33,17.56a4.59,4.59,0,0,1-.4,1.62,1.22,1.22,0,0,1-.74.51,1,1,0,0,1-.73-.4A5.08,5.08,0,0,1,16,17.56l-1.1-6.77c0-.08,0-.27-.1-.58a5.14,5.14,0,0,0,.92-.53,3.23,3.23,0,0,0,.87-1,6,6,0,0,0,.76-1.93,9.63,9.63,0,0,0,.22-2c0-1.87-.44-3.14-1.34-3.81a3.4,3.4,0,0,0-2-.54h-4v.78a1.78,1.78,0,0,1,.85.3,1.4,1.4,0,0,1,.19.91c0,.24,0,.56-.06,1,0,.21-.05.45-.09.73L9.31,17.56a4.53,4.53,0,0,1-.41,1.62,1.15,1.15,0,0,1-.75.52v.78h4.28V19.7a1.62,1.62,0,0,1-.86-.32,1.72,1.72,0,0,1-.18-1v-.29c0-.09,0-.18,0-.25l.12-1,.86-6.24h.4l1.55,9.92h10.8L26,14.65l-.35-.13A7.9,7.9,0,0,1,23.4,18.75ZM13.67,9.38a3.35,3.35,0,0,1-1.15.2l.87-6.87a4,4,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08,11.74,11.74,0,0,1-.21,2.29,9,9,0,0,1-.47,1.65A2,2,0,0,1,13.67,9.38ZM35,14.65l-.84,5.83h-8V19.7a1.24,1.24,0,0,0,.76-.52,4.73,4.73,0,0,0,.4-1.63L29.15,4.1q.08-.57.12-1c0-.26,0-.48,0-.68a1.42,1.42,0,0,0-.21-1,1.67,1.67,0,0,0-.85-.31V.41h4.56v.78a1.67,1.67,0,0,0-1,.49,4.17,4.17,0,0,0-.44,1.66L29.49,17.65c0,.16,0,.31,0,.45a3.47,3.47,0,0,0,0,.48,1,1,0,0,0,.21.72.8.8,0,0,0,.59.21,3.54,3.54,0,0,0,2.56-1.05,9.24,9.24,0,0,0,1.91-3.94Zm2.79,4.73a1.61,1.61,0,0,0,.85.32v.78H34.39V19.7a1.18,1.18,0,0,0,.76-.52,4.76,4.76,0,0,0,.41-1.62L37.33,4.1c.05-.38.09-.7.11-1a5.83,5.83,0,0,0,0-.68,1.5,1.5,0,0,0-.2-1,1.71,1.71,0,0,0-.85-.31V.41h4.29v.78a1.22,1.22,0,0,0-.77.52,4.9,4.9,0,0,0-.39,1.63L37.78,16.8l-.11,1,0,.29c0,.11,0,.2,0,.29A1.52,1.52,0,0,0,37.83,19.38Zm12.2,0a1.81,1.81,0,0,0,.85.31v.78h-4.5V19.7a1.64,1.64,0,0,0,1-.49,4,4,0,0,0,.44-1.66l1.81-13.8-5.4,17.12h-.4l-1-16.64L41.39,15.12c-.07.56-.13,1-.17,1.39-.06.61-.09,1.09-.09,1.45a2,2,0,0,0,.4,1.45,1.19,1.19,0,0,0,.75.29v.78h-3V19.7a1.21,1.21,0,0,0,.81-.87,29.47,29.47,0,0,0,.66-3.71L42.21,4c0-.38.09-.71.12-1a5.41,5.41,0,0,0,.05-.75c0-.42-.07-.69-.21-.8a1.69,1.69,0,0,0-.83-.21V.41h3.29l.83,14.14L49.85.41h3.07v.78a1.12,1.12,0,0,0-.69.41,4.08,4.08,0,0,0-.48,1.69L50,16.79c0,.29-.08.59-.11.89s0,.56,0,.76A1.41,1.41,0,0,0,50,19.39Zm5,0a1.61,1.61,0,0,0,.85.32v.78H51.56V19.7a1.18,1.18,0,0,0,.76-.52,4.76,4.76,0,0,0,.41-1.62L54.5,4.1c0-.38.09-.7.11-1a5.83,5.83,0,0,0,0-.68,1.5,1.5,0,0,0-.2-1,1.71,1.71,0,0,0-.85-.31V.41h4.29v.78a1.22,1.22,0,0,0-.77.52,4.9,4.9,0,0,0-.39,1.63L55,16.8l-.11,1,0,.29c0,.11,0,.2,0,.29A1.52,1.52,0,0,0,55,19.38ZM66.13,5.75,64.13,21h-.36L60,4.38,58.6,15.12c-.12.89-.2,1.55-.23,2a7.32,7.32,0,0,0,0,.81,2.17,2.17,0,0,0,.38,1.46,1.32,1.32,0,0,0,.77.32v.78h-3V19.7a1.26,1.26,0,0,0,.81-.91,29,29,0,0,0,.65-3.67L59.56,2.81,59.5,2.5a2,2,0,0,0-.45-1.06,1.21,1.21,0,0,0-.67-.25V.41h2.9L64.4,14.28,65.52,5.8c.07-.53.12-1,.16-1.41.06-.62.09-1.08.09-1.36a2.45,2.45,0,0,0-.34-1.51,1.39,1.39,0,0,0-.79-.33V.41h3v.78l-.21.06c-.29.08-.52.43-.68,1A34.22,34.22,0,0,0,66.13,5.75ZM83.27,1A3.41,3.41,0,0,0,81.21.41h-4v.78a1.74,1.74,0,0,1,.85.3c.14.13.2.43.2.91,0,.24,0,.56-.06,1,0,.21-.06.45-.09.73L76.38,17.56A4.53,4.53,0,0,1,76,19.18a1.18,1.18,0,0,1-.76.52v0a1,1,0,0,1-.67-.45,8.11,8.11,0,0,1-.34-2.12L72.83,0h-.38L67.11,17.64a6.42,6.42,0,0,1-.63,1.58,1.84,1.84,0,0,1-.59.54v.72h2.83v-.72a1.68,1.68,0,0,1-.75-.31,1.16,1.16,0,0,1-.18-.79,3.46,3.46,0,0,1,.07-.7,5.16,5.16,0,0,1,.15-.67l.84-3H72c.08,1.28.13,2,.13,2.18.06.85.08,1.39.08,1.61a2.26,2.26,0,0,1-.25,1.31,1.43,1.43,0,0,1-.88.42v.72H79.5V19.7a1.58,1.58,0,0,1-.86-.32,1.7,1.7,0,0,1-.19-1c0-.1,0-.2,0-.29a1.81,1.81,0,0,1,0-.25l.12-1,.85-6.24h.41l1.55,9.92h2.9V19.7a1,1,0,0,1-.79-.41A5.15,5.15,0,0,1,83,17.56l-1.11-6.77c0-.08,0-.27-.09-.58a5.53,5.53,0,0,0,.92-.53,3.52,3.52,0,0,0,.87-1,6.16,6.16,0,0,0,.75-1.93,9.67,9.67,0,0,0,.23-2C84.61,2.89,84.16,1.62,83.27,1ZM69.19,13.05l2.13-7.3.53,7.3Zm13-6.47a8.39,8.39,0,0,1-.46,1.65,2,2,0,0,1-1,1.15,3.29,3.29,0,0,1-1.14.2l.87-6.87a3.61,3.61,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08A11,11,0,0,1,82.22,6.58ZM90.48.41h3v.78a1.07,1.07,0,0,0-.55.41,6.13,6.13,0,0,0-.77,1.62l-2.72,8-.72,5.55c0,.22-.07.51-.1.86a7.29,7.29,0,0,0-.06.73,1.46,1.46,0,0,0,.29,1.07,1.61,1.61,0,0,0,.83.25v.78H85V19.7a1.56,1.56,0,0,0,.93-.39,3.7,3.7,0,0,0,.53-1.76l.85-6.45-1.26-8a6.07,6.07,0,0,0-.36-1.47.81.81,0,0,0-.7-.4V.41h4v.78a1.32,1.32,0,0,0-.76.23c-.15.12-.23.4-.23.84a4.46,4.46,0,0,0,0,.48c0,.19,0,.39.07.6l1,6.54,1.88-5.55c.1-.29.18-.55.24-.79a4.68,4.68,0,0,0,.14-1.11,1.35,1.35,0,0,0-.31-1,1.14,1.14,0,0,0-.66-.2Zm18.61,1.22c.1-.19.35-.28.73-.28a2.16,2.16,0,0,1,2.23,1.54A10.27,10.27,0,0,1,112.39,6l.38.13.62-5.7h-7.76v.78a1.67,1.67,0,0,1,.86.31,1.59,1.59,0,0,1,.19,1,6.58,6.58,0,0,1,0,.71c0,.28-.07.59-.11.93l-1.77,13.46a4.53,4.53,0,0,1-.41,1.62,1.17,1.17,0,0,1-.73.51,1,1,0,0,1-.73-.4,5.08,5.08,0,0,1-.49-1.73l-1.1-6.77c0-.08,0-.27-.1-.58a5.14,5.14,0,0,0,.92-.53,3.4,3.4,0,0,0,.88-1,6.16,6.16,0,0,0,.75-1.93,9.63,9.63,0,0,0,.22-2c0-1.87-.44-3.14-1.34-3.81a3.38,3.38,0,0,0-2-.54h-4v.78a1.78,1.78,0,0,1,.85.3,1.4,1.4,0,0,1,.19.91c0,.24,0,.56-.06,1,0,.21,0,.45-.09.73L95.74,17.56a4.53,4.53,0,0,1-.41,1.62,1.15,1.15,0,0,1-.75.52v.78h4.28V19.7a1.62,1.62,0,0,1-.86-.32,1.72,1.72,0,0,1-.18-1v-.29c0-.09,0-.18,0-.25l.12-1,.86-6.24h.4l1.55,9.92h10.8l.85-5.83-.35-.13a7.9,7.9,0,0,1-2.24,4.23,3.35,3.35,0,0,1-2.23.76.71.71,0,0,1-.65-.26,1.37,1.37,0,0,1-.15-.68c0-.09,0-.23,0-.39s0-.34.05-.51l.95-7.33a1.92,1.92,0,0,1,1.65.59,4,4,0,0,1,.42,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.4.15,1.07-8.21-.41-.1a7,7,0,0,1-1,2.65,3.15,3.15,0,0,1-2,.52l.85-6.67A3,3,0,0,1,109.09,1.63Zm-9,7.75a3.35,3.35,0,0,1-1.15.2l.87-6.87a4,4,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08,11.74,11.74,0,0,1-.21,2.29,9,9,0,0,1-.47,1.65A2,2,0,0,1,100.1,9.38ZM120.18.07h.43l-.59,6-.37-.1-.05-1a10.11,10.11,0,0,0-.41-2.39c-.34-1-.83-1.57-1.48-1.57s-.95.42-1.21,1.26a6.17,6.17,0,0,0-.25,1.8,5.92,5.92,0,0,0,.26,1.82,5.23,5.23,0,0,0,.44,1L118.19,9a12.6,12.6,0,0,1,1.12,2.57,10.75,10.75,0,0,1,.47,3.29,10,10,0,0,1-.9,4.29,2.76,2.76,0,0,1-2.46,1.91,2.17,2.17,0,0,1-.79-.15,3.28,3.28,0,0,1-.79-.44l-.36-.28-.26-.18a.38.38,0,0,0-.16,0,.34.34,0,0,0-.34.23,5.5,5.5,0,0,0-.23.84h-.43l.52-6.73.41.06c0,1,.07,1.66.12,2.09a7.13,7.13,0,0,0,.49,1.95,3.52,3.52,0,0,0,.73,1.18,1.25,1.25,0,0,0,.9.41c.57,0,1-.39,1.34-1.15a7.13,7.13,0,0,0,.47-2.68,9.86,9.86,0,0,0-1.76-4.77,11.23,11.23,0,0,1-1.77-5.58,9.8,9.8,0,0,1,.78-4.12A2.41,2.41,0,0,1,117.46,0a2.06,2.06,0,0,1,.79.16,1.9,1.9,0,0,1,.47.25l.37.25a1.15,1.15,0,0,0,.25.12.47.47,0,0,0,.22,0A.44.44,0,0,0,120,.62,2.6,2.6,0,0,0,120.18.07Zm10,2a26.67,26.67,0,0,0-.66,3.7l-.9,6.85a32.12,32.12,0,0,1-1.16,5.7c-.68,1.83-1.67,2.74-3,2.74a2.7,2.7,0,0,1-2.28-1.36,6.67,6.67,0,0,1-.92-3.77,19.46,19.46,0,0,1,.11-2c0-.46.15-1.26.3-2.42l1-7.36c0-.33.08-.64.11-.93s0-.55,0-.77a1.38,1.38,0,0,0-.2-.91,1.74,1.74,0,0,0-.85-.3V.41h4.43v.78a1.39,1.39,0,0,0-.91.47,4.25,4.25,0,0,0-.44,1.68l-1.18,9c-.11.8-.19,1.46-.25,2q-.15,1.37-.15,2a4.41,4.41,0,0,0,.48,2.27,1.44,1.44,0,0,0,1.29.78c.91,0,1.62-.82,2.13-2.48a30.62,30.62,0,0,0,.91-4.85L129,5.76c.1-.91.14-1.3.13-1.19a14.64,14.64,0,0,0,.13-1.6,2.12,2.12,0,0,0-.38-1.46,1.35,1.35,0,0,0-.77-.32V.41H131v.78A1.18,1.18,0,0,0,130.23,2.06Zm8.41,12.59-.84,5.83h-8V19.7a1.24,1.24,0,0,0,.76-.52,4.73,4.73,0,0,0,.4-1.63L132.75,4.1q.08-.57.12-1c0-.26,0-.48,0-.68,0-.51-.06-.83-.2-1a1.67,1.67,0,0,0-.85-.31V.41h4.56v.78a1.67,1.67,0,0,0-1,.49A4.17,4.17,0,0,0,135,3.34l-1.87,14.31c0,.16,0,.31-.05.45s0,.3,0,.48a1,1,0,0,0,.21.72.8.8,0,0,0,.59.21,3.54,3.54,0,0,0,2.56-1.05,9.24,9.24,0,0,0,1.91-3.94Zm7.72-8.56a7.63,7.63,0,0,0-.79-4,1.53,1.53,0,0,0-1.21-.64l-2,15.35-.12,1a2.47,2.47,0,0,0,0,.34,2.35,2.35,0,0,0,0,.26c0,.52.08.84.23,1a2,2,0,0,0,1,.3v.78h-4.76V19.7a1.18,1.18,0,0,0,.9-.26,3.75,3.75,0,0,0,.6-1.88l2.11-16.11a2.17,2.17,0,0,0-1.83,1.08,9.57,9.57,0,0,0-1.27,3.21l-.37-.2.56-5.13h7.91l-.52,5.76Zm3.41-3.79a6.17,6.17,0,0,0-.25,1.8,5.63,5.63,0,0,0,.26,1.82,5.23,5.23,0,0,0,.44,1L151.46,9a13.19,13.19,0,0,1,1.13,2.57,11.08,11.08,0,0,1,.46,3.29,10,10,0,0,1-.9,4.29,2.76,2.76,0,0,1-2.46,1.91,2.21,2.21,0,0,1-.79-.15,3.28,3.28,0,0,1-.79-.44l-.36-.28-.26-.18a.38.38,0,0,0-.16,0,.34.34,0,0,0-.34.23,5.5,5.5,0,0,0-.23.84h-.43l.52-6.73.41.06c0,1,.07,1.66.12,2.09a7.13,7.13,0,0,0,.49,1.95,3.52,3.52,0,0,0,.73,1.18,1.25,1.25,0,0,0,.9.41c.57,0,1-.39,1.34-1.15a7.13,7.13,0,0,0,.47-2.68,9.86,9.86,0,0,0-1.76-4.77,11.23,11.23,0,0,1-1.77-5.58,9.8,9.8,0,0,1,.78-4.12A2.41,2.41,0,0,1,150.73,0a2.06,2.06,0,0,1,.79.16,1.9,1.9,0,0,1,.47.25l.37.25a1.34,1.34,0,0,0,.24.12.56.56,0,0,0,.23,0,.44.44,0,0,0,.39-.21,2.6,2.6,0,0,0,.23-.55h.43l-.59,6-.37-.1,0-1a10.11,10.11,0,0,0-.41-2.39c-.34-1-.83-1.57-1.48-1.57S150,1.46,149.77,2.3Z',opacity:1,strokeColor:'',fillColor:'#192760',width:153.879,height:21.051,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'InformationOnly':case'Information Only':{stampCollection={iconName:'Information Only',// eslint-disable-next-line max-len
pathdata:'M4,19.14a2,2,0,0,0,1,.32v.76H0v-.76a1.42,1.42,0,0,0,.87-.52,4,4,0,0,0,.47-1.59l2-13.24c.06-.38.1-.69.13-1a5.73,5.73,0,0,0,0-.67c0-.5-.08-.81-.24-.94a2.2,2.2,0,0,0-1-.31V.48H7.26v.76a1.48,1.48,0,0,0-.88.52,4.14,4.14,0,0,0-.45,1.6l-2,13.24-.13,1c0,.1,0,.19,0,.3a2.72,2.72,0,0,0,0,.28A1.32,1.32,0,0,0,4,19.14ZM18.17,1.3l.24-.06V.48H15v.76a1.66,1.66,0,0,1,.9.33,2.08,2.08,0,0,1,.4,1.48,12.85,12.85,0,0,1-.1,1.34c-.05.41-.11.87-.18,1.39l-1.29,8.34L11.15.48H7.83v.76a1.69,1.69,0,0,1,.77.24,1.9,1.9,0,0,1,.51,1.06l.07.3L7.33,15a24.86,24.86,0,0,1-.76,3.61,1.32,1.32,0,0,1-.92.9v.76H9.09v-.76a1.67,1.67,0,0,1-.88-.32,1.92,1.92,0,0,1-.44-1.44,7.09,7.09,0,0,1,0-.79c0-.43.13-1.09.27-2L9.72,4.38,14,20.71h.41l2.3-15a28.78,28.78,0,0,1,.67-3.42C17.57,1.72,17.83,1.38,18.17,1.3ZM19.33.48v.76a2.32,2.32,0,0,1,1,.3c.15.13.23.42.23.9,0,.23,0,.55-.07,1,0,.2-.06.44-.1.71l-2,13.23a4,4,0,0,1-.46,1.58,1.39,1.39,0,0,1-.88.54v.76h4.89v-.76a1.36,1.36,0,0,1-.78-.19,1.39,1.39,0,0,1-.41-1.17c0-.1,0-.21,0-.31s0-.22,0-.35l1.09-7.21a2.09,2.09,0,0,1,1.83.64A3.81,3.81,0,0,1,24.1,13c0,.11,0,.28,0,.49s0,.46,0,.75l.45.14,1.22-8.07-.46-.1a6.19,6.19,0,0,1-1.11,2.59A3.89,3.89,0,0,1,22,9.28l1-6.54a2.43,2.43,0,0,1,.33-1.08.93.93,0,0,1,.76-.26,2.45,2.45,0,0,1,2.52,1.54A9,9,0,0,1,27,6l.44.13.7-5.6ZM39.06,7.11a21,21,0,0,1-2,9.07q-2.16,4.61-5,4.6a3.28,3.28,0,0,1-2.88-1.92,10.29,10.29,0,0,1-1.11-5.14,21.08,21.08,0,0,1,2.07-9.19Q32.31,0,35,0a3.37,3.37,0,0,1,2.93,1.92A10.14,10.14,0,0,1,39.06,7.11ZM36.68,4.6a7,7,0,0,0-.42-2.55A1.37,1.37,0,0,0,35,1c-1.37,0-2.52,2.17-3.46,6.53a40.81,40.81,0,0,0-1.07,8.26,10,10,0,0,0,.21,2.2c.26,1.18.74,1.77,1.43,1.77s1.24-.43,1.78-1.29a18.75,18.75,0,0,0,1.65-4.93,43.28,43.28,0,0,0,.85-4.83A36.93,36.93,0,0,0,36.68,4.6ZM61,19.15a2.25,2.25,0,0,0,1,.31v.76H56.84v-.76A2,2,0,0,0,58,19a3.6,3.6,0,0,0,.5-1.63L60.56,3.76l-6.2,16.85H53.9L52.78,4.24,51.12,15c-.09.55-.15,1-.2,1.37a13,13,0,0,0-.11,1.42,1.8,1.8,0,0,0,.46,1.43,1.54,1.54,0,0,0,.86.29v.76H45.49l-1.78-9.76h-.47l-1,6.14-.13,1,0,.25c0,.09,0,.19,0,.28a1.47,1.47,0,0,0,.22,1,2,2,0,0,0,1,.32v.76H38.37v-.76a1.42,1.42,0,0,0,.88-.52,4.21,4.21,0,0,0,.46-1.59l2-13.24c0-.27.08-.51.11-.71a8.23,8.23,0,0,0,.07-1,1.23,1.23,0,0,0-.23-.9,2.32,2.32,0,0,0-1-.3V.48h4.54A4.34,4.34,0,0,1,47.62,1c1,.65,1.54,1.9,1.54,3.75a7.78,7.78,0,0,1-.26,2A5.56,5.56,0,0,1,48,8.62a3.87,3.87,0,0,1-1,1,8.06,8.06,0,0,1-1.06.52c.05.3.09.49.11.57l1.27,6.66a4.58,4.58,0,0,0,.55,1.7,1.23,1.23,0,0,0,.83.39,1.31,1.31,0,0,0,.86-.84A23,23,0,0,0,50.36,15L52.05,4c.06-.37.11-.7.15-1a7.42,7.42,0,0,0,0-.75c0-.41-.08-.67-.25-.78a2.09,2.09,0,0,0-.94-.21V.48h3.77l1,13.91,5-13.91h3.51v.76a1.46,1.46,0,0,0-.79.4A3.71,3.71,0,0,0,63,3.31L61,16.59c0,.29-.09.58-.13.88s-.05.55-.05.75Q60.79,19,61,19.15Zm-15.14-11a7.46,7.46,0,0,0,.53-1.62,9.54,9.54,0,0,0,.25-2.26,5.31,5.31,0,0,0-.35-2,1.18,1.18,0,0,0-1.16-.81.54.54,0,0,0-.5.26,3.37,3.37,0,0,0-.26,1.05l-1,6.76a4.28,4.28,0,0,0,1.31-.2A2.17,2.17,0,0,0,45.89,8.17ZM73.21,19.51v.71h-5v-.71a1.61,1.61,0,0,0,1-.41,1.92,1.92,0,0,0,.3-1.29c0-.22,0-.75-.09-1.58,0-.17-.06-.89-.16-2.15H65.68l-1,3c-.06.2-.12.42-.17.66a3.4,3.4,0,0,0-.08.69q0,.62.21.78a1.9,1.9,0,0,0,.86.3v.71H62.29v-.71A2,2,0,0,0,63,19a6.47,6.47,0,0,0,.72-1.56L69.82.07h.43L71.83,17A6.77,6.77,0,0,0,72.22,19,1.23,1.23,0,0,0,73.21,19.51Zm-4.08-6.6-.61-7.18-2.44,7.18ZM82.52,6.14l.6-5.66H74l-.63,5,.42.2a8.71,8.71,0,0,1,1.46-3.16,2.57,2.57,0,0,1,2.1-1.06L75,17.35a3.36,3.36,0,0,1-.68,1.85,1.57,1.57,0,0,1-1,.26v.76H78.7v-.76a2.69,2.69,0,0,1-1.11-.3c-.18-.13-.27-.45-.27-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.14-1L79.8,1.5a1.87,1.87,0,0,1,1.39.63c.58.7.88,2,.91,3.94ZM88.84.48H83.92v.76a2.31,2.31,0,0,1,1,.31c.15.13.23.44.23.94a5.56,5.56,0,0,1,0,.67c0,.26-.08.57-.14,1l-2,13.24a4,4,0,0,1-.47,1.59,1.36,1.36,0,0,1-.87.52v.76H86.5v-.76a2,2,0,0,1-1-.32,1.32,1.32,0,0,1-.23-.94c0-.09,0-.18,0-.28s0-.2,0-.3l.13-1,2-13.24A4.09,4.09,0,0,1,88,1.76a1.45,1.45,0,0,1,.87-.52ZM99.11,7.11a21,21,0,0,1-2,9.07q-2.16,4.61-5,4.6a3.28,3.28,0,0,1-2.88-1.92,10.29,10.29,0,0,1-1.11-5.14,21.08,21.08,0,0,1,2.07-9.19C91.63,1.51,93.25,0,95,0A3.36,3.36,0,0,1,98,1.92,10,10,0,0,1,99.11,7.11ZM96.72,4.6a7.18,7.18,0,0,0-.41-2.55c-.28-.7-.7-1-1.29-1-1.37,0-2.52,2.17-3.46,6.53a40.7,40.7,0,0,0-1.06,8.26,10,10,0,0,0,.2,2.2c.26,1.18.74,1.77,1.43,1.77a2.2,2.2,0,0,0,1.78-1.29,18.75,18.75,0,0,0,1.65-4.93,41.1,41.1,0,0,0,.85-4.83A34.65,34.65,0,0,0,96.72,4.6Zm11.1-3.36a1.66,1.66,0,0,1,.9.33,2.08,2.08,0,0,1,.4,1.48,12.85,12.85,0,0,1-.1,1.34c0,.41-.11.87-.18,1.39l-1.29,8.34L104,.48h-3.33v.76a1.7,1.7,0,0,1,.78.24,2,2,0,0,1,.51,1.06l.07.3L100.13,15a24,24,0,0,1-.75,3.61,1.35,1.35,0,0,1-.93.9v.76h3.45v-.76a1.67,1.67,0,0,1-.88-.32,1.88,1.88,0,0,1-.44-1.44,7.09,7.09,0,0,1,0-.79c0-.43.13-1.09.27-2l1.64-10.57,4.29,16.33h.41l2.3-15a28.78,28.78,0,0,1,.67-3.42c.18-.59.44-.93.78-1l.23-.06V.48h-3.39ZM125,7.11a21,21,0,0,1-2,9.07c-1.45,3.07-3.1,4.6-5,4.6a3.28,3.28,0,0,1-2.87-1.92A10.29,10.29,0,0,1,114,13.72a21.22,21.22,0,0,1,2.06-9.19Q118.22,0,120.91,0a3.36,3.36,0,0,1,2.92,1.92A10,10,0,0,1,125,7.11ZM122.59,4.6a7,7,0,0,0-.41-2.55,1.37,1.37,0,0,0-1.28-1c-1.37,0-2.53,2.17-3.46,6.53a40.11,40.11,0,0,0-1.07,8.26,10.65,10.65,0,0,0,.2,2.2q.39,1.77,1.44,1.77a2.2,2.2,0,0,0,1.77-1.29,18.29,18.29,0,0,0,1.66-4.93,45.71,45.71,0,0,0,.85-4.83A36.53,36.53,0,0,0,122.59,4.6Zm14.26-3.3.24-.06V.48h-3.4v.76a1.74,1.74,0,0,1,.91.33,2.13,2.13,0,0,1,.4,1.48c0,.28,0,.73-.11,1.34,0,.41-.11.87-.18,1.39l-1.29,8.34L129.83.48h-3.32v.76a1.69,1.69,0,0,1,.77.24,1.9,1.9,0,0,1,.51,1.06l.07.3L126,15a27,27,0,0,1-.75,3.61,1.35,1.35,0,0,1-.93.9v.76h3.44v-.76a1.67,1.67,0,0,1-.88-.32,1.92,1.92,0,0,1-.44-1.44c0-.26,0-.52,0-.79.05-.43.13-1.09.27-2l1.65-10.57,4.29,16.33h.41l2.29-15a31.07,31.07,0,0,1,.67-3.42C136.25,1.72,136.52,1.38,136.85,1.3Zm8.52,13.06a8.55,8.55,0,0,1-2.19,3.87,4.44,4.44,0,0,1-2.94,1,1,1,0,0,1-.68-.21.9.9,0,0,1-.24-.7,3.4,3.4,0,0,1,0-.48c0-.14,0-.28,0-.44l2.15-14.08a3.69,3.69,0,0,1,.5-1.64,2.22,2.22,0,0,1,1.16-.48V.48H138v.76a2.2,2.2,0,0,1,1,.31c.16.13.24.44.24.94a5.73,5.73,0,0,1-.05.67c0,.26-.07.57-.13,1l-2,13.23a4,4,0,0,1-.47,1.6,1.36,1.36,0,0,1-.87.52v.76h9.16l1-5.74ZM151.79.48v.76a1.52,1.52,0,0,1,.76.2,1.21,1.21,0,0,1,.37,1,4.09,4.09,0,0,1-.17,1.09c-.07.24-.16.5-.27.79L150.32,9.8l-1.18-6.44a4.51,4.51,0,0,1-.08-.6,4.37,4.37,0,0,1,0-.46c0-.43.09-.71.27-.83a1.75,1.75,0,0,1,.87-.23V.48h-4.63v.76a.94.94,0,0,1,.8.4,5.08,5.08,0,0,1,.42,1.44L148.2,11l-1,6.35a3.35,3.35,0,0,1-.61,1.73,1.91,1.91,0,0,1-1.06.39v.76h5.32v-.76a2,2,0,0,1-.95-.25,1.29,1.29,0,0,1-.33-1.05,7.29,7.29,0,0,1,.06-.73q.06-.51.12-.84l.82-5.46,3.12-7.89a5.54,5.54,0,0,1,.89-1.59,1.28,1.28,0,0,1,.63-.41V.48Z',opacity:1,strokeColor:'',fillColor:'#192760',width:155.237,height:20.783,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;}if(stampCollection){stampCollection.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.currentStampAnnotation=stampCollection;return stampCollection;}}};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.saveStampAnnotations=function(){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_stamp');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp'];}// eslint-disable-next-line
var annotations=new Array();for(var j=0;j<this.pdfViewerBase.pageCount;j++){annotations[j]=[];}if(storeObject&&!this.pdfViewer.annotationSettings.skipDownload){var annotationCollection=JSON.parse(storeObject);for(var i=0;i<annotationCollection.length;i++){var newArray=[];var pageAnnotationObject=annotationCollection[i];if(pageAnnotationObject){for(var z=0;pageAnnotationObject.annotations.length>z;z++){this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex));if(this.pdfViewer.nameTable[pageAnnotationObject.annotations[z].randomId]){pageAnnotationObject.annotations[z].wrapperBounds=this.pdfViewer.nameTable[pageAnnotationObject.annotations[z].randomId].wrapper.bounds;}}newArray=pageAnnotationObject.annotations;}annotations[pageAnnotationObject.pageIndex]=newArray;}}return JSON.stringify(annotations);};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.storeStampInSession=function(pageNumber,annotation){// eslint-disable-next-line
var sessionSize=Math.round(JSON.stringify(window.sessionStorage).length/1024);var currentAnnotation=Math.round(JSON.stringify(annotation).length/1024);if(sessionSize+currentAnnotation>4500){this.pdfViewerBase.isStorageExceed=true;this.pdfViewer.annotationModule.clearAnnotationStorage();}// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_stamp');var index=0;if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp'];}if(!storeObject){this.pdfViewer.annotationModule.storeAnnotationCollections(annotation,pageNumber);var shapeAnnotation={pageIndex:pageNumber,annotations:[]};shapeAnnotation.annotations.push(annotation);index=shapeAnnotation.annotations.indexOf(annotation);var annotationCollection=[];annotationCollection.push(shapeAnnotation);var annotationStringified=JSON.stringify(annotationCollection);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_stamp',annotationStringified);}}else{this.pdfViewer.annotationModule.storeAnnotationCollections(annotation,pageNumber);var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_stamp');}var pageIndex=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[pageIndex]){annotObject[pageIndex].annotations.push(annotation);index=annotObject[pageIndex].annotations.indexOf(annotation);}else{var markupAnnotation={pageIndex:pageNumber,annotations:[]};markupAnnotation.annotations.push(annotation);index=markupAnnotation.annotations.indexOf(annotation);annotObject.push(markupAnnotation);}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_stamp',annotationStringified);}}return index;};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.updateSessionStorage=function(annotation,id,type){if(id!=null){for(var p=0;p<annotation.annotations.length;p++){if(annotation.annotations[p].id===id){annotation=annotation.annotations[p];break;}}}if(type==='Rotate'){annotation=annotation.annotations[0];}// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_stamp');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp'];}if(storeObject){// eslint-disable-next-line
var bounds=annotation.bounds;var annotObject=JSON.parse(storeObject);for(var k=0;k<annotObject.length;k++){// eslint-disable-next-line
var currentAnnot=annotObject[k];for(var j=0;j<currentAnnot.annotations.length;j++){if(annotObject[k].annotations[j]!=null&&annotObject[k].annotations[j].randomId===annotation.id){if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_stamp');}// eslint-disable-next-line max-len
var pageIndex=this.pdfViewer.annotationModule.getPageCollection(annotObject,annotObject[k].annotations[j].pageNumber);if(type!=='delete'){if(annotObject[pageIndex]){// eslint-disable-next-line max-len
//annotObject[k].annotations[j].modifiedDate = new Date().toLocaleString();
if(annotation.wrapper.children[1]){annotObject[k].annotations[j].opacity=annotation.wrapper.children[1].style.opacity;}else{annotObject[k].annotations[j].opacity=annotation.wrapper.children[0].style.opacity;}annotObject[k].annotations[j].rotateAngle=annotation.rotateAngle;// eslint-disable-next-line max-len
annotObject[k].annotations[j].bounds={left:bounds.x,top:bounds.y,width:annotation.wrapper.actualSize.width,height:annotation.wrapper.actualSize.height,right:bounds.right,bottom:bounds.bottom};}}else{annotObject[k].annotations.splice(j,1);}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){// eslint-disable-next-line max-len
this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_stamp',annotationStringified);}break;}}}}};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.saveImportedStampAnnotations=function(annotation,pageNumber){var annotationObject=null;var isDynamic=false;// eslint-disable-next-line
var stampAnnotation;// eslint-disable-next-line
var stampName=annotation['IsDynamic'];annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings);annotation.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);if(annotation.Subject&&stampName){stampAnnotation=this.retrieveDynamicStampAnnotation(annotation.Subject);isDynamic=true;}else if(annotation.Subject){stampAnnotation=this.retrievestampAnnotation(annotation.Subject);if(annotation.Subject==='Accepted'||annotation.Subject==='Rejected'){// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(stampAnnotation.pathdata);stampAnnotation.pathdata=sf.drawings.splitArrayCollection(collectionData);isDynamic=true;}}else{// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings);annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:'image',author:annotation.Author,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,allowedInteractions:annotation.allowedInteractions,note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,stampFillcolor:annotation.FillColor,// eslint-disable-next-line max-len
rotateAngle:annotation.RotateAngle,creationDate:annotation.ModifiedDate,pageNumber:pageNumber,icon:'',stampAnnotationPath:this.findImageData(annotation.Apperarance),randomId:'image',isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:' ',bounds:this.calculateImagePosition(annotation.Rect,true),annotName:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,author:annotation.Author,modifiedDate:annotation.ModifiedDate},shapeAnnotationType:'stamp',// eslint-disable-next-line max-len
annotationSelectorSettings:this.getSettings(annotation),annotationSettings:annotation.annotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.isPrint,isCommentLock:annotation.IsCommentLock,isMaskedImage:annotation.IsMaskedImage,customStampName:annotation.CustomStampName};this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_stamp');}if(stampAnnotation){annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:'path',author:annotation.Author,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,stampFillcolor:stampAnnotation.stampFillColor,// eslint-disable-next-line max-len
rotateAngle:annotation.RotateAngle,creationDate:annotation.ModifiedDate,pageNumber:pageNumber,icon:stampAnnotation.iconName,stampAnnotationPath:stampAnnotation.pathdata,randomId:'stamp',isDynamicStamp:false,dynamicText:this.dynamicText,// eslint-disable-next-line max-len
bounds:this.calculateImagePosition(annotation.Rect,true),annotName:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,author:annotation.Author,modifiedDate:annotation.ModifiedDate},shapeAnnotationType:'stamp',// eslint-disable-next-line max-len
annotationSelectorSettings:this.getSettings(annotation),annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.isPrint,isCommentLock:annotation.IsCommentLock,isMaskedImage:annotation.IsMaskedImage,customStampName:''};if(isDynamic){annotationObject.dynamicText=this.findDynamicText(annotation.Apperarance,annotation.Subject);annotationObject.isDynamicStamp=true;}this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_stamp');}};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.updateStampAnnotationCollections=function(annotation,pageNumber){// eslint-disable-next-line
var annotationObject=null;// eslint-disable-next-line
var stampAnnotation;// eslint-disable-next-line
var stampName=annotation['IsDynamic'];// eslint-disable-next-line
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);var isImageStamp=this.stampImageData(annotation);if(annotation.Subject&&stampName&&annotation.Subject!=='Draft'&&!isImageStamp){stampAnnotation=this.retrieveDynamicStampAnnotation(annotation.Subject);}else if(annotation.Subject&&!isImageStamp){stampAnnotation=this.retrievestampAnnotation(annotation.Subject);}else{// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings);if(annotation.IsLocked){annotation.AnnotationSettings.isLock=annotation.IsLocked;}annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:'image',author:annotation.Author,modifiedDate:annotation.ModifiedDate,allowedInteractions:annotation.allowedInteractions,note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,stampFillcolor:annotation.StampFillColor,// eslint-disable-next-line max-len
rotateAngle:annotation.RotateAngle,pageNumber:pageNumber,randomId:'stamp',isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,// eslint-disable-next-line max-len
annotationId:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,author:annotation.Author,modifiedDate:annotation.ModifiedDate},shapeAnnotationType:'stamp',annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.isPrint,isMaskedImage:annotation.IsMaskedImage,customStampName:annotation.CustomStampName};return annotationObject;}if(stampAnnotation){// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings);if(annotation.IsLocked){annotation.AnnotationSettings.isLock=annotation.IsLocked;}// eslint-disable-next-line max-len
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:'path',author:annotation.Author,allowedInteractions:annotation.allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,stampFillcolor:annotation.StampFillColor,// eslint-disable-next-line max-len
rotateAngle:annotation.RotateAngle,creationDate:stampAnnotation.creationDate,pageNumber:pageNumber,icon:stampAnnotation.iconName,stampAnnotationPath:stampAnnotation.pathdata,randomId:'stamp',isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,// eslint-disable-next-line max-len
bounds:{left:annotation.Rect.X,top:annotation.Rect.Y,width:annotation.Rect.Width,height:annotation.Rect.Height},annotationId:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,author:annotation.Author,modifiedDate:annotation.ModifiedDate},shapeAnnotationType:'stamp',customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.isPrint,isMaskedImage:annotation.IsMaskedImage,customStampName:''};return annotationObject;}};StampAnnotation.prototype.stampImageData=function(annot){var isStampImage=false;if(annot&&annot.Apperarance){for(var j=0;j<annot.Apperarance.length;j++){if(annot.Apperarance[j].imagedata){isStampImage=true;break;}}}return isStampImage;};// eslint-disable-next-line
StampAnnotation.prototype.findImageData=function(Apperance){if(Apperance){for(var j=0;j<Apperance.length;j++){// eslint-disable-next-line
var stampShapes=Apperance[j];// eslint-disable-next-line
var imageData=stampShapes['imagedata'];if(imageData){return imageData;}}}return'';};// eslint-disable-next-line
StampAnnotation.prototype.findDynamicText=function(apperance,subject){var dynamicText='';if(apperance){for(var d=0;d<apperance.length;d++){// eslint-disable-next-line
var stampShapes=apperance[d];// eslint-disable-next-line
var stampType=stampShapes['type'];// eslint-disable-next-line
var isImport=stampShapes['isImport'];// eslint-disable-next-line
if(stampType==='string'&&stampShapes['text']!==undefined){// eslint-disable-next-line
var text=void 0;if(!isImport){// eslint-disable-next-line
var stampText=stampShapes['text'].split('(');if(stampText[1]){// eslint-disable-next-line
text=stampText[1].split(')')[0];}else{// eslint-disable-next-line
text=stampShapes['text'];}}else{// eslint-disable-next-line
text=stampShapes['text'];}// eslint-disable-next-line
if(text.toLowerCase()!==subject.toLowerCase()){dynamicText+=text;}}}return dynamicText;}return dynamicText;};// eslint-disable-next-line
StampAnnotation.prototype.getAnnotations=function(pageIndex,shapeAnnotations){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_stamp');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp'];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=shapeAnnotations;}}else{annotationCollection=shapeAnnotations;}return annotationCollection;};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.modifyInCollection=function(property,pageNumber,annotationBase){this.pdfViewerBase.updateDocumentEditedProperty(true);var currentAnnotObject=null;var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations!=null&&annotationBase){for(var i=0;i<pageAnnotations.length;i++){if(annotationBase.annotName===pageAnnotations[i].annotName){if(property==='bounds'){// eslint-disable-next-line max-len
pageAnnotations[i].bounds={left:annotationBase.wrapper.bounds.x,top:annotationBase.wrapper.bounds.y,width:annotationBase.wrapper.bounds.width,height:annotationBase.wrapper.bounds.height};pageAnnotations[i].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();}this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],pageNumber);}}this.manageAnnotations(pageAnnotations,pageNumber);}return currentAnnotObject;};StampAnnotation.prototype.manageAnnotations=function(pageAnnotations,pageNumber){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_stamp');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp'];}if(storeObject){var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_stamp');}var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_stamp',annotationStringified);}}};/**
     * This method used to add annotations with using programmatically.
     *
     * @param annotationObject - It describes type of annotation object
     * @param offset - It describes about the annotation bounds or location
     * @param pageNumber - It describes about the annotation page number
     * @param dynamicStampItem - It describe which type of dynamic stamp
     * @param signStampItem - It describe which type of sign stamp
     * @param standardBusinessStampItem - It describe which type of standard business stamp
     * @returns Object
     * @private
     */StampAnnotation.prototype.updateAddAnnotationDetails=function(annotationObject,offset,pageNumber,dynamicStampItem,signStampItem,standardBusinessStampItem){//Creating new object if annotationObject is null
if(!annotationObject){annotationObject={offset:{x:10,y:10},pageNumber:0,width:undefined,height:undefined};offset=annotationObject.offset;}else if(!annotationObject.offset)offset={x:10,y:10};else offset=annotationObject.offset;//Checking the all stamps are present
if(!dynamicStampItem&&!signStampItem&&!standardBusinessStampItem){dynamicStampItem=DynamicStampItem.Approved;}//Creating the CurrentDate and Annotation name
var currentDateString=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();var page=pageNumber;//Creating annotation settings
var stampAnnotations=[];var stampName='';var stampAnnotationtype='Stamp';var apperarance=[];var isDynamic=false;var author=annotationObject.author?annotationObject.author:'Guest';var annotationSelectorSettings=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;var annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings);var allowedInteractions=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;annotationSettings.isLock=annotationObject.isLock?annotationObject.isLock:false;annotationSettings.minHeight=annotationObject.minHeight?annotationObject.minHeight:0;annotationSettings.minWidth=annotationObject.minWidth?annotationObject.minWidth:0;annotationSettings.maxWidth=annotationObject.maxWidth?annotationObject.maxWidth:0;annotationSettings.maxHeight=annotationObject.maxHeight?annotationObject.maxHeight:0;//checking the stamp is custom and Updating the string and datetime values for dynamic stamp
if(annotationObject.customStamps&&annotationObject.customStamps[0].customStampName){apperarance[0]={imagedata:annotationObject.customStamps[0].customStampImageSource,isImport:true};this.customStampName=annotationObject.customStamps[0].customStampName;this.pdfViewerBase.customStampCollection.push(annotationObject.customStamps[0]);stampAnnotationtype='Image';annotationObject.width=annotationObject.width?annotationObject.width:100;annotationObject.height=annotationObject.height?annotationObject.height:100;}else if(dynamicStampItem){var dateTime=[];dateTime=currentDateString.split(' ');stampName=dynamicStampItem.toString();apperarance[0]={baseFontName:'Helvetica-BoldOblique',currentFontname:'95b303ab-d397-438a-83af-e2ff8a9900f1',fontSize:10,isImport:true,text:'By '+author+' at '+dateTime[1]+dateTime[2]+' , '+dateTime[0],type:'string'};isDynamic=true;annotationObject.width=annotationObject.width?annotationObject.width:140;annotationObject.height=annotationObject.height?annotationObject.height:55;}else if(signStampItem){stampName=signStampItem.toString();if(signStampItem==SignStampItem.Accepted||signStampItem==SignStampItem.Rejected){annotationObject.width=annotationObject.width?annotationObject.width:35;annotationObject.height=annotationObject.height?annotationObject.height:35;}else if(signStampItem==SignStampItem.SignHere){annotationObject.width=annotationObject.width?annotationObject.width:110;annotationObject.height=annotationObject.height?annotationObject.height:30;}else if(signStampItem==SignStampItem.Witness){annotationObject.width=annotationObject.width?annotationObject.width:130;annotationObject.height=annotationObject.height?annotationObject.height:30;}else if(signStampItem==SignStampItem.InitialHere){annotationObject.width=annotationObject.width?annotationObject.width:90;annotationObject.height=annotationObject.height?annotationObject.height:30;}}else if(standardBusinessStampItem){stampName=standardBusinessStampItem.toString();if(standardBusinessStampItem==StandardBusinessStampItem.Final||standardBusinessStampItem==StandardBusinessStampItem.Draft){annotationObject.width=annotationObject.width?annotationObject.width:110;annotationObject.height=annotationObject.height?annotationObject.height:30;}else if(standardBusinessStampItem==StandardBusinessStampItem.Void){annotationObject.width=annotationObject.width?annotationObject.width:100;annotationObject.height=annotationObject.height?annotationObject.height:30;}else{annotationObject.width=annotationObject.width?annotationObject.width:130;annotationObject.height=annotationObject.height?annotationObject.height:30;}}//Creating Annotation objects with it's proper properties
var stickyNotes={AllowedInteractions:annotationObject.allowedInteractions?annotationObject.allowedInteractions:allowedInteractions,AnnotName:annotationName,AnnotType:'stamp',AnnotationSelectorSettings:annotationObject.annotationSelectorSettings?annotationObject.annotationSelectorSettings:annotationSelectorSettings,AnnotationSettings:annotationSettings,Apperarance:apperarance?apperarance:null,Author:author,Comments:null,CreatedDate:currentDateString,CustomData:annotationObject.customData?annotationObject.customData:null,ExistingCustomData:null,FillColor:'#192760',Icon:0,IsCommentLock:false,IsDynamic:isDynamic,IsLocked:annotationObject.isLock?annotationObject.isLock:false,IsPrint:annotationObject.isPrint?annotationObject.isPrint:true,ModifiedDate:'',Name:null,Note:'',Opacity:annotationObject.opacity?annotationObject.opacity:1,Rect:{X:offset.x,Y:offset.y,Width:annotationObject.width,Height:annotationObject.height,Left:offset.x,Top:offset.y,Location:{X:offset.x,Y:offset.y},Size:{Height:annotationObject.height,IsEmpty:false,Width:annotationObject.width}},RotateAngle:0,StampAnnotationtype:stampAnnotationtype,State:'',StateModel:'',StrokeColor:'#dce3ef',Subject:stampName,matrix:null,CustomStampName:this.customStampName?this.customStampName:'',pageNumber:page};//Adding the annotation object to an array and return it
stampAnnotations[0]=stickyNotes;return{stampAnnotations:stampAnnotations};};/**
     * @private
    */StampAnnotation.prototype.triggerAnnotationAdd=function(annot,annotation){// eslint-disable-next-line
var settings={opacity:annot.opacity,borderColor:annot.strokeColor,borderWidth:annot.thickness,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate,// eslint-disable-next-line
fillColor:annot.fillColor,fontSize:annot.fontSize,width:annot.bounds.width,height:annot.bounds.height,fontColor:annot.fontColor,fontFamily:annot.fontFamily,defaultText:annot.dynamicText,fontStyle:annot.font,textAlignment:annot.textAlign};this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,'Stamp',annot.bounds,settings);};return StampAnnotation;}();/**
 * StickyNotes module
 */var StickyNotesAnnotation=/** @class */function(){/**
     * @param pdfViewer
     * @param pdfViewerBase
     * @param pdfViewer
     * @param pdfViewerBase
     * @private
     */function StickyNotesAnnotation(pdfViewer,pdfViewerBase){this.commentsCount=0;this.commentsreplyCount=0;this.commentContextMenu=[];this.isAccordionContainer=true;this.isCreateContextMenu=false;this.isCommentsSelected=false;/**
         * @private
         */this.isAddAnnotationProgramatically=false;/**
         * @private
         */this.isEditableElement=false;this.isPageCommentsRendered=false;this.isCommentsRendered=false;/**
         * @private
         */this.isAnnotationRendered=false;this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;this.opacity=this.pdfViewer.stickyNotesSettings.opacity?this.pdfViewer.stickyNotesSettings.opacity:1;}/**
     * @param stickyAnnotations
     * @param pageNumber
     * @param canvas
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.renderStickyNotesAnnotations=function(stickyAnnotations,pageNumber,canvas){if(stickyAnnotations){if(stickyAnnotations.length>0){for(var i=0;i<stickyAnnotations.length;i++){// eslint-disable-next-line
var annotation=stickyAnnotations[i];var isAdded=false;// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(pageNumber,null,'sticky');if(pageAnnotations!==null){for(var k=0;k<pageAnnotations.length;k++){var annotationName=annotation.annotName?annotation.annotName:annotation.AnnotName;var pageAnnotationName=pageAnnotations[k].annotName?pageAnnotations[k].annotName:pageAnnotations[k].AnnotName;if(pageAnnotationName&&annotationName&&pageAnnotationName===annotationName){isAdded=true;break;}}}if(!isAdded){annotation.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(annotation,pageNumber,annotation.AnnotType);var annotationObject=null;// eslint-disable-next-line
var position=annotation.Bounds;var author=annotation.Author;// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);annotation.allowedInteractions=annotation.AllowedInteraction?annotation.AllowedInteraction:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);var isPrint=true;if(annotation.annotationAddMode==='Imported Annotation'){isPrint=annotation.IsPrint;}else{isPrint=annotation.AnnotationSettings.isPrint;}if(annotation.IsLock){annotation.AnnotationSettings.isLock=annotation.IsLock;}annotationObject={// eslint-disable-next-line max-len
shapeAnnotationType:'sticky',author:author,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,opacity:annotation.Opacity,state:annotation.State,stateModel:annotation.StateModel,pathData:'',comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:author},pageNumber:pageNumber,// eslint-disable-next-line max-len
bounds:{left:annotation.Bounds.X,top:annotation.Bounds.Y,width:annotation.Bounds.Width,height:annotation.Bounds.Height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},annotName:annotation.AnnotName,color:annotation.color,annotationSelectorSettings:this.getSettings(annotation),customData:this.pdfViewer.annotation.getCustomData(annotation),annotationSettings:annotation.AnnotationSettings,allowedInteractions:annotation.allowedInteractions,isPrint:isPrint,isCommentLock:annotation.IsCommentLock};var annot=void 0;// eslint-disable-next-line max-len
annotation.AnnotationSelectorSettings=annotation.AnnotationSelectorSettings?annotation.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annot={// eslint-disable-next-line max-len
author:author,modifiedDate:annotationObject.modifiedDate,annotName:annotationObject.annotName,pageIndex:pageNumber,bounds:{x:position.Left,y:position.Top,width:position.Width,height:position.Height},strokeColor:'transparent',stampStrokeColor:'',data:this.setImageSource(),shapeAnnotationType:'StickyNotes',subject:annotationObject.subject,notes:annotationObject.note,opacity:annotationObject.opacity,id:annotationObject.annotName,fillColor:annotationObject.color,annotationSelectorSettings:annotation.AnnotationSelectorSettings,annotationSettings:annotationObject.annotationSettings,// eslint-disable-next-line max-len
annotationAddMode:annotation.annotationAddMode,isPrint:isPrint,isCommentLock:annotationObject.isCommentLock};if(canvas){this.drawStickyNotes(position.Left,position.Top,position.Width,position.Height,pageNumber,annot,canvas);}else{this.pdfViewer.add(annot);this.drawStickyNotes(position.Left,position.Top,position.Width,position.Height,pageNumber,annot);this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_sticky');}if(this.isAddAnnotationProgramatically){// eslint-disable-next-line
var settings={opacity:annot.opacity,borderColor:annot.strokeColor,borderWidth:annot.thickness,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate,// eslint-disable-next-line
fillColor:annot.fillColor,fontSize:annot.fontSize,width:annot.bounds.width,height:annot.bounds.height,fontColor:annot.fontColor,fontFamily:annot.fontFamily,defaultText:annot.dynamicText,fontStyle:annot.font,textAlignment:annot.textAlign};this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,'StickyNotes',annot.bounds,settings);}}}}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.getSettings=function(annotation){var selector=this.pdfViewer.annotationSelectorSettings;if(annotation.AnnotationSelectorSettings){selector=annotation.AnnotationSelectorSettings;}else if(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings){selector=this.pdfViewer.stickyNotesSettings.annotationSelectorSettings;}return selector;};/**
     * @param X
     * @param Y
     * @param width
     * @param height
     * @param pageIndex
     * @param annotation
     * @param canvas
     * @param X
     * @param Y
     * @param width
     * @param height
     * @param pageIndex
     * @param annotation
     * @param canvas
     * @param X
     * @param Y
     * @param width
     * @param height
     * @param pageIndex
     * @param annotation
     * @param canvas
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.drawStickyNotes=function(X,Y,width,height,pageIndex,annotation,canvas){var _this=this;var annot;var annotationObject=null;var image=new Image();// eslint-disable-next-line
var proxy=this;image.onload=function(){var commentsDivid;var annotationName;// eslint-disable-next-line max-len
var author=_this.pdfViewer.annotationSettings.author!=='Guest'?_this.pdfViewer.annotationSettings.author:_this.pdfViewer.stickyNotesSettings.author;if(annotation){annot={// eslint-disable-next-line max-len
author:annotation.author,modifiedDate:annotation.modifiedDate,annotName:annotation.annotName,data:image.src,bounds:{x:X,y:Y,width:width,height:height},subject:annotation.subject,notes:annotation.notes,opacity:annotation.opacity,id:annotation.annotName,shapeAnnotationType:'StickyNotes',strokeColor:'transparent',stampStrokeColor:'',pageIndex:annotation.pageIndex,isPrint:annotation.isPrint};}else{annotationName=_this.pdfViewer.annotation.createGUID();commentsDivid=proxy.addComments('sticky',pageIndex+1,'',annotationName,'',author);if(commentsDivid){document.getElementById(commentsDivid).id=annotationName;}// eslint-disable-next-line
var annotationSelectorSettings=_this.pdfViewer.stickyNotesSettings.annotationSelectorSettings?_this.pdfViewer.stickyNotesSettings.annotationSelectorSettings:_this.pdfViewer.annotationSelectorSettings;var isPrint=_this.pdfViewer.stickyNotesSettings.isPrint;annot={// eslint-disable-next-line max-len
bounds:{x:X,y:Y,width:width,height:height},pageIndex:pageIndex,data:image.src,modifiedDate:_this.getDateAndTime(),shapeAnnotationType:'StickyNotes',strokeColor:'transparent',stampStrokeColor:'',annotName:annotationName,id:annotationName,opacity:_this.opacity,isPrint:isPrint};// eslint-disable-next-line max-len
var isLock=_this.pdfViewer.stickyNotesSettings.isLock?_this.pdfViewer.stickyNotesSettings.isLock:_this.pdfViewer.annotationSettings.isLock;// eslint-disable-next-line
var allowedInteractions=_this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);annotationObject={// eslint-disable-next-line max-len
author:author,allowedInteractions:allowedInteractions,modifiedDate:_this.getDateAndTime(),subject:'Sticky Note',shapeAnnotationType:'sticky',pageNumber:pageIndex,// eslint-disable-next-line max-len
note:'',opacity:_this.opacity,pathData:'',state:'',stateModel:'',color:'rgba(255,255,0)',comments:[],annotName:annotationName,// eslint-disable-next-line max-len
bounds:{left:X,top:Y,width:width,height:height},review:{state:'',stateModel:'',modifiedDate:'',author:author},annotationSelectorSettings:annotationSelectorSettings,// eslint-disable-next-line max-len
customData:_this.pdfViewer.annotationModule.getData('sticky'),annotationSettings:{isLock:isLock},isPrint:isPrint,isCommentLock:false};}if(!annotation){// eslint-disable-next-line max-len
proxy.pdfViewer.annotation.addAction(pageIndex,null,annot,'Addition','',annot,annot);proxy.pdfViewer.add(annot);proxy.pdfViewer.annotationModule.storeAnnotations(pageIndex,annotationObject,'_annotations_sticky');}if(proxy.pdfViewerBase.isAddComment){// eslint-disable-next-line max-len
// eslint-disable-next-line
var bounds={left:annot.bounds.x,top:annot.bounds.y,width:annot.bounds.width,height:annot.bounds.height};_this.pdfViewerBase.updateDocumentEditedProperty(true);// eslint-disable-next-line
var settings={opacity:annot.opacity,author:author,modifiedDate:annot.modifiedDate,subject:annot.shapeAnnotationType};_this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,'StickyNotes',bounds,settings);}proxy.pdfViewerBase.isFreeTextSelected=false;if(canvas){// eslint-disable-next-line
proxy.pdfViewer.renderDrawing(canvas,pageIndex);}else{// eslint-disable-next-line
var canvass=document.getElementById(proxy.pdfViewer.element.id+'_annotationCanvas_'+pageIndex);// eslint-disable-next-line
proxy.pdfViewer.renderDrawing(canvass,pageIndex);}if(sf.base.Browser.isDevice){proxy.pdfViewer.select([annot.id],annot.annotationSelectorSettings);}proxy.pdfViewerBase.isAddComment=false;};image.src=this.setImageSource();};StickyNotesAnnotation.prototype.setImageSource=function(){// eslint-disable-next-line max-len
var imageSource='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgd2lkdGg9IjE2IgogICBoZWlnaHQ9IjE1IgogICB2aWV3Qm94PSIwIDAgNC4yMzMzMzMxIDMuOTY4NzQ5NyIKICAgdmVyc2lvbj0iMS4xIj4KICA8ZyBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBkPSJNIDMuODM4OSwwLjk0MTY3IEMgMy42NTM5LDAuNzAzNjcgMy40MTU5LDAuNTE3NjcgMy4xMjQ5LDAuMzg1NjcgMi44MDc5LDAuMjUzNjcgMi40ODk5LDAuMTczNjcgMi4xMTk5LDAuMTczNjcgMS43NDg5LDAuMTczNjcgMS40MzE5LDAuMjUzNjcgMS4xMTQyLDAuMzg1NjcgMC44MjMxNiwwLjUxNzY3IDAuNTg1MTYsMC43MDM2NyAwLjQwMDE2LDAuOTQxNjcgMC4yMTUxNiwxLjE3OTcgMC4xMzUxNiwxLjQxNzcgMC4xMzUxNiwxLjcwODcgMC4xMzUxNiwxLjk0NjcgMC4xODgxNiwyLjE1ODcgMC4zMjAxNiwyLjM0MzcgMC40NTMxNiwyLjU1NTcgMC42MTExNiwyLjcxMzcgMC44MjMxNiwyLjg0NjcgMC43OTIxNiwzLjE1NDcgMC42NTAxNiwzLjM4MjcgMC40NzkxNiwzLjU4NzcgMC40MjgxNiwzLjY2NzcgMC41MTcxNiwzLjc0MTcgMC42OTExNiwzLjcxOTcgMS4wODgyLDMuNjM5NyAxLjQwNDksMy40NTQ3IDEuNjQyOSwzLjE2MzcgMS44MDE5LDMuMTkwNyAxLjk2MDksMy4yMTY3IDIuMTE5OSwzLjIxNjcgMi40ODk5LDMuMjE2NyAyLjgwNzksMy4xMzc3IDMuMTI0OSwzLjAwNTcgMy40MTU5LDIuODcyNyAzLjY4MDksMi42ODc3IDMuODM4OSwyLjQ0OTcgNC4wMjQ5LDIuMjExNyA0LjEwMzksMS45NzM3IDQuMTAzOSwxLjY4MjcgNC4xMDM5LDEuNDE3NyA0LjAyNDksMS4xNTI3IDMuODM4OSwwLjk0MTY3IFoiCiAgICAgICBpZD0icGF0aDE1MjQiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmNzAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjI2NDU4MztzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHBhdGgKICAgICAgIGQ9Ik0gMy4wNDI5LDEuNDE2NyBIIDEuMTkxMiBDIDEuMTExMiwxLjQxNjcgMS4wNTkyLDEuMzYzNyAxLjA1OTIsMS4yODM3IDEuMDU5MiwxLjIwNDcgMS4xMTEyLDEuMTUxNyAxLjE5MTIsMS4xNTE3IEggMy4wNDI5IEMgMy4xMjE5LDEuMTUxNyAzLjE3NDksMS4yMDQ3IDMuMTc0OSwxLjI4MzcgMy4xNzQ5LDEuMzYzNyAzLjEyMTksMS40MTY3IDMuMDQyOSwxLjQxNjcgWiIKICAgICAgIGlkPSJwYXRoMTUzNiIKICAgICAgIHN0eWxlPSJzdHJva2Utd2lkdGg6MC4yNjQ1ODMiIC8+CiAgICA8cGF0aAogICAgICAgZD0iTSAzLjA0MjksMS45NDU3IEggMS4xOTEyIEMgMS4xMTEyLDEuOTQ1NyAxLjA1OTIsMS44OTI3IDEuMDU5MiwxLjgxMjcgMS4wNTkyLDEuNzMzNyAxLjExMTIsMS42ODA3IDEuMTkxMiwxLjY4MDcgSCAzLjA0MjkgQyAzLjEyMTksMS42ODA3IDMuMTc0OSwxLjczMzcgMy4xNzQ5LDEuODEyNyAzLjE3NDksMS44OTI3IDMuMTIxOSwxLjk0NTcgMy4wNDI5LDEuOTQ1NyBaIgogICAgICAgaWQ9InBhdGgxNTQwIgogICAgICAgc3R5bGU9InN0cm9rZS13aWR0aDowLjI2NDU4MyIgLz4KICA8L2c+Cjwvc3ZnPgo=';return imageSource;};/**
     * @private
     */StickyNotesAnnotation.prototype.createRequestForComments=function(){var jsonObject;var proxy=this;var startIndex=0;var pageLimit=20;var pageCount=proxy.pdfViewerBase.pageCount;if(!proxy.isCommentsRendered){if(pageLimit<pageCount){pageCount=pageLimit;}else{proxy.isPageCommentsRendered=true;}}if(!this.isCommentsRendered){// eslint-disable-next-line max-len
jsonObject={pageStartIndex:startIndex,pageEndIndex:pageCount,hashId:this.pdfViewerBase.hashId,action:'RenderAnnotationComments',elementId:this.pdfViewer.dataId,uniqueId:proxy.pdfViewerBase.documentId};proxy.isCommentsRendered=true;}else{// eslint-disable-next-line max-len
jsonObject={pageStartIndex:pageLimit,pageEndIndex:pageCount,hashId:this.pdfViewerBase.hashId,action:'RenderAnnotationComments',elementId:this.pdfViewer.dataId,uniqueId:proxy.pdfViewerBase.documentId};}if(this.pdfViewerBase.jsonDocumentId){// eslint-disable-next-line
jsonObject.documentId=this.pdfViewerBase.jsonDocumentId;}var url=this.pdfViewer.serviceUrl+'/'+this.pdfViewer.serverActionSettings.renderComments;proxy.commentsRequestHandler=new AjaxHandler(proxy.pdfViewer);proxy.commentsRequestHandler.url=url;proxy.commentsRequestHandler.mode=true;proxy.commentsRequestHandler.responseType='text';proxy.commentsRequestHandler.send(jsonObject);// eslint-disable-next-line
proxy.commentsRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;proxy.updateCommentsCollection(data);};// eslint-disable-next-line
proxy.commentsRequestHandler.onFailure=function(result){this.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText);};// eslint-disable-next-line
proxy.commentsRequestHandler.onError=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.renderComments);};};/**
     * @private
    */StickyNotesAnnotation.prototype.updateCommentsCollection=function(jsonObject){var proxy=this;if(jsonObject){if(_typeof(jsonObject)!=='object'){try{jsonObject=JSON.parse(jsonObject);if(_typeof(jsonObject)!=='object'){jsonObject=JSON.parse(jsonObject);}if(_typeof(jsonObject)!=='object'){proxy.pdfViewerBase.onControlError(500,jsonObject,proxy.pdfViewer.serverActionSettings.renderComments);jsonObject=null;}}catch(error){proxy.pdfViewerBase.onControlError(500,jsonObject,proxy.pdfViewer.serverActionSettings.renderComments);jsonObject=null;}}if(jsonObject){var isInitialRender=false;if(proxy.pdfViewerBase.annotationComments){proxy.pdfViewerBase.annotationComments=jsonObject.annotationDetails;}else{proxy.pdfViewerBase.annotationComments=jsonObject.annotationDetails;isInitialRender=true;}if(jsonObject.annotationDetails&&jsonObject.uniqueId===proxy.pdfViewerBase.documentId){proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderComments,jsonObject);proxy.isAnnotationRendered=true;var annotationCollections=void 0;if(proxy.pdfViewerBase.documentAnnotationCollections){annotationCollections=proxy.updateAnnotationsInDocumentCollections(proxy.pdfViewerBase.annotationComments,proxy.pdfViewerBase.documentAnnotationCollections);}else{var newCollection=proxy.pdfViewerBase.createAnnotationsCollection();annotationCollections=proxy.updateAnnotationsInDocumentCollections(proxy.pdfViewerBase.annotationComments,newCollection);}proxy.pdfViewerBase.annotationComments=annotationCollections;proxy.pdfViewerBase.documentAnnotationCollections=annotationCollections;for(var i=jsonObject.startPageIndex;i<jsonObject.endPageIndex;i++){var newData=jsonObject.annotationDetails[i];this.pdfViewerBase.updateModifiedDateToLocalDate(newData,"freeTextAnnotation");this.pdfViewerBase.updateModifiedDateToLocalDate(newData,"measureShapeAnnotation");this.pdfViewerBase.updateModifiedDateToLocalDate(newData,"shapeAnnotation");this.pdfViewerBase.updateModifiedDateToLocalDate(newData,"signatureAnnotation");this.pdfViewerBase.updateModifiedDateToLocalDate(newData,"signatureInkAnnotation");this.pdfViewerBase.updateModifiedDateToLocalDate(newData,"stampAnnotations");this.pdfViewerBase.updateModifiedDateToLocalDate(newData,"stickyNotesAnnotation");this.pdfViewerBase.updateModifiedDateToLocalDate(newData,"textMarkupAnnotation");}for(var j=jsonObject.startPageIndex;j<jsonObject.endPageIndex;j++){if(jsonObject.annotationDetails[j]){proxy.renderAnnotationCollections(jsonObject.annotationDetails[j],j,isInitialRender,jsonObject.endPageIndex);}}if(!proxy.isPageCommentsRendered){proxy.isPageCommentsRendered=true;proxy.pdfViewer.viewerBase.isAnnotationPresent=jsonObject.isAnnotationPresent;proxy.createRequestForComments();}else if(jsonObject.endPageIndex<=20){proxy.pdfViewer.viewerBase.isAnnotationPresent=jsonObject.isAnnotationPresent;}else if(jsonObject.endPageIndex>20){if(!proxy.pdfViewer.viewerBase.isAnnotationPresent){proxy.pdfViewer.viewerBase.isAnnotationPresent=jsonObject.isAnnotationPresent;}}}}}};/**
     * @param excistingAnnotation
     * @param newAnnotation
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.updateAnnotationsInDocumentCollections=function(excistingAnnotation,newAnnotation){for(var i=0;i<this.pdfViewerBase.pageCount;i++){if(excistingAnnotation[i]&&newAnnotation[i]){// eslint-disable-next-line max-len
if(excistingAnnotation[i].textMarkupAnnotation&&excistingAnnotation[i].textMarkupAnnotation.length!==0&&newAnnotation[i].textMarkupAnnotation){for(var j=0;j<excistingAnnotation[i].textMarkupAnnotation.length;j++){// eslint-disable-next-line max-len
this.updateDocumentAnnotationCollections(excistingAnnotation[i].textMarkupAnnotation[j],newAnnotation[i].textMarkupAnnotation);}}// eslint-disable-next-line max-len
if(excistingAnnotation[i].shapeAnnotation&&excistingAnnotation[i].shapeAnnotation.length!==0&&newAnnotation[i].shapeAnnotation){for(var j=0;j<excistingAnnotation[i].shapeAnnotation.length;j++){// eslint-disable-next-line max-len
this.updateDocumentAnnotationCollections(excistingAnnotation[i].shapeAnnotation[j],newAnnotation[i].shapeAnnotation);}}// eslint-disable-next-line max-len
if(excistingAnnotation[i].measureShapeAnnotation&&excistingAnnotation[i].measureShapeAnnotation.length!==0&&newAnnotation[i].measureShapeAnnotation){for(var j=0;j<excistingAnnotation[i].measureShapeAnnotation.length;j++){// eslint-disable-next-line max-len
this.updateDocumentAnnotationCollections(excistingAnnotation[i].measureShapeAnnotation[j],newAnnotation[i].measureShapeAnnotation);}}// eslint-disable-next-line max-len
if(excistingAnnotation[i].stampAnnotations&&excistingAnnotation[i].stampAnnotations.length!==0&&newAnnotation[i].stampAnnotations){for(var j=0;j<excistingAnnotation[i].stampAnnotations.length;j++){// eslint-disable-next-line max-len
this.updateDocumentAnnotationCollections(excistingAnnotation[i].stampAnnotations[j],newAnnotation[i].stampAnnotations);}}// eslint-disable-next-line max-len
if(excistingAnnotation[i].stickyNotesAnnotation&&excistingAnnotation[i].stickyNotesAnnotation.length!==0&&newAnnotation[i].stickyNotesAnnotation){for(var j=0;j<excistingAnnotation[i].stickyNotesAnnotation.length;j++){// eslint-disable-next-line max-len
this.updateDocumentAnnotationCollections(excistingAnnotation[i].stickyNotesAnnotation[j],newAnnotation[i].stickyNotesAnnotation);}}// eslint-disable-next-line max-len
if(excistingAnnotation[i].freeTextAnnotation&&excistingAnnotation[i].freeTextAnnotation.length!==0&&newAnnotation[i].freeTextAnnotation){for(var j=0;j<excistingAnnotation[i].freeTextAnnotation.length;j++){// eslint-disable-next-line max-len
this.updateDocumentAnnotationCollections(excistingAnnotation[i].freeTextAnnotation[j],newAnnotation[i].freeTextAnnotation);}}// eslint-disable-next-line max-len
if(excistingAnnotation[i].signatureAnnotation&&excistingAnnotation[i].signatureAnnotation.length!==0&&newAnnotation[i].signatureAnnotation){for(var j=0;j<excistingAnnotation[i].signatureAnnotation.length;j++){// eslint-disable-next-line max-len
this.updateDocumentAnnotationCollections(excistingAnnotation[i].signatureAnnotation[j],newAnnotation[i].signatureAnnotation);}}// eslint-disable-next-line max-len
if(excistingAnnotation[i].signatureInkAnnotation&&excistingAnnotation[i].signatureInkAnnotation.length!==0&&newAnnotation[i].signatureInkAnnotation){for(var j=0;j<excistingAnnotation[i].signatureInkAnnotation.length;j++){// eslint-disable-next-line max-len
this.updateDocumentAnnotationCollections(excistingAnnotation[i].signatureInkAnnotation[j],newAnnotation[i].signatureInkAnnotation);}}}}return newAnnotation;};// eslint-disable-next-line
StickyNotesAnnotation.prototype.updateDocumentAnnotationCollections=function(excistingAnnotation,newAnnotation){if(newAnnotation.length===0){newAnnotation.push(excistingAnnotation);}else{var isAdded=false;for(var i=0;i<newAnnotation.length;i++){// eslint-disable-next-line max-len
if(excistingAnnotation.AnnotName&&newAnnotation[i].AnnotName&&excistingAnnotation.AnnotName===newAnnotation[i].AnnotName){isAdded=true;break;}}if(!isAdded){newAnnotation.push(excistingAnnotation);}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.renderAnnotationCollections=function(pageAnnotations,pageNumber,isInitialRender,lastPage){// eslint-disable-next-line
var pageCollections=[];if(pageAnnotations.textMarkupAnnotation&&pageAnnotations.textMarkupAnnotation.length!==0){for(var i=0;i<pageAnnotations.textMarkupAnnotation.length;i++){if(this.pdfViewer.dateTimeFormat){// eslint-disable-next-line max-len
pageAnnotations.textMarkupAnnotation[i].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.textMarkupAnnotation[i].ModifiedDate);}pageCollections.push(pageAnnotations.textMarkupAnnotation[i]);// eslint-disable-next-line max-len
this.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(pageAnnotations.textMarkupAnnotation[i],pageNumber));}}if(pageAnnotations.shapeAnnotation&&pageAnnotations.shapeAnnotation.length!==0){for(var i=0;i<pageAnnotations.shapeAnnotation.length;i++){if(this.pdfViewer.dateTimeFormat){// eslint-disable-next-line max-len
pageAnnotations.shapeAnnotation[i].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.shapeAnnotation[i].ModifiedDate);}pageCollections.push(pageAnnotations.shapeAnnotation[i]);// eslint-disable-next-line max-len
this.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(pageAnnotations.shapeAnnotation[i],pageNumber));}}if(pageAnnotations.measureShapeAnnotation&&pageAnnotations.measureShapeAnnotation.length!==0){for(var i=0;i<pageAnnotations.measureShapeAnnotation.length;i++){if(this.pdfViewer.dateTimeFormat){// eslint-disable-next-line max-len
pageAnnotations.measureShapeAnnotation[i].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.measureShapeAnnotation[i].ModifiedDate);}pageCollections.push(pageAnnotations.measureShapeAnnotation[i]);// eslint-disable-next-line max-len
this.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(pageAnnotations.measureShapeAnnotation[i],pageNumber));}}if(pageAnnotations.stampAnnotations&&pageAnnotations.stampAnnotations.length!==0){for(var i=0;i<pageAnnotations.stampAnnotations.length;i++){if(this.pdfViewer.dateTimeFormat){// eslint-disable-next-line max-len
pageAnnotations.stampAnnotations[i].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.stampAnnotations[i].ModifiedDate);}pageCollections.push(pageAnnotations.stampAnnotations[i]);// eslint-disable-next-line max-len
this.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(pageAnnotations.stampAnnotations[i],pageNumber));}}if(pageAnnotations.stickyNotesAnnotation&&pageAnnotations.stickyNotesAnnotation.length!==0){for(var i=0;i<pageAnnotations.stickyNotesAnnotation.length;i++){if(this.pdfViewer.dateTimeFormat){// eslint-disable-next-line max-len
pageAnnotations.stickyNotesAnnotation[i].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.stickyNotesAnnotation[i].ModifiedDate);}pageCollections.push(pageAnnotations.stickyNotesAnnotation[i]);// eslint-disable-next-line max-len
this.updateCollections(this.updateStickyNotesAnnotationCollections(pageAnnotations.stickyNotesAnnotation[i],pageNumber));}}if(pageAnnotations.freeTextAnnotation&&pageAnnotations.freeTextAnnotation.length!==0){for(var i=0;i<pageAnnotations.freeTextAnnotation.length;i++){if(this.pdfViewer.dateTimeFormat){// eslint-disable-next-line max-len
pageAnnotations.freeTextAnnotation[i].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.freeTextAnnotation[i].ModifiedDate);}pageCollections.push(pageAnnotations.freeTextAnnotation[i]);// eslint-disable-next-line max-len
this.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(pageAnnotations.freeTextAnnotation[i],pageNumber));}}if(pageAnnotations.signatureAnnotation&&pageAnnotations.signatureAnnotation.length!==0){for(var i=0;i<pageAnnotations.signatureAnnotation.length;i++){if(this.pdfViewer.dateTimeFormat){// eslint-disable-next-line max-len
pageAnnotations.signatureAnnotation[i].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.signatureAnnotation[i].ModifiedDate);}// eslint-disable-next-line max-len
this.updateCollections(this.pdfViewerBase.signatureModule.updateSignatureCollections(pageAnnotations.signatureAnnotation[i],pageNumber),true);}}if(pageAnnotations.signatureInkAnnotation&&pageAnnotations.signatureInkAnnotation.length!==0){for(var i=0;i<pageAnnotations.signatureInkAnnotation.length;i++){if(this.pdfViewer.dateTimeFormat){// eslint-disable-next-line max-len
pageAnnotations.signatureInkAnnotation[i].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.signatureInkAnnotation[i].ModifiedDate);}pageCollections.push(pageAnnotations.signatureInkAnnotation[i]);// eslint-disable-next-line max-len
this.updateCollections(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkCollections(pageAnnotations.signatureInkAnnotation[i],pageNumber));}}var isLastPage=false;if(pageNumber===lastPage-1){isLastPage=true;}if(this.pdfViewer.toolbarModule&&this.pdfViewer.enableCommentPanel){this.pdfViewer._dotnetInstance.invokeMethodAsync('RenderAnnotationComments',pageCollections,pageNumber,isLastPage);//this.renderAnnotationComments(pageCollections, pageNumber);
}if(isInitialRender){for(var i=0;i<this.pdfViewerBase.renderedPagesList.length;i++){this.pdfViewerBase.renderAnnotations(this.pdfViewerBase.renderedPagesList[i]);}}};/**
     * @param annotation
     * @param isSignature
     * @param annotation
     * @param isSignature
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.updateCollections=function(annotation,isSignature){var isAdded=false;// eslint-disable-next-line
var collections;if(isSignature){collections=this.pdfViewer.signatureCollection;}else{collections=this.pdfViewer.annotationCollection;}if(collections&&annotation){for(var i=0;i<collections.length;i++){if(isSignature){if(collections[i].signatureName===annotation.signatureName){isAdded=true;break;}}else{if(collections[i].annotationId===annotation.annotationId){isAdded=true;break;}}}}if(!isAdded&&annotation){if(isSignature){this.pdfViewer.signatureCollection.push(annotation);}else{this.pdfViewer.annotationCollection.push(annotation);}}};/**
     * @param data
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.renderAnnotationComments=function(data,pageIndex){pageIndex=pageIndex+1;if(data){if(data.length!==0){this.createPageAccordion(pageIndex);for(var i=0;i<data.length;i++){if(data[i].AnnotName&&data[i].AnnotName.split('freeText').length===1){this.createCommentControlPanel(data[i],pageIndex);}}// eslint-disable-next-line
var newCommentsDiv=document.querySelectorAll('.e-pv-new-comments-div');if(newCommentsDiv){for(var j=0;j<newCommentsDiv.length;j++){newCommentsDiv[j].style.display='none';}}}}};/**
     * @private
     */StickyNotesAnnotation.prototype.initializeAcccordionContainer=function(){if(!sf.base.isBlazor()){// eslint-disable-next-line max-len
var commentPanelText_1=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_commentsPanelText',className:'e-pv-comments-panel-text'});if(sf.base.isBlazor()){var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_NoCommentsYet');promise.then(function(value){commentPanelText_1.textContent=value;});}else{commentPanelText_1.textContent=this.pdfViewer.localeObj.getConstant('No Comments Yet');}this.updateCommentPanelTextTop();this.pdfViewerBase.navigationPane.commentsContentContainer.appendChild(commentPanelText_1);// eslint-disable-next-line max-len
this.accordionContentContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_accordionContentContainer',className:'e-pv-accordion-content-container'});this.pdfViewerBase.navigationPane.commentsContentContainer.appendChild(this.accordionContentContainer);// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')],false);// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')],false);}};/**
     * @private
     */StickyNotesAnnotation.prototype.updateCommentPanelTextTop=function(){var commentPanelText=document.getElementById(this.pdfViewer.dataId+'_commentsPanelText');// eslint-disable-next-line max-len
if(this.pdfViewerBase.navigationPane.commentPanelContainer&&this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight&&commentPanelText.style.display!=='none'){commentPanelText.style.paddingTop=this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight/2-47+'px';commentPanelText.style.paddingLeft=this.pdfViewerBase.navigationPane.commentPanelContainer.clientWidth/3+'px';}};/**
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.createPageAccordion=function(pageIndex){var pageAccordionContainer=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+pageIndex);if(pageAccordionContainer===null&&this.pdfViewer.enableCommentPanel){this.accordionContent=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_accordioncontent'+pageIndex});this.accordionContent.style.zIndex='1000';// eslint-disable-next-line max-len
this.accordionPageContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_accordionPageContainer'+pageIndex,className:'e-pv-accordion-page-container'});this.accordionPageContainer.appendChild(this.accordionContent);this.pdfViewerBase.viewerMainContainer.appendChild(this.accordionPageContainer);// eslint-disable-next-line max-len
this.accordionContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_accordionContainer'+pageIndex,className:'e-pv-accordion-container'});var pageAccordion=new sf.navigations.Accordion({items:[// eslint-disable-next-line max-len
{header:this.pdfViewer.localeObj.getConstant('Page')+' '+pageIndex,expanded:true,content:'#'+this.pdfViewer.dataId+'_accordioncontent'+pageIndex+''}]});pageAccordion.appendTo(this.accordionContainer);this.accordionContainer.style.order='pageIndex';this.alignAccordionContainer(this.accordionContainer,pageIndex);if(document.getElementById(this.pdfViewer.dataId+'_commentsPanelText')){// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')],true);// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')],true);document.getElementById(this.pdfViewer.dataId+'_commentsPanelText').style.display='none';}if(document.getElementById(this.pdfViewer.dataId+'_accordionContentContainer')){document.getElementById(this.pdfViewer.dataId+'_accordionContentContainer').style.display='block';}return this.accordionContainer;}};StickyNotesAnnotation.prototype.alignAccordionContainer=function(accordionDiv,pageIndex){var isAdded=true;if(this.accordionContentContainer){if(this.isAccordionContainer){this.accordionContentContainer.appendChild(accordionDiv);isAdded=false;}else{for(var i=1;i<=this.pdfViewerBase.pageCount;i++){var nextElement=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+i);if(nextElement){if(pageIndex<i){this.accordionContentContainer.insertBefore(accordionDiv,nextElement);isAdded=false;break;}}}}if(isAdded){this.accordionContentContainer.appendChild(accordionDiv);isAdded=false;}this.isAccordionContainer=false;}};/**
     * @param pageNumber
     * @private
     */StickyNotesAnnotation.prototype.updateCommentPanelScrollTop=function(pageNumber){var accordionDiv=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+pageNumber);this.pdfViewerBase.navigationPane.commentsContentContainer=document.querySelector('.e-pv-comments-content-container');if(accordionDiv){var scrollValue=accordionDiv.offsetTop+accordionDiv.clientTop-35;this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=scrollValue;}};/**
     * @param data
     * @param pageIndex
     * @param type
     * @param annotationSubType
     * @param data
     * @param pageIndex
     * @param type
     * @param annotationSubType
     * @param data
     * @param pageIndex
     * @param type
     * @param annotationSubType
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.createCommentControlPanel=function(data,pageIndex,type,annotationSubType){var accordionContent=document.getElementById(this.pdfViewer.dataId+'_accordioncontent'+pageIndex);if(accordionContent){// eslint-disable-next-line
var accordionExpand=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+pageIndex);if(accordionExpand){accordionExpand.ej2_instances[0].expandItem(true);}// eslint-disable-next-line max-len
this.commentsContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'commentscontainer'+pageIndex+'_'+this.commentsCount,className:'e-pv-comments-container'});this.commentsContainer.accessKey=pageIndex.toString();var isCommentsAdded=false;if(data){this.commentsContainer.id=data.AnnotName;if(data.AnnotName){for(var j=0;j<accordionContent.childElementCount;j++){if(accordionContent.children[j].id===data.AnnotName){isCommentsAdded=true;break;}}}if(data.Name&&data.Name==='freeText'){this.commentsContainer.setAttribute('name','freeText');}else{this.commentsContainer.setAttribute('name',data.AnnotType);}}if(type){this.commentsContainer.setAttribute('name',type);}this.commentsContainer.addEventListener('mousedown',this.commentsAnnotationSelect.bind(this));// eslint-disable-next-line max-len
var commentDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_commentdiv'+pageIndex+'_'+this.commentsCount,className:'e-pv-comments-div'});this.commentsCount=this.commentsCount+1;this.commentsContainer.appendChild(commentDiv);this.updateCommentPanelScrollTop(pageIndex);if(!isCommentsAdded){accordionContent.appendChild(this.commentsContainer);}var title=void 0;if(data){title=this.commentsContainer.getAttribute('name');if(title==='null'){title=data.AnnotationType;}this.createTitleContainer(commentDiv,title,data.Subject,data.ModifiedDate,data.Author);}else{title=this.commentsContainer.getAttribute('name');this.createTitleContainer(commentDiv,title,annotationSubType);}// eslint-disable-next-line max-len
var commentTextBox=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_commenttextbox',className:'e-pv-comment-textbox'});// eslint-disable-next-line
var editObj_1=new sf.inplaceeditor.InPlaceEditor({mode:'Inline',type:'Text',model:{placeholder:this.pdfViewer.localeObj.getConstant('Add a comment')+'..'},emptyText:'',editableOn:'EditIconClick',saveButton:{content:this.pdfViewer.localeObj.getConstant('Post'),cssClass:'e-outline',disabled:true},cancelButton:{content:this.pdfViewer.localeObj.getConstant('Cancel'),cssClass:'e-outline'},submitOnEnter:true});editObj_1.appendTo(commentTextBox);// eslint-disable-next-line
var textBox=document.querySelectorAll('.e-editable-inline');for(var j=0;j<textBox.length;j++){textBox[j].style.display='none';}if(!data){editObj_1.enableEditMode=true;}// eslint-disable-next-line
commentTextBox.addEventListener('keydown',function(event){if(editObj_1.element.querySelector('.e-btn-save')){if(event.srcElement.value!==''){editObj_1.element.querySelector('.e-btn-save').ej2_instances[0].disabled=false;}else{editObj_1.element.querySelector('.e-btn-save').ej2_instances[0].disabled=true;}}});editObj_1.actionSuccess=this.createCommentDiv.bind(this,editObj_1);commentDiv.appendChild(commentTextBox);if(data){editObj_1.value=data.Note;var isCommentLocked=this.checkIslockProperty(data);if(isCommentLocked&&data.Comments==null){this.createCommentDiv(this.commentsContainer);}if(data.Name==='freeText'){editObj_1.value=data.MarkupText;}if(data.State){// eslint-disable-next-line max-len
var statusContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_container',className:'e-pv-status-container'});// eslint-disable-next-line max-len
var statusDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_div',className:'e-pv-status-div'});var statusSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'status'+'_icon'});statusDiv.appendChild(statusSpan);statusContainer.appendChild(statusDiv);commentDiv.appendChild(statusContainer);this.updateStatusContainer(data.State,statusSpan,statusDiv,statusContainer);}if(data.Comments){for(var j=0;j<data.Comments.length;j++){this.renderComments(data.Comments[j],this.commentsContainer);}if(data.Note!==' '&&data.Note!==''&&data.Note!==null){this.createCommentDiv(this.commentsContainer);}}}this.isNewcommentAdded=true;commentDiv.addEventListener('click',this.commentsDivClickEvent.bind(this));commentDiv.addEventListener('mouseover',this.commentDivMouseOver.bind(this));commentDiv.addEventListener('mouseleave',this.commentDivMouseLeave.bind(this));commentDiv.addEventListener('mouseout',this.commentDivMouseLeave.bind(this));commentDiv.addEventListener('focusout',this.commentDivMouseLeave.bind(this));commentTextBox.addEventListener('dblclick',this.openEditorElement.bind(this));commentTextBox.addEventListener('focusin',this.commentDivFocus.bind(this));return this.commentsContainer.id;}return'';};// eslint-disable-next-line
StickyNotesAnnotation.prototype.commentDivFocus=function(args){// eslint-disable-next-line
var proxy=this;var pageNumber=this.pdfViewerBase.currentPageNumber;setTimeout(function(){proxy.updateScrollPosition(pageNumber);},500);};StickyNotesAnnotation.prototype.updateScrollPosition=function(pageNumber){var accordionDiv=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+pageNumber);if(accordionDiv&&this.isNewcommentAdded){var commentHeight=0;// eslint-disable-next-line
var textBox=document.querySelectorAll('.e-editable-inline');if(textBox[0]){commentHeight=textBox[0].getBoundingClientRect().height;}var scrollValue=accordionDiv.offsetTop+accordionDiv.clientTop+commentHeight;if(this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop<scrollValue){this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=scrollValue;}this.isNewcommentAdded=false;}};StickyNotesAnnotation.prototype.updateCommentsScrollTop=function(isCommentsAdded){// eslint-disable-next-line max-len
var accordionDiv=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+this.pdfViewerBase.currentPageNumber);// eslint-disable-next-line
var commentsContainer=document.querySelector('.e-pv-comments-border');var commentsHeight=0;if(accordionDiv&&commentsContainer){commentsHeight=commentsContainer.getBoundingClientRect().height;var scrollValue=void 0;if(isCommentsAdded){scrollValue=accordionDiv.offsetTop+commentsContainer.offsetTop+commentsHeight/4;}else{scrollValue=accordionDiv.offsetTop+commentsContainer.offsetTop-70;}this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=scrollValue;}};/**
     * @param args
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.createCommentDiv=function(args){var _this=this;var commentsContainer;var titleContainer;// eslint-disable-next-line
var newCommentDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_newcommentdiv'+this.commentsCount,className:'e-pv-new-comments-div'});if(args.localName){commentsContainer=args;}else{commentsContainer=args.valueEle.parentElement.parentElement.parentElement.parentElement;titleContainer=args.valueEle.parentElement.parentElement.previousSibling.childNodes[1];}// eslint-disable-next-line
var commentObj=new sf.inplaceeditor.InPlaceEditor({mode:'Inline',type:'Text',value:'',editableOn:'Click',model:{placeholder:this.pdfViewer.localeObj.getConstant('Add a reply')+'..'},emptyText:this.pdfViewer.localeObj.getConstant('Add a reply'),saveButton:{content:this.pdfViewer.localeObj.getConstant('Post'),cssClass:'e-outline',disabled:true},cancelButton:{content:this.pdfViewer.localeObj.getConstant('Cancel'),cssClass:'e-outline'},submitOnEnter:true});commentObj.appendTo(newCommentDiv);newCommentDiv.lastChild.firstChild.click();// eslint-disable-next-line
newCommentDiv.addEventListener('keydown',function(event){if(commentObj.element.querySelector('.e-btn-save')){if(event.srcElement.value!==''){commentObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled=false;}else{commentObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled=true;commentObj.enableEditMode=true;}}});if(args.valueEle){if(args.value!=null&&args.value!==''&&args.value!==' '){// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0]&&this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='FreeText'){this.modifyTextProperty(args.value,args.prevValue,args.valueEle.parentNode.parentNode.parentNode.parentNode.id);}else{try{this.modifyTextProperty(args.value,args.prevValue,args.valueEle.parentNode.parentNode.parentNode.parentNode.id);}catch(error){this.modifyTextProperty(args.value,args.prevValue);}}this.updateModifiedDate(titleContainer);}if(args.valueEle.parentElement.parentElement.parentElement.parentElement.childElementCount===1){if(args.value!=null&&args.value!==''&&args.value!==' '){commentsContainer.appendChild(newCommentDiv);setTimeout(function(){_this.updateCommentsScrollTop(true);},50);}}}else{commentsContainer.appendChild(newCommentDiv);setTimeout(function(){_this.updateCommentsScrollTop(true);},50);}commentObj.actionSuccess=this.saveCommentDiv.bind(this,commentObj);};/**
     * @param args
     * @param comment
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.saveCommentDiv=function(args,comment){var commentsContainer;var annotationAuthor;// eslint-disable-next-line
var lastElement;var commentValue;if(comment.name&&args.value!==''){commentsContainer=args.valueEle.parentElement.parentElement.parentElement;lastElement=args.valueEle.parentElement.parentElement;commentValue=args.value;}else{commentsContainer=args;lastElement=commentsContainer.lastChild;commentValue=comment;}if(commentsContainer&&lastElement){commentsContainer.removeChild(lastElement);var replyTextBox=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_replytextbox'});this.commentsreplyCount=this.commentsreplyCount+1;// eslint-disable-next-line
var replyCommentDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'replyDiv'+this.commentsreplyCount,className:'e-pv-reply-div'});replyCommentDiv.id=this.pdfViewer.annotation.createGUID();annotationAuthor=this.getAuthorName(this.pdfViewer.selectedItems.annotations[0],commentsContainer);this.createReplyDivTitleContainer(replyCommentDiv,null,annotationAuthor);replyCommentDiv.addEventListener('mouseover',this.commentDivMouseOver.bind(this));replyCommentDiv.addEventListener('mouseleave',this.commentDivMouseLeave.bind(this));replyCommentDiv.addEventListener('click',this.commentDivOnSelect.bind(this));replyTextBox.addEventListener('dblclick',this.openEditorElement.bind(this));replyCommentDiv.style.border=1+'px';replyCommentDiv.style.borderColor='black';replyCommentDiv.style.zIndex=1002;// eslint-disable-next-line
var saveObj_1=new sf.inplaceeditor.InPlaceEditor({mode:'Inline',type:'Text',emptyText:'',editableOn:'EditIconClick',model:{placeholder:this.pdfViewer.localeObj.getConstant('Add a reply')+'..'},value:commentValue,saveButton:{content:this.pdfViewer.localeObj.getConstant('Post'),cssClass:'e-outline'},cancelButton:{content:this.pdfViewer.localeObj.getConstant('Cancel'),cssClass:'e-outline'}});saveObj_1.appendTo(replyTextBox);saveObj_1.actionSuccess=this.modifyProperty.bind(this,saveObj_1);replyCommentDiv.appendChild(replyTextBox);replyCommentDiv.style.paddingLeft=24+'px';commentsContainer.appendChild(replyCommentDiv);// eslint-disable-next-line
replyTextBox.addEventListener('keydown',function(event){if(saveObj_1.element.querySelector('.e-btn-save')){if(event.srcElement.value!==''){saveObj_1.element.querySelector('.e-btn-save').ej2_instances[0].disabled=false;}else{saveObj_1.element.querySelector('.e-btn-save').ej2_instances[0].disabled=true;}}});replyCommentDiv.addEventListener('click',this.commentsDivClickEvent.bind(this));replyCommentDiv.addEventListener('dblclick',this.commentsDivDoubleClickEvent.bind(this));this.createCommentDiv(replyCommentDiv.parentElement);this.modifyCommentsProperty(commentValue,replyCommentDiv.id,commentsContainer.id);}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.renderComments=function(data,commentDiv,undoRedoAction,id,isCommentAction){var annotationAuthor;var replyTextBox=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_replytextbox'});this.commentsreplyCount=this.commentsreplyCount+1;var replyDiv=sf.base.createElement('div',{id:'replyDiv'+this.commentsreplyCount,className:'e-pv-reply-div'});if(undoRedoAction){replyDiv.id=data.annotName;annotationAuthor=data.author;}else{replyDiv.id=data.AnnotName;annotationAuthor=data.Author;}replyDiv.style.border=1+'px';replyDiv.style.borderColor='black';if(!annotationAuthor){annotationAuthor=commentDiv.getAttribute('author');}if(undoRedoAction){if(data.modifiedDate!==undefined){this.createReplyDivTitleContainer(replyDiv,data.modifiedDate,annotationAuthor);}else{this.createReplyDivTitleContainer(replyDiv,null,annotationAuthor);}}else{this.createReplyDivTitleContainer(replyDiv,data.ModifiedDate,annotationAuthor);}replyDiv.addEventListener('mouseover',this.commentDivMouseOver.bind(this));replyDiv.addEventListener('mouseleave',this.commentDivMouseLeave.bind(this));replyDiv.addEventListener('click',this.commentDivOnSelect.bind(this));replyTextBox.addEventListener('dblclick',this.openEditorElement.bind(this));// eslint-disable-next-line
var saveObj=new sf.inplaceeditor.InPlaceEditor({mode:'Inline',type:'Text',emptyText:'',editableOn:'EditIconClick',model:{placeholder:this.pdfViewer.localeObj.getConstant('Add a reply')+'..'},value:'',saveButton:{content:this.pdfViewer.localeObj.getConstant('Post'),cssClass:'e-outline'},cancelButton:{content:this.pdfViewer.localeObj.getConstant('Cancel'),cssClass:'e-outline'}});if(undoRedoAction){saveObj.value=data.note;}else{saveObj.value=data.Note;}saveObj.appendTo(replyTextBox);replyDiv.appendChild(replyTextBox);if(undoRedoAction){data.State=data.state;}if(data.State){// eslint-disable-next-line max-len
var statusContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_container',className:'e-pv-status-container'});// eslint-disable-next-line max-len
var statusDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_div',className:'e-pv-status-div'});var statusSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'status'+'_icon'});statusDiv.appendChild(statusSpan);statusContainer.appendChild(statusDiv);replyDiv.appendChild(statusContainer);this.updateStatusContainer(data.State,statusSpan,statusDiv,statusContainer);}replyDiv.style.paddingLeft=24+'px';// eslint-disable-next-line
replyTextBox.addEventListener('keydown',function(event){if(saveObj.element.querySelector('.e-btn-save')){if(event.srcElement.value!==''){saveObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled=false;}else{saveObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled=true;}}});if(undoRedoAction){if(isCommentAction){commentDiv.appendChild(replyDiv);}else{// eslint-disable-next-line
var commentsDiv=document.getElementById(id);if(data.position){commentsDiv.insertBefore(replyDiv,commentsDiv.childNodes[data.position]);}else{// eslint-disable-next-line
if(commentsDiv){if(commentsDiv.childElementCount>1){commentsDiv.insertBefore(replyDiv,commentsDiv.childNodes[commentsDiv.childElementCount-1]);}else{commentDiv.appendChild(replyDiv);}}}}}else{commentDiv.appendChild(replyDiv);}replyDiv.addEventListener('click',this.commentsDivClickEvent.bind(this));replyDiv.addEventListener('dblclick',this.commentsDivDoubleClickEvent.bind(this));saveObj.actionSuccess=this.modifyProperty.bind(this,saveObj);};/**
     * @param data
     * @param pageIndex
     * @param isCopy
     * @param data
     * @param pageIndex
     * @param isCopy
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.createCommentsContainer=function(data,pageIndex,isCopy){// eslint-disable-next-line
var accordionContentContainer=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+pageIndex);if(!accordionContentContainer){// eslint-disable-next-line max-len
var accordionPageContainer=document.getElementById(this.pdfViewer.dataId+'_accordionPageContainer'+pageIndex);if(accordionPageContainer){accordionPageContainer.parentElement.removeChild(accordionPageContainer);}accordionContentContainer=this.createPageAccordion(pageIndex);if(accordionContentContainer){accordionContentContainer.ej2_instances[0].expandItem(true);}}var accordionContent=document.getElementById(this.pdfViewer.dataId+'_accordioncontent'+pageIndex);// eslint-disable-next-line max-len
this.commentsContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'commentscontainer'+pageIndex+'_'+this.commentsCount,className:'e-pv-comments-container'});this.commentsContainer.accessKey=pageIndex.toString();if(data){this.commentsContainer.id=data.annotName;}this.commentsContainer.addEventListener('mousedown',this.commentsAnnotationSelect.bind(this));// eslint-disable-next-line max-len
var commentDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_commentdiv'+pageIndex+'_'+this.commentsCount,className:'e-pv-comments-div'});this.commentsCount=this.commentsCount+1;this.commentsContainer.appendChild(commentDiv);this.updateCommentPanelScrollTop(pageIndex);if(data&&accordionContent){if(data.position||data.position===0){accordionContent.insertBefore(this.commentsContainer,accordionContent.children[data.position]);}else{accordionContent.appendChild(this.commentsContainer);}}if(data&&accordionContent){if(data.indent){this.commentsContainer.setAttribute('name','shape_measure');this.createTitleContainer(commentDiv,'shape_measure',data.subject,data.modifiedDate,data.author);}else if(data.shapeAnnotationType==='sticky'||data.shapeAnnotationType==='stamp'){// eslint-disable-next-line max-len
var annotType=this.createTitleContainer(commentDiv,data.shapeAnnotationType,null,data.modifiedDate,data.author);this.commentsContainer.setAttribute('name',annotType);if(annotType==='sticky'){if(!isCopy){this.addStickyNotesAnnotations(pageIndex-1,data);}}}else if(data.shapeAnnotationType==='textMarkup'){this.commentsContainer.setAttribute('name','textMarkup');this.createTitleContainer(commentDiv,'textMarkup',data.subject,data.modifiedDate,data.author);}else if(data.shapeAnnotationType==='FreeText'){data.note=data.dynamicText;this.commentsContainer.setAttribute('name','freetext');this.createTitleContainer(commentDiv,'freeText',data.subject,data.modifiedDate);}else if(data.shapeAnnotationType==='Ink'){data.note=data.dynamicText;this.commentsContainer.setAttribute('name','ink');this.createTitleContainer(commentDiv,'ink',data.subject,data.modifiedDate);}else{this.commentsContainer.setAttribute('name','shape');if(data.shapeAnnotationType==='Line'){this.createTitleContainer(commentDiv,'shape',data.subject,data.modifiedDate,data.author);}else{this.createTitleContainer(commentDiv,'shape',data.shapeAnnotationType,data.modifiedDate,data.author);}}}// eslint-disable-next-line max-len
var commentTextBox=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_commenttextbox',className:'e-pv-comment-textbox'});// eslint-disable-next-line
var editObj=new sf.inplaceeditor.InPlaceEditor({mode:'Inline',type:'Text',model:{placeholder:this.pdfViewer.localeObj.getConstant('Add a comment')+'..'},emptyText:'',editableOn:'EditIconClick',saveButton:{content:this.pdfViewer.localeObj.getConstant('Post'),cssClass:'e-outline',disabled:true},cancelButton:{content:this.pdfViewer.localeObj.getConstant('Cancel'),cssClass:'e-outline'},submitOnEnter:true});editObj.appendTo(commentTextBox);// eslint-disable-next-line
var textBox=document.querySelectorAll('.e-editable-inline');for(var j=0;j<textBox.length;j++){textBox[j].style.display='none';}// eslint-disable-next-line
commentTextBox.addEventListener('keydown',function(event){if(editObj.element.querySelector('.e-btn-save')){if(event.srcElement.value!==''){editObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled=false;}else{editObj.element.querySelector('.e-btn-save').ej2_instances[0].disabled=true;}}});editObj.actionSuccess=this.createCommentDiv.bind(this,editObj);commentDiv.appendChild(commentTextBox);if(data){editObj.value=data.note;if(data.state){// eslint-disable-next-line max-len
var statusContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_container',className:'e-pv-status-container'});// eslint-disable-next-line max-len
var statusDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_div',className:'e-pv-status-div'});var statusSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'status'+'_icon'});statusDiv.appendChild(statusSpan);statusContainer.appendChild(statusDiv);commentDiv.appendChild(statusContainer);this.updateStatusContainer(data.state,statusSpan,statusDiv,statusContainer);}if(data.comments){for(var j=0;j<data.comments.length;j++){this.renderComments(data.comments[j],this.commentsContainer,true,null,true);}if(data.comments.length>0){this.createCommentDiv(this.commentsContainer);}}}commentDiv.addEventListener('click',this.commentsDivClickEvent.bind(this));commentDiv.addEventListener('mouseover',this.commentDivMouseOver.bind(this));commentDiv.addEventListener('mouseleave',this.commentDivMouseLeave.bind(this));commentDiv.addEventListener('mouseout',this.commentDivMouseLeave.bind(this));commentDiv.addEventListener('focusout',this.commentDivMouseLeave.bind(this));commentTextBox.addEventListener('dblclick',this.openEditorElement.bind(this));return this.commentsContainer.id;};// eslint-disable-next-line
StickyNotesAnnotation.prototype.modifyProperty=function(args){var commentElement=args.element.parentElement.id;var parentElement=args.element.parentElement.parentElement.id;var titleElement=args.element.previousSibling.firstChild;this.updateModifiedDate(titleElement);this.modifyCommentsProperty(args.value,commentElement,parentElement,args.prevValue);};// eslint-disable-next-line
StickyNotesAnnotation.prototype.createTitleContainer=function(commentsDivElement,type,subType,modifiedDate,author){var annotationType=this.getAnnotationType(type);// eslint-disable-next-line max-len
var commentTitleContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_commentTitleConatiner',className:'e-pv-comment-title-container'});// eslint-disable-next-line max-len
var commentTypeSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_commenttype'+'_icon'});commentTypeSpan.style.opacity='0.6';this.updateCommentIcon(commentTypeSpan,annotationType,subType);var annotationAuthor;if(!author){annotationAuthor=this.pdfViewer.annotationModule.updateAnnotationAuthor(annotationType,subType);}else{annotationAuthor=author;}commentTypeSpan.style.padding=8+'px';commentTypeSpan.style.cssFloat='left';commentTitleContainer.appendChild(commentTypeSpan);// eslint-disable-next-line max-len
var commentsTitle=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_commentTitle',className:'e-pv-comment-title'});if(!modifiedDate){commentsTitle.textContent=annotationAuthor+' - '+this.setModifiedDate();}else{commentsTitle.textContent=annotationAuthor+' - '+this.setExistingAnnotationModifiedDate(modifiedDate);}commentTitleContainer.appendChild(commentsTitle);// eslint-disable-next-line max-len
var moreOptionsButton=sf.base.createElement('button',{id:this.pdfViewer.dataId+'_more-options',className:'e-pv-more-options-button e-btn',attrs:{'tabindex':'-1'}});moreOptionsButton.style.visibility='hidden';moreOptionsButton.style.zIndex='1001';moreOptionsButton.setAttribute('type','button');// eslint-disable-next-line max-len
var moreOptionsButtonSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_more-options_icon',className:'e-pv-more-icon e-pv-icon'});moreOptionsButton.appendChild(moreOptionsButtonSpan);moreOptionsButtonSpan.style.opacity='0.87';commentTitleContainer.appendChild(moreOptionsButton);commentsDivElement.appendChild(commentTitleContainer);// eslint-disable-next-line
var commentsContainer=commentsDivElement.parentElement;if(commentsContainer){var author_1=this.pdfViewer.annotationModule.updateAnnotationAuthor(annotationType,subType);commentsContainer.setAttribute('author',author_1);}if(!this.isCreateContextMenu){this.createCommentContextMenu();}this.isCreateContextMenu=true;commentTitleContainer.addEventListener('dblclick',this.openTextEditor.bind(this));moreOptionsButton.addEventListener('mouseup',this.moreOptionsClick.bind(this));return annotationType;};// eslint-disable-next-line
StickyNotesAnnotation.prototype.createReplyDivTitleContainer=function(commentsDivElement,modifiedDate,annotationAuthor){// eslint-disable-next-line max-len
var replyTitleContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_replyTitleConatiner',className:'e-pv-reply-title-container'});// eslint-disable-next-line max-len
var replyTitle=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_replyTitle',className:'e-pv-reply-title'});if(!modifiedDate){replyTitle.textContent=annotationAuthor+' - '+this.setModifiedDate();}else{replyTitle.textContent=annotationAuthor+' - '+this.setExistingAnnotationModifiedDate(modifiedDate);}replyTitleContainer.appendChild(replyTitle);// eslint-disable-next-line max-len
var moreButton=sf.base.createElement('button',{id:this.pdfViewer.dataId+'_more-options',className:'e-pv-more-options-button e-btn',attrs:{'tabindex':'-1'}});moreButton.style.visibility='hidden';moreButton.style.zIndex='1001';moreButton.setAttribute('type','button');// eslint-disable-next-line max-len
var moreButtonSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_more-options_icon',className:'e-pv-more-icon e-pv-icon'});moreButton.appendChild(moreButtonSpan);moreButtonSpan.style.opacity='0.87';replyTitleContainer.appendChild(moreButton);commentsDivElement.appendChild(replyTitleContainer);replyTitleContainer.addEventListener('dblclick',this.openTextEditor.bind(this));moreButton.addEventListener('mouseup',this.moreOptionsClick.bind(this));};// eslint-disable-next-line
StickyNotesAnnotation.prototype.updateCommentIcon=function(commentSpan,annotationType,annotationSubType){if(annotationType==='sticky'){commentSpan.className='e-pv-comment-icon e-pv-icon';}else if(annotationType==='stamp'){commentSpan.className='e-pv-stamp-icon e-pv-icon';}else if(annotationType==='shape'){if(annotationSubType==='Line'){commentSpan.className='e-pv-shape-line-icon e-pv-icon';}else if(annotationSubType==='LineWidthArrowHead'||annotationSubType==='Arrow'){commentSpan.className='e-pv-shape-arrow-icon e-pv-icon';}else if(annotationSubType==='Circle'||annotationSubType==='Ellipse'||annotationSubType==='Oval'){commentSpan.className='e-pv-shape-circle-icon e-pv-icon';}else if(annotationSubType==='Rectangle'||annotationSubType==='Square'){commentSpan.className='e-pv-shape-rectangle-icon e-pv-icon';}else if(annotationSubType==='Polygon'){commentSpan.className='e-pv-shape-pentagon-icon e-pv-icon';}else{commentSpan.className='e-pv-annotation-shape-icon e-pv-icon';}}else if(annotationType==='measure'){if(annotationSubType==='Distance'||annotationSubType==='Distance calculation'){commentSpan.className='e-pv-calibrate-distance-icon e-pv-icon';}else if(annotationSubType==='Perimeter'||annotationSubType==='Perimeter calculation'){commentSpan.className='e-pv-calibrate-perimeter-icon e-pv-icon';}else if(annotationSubType==='Radius'||annotationSubType==='Radius calculation'){commentSpan.className='e-pv-calibrate-radius-icon e-pv-icon';}else if(annotationSubType==='Area'||annotationSubType==='Area calculation'){commentSpan.className='e-pv-calibrate-area-icon e-pv-icon';}else if(annotationSubType==='Volume'||annotationSubType==='Volume calculation'){commentSpan.className='e-pv-calibrate-volume-icon e-pv-icon';}else{commentSpan.className='e-pv-annotation-calibrate-icon e-pv-icon';}}else if(annotationType==='textMarkup'){if(annotationSubType==='Highlight'){commentSpan.className='e-pv-highlight-icon e-pv-icon';}else if(annotationSubType==='Underline'){commentSpan.className='e-pv-underline-icon e-pv-icon';}else if(annotationSubType==='Strikethrough'){commentSpan.className='e-pv-strikethrough-icon e-pv-icon';}else{commentSpan.className='e-pv-annotation-icon e-pv-icon';}}else if(annotationType==='freeText'){commentSpan.className='e-pv-freetext-icon e-pv-icon';}else if(annotationType==='ink'||annotationSubType==='Ink'){commentSpan.className='e-pv-inkannotation-icon e-pv-icon';}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.updateStatusContainer=function(state,statusSpan,statusDiv,statusContainer){if(state==='Accepted'){statusDiv.style.backgroundColor='rgb(24,169,85)';statusSpan.className='e-pv-accepted-icon';}else if(state==='Completed'){statusDiv.style.backgroundColor='rgb(0,122,255)';statusSpan.className='e-pv-completed-icon';}else if(state==='Cancelled'){statusDiv.style.backgroundColor='rgb(245,103,0)';statusSpan.className='e-pv-cancelled-icon';}else if(state==='Rejected'){statusDiv.style.backgroundColor='rgb(255,59,48)';statusSpan.className='e-pv-rejected-icon';}else{statusSpan.className='';statusContainer.parentElement.removeChild(statusContainer);}};/**
     * @param removeDiv
     * @private
     */StickyNotesAnnotation.prototype.updateAccordionContainer=function(removeDiv){// eslint-disable-next-line
var pageNumber=parseInt(removeDiv.accessKey);var accordionContent=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+pageNumber);var accordionContentContainer=document.getElementById(this.pdfViewer.dataId+'_accordionContentContainer');if(accordionContentContainer){if(accordionContentContainer.childElementCount===0){accordionContentContainer.style.display='none';if(document.getElementById(this.pdfViewer.dataId+'_commentsPanelText')){// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')],false);// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')],false);document.getElementById(this.pdfViewer.dataId+'_commentsPanelText').style.display='block';this.updateCommentPanelTextTop();}}}};/**
     * @private
     */StickyNotesAnnotation.prototype.createCommentContextMenu=function(){// eslint-disable-next-line max-len
this.commentContextMenu=[{text:this.pdfViewer.localeObj.getConstant('Edit')},{text:this.pdfViewer.localeObj.getConstant('Delete Context')},{// eslint-disable-next-line max-len
text:this.pdfViewer.localeObj.getConstant('Set Status'),items:[{text:this.pdfViewer.localeObj.getConstant('None')},{text:this.pdfViewer.localeObj.getConstant('Accepted')},{text:this.pdfViewer.localeObj.getConstant('Cancelled')},{text:this.pdfViewer.localeObj.getConstant('Completed')},{text:this.pdfViewer.localeObj.getConstant('Rejected')}]}];var commentMenuElement=sf.base.createElement('ul',{id:this.pdfViewer.dataId+'_comment_context_menu'});this.pdfViewer.element.appendChild(commentMenuElement);this.commentMenuObj=new sf.navigations.ContextMenu({target:'#'+this.pdfViewer.dataId+'_more-options',items:this.commentContextMenu,beforeOpen:this.contextMenuBeforeOpen.bind(this),select:this.commentMenuItemSelect.bind(this)});if(this.pdfViewer.enableRtl){this.commentMenuObj.enableRtl=true;}this.commentMenuObj.appendTo(commentMenuElement);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.commentMenuObj.animationSettings.effect='ZoomIn';}else{this.commentMenuObj.animationSettings.effect='SlideDown';}};StickyNotesAnnotation.prototype.contextMenuBeforeOpen=function(args){// eslint-disable-next-line
var contextActiveDiv;// eslint-disable-next-line
var contextDiv=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');if(contextDiv){for(var i=0;i<contextDiv.length;i++){if(contextDiv[i].style.visibility==='visible'){contextActiveDiv=contextDiv[i].parentElement.nextSibling;}}}var isCommentLocked=this.checkIslockProperty(contextActiveDiv);if(isCommentLocked){this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Edit')],false);this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')],false);}else{this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Edit')],true);this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')],true);}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.commentMenuItemSelect=function(args){// eslint-disable-next-line
var contextActiveDiv;// eslint-disable-next-line
var contextDiv=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');if(contextDiv){for(var i=0;i<contextDiv.length;i++){if(contextDiv[i].style.visibility==='visible'){contextActiveDiv=contextDiv[i].parentElement.nextSibling;}}if(args.item){switch(args.item.text){case this.pdfViewer.localeObj.getConstant('Edit'):// eslint-disable-next-line
var commentShow=document.querySelectorAll('.e-pv-new-comments-div');for(var i=0;i<commentShow.length;i++){commentShow[i].style.display='none';}contextActiveDiv.ej2_instances[0].enableEditMode=true;break;case this.pdfViewer.localeObj.getConstant('Delete Context'):if(contextActiveDiv.parentElement.parentElement.firstElementChild===contextActiveDiv.parentElement){this.pdfViewer.annotationModule.deleteAnnotation();}else{// eslint-disable-next-line max-len
this.modifyCommentDeleteProperty(contextActiveDiv.parentElement.parentElement,contextActiveDiv.parentElement);}break;case this.pdfViewer.localeObj.getConstant('Set Status'):break;case this.pdfViewer.localeObj.getConstant('Accepted'):if(contextActiveDiv.parentElement.lastChild.id===this.pdfViewer.dataId+'status_container'){contextActiveDiv.parentElement.lastChild.remove();}// eslint-disable-next-line max-len
var acceptedStatusDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_container',className:'e-pv-status-container'});// eslint-disable-next-line max-len
var statusDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_div',className:'e-pv-status-div'});var statusSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'status'+'_icon',className:'e-pv-accepted-icon'});statusDiv.style.backgroundColor='rgb(24,169,85)';statusDiv.appendChild(statusSpan);acceptedStatusDiv.appendChild(statusDiv);contextActiveDiv.parentElement.appendChild(acceptedStatusDiv);this.modifyStatusProperty('Accepted',contextActiveDiv.parentElement);break;case this.pdfViewer.localeObj.getConstant('Completed'):if(contextActiveDiv.parentElement.lastChild.id===this.pdfViewer.dataId+'status_container'){contextActiveDiv.parentElement.lastChild.remove();}// eslint-disable-next-line max-len
var completedStatusDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_container',className:'e-pv-status-container'});// eslint-disable-next-line max-len
var statusElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_div',className:'e-pv-status-div'});// eslint-disable-next-line max-len
var statusOptionSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'status'+'_icon',className:'e-pv-completed-icon'});statusElement.style.backgroundColor='rgb(0,122,255)';statusElement.appendChild(statusOptionSpan);completedStatusDiv.appendChild(statusElement);contextActiveDiv.parentElement.appendChild(completedStatusDiv);this.modifyStatusProperty('Completed',contextActiveDiv.parentElement);break;case this.pdfViewer.localeObj.getConstant('Cancelled'):if(contextActiveDiv.parentElement.lastChild.id===this.pdfViewer.dataId+'status_container'){contextActiveDiv.parentElement.lastChild.remove();}// eslint-disable-next-line max-len
var cancelStatusDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_container',className:'e-pv-status-container'});// eslint-disable-next-line max-len
var cancelStatusElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_div',className:'e-pv-status-div'});// eslint-disable-next-line max-len
var cancelStatusSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'status'+'_icon',className:'e-pv-cancelled-icon'});cancelStatusElement.style.backgroundColor='rgb(245,103,0)';cancelStatusElement.appendChild(cancelStatusSpan);cancelStatusDiv.appendChild(cancelStatusElement);contextActiveDiv.parentElement.appendChild(cancelStatusDiv);this.modifyStatusProperty('Cancelled',contextActiveDiv.parentElement);break;case this.pdfViewer.localeObj.getConstant('Rejected'):if(contextActiveDiv.parentElement.lastChild.id===this.pdfViewer.dataId+'status_container'){contextActiveDiv.parentElement.lastChild.remove();}// eslint-disable-next-line max-len
var rejectedStatusDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_container',className:'e-pv-status-container'});// eslint-disable-next-line max-len
var rejectedStatusElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_div',className:'e-pv-status-div'});// eslint-disable-next-line max-len
var rejectedStatusSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'status'+'_icon',className:'e-pv-rejected-icon'});rejectedStatusElement.style.backgroundColor='rgb(255,59,48)';rejectedStatusElement.appendChild(rejectedStatusSpan);rejectedStatusDiv.appendChild(rejectedStatusElement);contextActiveDiv.parentElement.appendChild(rejectedStatusDiv);this.modifyStatusProperty('Rejected',contextActiveDiv.parentElement);break;case this.pdfViewer.localeObj.getConstant('None'):if(contextActiveDiv.parentElement.lastChild.id===this.pdfViewer.dataId+'status_container'){contextActiveDiv.parentElement.lastChild.remove();}this.modifyStatusProperty('None',contextActiveDiv.parentElement);break;default:break;}}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.moreOptionsClick=function(event,isMoreOptionClick){if(document.getElementById(this.pdfViewer.dataId+'_comment_context_menu').style.display!=='block'){if(event.currentTarget.className==='e-pv-more-options-button e-btn'){event.currentTarget.parentElement.nextSibling.lastChild.firstChild.click();}this.pdfViewer.annotationModule.checkContextMenuDeleteItem(this.commentMenuObj);this.commentMenuObj.open(event.clientY,event.clientX,event.currentTarget);}if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.openTextEditor=function(event){// eslint-disable-next-line
var commentShow=document.querySelectorAll('.e-pv-new-comments-div');for(var i=0;i<commentShow.length;i++){commentShow[i].style.display='none';}var isCommentLocked=this.checkIslockProperty(event.currentTarget.nextSibling);if(isCommentLocked){event.currentTarget.nextSibling.ej2_instances[0].enableEditMode=false;}else if(event.currentTarget.parentElement.parentElement){var isLocked=this.checkAnnotationSettings(event.currentTarget.parentElement.parentElement.id);if(isLocked){// eslint-disable-next-line
var annotation=this.findAnnotationObject(event.currentTarget.parentElement.parentElement.id);if(this.pdfViewer.annotationModule.checkAllowedInteractions('Select',annotation)){isLocked=false;}}if(!isLocked){event.currentTarget.nextSibling.ej2_instances[0].enableEditMode=true;}}else{event.currentTarget.nextSibling.ej2_instances[0].enableEditMode=true;}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.checkIslockProperty=function(commentEvent){// eslint-disable-next-line
var annotCollection=this.pdfViewer.annotationCollection;// eslint-disable-next-line
var annotation;if(commentEvent.IsCommentLock){return true;}// eslint-disable-next-line max-len
if(this.pdfViewer.annotationModule.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){annotation=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;}else if(this.pdfViewer.selectedItems.annotations[0]){annotation=this.pdfViewer.selectedItems.annotations[0];}for(var i=0;i<annotCollection.length;i++){// eslint-disable-next-line max-len
var note=annotCollection[i].note?annotCollection[i].note:annotCollection[i].notes;if(annotCollection[i].isCommentLock===true&&(commentEvent.textContent===note||annotCollection[i].dynamicText===commentEvent.textContent)){return true;}for(var j=0;j<annotCollection[i].comments.length;j++){if(annotation&&annotCollection[i].annotationId===annotation.annotName){// eslint-disable-next-line max-len
if(annotCollection[i].comments[j].isLock===true&&commentEvent.textContent===annotCollection[i].comments[j].note){return true;}}}}return false;};// eslint-disable-next-line
StickyNotesAnnotation.prototype.openEditorElement=function(event){// eslint-disable-next-line
var commentShow=document.querySelectorAll('.e-pv-new-comments-div');for(var i=0;i<commentShow.length;i++){commentShow[i].style.display='none';}var isCommentLocked=this.checkIslockProperty(event.currentTarget);if(isCommentLocked){event.currentTarget.ej2_instances[0].enableEditMode=false;}else if(event.currentTarget.parentElement.parentElement){var isLocked=this.checkAnnotationSettings(event.currentTarget.parentElement.parentElement.id);if(isLocked){// eslint-disable-next-line
var annotation=this.findAnnotationObject(event.currentTarget.parentElement.parentElement.id);if(this.pdfViewer.annotationModule.checkAllowedInteractions('Select',annotation)){isLocked=false;}}if(!isLocked){if(this.pdfViewer.selectedItems.annotations[0].isReadonly){event.currentTarget.ej2_instances[0].enableEditMode=false;}else{event.currentTarget.ej2_instances[0].enableEditMode=true;}}}else{event.currentTarget.ej2_instances[0].enableEditMode=true;}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.commentsDivClickEvent=function(event){// eslint-disable-next-line
var annotation=this.findAnnotationObject(event.currentTarget.parentElement.id);var isLocked=this.checkAnnotationSettings(event.currentTarget.parentElement.id);if(isLocked){if(this.pdfViewer.annotationModule.checkAllowedInteractions('Select',annotation)){isLocked=false;}}if(!isLocked){var isCommentsSelect=false;if(event.clientX===0&&event.clientY===0){this.isSetAnnotationType=true;}else{this.isSetAnnotationType=false;}if(event.target.className==='e-pv-more-icon e-pv-icon'){return null;}// eslint-disable-next-line
var x=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');for(var i=0;i<x.length;i++){x[i].style.visibility='hidden';}if(document.getElementById(this.pdfViewer.dataId+'_commantPanel').style.display==='none'){this.pdfViewer.annotationModule.showCommentsPanel();}if(event.currentTarget.parentElement.classList.contains('e-pv-comments-border')){isCommentsSelect=true;}event.currentTarget.firstChild.lastChild.style.visibility='visible';// eslint-disable-next-line
var commentsContainer=document.querySelectorAll('.e-pv-comments-border');if(commentsContainer){for(var j=0;j<commentsContainer.length;j++){commentsContainer[j].classList.remove('e-pv-comments-border');}}event.currentTarget.parentElement.classList.add('e-pv-comments-border');// eslint-disable-next-line
var commentShow=document.querySelectorAll('.e-pv-new-comments-div');for(var i=0;i<commentShow.length;i++){commentShow[i].style.display='none';}// eslint-disable-next-line
var editElement=event.currentTarget.parentElement.lastChild;// eslint-disable-next-line
var commentsElement=event.currentTarget.parentElement;if(editElement){editElement.style.display='block';if(editElement.querySelector('.e-editable-inline')){if(!this.isEditableElement){editElement.querySelector('.e-editable-inline').style.display='block';}for(var i=0;i<commentsElement.childElementCount;i++){// eslint-disable-next-line
var activeElement=commentsElement.childNodes[i];// eslint-disable-next-line
var textElement=activeElement.querySelector('.e-editable-inline');if(textElement){if(textElement.style.display===''){editElement.style.display='none';editElement.querySelector('.e-editable-inline').style.display='none';}}}}if(this.isSetAnnotationType){if(!isCommentsSelect){this.updateCommentsScrollTop();}}}if(event.currentTarget.parentElement.childElementCount===1){if(!this.pdfViewer.enableShapeLabel){event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=true;}else{var type=event.currentTarget.parentElement.getAttribute('name');if(this.isSetAnnotationType&&type==='shape'){event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=false;}else{event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=true;}}}if(event.currentTarget&&event.currentTarget.id&&event.currentTarget.childNodes[1].ej2_instances[0]){// eslint-disable-next-line
this.pdfViewer.fireCommentSelect(event.currentTarget.id,event.currentTarget.childNodes[1].ej2_instances[0].value,annotation);}this.commentDivOnSelect(event);event.preventDefault();}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.commentsDivDoubleClickEvent=function(event){// eslint-disable-next-line
var commentShow=document.querySelectorAll('.e-pv-new-comments-div');for(var i=0;i<commentShow.length;i++){commentShow[i].style.display='none';}var isCommentLocked=this.checkIslockProperty(event.currentTarget.children[1]);if(isCommentLocked){if(event.currentTarget.childElementCount===2){event.currentTarget.lastChild.ej2_instances[0].enableEditMode=false;}else{event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=false;}}else if(event.currentTarget){var isLocked=this.checkAnnotationSettings(event.currentTarget.parentElement.id);if(!isLocked){if(event.currentTarget.childElementCount===2){event.currentTarget.lastChild.ej2_instances[0].enableEditMode=true;}else{event.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=true;}}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.commentDivOnSelect=function(event){// eslint-disable-next-line
var commentSelect=document.querySelectorAll('.e-pv-comments-select');for(var z=0;z<commentSelect.length;z++){commentSelect[z].classList.remove('e-pv-comments-select');}var activeElement=document.getElementById(event.currentTarget.id);if(activeElement){activeElement.classList.remove('e-pv-comments-hover');activeElement.classList.remove('e-pv-comments-leave');activeElement.classList.add('e-pv-comments-select');if(event.currentTarget.nextSibling){if(event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')){var activeSiblingElement=document.getElementById(event.currentTarget.nextSibling.id);activeSiblingElement.classList.remove('e-pv-comments-hover');activeSiblingElement.classList.remove('e-pv-comments-leave');activeSiblingElement.classList.add('e-pv-comments-select');}}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.commentDivMouseOver=function(event){var activeElement=document.getElementById(event.currentTarget.id);if(activeElement){activeElement.classList.remove('e-pv-comments-select');activeElement.classList.remove('e-pv-comments-leave');activeElement.classList.add('e-pv-comments-hover');if(event.currentTarget.nextSibling){if(event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')){var activeSiblingElement=document.getElementById(event.currentTarget.nextSibling.id);activeSiblingElement.classList.remove('e-pv-comments-select');activeSiblingElement.classList.remove('e-pv-comments-leave');activeSiblingElement.classList.add('e-pv-comments-hover');}}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.commentDivMouseLeave=function(event){var activeElement=document.getElementById(event.currentTarget.id);if(activeElement){activeElement.classList.remove('e-pv-comments-hover');activeElement.classList.remove('e-pv-comments-select');activeElement.classList.add('e-pv-comments-leave');if(event.currentTarget.nextSibling){if(event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')){var activeSiblingElement=document.getElementById(event.currentTarget.nextSibling.id);activeSiblingElement.classList.remove('e-pv-comments-hover');activeSiblingElement.classList.remove('e-pv-comments-select');activeSiblingElement.classList.add('e-pv-comments-leave');}}}};/**
     * @param event
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.drawIcons=function(event){// eslint-disable-next-line
if(this.pdfViewerBase.isCommentIconAdded){var pageIndex=this.pdfViewer.annotation.getEventPageNumber(event);var pageCurrentRect=this.pdfViewerBase.getElement('_pageDiv_'+pageIndex).getBoundingClientRect();var zoomValue=this.pdfViewerBase.getZoomFactor();// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.drawStickyNotes((event.clientX-pageCurrentRect.left)/zoomValue,(event.clientY-pageCurrentRect.top)/zoomValue,30,30,pageIndex,null);this.pdfViewerBase.isCommentIconAdded=false;var commentsButton=document.getElementById(this.pdfViewer.dataId+'_comment');if(sf.base.isBlazor()){commentsButton=commentsButton.children[0];}if(commentsButton&&commentsButton.classList.contains('e-pv-select')){commentsButton.classList.remove('e-pv-select');}else{var commentsIcon=document.getElementById(this.pdfViewer.dataId+'_commentIcon');if(commentsIcon){this.pdfViewer.enableRtl?commentsIcon.className='e-pv-comment-icon e-pv-icon e-icon-left e-right':commentsIcon.className='e-pv-comment-icon e-pv-icon e-icon-left';}}}};/**
     * @param annotationType
     * @param pageNumber
     * @param annotationSubType
     * @param annotationType
     * @param pageNumber
     * @param annotationSubType
     * @param annotationType
     * @param pageNumber
     * @param annotationSubType
     * @private
     */StickyNotesAnnotation.prototype.addComments=function(annotationType,pageNumber,annotationSubType,annotId,inputValue,author){// eslint-disable-next-line:max-line-length
this.pdfViewer._dotnetInstance.invokeMethodAsync('AddComment',annotationType,pageNumber,annotationSubType,annotId,inputValue,author);};// eslint-disable-next-line
StickyNotesAnnotation.prototype.commentsAnnotationSelect=function(event){var element=event.currentTarget;var isLocked=this.checkAnnotationSettings(element.id);if(isLocked){// eslint-disable-next-line
var annotation=this.findAnnotationObject(element.id);if(this.pdfViewer.annotationModule.checkAllowedInteractions('Select',annotation)){isLocked=false;}}if(!isLocked){if(element.classList.contains('e-pv-comments-border')){// eslint-disable-next-line
var commentsDiv=document.querySelectorAll('.e-pv-comments-div');for(var j=0;j<commentsDiv.length;j++){commentsDiv[j].style.minHeight=60+'px';}if(event.currentTarget.childElementCount===1){if(event.currentTarget.childNodes[0].querySelector('.e-editable-inline')){event.currentTarget.childNodes[0].style.minHeight=event.currentTarget.childNodes[0].clientHeight;}}}if(event.target.className==='e-pv-more-icon e-pv-icon'||event.target.className==='e-pv-more-options-button e-btn'){event.preventDefault();return null;}// eslint-disable-next-line
var pageNumber=parseInt(element.accessKey);if(!element.classList.contains('e-pv-comments-border')){// eslint-disable-next-line
var commentsContainer=document.querySelectorAll('.e-pv-comments-border');if(commentsContainer){for(var j=0;j<commentsContainer.length;j++){commentsContainer[j].classList.remove('e-pv-comments-border');}}var commentsDiv=document.getElementById(element.id);if(commentsDiv){commentsDiv.classList.add('e-pv-comments-border');}// eslint-disable-next-line
var commentTextBox=document.querySelectorAll('.e-pv-new-comments-div');for(var j=0;j<commentTextBox.length;j++){commentTextBox[j].style.display='none';}if(commentsDiv){// eslint-disable-next-line
var currentTextBox=commentsDiv.querySelector('.e-pv-new-comments-div');if(currentTextBox){currentTextBox.style.display='block';}}// eslint-disable-next-line
var textDiv=element.lastChild;this.isEditableElement=false;if(textDiv.querySelector('.e-editable-inline')){textDiv.style.display='block';textDiv.querySelector('.e-editable-inline').style.display='block';for(var i=0;i<element.childElementCount;i++){// eslint-disable-next-line
var activeElement=element.childNodes[i];// eslint-disable-next-line
var textElement=activeElement.querySelector('.e-editable-inline');if(textElement){if(textElement.style.display===''){if(textDiv.classList.contains('e-pv-new-comments-div')){this.isEditableElement=true;textDiv.style.display='none';textDiv.querySelector('.e-editable-inline').style.display='none';}}}}}this.isSetAnnotationType=false;if(event.currentTarget.childElementCount===1){event.currentTarget.childNodes[0].childNodes[1].ej2_instances[0].enableEditMode=true;}}else{this.isSetAnnotationType=true;}if(!this.isSetAnnotationType){if(this.pdfViewer.navigation){this.pdfViewer.navigationModule.goToPage(pageNumber);}var annotType=element.getAttribute('name');if(annotType==='null'||annotType==='Ink'){annotType='ink';}this.isCommentsSelected=false;this.setAnnotationType(element.id,annotType,pageNumber);if(!this.isCommentsSelected){this.selectAnnotationObj={id:element.id,annotType:annotType,pageNumber:pageNumber};}}}this.isSetAnnotationType=false;};// eslint-disable-next-line
StickyNotesAnnotation.prototype.findAnnotationObject=function(id){// eslint-disable-next-line max-len
if(this.pdfViewer.annotationModule.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){return this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;}else if(this.pdfViewer.selectedItems.annotations[0]){return this.pdfViewer.selectedItems.annotations[0];}// eslint-disable-next-line
var annotationCollection=this.pdfViewer.annotationCollection;if(annotationCollection){for(var i=0;i<annotationCollection.length;i++){if(annotationCollection[i].annotationId&&annotationCollection[i].annotationId===id){if(annotationCollection[i].shapeAnnotationType==='textMarkup'){return annotationCollection[i];}else{annotationCollection=this.pdfViewer.annotations;for(var j=0;j<annotationCollection.length;j++){if(annotationCollection[j].annotName&&annotationCollection[j].annotName===id){return annotationCollection[j];}}}}}}};StickyNotesAnnotation.prototype.checkAnnotationSettings=function(id){// eslint-disable-next-line
var annotationCollection=this.pdfViewer.annotationCollection;if(annotationCollection){for(var i=0;i<annotationCollection.length;i++){if(annotationCollection[i].annotationId&&annotationCollection[i].annotationId===id){if(annotationCollection[i].annotationSettings&&annotationCollection[i].annotationSettings.isLock){return true;}else{return false;}}}return false;}else{return false;}};StickyNotesAnnotation.prototype.updateCommentsContainerWidth=function(){var accordionContainer=document.getElementById(this.pdfViewer.dataId+'_accordionContentContainer');var commentsContentContainer=document.getElementById(this.pdfViewer.dataId+'_commentscontentcontainer');accordionContainer.style.width=commentsContentContainer.clientWidth+'px';};/**
     * @param pageIndex
     * @private
     */StickyNotesAnnotation.prototype.selectCommentsAnnotation=function(pageIndex){if(this.selectAnnotationObj&&!this.isCommentsSelected){if(this.selectAnnotationObj.pageNumber-1===pageIndex){// eslint-disable-next-line max-len
this.setAnnotationType(this.selectAnnotationObj.id,this.selectAnnotationObj.annotType,this.selectAnnotationObj.pageNumber);this.selectAnnotationObj=null;this.isCommentsSelected=true;}}};StickyNotesAnnotation.prototype.setAnnotationType=function(id,type,pageNumber){var typeString=type==='measure'?'shape_measure':type;if(typeString==='freeText'){typeString='freetext';}// eslint-disable-next-line
var storeCommentObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_'+typeString);if(this.pdfViewerBase.isStorageExceed){storeCommentObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_'+typeString];}if(storeCommentObject){var annotationCommentObject=JSON.parse(storeCommentObject);// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[0];// eslint-disable-next-line max-len
var index=this.pdfViewer.annotationModule.getPageCollection(annotationCommentObject,pageNumber-1);if(annotationCommentObject[index]){// eslint-disable-next-line
var pageCollections=annotationCommentObject[index].annotations;for(var i=0;i<pageCollections.length;i++){var currentSelector=pageCollections[i].annotationSelectorSettings;if(pageCollections[i].annotName===id){if(annotation){this.pdfViewer.fireAnnotationUnSelect(annotation.annotName,annotation.pageIndex,annotation);}this.pdfViewer.clearSelection(pageNumber-1);if(type==='textMarkup'){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageNumber-1,true);// eslint-disable-next-line max-len
var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+(pageNumber-1));this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectAnnotation(pageCollections[i],canvas,pageNumber-1);this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation=pageCollections[i];this.pdfViewer.annotation.textMarkupAnnotationModule.selectTextMarkupCurrentPage=pageNumber-1;this.pdfViewer.annotation.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);if(this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=true;// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);}}else if(type==='stamp'){this.pdfViewer.select([pageCollections[i].randomId],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}else if(type==='sticky'){this.pdfViewer.select([pageCollections[i].annotName],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}else if(type==='ink'){this.pdfViewer.select([pageCollections[i].id],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}else{this.pdfViewer.select([pageCollections[i].id],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}if(type==='textMarkup'){if(pageCollections[i].rect||pageCollections[i].bounds){// eslint-disable-next-line max-len
var scrollValue=this.pdfViewerBase.pageSize[pageNumber-1].top*this.pdfViewerBase.getZoomFactor()+this.pdfViewer.annotationModule.getAnnotationTop(pageCollections[i])*this.pdfViewerBase.getZoomFactor();if(scrollValue){var scroll_1=(scrollValue-20).toString();// eslint-disable-next-line radix
this.pdfViewerBase.viewerContainer.scrollTop=parseInt(scroll_1);}}}else{var top_1=pageCollections[i].bounds.top;if(type==='ink'){top_1=pageCollections[i].bounds.y;}// eslint-disable-next-line max-len
var scrollValue=this.pdfViewerBase.pageSize[pageNumber-1].top*this.pdfViewerBase.getZoomFactor()+top_1*this.pdfViewerBase.getZoomFactor();var scroll_2=(scrollValue-20).toString();// eslint-disable-next-line radix
this.pdfViewerBase.viewerContainer.scrollTop=parseInt(scroll_2);}this.isCommentsSelected=true;}}}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.modifyTextProperty=function(text,previousValue,annotationName){// eslint-disable-next-line
var currentAnnotation;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){currentAnnotation=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;}if(currentAnnotation){if(currentAnnotation.annotName!==annotationName){currentAnnotation=this.pdfViewer.selectedItems.annotations[0];}}else{currentAnnotation=this.pdfViewer.selectedItems.annotations[0];}if(annotationName&&currentAnnotation.annotName!==annotationName){for(var i=0;i<this.pdfViewer.annotations.length;i++){if(annotationName===this.pdfViewer.annotations[i].annotName){currentAnnotation=this.pdfViewer.annotations[i];break;}}}if(currentAnnotation){// eslint-disable-next-line
var commentsDiv=document.getElementById(currentAnnotation.annotName);if(commentsDiv){// eslint-disable-next-line
var pageNumber=void 0;if(commentsDiv.accessKey){// eslint-disable-next-line
pageNumber=parseInt(commentsDiv.accessKey);}else{pageNumber=this.pdfViewerBase.currentPageNumber;}var type=commentsDiv.getAttribute('name');var pageIndex=pageNumber-1;// eslint-disable-next-line
var pageAnnotations=void 0;var isMeasure=false;// eslint-disable-next-line max-len
if(currentAnnotation.shapeAnnotationType==='FreeText'||this.pdfViewer.enableShapeLabel&&(type==='shape'||type==='shape_measure')){var isTextAdded=false;if(annotationName){if(currentAnnotation.annotName!==annotationName){this.pdfViewer.annotation.modifyDynamicTextValue(text,annotationName);isTextAdded=true;}}if(!isTextAdded){if(currentAnnotation.shapeAnnotationType==='FreeText'){if(currentAnnotation.dynamicText!==text){this.pdfViewer.annotation.modifyDynamicTextValue(text,currentAnnotation.annotName);}currentAnnotation.dynamicText=text;}else{this.pdfViewer.annotation.modifyDynamicTextValue(text,currentAnnotation.annotName);currentAnnotation.labelContent=text;currentAnnotation.notes=text;}this.pdfViewer.nodePropertyChange(currentAnnotation,{});}}if(currentAnnotation.measureType&&currentAnnotation.measureType!==''){pageAnnotations=this.getAnnotations(pageIndex,null,'shape_measure');isMeasure=true;}else{pageAnnotations=this.getAnnotations(pageIndex,null,currentAnnotation.shapeAnnotationType);}if(pageAnnotations!==null&&currentAnnotation.shapeAnnotationType!=='FreeText'){for(var i=0;i<pageAnnotations.length;i++){if(pageAnnotations[i].annotName===currentAnnotation.annotName){// eslint-disable-next-line
var clonedObject=cloneObject(pageAnnotations[i]);if(text!==null){if(pageAnnotations[i].note!==text){// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageIndex,i,pageAnnotations[i],'Text Property Added','',clonedObject,pageAnnotations[i]);currentAnnotation=pageAnnotations[i];currentAnnotation.note=text;if(currentAnnotation.enableShapeLabel){currentAnnotation.labelContent=text;}// eslint-disable-next-line max-len
currentAnnotation.modifiedDate=this.getDateAndTime();if(!isMeasure){this.updateUndoRedoCollections(currentAnnotation,pageIndex);}else{this.updateUndoRedoCollections(currentAnnotation,pageIndex,'shape_measure');}if(!previousValue||previousValue===''){// eslint-disable-next-line max-len
this.pdfViewer.fireCommentAdd(currentAnnotation.annotName,currentAnnotation.note,currentAnnotation);}else{// eslint-disable-next-line max-len
this.pdfViewer.fireCommentEdit(currentAnnotation.annotName,currentAnnotation.note,currentAnnotation);}return currentAnnotation;}}}}}}}};/**
     * @param date
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.getDateAndTime=function(date){if(!date){date=new Date();}this.globalize=new sf.base.Internationalization();var dateOptions={format:this.pdfViewer.dateTimeFormat,type:'dateTime'};// eslint-disable-next-line
if(navigator.userAgent.includes("Firefox")){var newDate=new Date(date);if(!isNaN(newDate.getDate())){return this.globalize.formatDate(newDate,dateOptions);}else{var dateValue=this.parseDateString(date);return this.globalize.formatDate(new Date(dateValue),dateOptions);}}else{return this.globalize.formatDate(new Date(date),dateOptions);}};StickyNotesAnnotation.prototype.parseDateString=function(dateString){if(dateString){var dateParts=dateString.split(/[\s,]+/);var month=this.monthToNumber(dateParts[0]);var day=parseInt(dateParts[1],10);var year=new Date().getFullYear();var timeParts=dateParts[2].split(":");var hour=parseInt(timeParts[0],10);var minute=parseInt(timeParts[1],10);// Adjust the hour for AM/PM
if(dateParts[3]==="PM"&&hour!==12){hour+=12;}return new Date(year,month,day,hour,minute);}else{return new Date();}};StickyNotesAnnotation.prototype.monthToNumber=function(monthString){var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];return months.indexOf(monthString.substr(0,3));};// eslint-disable-next-line
StickyNotesAnnotation.prototype.modifyCommentsProperty=function(text,annotName,parentElement,previousValue){// eslint-disable-next-line
var currentAnnotation;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){currentAnnotation=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;}else{currentAnnotation=this.pdfViewer.selectedItems.annotations[0];}if(currentAnnotation){// eslint-disable-next-line
var commentsDiv=document.getElementById(currentAnnotation.annotName);// eslint-disable-next-line
var pageNumber=parseInt(commentsDiv.accessKey);var pageIndex=pageNumber-1;// eslint-disable-next-line
var pageAnnotations=void 0;var isMeasure=false;var author=this.getAuthorName(currentAnnotation,commentsDiv);if(currentAnnotation.measureType&&currentAnnotation.measureType!==''){pageAnnotations=this.getAnnotations(pageIndex,null,'shape_measure');isMeasure=true;}else{pageAnnotations=this.getAnnotations(pageIndex,null,currentAnnotation.shapeAnnotationType);}if(pageAnnotations!==null){for(var i=0;i<pageAnnotations.length;i++){if(pageAnnotations[i].annotName===currentAnnotation.annotName){currentAnnotation=pageAnnotations[i];}}}// eslint-disable-next-line
var clonedObject=cloneObject(currentAnnotation);if(currentAnnotation.comments.length>0){var isComment=false;for(var j=0;j<currentAnnotation.comments.length;j++){if(currentAnnotation.comments[j].annotName===annotName){isComment=true;currentAnnotation.comments[j].note=text;// eslint-disable-next-line max-len
currentAnnotation.comments[j].modifiedDate=this.getDateAndTime();}}// eslint-disable-next-line max-len
var newArray={annotName:annotName,parentId:parentElement,subject:'Comments',comments:[],author:author,note:text,shapeAnnotationType:'',state:'',stateModel:'',modifiedDate:this.getDateAndTime(),review:{state:'',stateModel:'',modifiedDate:this.getDateAndTime(),author:author},isLock:false};if(!isComment){currentAnnotation.comments[currentAnnotation.comments.length]=newArray;}}else{// eslint-disable-next-line max-len
var newArray={annotName:annotName,parentId:parentElement,subject:'Comments',comments:[],author:author,note:text,shapeAnnotationType:'',state:'',stateModel:'',modifiedDate:this.getDateAndTime(),review:{state:'',stateModel:'',modifiedDate:this.getDateAndTime(),author:author},isLock:false};currentAnnotation.comments[currentAnnotation.comments.length]=newArray;}// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageIndex,null,currentAnnotation,'Comments Property Added','',clonedObject,currentAnnotation);if(!isMeasure){this.updateUndoRedoCollections(currentAnnotation,pageIndex);}else{this.updateUndoRedoCollections(currentAnnotation,pageIndex,'shape_measure');}}if(previousValue!==undefined){this.pdfViewer.fireCommentEdit(annotName,text,currentAnnotation);}else{this.pdfViewer.fireCommentAdd(annotName,text,currentAnnotation);}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.modifyStatusProperty=function(text,statusElement){// eslint-disable-next-line
var currentAnnotation;if(this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation){currentAnnotation=this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation;}else{currentAnnotation=this.pdfViewer.selectedItems.annotations[0];}if(currentAnnotation){// eslint-disable-next-line
var commentsDiv=document.getElementById(currentAnnotation.annotName);// eslint-disable-next-line
var pageNumber=parseInt(commentsDiv.accessKey);var pageIndex=pageNumber-1;// eslint-disable-next-line
var pageAnnotations=void 0;var isMeasure=false;var author=commentsDiv.getAttribute('author');if(currentAnnotation.measureType&&currentAnnotation.measureType!==''){pageAnnotations=this.getAnnotations(pageIndex,null,'shape_measure');isMeasure=true;}else{pageAnnotations=this.getAnnotations(pageIndex,null,currentAnnotation.shapeAnnotationType);}if(pageAnnotations!==null){for(var i=0;i<pageAnnotations.length;i++){if(pageAnnotations[i].annotName===currentAnnotation.annotName){currentAnnotation=pageAnnotations[i];}}}// eslint-disable-next-line
var clonedObject=cloneObject(currentAnnotation);if(statusElement.parentElement.firstElementChild.id===statusElement.id){// eslint-disable-next-line max-len
currentAnnotation.review={state:text,stateModel:'Review',author:author,modifiedDate:this.getDateAndTime(),annotId:statusElement.id};currentAnnotation.state=text;currentAnnotation.stateModel='Review';// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageIndex,null,currentAnnotation,'Status Property Added','',clonedObject,currentAnnotation);this.pdfViewer.fireCommentStatusChanged(statusElement.id,currentAnnotation.note,currentAnnotation,currentAnnotation.state);}else{for(var j=0;j<currentAnnotation.comments.length;j++){if(currentAnnotation.comments[j].annotName===statusElement.id){// eslint-disable-next-line
var clonedObj=cloneObject(currentAnnotation.comments[j]);currentAnnotation.comments[j].state=text;currentAnnotation.comments[j].stateModel='Review';// eslint-disable-next-line max-len
currentAnnotation.comments[j].review={state:text,stateModel:'Review',author:author,modifiedDate:this.getDateAndTime(),annotId:statusElement.id};// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageIndex,null,currentAnnotation,'Status Property Added','',clonedObj,currentAnnotation.comments[j]);this.pdfViewer.fireCommentStatusChanged(currentAnnotation.comments[j].annotName,currentAnnotation.comments[j].note,currentAnnotation,currentAnnotation.comments[j].state);}}}if(!isMeasure){this.updateUndoRedoCollections(currentAnnotation,pageIndex);}else{this.updateUndoRedoCollections(currentAnnotation,pageIndex,'shape_measure');}}};/**
     * @param commentsElement
     * @param replyElement
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.modifyCommentDeleteProperty=function(commentsElement,replyElement){// eslint-disable-next-line
var clonedObject;// eslint-disable-next-line
var clonedAnnotation;// eslint-disable-next-line
var currentAnnotation;// eslint-disable-next-line
var commentsParentElement=document.getElementById(commentsElement.id);if(commentsParentElement){// eslint-disable-next-line
var pageNumber=parseInt(commentsParentElement.accessKey);var pageIndex=pageNumber-1;var annotType=commentsElement.getAttribute('name');// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(pageIndex,null,annotType);if(pageAnnotations!==null){for(var i=0;i<pageAnnotations.length;i++){if(pageAnnotations[i].annotName===commentsElement.id){currentAnnotation=pageAnnotations[i];}}}for(var i=1;i<=currentAnnotation.comments.length;i++){if(currentAnnotation.comments[i-1].annotName===replyElement.id){clonedAnnotation=cloneObject(currentAnnotation);var positionValue=i-1;currentAnnotation.comments[positionValue].position=i;clonedObject=cloneObject(currentAnnotation.comments[positionValue]);// eslint-disable-next-line max-len
this.pdfViewer.fireCommentDelete(currentAnnotation.comments[positionValue].annotName,currentAnnotation.comments[positionValue].note,currentAnnotation);currentAnnotation.comments.splice(positionValue,1);this.pdfViewer._dotnetInstance.invokeMethodAsync('RemoveReplyCollection',replyElement.id,pageIndex,positionValue);}}// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageIndex,null,clonedAnnotation,'Comments Reply Deleted','',clonedObject,currentAnnotation);this.updateUndoRedoCollections(currentAnnotation,pageIndex);}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.updateOpacityValue=function(annotation){// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(annotation.pageIndex,null,annotation.shapeAnnotationType);if(pageAnnotations!==null){for(var i=0;i<pageAnnotations.length;i++){if(pageAnnotations[i].annotName===annotation.annotName){pageAnnotations[i].opacity=annotation.opacity;this.updateUndoRedoCollections(pageAnnotations[i],annotation.pageIndex);}}}};/**
     * @param annotation
     * @param isAction
     * @param undoAnnotation
     * @param annotation
     * @param isAction
     * @param undoAnnotation
     * @param annotation
     * @param isAction
     * @param undoAnnotation
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.undoAction=function(annotation,isAction,undoAnnotation){if(isAction==='Text Property Added'){if(annotation){// eslint-disable-next-line
var commentsMainDiv=document.getElementById(annotation.annotName);if(commentsMainDiv){// eslint-disable-next-line
var pageNumber=parseInt(commentsMainDiv.accessKey);var pageIndex=pageNumber-1;// eslint-disable-next-line
var clonedAnnotationObject=cloneObject(annotation);commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value=undoAnnotation.note;var value=undoAnnotation.note;annotation.note=value;if(commentsMainDiv.childElementCount===2){commentsMainDiv.lastChild.style.display='block';}this.updateUndoRedoCollections(annotation,pageIndex);return clonedAnnotationObject;}}}else if(isAction==='Comments Property Added'){if(annotation.comments.length>0){// eslint-disable-next-line
var commentsDiv=document.getElementById(annotation.annotName);var pageIndex=this.pdfViewerBase.currentPageNumber-1;if(commentsDiv){// eslint-disable-next-line
var pageNumber=parseInt(commentsDiv.accessKey);pageIndex=pageNumber-1;}// eslint-disable-next-line
var clonedAnnotationObject=cloneObject(annotation);// eslint-disable-next-line
var comment=annotation.comments[annotation.comments.length-1];// eslint-disable-next-line
var removeDiv=document.getElementById(comment.annotName);if(removeDiv){removeDiv.remove();}annotation=undoAnnotation;this.updateUndoRedoCollections(annotation,pageIndex);return clonedAnnotationObject;}}else if(isAction==='Status Property Added'){if(annotation){// eslint-disable-next-line
var commentsDiv=document.getElementById(annotation.annotName);var pageIndex=this.pdfViewerBase.currentPageNumber-1;if(commentsDiv){// eslint-disable-next-line
var pageNumber=parseInt(commentsDiv.accessKey);pageIndex=pageNumber-1;}// eslint-disable-next-line
var clonedAnnotationObject=cloneObject(annotation);if(annotation.annotName===undoAnnotation.annotName){annotation.review=undoAnnotation.review;annotation.state=undoAnnotation.state;annotation.stateModel=undoAnnotation.stateModel;this.pdfViewer.annotation.redoCommentsElement.push(annotation);}else{for(var j=0;j<annotation.comments.length;j++){if(annotation.comments[j].annotName===undoAnnotation.annotName){annotation.comments[j].state=undoAnnotation.state;annotation.comments[j].stateModel=undoAnnotation.stateModel;annotation.comments[j].review=undoAnnotation.review;this.pdfViewer.annotation.redoCommentsElement.push(annotation.comments[j]);break;}}}// eslint-disable-next-line
var activeDiv=document.getElementById(undoAnnotation.annotName);if(activeDiv.lastChild.id===this.pdfViewer.dataId+'status'+'_container'){activeDiv.lastChild.remove();}else{if(activeDiv.firstChild.lastChild.id===this.pdfViewer.dataId+'status'+'_container'){activeDiv.firstChild.lastChild.remove();}}this.updateUndoRedoCollections(annotation,pageIndex);return clonedAnnotationObject;}}else if(isAction==='Comments Reply Deleted'){// eslint-disable-next-line
var commentsDiv=document.getElementById(annotation.annotName);if(commentsDiv){// eslint-disable-next-line
var pageNumber=parseInt(commentsDiv.accessKey);var pageIndex=pageNumber-1;this.renderComments(undoAnnotation,commentsDiv,true,annotation.annotName);this.pdfViewer.annotation.redoCommentsElement.push(undoAnnotation);this.updateUndoRedoCollections(annotation,pageIndex);return annotation;}}else if(isAction==='dynamicText Change'){if(annotation){// eslint-disable-next-line
var commentsMainDiv=document.getElementById(annotation.annotName);if(commentsMainDiv){// eslint-disable-next-line
this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFreeText',undoAnnotation.annotName,undoAnnotation.dynamicText);return annotation;}}}};/**
     * @param annotation
     * @param isAction
     * @param undoAnnotation
     * @param annotation
     * @param isAction
     * @param undoAnnotation
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.redoAction=function(annotation,isAction,undoAnnotation){if(isAction==='Text Property Added'){// eslint-disable-next-line
var commentsMainDiv=document.getElementById(annotation.annotName);if(commentsMainDiv){// eslint-disable-next-line
var pageNumber=parseInt(commentsMainDiv.accessKey);var pageIndex=pageNumber-1;commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value=annotation.note;commentsMainDiv.lastChild.style.display='block';this.updateUndoRedoCollections(annotation,pageIndex);return annotation;}}else if(isAction==='Comments Property Added'){// eslint-disable-next-line
var comment=annotation.comments[annotation.comments.length-1];var commentsDiv=document.getElementById(annotation.annotName);if(commentsDiv){// eslint-disable-next-line
var pageNumber=parseInt(commentsDiv.accessKey);var pageIndex=pageNumber-1;this.renderComments(comment,commentsDiv,true,annotation.annotName);this.updateUndoRedoCollections(annotation,pageIndex);return annotation;}}else if(isAction==='Status Property Added'){// eslint-disable-next-line
var poppedItem=this.pdfViewer.annotation.redoCommentsElement.pop();var pageIndex=this.pdfViewerBase.currentPageNumber-1;if(poppedItem){// eslint-disable-next-line max-len
var statusContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_container',className:'e-pv-status-container'});// eslint-disable-next-line max-len
var statusDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_div',className:'e-pv-status-div'});var statusSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'status'+'_icon'});statusDiv.appendChild(statusSpan);statusContainer.appendChild(statusDiv);// eslint-disable-next-line
var activeDiv=document.getElementById(annotation.annotName);if(activeDiv){// eslint-disable-next-line
var pageNumber=parseInt(activeDiv.accessKey);pageIndex=pageNumber-1;}// eslint-disable-next-line
if(annotation.annotName===poppedItem.annotName){this.updateStatusContainer(annotation.state,statusSpan,statusDiv,statusContainer);for(var i=0;i<activeDiv.firstChild.children.length;i++){if(activeDiv.firstChild.children[i].id===this.pdfViewer.dataId+'status_container'){activeDiv.firstChild.children[i].parentElement.removeChild(activeDiv.firstChild.children[i]);}}activeDiv.firstChild.appendChild(statusContainer);}else{for(var i=0;i<annotation.comments.length;i++){if(annotation.comments[i].annotName===poppedItem.annotName){this.updateStatusContainer(annotation.comments[i].state,statusSpan,statusDiv,statusContainer);var statusElement=document.getElementById(poppedItem.annotName);for(var i_1=0;i_1<statusElement.children.length;i_1++){if(statusElement.children[i_1].id===this.pdfViewer.dataId+'status_container'){statusElement.children[i_1].parentElement.removeChild(statusElement.children[i_1]);}}if(statusElement){statusElement.appendChild(statusContainer);}}}}}this.updateUndoRedoCollections(annotation,pageIndex);return annotation;}else if(isAction==='Comments Reply Deleted'){var pageIndex=this.pdfViewerBase.currentPageNumber-1;// eslint-disable-next-line
var activeDiv=document.getElementById(annotation.annotName);if(activeDiv){// eslint-disable-next-line
var pageNumber=parseInt(activeDiv.accessKey);pageIndex=pageNumber-1;}// eslint-disable-next-line
var poppedItem=this.pdfViewer.annotation.redoCommentsElement.pop();// eslint-disable-next-line
var clonedAnnotationObject=cloneObject(annotation);for(var i=0;i<annotation.comments.length;i++){if(annotation.comments[i].annotName===poppedItem.annotName){// eslint-disable-next-line
var replyElement=document.getElementById(poppedItem.annotName);annotation.comments.splice(i,1);replyElement.remove();}}this.updateUndoRedoCollections(annotation,pageIndex);return clonedAnnotationObject;}else if(isAction==='dynamicText Change'){if(annotation){// eslint-disable-next-line
var commentsMainDiv=document.getElementById(annotation.annotName);if(commentsMainDiv){// eslint-disable-next-line
this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFreeText',annotation.annotName,annotation.dynamicText);return annotation;}}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.updateUndoRedoCollections=function(annotationBase,pageNumber,shapeType,action){var annotationType=!shapeType?annotationBase.shapeAnnotationType:shapeType;if(annotationBase.indent&&annotationBase.indent!==''){annotationType='shape_measure';}// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(pageNumber,null,annotationType);if(pageAnnotations!==null){for(var i=0;i<pageAnnotations.length;i++){if(annotationBase.annotName===pageAnnotations[i].annotName){pageAnnotations[i]=annotationBase;this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],pageNumber);if(action){pageAnnotations.splice(i,1);this.deleteStickyNotesAnnotations(pageAnnotations,pageNumber);}}}if(annotationType==='shape_measure'){this.manageAnnotations(pageAnnotations,pageNumber,'shape_measure');}else{this.manageAnnotations(pageAnnotations,pageNumber,annotationBase.shapeAnnotationType);}}};/**
     * @param pageIndex
     * @param type
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.addAnnotationComments=function(pageIndex,type){var pageNumber=pageIndex+1;// eslint-disable-next-line
var poppedItem=this.pdfViewer.annotation.undoCommentsElement.pop();if(poppedItem){//this.createCommentsContainer(poppedItem, pageNumber);
if(type=="freeText"||type=="FreeText"){this.addComments(type,pageNumber,poppedItem.subject,poppedItem.annotName,poppedItem.dynamicText,poppedItem.author);}else{this.addComments(type,pageNumber,poppedItem.subject,poppedItem.annotName,poppedItem.note,poppedItem.author);}this.updateUndoRedoCollections(poppedItem,pageIndex,type);}};/**
     * @param annotation
     * @param type
     * @param action
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.findPosition=function(annotation,type,action){var index;var pageIndex;// eslint-disable-next-line
var commentsDiv=document.getElementById(annotation.annotName);if(commentsDiv){// eslint-disable-next-line
if(annotation.pageNumber!==undefined){pageIndex=annotation.pageNumber;}else if(annotation.pageIndex!==undefined){pageIndex=annotation.pageIndex;}else{var pageNumber=parseInt(commentsDiv.accessKey);pageIndex=pageNumber-1;}// eslint-disable-next-line
var parentDiv=commentsDiv.parentElement;for(var i=0;i<parentDiv.childElementCount;i++){if(parentDiv.childNodes[i].id===annotation.annotName){index=i;}}if(type==='Stamp'||type==='Image'){type='stamp';}else if(type==='FreeText'){type='freetext';}else if(type==='StickyNotes'||type==='sticky'){type='sticky';}else if(type==='Ink'){type='ink';}// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(pageIndex,null,type);if(pageAnnotations!==null){for(var i=0;i<pageAnnotations.length;i++){if(pageAnnotations[i].annotName===annotation.annotName){// eslint-disable-next-line
var clonedObject=cloneObject(pageAnnotations[i]);pageAnnotations[i].position=index;this.pdfViewer.annotation.undoCommentsElement.push(pageAnnotations[i]);if(type==='sticky'){this.updateUndoRedoCollections(clonedObject,pageIndex,null,action);}}}}}};/**
     * @param pageNumber
     * @param annotationBase
     * @private
     */StickyNotesAnnotation.prototype.addInCollection=function(pageNumber,annotationBase){if(annotationBase){var pageAnnotations=this.getAnnotations(pageNumber,null,'sticky');if(pageAnnotations){pageAnnotations.push(annotationBase);}this.manageAnnotations(pageAnnotations,pageNumber,'sticky');}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.getAnnotations=function(pageIndex,shapeAnnotations,type){// eslint-disable-next-line
var annotationCollection;if(type==='Stamp'||type==='stamp'||type==='Image'){type='stamp';}else if(type==='StickyNotes'||type==='sticky'){type='sticky';}else if(type==='textMarkup'){type='textMarkup';}else if(type==='shape'||type==='Line'||type==='Radius'||type==='Rectangle'||type==='Ellipse'||type==='Polygon'||type==='LineWidthArrowHead'||type==='Square'||type==='Circle'){type='shape';}else if(type==='FreeText'||type==='freetext'||type==='freeText'){type='freetext';}else if(type==='ink'||type==='Ink'){type='ink';}else{type='shape_measure';}// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_'+type);if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_'+type];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=shapeAnnotations;}}else{annotationCollection=shapeAnnotations;}return annotationCollection;};// eslint-disable-next-line
StickyNotesAnnotation.prototype.manageAnnotations=function(pageAnnotations,pageNumber,type){if(type==='Stamp'||type==='stamp'){type='stamp';}else if(type==='Sticky'||type==='sticky'){type='sticky';}else if(type==='textMarkup'){type='textMarkup';}else if(type==='shape'||type==='Line'||type==='Radius'||type==='Rectangle'||type==='Ellipse'||type==='Polygon'||type==='LineWidthArrowHead'||type==='Square'||type==='Circle'){type='shape';}else if(type==='FreeText'){type='freetext';}else if(type==='ink'||type==='Ink'){type='ink';}else{type='shape_measure';}// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_'+type);if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_'+type];}if(storeObject){var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_'+type);}var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_'+type]=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_'+type,annotationStringified);}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.updateStickyNotes=function(annotation,id){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_sticky');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sticky'];}if(storeObject){// eslint-disable-next-line
var bounds=annotation.bounds;var annotObject=JSON.parse(storeObject);for(var k=0;k<annotObject.length;k++){// eslint-disable-next-line
var currentAnnot=annotObject[k];for(var j=0;j<currentAnnot.annotations.length;j++){if(annotObject[k].annotations[j].annotName===annotation.annotName){if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_sticky');}var pageIndex=this.pdfViewer.annotationModule.getPageCollection(annotObject,0);if(annotObject[pageIndex]){// eslint-disable-next-line max-len
annotObject[k].annotations[j].bounds={left:bounds.x,top:bounds.y,width:bounds.width,height:bounds.height,right:bounds.right,bottom:bounds.bottom};}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){// eslint-disable-next-line max-len
this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sticky']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_sticky',annotationStringified);}break;}}}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.saveStickyAnnotations=function(){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_sticky');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sticky'];}// eslint-disable-next-line
var annotations=new Array();for(var j=0;j<this.pdfViewerBase.pageCount;j++){annotations[j]=[];}if(storeObject&&!this.pdfViewer.annotationSettings.skipDownload){var annotationCollection=JSON.parse(storeObject);for(var i=0;i<annotationCollection.length;i++){var newArray=[];var pageAnnotationObject=annotationCollection[i];if(pageAnnotationObject){for(var z=0;pageAnnotationObject.annotations.length>z;z++){this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex));}newArray=pageAnnotationObject.annotations;}annotations[pageAnnotationObject.pageIndex]=newArray;}}return JSON.stringify(annotations);};// eslint-disable-next-line
StickyNotesAnnotation.prototype.deleteStickyNotesAnnotations=function(pageAnnotations,pageNumber){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_sticky');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sticky'];}if(storeObject){var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_sticky');}var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sticky']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_sticky',annotationStringified);}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.addStickyNotesAnnotations=function(pageNumber,annotationBase){var pageAnnotations=this.getAnnotations(pageNumber,null,'sticky');if(pageAnnotations){pageAnnotations.push(annotationBase);}this.manageAnnotations(pageAnnotations,pageNumber,'sticky');};/**
     * @param annotName
     * @param text
     * @private
     */StickyNotesAnnotation.prototype.addTextToComments=function(annotName,text){// eslint-disable-next-line
var commentsMainDiv=document.getElementById(annotName);if(commentsMainDiv&&!sf.base.isBlazor()){commentsMainDiv.firstChild.firstChild.nextSibling.ej2_instances[0].value=text;}};/**
     * @param newAnnotation
     * @param annotation
     * @param isCut
     * @param newAnnotation
     * @param annotation
     * @param isCut
     * @param newAnnotation
     * @param annotation
     * @param isCut
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.updateAnnotationCollection=function(newAnnotation,annotation,isCut){var type=this.findAnnotationType(annotation);// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(annotation.pageIndex,null,type);if(isCut){pageAnnotations=this.pdfViewer.annotationModule.removedAnnotationCollection;}if(pageAnnotations!==null){for(var i=0;i<pageAnnotations.length;i++){if(isCut&&!pageAnnotations[i].annotName){pageAnnotations[i].annotName=pageAnnotations[i].annotationId;}if(pageAnnotations[i].annotName===annotation.annotName){// eslint-disable-next-line
var updateAnnotation=cloneObject(pageAnnotations[i]);updateAnnotation.annotName=newAnnotation.annotName;if(type==='shape'||type==='shape_measure'||type==='freetext'||type==='ink'){updateAnnotation.id=newAnnotation.id;}if(type==='stamp'){updateAnnotation.randomId=newAnnotation.id;}if(type==='ink'){updateAnnotation.bounds.x=newAnnotation.bounds.x;updateAnnotation.bounds.y=newAnnotation.bounds.y;}else{updateAnnotation.bounds.left=newAnnotation.bounds.x;updateAnnotation.bounds.top=newAnnotation.bounds.y;updateAnnotation.vertexPoints=newAnnotation.vertexPoints;}updateAnnotation.note=updateAnnotation.note?updateAnnotation.note:'';updateAnnotation.comments=[];// eslint-disable-next-line max-len
updateAnnotation.review={state:'',stateModel:'',modifiedDate:updateAnnotation.ModifiedDate,author:updateAnnotation.author};updateAnnotation.state='';updateAnnotation.stateModel='';updateAnnotation.pageNumber=annotation.pageIndex;this.pdfViewer.annotationModule.storeAnnotations(annotation.pageIndex,updateAnnotation,'_annotations_'+type);this.addComments(type,updateAnnotation.pageNumber+1,updateAnnotation.shapeAnnotationType,updateAnnotation.id,updateAnnotation.note,updateAnnotation.author);if(isCut){this.pdfViewer.annotationModule.removedAnnotationCollection=[];}break;}}}};StickyNotesAnnotation.prototype.findAnnotationType=function(annotation){var annotType;if(annotation.measureType!==''){annotType='shape_measure';}else{if(annotation.shapeAnnotationType==='StickyNotes'){annotType='sticky';}else if(annotation.shapeAnnotationType==='Stamp'||annotation.shapeAnnotationType==='Image'){annotType='stamp';}else if(annotation.shapeAnnotationType==='FreeText'){annotType='freetext';}else if(annotation.shapeAnnotationType==='Ink'){annotType='ink';}else{annotType='shape';}}return annotType;};StickyNotesAnnotation.prototype.setExistingAnnotationModifiedDate=function(date){var modifiedDateTime;if(date!==''){modifiedDateTime=this.setModifiedDate(date);}else{modifiedDateTime=this.setModifiedDate();}return modifiedDateTime;};StickyNotesAnnotation.prototype.updateModifiedTime=function(time,minutes){var modifiedTime;if(time>=12){if(time===12){modifiedTime=time+':'+minutes+' PM';}else{modifiedTime=time-12+':'+minutes+' PM';}}else{modifiedTime=time+':'+minutes+' AM';}return modifiedTime;};StickyNotesAnnotation.prototype.setModifiedDate=function(data){var dateTime;if(data){dateTime=this.getDateAndTime(data);}else{dateTime=this.getDateAndTime();}var date=new Date(dateTime);var modifiedTime;var modifiedDate=date.toString().split(' ').splice(1,2).join(' ');if(date.toLocaleTimeString().split(' ').length===2){// eslint-disable-next-line max-len
modifiedTime=date.toLocaleTimeString().split(' ')[0].split(':').splice(0,2).join(':')+' '+date.toLocaleTimeString().split(' ')[1];}else{// eslint-disable-next-line
var time=parseInt(date.toLocaleTimeString().split(':')[0]);var minutes=date.toLocaleTimeString().split(':')[1];modifiedTime=this.updateModifiedTime(time,minutes);}var modifiedDateTime=modifiedDate+', '+modifiedTime;return modifiedDateTime;};// eslint-disable-next-line
StickyNotesAnnotation.prototype.updateModifiedDate=function(titleContainer){if(titleContainer.id===this.pdfViewer.dataId+'_commenttype_icon'){titleContainer=titleContainer.nextSibling;}var author=titleContainer.textContent.split('-')[0];titleContainer.textContent=author+' - '+this.setModifiedDate();};/**
     * @param annotation
     * @param isBounds
     * @param isUndoRedoAction
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.updateAnnotationModifiedDate=function(annotation,isBounds,isUndoRedoAction){// eslint-disable-next-line
var titleContainer;if(annotation){// eslint-disable-next-line
var commentsContainer=document.getElementById(annotation.annotName);if(commentsContainer){if(!isBounds){titleContainer=commentsContainer.firstElementChild.firstElementChild.getElementsByClassName('e-pv-comment-title')[0];var author=titleContainer.textContent.split('-')[0];titleContainer.textContent=author+' - '+this.setModifiedDate();}else{var type=this.findAnnotationType(annotation);// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(annotation.pageIndex,null,type);if(pageAnnotations!=null&&annotation){for(var i=0;i<pageAnnotations.length;i++){if(annotation.annotName===pageAnnotations[i].annotName){// eslint-disable-next-line max-len
if(annotation.bounds.x!==pageAnnotations[i].bounds.left||annotation.bounds.y!==pageAnnotations[i].bounds.top||annotation.bounds.height!==pageAnnotations[i].bounds.height||annotation.bounds.width!==pageAnnotations[i].bounds.width){titleContainer=commentsContainer.firstElementChild.firstElementChild.getElementsByClassName('e-pv-comment-title')[0];var author=titleContainer.textContent.split('-')[0];titleContainer.textContent=author+' - '+this.setModifiedDate();}}if(pageAnnotations[i].shapeAnnotationType==='sticky'){this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],annotation.pageIndex);}}}}if(isUndoRedoAction){titleContainer=commentsContainer.firstElementChild.firstElementChild.getElementsByClassName('e-pv-comment-title')[0];if(annotation.modifiedDate!==undefined){var author=titleContainer.textContent.split('-')[0];titleContainer.textContent=author+' - '+this.setExistingAnnotationModifiedDate(annotation.modifiedDate);}}}}};/**
     * @param annotation
     * @param pageNumber
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.saveImportedStickyNotesAnnotations=function(annotation,pageNumber){var annotationObject=null;if(!annotation.Author){// eslint-disable-next-line max-len
annotation.Author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.stickyNotesSettings.author;}// eslint-disable-next-line max-len
var isLock=this.pdfViewer.stickyNotesSettings.isLock?this.pdfViewer.stickyNotesSettings.isLock:this.pdfViewer.annotationSettings.isLock;// eslint-disable-next-line
var allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);annotationObject={// eslint-disable-next-line max-len
shapeAnnotationType:'sticky',author:annotation.Author,allowedInteractions:allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,opacity:annotation.Opacity,state:annotation.State,stateModel:annotation.StateModel,pathData:'',comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},pageNumber:pageNumber,// eslint-disable-next-line max-len
bounds:{left:annotation.Bounds.X,top:annotation.Bounds.Y,width:annotation.Bounds.Width,height:annotation.Bounds.Height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},annotName:annotation.AnnotName,color:annotation.color,annotationSelectorSettings:this.getSettings(annotation),customData:this.pdfViewer.annotation.getCustomData(annotation),annotationSettings:{isLock:isLock},isPrint:annotation.IsPrint,isCommentLock:annotation.IsCommentLock};this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_sticky');};/**
     * @param annotation
     * @param pageNumber
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.updateStickyNotesAnnotationCollections=function(annotation,pageNumber){// eslint-disable-next-line
var annotationObject=null;if(!annotation.Author){// eslint-disable-next-line max-len
annotation.Author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.stickyNotesSettings.author;}// eslint-disable-next-line max-len
var isLock=this.pdfViewer.stickyNotesSettings.isLock?this.pdfViewer.stickyNotesSettings.isLock:this.pdfViewer.annotationSettings.isLock;// eslint-disable-next-line
var allowedInteractions=annotation.AllowedInteraction?annotation.AllowedInteraction:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);if(annotation.IsLock){isLock=annotation.isLock;}annotationObject={// eslint-disable-next-line max-len
shapeAnnotationType:'sticky',author:annotation.Author,allowedInteractions:allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,opacity:annotation.Opacity,state:annotation.State,stateModel:annotation.StateModel,pathData:'',comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},// eslint-disable-next-line max-len
bounds:{left:annotation.Bounds.X,top:annotation.Bounds.Y,width:annotation.Bounds.Width,height:annotation.Bounds.Height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},annotationId:annotation.AnnotName,color:annotation.color,pageNumber:pageNumber,customData:this.pdfViewer.annotation.getCustomData(annotation),annotationSettings:{isLock:isLock},isPrint:annotation.IsPrint,isCommentLock:annotation.IsCommentLock};return annotationObject;};/**
     * @private
     */StickyNotesAnnotation.prototype.clear=function(){this.commentsCount=0;this.commentsreplyCount=0;this.isAccordionContainer=true;this.isEditableElement=false;this.isCreateContextMenu=false;this.isPageCommentsRendered=false;this.isCommentsRendered=false;this.isAnnotationRendered=false;if(this.commentMenuObj){this.commentMenuObj.destroy();}// eslint-disable-next-line
var accordionPages=document.querySelectorAll('.e-pv-accordion-page-container');if(accordionPages){for(var j=0;j<accordionPages.length;j++){// eslint-disable-next-line
accordionPages[j].remove();}}if(this.commentsRequestHandler){this.commentsRequestHandler.clear();}};/**
     * @private
     */StickyNotesAnnotation.prototype.getModuleName=function(){return'StickyNotesAnnotation';};/**
     * This method used to add annotations with using program.
     *
     * @param annotationObject - It describes type of annotation object
     * @param offset - It describes about the annotation bounds or location
     * @returns Object
     * @private
     */StickyNotesAnnotation.prototype.updateAddAnnotationDetails=function(annotationObject,offset){//Creating new object if annotationObject is null
if(!annotationObject){annotationObject={offset:{x:1,y:1},pageNumber:0};offset=annotationObject.offset;}else if(!annotationObject.offset)offset={x:1,y:1};else offset=annotationObject.offset;//Creating the CurrentDate and Annotation name
var currentDateString=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();//Creating annotation settings
var annotationSelectorSettings=this.pdfViewer.stickyNotesSettings.annotationSelectorSettings?this.pdfViewer.stickyNotesSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;var annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stickyNotesSettings);var allowedInteractions=this.pdfViewer.stickyNotesSettings.allowedInteractions?this.pdfViewer.stickyNotesSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;annotationSettings.isLock=annotationObject.isLock?annotationObject.isLock:false;//Creating Annotation objects with it's proper properties
var stickyNotesAnnotation=[];var stickyNotes={AllowedInteractions:annotationObject.allowedInteractions?annotationObject.allowedInteractions:allowedInteractions,AnnotName:annotationName,AnnotType:'sticky',AnnotationFlags:null,AnnotationSelectorSettings:annotationObject.annotationSelectorSettings?annotationObject.annotationSelectorSettings:annotationSelectorSettings,AnnotationSettings:annotationSettings,Author:annotationObject.author?annotationObject.author:'Guest',Bounds:{X:offset.x,Y:offset.y,Width:30,Height:30,Left:offset.x,Top:offset.y,Location:{X:offset.x,Y:offset.y},Size:{Height:30,IsEmpty:false,Width:30}},Color:{IsEmpty:false,B:51,Blue:0.2,C:0,G:255},Comments:null,CreatedDate:currentDateString,CustomData:annotationObject.customData?annotationObject.customData:null,ExistingCustomData:null,Icon:'Comment',IsCommentLock:false,IsLock:annotationObject.isLock?annotationObject.isLock:false,IsPrint:annotationObject.isPrint?annotationObject.isPrint:true,ModifiedDate:currentDateString,Note:"",Opacity:annotationObject.opacity?annotationObject.opacity:1,Reference:null,Size:{IsEmpty:true,Width:0,Height:0},State:"",StateModel:"",StrokeColor:null,SubType:null,Subject:'Sticky Note',Type:null};//Adding the annotation object to an array and return it
stickyNotesAnnotation[0]=stickyNotes;return{stickyNotesAnnotation:stickyNotesAnnotation};};/**
     * @private
    */StickyNotesAnnotation.prototype.getAnnotationType=function(type){var annotationType;if(type==='stamp'||type==='Stamp'){annotationType='stamp';}else if(type==='shape'||type==='Line'||type==='Radius'||type==='Rectangle'||type==='Ellipse'||type==='Polygon'||type==='LineWidthArrowHead'||type==='Square'||type==='Circle'){annotationType='shape';}else if(type==='textMarkup'){annotationType='textMarkup';}else if(type==='freeText'||type==='FreeText'){annotationType='freeText';}else if(type==='sticky'||type==='StickyNotes'){annotationType='sticky';}else if(type==='measure'||type==='shape_measure'){annotationType='measure';}else if(type==='ink'||type==='Ink'){annotationType='ink';}return annotationType;};/**
     * @private
     */StickyNotesAnnotation.prototype.mouseDownOnCommentDiv=function(){// eslint-disable-next-line
var replyDiv=document.getElementsByClassName('e-editable-inline');for(var i=0;i<replyDiv.length;i++){replyDiv[i].addEventListener('click',this.editReply.bind(this));}// eslint-disable-next-line
var commentDiv=document.getElementsByClassName('e-pv-comment-textbox');for(var i=0;i<commentDiv.length;i++){commentDiv[i].addEventListener('click',this.editComment.bind(this));}// eslint-disable-next-line
var commentPanelContainer=document.querySelectorAll('.e-pv-comments-container');for(var i=0;i<commentPanelContainer.length;i++){commentPanelContainer[i].addEventListener('click',this.clickOnCommentsContainer.bind(this));}// eslint-disable-next-line
var commetTitleDiv=document.getElementsByClassName('e-pv-comment-title-container');for(var i=0;i<commetTitleDiv.length;i++){commetTitleDiv[i].addEventListener('click',this.onClickCommentTitle.bind(this));}// eslint-disable-next-line
var ReplyTitleDiv=document.getElementsByClassName("e-pv-reply-title-container");for(var i=0;i<ReplyTitleDiv.length;i++){ReplyTitleDiv[i].addEventListener('click',this.onClickReplyTitle.bind(this));}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.onClickCommentTitle=function(event){// eslint-disable-next-line
var x=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');for(var i=0;i<x.length;i++){x[i].style.visibility='hidden';}event.currentTarget.children[2].style.visibility='visible';};// eslint-disable-next-line
StickyNotesAnnotation.prototype.onClickReplyTitle=function(event){// eslint-disable-next-line
var x=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');for(var i=0;i<x.length;i++){x[i].style.visibility='hidden';}event.currentTarget.children[1].style.visibility='visible';this.pdfViewer._dotnetInstance.invokeMethodAsync('GetReplyCommentId',event.currentTarget.parentElement.id);event.preventDefault();};/**
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.editReply=function(event){// eslint-disable-next-line
var commentsContainer=document.querySelectorAll('.e-pv-comments-border');if(commentsContainer){for(var j=0;j<commentsContainer.length;j++){commentsContainer[j].classList.remove('e-pv-comments-border');}}// eslint-disable-next-line
var x=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');for(var i=0;i<x.length;i++){x[i].style.visibility='hidden';}if(event.currentTarget.parentElement.children[0].children[1]){event.currentTarget.parentElement.children[0].children[1].style.visibility='visible';event.currentTarget.parentElement.parentElement.classList.add('e-pv-comments-border');}event.preventDefault();};/**
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.editComment=function(event){// eslint-disable-next-line
var commentsContainer=document.querySelectorAll('.e-pv-comments-border');if(commentsContainer){for(var j=0;j<commentsContainer.length;j++){commentsContainer[j].classList.remove('e-pv-comments-border');}}// eslint-disable-next-line
var x=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');for(var i=0;i<x.length;i++){x[i].style.visibility='hidden';}if(event.currentTarget.parentElement.parentElement.children[0].children[2]){event.currentTarget.parentElement.parentElement.children[0].children[2].style.visibility='visible';}event.currentTarget.parentElement.parentElement.parentElement.classList.add('e-pv-comments-border');event.preventDefault();};StickyNotesAnnotation.prototype.clickOnCommentsContainer=function(event){// eslint-disable-next-line
var annotation=this.findAnnotationObject(event.currentTarget.id);var isLocked=this.checkAnnotationSettings(event.currentTarget.id);if(isLocked){if(this.pdfViewer.annotationModule.checkAllowedInteractions('Select',annotation)){isLocked=false;}}this.pdfViewerBase.updateCommentPanel();if(!isLocked){// eslint-disable-next-line
var commentPanelContainer=document.querySelectorAll(".e-pv-comments-container");for(var i=0;i<commentPanelContainer.length;i++){if(commentPanelContainer[i].id!==event.currentTarget.id){if(commentPanelContainer[i].lastElementChild.classList.contains('e-pv-comments-leave')){if(commentPanelContainer[i].getElementsByClassName('e-editable-inline')[0]){commentPanelContainer[i].getElementsByClassName('e-editable-inline')[0].style.display='none';}}}else{if(commentPanelContainer[i].getElementsByClassName('e-editable-inline')[0]){commentPanelContainer[i].getElementsByClassName('e-editable-inline')[0].style.display='block';}if(event.target.getElementsByClassName('e-pv-more-options-button')[0]){event.target.getElementsByClassName('e-pv-more-options-button')[0].style.visibility='visible';}var moreOptionIcon=event.target.classList.contains('e-pv-more-options-button');if(!moreOptionIcon){moreOptionIcon=event.target.parentElement.classList.contains('e-pv-more-options-button');if(moreOptionIcon){event.target.parentElement.style.visibility='visible';}}else{event.target.style.visibility='visible';}this.pdfViewer._dotnetInstance.invokeMethodAsync('GetCommentId',event.currentTarget.id);}}// eslint-disable-next-line
var commentsContainer=document.querySelectorAll('.e-pv-comments-border');if(commentsContainer){for(var j=0;j<commentsContainer.length;j++){commentsContainer[j].classList.remove('e-pv-comments-border');}}event.currentTarget.classList.add('e-pv-comments-border');this.pdfViewer.annotationModule.selectAnnotation(event.currentTarget.id);event.preventDefault();}};/**
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.addBorderForCommentsContainer=function(event){// eslint-disable-next-line
var commentPanelContainer=document.querySelectorAll(".e-pv-comments-container");for(var i=0;i<commentPanelContainer.length;i++){if(commentPanelContainer[i].id!==event.currentTarget.id){commentPanelContainer[i].lastElementChild.style.display='none';}else{commentPanelContainer[i].lastElementChild.style.display='block';// if (commentPanelContainer[i].lastElementChild.children[1].ej2_instances) {
//     commentPanelContainer[i].lastElementChild.children[1].ej2_instances[0].enableEditMode = true;
// }
}}// eslint-disable-next-line
var commentsContainer=document.querySelectorAll('.e-pv-comments-border');if(commentsContainer){for(var j=0;j<commentsContainer.length;j++){commentsContainer[j].classList.remove('e-pv-comments-border');}}event.currentTarget.classList.add('e-pv-comments-border');};StickyNotesAnnotation.prototype.UpdateReplyContainerOnEdit=function(){// eslint-disable-next-line
var editableElement=document.querySelectorAll('.e-editable-inline');for(var j=0;j<editableElement.length;j++){editableElement[j].style.display='none';}};StickyNotesAnnotation.prototype.RemoveLastReply=function(id){// eslint-disable-next-line
var commentPanelContainer=document.querySelectorAll(".e-pv-comments-container");for(var i=0;i<commentPanelContainer.length;i++){if(id===commentPanelContainer[i].children[0].children[1].children[0].id){commentPanelContainer[i].lastElementChild.style.display='none';}}// eslint-disable-next-line
var commentsContainer=document.querySelectorAll('.e-pv-comments-border');if(commentsContainer){for(var j=0;j<commentsContainer.length;j++){commentsContainer[j].classList.remove('e-pv-comments-border');}}// eslint-disable-next-line
var x=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');for(var i=0;i<x.length;i++){x[i].style.visibility='hidden';}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.UpdateCommentsCollectionInBlazor=function(args){// eslint-disable-next-line
var annotationCollection;var pageIndex=args.pageNumber;var type=args.shapeAnnotationType;// eslint-disable-next-line
var currentAnnotation;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){currentAnnotation=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;}else{currentAnnotation=this.pdfViewer.selectedItems.annotations[0];}// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_'+type);if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_'+type];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex-1);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}}if(currentAnnotation){for(var i=0;i<annotationCollection.length;i++){if(annotationCollection[i].annotName===args.annotName){annotationCollection[i].note=args.note;annotationCollection[i].annotName=args.annotName;annotationCollection[i].modifiedDate=this.getDateAndTime(args.modifiedDate);if(annotationCollection[i].modifiedDate==null){annotationCollection[i].modifiedDate=this.getDateAndTime();}var commentShow=document.querySelectorAll('.e-pv-new-comments-div');for(var i_2=0;i_2<commentShow.length;i_2++){commentShow[i_2].style.display=null;}for(var j=1;j<args.replyCollection.length;j++){// eslint-disable-next-line
var comment=args.replyCollection[j];comment.modifiedDate=this.getDateAndTime(args.replyCollection[j].modifiedDate);if(comment.modifiedDate==null){comment.modifiedDate=this.getDateAndTime();}// eslint-disable-next-line:max-line-length
var newArray={annotName:comment.annotName,parentId:comment.parentElement,subject:'Comments',comments:[],author:comment.author,note:comment.note,shapeAnnotationType:'',state:'',stateModel:'',modifiedDate:comment.modifiedDate,review:{state:'',stateModel:'',modifiedDate:this.getDateAndTime(),author:comment.author},isLock:false};if(args.replyCollection[j].note||args.replyCollection[j].note!==''){annotationCollection[i].comments[j-1]=newArray;currentAnnotation.comments[j-1]=newArray;}}var previousValue=currentAnnotation.note;currentAnnotation.annotName=annotationCollection[i].annotName;currentAnnotation.note=annotationCollection[i].note;currentAnnotation.modifiedDate=this.getDateAndTime(annotationCollection[i].modifiedDate);if(currentAnnotation.shapeAnnotationType==='FreeText'){this.modifyTextProperty(currentAnnotation.note,previousValue,currentAnnotation.annotName);}}// if (annotationCollection[i].dynamicText && annotationCollection[i].note) {
//     if (annotationCollection[i].dynamicText !== annotationCollection[i].note) {
//         annotationCollection[i].dynamicText = annotationCollection[i].note
//     }
// }
this.updateUndoRedoCollections(annotationCollection[i],pageIndex-1);}}};/**
     * @private
    */StickyNotesAnnotation.prototype.getAuthorName=function(annotation,commonDiv){var author;if(annotation){var type=annotation.shapeAnnotationType;var annotationType=this.getAnnotationType(type);author=this.pdfViewer.annotationModule.updateAnnotationAuthor(annotationType,type);}else{author=commonDiv.getAttribute('author');}return author;};return StickyNotesAnnotation;}();var InkAnnotation=/** @class */function(){function InkAnnotation(pdfViewer,pdfViewerBase){// eslint-disable-next-line
this.newObject=[];/**
         * @private
         */this.outputString='';/**
         * @private
         */ // eslint-disable-next-line
this.inkAnnotationindex=[];/**
         * @private
         */this.isAddAnnotationProgramatically=false;/**
         * @private
         */this.currentPageNumber='';this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @private
     */InkAnnotation.prototype.drawInk=function(){this.pdfViewerBase.disableTextSelectionMode();this.pdfViewer.tool='Ink';};InkAnnotation.prototype.drawInkAnnotation=function(pageNumber){if(this.pdfViewerBase.isToolbarInkClicked){this.pdfViewerBase.isInkAdded=true;var pageIndex=!isNaN(pageNumber)?pageNumber:this.pdfViewerBase.currentPageNumber-1;if(this.outputString&&this.outputString!==''){var currentAnnot=this.addInk(pageIndex);this.pdfViewer.renderDrawing(undefined,pageIndex);this.pdfViewer.clearSelection(pageIndex);this.pdfViewer.select([currentAnnot.id],currentAnnot.annotationSelectorSettings);if(this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule){this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools("Ink");}}else{this.outputString='';this.newObject=[];this.pdfViewerBase.isToolbarInkClicked=false;this.pdfViewer.tool='';}this.pdfViewerBase.isInkAdded=false;}};/**
     * @private
     */InkAnnotation.prototype.storePathData=function(){this.convertToPath(this.newObject);this.newObject=[];};/**
     * @param position
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
InkAnnotation.prototype.drawInkInCanvas=function(position,pageIndex){// eslint-disable-next-line
if(this.currentPageNumber!==''&&parseInt(this.currentPageNumber)!==pageIndex){// eslint-disable-next-line
this.drawInkAnnotation(parseInt(this.currentPageNumber));this.pdfViewerBase.isToolbarInkClicked=true;this.pdfViewer.tool='Ink';}var zoom=this.pdfViewerBase.getZoomFactor();var ratio=this.pdfViewerBase.getWindowDevicePixelRatio();// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);// eslint-disable-next-line
var context=canvas.getContext('2d');var thickness=this.pdfViewer.inkAnnotationSettings.thickness?this.pdfViewer.inkAnnotationSettings.thickness:1;// eslint-disable-next-line max-len
var opacity=this.pdfViewer.inkAnnotationSettings.opacity?this.pdfViewer.inkAnnotationSettings.opacity:1;// eslint-disable-next-line max-len
var strokeColor=this.pdfViewer.inkAnnotationSettings.strokeColor?this.pdfViewer.inkAnnotationSettings.strokeColor:'#ff0000';if(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&zoom<=0.7){context.setTransform(ratio,0,0,ratio,0,0);}context.beginPath();context.lineJoin='round';context.lineCap='round';context.moveTo(position.prevPosition.x,position.prevPosition.y);context.lineTo(position.currentPosition.x,position.currentPosition.y);context.lineWidth=thickness*zoom>1?thickness*zoom:thickness;context.strokeStyle=strokeColor;context.globalAlpha=opacity;context.stroke();// context.lineWidth = 2;
context.arc(position.prevPosition.x,position.prevPosition.y,2/2,0,Math.PI*2,true);context.closePath();this.pdfViewerBase.prevPosition=position.currentPosition;this.newObject.push(position.currentPosition.x,position.currentPosition.y);this.currentPageNumber=pageIndex.toString();};// eslint-disable-next-line
InkAnnotation.prototype.convertToPath=function(newObject){this.movePath(newObject[0],newObject[1]);this.linePath(newObject[0],newObject[1]);for(var n=2;n<newObject.length;n=n+2){this.linePath(newObject[n],newObject[n+1]);}};InkAnnotation.prototype.linePath=function(x,y){this.outputString+='L'+x+','+y+' ';};InkAnnotation.prototype.movePath=function(x,y){this.outputString+='M'+x+','+y+' ';};/**
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
InkAnnotation.prototype.addInk=function(pageNumber){// eslint-disable-next-line
var currentBounds=this.calculateInkSize();var zoomvalue=this.pdfViewerBase.getZoomFactor();// eslint-disable-next-line
var annot;if(this.pdfViewerBase.isToolbarInkClicked){var annotationName=this.pdfViewer.annotation.createGUID();var modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var pageIndex=!isNaN(pageNumber)?pageNumber:this.pdfViewerBase.currentPageNumber-1;var thickness=this.pdfViewer.inkAnnotationSettings.thickness?this.pdfViewer.inkAnnotationSettings.thickness:1;// eslint-disable-next-line max-len
var opacity=this.pdfViewer.inkAnnotationSettings.opacity?this.pdfViewer.inkAnnotationSettings.opacity:1;// eslint-disable-next-line max-len
var strokeColor=this.pdfViewer.inkAnnotationSettings.strokeColor?this.pdfViewer.inkAnnotationSettings.strokeColor:'#ff0000';// eslint-disable-next-line
var isLock=this.pdfViewer.inkAnnotationSettings.isLock?this.pdfViewer.inkAnnotationSettings.isLock:this.pdfViewer.annotationSettings.isLock;var author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.inkAnnotationSettings.author?this.pdfViewer.inkAnnotationSettings.author:'Guest';var customData=this.pdfViewer.inkAnnotationSettings.customData;var isPrint=this.pdfViewer.inkAnnotationSettings.isPrint;// eslint-disable-next-line
var allowedInteractions=this.pdfViewer.inkAnnotationSettings.allowedInteractions?this.pdfViewer.inkAnnotationSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;// eslint-disable-next-line
var annotationSettings=this.pdfViewer.inkAnnotationSettings?this.pdfViewer.inkAnnotationSettings:this.pdfViewer.annotationSettings;annot={// eslint-disable-next-line max-len
id:'ink'+this.pdfViewerBase.inkCount,bounds:{x:currentBounds.x,y:currentBounds.y,width:currentBounds.width,height:currentBounds.height},pageIndex:pageIndex,data:this.outputString,customData:customData,shapeAnnotationType:'Ink',opacity:opacity,strokeColor:strokeColor,thickness:thickness,annotName:annotationName,comments:[],author:author,subject:'Ink',notes:'',review:{state:'',stateModel:'',modifiedDate:modifiedDate,author:author},annotationSelectorSettings:this.getSelector('Ink',''),modifiedDate:modifiedDate,annotationSettings:annotationSettings,isPrint:isPrint,allowedInteractions:allowedInteractions,isCommentLock:false,isLocked:isLock};var annotation=this.pdfViewer.add(annot);// eslint-disable-next-line
var bounds={left:annot.bounds.x,top:annot.bounds.y,width:annot.bounds.width,height:annot.bounds.height};// eslint-disable-next-line
var settings={opacity:annot.opacity,strokeColor:annot.strokeColor,thickness:annot.thickness,modifiedDate:annot.modifiedDate,width:annot.bounds.width,height:annot.bounds.height,data:this.outputString};this.pdfViewerBase.inkCount++;// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('ink',annot.pageIndex+1,annot.shapeAnnotationType,annotationName,'',author);annot.annotName=annotationName;// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageIndex,null,annotation,'Addition','',annotation,annotation);this.pdfViewer.annotationModule.storeAnnotations(pageIndex,annot,'_annotations_ink');this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,'Ink',bounds,settings);if(this.pdfViewerBase.isInkAdded){this.outputString='';this.newObject=[];}this.pdfViewerBase.isToolbarInkClicked=false;this.pdfViewer.tool='';}return annot;};/**
     * @private
     */InkAnnotation.prototype.setAnnotationMode=function(){if(this.pdfViewerBase.isToolbarInkClicked){this.drawInkAnnotation();}else{this.pdfViewerBase.isToolbarInkClicked=true;this.drawInk();}};InkAnnotation.prototype.saveInkSignature=function(){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_ink');// eslint-disable-next-line
var annotations=new Array();for(var j=0;j<this.pdfViewerBase.pageCount;j++){annotations[j]=[];}if(storeObject){var annotationCollection=JSON.parse(storeObject);for(var i=0;i<annotationCollection.length;i++){// eslint-disable-next-line
var newArray=[];var pageAnnotationObject=annotationCollection[i];if(pageAnnotationObject){for(var z=0;pageAnnotationObject.annotations.length>z;z++){this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);// eslint-disable-next-line max-len
var strokeColorString=pageAnnotationObject.annotations[z].strokeColor;pageAnnotationObject.annotations[z].strokeColor=JSON.stringify(this.pdfViewerBase.signatureModule.getRgbCode(strokeColorString));pageAnnotationObject.annotations[z].bounds=JSON.stringify(this.pdfViewer.annotation.getInkBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex));// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(pageAnnotationObject.annotations[z].data);// eslint-disable-next-line
var csData=sf.drawings.splitArrayCollection(collectionData);pageAnnotationObject.annotations[z].data=JSON.stringify(csData);}newArray=pageAnnotationObject.annotations;}annotations[pageAnnotationObject.pageIndex]=newArray;}}return JSON.stringify(annotations);};/**
     * @param pageNumber
     * @param annotationBase
     * @param pageNumber
     * @param annotationBase
     * @private
     */ // eslint-disable-next-line
InkAnnotation.prototype.addInCollection=function(pageNumber,annotationBase){if(annotationBase){// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations){pageAnnotations.push(annotationBase);}this.manageInkAnnotations(pageAnnotations,pageNumber);}};// eslint-disable-next-line
InkAnnotation.prototype.calculateInkSize=function(){var minimumX=-1;var minimumY=-1;var maximumX=-1;var maximumY=-1;// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(this.outputString);var zoomvalue=this.pdfViewerBase.getZoomFactor();// eslint-disable-next-line
for(var k=0;k<collectionData.length;k++){// eslint-disable-next-line
var val=collectionData[k];if(minimumX===-1){// eslint-disable-next-line
minimumX=val['x'];// eslint-disable-next-line
maximumX=val['x'];// eslint-disable-next-line
minimumY=val['y'];// eslint-disable-next-line
maximumY=val['y'];}else{// eslint-disable-next-line
var point1=val['x'];// eslint-disable-next-line
var point2=val['y'];if(minimumX>=point1){minimumX=point1;}if(minimumY>=point2){minimumY=point2;}if(maximumX<=point1){maximumX=point1;}if(maximumY<=point2){maximumY=point2;}}}var newdifferenceX=maximumX-minimumX;var newdifferenceY=maximumY-minimumY;// eslint-disable-next-line max-len
return{x:minimumX/zoomvalue,y:minimumY/zoomvalue,width:newdifferenceX/zoomvalue,height:newdifferenceY/zoomvalue};};/**
     * @param annotationCollection
     * @param pageIndex
     * @param isImport
     * @private
     */ // eslint-disable-next-line
InkAnnotation.prototype.renderExistingInkSignature=function(annotationCollection,pageIndex,isImport){var annot;var isinkAnnotationAdded=false;if(!isImport){for(var p=0;p<this.inkAnnotationindex.length;p++){if(this.inkAnnotationindex[p]===pageIndex){isinkAnnotationAdded=true;break;}}}if(annotationCollection&&!isinkAnnotationAdded){if(annotationCollection.length>0&&this.inkAnnotationindex.indexOf(pageIndex)===-1){this.inkAnnotationindex.push(pageIndex);}for(var n=0;n<annotationCollection.length;n++){// eslint-disable-next-line
var currentAnnotation=annotationCollection[n];if(currentAnnotation){// eslint-disable-next-line
var data=currentAnnotation.PathData;if(isImport&&data){if(_typeof(data)==='object'&&data.length>1){data=sf.drawings.getPathString(data);}else{if(currentAnnotation.IsPathData||data.split('command').length<=1){data=data;}else{data=sf.drawings.getPathString(JSON.parse(data));}}}this.outputString=data;// eslint-disable-next-line
var calculateInkPosition=this.calculateInkSize();this.outputString='';var rectDiff=0;var rectDifference=1;// eslint-disable-next-line
var bounds=currentAnnotation.Bounds;if(calculateInkPosition){if(calculateInkPosition.height<1){rectDiff=bounds.Height?bounds.Height:bounds.height;rectDifference=bounds.Height?bounds.Height:bounds.height;}else if(calculateInkPosition.width<1){rectDiff=bounds.Width?bounds.Width:bounds.width;rectDifference=bounds.Width?bounds.Width:bounds.width;}}var currentLeft=!sf.base.isNullOrUndefined(bounds.X)?bounds.X+rectDiff/2:bounds.x+rectDiff/2;var currentTop=!sf.base.isNullOrUndefined(bounds.Y)?bounds.Y+rectDiff/2:bounds.y+rectDiff/2;var currentWidth=bounds.Width?bounds.Width-(rectDifference-1):bounds.width-(rectDifference-1);var currentHeight=bounds.Height?bounds.Height-(rectDifference-1):bounds.height-(rectDifference-1);var isLock=currentAnnotation.AnnotationSettings?currentAnnotation.AnnotationSettings.isLock:false;// eslint-disable-next-line
var selectorSettings=currentAnnotation.AnnotationSelectorSettings?currentAnnotation.AnnotationSelectorSettings:this.getSelector(currentAnnotation,'Ink');var customData=this.pdfViewer.annotation.getCustomData(currentAnnotation);var isPrint=true;if(currentAnnotation.AnnotationSettings){isPrint=currentAnnotation.AnnotationSettings.isPrint;}else{isPrint=this.pdfViewer.inkAnnotationSettings.isPrint;}if(currentAnnotation.IsLocked){isLock=currentAnnotation.IsLocked;}if(currentAnnotation.Subject==='Highlight'&&currentAnnotation.Opacity===1){currentAnnotation.Opacity=currentAnnotation.Opacity/2;}// eslint-disable-next-line max-len
currentAnnotation.allowedInteractions=currentAnnotation.AllowedInteractions?currentAnnotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(currentAnnotation);annot={// eslint-disable-next-line max-len
id:'ink'+this.pdfViewerBase.inkCount,bounds:{x:currentLeft,y:currentTop,width:currentWidth,height:currentHeight},pageIndex:pageIndex,data:data,shapeAnnotationType:'Ink',opacity:currentAnnotation.Opacity,strokeColor:currentAnnotation.StrokeColor,thickness:currentAnnotation.Thickness,annotName:currentAnnotation.AnnotName,// eslint-disable-next-line max-len
comments:this.pdfViewer.annotationModule.getAnnotationComments(currentAnnotation.Comments,currentAnnotation,currentAnnotation.Author),author:currentAnnotation.Author,allowedInteractions:currentAnnotation.allowedInteractions,subject:currentAnnotation.Subject,modifiedDate:currentAnnotation.ModifiedDate,// eslint-disable-next-line max-len
review:{state:'',stateModel:'',modifiedDate:currentAnnotation.ModifiedDate,author:currentAnnotation.Author},notes:currentAnnotation.Note,annotationSettings:{isLock:isLock},annotationSelectorSettings:selectorSettings,customData:customData,isPrint:isPrint,isCommentLock:currentAnnotation.IsCommentLock};this.pdfViewer.add(annot);// eslint-disable-next-line
var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+currentAnnotation.pageIndex);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvass,annot.pageIndex);this.pdfViewer.annotationModule.storeAnnotations(annot.pageIndex,annot,'_annotations_ink');if(this.isAddAnnotationProgramatically){var settings={opacity:annot.opacity,strokeColor:annot.strokeColor,thickness:annot.thickness,modifiedDate:annot.modifiedDate,width:annot.bounds.width,height:annot.bounds.height,data:this.outputString};this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,'Ink',bounds,settings);}this.pdfViewerBase.currentSignatureAnnot=null;this.pdfViewerBase.signatureCount++;this.pdfViewerBase.inkCount++;// eslint-disable-next-line max-len
if(this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable){// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')],true);// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')],true);}}}}};/**
     * @param pageNumber
     * @param annotations
     * @private
     */ // eslint-disable-next-line
InkAnnotation.prototype.storeInkSignatureData=function(pageNumber,annotations){// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(annotations.pageIndex,null,annotations,'Addition','',annotations,annotations);// eslint-disable-next-line
var annotation=null;var left=annotations.bounds.left?annotations.bounds.left:annotations.bounds.x;var top=annotations.bounds.top?annotations.bounds.top:annotations.bounds.y;if(annotations.wrapper&&annotations.wrapper.bounds){left=annotations.wrapper.bounds.left;top=annotations.wrapper.bounds.top;}annotation={// eslint-disable-next-line max-len
id:annotations.id,bounds:{x:left,y:top,width:annotations.bounds.width,height:annotations.bounds.height},// eslint-disable-next-line max-len
shapeAnnotationType:'Ink',opacity:annotations.opacity,thickness:annotations.thickness,strokeColor:annotations.strokeColor,pageIndex:annotations.pageIndex,data:annotations.data,annotName:annotations.annotName,// eslint-disable-next-line max-len
comments:annotations.comments,author:annotations.author,subject:annotations.subject,modifiedDate:annotations.modifiedDate,// eslint-disable-next-line max-len
review:{state:'',stateModel:'',modifiedDate:annotations.modifiedDate,author:annotations.author},notes:annotations.notes,annotationSelectorSettings:this.getSelector(annotations,'Ink'),isCommentLock:annotations.isCommentLock};// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_ink');var index=0;if(!storeObject){var shapeAnnotation={pageIndex:pageNumber,annotations:[]};shapeAnnotation.annotations.push(annotation);index=shapeAnnotation.annotations.indexOf(annotation);var annotationCollection=[];annotationCollection.push(shapeAnnotation);var annotationStringified=JSON.stringify(annotationCollection);window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_ink',annotationStringified);}else{var annotObject=JSON.parse(storeObject);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_ink');var pageIndex=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[pageIndex]){annotObject[pageIndex].annotations.push(annotation);index=annotObject[pageIndex].annotations.indexOf(annotation);}else{var markupAnnotation={pageIndex:pageNumber,annotations:[]};markupAnnotation.annotations.push(annotation);index=markupAnnotation.annotations.indexOf(annotation);annotObject.push(markupAnnotation);}var annotationStringified=JSON.stringify(annotObject);window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_ink',annotationStringified);}};InkAnnotation.prototype.getSelector=function(type,subject){var selector=this.pdfViewer.annotationSelectorSettings;if(type==='Ink'&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings){selector=this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings;}return selector;};// eslint-disable-next-line
InkAnnotation.prototype.getAnnotations=function(pageIndex,shapeAnnotations){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_ink');if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=shapeAnnotations;}}else{annotationCollection=shapeAnnotations;}return annotationCollection;};/**
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @private
     */ // eslint-disable-next-line
InkAnnotation.prototype.modifySignatureInkCollection=function(property,pageNumber,annotationBase){this.pdfViewerBase.updateDocumentEditedProperty(true);// eslint-disable-next-line
var currentAnnotObject=null;// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations!=null&&annotationBase){for(var i=0;i<pageAnnotations.length;i++){if(annotationBase.id===pageAnnotations[i].id){if(property==='bounds'){// eslint-disable-next-line max-len
pageAnnotations[i].bounds={x:annotationBase.wrapper.bounds.left,y:annotationBase.wrapper.bounds.top,width:annotationBase.bounds.width,height:annotationBase.bounds.height};}else if(property==='stroke'){pageAnnotations[i].strokeColor=annotationBase.wrapper.children[0].style.strokeColor;}else if(property==='opacity'){pageAnnotations[i].opacity=annotationBase.wrapper.children[0].style.opacity;}else if(property==='thickness'){pageAnnotations[i].thickness=annotationBase.wrapper.children[0].style.strokeWidth;}else if(property==='notes'){pageAnnotations[i].notes=annotationBase.notes;}else if(property==='delete'){currentAnnotObject=pageAnnotations.splice(i,1)[0];break;}pageAnnotations[i].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],pageNumber);}}this.manageInkAnnotations(pageAnnotations,pageNumber);}return currentAnnotObject;};// eslint-disable-next-line
InkAnnotation.prototype.manageInkAnnotations=function(pageAnnotations,pageNumber){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_ink');if(storeObject){var annotObject=JSON.parse(storeObject);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_ink');var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_ink',annotationStringified);}};// To save the imported annotations while downloading or exporting for the page above 10 without a scroll (EJ2-63924)
InkAnnotation.prototype.saveImportedInkAnnotation=function(annotation,pageNumber){var annotationObject=null;var currentBounds=annotation.Bounds;var bounds={x:currentBounds.X,y:currentBounds.Y,width:currentBounds.Width,height:currentBounds.Height};var allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);var customData=this.pdfViewer.annotation.getCustomData(annotation);var comments=this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author);var review={state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author};var annotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);var annotationSelectorSettings=this.getSettings(annotation);var data=annotation.PathData;if(_typeof(data)==='object'&&data.length>1){data=sf.drawings.getPathString(data);}else{if(annotation.IsPathData||data.split('command').length<=1){data=data;}else{data=sf.drawings.getPathString(JSON.parse(data));}}annotationObject={allowedInteractions:allowedInteractions,annotName:annotation.AnnotName,annotationSelectorSettings:annotationSelectorSettings,annotationSettings:annotationSettings,author:annotation.Author,bounds:bounds,customData:customData,comments:comments,data:data,id:"Ink",isCommentLock:annotation.IsCommentLock,isLocked:annotation.IsLocked,isPrint:annotation.IsPrint,modifiedDate:annotation.ModifiedDate,note:annotation.Note,opacity:annotation.Opacity,pageIndex:pageNumber,review:review,shapeAnnotationType:annotation.AnnotationType,strokeColor:annotation.StrokeColor,subject:annotation.Subject,thickness:annotation.Thickness};this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_ink');};// To get the annotation selector settings 
InkAnnotation.prototype.getSettings=function(annotation){var selector=this.pdfViewer.annotationSelectorSettings;if(annotation.AnnotationSelectorSettings){selector=annotation.AnnotationSelectorSettings;}else{selector=this.getSelector(annotation.ShapeAnnotationType,annotation.Subject);}return selector;};/**
     * @param currentAnnotation
     * @param pageIndex
     * @param isImport
     * @param currentAnnotation
     * @param pageIndex
     * @param isImport
     * @private
     */ // eslint-disable-next-line
InkAnnotation.prototype.updateInkCollections=function(currentAnnotation,pageIndex,isImport){// eslint-disable-next-line
var annot;// eslint-disable-next-line
if(currentAnnotation){// eslint-disable-next-line
var bounds=currentAnnotation.Bounds;var currentLeft=bounds.X;var currentTop=bounds.Y;var currentWidth=bounds.Width;var currentHeight=bounds.Height;var customData=currentAnnotation.customData;var isPrint=currentAnnotation.isPrint;// eslint-disable-next-line
var allowedInteractions=currentAnnotation.AllowedInteractions?currentAnnotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(currentAnnotation);// eslint-disable-next-line
var annotationSettings=currentAnnotation.AnnotationSettings?currentAnnotation.AnnotationSettings:this.pdfViewer.inkAnnotationSettings?this.pdfViewer.inkAnnotationSettings:this.pdfViewer.annotationSettings;if(currentAnnotation.IsLocked){annotationSettings.isLock=currentAnnotation.IsLocked;}// eslint-disable-next-line
var data=currentAnnotation.PathData;if(isImport){data=sf.drawings.getPathString(JSON.parse(currentAnnotation.PathData));}annot={// eslint-disable-next-line max-len
id:'ink'+this.pdfViewerBase.signatureCount,bounds:{x:currentLeft,y:currentTop,width:currentWidth,height:currentHeight},pageIndex:pageIndex,data:data,// eslint-disable-next-line max-len
shapeAnnotationType:'Ink',opacity:currentAnnotation.Opacity,strokeColor:currentAnnotation.StrokeColor,thickness:currentAnnotation.Thickness,annotationId:currentAnnotation.AnnotName,// eslint-disable-next-line max-len
customData:customData,comments:this.pdfViewer.annotationModule.getAnnotationComments(currentAnnotation.Comments,currentAnnotation,currentAnnotation.Author),author:currentAnnotation.Author,allowedInteractions:allowedInteractions,subject:currentAnnotation.Subject,modifiedDate:currentAnnotation.ModifiedDate,review:{state:'',stateModel:'',modifiedDate:currentAnnotation.ModifiedDate,author:currentAnnotation.Author},notes:currentAnnotation.Note,isPrint:isPrint,isCommentLock:currentAnnotation.IsCommentLock,annotationSettings:annotationSettings,isLocked:annotationSettings.isLock};return annot;}};/**
     * This method used to add annotations with using program.
     *
     * @param annotationObject - It describes type of annotation object
     * @param offset - It describes about the annotation bounds or location
     * @param pageNumber - It describes about the annotation page number
     * @returns Object
     * @private
     */InkAnnotation.prototype.updateAddAnnotationDetails=function(annotationObject,offset,pageNumber){//Creating new object if annotationObject is null
if(!annotationObject){annotationObject={offset:{x:10,y:10},pageNumber:0,width:undefined,height:undefined};offset=annotationObject.offset;}else if(!annotationObject.offset)offset={x:10,y:10};else offset=annotationObject.offset;//Creating the CurrentDate and Annotation name
var currentDateString=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();//Creating annotation settings
var annotationSelectorSettings=this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings?this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;var annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.inkAnnotationSettings);var allowedInteractions=this.pdfViewer.inkAnnotationSettings.allowedInteractions?this.pdfViewer.inkAnnotationSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;annotationSettings.isLock=annotationObject.isLock?annotationObject.isLock:false;annotationObject.width=annotationObject.width?annotationObject.width:150;annotationObject.height=annotationObject.height?annotationObject.height:60;var pathData=annotationObject.path?annotationObject.path:'';annotationObject.path=sf.drawings.getPathString(JSON.parse(pathData));//Creating Annotation objects with it's proper properties
var signatureInkAnnotation=[];var ink={AllowedInteractions:annotationObject.allowedInteractions?annotationObject.allowedInteractions:allowedInteractions,AnnotName:annotationName,AnnotType:'ink',AnnotationFlags:null,AnnotationSelectorSettings:annotationObject.annotationSelectorSettings?annotationObject.annotationSelectorSettings:annotationSelectorSettings,AnnotationSettings:annotationSettings,AnnotationType:'Ink',Author:annotationObject.author?annotationObject.author:'Guest',Bounds:{X:offset.x,Y:offset.y,Width:annotationObject.width,Height:annotationObject.height,Left:offset.x,Top:offset.y,Location:{X:offset.x,Y:offset.y},Size:{Height:annotationObject.height,IsEmpty:false,Width:annotationObject.width}},Comments:null,CreatedDate:currentDateString,CustomData:annotationObject.customData?annotationObject.customData:null,ExistingCustomData:null,IsCommentLock:false,IsLock:annotationObject.isLock?annotationObject.isLock:false,IsPrint:annotationObject.isPrint?annotationObject.isPrint:true,ModifiedDate:currentDateString,Note:'',Opacity:annotationObject.opacity?annotationObject.opacity:1,PathData:annotationObject.path,PageNumber:pageNumber,State:'',StateModel:'',StrokeColor:annotationObject.strokeColor?annotationObject.strokeColor:'rgba(255,0,0,1)',SubType:null,Subject:'Ink',Type:null,Thickness:annotationObject.thickness?annotationObject.thickness:1};//Adding the annotation object to an array and return it
signatureInkAnnotation[0]=ink;return{signatureInkAnnotation:signatureInkAnnotation};};return InkAnnotation;}();/**
 * export types
 */ /* eslint-disable */ /**
 * Magnification module
 */var Magnification=/** @class */function(){/**
     * @param pdfViewer
     * @param viewerBase
     * @private
     */function Magnification(pdfViewer,viewerBase){/**
         * @private
         */this.zoomFactor=1;/**
         * @private
         */this.previousZoomFactor=1;this.scrollWidth=25;this.zoomPercentages=[10,25,50,75,100,125,150,200,400];this.isNotPredefinedZoom=false;this.pinchStep=0;this.reRenderPageNumber=0;// eslint-disable-next-line
this.magnifyPageRerenderTimer=null;// eslint-disable-next-line
this.rerenderOnScrollTimer=null;// eslint-disable-next-line
this.rerenderInterval=null;this.touchCenterX=0;this.touchCenterY=0;this.mouseCenterX=0;this.mouseCenterY=0;this.pageRerenderCount=0;this.imageObjects=[];this.topValue=0;this.isTapToFitZoom=false;/**
         * @private
         */this.fitType=null;/**
         * @private
         */this.isPinchZoomed=false;/**
         * @private
         */this.isPagePinchZoomed=false;/**
         * @private
         */this.isRerenderCanvasCreated=false;/**
         * @private
         */this.isMagnified=false;/**
         * @private
         */this.isPagesZoomed=false;/**
         * @private
         */this.isPinchScrolled=false;/**
         * @private
         */this.isAutoZoom=false;/**
         * @private
         */this.isDoubleTapZoom=false;/**
         * @private
         */this.isFormFieldPageZoomed=false;this.isWebkitMobile=false;this.isFitToPageMode=true;this.pdfViewer=pdfViewer;this.pdfViewerBase=viewerBase;this.zoomLevel=2;// eslint-disable-next-line max-len
this.isWebkitMobile=/Chrome/.test(navigator.userAgent)||/Google Inc/.test(navigator.vendor)||navigator.userAgent.indexOf('Safari')!==-1;}/**
     * Zoom the PDF document to the given zoom value
     *
     * @param  {number} zoomValue - Specifies the Zoom Value for magnify the PDF document
     * @returns void
     */Magnification.prototype.zoomTo=function(zoomValue){var MaximumZoomPercentage=400;var MinmumZoomPercentage=10;if(zoomValue<MinmumZoomPercentage){zoomValue=MinmumZoomPercentage;}else if(zoomValue>MaximumZoomPercentage){zoomValue=MaximumZoomPercentage;}this.fitType=null;this.isNotPredefinedZoom=false;if(this.isAutoZoom&&this.isInitialLoading){this.pdfViewerBase.onWindowResize();}else{this.isAutoZoom=false;this.onZoomChanged(zoomValue);}this.isInitialLoading=false;};/**
     * Magnifies the page to the next value in the zoom drop down list.
     *
     * @returns void
     */Magnification.prototype.zoomIn=function(){if(this.fitType||this.isNotPredefinedZoom){this.zoomLevel=this.lowerZoomLevel;this.fitType=null;}this.isNotPredefinedZoom=false;if(this.zoomLevel>=8){this.zoomLevel=8;}else{this.zoomLevel++;}this.isAutoZoom=false;this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);};/**
     * Magnifies the page to the previous value in the zoom drop down list.
     *
     * @returns void
     */Magnification.prototype.zoomOut=function(){if(this.fitType||this.isNotPredefinedZoom){this.zoomLevel=this.higherZoomLevel;this.fitType=null;}this.isNotPredefinedZoom=false;if(this.zoomLevel<=0){this.zoomLevel=0;}else{this.zoomLevel--;}this.isAutoZoom=false;this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);};/**
     * Scales the page to fit the page width to the width of the container in the control.
     *
     * @returns void
     */Magnification.prototype.fitToWidth=function(){this.isAutoZoom=false;var zoomValue=this.calculateFitZoomFactor('fitToWidth');this.onZoomChanged(zoomValue);};/**
     * @private
     */Magnification.prototype.fitToAuto=function(){this.isAutoZoom=true;var zoomValue=this.calculateFitZoomFactor('fitToWidth');this.onZoomChanged(zoomValue);};/**
     * Scales the page to fit the page in the container in the control.
     *
     * @param  {number} zoomValue - Defines the Zoom Value for fit the page in the Container
     * @returns void
     */Magnification.prototype.fitToPage=function(){var zoomValue=this.calculateFitZoomFactor('fitToPage');if(zoomValue!==null){this.isAutoZoom=false;this.onZoomChanged(zoomValue);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){if(this.isWebkitMobile){this.pdfViewerBase.viewerContainer.style.overflowY='auto';}else{this.pdfViewerBase.viewerContainer.style.overflowY='hidden';}}else{this.pdfViewerBase.viewerContainer.style.overflowY='auto';}if(this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1]){// eslint-disable-next-line max-len
this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top*this.zoomFactor;}}};/**
     * Returns zoom factor for the fit zooms.
     *
     * @param type
     */Magnification.prototype.calculateFitZoomFactor=function(type){var viewerWidth=this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;var viewerHeight=this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;if(viewerWidth===0&&viewerHeight===0){viewerWidth=parseFloat(this.pdfViewer.width.toString());viewerHeight=parseFloat(this.pdfViewer.height.toString());}if(isNaN(viewerHeight)||isNaN(viewerWidth)){return null;}this.fitType=type;if(this.fitType==='fitToWidth'){var scaleX=(viewerWidth-this.scrollWidth)/this.pdfViewerBase.highestWidth;if(this.isAutoZoom){this.fitType=null;scaleX=Math.min(1,scaleX);if(scaleX===1){this.zoomLevel=2;}}// eslint-disable-next-line radix
return parseInt((scaleX*100).toString());}else{this.isFitToPageMode=true;var pageLeft=10;var scaleX=(viewerWidth-this.scrollWidth-pageLeft)/this.pdfViewerBase.highestWidth;var scaleY=viewerHeight/this.pdfViewerBase.highestHeight;if(scaleY>scaleX){scaleY=scaleX;this.isFitToPageMode=false;}// eslint-disable-next-line radix
return parseInt((scaleY*100).toString());}};/**
     * Initiating cursor based zoom.
     * @private
     */Magnification.prototype.initiateMouseZoom=function(pointX,pointY,zoomValue){var pointInViewer=this.positionInViewer(pointX,pointY);this.mouseCenterX=pointInViewer.x;this.mouseCenterY=pointInViewer.y;this.zoomTo(zoomValue);};/**
     * Performs pinch in operation
     */Magnification.prototype.pinchIn=function(){this.fitType=null;var temporaryZoomFactor=this.zoomFactor-this.pinchStep;if(temporaryZoomFactor<4&&temporaryZoomFactor>2){temporaryZoomFactor=this.zoomFactor-this.pinchStep;}if(temporaryZoomFactor<=1.5){temporaryZoomFactor=this.zoomFactor-this.pinchStep/1.5;}if(temporaryZoomFactor<0.25){temporaryZoomFactor=0.25;}this.isPinchZoomed=true;this.onZoomChanged(temporaryZoomFactor*100);this.isTapToFitZoom=true;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.zoomFactor*100===50){var zoomValue=this.calculateFitZoomFactor('fitToWidth');this.fitType=null;if(zoomValue<=50){this.fitToWidth();}}};/**
     * Performs pinch out operation
     */Magnification.prototype.pinchOut=function(){this.fitType=null;var temporaryZoomFactor=this.zoomFactor+this.pinchStep;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){if(temporaryZoomFactor>4){temporaryZoomFactor=4;}}else{if(temporaryZoomFactor>2){temporaryZoomFactor=temporaryZoomFactor+this.pinchStep;}if(temporaryZoomFactor>4){temporaryZoomFactor=4;}}this.isTapToFitZoom=true;this.isPinchZoomed=true;this.onZoomChanged(temporaryZoomFactor*100);};/**
     * returns zoom level for the zoom factor.
     *
     * @param zoomFactor
     */Magnification.prototype.getZoomLevel=function(zoomFactor){var min=0;var max=this.zoomPercentages.length-1;while(min<=max&&!(min===0&&max===0)){var mid=Math.round((min+max)/2);if(this.zoomPercentages[mid]<=zoomFactor){min=mid+1;}else if(this.zoomPercentages[mid]>=zoomFactor){max=mid-1;}}this.higherZoomLevel=min;this.lowerZoomLevel=max;return max;};/**
     * @private
     */Magnification.prototype.checkZoomFactor=function(){return this.zoomPercentages.indexOf(this.zoomFactor*100)>-1;};/**
     * Executes when the zoom or pinch operation is performed
     *
     * @param zoomValue
     */Magnification.prototype.onZoomChanged=function(zoomValue){if(zoomValue){if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.closePopupMenu();}this.previousZoomFactor=this.zoomFactor;this.zoomLevel=this.getZoomLevel(zoomValue);this.zoomFactor=this.getZoomFactor(zoomValue);if(this.zoomFactor<=0.25){this.pdfViewerBase.isMinimumZoom=true;}else{this.pdfViewerBase.isMinimumZoom=false;}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){if(this.isWebkitMobile){this.pdfViewerBase.viewerContainer.style.overflowY='auto';}else{this.pdfViewerBase.viewerContainer.style.overflowY='hidden';}}else{this.pdfViewerBase.viewerContainer.style.overflowY='auto';}if(this.pdfViewerBase.pageCount>0){if(this.previousZoomFactor!==this.zoomFactor){if(!this.isPinchZoomed){this.magnifyPages();}else{if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){// eslint-disable-next-line max-len
this.pdfViewerBase.mobilePageNoContainer.style.left=this.pdfViewer.element.clientWidth/2-parseFloat(this.pdfViewerBase.mobilePageNoContainer.style.width)/2+'px';}this.responsivePages();}}if(!sf.base.isBlazor()){if(this.pdfViewer.toolbarModule){this.pdfViewer.toolbarModule.updateZoomButtons();}}if(!this.isInitialLoading){if(this.previousZoomFactor!==this.zoomFactor){// eslint-disable-next-line
this.pdfViewer.zoomValue=parseInt((this.zoomFactor*100).toString());this.pdfViewer.updatePdfViewerOptions("ZoomValue",this.pdfViewer.zoomValue);this.pdfViewer.fireZoomChange();}}}if(this.pdfViewer.toolbarModule){this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor);}if(!this.isInitialLoading){if(this.previousZoomFactor!==this.zoomFactor){this.pdfViewer.zoomValue=parseInt((this.zoomFactor*100).toString());this.pdfViewer.updatePdfViewerOptions("ZoomValue",this.pdfViewer.zoomValue);this.pdfViewer.fireZoomChange();}}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.isPinchZoomed){// eslint-disable-next-line radix
var zoomPercentage=parseInt((this.zoomFactor*100).toString())+'%';this.pdfViewerBase.navigationPane.createTooltipMobile(zoomPercentage);}}};/**
     * @param clientX
     * @param clientY
     * @private
     */Magnification.prototype.setTouchPoints=function(clientX,clientY){var pointInViewer=this.positionInViewer(clientX,clientY);this.touchCenterX=pointInViewer.x;this.touchCenterY=pointInViewer.y;};/**
     * @param pointX1
     * @param pointY1
     * @param pointX2
     * @param pointY2
     * @param pointX1
     * @param pointY1
     * @param pointX2
     * @param pointY2
     * @param pointX1
     * @param pointY1
     * @param pointX2
     * @param pointY2
     * @param pointX1
     * @param pointY1
     * @param pointX2
     * @param pointY2
     * @private
     */Magnification.prototype.initiatePinchMove=function(pointX1,pointY1,pointX2,pointY2){this.isPinchScrolled=false;this.isMagnified=false;this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber;var pointInViewer=this.positionInViewer((pointX1+pointX2)/2,(pointY1+pointY2)/2);this.touchCenterX=pointInViewer.x;this.touchCenterY=pointInViewer.y;this.zoomOverPages(pointX1,pointY1,pointX2,pointY2);};Magnification.prototype.magnifyPages=function(){this.clearRerenderTimer();if(!this.isPagesZoomed){this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber;}if(!this.pdfViewerBase.documentLoaded&&!this.pdfViewerBase.isInitialPageMode){this.isPagesZoomed=true;}var scrollValue=this.pdfViewerBase.viewerContainer.scrollTop;if(this.pdfViewer.textSelectionModule){this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(false,true);}if(this.pdfViewer.formDesignerModule&&!this.pdfViewerBase.documentLoaded&&!this.pdfViewerBase.isDocumentLoaded){this.isFormFieldPageZoomed=true;}if(!this.isInitialLoading){this.isMagnified=true;}this.updatePageLocation();this.resizeCanvas(this.reRenderPageNumber);this.calculateScrollValuesOnMouse(scrollValue);if(this.pdfViewer.textSelectionModule){this.pdfViewer.textSelectionModule.resizeTouchElements();}// eslint-disable-next-line
var annotModule=this.pdfViewer.annotationModule;if(annotModule&&annotModule.textMarkupAnnotationModule){this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateCurrentResizerPosition();}if(this.pdfViewerBase.pageSize.length>0){// eslint-disable-next-line max-len
this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length-1)+'px';// eslint-disable-next-line
var proxy_1=this;this.pdfViewerBase.renderedPagesList=[];this.pdfViewerBase.pinchZoomStorage=[];if(!this.pdfViewerBase.documentLoaded){this.magnifyPageRerenderTimer=setTimeout(function(){proxy_1.rerenderMagnifiedPages();},800);}}};Magnification.prototype.updatePageLocation=function(){this.topValue=0;for(var i=1;i<this.pdfViewerBase.pageSize.length;i++){this.topValue+=(this.pdfViewerBase.pageSize[i].height+this.pdfViewerBase.pageGap)*this.zoomFactor;}};Magnification.prototype.clearRerenderTimer=function(){clearTimeout(this.rerenderOnScrollTimer);clearTimeout(this.magnifyPageRerenderTimer);this.clearIntervalTimer();this.isPinchScrolled=false;};/**
     * @private
     */Magnification.prototype.clearIntervalTimer=function(){clearInterval(this.rerenderInterval);this.rerenderInterval=null;this.clearRendering();var oldCanvases=document.querySelectorAll('canvas[id*="'+this.pdfViewer.dataId+'_oldCanvas_"]');for(var i=0;i<oldCanvases.length;i++){// eslint-disable-next-line
var pageNumber=parseInt(oldCanvases[i].id.split('_oldCanvas_')[1]);var pageCanvas=this.pdfViewerBase.getElement('_pageCanvas_'+pageNumber);if(pageCanvas){oldCanvases[i].id=pageCanvas.id;pageCanvas.parentElement.removeChild(pageCanvas);}else{oldCanvases[i].id=this.pdfViewer.dataId+'_pageCanvas_'+pageNumber;}if(this.pdfViewerBase.isTextMarkupAnnotationModule()){this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(i);}}this.isRerenderCanvasCreated=false;};/**
     * @param image
     * @private
     */Magnification.prototype.pushImageObjects=function(image){this.imageObjects.push(image);};Magnification.prototype.clearRendering=function(){if(this.imageObjects){for(var j=0;j<this.imageObjects.length;j++){if(this.imageObjects[j]){this.imageObjects[j].onload=null;}}this.imageObjects=[];}};Magnification.prototype.rerenderMagnifiedPages=function(){if((this.pdfViewerBase.isInitialLoaded||this.pdfViewerBase.isDocumentLoaded)&&!this.pdfViewerBase.isInitialPageMode){this.renderInSeparateThread(this.reRenderPageNumber);this.isPagesZoomed=false;}else if(this.pdfViewerBase.isInitialPageMode){this.pageRerenderCount=0;this.pdfViewerBase.renderedPagesList=[];this.pdfViewerBase.pinchZoomStorage=[];this.isMagnified=false;this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);this.pdfViewerBase.isInitialPageMode=false;}};Magnification.prototype.renderInSeparateThread=function(pageNumber){var _this=this;this.designNewCanvas(pageNumber);this.pageRerenderCount=0;this.pdfViewerBase.renderedPagesList=[];this.pdfViewerBase.pinchZoomStorage=[];this.isMagnified=false;this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);// eslint-disable-next-line
var proxy=this;this.rerenderInterval=setInterval(function(){_this.initiateRerender(proxy);},1);};Magnification.prototype.responsivePages=function(){this.isPagesZoomed=true;this.clearRerenderTimer();if(this.pdfViewer.textSelectionModule){this.pdfViewer.textSelectionModule.clearTextSelection();}if(this.pdfViewer.textSearchModule){this.pdfViewer.textSearchModule.clearAllOccurrences();}var scrollValue=this.pdfViewerBase.viewerContainer.scrollTop;this.isAutoZoom=false;this.updatePageLocation();// eslint-disable-next-line max-len
this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length-1].height*this.zoomFactor+'px';this.resizeCanvas(this.pdfViewerBase.currentPageNumber);if(this.pdfViewerBase.textLayer&&this.pdfViewer.formDesignerModule){this.pdfViewerBase.textLayer.clearTextLayers(true);}if(this.isPinchZoomed){this.calculateScrollValues(scrollValue);}this.pdfViewerBase.renderedPagesList=[];this.pdfViewerBase.pinchZoomStorage=[];if(this.pdfViewer.formFieldsModule&&!this.pdfViewer.formDesignerModule){var proxy_2=this;if(!this.pdfViewerBase.documentLoaded){this.magnifyPageRerenderTimer=setTimeout(function(){proxy_2.rerenderMagnifiedPages();},800);}}};Magnification.prototype.calculateScrollValues=function(scrollValue){var pageIndex=this.pdfViewerBase.currentPageNumber-1;var currentPageCanvas=this.pdfViewerBase.getElement('_pageDiv_'+pageIndex);if(currentPageCanvas){var pointInViewer=void 0;var currentPageBounds=currentPageCanvas.getBoundingClientRect();if(this.pdfViewer.enableRtl&&!this.isDoubleTapZoom){pointInViewer=this.positionInViewer(currentPageBounds.right,currentPageBounds.top);}else{pointInViewer=this.positionInViewer(currentPageBounds.left,currentPageBounds.top);}var currentPageBoundsLeft=pointInViewer.x;var currentPageBoundsTop=pointInViewer.y;// update scroll top for the viewer container based on pinch zoom factor
var previousPageTop=currentPageBoundsTop*this.previousZoomFactor;var canvasPreviousY=scrollValue+this.touchCenterY;// eslint-disable-next-line max-len
var canvasCurrentY=currentPageBoundsTop*this.zoomFactor+(canvasPreviousY-previousPageTop<0?canvasPreviousY-previousPageTop:(canvasPreviousY-// eslint-disable-next-line max-len
previousPageTop)*(this.zoomFactor/this.previousZoomFactor));var pageGapValue=this.zoomFactor-this.previousZoomFactor>0?-this.pdfViewerBase.pageGap*(this.zoomFactor/this.previousZoomFactor):this.pdfViewerBase.pageGap*(this.previousZoomFactor/this.zoomFactor);this.pdfViewerBase.viewerContainer.scrollTop=canvasCurrentY-this.touchCenterY+pageGapValue/this.pdfViewerBase.zoomInterval;// update scroll left for the viewer container based on pinch zoom factor
var previousWidthFactor=currentPageBounds.width*this.previousZoomFactor/currentPageBounds.width;var scaleCorrectionFactor=this.zoomFactor/previousWidthFactor-1;var scrollX_1=this.touchCenterX-currentPageBoundsLeft;this.pdfViewerBase.viewerContainer.scrollLeft+=scrollX_1*scaleCorrectionFactor;}};Magnification.prototype.calculateScrollValuesOnMouse=function(scrollValue){var pageIndex=this.pdfViewerBase.currentPageNumber-1;var currentPageCanvas=this.pdfViewerBase.getElement('_pageDiv_'+pageIndex);if(currentPageCanvas){var pointInViewer=void 0;var currentPageBounds=currentPageCanvas.getBoundingClientRect();if(this.pdfViewer.enableRtl){pointInViewer=this.positionInViewer(currentPageBounds.right,currentPageBounds.top);}else{pointInViewer=this.positionInViewer(currentPageBounds.left,currentPageBounds.top);}var currentPageBoundsLeft=pointInViewer.x;var currentPageBoundsTop=pointInViewer.y;// update scroll top for the viewer container based on mouse zoom factor
var previousPageTop=currentPageBoundsTop*this.previousZoomFactor;var canvasPreviousY=scrollValue+this.mouseCenterY;// eslint-disable-next-line max-len
var canvasCurrentY=currentPageBoundsTop*this.zoomFactor+(canvasPreviousY-previousPageTop<0?canvasPreviousY-previousPageTop:(canvasPreviousY-// eslint-disable-next-line max-len
previousPageTop)*(this.zoomFactor/this.previousZoomFactor));// eslint-disable-next-line max-len
var pageGapValue=this.zoomFactor-this.previousZoomFactor>0?-this.pdfViewerBase.pageGap*(this.zoomFactor/this.previousZoomFactor):this.pdfViewerBase.pageGap*(this.previousZoomFactor/this.zoomFactor);if(this.pdfViewerBase.isTouchPad&&!this.pdfViewerBase.isMacSafari){pageGapValue=pageGapValue/this.pdfViewerBase.zoomInterval;}this.pdfViewerBase.viewerContainer.scrollTop=canvasCurrentY-this.mouseCenterY+pageGapValue;// update scroll left for the viewer container based on mouse zoom factor
var previousWidthFactor=currentPageBounds.width*this.previousZoomFactor/currentPageBounds.width;var scaleCorrectionFactor=this.zoomFactor/previousWidthFactor-1;var scrollX_2=this.mouseCenterX-currentPageBoundsLeft;this.pdfViewerBase.viewerContainer.scrollLeft+=scrollX_2*scaleCorrectionFactor;}};Magnification.prototype.rerenderOnScroll=function(){var _this=this;this.isPinchZoomed=false;if(this.isPinchScrolled){this.rerenderOnScrollTimer=null;this.isPinchScrolled=false;this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber;this.pdfViewerBase.renderedPagesList=[];this.pdfViewerBase.pinchZoomStorage=[];var pageDivs=document.querySelectorAll('img[id*="'+this.pdfViewer.dataId+'_pageCanvas_"]');var viewPortWidth=816;for(var i=0;i<pageDivs.length;i++){// eslint-disable-next-line radix
var pageNumber=parseInt(pageDivs[i].id.split('_pageCanvas_')[1]);var pageWidth=this.pdfViewerBase.pageSize[pageNumber].width;if(viewPortWidth<pageWidth&&this.pdfViewer.tileRenderingSettings.enableTileRendering){if(this.pdfViewer.restrictZoomRequest){pageDivs[i].style.width=pageWidth*this.pdfViewerBase.getZoomFactor()+'px';// eslint-disable-next-line max-len
pageDivs[i].style.height=this.pdfViewerBase.pageSize[pageNumber].height*this.pdfViewerBase.getZoomFactor()+'px';}else{pageDivs[i].style.width=pageWidth*this.pdfViewerBase.getZoomFactor()+'px';// eslint-disable-next-line max-len
pageDivs[i].style.height=this.pdfViewerBase.pageSize[pageNumber].height*this.pdfViewerBase.getZoomFactor()+'px';}}}if(this.pdfViewerBase.textLayer){var textLayers=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_textLayer_"]');for(var i=0;i<textLayers.length;i++){textLayers[i].style.display='block';}}if(this.pdfViewerBase.isTextMarkupAnnotationModule()){// eslint-disable-next-line max-len
var annotationLayers=document.querySelectorAll('canvas[id*="'+this.pdfViewer.dataId+'_annotationCanvas_"]');for(var j=0;j<annotationLayers.length;j++){var pageNumber=annotationLayers[j].id.split('_annotationCanvas_')[1];// eslint-disable-next-line radix
this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(parseInt(pageNumber));}}this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);this.isPagePinchZoomed=false;this.rerenderOnScrollTimer=setTimeout(function(){_this.pdfViewerBase.pageViewScrollChanged(_this.reRenderPageNumber);},300);}};/**
     * @private
     */Magnification.prototype.pinchMoveScroll=function(){var _this=this;if(this.isRerenderCanvasCreated){this.clearIntervalTimer();}if(this.isPagesZoomed||!this.isRerenderCanvasCreated&&this.isPagePinchZoomed){this.clearRendering();this.isPagesZoomed=false;clearTimeout(this.magnifyPageRerenderTimer);this.isPinchScrolled=true;this.isFormFieldPageZoomed=true;this.rerenderOnScrollTimer=setTimeout(function(){_this.rerenderOnScroll();},100);}};// eslint-disable-next-line
Magnification.prototype.initiateRerender=function(proxy){var isReRender=false;if(this.previousZoomFactor<0.4||this.pdfViewerBase.isMinimumZoom){isReRender=true;}// eslint-disable-next-line max-len
if((proxy.pageRerenderCount===proxy.pdfViewerBase.reRenderedCount||isReRender)&&proxy.pageRerenderCount!==0&&proxy.pdfViewerBase.reRenderedCount!==0){proxy.reRenderAfterPinch(this.reRenderPageNumber);proxy.isFormFieldPageZoomed=false;}};Magnification.prototype.reRenderAfterPinch=function(currentPageIndex){this.pageRerenderCount=0;var lowerPageValue=currentPageIndex-3;var higherPageValue=currentPageIndex+1;if(this.pdfViewerBase.isMinimumZoom){lowerPageValue=currentPageIndex-4;higherPageValue=currentPageIndex+4;}lowerPageValue=lowerPageValue>0?lowerPageValue:0;higherPageValue=higherPageValue<this.pdfViewerBase.pageCount?higherPageValue:this.pdfViewerBase.pageCount-1;for(var i=lowerPageValue;i<=higherPageValue;i++){var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+i);var pageCanvas=this.pdfViewerBase.getElement('_pageCanvas_'+i);var oldCanvas=this.pdfViewerBase.getElement('_oldCanvas_'+i);if(oldCanvas){oldCanvas.parentNode.removeChild(oldCanvas);}if(this.pdfViewerBase.isTextMarkupAnnotationModule()){this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(i);}else if(this.pdfViewer.formDesignerModule){this.rerenderAnnotations(i);this.pdfViewer.renderDrawing(undefined,currentPageIndex);}if(pageDiv){pageDiv.style.visibility='visible';}}this.isRerenderCanvasCreated=false;this.isPagePinchZoomed=false;if(this.pdfViewerBase.reRenderedCount!==0){this.pdfViewerBase.reRenderedCount=0;this.pageRerenderCount=0;clearInterval(this.rerenderInterval);this.rerenderInterval=null;}this.imageObjects=[];};/**
     * @param pageNumber
     * @private
     */Magnification.prototype.rerenderAnnotations=function(pageNumber){// eslint-disable-next-line
var oldCanvasCollection=document.querySelectorAll('#'+this.pdfViewer.dataId+'_old_annotationCanvas_'+pageNumber);for(var i=0;i<oldCanvasCollection.length;i++){if(oldCanvasCollection[i]){oldCanvasCollection[i].parentElement.removeChild(oldCanvasCollection[i]);}}var newCanvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(newCanvas){newCanvas.style.display='block';}};Magnification.prototype.designNewCanvas=function(currentPageIndex){if(this.pdfViewerBase.textLayer){this.pdfViewerBase.textLayer.clearTextLayers();}var lowerPageValue=currentPageIndex-3;var higherPageValue=currentPageIndex+1;// jshint ignore:line
if(this.pdfViewerBase.isMinimumZoom){lowerPageValue=currentPageIndex-4;higherPageValue=currentPageIndex+4;}lowerPageValue=lowerPageValue>0?lowerPageValue:0;higherPageValue=higherPageValue<this.pdfViewerBase.pageCount?higherPageValue:this.pdfViewerBase.pageCount-1;for(var i=lowerPageValue;i<=higherPageValue;i++){var canvas=this.pdfViewerBase.getElement('_pageCanvas_'+i);var width=this.pdfViewerBase.pageSize[i].width*this.zoomFactor;var height=this.pdfViewerBase.pageSize[i].height*this.zoomFactor;if(canvas&&!this.pdfViewer.restrictZoomRequest){// eslint-disable-next-line max-len
this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_'+i),width,height,i,'none');}else if(!this.pdfViewer.restrictZoomRequest){// eslint-disable-next-line max-len
this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_'+i),width,height,i,'none');}}this.isRerenderCanvasCreated=true;};/**
     * @private
     */Magnification.prototype.pageRerenderOnMouseWheel=function(){var _this=this;if(this.isRerenderCanvasCreated){this.clearIntervalTimer();clearTimeout(this.magnifyPageRerenderTimer);if(!this.isPinchScrolled){this.isPinchScrolled=true;this.rerenderOnScrollTimer=setTimeout(function(){_this.rerenderOnScroll();},100);}}};/**
     * @private
     */Magnification.prototype.renderCountIncrement=function(){if(this.isRerenderCanvasCreated){this.pageRerenderCount++;}};/**
     * @private
     */Magnification.prototype.rerenderCountIncrement=function(){if(this.pageRerenderCount>0){this.pdfViewerBase.reRenderedCount++;}};/**
     * @param pageNumber
     * @private
     */Magnification.prototype.resizeCanvas=function(pageNumber){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}var lowerPageValue=pageNumber-3;var higherPageValue=pageNumber+3;if(this.pdfViewerBase.isMinimumZoom){lowerPageValue=pageNumber-4;higherPageValue=pageNumber+4;}lowerPageValue=lowerPageValue>0?lowerPageValue:0;higherPageValue=higherPageValue<this.pdfViewerBase.pageCount?higherPageValue:this.pdfViewerBase.pageCount-1;for(var i=lowerPageValue;i<=higherPageValue;i++){var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+i);var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+i);if(pageDiv){if(lowerPageValue<=i&&i<=higherPageValue){var isSelectionAvailable=false;if(this.pdfViewer.textSelectionModule){isSelectionAvailable=this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(i);}if(this.pdfViewerBase.pageSize[i]!=null){var width=this.pdfViewerBase.pageSize[i].width*this.zoomFactor;var height=this.pdfViewerBase.pageSize[i].height*this.zoomFactor;pageDiv.style.width=width+'px';pageDiv.style.height=height+'px';// eslint-disable-next-line max-len
pageDiv.style.top=this.pdfViewerBase.pageSize[i].top*this.zoomFactor+'px';if(this.pdfViewer.enableRtl){pageDiv.style.right=this.pdfViewerBase.updateLeftPosition(i)+'px';}else{pageDiv.style.left=this.pdfViewerBase.updateLeftPosition(i)+'px';}var canvas=this.pdfViewerBase.getElement('_pageCanvas_'+i);if(canvas){canvas.style.width=width+'px';canvas.style.height=height+'px';if(this.pdfViewer.annotation){this.pdfViewer.annotationModule.resizeAnnotations(width,height,i);}else if(this.pdfViewer.formDesignerModule){this.pdfViewer.formDesignerModule.resizeAnnotations(width,height,i);}}var zoomFactor=this.pdfViewerBase.retrieveCurrentZoomFactor();var tileCount=this.pdfViewerBase.getTileCount(this.pdfViewerBase.pageSize[i].width);var noTileX=void 0;var noTileY=void 0;noTileX=noTileY=tileCount;var tileSettings=this.pdfViewer.tileRenderingSettings;if(tileSettings.enableTileRendering&&tileSettings.x>0&&tileSettings.y>0){if(1200<this.pdfViewerBase.pageSize[i].width||this.pdfViewerBase.getZoomFactor()>2){noTileX=tileSettings.x;noTileY=tileSettings.y;}}var tileRequestCount=noTileX*noTileY;if(tileRequestCount===1){var storedData=this.pdfViewerBase.getLinkInformation(i);if(storedData){storedData=storedData;var imageData=storedData['image'];if(imageData){canvas.src=imageData;canvas.style.display='block';var oldCanvases=document.querySelectorAll('img[id*="'+this.pdfViewer.dataId+'_tileimg_'+i+'_"]');var pageCanvas=this.pdfViewerBase.getElement('_pageDiv_'+i);for(var k=0;k<oldCanvases.length;k++){var tileImgId=oldCanvases[k].id.split('_');if(parseFloat(tileImgId[tileImgId.length-3])!=this.pdfViewerBase.getZoomFactor())pageCanvas.removeChild(oldCanvases[k]);}var oldPageDiv=document.querySelectorAll('img[id*="'+this.pdfViewer.dataId+'_oldCanvas"]');for(var j=0;j<oldPageDiv.length;j++){pageDiv.removeChild(oldPageDiv[j]);}}this.pdfViewerBase.isReRenderRequired=false;}else{this.pdfViewerBase.isReRenderRequired=true;}}else{var oldCanvases=document.querySelectorAll('img[id*="'+this.pdfViewer.dataId+'_tileimg_'+i+'_"]');for(var l=0;l<oldCanvases.length;l++){var tileImgId=oldCanvases[l].id.split('_');var tileX=parseFloat(tileImgId[tileImgId.length-2]);var tileY=parseFloat(tileImgId[tileImgId.length-1]);// eslint-disable-next-line
var tileData=JSON.parse(this.pdfViewerBase.getStoredTileImageDetails(i,tileX,tileY,zoomFactor));if(tileData&&tileData.zoomFactor){zoomFactor=tileData.zoomFactor;}if(parseFloat(tileImgId[tileImgId.length-4])===i){canvas.style.display='none';var node=oldCanvases[l];// Make sure it's really an Element
if(node.nodeType==Node.ELEMENT_NODE){var dataScaleFactor=1.5;if(!sf.base.isNullOrUndefined(tileData)){dataScaleFactor=!sf.base.isNullOrUndefined(tileData.scaleFactor)?tileData.scaleFactor:1.5;}var pageWidth=this.pdfViewerBase.pageSize[i].width;var serverImageWidth=pageWidth*zoomFactor*dataScaleFactor;var serverImageHeight=this.pdfViewerBase.pageSize[i].height*zoomFactor*dataScaleFactor;var tilewidth=serverImageWidth/noTileX;var tileHeight=serverImageHeight/noTileY;var originalWidth=tilewidth;var originalLeft=parseFloat(tileImgId[tileImgId.length-2])*tilewidth;var originalTop=parseFloat(tileImgId[tileImgId.length-1])*tileHeight;node.width=originalWidth*this.pdfViewerBase.getZoomFactor()/zoomFactor/dataScaleFactor;node.style.width=originalWidth*this.pdfViewerBase.getZoomFactor()/zoomFactor/dataScaleFactor+'px';node.style.left=originalLeft*this.pdfViewerBase.getZoomFactor()/zoomFactor/dataScaleFactor+'px';node.style.top=originalTop*this.pdfViewerBase.getZoomFactor()/zoomFactor/dataScaleFactor+'px';node.id=this.pdfViewer.dataId+'_tileimg_'+i+'_'+this.pdfViewerBase.getZoomFactor()+'_'+tileX+'_'+tileY;if(tileData){var imageData=tileData['image'];if(imageData){node.src=imageData;}this.pdfViewerBase.isReRenderRequired=false;}else{this.pdfViewerBase.isReRenderRequired=true;}}}}if(oldCanvases.length===0){this.pdfViewerBase.isReRenderRequired=true;}}var aElement=pageDiv.getElementsByTagName('a');if(aElement.length!==0){for(var index=aElement.length-1;index>=0;index--){aElement[index].parentNode.removeChild(aElement[index]);}}if(textLayer){textLayer.style.width=width+'px';textLayer.style.height=height+'px';if(this.pdfViewer.textSelectionModule){if(this.isPinchZoomed){textLayer.style.display='none';}else if(this.isMagnified){var lowerValue=pageNumber-2===0?0:pageNumber-2;// eslint-disable-next-line max-len
var higherValue=pageNumber===this.pdfViewerBase.pageCount?this.pdfViewerBase.pageCount-1:pageNumber+1;if(lowerValue<=i&&i<=higherValue&&(this.pdfViewer.textSelectionModule.isTextSelection&&isSelectionAvailable||this.pdfViewerBase.textLayer.getTextSearchStatus()||this.pdfViewerBase.isInitialPageMode)){this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(i);if(this.pdfViewer.textSelectionModule.isTextSelection&&isSelectionAvailable){this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);}}else{textLayer.style.display='none';}}else{textLayer.style.display='none';}}this.pdfViewerBase.applyElementStyles(textLayer,i);}var adornerSvg=sf.drawings.getDiagramElement(this.pdfViewer.dataId+'_textLayer_'+i);if(adornerSvg){var adonerLayer=sf.drawings.getDiagramElement(this.pdfViewer.dataId+i+'_diagramAdorner_svg');if(adonerLayer){adonerLayer.style.width=width+'px';adonerLayer.style.height=height+'px';}var diagramAdornerLayer=sf.drawings.getDiagramElement(this.pdfViewer.dataId+i+'_diagramAdornerLayer');if(diagramAdornerLayer){diagramAdornerLayer.style.width=width+'px';diagramAdornerLayer.style.height=height+'px';}adornerSvg.style.width=width+'px';adornerSvg.style.height=height+'px';this.pdfViewer.renderSelector(i,this.pdfViewer.annotationSelectorSettings);this.pdfViewerBase.applyElementStyles(diagramAdornerLayer,i);}}}}}};Magnification.prototype.zoomOverPages=function(pointX1,pointY1,pointX2,pointY2){// eslint-disable-next-line
var currentDifference=Math.sqrt(Math.pow(pointX1-pointX2,2)+Math.pow(pointY1-pointY2,2));if(this.previousTouchDifference>-1){if(currentDifference>this.previousTouchDifference){this.pinchStep=this.getPinchStep(currentDifference,this.previousTouchDifference);this.pinchOut();}else if(currentDifference<this.previousTouchDifference){this.pinchStep=this.getPinchStep(this.previousTouchDifference,currentDifference);this.pinchIn();}}this.previousTouchDifference=currentDifference;};/**
     * @private
     */Magnification.prototype.pinchMoveEnd=function(){this.touchCenterX=0;this.touchCenterY=0;this.previousTouchDifference=-1;if(this.isPinchZoomed){this.isPinchScrolled=false;this.isPagePinchZoomed=true;this.pinchMoveScroll();}};/**
     * @param event
     * @private
     */ // eslint-disable-next-line
Magnification.prototype.fitPageScrollMouseWheel=function(event){if(this.fitType==='fitToPage'){this.isMagnified=false;event.preventDefault();if(event.deltaY>0){this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1);}else{this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1);}}};/**
     * @param event
     * @private
     */Magnification.prototype.magnifyBehaviorKeyDown=function(event){var isMac=navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)?true:false;var isCommandKey=isMac?event.metaKey:false;switch(event.keyCode){case 38:// up arrow
case 37:// left arrow
case 33:// page up
if(this.fitType==='fitToPage'&&!((event.ctrlKey||isCommandKey)&&event.shiftKey)){event.preventDefault();this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1);}break;case 40:// down arrow
case 39:// right arrow
case 34:// page down
if(this.fitType==='fitToPage'&&!((event.ctrlKey||isCommandKey)&&event.shiftKey)){event.preventDefault();this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1);}break;case 187:// equal key
if(event.ctrlKey||isCommandKey){event.preventDefault();this.zoomIn();}break;case 189:// minus key
if(event.ctrlKey||isCommandKey){event.preventDefault();this.zoomOut();}break;case 48:// zero key
if((event.ctrlKey||isCommandKey)&&!event.shiftKey){event.preventDefault();this.fitToPage();}break;case 49:// one key
if((event.ctrlKey||isCommandKey)&&!event.shiftKey){event.preventDefault();this.zoomTo(100);}break;default:break;}};Magnification.prototype.upwardScrollFitPage=function(currentPageIndex){if(currentPageIndex>0){this.pdfViewerBase.getElement('_pageDiv_'+(currentPageIndex-1)).style.visibility='visible';this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[currentPageIndex-1].top*this.zoomFactor;if(this.isFitToPageMode){this.pdfViewerBase.getElement('_pageDiv_'+currentPageIndex).style.visibility='hidden';}}};/**
     * @param currentPageIndex
     * @private
     */Magnification.prototype.updatePagesForFitPage=function(currentPageIndex){if(this.fitType==='fitToPage'){if(this.isFitToPageMode){if(currentPageIndex>0&&this.pdfViewerBase.getElement('_pageDiv_'+(currentPageIndex-1))){this.pdfViewerBase.getElement('_pageDiv_'+(currentPageIndex-1)).style.visibility='hidden';}// eslint-disable-next-line max-len
if(currentPageIndex<this.pdfViewerBase.pageCount-1&&this.pdfViewerBase.getElement('_pageDiv_'+(currentPageIndex+1))){this.pdfViewerBase.getElement('_pageDiv_'+(currentPageIndex+1)).style.visibility='hidden';}}}};/**
     * @private
     */Magnification.prototype.onDoubleTapMagnification=function(){if(this.pdfViewer.toolbarModule&&sf.base.isBlazor()){this.pdfViewer.toolbarModule.showToolbar(true);}var scrollValue=this.pdfViewerBase.viewerContainer.scrollTop;if(!this.pdfViewer.selectedItems.annotations[0]){this.isDoubleTapZoom=true;if(!this.isTapToFitZoom){if(this.zoomFactor<2){this.zoomTo(200);}else{this.fitToWidth();}}else{this.fitToWidth();}this.calculateScrollValues(scrollValue);this.isTapToFitZoom=!this.isTapToFitZoom;this.isDoubleTapZoom=false;}else{if(sf.base.isBlazor()){// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0]&&this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='FreeText'){var elmtPosition={};elmtPosition.x=this.pdfViewer.selectedItems.annotations[0].bounds.x;elmtPosition.y=this.pdfViewer.selectedItems.annotations[0].bounds.y;// eslint-disable-next-line max-len
this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(elmtPosition,this.pdfViewer.selectedItems.annotations[0]);}}}};Magnification.prototype.downwardScrollFitPage=function(currentPageIndex){if(currentPageIndex!==this.pdfViewerBase.pageCount-1){this.pdfViewerBase.getElement('_pageDiv_'+(currentPageIndex+1)).style.visibility='visible';this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[currentPageIndex+1].top*this.zoomFactor;if(this.isFitToPageMode){if(currentPageIndex+1===this.pdfViewerBase.pageCount-1){this.pdfViewerBase.getElement('_pageDiv_'+currentPageIndex).style.visibility='hidden';}else{this.pdfViewerBase.getElement('_pageDiv_'+(currentPageIndex+2)).style.visibility='hidden';}}}};Magnification.prototype.getMagnifiedValue=function(value){return value/this.previousZoomFactor*this.zoomFactor;};/**
     * @private
     */Magnification.prototype.destroy=function(){this.imageObjects=undefined;};/**
     * returns zoom factor when the zoom percent is passed.
     *
     * @param zoomValue
     */Magnification.prototype.getZoomFactor=function(zoomValue){return zoomValue/100;};/**
     * @private
     */Magnification.prototype.getModuleName=function(){return'Magnification';};/**
    * Returns the pinch step value.
    * @param higherValue
    * @param lowerValue
    */Magnification.prototype.getPinchStep=function(higherValue,lowerValue){var defaultPinchStep=0.02;// Default pinch step value.
var higherPinchStep=1;// higher pinch step value.
var pinchstep=(higherValue-lowerValue)/100;if(pinchstep<defaultPinchStep){pinchstep=defaultPinchStep;}else if(pinchstep>higherPinchStep){pinchstep=0.1;// set the pinch step as 0.1 if the pinch reaches the higher pinch step value.
}return pinchstep;};/**
    * Returns Point value respect to Main container.
    * @param pointX
    * @param pointY
    */Magnification.prototype.positionInViewer=function(pointX,pointY){var mainRect=this.pdfViewerBase.mainContainer.getBoundingClientRect();return{x:pointX-mainRect.left,y:pointY-mainRect.top};};return Magnification;}();/**
 * export types
 */ /**
 * Navigation module
 */var Navigation=/** @class */function(){/**
     * @param viewer
     * @param viewerBase
     * @param viewer
     * @param viewerBase
     * @private
     */function Navigation(viewer,viewerBase){this.pdfViewer=viewer;this.pdfViewerBase=viewerBase;}/**
     * Navigate to Next page of the PDF document
     *
     * @returns void
     */Navigation.prototype.goToNextPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber;this.pageNumber++;if(this.pageNumber<=this.pdfViewerBase.pageCount){this.pdfViewerBase.updateScrollTop(this.pageNumber-1);}};/**
     * Navigate to Previous page of the PDF document
     *
     * @returns void
     */Navigation.prototype.goToPreviousPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber;this.pageNumber--;if(this.pageNumber>0){this.pdfViewerBase.updateScrollTop(this.pageNumber-1);}};/**
     * Navigate to given Page number
     * Note : In case if we have provided incorrect page number as argument it will retain the existing page
     *
     * @param  {number} pageNumber - Defines the page number to navigate
     * @returns void
     */Navigation.prototype.goToPage=function(pageNumber){if(pageNumber>0&&pageNumber<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==pageNumber){this.pdfViewerBase.updateScrollTop(pageNumber-1);}this.pdfViewer.magnificationModule.resizeCanvas(pageNumber);var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(pageNumber-1));if(textLayer){textLayer.style.display='block';}};/**
     * Navigate to First page of the PDF document
     *
     * @returns void
     */Navigation.prototype.goToFirstPage=function(){this.pageNumber=0;this.pdfViewerBase.updateScrollTop(this.pageNumber);};/**
     * Navigate to Last page of the PDF document
     *
     * @returns void
     */Navigation.prototype.goToLastPage=function(){this.pageNumber=this.pdfViewerBase.pageCount-1;this.pdfViewerBase.updateScrollTop(this.pageNumber);};/**
     * @private
     */Navigation.prototype.destroy=function(){this.pageNumber=0;};/**
     * @private
     */Navigation.prototype.getModuleName=function(){return'Navigation';};return Navigation;}();/**
 * export types
 */ /**
 * The `ThumbnailView` module is used to handle thumbnail view navigation of PDF viewer.
 */var ThumbnailView=/** @class */function(){/**
     * @param pdfViewer
     * @param pdfViewerBase
     * @param pdfViewer
     * @param pdfViewerBase
     * @private
     */function ThumbnailView(pdfViewer,pdfViewerBase){var _this=this;this.thumbnailLimit=30;this.thumbnailThreshold=50;this.thumbnailTopMargin=10;/**
         * @private
         */this.isThumbnailClicked=false;/**
         * @param event
         * @private
         */this.thumbnailClick=function(event){var proxy=_this;var pageNumber=proxy.getPageNumberFromID(event.srcElement.id);if(proxy.previousElement){proxy.previousElement.classList.remove('e-pv-thumbnail-selection');proxy.previousElement.classList.remove('e-pv-thumbnail-focus');proxy.previousElement.classList.add('e-pv-thumbnail-selection-ring');}if(event.srcElement.parentElement.id===proxy.pdfViewer.element.id+'_thumbnail_Selection_Ring_'+pageNumber){proxy.setSelectionStyle(event.srcElement.parentElement);proxy.previousElement=event.srcElement.parentElement;}else if(event.srcElement.id===proxy.pdfViewer.element.id+'_thumbnail_Selection_Ring_'+pageNumber){proxy.setSelectionStyle(event.srcElement);proxy.previousElement=event.srcElement;}proxy.pdfViewer.fireThumbnailClick(pageNumber+1);proxy.isThumbnailClicked=true;proxy.goToThumbnailPage(pageNumber+1);proxy.pdfViewerBase.focusViewerContainer();if(_this.pdfViewer.annotationModule&&_this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(_this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);_this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}};/**
         * @param event
         * @private
         */this.thumbnailMouseOver=function(event){var proxy=_this;var pageNumber=proxy.getPageNumberFromID(event.srcElement.id);if(event.srcElement.id===proxy.pdfViewer.element.id+'_thumbnail_Selection_Ring_'+pageNumber){proxy.setMouseOverStyle(event.srcElement);}else if(event.srcElement.id===proxy.pdfViewer.element.id+'_thumbnail_image_'+pageNumber){proxy.setMouseOverStyle(event.srcElement.parentElement);}};/**
         * @param event
         * @private
         */this.thumbnailMouseLeave=function(event){var proxy=_this;var pageNumber=proxy.getPageNumberFromID(event.srcElement.id);if(event.srcElement.parentElement.id===proxy.pdfViewer.element.id+'_thumbnail_view'){proxy.setMouseLeaveStyle(event.srcElement.children[0].children[0]);}else if(event.srcElement.parentElement.id===proxy.pdfViewer.element.id+'_thumbnail_'+pageNumber){proxy.setMouseLeaveStyle(event.srcElement.parentElement.children[0]);}};this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @private
     */ThumbnailView.prototype.createThumbnailContainer=function(){// eslint-disable-next-line max-len
this.thumbnailView=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_thumbnail_view',className:'e-pv-thumbnail-view e-pv-thumbnail-row'});this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView);};/**
     * Open the thumbnail pane of the PdfViewer.
     *
     * @returns void
     */ThumbnailView.prototype.openThumbnailPane=function(){if(this.pdfViewerBase.navigationPane){this.pdfViewerBase.navigationPane.openThumbnailPane();}};/**
     * @private
     */ // eslint-disable-next-line
ThumbnailView.prototype.createRequestForThumbnails=function(){var proxy=this;// eslint-disable-next-line
var isIE=!!document.documentMode;if(!isIE){// eslint-disable-next-line
return new Promise(// eslint-disable-next-line
function(renderThumbnailImage,reject){proxy.requestCreation(proxy);});}else{this.requestCreation(proxy);return null;}};ThumbnailView.prototype.requestCreation=function(proxy){// Removed the condition to skip multiple request for thumbnail image.
proxy.startIndex=proxy.thumbnailLimit;// eslint-disable-next-line max-len
proxy.thumbnailLimit=proxy.startIndex+proxy.thumbnailThreshold<proxy.pdfViewer.pageCount?proxy.startIndex+proxy.thumbnailThreshold:proxy.pdfViewer.pageCount;// eslint-disable-next-line max-len
var jsonObject={startPage:proxy.startIndex,endPage:proxy.thumbnailLimit,sizeX:99.7,sizeY:141,hashId:proxy.pdfViewerBase.hashId,action:'RenderThumbnailImages',elementId:proxy.pdfViewer.element.id,uniqueId:proxy.pdfViewerBase.documentId};if(this.pdfViewerBase.jsonDocumentId){// eslint-disable-next-line
jsonObject.documentId=this.pdfViewerBase.jsonDocumentId;}for(var pageIndex=proxy.startIndex;pageIndex<proxy.thumbnailLimit;pageIndex++){this.pdfViewerBase.pdfViewerRunner.postMessage({pageIndex:pageIndex,message:'renderThumbnail'});}};ThumbnailView.prototype.thumbnailOnmessage=function(event){if(event.data.message==='renderThumbnail'){var canvas=document.createElement('canvas');var _a=event.data,value=_a.value,width=_a.width,height=_a.height,pageIndex=_a.pageIndex;canvas.width=width;canvas.height=height;var canvasContext=canvas.getContext('2d');var imageData=canvasContext.createImageData(width,height);imageData.data.set(value);canvasContext.putImageData(imageData,0,0);var imageUrl=canvas.toDataURL();var data={thumbnailImage:imageUrl,startPage:this.startIndex,endPage:this.thumbnailLimit,uniqueId:this.pdfViewerBase.documentId,pageIndex:pageIndex};this.updateThumbnailCollection(data);}};/**
     * @param jsonData
     * @private
     */ // eslint-disable-next-line
ThumbnailView.prototype.updateThumbnailCollection=function(data){if(data){var proxy=this;if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){proxy.pdfViewerBase.onControlError(500,data,proxy.pdfViewer.serverActionSettings.renderThumbnail);data=null;}}if(data&&data.uniqueId===proxy.pdfViewerBase.documentId){proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderThumbnail,data);proxy.renderThumbnailImage(data);if(proxy.pdfViewer.isThumbnailViewOpen){proxy.pdfViewerBase.navigationPane.isThumbnailOpen=true;// eslint-disable-next-line max-len
proxy.pdfViewerBase.navigationPane.sideBarTitle.textContent=proxy.pdfViewer.localeObj.getConstant('Page Thumbnails');document.getElementById(proxy.pdfViewer.element.id+'_thumbnail_view').style.display='flex';var bookmarkContent=proxy.pdfViewer.element.querySelector('.e-pv-bookmark-view');if(bookmarkContent){bookmarkContent.style.display='none';}proxy.pdfViewerBase.navigationPane.setThumbnailSelectionIconTheme();proxy.pdfViewerBase.navigationPane.updateViewerContainerOnExpand();proxy.pdfViewerBase.navigationPane.isBookmarkOpen=false;}}}};/**
     * @param pageNumber
     * @private
     */ThumbnailView.prototype.gotoThumbnailImage=function(pageNumber){var shouldScroll=this.checkThumbnailScroll(pageNumber);if(this.thumbnailView){var thumbnailChild=this.thumbnailView.children[pageNumber];if(thumbnailChild){var thumbnailDiv=thumbnailChild.children[0];if(shouldScroll){var offsetTop=thumbnailDiv.offsetTop+thumbnailDiv.clientTop-this.thumbnailTopMargin;this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=offsetTop;}if(!this.isThumbnailClicked){if(this.previousElement){this.previousElement.classList.remove('e-pv-thumbnail-selection');this.previousElement.classList.remove('e-pv-thumbnail-focus');this.previousElement.classList.remove('e-pv-thumbnail-hover');this.previousElement.classList.add('e-pv-thumbnail-selection-ring');}this.setFocusStyle(thumbnailDiv,pageNumber);}this.previousElement=thumbnailDiv.children[0];}}};ThumbnailView.prototype.checkThumbnailScroll=function(pageNumber){var shouldScroll=false;if(this.thumbnailView){var visibleThumbs=this.getVisibleThumbs();var numVisibleThumbs=visibleThumbs.views.length;// if the thumbnail isn't currently visible, scroll it into view.
if(numVisibleThumbs>0){var visibleFirstPageID=this.getPageNumberFromID(visibleThumbs.first.id);// account for only one thumbnail being visible.
// eslint-disable-next-line max-len
var visibleLastPageID=numVisibleThumbs>1?this.getPageNumberFromID(visibleThumbs.last.id):visibleFirstPageID;if(pageNumber<=visibleFirstPageID||pageNumber>=visibleLastPageID){shouldScroll=true;}else{// eslint-disable-next-line
visibleThumbs.views.some(function(view){var pageID=view.id.split('_');var thumbPageNumber=pageID[pageID.length-1];// eslint-disable-next-line radix
if(parseInt(thumbPageNumber)!==pageNumber){return false;}shouldScroll=view.percent<100;return true;});}}}return shouldScroll;};ThumbnailView.prototype.getPageNumberFromID=function(pageId){var pageID=pageId.split('_');var pageNumber=pageID[pageID.length-1];// eslint-disable-next-line radix
return parseInt(pageNumber);};ThumbnailView.prototype.setFocusStyle=function(thumbnail,pageNumber){if(thumbnail.children[0].id===this.pdfViewer.dataId+'_thumbnail_Selection_Ring_'+pageNumber){this.setMouseFocusStyle(thumbnail.children[0]);}};// eslint-disable-next-line
ThumbnailView.prototype.renderThumbnailImage=function(data){if(this.thumbnailView){var pageIndex=data.pageIndex;// eslint-disable-next-line max-len
var pageLink=sf.base.createElement('a',{id:'page_'+pageIndex,attrs:{'aria-label':'Thumbnail of Page'+(pageIndex+1),'tabindex':'-1','role':'link'},className:'e-pv-thumbnail-anchor-node'});// eslint-disable-next-line max-len
var thumbnail=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_thumbnail_'+pageIndex,className:'e-pv-thumbnail e-pv-thumbnail-column'});// eslint-disable-next-line max-len
this.thumbnailSelectionRing=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_thumbnail_Selection_Ring_'+pageIndex,className:'e-pv-thumbnail-selection-ring'});thumbnail.appendChild(this.thumbnailSelectionRing);// eslint-disable-next-line max-len
var thumbnailPageNumber=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_thumbnail_pagenumber_'+pageIndex,className:'e-pv-thumbnail-number'});thumbnailPageNumber.textContent=(pageIndex+1).toString();thumbnail.appendChild(thumbnailPageNumber);// eslint-disable-next-line max-len
this.thumbnailImage=sf.base.createElement('img',{id:this.pdfViewer.dataId+'_thumbnail_image_'+pageIndex,className:'e-pv-thumbnail-image'});this.thumbnailImage.src=data.thumbnailImage;if(this.pdfViewerBase.pageSize[pageIndex]&&this.pdfViewerBase.pageSize[pageIndex].height<this.pdfViewerBase.pageSize[pageIndex].width){this.thumbnailImage.style.height='86px';this.thumbnailImage.style.width='126px';thumbnail.style.height='100px';thumbnail.style.width='140px';pageLink.style.left='-25px';pageLink.style.position='relative';thumbnailPageNumber.style.left='18px';thumbnailPageNumber.style.position='relative';}this.thumbnailSelectionRing.appendChild(this.thumbnailImage);pageLink.appendChild(thumbnail);this.thumbnailView.appendChild(pageLink);this.wireUpEvents();if(pageIndex===0){this.setMouseFocusToFirstPage();}}this.pdfViewerBase.navigationPane.enableThumbnailButton();if(this.thumbnailLimit!==this.pdfViewerBase.pageCount&&this.thumbnailView){// eslint-disable-next-line
var isIE=!!document.documentMode;if(!isIE){Promise.all([this.createRequestForThumbnails()]);}else{this.createRequestForThumbnails();}}};ThumbnailView.prototype.wireUpEvents=function(){if(this.thumbnailSelectionRing){this.thumbnailSelectionRing.addEventListener('click',this.thumbnailClick);this.thumbnailSelectionRing.addEventListener('mouseover',this.thumbnailMouseOver);this.thumbnailSelectionRing.addEventListener('mouseleave',this.thumbnailMouseLeave);}};ThumbnailView.prototype.unwireUpEvents=function(){if(this.thumbnailSelectionRing&&this.thumbnailImage){this.thumbnailSelectionRing.removeEventListener('click',this.thumbnailClick);this.thumbnailSelectionRing.removeEventListener('mouseover',this.thumbnailMouseOver);this.thumbnailSelectionRing.removeEventListener('mouseleave',this.thumbnailMouseLeave);}};ThumbnailView.prototype.goToThumbnailPage=function(pageNumber){if(pageNumber>0&&pageNumber<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==pageNumber){this.pdfViewerBase.updateScrollTop(pageNumber-1);}else{this.isThumbnailClicked=false;}};ThumbnailView.prototype.setSelectionStyle=function(thumbnailElement){thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');thumbnailElement.classList.remove('e-pv-thumbnail-hover');thumbnailElement.classList.remove('e-pv-thumbnail-focus');thumbnailElement.classList.add('e-pv-thumbnail-selection');};ThumbnailView.prototype.setMouseOverStyle=function(thumbnailElement){// eslint-disable-next-line max-len
if(!thumbnailElement.classList.contains('e-pv-thumbnail-selection')){thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');if(!thumbnailElement.classList.contains('e-pv-thumbnail-focus')){thumbnailElement.classList.add('e-pv-thumbnail-hover');}}};ThumbnailView.prototype.setMouseLeaveStyle=function(thumbnailElement){if(!thumbnailElement.classList.contains('e-pv-thumbnail-selection')){if(!thumbnailElement.classList.contains('e-pv-thumbnail-focus')){thumbnailElement.classList.add('e-pv-thumbnail-selection-ring');}thumbnailElement.classList.remove('e-pv-thumbnail-hover');}else{if(!thumbnailElement.classList.contains('e-pv-thumbnail-selection')){thumbnailElement.classList.remove('e-pv-thumbnail-selection');thumbnailElement.classList.add('e-pv-thumbnail-focus');}}};ThumbnailView.prototype.setMouseFocusStyle=function(thumbnailElement){thumbnailElement.classList.remove('e-pv-thumbnail-selection');thumbnailElement.classList.remove('e-pv-thumbnail-hover');thumbnailElement.classList.add('e-pv-thumbnail-focus');};ThumbnailView.prototype.setMouseFocusToFirstPage=function(){var thumbnailChild=this.thumbnailView.children[0];if(thumbnailChild){var thumbnailDiv=thumbnailChild.children[0].children[0];this.setMouseFocusStyle(thumbnailDiv);this.previousElement=thumbnailDiv;}};/**
     * @private
     */ThumbnailView.prototype.clear=function(){this.startIndex=0;this.thumbnailLimit=0;if(this.pdfViewerBase.navigationPane){if(this.pdfViewerBase.navigationPane.sideBarContentContainer){this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display='block';this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=0;this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display='none';}}if(this.thumbnailView){while(this.thumbnailView.hasChildNodes()){this.thumbnailView.removeChild(this.thumbnailView.lastChild);}}if(this.pdfViewerBase.navigationPane){this.pdfViewerBase.navigationPane.resetThumbnailView();}if(this.thumbnailRequestHandler){this.thumbnailRequestHandler.clear();}this.unwireUpEvents();};ThumbnailView.prototype.getVisibleThumbs=function(){return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent,this.thumbnailView.children);};ThumbnailView.prototype.getVisibleElements=function(scrollElement,thumbnailViewChildren){var top=scrollElement.scrollTop;var bottom=top+scrollElement.clientHeight;var left=scrollElement.scrollLeft;var right=left+scrollElement.clientWidth;/**
         * @param thumbnailViewChildrenElement
         */function isThumbnailElementBottomAfterViewTop(thumbnailViewChildrenElement){var elementBottom=thumbnailViewChildrenElement.offsetTop+thumbnailViewChildrenElement.clientTop+thumbnailViewChildrenElement.clientHeight;return elementBottom>top;}// eslint-disable-next-line
var visible=[];var thumbnailView;var element;var currentHeight;var viewHeight;var viewBottom;var hiddenHeight;var currentWidth;var viewWidth;var viewRight;var hiddenWidth;var percentVisible;var firstVisibleElementInd=thumbnailViewChildren.length===0?0:this.binarySearchFirstItem(thumbnailViewChildren,isThumbnailElementBottomAfterViewTop);if(thumbnailViewChildren.length>0){firstVisibleElementInd=this.backtrackBeforeAllVisibleElements(firstVisibleElementInd,thumbnailViewChildren,top);}var lastEdge=-1;for(var i=firstVisibleElementInd,ii=thumbnailViewChildren.length;i<ii;i++){thumbnailView=this.getThumbnailElement(i);element=thumbnailView;currentWidth=element.offsetLeft+element.clientLeft;currentHeight=element.offsetTop+element.clientTop;viewWidth=element.clientWidth;viewHeight=element.clientHeight;viewRight=currentWidth+viewWidth;viewBottom=currentHeight+viewHeight;if(lastEdge===-1){if(viewBottom>=bottom){lastEdge=viewBottom;}}else if(currentHeight>lastEdge){break;}if(viewBottom<=top||currentHeight>=bottom||viewRight<=left||currentWidth>=right){continue;}hiddenHeight=Math.max(0,top-currentHeight)+Math.max(0,viewBottom-bottom);hiddenWidth=Math.max(0,left-currentWidth)+Math.max(0,viewRight-right);// eslint-disable-next-line no-bitwise
percentVisible=(viewHeight-hiddenHeight)*(viewWidth-hiddenWidth)*100/viewHeight/viewWidth|0;visible.push({id:thumbnailView.id,x:currentWidth,y:currentHeight,view:thumbnailView,percent:percentVisible});}var first=visible[0];var last=visible[visible.length-1];return{first:first,last:last,views:visible};};// eslint-disable-next-line
ThumbnailView.prototype.binarySearchFirstItem=function(items,condition){var minIndex=0;var maxIndex=items.length-1;if(items.length===0||!condition(this.getThumbnailElement(maxIndex))){return items.length-1;}if(condition(this.getThumbnailElement(minIndex))){return minIndex;}while(minIndex<maxIndex){// eslint-disable-next-line no-bitwise
var currentIndex=minIndex+maxIndex>>1;if(condition(this.getThumbnailElement(currentIndex))){maxIndex=currentIndex;}else{minIndex=currentIndex+1;}}return minIndex;/* === maxIndex */};ThumbnailView.prototype.backtrackBeforeAllVisibleElements=function(index,views,top){if(index<2){return index;}var thumbnailElement=this.getThumbnailElement(index);var pageTop=thumbnailElement.offsetTop+thumbnailElement.clientTop;if(pageTop>=top){thumbnailElement=this.getThumbnailElement(index-1);pageTop=thumbnailElement.offsetTop+thumbnailElement.clientTop;}for(var i=index-2;i>=0;--i){thumbnailElement=this.getThumbnailElement(i);if(thumbnailElement.offsetTop+thumbnailElement.clientTop+thumbnailElement.clientHeight<=pageTop){break;}index=i;}return index;};ThumbnailView.prototype.getThumbnailElement=function(index){var thumbnailChild=this.thumbnailView.children[index];return thumbnailChild.children[0];};/**
     * @private
     */ThumbnailView.prototype.destroy=function(){this.clear();};/**
     * @private
     */ThumbnailView.prototype.getModuleName=function(){return'ThumbnailView';};return ThumbnailView;}();/**
 * export types
 */ /* eslint-disable */ /* eslint-disable */ /**
 * @hidden
 */var FormDesignerToolbar=/** @class */function(){function FormDesignerToolbar(viewer,viewerBase,toolbar){/**
         * @private
        */this.isToolbarHidden=false;this.isTextboxBtnVisible=true;this.isPasswordBtnVisible=true;this.isCheckboxBtnVisible=true;this.isRadiobuttonBtnVisible=true;this.isDropdownBtnVisible=true;this.isListboxBtnVisible=true;this.isSignatureBtnVisible=true;this.isDeleteBtnVisible=true;this.toolbarBorderHeight=1;this.pdfViewer=viewer;this.pdfViewerBase=viewerBase;this.primaryToolbar=toolbar;}FormDesignerToolbar.prototype.initializeFormDesignerToolbar=function(){var _this=this;// eslint-disable-next-line max-len
this.toolbarElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_formdesigner_toolbar',className:'e-pv-formdesigner-toolbar'});this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);this.toolbar=new sf.navigations.Toolbar({width:'',height:'',overflowMode:'Popup',items:this.createToolbarItems(),clicked:this.onToolbarClicked.bind(this),created:function created(){_this.createDropDowns();}});//this.toolbar.isStringTemplate = true;
if(this.pdfViewer.enableRtl){this.toolbar.enableRtl=true;}this.toolbar.appendTo(this.toolbarElement);this.afterToolbarCreation();this.createSignContainer();this.applyFormDesignerToolbarSettings();//this.updateToolbarItems();
this.showFormDesignerToolbar(null,true);};/**
     * @param element
     * @param isInitialLoading
     * @param element
     * @param isInitialLoading
     * @private
     */FormDesignerToolbar.prototype.showFormDesignerToolbar=function(element,isInitialLoading){if(!this.isToolbarHidden){// eslint-disable-next-line
var formDesignerModule=this.pdfViewer.formDesignerModule;if(element){this.primaryToolbar.deSelectItem(element);}else{if(this.pdfViewer.enableToolbar){this.primaryToolbar.deSelectItem(this.primaryToolbar.formDesignerItem);}}this.adjustViewer(false);// eslint-disable-next-line max-len
//this.deselectAllItems();
this.toolbarElement.style.display='none';this.pdfViewer.formDesignerModule.setMode("edit");this.pdfViewer.designerMode=false;if(!isInitialLoading){this.pdfViewer.isFormDesignerToolbarVisible=false;}}else{var toolBarInitialStatus=this.toolbarElement.style.display;this.toolbarElement.style.display='block';this.pdfViewer.designerMode=true;this.pdfViewer.formDesignerModule.setMode("designer");if(!isInitialLoading){this.pdfViewer.isFormDesignerToolbarVisible=true;}if(element){this.primaryToolbar.selectItem(element);}else{if(this.pdfViewer.enableToolbar){this.primaryToolbar.selectItem(this.primaryToolbar.formDesignerItem);}}if(toolBarInitialStatus==='none'){this.adjustViewer(true);}}// eslint-disable-next-line max-len
if(this.pdfViewer.magnification&&this.pdfViewer.magnification.fitType==='fitToPage'){this.pdfViewer.magnification.fitToPage();}//this.enableAnnotationAddTools(true);
this.isToolbarHidden=!this.isToolbarHidden;};/**
     * @param isAdjust
     * @private
    */FormDesignerToolbar.prototype.adjustViewer=function(isAdjust){var splitterElement;var toolbarContainer;var formDesignerToolbarHeight;if(sf.base.isBlazor()){splitterElement=this.pdfViewer.element.querySelector('.e-pv-sidebar-toolbar-splitter');toolbarContainer=this.pdfViewer.element.querySelector('.e-pv-toolbar');var formDesignerToolbarContainer=this.pdfViewer.element.querySelector('.e-pv-formDesigner-toolbar');formDesignerToolbarHeight=this.getToolbarHeight(formDesignerToolbarContainer);}else{splitterElement=this.pdfViewerBase.getElement('_sideBarToolbarSplitter');toolbarContainer=this.pdfViewerBase.getElement('_toolbarContainer');formDesignerToolbarHeight=this.getToolbarHeight(this.toolbarElement);}var toolbarHeight=this.getToolbarHeight(toolbarContainer);var sideBarToolbar=this.pdfViewerBase.navigationPane.sideBarToolbar;var sideBarContentContainer=this.pdfViewerBase.navigationPane.sideBarContentContainer;var commentsContainer=this.pdfViewerBase.navigationPane.commentPanelContainer;var commentPanelResizer=this.pdfViewerBase.navigationPane.commentPanelResizer;if(isAdjust){if(this.pdfViewer.enableToolbar){sideBarToolbar.style.top=toolbarHeight+formDesignerToolbarHeight+'px';sideBarContentContainer.style.top=toolbarHeight+formDesignerToolbarHeight+'px';splitterElement.style.top=toolbarHeight+formDesignerToolbarHeight+'px';commentsContainer.style.top=toolbarHeight+formDesignerToolbarHeight+'px';commentPanelResizer.style.top=toolbarHeight+formDesignerToolbarHeight+'px';}else{sideBarToolbar.style.top=formDesignerToolbarHeight+'px';sideBarContentContainer.style.top=formDesignerToolbarHeight+'px';splitterElement.style.top=formDesignerToolbarHeight+'px';commentsContainer.style.top=formDesignerToolbarHeight+'px';commentPanelResizer.style.top=toolbarHeight+formDesignerToolbarHeight+'px';}if(!this.pdfViewer.enableToolbar){toolbarHeight=0;}// eslint-disable-next-line max-len
this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),formDesignerToolbarHeight+toolbarHeight)+'px';sideBarToolbar.style.height=this.getNavigationToolbarHeight(formDesignerToolbarHeight+toolbarHeight)+'px';splitterElement.style.height=this.getNavigationToolbarHeight(formDesignerToolbarHeight+toolbarHeight)+'px';}else{if(this.pdfViewer.enableToolbar){// eslint-disable-next-line max-len
sideBarToolbar.style.top=toolbarHeight+'px';sideBarContentContainer.style.top=toolbarHeight+'px';splitterElement.style.top=toolbarHeight+'px';commentsContainer.style.top=toolbarHeight+'px';commentPanelResizer.style.top=toolbarHeight+'px';}else{sideBarToolbar.style.top=1+'px';sideBarToolbar.style.height='100%';sideBarContentContainer.style.top=1+'px';sideBarContentContainer.style.height='100%';splitterElement.style.top=1+'px';splitterElement.style.height='100%';commentsContainer.style.top=1+'px';commentsContainer.style.height='100%';commentPanelResizer.style.top=1+'px';commentPanelResizer.style.height='100%';}if(!this.pdfViewer.enableToolbar){toolbarHeight=0;}// eslint-disable-next-line max-len
this.pdfViewerBase.viewerContainer.style.height=this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),formDesignerToolbarHeight)+'px';sideBarToolbar.style.height=this.getNavigationToolbarHeight(toolbarHeight);splitterElement.style.height=this.getNavigationToolbarHeight(toolbarHeight);if(this.pdfViewerBase.viewerContainer.style.height==='0px'){// eslint-disable-next-line
this.pdfViewerBase.viewerContainer.style.height=parseInt(this.pdfViewer.element.style.height)-parseInt(sideBarToolbar.style.top)+'px';}}if(sf.base.isBlazor()){this.updateContentContainerHeight(isAdjust,true);}else{this.updateContentContainerHeight(isAdjust);}};FormDesignerToolbar.prototype.getElementHeight=function(element){try{return element.getBoundingClientRect().height;}catch(error){return 0;}};FormDesignerToolbar.prototype.updateViewerHeight=function(viewerHeight,toolbarHeight){return this.getElementHeight(this.pdfViewer.element)-toolbarHeight;};FormDesignerToolbar.prototype.resetViewerHeight=function(viewerHeight,toolbarHeight){return viewerHeight+toolbarHeight;};FormDesignerToolbar.prototype.getNavigationToolbarHeight=function(toolbarHeight){var height=this.pdfViewer.element.getBoundingClientRect().height;return height!==0?height-toolbarHeight+'px':'';};FormDesignerToolbar.prototype.updateContentContainerHeight=function(isAdjust,isBlazor$$1){var formDesignerToolbarHeight;if(isBlazor$$1){var formDesignerToolbarContainer=this.pdfViewer.element.querySelector('.e-pv-formDesigner-toolbar');formDesignerToolbarHeight=this.getToolbarHeight(formDesignerToolbarContainer);}else{formDesignerToolbarHeight=this.getToolbarHeight(this.toolbarElement);}var sideBarClientRect=this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();if(sideBarClientRect.height!==0){if(isAdjust){// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height=sideBarClientRect.height-formDesignerToolbarHeight+'px';}else{// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height=sideBarClientRect.height+formDesignerToolbarHeight+'px';}}};FormDesignerToolbar.prototype.getToolbarHeight=function(element){var toolbarHeight=element.getBoundingClientRect().height;if(toolbarHeight===0&&element===this.pdfViewerBase.getElement('_toolbarContainer')){// getComputedStyle gets the value from style and toolbar border height is added to it.
// eslint-disable-next-line
toolbarHeight=parseFloat(window.getComputedStyle(element)['height'])+this.toolbarBorderHeight;}return toolbarHeight;};// eslint-disable-next-line
FormDesignerToolbar.prototype.createToolbarItems=function(){var signTemplate=this.getTemplate('span','_formfield_signature','e-pv-annotation-handwritten-container');// eslint-disable-next-line
var items=[];// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-textbox-icon e-pv-icon',className:'e-pv-annotation-shapes-container',id:this.pdfViewer.dataId+'_formdesigner_textbox',align:'Left'});items.push({prefixIcon:'e-pv-password-icon e-pv-icon',className:'e-pv-annotation-shapes-container',id:this.pdfViewer.dataId+'_formdesigner_passwordfield',align:'Left'});items.push({prefixIcon:'e-pv-checkbox-icon e-pv-icon',className:'e-pv-annotation-shapes-container',id:this.pdfViewer.dataId+'_formdesigner_checkbox',align:'Left'});items.push({prefixIcon:'e-pv-radiobutton-icon e-pv-icon',className:'e-pv-annotation-shapes-container',id:this.pdfViewer.dataId+'_formdesigner_radiobutton',align:'Left'});items.push({prefixIcon:'e-pv-dropdown-icon e-pv-icon',className:'e-pv-annotation-shapes-container',id:this.pdfViewer.dataId+'_formdesigner_dropdown',align:'Left'});items.push({prefixIcon:'e-pv-listbox-icon e-pv-icon',className:'e-pv-annotation-shapes-container',id:this.pdfViewer.dataId+'_formdesigner_listbox',align:'Left'});items.push({template:signTemplate,align:'Left'});items.push({type:'Separator',align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-annotation-delete-icon e-pv-icon',className:'e-pv-annotation-delete-container',id:this.pdfViewer.dataId+'_formdesigner_delete',align:'Left'});items.push({prefixIcon:'e-pv-annotation-tools-close-icon e-pv-icon',className:'e-pv-annotation-tools-close-container',id:this.pdfViewer.dataId+'_formdesigner_close',align:'Right'});return items;};FormDesignerToolbar.prototype.createSignContainer=function(){var _this=this;this.handWrittenSignatureItem=this.pdfViewerBase.getElement('_formfield_signature');// eslint-disable-next-line max-len
this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement('_formfield_signature'),this.pdfViewer.localeObj.getConstant('HandwrittenSignatureDialogHeaderText'));// eslint-disable-next-line
var items=[];items=[{text:'ADD SIGNATURE'},{separator:true},{text:'ADD INITIAL'}];var saveOptions={items:items,iconCss:'e-pv-handwritten-icon e-pv-icon',cssClass:'e-pv-handwritten-popup',beforeItemRender:function beforeItemRender(args){_this.pdfViewer.clearSelection(_this.pdfViewerBase.currentPageNumber-1);if(args.element&&args.element.className.indexOf("e-separator")!==-1){args.element.style.margin="8px 0";}if(args.item.text==='ADD SIGNATURE'){args.element.innerHTML='';var addInitialSpan=sf.base.createElement('button');addInitialSpan.classList.add("e-control","e-btn","e-lib","e-outline","e-primary");addInitialSpan.textContent=_this.pdfViewer.localeObj.getConstant('SignatureFieldDialogHeaderText');addInitialSpan.style.width="130px";addInitialSpan.style.height="36px";addInitialSpan.addEventListener('click',_this.clickSignature.bind(_this));args.element.appendChild(addInitialSpan);args.element.addEventListener('mouseover',_this.hoverInitialBtn.bind(_this));args.element.style.width='206px';args.element.style.display='flex';args.element.style.flexDirection='column';args.element.style.height='auto';args.element.style.alignItems='center';}if(args.item.text==='ADD INITIAL'){args.element.innerHTML='';var addInitialSpan=sf.base.createElement('button');addInitialSpan.classList.add("e-control","e-btn","e-lib","e-outline","e-primary");addInitialSpan.textContent=_this.pdfViewer.localeObj.getConstant('InitialFieldDialogHeaderText');addInitialSpan.style.width="130px";addInitialSpan.style.height="36px";addInitialSpan.addEventListener('click',_this.clickInitial.bind(_this));args.element.appendChild(addInitialSpan);args.element.addEventListener('mouseover',_this.hoverInitialBtn.bind(_this));args.element.style.width='206px';args.element.style.display='flex';args.element.style.flexDirection='column';args.element.style.height='auto';args.element.style.alignItems='center';}}};var drpDownBtn=new sf.splitbuttons.DropDownButton(saveOptions);if(this.pdfViewer.enableRtl){drpDownBtn.enableRtl=this.pdfViewer.enableRtl;}drpDownBtn.appendTo(this.handWrittenSignatureItem);};FormDesignerToolbar.prototype.hoverInitialBtn=function(event){var eventTarget=event.target;var currentFieldID=sf.base.isNullOrUndefined(event.path)?event.composedPath()[0].id:event.path[0].id;if(currentFieldID!=='sign_'+currentFieldID.split("_")[1]&&currentFieldID!=='delete_'+currentFieldID.split("_")[1]){var liElement=document.getElementById(eventTarget.id);if(sf.base.isNullOrUndefined(liElement)){liElement=document.getElementById(eventTarget.parentElement.id);}if(liElement!=null&&(eventTarget.id!=='sign_'+eventTarget.id.split('_')[1]||eventTarget.id!=='sign_border_'+eventTarget.id.split('_')[2])){liElement.style.background='transparent';liElement.style.cursor='default';}else if(liElement.parentElement!=null&&(eventTarget.id!=='sign_'+eventTarget.id.split('_')[1]||eventTarget.id!=='sign_border_'+eventTarget.id.split('_')[2])){liElement.parentElement.style.background='transparent';liElement.parentElement.style.cursor='default';}}};FormDesignerToolbar.prototype.getTemplate=function(elementName,id,className){var element=sf.base.createElement(elementName,{id:this.pdfViewer.dataId+id});if(className){element.className=className;}return element.outerHTML;};FormDesignerToolbar.prototype.onToolbarClicked=function(args){// eslint-disable-next-line
if(args&&args.item){if(args.item.id.indexOf("textbox")!==-1){this.pdfViewer.formDesignerModule.setFormFieldMode('Textbox');}else if(args.item.id.indexOf("passwordfield")!==-1){this.pdfViewer.formDesignerModule.setFormFieldMode('Password');}else if(args.item.id.indexOf("checkbox")!==-1){this.pdfViewer.formDesignerModule.setFormFieldMode('CheckBox');}else if(args.item.id.indexOf("radiobutton")!==-1){this.pdfViewer.formDesignerModule.setFormFieldMode('RadioButton');}else if(args.item.id.indexOf("dropdown")!==-1){this.pdfViewer.formDesignerModule.setFormFieldMode('DropDown');}else if(args.item.id.indexOf("listbox")!==-1){this.pdfViewer.formDesignerModule.setFormFieldMode('ListBox');}else if(args.item.id.indexOf("signature")!==-1){this.pdfViewer.formDesignerModule.setFormFieldMode('SignatureField');}else if(args.item.id.indexOf("close")!==-1){this.pdfViewer.toolbarModule.formDesignerToolbarModule.showFormDesignerToolbar(this.pdfViewer.toolbarModule.formDesignerItem);}else if(args.item.id.indexOf("delete")!==-1){this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0]);this.showHideDeleteIcon(false);}if(this.pdfViewer.selectedItems.formFields.length>0){this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.formFields[0].pageIndex);}}};FormDesignerToolbar.prototype.clickSignature=function(args){this.pdfViewer.formDesignerModule.setFormFieldMode('SignatureField');};FormDesignerToolbar.prototype.clickInitial=function(args){this.pdfViewer.isInitialFieldToolbarSelection=true;this.pdfViewer.formDesignerModule.setFormFieldMode('InitialField');this.pdfViewer.isInitialFieldToolbarSelection=false;};FormDesignerToolbar.prototype.afterToolbarCreation=function(){// eslint-disable-next-line max-len
this.textboxItem=this.primaryToolbar.addClassToolbarItem('_formdesigner_textbox','e-pv-formdesigner-textbox',this.pdfViewer.localeObj.getConstant('Textbox'));this.passwordItem=this.primaryToolbar.addClassToolbarItem('_formdesigner_passwordfield','e-pv-formdesigner-passwordfield',this.pdfViewer.localeObj.getConstant('Password'));this.checkboxItem=this.primaryToolbar.addClassToolbarItem('_formdesigner_checkbox','e-pv-formdesigner-checkbox',this.pdfViewer.localeObj.getConstant('Check Box'));this.radioButtonItem=this.primaryToolbar.addClassToolbarItem('_formdesigner_radiobutton','e-pv-formdesigner-radiobutton',this.pdfViewer.localeObj.getConstant('Radio Button'));this.dropdownItem=this.primaryToolbar.addClassToolbarItem('_formdesigner_dropdown','e-pv-formdesigner-dropdown',this.pdfViewer.localeObj.getConstant('Dropdown'));this.listboxItem=this.primaryToolbar.addClassToolbarItem('_formdesigner_listbox','e-pv-formdesigner-listbox',this.pdfViewer.localeObj.getConstant('List Box'));//this.signatureItem = this.primaryToolbar.addClassToolbarItem('_formdesigner_signature', 'e-pv-formdesigner-signature', this.pdfViewer.localeObj.getConstant('Signature'));
this.deleteItem=this.primaryToolbar.addClassToolbarItem('_formdesigner_delete','e-pv-formdesigner-delete',this.pdfViewer.localeObj.getConstant('Delete FormField'));this.closeItem=this.primaryToolbar.addClassToolbarItem('_formdesigner_close','e-pv-annotation-tools-close',null);this.showHideDeleteIcon(false);//this.enableTextMarkupAnnotationPropertiesTools(false); 
};FormDesignerToolbar.prototype.showHideDeleteIcon=function(isEnable){if(this.toolbar)this.toolbar.enableItems(this.deleteItem.parentElement,isEnable);};FormDesignerToolbar.prototype.applyFormDesignerToolbarSettings=function(){if(this.pdfViewer.toolbarSettings.formDesignerToolbarItems){if(this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf('TextboxTool')!==-1){this.showTextboxTool(true);}else{this.showTextboxTool(false);}if(this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf('PasswordTool')!==-1){this.showPasswordTool(true);}else{this.showPasswordTool(false);}if(this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf('CheckBoxTool')!==-1){this.showCheckboxTool(true);}else{this.showCheckboxTool(false);}if(this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf('RadioButtonTool')!==-1){this.showRadioButtonTool(true);}else{this.showRadioButtonTool(false);}if(this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf('DropdownTool')!==-1){this.showDropdownTool(true);}else{this.showDropdownTool(false);}if(this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf('ListboxTool')!==-1){this.showListboxTool(true);}else{this.showListboxTool(false);}if(this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf('DrawSignatureTool')!==-1){this.showDrawSignatureTool(true);}else{this.showDrawSignatureTool(false);}if(this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf('DeleteTool')!==-1){this.showDeleteTool(true);}else{this.showDeleteTool(false);}this.showSeparator();}};FormDesignerToolbar.prototype.showTextboxTool=function(isShow){this.isTextboxBtnVisible=isShow;this.applyHideToToolbar(isShow,0,0);};FormDesignerToolbar.prototype.showPasswordTool=function(isShow){this.isPasswordBtnVisible=isShow;this.applyHideToToolbar(isShow,1,1);};FormDesignerToolbar.prototype.showCheckboxTool=function(isShow){this.isCheckboxBtnVisible=isShow;this.applyHideToToolbar(isShow,2,2);};FormDesignerToolbar.prototype.showRadioButtonTool=function(isShow){this.isRadiobuttonBtnVisible=isShow;this.applyHideToToolbar(isShow,3,3);};FormDesignerToolbar.prototype.showDropdownTool=function(isShow){this.isDropdownBtnVisible=isShow;this.applyHideToToolbar(isShow,4,4);};FormDesignerToolbar.prototype.showListboxTool=function(isShow){this.isListboxBtnVisible=isShow;this.applyHideToToolbar(isShow,5,5);};FormDesignerToolbar.prototype.showDrawSignatureTool=function(isShow){this.isSignatureBtnVisible=isShow;this.applyHideToToolbar(isShow,6,6);};FormDesignerToolbar.prototype.showDeleteTool=function(isShow){this.isDeleteBtnVisible=isShow;this.applyHideToToolbar(isShow,8,8);};FormDesignerToolbar.prototype.showSeparator=function(){if(!this.isSignatureBtnVisible&&!this.isDeleteBtnVisible)this.applyHideToToolbar(false,7,7);};FormDesignerToolbar.prototype.applyHideToToolbar=function(show,startIndex,endIndex){var isHide=!show;for(var index=startIndex;index<=endIndex;index++){this.toolbar.hideItem(index,isHide);}};FormDesignerToolbar.prototype.createDropDowns=function(){};/**
     * @private
     */FormDesignerToolbar.prototype.destroy=function(){var componentElement=[this.textboxItem,this.passwordItem,this.checkboxItem,this.radioButtonItem,this.listboxItem,this.dropdownItem,this.handWrittenSignatureItem,this.deleteItem];for(var i=0;i<componentElement.length;i++){if(componentElement[i]){this.destroyDependentComponent(componentElement[i]);}}};FormDesignerToolbar.prototype.destroyDependentComponent=function(component){if(component.ej2_instances){for(var i=component.ej2_instances.length-1;i>=0;i--){component.ej2_instances[i].destroy();}}};return FormDesignerToolbar;}();/* eslint-disable */ /**
 * Toolbar module
 */var Toolbar$1=/** @class */function(){/**
     * @param viewer
     * @param viewerBase
     * @param viewer
     * @param viewerBase
     * @private
     */function Toolbar$$1(viewer,viewerBase){var _this=this;this.isPageNavigationToolDisabled=false;this.isMagnificationToolDisabled=false;/**
         * @private
        */this.isSelectionToolDisabled=false;this.isScrollingToolDisabled=false;this.isOpenBtnVisible=true;this.isNavigationToolVisible=true;this.isMagnificationToolVisible=true;this.isSelectionBtnVisible=true;this.isScrollingBtnVisible=true;this.isDownloadBtnVisible=true;this.isPrintBtnVisible=true;this.isSearchBtnVisible=true;this.isTextSearchBoxDisplayed=false;this.isUndoRedoBtnsVisible=true;this.isAnnotationEditBtnVisible=true;this.isFormDesignerEditBtnVisible=true;this.isCommentBtnVisible=true;this.isSubmitbtnvisible=true;this.onToolbarKeydown=function(event){var targetId=event.target.id;if(!(targetId===_this.pdfViewer.dataId+'_currentPageInput'||targetId===_this.pdfViewer.dataId+'_zoomDropDown')){event.preventDefault();event.stopPropagation();}};this.toolbarClickHandler=function(args){// eslint-disable-next-line max-len
if(!sf.base.Browser.isDevice||_this.pdfViewer.enableDesktopMode){if(args.originalEvent.target===_this.zoomDropdownItem.parentElement.childNodes[1]||args.originalEvent.target===_this.zoomDropdownItem.parentElement.childNodes[2]){args.cancel=true;}else if(args.originalEvent.target.id===_this.pdfViewer.dataId+'_openIcon'){var tooltipData=args.originalEvent.target.parentElement.dataset;if(tooltipData&&tooltipData.tooltipId){var tooltipElement=document.getElementById(tooltipData.tooltipId);if(tooltipElement){tooltipElement.style.display='none';}}}}_this.handleToolbarBtnClick(args);// eslint-disable-next-line
var targetElement=args.originalEvent.target;if(!sf.base.Browser.isDevice||_this.pdfViewer.enableDesktopMode){// eslint-disable-next-line max-len
if(!(args.originalEvent.target===_this.zoomDropdownItem.parentElement.childNodes[1]||args.originalEvent.target===_this.zoomDropdownItem.parentElement.childNodes[2]||args.originalEvent.target===_this.currentPageBoxElement||args.originalEvent.target===_this.textSearchItem.childNodes[0])){if(targetElement.parentElement.id!==_this.pdfViewer.dataId+'_toolbarContainer_nav'&&targetElement.id!==_this.pdfViewer.dataId+'_toolbarContainer_nav'){args.originalEvent.target.blur();_this.pdfViewerBase.focusViewerContainer();}}}else{args.originalEvent.target.blur();_this.pdfViewerBase.focusViewerContainer();}};// eslint-disable-next-line
this.loadDocument=function(args){// eslint-disable-next-line
var upoadedFiles=args.target.files;if(args.target.files[0]!==null){var uploadedFile=upoadedFiles[0];if(uploadedFile){_this.uploadedDocumentName=uploadedFile.name;var reader=new FileReader();reader.readAsDataURL(uploadedFile);// eslint-disable-next-line
reader.onload=function(e){var uploadedFileUrl=e.currentTarget.result;if(sf.base.isBlazor()){_this.uploadedFile=uploadedFileUrl;_this.pdfViewerBase.clear(true);_this.pdfViewerBase.showLoadingIndicator(true);if(!_this.pdfViewerBase.isWebAssembly){_this.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",uploadedFileUrl,true);}else{_this.pdfViewer._dotnetInstance.invokeMethodAsync("ClientSideDocumentLoaded",true);}}else{_this.pdfViewer.load(uploadedFileUrl,null);}};}}};this.navigateToPage=function(args){if(args.which===13){// eslint-disable-next-line
var enteredValue=parseInt(_this.currentPageBoxElement.value);if(enteredValue!==null){if(enteredValue>0&&enteredValue<=_this.pdfViewerBase.pageCount){if(_this.pdfViewer.navigationModule){_this.pdfViewer.navigationModule.goToPage(enteredValue);}}else{_this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);}}else{_this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);}_this.currentPageBoxElement.blur();_this.pdfViewerBase.focusViewerContainer();}};this.textBoxFocusOut=function(){// eslint-disable-next-line
if(_this.currentPageBox.value===null||_this.currentPageBox.value>=_this.pdfViewerBase.pageCount||_this.currentPageBox.value!==_this.pdfViewerBase.currentPageNumber){_this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);}};this.pdfViewer=viewer;this.pdfViewerBase=viewerBase;}/**
     * @param width
     * @private
     */Toolbar$$1.prototype.intializeToolbar=function(width){var toolbarDiv;if(!sf.base.isBlazor()){toolbarDiv=this.createToolbar(width);}else{if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){toolbarDiv=this.pdfViewer.element.querySelector('.e-pv-toolbar');this.toolbarElement=toolbarDiv;}}// eslint-disable-next-line
var isIE=!!document.documentMode;if(isIE){if(sf.base.isBlazor()){this.pdfViewerBase.blazorUIAdaptor.totalPageElement.classList.add('e-pv-total-page-ms');}else{if(!sf.base.Browser.isDevice){this.totalPageItem.classList.add('e-pv-total-page-ms');}}}this.createFileElement(toolbarDiv);if(sf.base.isBlazor()&&sf.base.Browser.isDevice){this.InitializeMobileToolbarInBlazor();}this.wireEvent();if(!sf.base.isBlazor()){this.updateToolbarItems();if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.applyToolbarSettings();this.initialEnableItems();this.pdfViewerBase.navigationPane.adjustPane();}else{this.initialEnableItems();}if(this.pdfViewer.annotationModule){this.annotationToolbarModule=new AnnotationToolbar(this.pdfViewer,this.pdfViewerBase,this);if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.annotationToolbarModule.initializeAnnotationToolbar();}}if(this.pdfViewer.formDesignerModule){this.formDesignerToolbarModule=new FormDesignerToolbar(this.pdfViewer,this.pdfViewerBase,this);if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.formDesignerToolbarModule.initializeFormDesignerToolbar();}}}else{if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.initialEnableItems();this.pdfViewerBase.navigationPane.adjustPane();if(this.pdfViewer.enableToolbar){this.bindOpenIconEvent();}}if(document.getElementById(this.pdfViewer.dataId+'_handTool')){this.PanElement=document.getElementById(this.pdfViewer.dataId+'_handTool').children[0];this.PanElement.classList.add('e-pv-tbar-btn');}if(document.getElementById(this.pdfViewer.dataId+'_selectTool')){this.SelectToolElement=document.getElementById(this.pdfViewer.dataId+'_selectTool').children[0];this.SelectToolElement.classList.add('e-pv-tbar-btn');}if(document.getElementById(this.pdfViewer.dataId+'_comment')){this.CommentElement=document.getElementById(this.pdfViewer.dataId+'_comment').children[0];this.CommentElement.classList.add('e-pv-tbar-btn');}if(sf.base.isBlazor()&&(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&this.pdfViewer.enableDesktopMode)||!sf.base.isBlazor()){this.annotationToolbarModule=new AnnotationToolbar(this.pdfViewer,this.pdfViewerBase,this);if(this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar||this.pdfViewer.enableDesktopMode&&sf.base.Browser.isDevice){this.annotationToolbarModule.afterAnnotationToolbarCreationInBlazor();}}}return toolbarDiv;};Toolbar$$1.prototype.bindOpenIconEvent=function(){var openElement=document.getElementById(this.pdfViewer.dataId+'_open');if(openElement){openElement.addEventListener('click',this.openFileDialogBox.bind(this));}};Toolbar$$1.prototype.InitializeMobileToolbarInBlazor=function(){var toolbarDiv;toolbarDiv=this.pdfViewer.element.querySelector('.e-pv-mobile-toolbar');this.createFileElement(toolbarDiv);this.wireEvent();};/**
     * Shows /hides the toolbar in the PdfViewer
     *
     * @param  {boolean} enableToolbar - If set true , its show the Toolbar
     * @returns void
     */Toolbar$$1.prototype.showToolbar=function(enableToolbar){var toolbar=this.toolbarElement;if(enableToolbar){if(toolbar){toolbar.style.display='block';}// eslint-disable-next-line max-len
if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule){this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();}}else{this.pdfViewerBase.toolbarHeight=0;if(enableToolbar){if(sf.base.Browser.isDevice&&this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar){this.annotationToolbarModule.toolbarCreated=false;this.annotationToolbarModule.adjustMobileViewer();this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.element.style.display='none';}if(sf.base.Browser.isDevice&&this.annotationToolbarModule.propertyToolbar){this.annotationToolbarModule.propertyToolbar.element.style.display='none';}}toolbar.style.display='none';}};/**
     * Shows/hides the Navigation toolbar in the PdfViewer
     *
     * @param  {boolean} enableNavigationToolbar - If set true , its show the Navigation Toolbar
     * @returns void
     */Toolbar$$1.prototype.showNavigationToolbar=function(enableNavigationToolbar){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){var navigationToolbar=this.pdfViewerBase.navigationPane.sideBarToolbar;var navigationToolbarSplitter=this.pdfViewerBase.navigationPane.sideBarToolbarSplitter;if(enableNavigationToolbar){navigationToolbar.style.display='block';navigationToolbarSplitter.style.display='block';if(this.pdfViewerBase.navigationPane.isBookmarkOpen||this.pdfViewerBase.navigationPane.isThumbnailOpen){this.pdfViewerBase.navigationPane.clear();}}else{navigationToolbar.style.display='none';navigationToolbarSplitter.style.display='none';if(this.pdfViewerBase.navigationPane.isBookmarkOpen||this.pdfViewerBase.navigationPane.isThumbnailOpen){this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();}}}};/**
     * Shows /hides the annotation toolbar in the PdfViewer
     *
     * @param  {boolean} enableAnnotationToolbar - If set true , its show the annotation Toolbar
     * @returns void
     */Toolbar$$1.prototype.showAnnotationToolbar=function(enableAnnotationToolbar){if(enableAnnotationToolbar){this.annotationToolbarModule.isToolbarHidden=true;this.annotationToolbarModule.showAnnotationToolbar();}else{this.annotationToolbarModule.isToolbarHidden=false;this.annotationToolbarModule.showAnnotationToolbar();}};/**
     * Shows /hides the the toolbar items in the PdfViewer
     *
     * @param  {string[]} items - Defines the toolbar items in the toolbar
     * @param  {boolean} isVisible - If set true, then its show the toolbar Items
     * @returns void
     */Toolbar$$1.prototype.showToolbarItem=function(items,isVisible){for(var i=0;i<items.length;i++){switch(items[i]){case'OpenOption':this.showOpenOption(isVisible);break;case'PageNavigationTool':this.showPageNavigationTool(isVisible);break;case'MagnificationTool':this.showMagnificationTool(isVisible);break;case'SelectionTool':this.showSelectionTool(isVisible);break;case'PanTool':this.showScrollingTool(isVisible);break;case'DownloadOption':this.showDownloadOption(isVisible);break;case'PrintOption':this.showPrintOption(isVisible);break;case'SearchOption':this.showSearchOption(isVisible);break;case'UndoRedoTool':this.showUndoRedoTool(isVisible);break;case'AnnotationEditTool':this.showAnnotationEditTool(isVisible);break;case'FormDesignerEditTool':this.showFormDesignerEditTool(isVisible);break;case'CommentTool':this.showCommentOption(isVisible);break;case'SubmitForm':this.showSubmitForm(isVisible);break;}}this.applyHideToToolbar(true,1,1);this.applyHideToToolbar(true,8,8);this.applyHideToToolbar(true,12,12);this.applyHideToToolbar(true,15,15);this.showSeparator(items);};/**
     * Enables /disables the the toolbar items in the PdfViewer
     *
     * @param  {string[]} items - Defines the toolbar items in the toolbar
     * @param  {boolean} isEnable - If set true, then its Enable the toolbar Items
     * @returns void
     */Toolbar$$1.prototype.enableToolbarItem=function(items,isEnable){for(var i=0;i<items.length;i++){switch(items[i]){case'OpenOption':this.enableOpenOption(isEnable);break;case'PageNavigationTool':this.isPageNavigationToolDisabled=isEnable;this.enablePageNavigationTool(isEnable);break;case'MagnificationTool':this.isMagnificationToolDisabled=isEnable;this.enableMagnificationTool(isEnable);break;case'SelectionTool':this.isSelectionToolDisabled=isEnable;this.enableSelectionTool(isEnable);break;case'PanTool':this.isScrollingToolDisabled=isEnable;this.enableScrollingTool(isEnable);break;case'DownloadOption':this.enableDownloadOption(isEnable);break;case'PrintOption':this.enablePrintOption(isEnable);break;case'SearchOption':this.enableSearchOption(isEnable);break;case'UndoRedoTool':this.enableUndoRedoTool(isEnable);break;case'AnnotationEditTool':this.enableAnnotationEditTool(isEnable);break;case'FormDesignerEditTool':this.enableFormDesignerEditTool(isEnable);break;case'CommentTool':this.enableCommentsTool(isEnable);break;}}};/**
     * @param restrictionSummary
     * @param isEnable
     * @param restrictionSummary
     * @param isEnable
     * @private
     */ // eslint-disable-next-line
Toolbar$$1.prototype.DisableToolbarItems=function(restrictionSummary,isEnable){switch(restrictionSummary){case'Print':this.enablePrintOption(isEnable);break;case'CopyContent':this.isSelectionToolDisabled=isEnable;this.enableSelectionTool(isEnable);if(isEnable){this.pdfViewerBase.initiateTextSelectMode();this.updateInteractionTools(isEnable);}else{this.pdfViewerBase.initiatePanning();this.updateInteractionTools(isEnable);}break;case'EditAnnotations':this.enableAnnotationEditTool(isEnable);break;}};Toolbar$$1.prototype.showOpenOption=function(enableOpenOption){this.isOpenBtnVisible=enableOpenOption;this.applyHideToToolbar(enableOpenOption,0,0);};Toolbar$$1.prototype.showPageNavigationTool=function(enablePageNavigationTool){this.isNavigationToolVisible=enablePageNavigationTool;this.applyHideToToolbar(enablePageNavigationTool,2,7);};Toolbar$$1.prototype.showMagnificationTool=function(enableMagnificationTool){this.isMagnificationToolVisible=enableMagnificationTool;this.applyHideToToolbar(enableMagnificationTool,9,11);};Toolbar$$1.prototype.showSelectionTool=function(enableSelectionTool){this.isSelectionBtnVisible=enableSelectionTool;this.applyHideToToolbar(enableSelectionTool,13,13);};Toolbar$$1.prototype.showScrollingTool=function(enableScrollingTool){this.isScrollingBtnVisible=enableScrollingTool;this.applyHideToToolbar(enableScrollingTool,14,14);};Toolbar$$1.prototype.showDownloadOption=function(enableDownloadOption){this.isDownloadBtnVisible=enableDownloadOption;if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.applyHideToToolbar(enableDownloadOption,26,26);}else{this.applyHideToToolbar(enableDownloadOption,5,5);}};Toolbar$$1.prototype.showPrintOption=function(enablePrintOption){this.isPrintBtnVisible=enablePrintOption;this.applyHideToToolbar(enablePrintOption,25,25);};Toolbar$$1.prototype.showSearchOption=function(enableSearchOption){this.isSearchBtnVisible=enableSearchOption;if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.applyHideToToolbar(enableSearchOption,22,22);}else{this.applyHideToToolbar(enableSearchOption,5,5);}};Toolbar$$1.prototype.showUndoRedoTool=function(isEnable){this.isUndoRedoBtnsVisible=isEnable;if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.applyHideToToolbar(isEnable,16,17);}else{this.applyHideToToolbar(isEnable,2,3);}};Toolbar$$1.prototype.showCommentOption=function(isEnable){if(!this.pdfViewer.enableStickyNotesAnnotation){this.isCommentBtnVisible=isEnable;this.applyHideToToolbar(this.pdfViewer.enableStickyNotesAnnotation,18,19);}else{this.isCommentBtnVisible=isEnable;this.applyHideToToolbar(isEnable,18,19);}};Toolbar$$1.prototype.showAnnotationEditTool=function(isEnable){this.isAnnotationEditBtnVisible=isEnable;if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.applyHideToToolbar(isEnable,23,23);}else{this.applyHideToToolbar(isEnable,4,4);}};Toolbar$$1.prototype.showFormDesignerEditTool=function(isEnable){this.isFormDesignerEditBtnVisible=isEnable;this.applyHideToToolbar(isEnable,24,24);};Toolbar$$1.prototype.showSubmitForm=function(isEnable){this.isSubmitbtnvisible=isEnable;this.applyHideToToolbar(isEnable,20,21);};Toolbar$$1.prototype.enableOpenOption=function(enableOpenOption){this.toolbar.enableItems(this.openDocumentItem.parentElement,enableOpenOption);};Toolbar$$1.prototype.enablePageNavigationTool=function(enablePageNavigationTool){this.toolbar.enableItems(this.firstPageItem.parentElement,enablePageNavigationTool);this.toolbar.enableItems(this.previousPageItem.parentElement,enablePageNavigationTool);this.toolbar.enableItems(this.nextPageItem.parentElement,enablePageNavigationTool);this.toolbar.enableItems(this.lastPageItem.parentElement,enablePageNavigationTool);this.currentPageBox.readonly=!enablePageNavigationTool;};Toolbar$$1.prototype.enableMagnificationTool=function(enableMagnificationTool){this.toolbar.enableItems(this.zoomInItem.parentElement,enableMagnificationTool);this.toolbar.enableItems(this.zoomOutItem.parentElement,enableMagnificationTool);this.zoomDropDown.readonly=!enableMagnificationTool;};Toolbar$$1.prototype.enableSelectionTool=function(enableSelectionTool){this.toolbar.enableItems(this.textSelectItem.parentElement,enableSelectionTool);};Toolbar$$1.prototype.enableScrollingTool=function(enableScrollingTool){this.toolbar.enableItems(this.panItem.parentElement,enableScrollingTool);};Toolbar$$1.prototype.enableDownloadOption=function(enableDownloadOption){this.toolbar.enableItems(this.downloadItem.parentElement,enableDownloadOption);};Toolbar$$1.prototype.enablePrintOption=function(enablePrintOption){this.toolbar.enableItems(this.printItem.parentElement,enablePrintOption);};Toolbar$$1.prototype.enableSearchOption=function(enableSearchOption){this.toolbar.enableItems(this.textSearchItem.parentElement,enableSearchOption);};Toolbar$$1.prototype.enableUndoRedoTool=function(isEnable){this.toolbar.enableItems(this.undoItem.parentElement,isEnable);this.toolbar.enableItems(this.redoItem.parentElement,isEnable);};Toolbar$$1.prototype.enableAnnotationEditTool=function(isEnable){this.toolbar.enableItems(this.annotationItem.parentElement,isEnable);};Toolbar$$1.prototype.enableFormDesignerEditTool=function(isEnable){this.toolbar.enableItems(this.formDesignerItem.parentElement,isEnable);};Toolbar$$1.prototype.enableCommentsTool=function(isEnable){if(this.pdfViewer.enableStickyNotesAnnotation){this.toolbar.enableItems(this.annotationItem.parentElement,isEnable);}};/**
     * @private
     */Toolbar$$1.prototype.resetToolbar=function(){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.currentPageBox.min=0;this.currentPageBox.value=0;this.updateTotalPage();this.updateToolbarItems();if(this.annotationToolbarModule){this.annotationToolbarModule.clear();}else{if(this.annotationToolbarModule){if(this.annotationToolbarModule.propertyToolbar){this.annotationToolbarModule.propertyToolbar.destroy();}// eslint:disable-next-line
var commentsContainer=document.getElementById(this.pdfViewer.dataId+'_commentscontentcontainer');if(commentsContainer){commentsContainer.innerHTML='';}}}}};/**
     * @private
     */Toolbar$$1.prototype.updateToolbarItems=function(){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(this.toolbar){if(this.pdfViewerBase.pageCount===0){this.toolbar.enableItems(this.downloadItem.parentElement,false);this.toolbar.enableItems(this.printItem.parentElement,false);this.toolbar.enableItems(this.commentItem.parentElement,false);this.updateUndoRedoButtons();this.updateNavigationButtons();this.toolbar.enableItems(this.zoomInItem.parentElement,false);this.toolbar.enableItems(this.zoomOutItem.parentElement,false);if(this.pdfViewer.magnificationModule){this.zoomDropDown.readonly=true;}this.toolbar.enableItems(this.submitItem.parentElement,false);this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'),false);this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'),false);this.toolbar.enableItems(this.textSelectItem.parentElement,false);this.toolbar.enableItems(this.annotationItem.parentElement,false);this.toolbar.enableItems(this.formDesignerItem.parentElement,false);this.toolbar.enableItems(this.panItem.parentElement,false);this.toolbar.enableItems(this.textSearchItem.parentElement,false);this.deSelectItem(this.annotationItem);if(this.annotationToolbarModule){this.annotationToolbarModule.resetToolbar();}this.deSelectItem(this.formDesignerItem);}else if(this.pdfViewerBase.pageCount>0){this.toolbar.enableItems(this.downloadItem.parentElement,true);this.toolbar.enableItems(this.printItem.parentElement,true);this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'),true);this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'),true);this.updateUndoRedoButtons();this.updateNavigationButtons();this.updateZoomButtons();if(this.pdfViewer.magnificationModule){this.zoomDropDown.readonly=false;}this.updateInteractionItems();// modify this condition if new annotation types are added.
if(this.pdfViewer.annotationModule&&this.pdfViewer.enableAnnotation){this.toolbar.enableItems(this.annotationItem.parentElement,true);}if(this.pdfViewer.formDesignerModule&&this.pdfViewer.enableFormDesigner){this.toolbar.enableItems(this.formDesignerItem.parentElement,true);}if(this.pdfViewer.textSearchModule&&this.pdfViewer.enableTextSearch){this.toolbar.enableItems(this.textSearchItem.parentElement,true);}if(this.pdfViewer.annotationModule&&this.pdfViewer.enableStickyNotesAnnotation){this.toolbar.enableItems(this.commentItem.parentElement,true);}}if(this.pdfViewer.toolbarSettings.annotationToolbarItems){// eslint-disable-next-line max-len
if(this.pdfViewer.toolbarSettings.annotationToolbarItems.length===0||!this.pdfViewer.annotationModule||!this.pdfViewer.enableAnnotationToolbar){this.enableToolbarItem(['AnnotationEditTool'],false);}}if(this.pdfViewer.toolbarSettings.formDesignerToolbarItems){// eslint-disable-next-line max-len
if(this.pdfViewer.toolbarSettings.formDesignerToolbarItems.length===0||!this.pdfViewer.formDesignerModule||!this.pdfViewer.enableFormDesignerToolbar){this.enableToolbarItem(['FormDesignerEditTool'],false);}}if(!this.pdfViewer.enableDownload){this.enableDownloadOption(false);}if(!this.pdfViewer.enablePrint){this.enablePrintOption(false);}}}else{if(this.pdfViewerBase.pageCount===0){this.toolbar.enableItems(this.textSearchItem.parentElement,false);this.toolbar.enableItems(this.moreOptionItem.parentElement,false);this.toolbar.enableItems(this.annotationItem.parentElement,false);}else if(this.pdfViewerBase.pageCount>0){this.toolbar.enableItems(this.textSearchItem.parentElement,true);this.toolbar.enableItems(this.moreOptionItem.parentElement,true);if(this.pdfViewer.annotationModule&&this.pdfViewer.enableAnnotation){this.toolbar.enableItems(this.annotationItem.parentElement,true);}if(!this.pdfViewer.annotationModule||!this.pdfViewer.enableAnnotationToolbar){this.enableToolbarItem(['AnnotationEditTool'],false);}this.updateUndoRedoButtons();}}this.pdfViewer.viewerBase.blazorUIAdaptor.canUndoRedo();};/**
     * @private
     */Toolbar$$1.prototype.updateNavigationButtons=function(){if(this.pdfViewer.navigationModule&&!this.isPageNavigationToolDisabled){if(this.pdfViewerBase.pageCount===0||this.pdfViewerBase.currentPageNumber===1&&this.pdfViewerBase.pageCount===1){this.toolbar.enableItems(this.firstPageItem.parentElement,false);this.toolbar.enableItems(this.previousPageItem.parentElement,false);this.toolbar.enableItems(this.nextPageItem.parentElement,false);this.toolbar.enableItems(this.lastPageItem.parentElement,false);}else if(this.pdfViewerBase.currentPageNumber===1&&this.pdfViewerBase.pageCount>0){this.toolbar.enableItems(this.firstPageItem.parentElement,false);this.toolbar.enableItems(this.previousPageItem.parentElement,false);this.toolbar.enableItems(this.nextPageItem.parentElement,true);this.toolbar.enableItems(this.lastPageItem.parentElement,true);}else if(this.pdfViewerBase.currentPageNumber===this.pdfViewerBase.pageCount&&this.pdfViewerBase.pageCount>0){this.toolbar.enableItems(this.firstPageItem.parentElement,true);this.toolbar.enableItems(this.previousPageItem.parentElement,true);this.toolbar.enableItems(this.nextPageItem.parentElement,false);this.toolbar.enableItems(this.lastPageItem.parentElement,false);}else if(this.pdfViewerBase.currentPageNumber>1&&this.pdfViewerBase.currentPageNumber<this.pdfViewerBase.pageCount){this.toolbar.enableItems(this.firstPageItem.parentElement,true);this.toolbar.enableItems(this.previousPageItem.parentElement,true);this.toolbar.enableItems(this.nextPageItem.parentElement,true);this.toolbar.enableItems(this.lastPageItem.parentElement,true);}}else{this.toolbar.enableItems(this.firstPageItem.parentElement,false);this.toolbar.enableItems(this.previousPageItem.parentElement,false);this.toolbar.enableItems(this.nextPageItem.parentElement,false);this.toolbar.enableItems(this.lastPageItem.parentElement,false);this.currentPageBox.readonly=true;}};/**
     * @private
     */Toolbar$$1.prototype.updateZoomButtons=function(){// eslint-disable-next-line max-len
if(this.pdfViewer.magnificationModule&&!this.isMagnificationToolDisabled&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)){if(this.pdfViewer.magnificationModule.zoomFactor<=0.1){this.toolbar.enableItems(this.zoomInItem.parentElement,true);this.toolbar.enableItems(this.zoomOutItem.parentElement,false);}else if(this.pdfViewer.magnificationModule.zoomFactor>=4){this.toolbar.enableItems(this.zoomInItem.parentElement,false);this.toolbar.enableItems(this.zoomOutItem.parentElement,true);}else{this.toolbar.enableItems(this.zoomInItem.parentElement,true);this.toolbar.enableItems(this.zoomOutItem.parentElement,true);}}};/**
     * @private
     */Toolbar$$1.prototype.updateUndoRedoButtons=function(){if(this.pdfViewer.annotationModule){if(this.pdfViewerBase.pageCount>0){if(sf.base.isBlazor()){this.enableCollectionAvailableInBlazor(this.pdfViewer.annotationModule.actionCollection,'undo');this.enableCollectionAvailableInBlazor(this.pdfViewer.annotationModule.redoCollection,'redo');}else{this.enableCollectionAvailable(this.pdfViewer.annotationModule.actionCollection,this.undoItem.parentElement);this.enableCollectionAvailable(this.pdfViewer.annotationModule.redoCollection,this.redoItem.parentElement);}}else{if(sf.base.isBlazor()){//this.pdfViewer._dotnetInstance.invokeMethodAsync('DisableUndoRedoButton', null);
this.pdfViewerBase.blazorUIAdaptor.disableUndoRedoButton();}else{this.disableUndoRedoButtons();}}}else{if(sf.base.isBlazor()){//this.pdfViewer._dotnetInstance.invokeMethodAsync('DisableUndoRedoButton', null);
this.pdfViewerBase.blazorUIAdaptor.disableUndoRedoButton();}else{this.disableUndoRedoButtons();}}};// eslint-disable-next-line
Toolbar$$1.prototype.enableCollectionAvailable=function(collection,item){if(collection.length>0){this.toolbar.enableItems(item,true);}else{this.toolbar.enableItems(item,false);}};// eslint-disable-next-line
Toolbar$$1.prototype.enableCollectionAvailableInBlazor=function(collection,item){if(collection.length>0){//this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateUndoRedoButton', item, true);
this.pdfViewerBase.blazorUIAdaptor.updateUndoRedoButton(item,true);}else{// this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateUndoRedoButton', item, false);
this.pdfViewerBase.blazorUIAdaptor.updateUndoRedoButton(item,false);}};Toolbar$$1.prototype.disableUndoRedoButtons=function(){this.toolbar.enableItems(this.undoItem.parentElement,false);this.toolbar.enableItems(this.redoItem.parentElement,false);};/**
     * @private
     */Toolbar$$1.prototype.destroy=function(){if(!sf.base.isBlazor()){this.unWireEvent();this.destroyComponent();if(this.moreDropDown){this.moreDropDown.destroy();}if(this.annotationToolbarModule){this.annotationToolbarModule.destroy();}if(this.formDesignerToolbarModule){this.formDesignerToolbarModule.destroy();}this.toolbar.destroy();this.toolbarElement.parentElement.removeChild(this.toolbarElement);}};Toolbar$$1.prototype.destroyComponent=function(){// eslint-disable-next-line
var componentElement=[this.openDocumentItem,this.firstPageItem,this.previousPageItem,this.nextPageItem,this.lastPageItem,this.currentPageBoxElement,this.zoomOutItem,this.zoomInItem,this.zoomDropdownItem,this.textSelectItem,this.panItem,this.submitItem,this.undoItem,this.redoItem,this.commentItem,this.textSearchItem,this.annotationItem,this.formDesignerItem,this.printItem,this.downloadItem];for(var i=0;i<componentElement.length;i++){if(componentElement[i]){this.destroyDependentComponent(componentElement[i]);}}};Toolbar$$1.prototype.destroyDependentComponent=function(component){if(component.ej2_instances){for(var i=component.ej2_instances.length-1;i>=0;i--){component.ej2_instances[i].destroy();}}};/**
     * @param pageIndex
     * @private
     */Toolbar$$1.prototype.updateCurrentPage=function(pageIndex){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(!sf.base.isBlazor()){if(this.currentPageBox.value===pageIndex){this.currentPageBoxElement.value=pageIndex.toString();}this.currentPageBox.value=pageIndex;}else{//this.pdfViewer._dotnetInstance.invokeMethodAsync('OnPageChanged', pageIndex);
this.pdfViewerBase.blazorUIAdaptor.pageChanged(pageIndex);}this.pdfViewerBase.currentPageNumber=pageIndex;this.pdfViewer.currentPageNumber=pageIndex;}else{this.pdfViewerBase.mobileSpanContainer.innerHTML=pageIndex.toString();this.pdfViewerBase.mobilecurrentPageContainer.innerHTML=pageIndex.toString();}};/**
     * @private
     */Toolbar$$1.prototype.updateTotalPage=function(){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(this.pdfViewerBase.pageCount>0){this.currentPageBox.min=1;}this.totalPageItem.textContent=this.pdfViewer.localeObj.getConstant('of')+this.pdfViewerBase.pageCount.toString();}};/**
     * @param event
     * @private
     */Toolbar$$1.prototype.openFileDialogBox=function(event){event.preventDefault();this.fileInputElement.click();};Toolbar$$1.prototype.createToolbar=function(controlWidth){var _this=this;// eslint-disable-next-line max-len
this.toolbarElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_toolbarContainer',className:'e-pv-toolbar'});this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.toolbar=new sf.navigations.Toolbar({clicked:this.toolbarClickHandler,width:'',height:'',overflowMode:'Popup',cssClass:'e-pv-toolbar-scroll',items:this.createToolbarItems(),created:function created(){_this.createZoomDropdown();_this.createNumericTextBox();_this.toolbar.refreshOverflow();}});this.toolbar.isStringTemplate=true;if(this.pdfViewer.enableRtl){this.toolbar.enableRtl=true;}this.toolbar.appendTo(this.toolbarElement);this.applyToolbarSettings();this.afterToolbarCreation();this.updateTotalPage();this.toolbarElement.addEventListener('keydown',this.onToolbarKeydown);}else{this.createToolbarItemsForMobile();this.afterToolbarCreationInMobile();if(this.pdfViewer.enableRtl){this.toolbar.enableRtl=true;}this.applyToolbarSettingsForMobile();this.disableUndoRedoButtons();}return this.toolbarElement;};// eslint-disable-next-line
Toolbar$$1.prototype.createToolbarItems=function(){var currentPageInputTemplate=this.createCurrentPageInputTemplate();var totalPageTemplate=this.createTotalPageTemplate();var zoomDropDownTemplateString=this.createZoomDropdownElement();// eslint-disable-next-line
var items=[];var submitButton='<button id="'+this.pdfViewer.dataId+'_submitForm" class="e-tbar-btn" style="font-size:15px"><span id="'+this.pdfViewer.dataId+'_submitFormSpan" class="e-tbar-btn-text e-pv-submitform-text">'+this.pdfViewer.localeObj.getConstant('SubmitForm')+'</span></button>';// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-open-document-icon e-pv-icon',cssClass:'e-pv-open-document-container',id:this.pdfViewer.dataId+'_open',text:this.pdfViewer.localeObj.getConstant('Open text'),align:'Left'});items.push({type:'Separator',align:'Left',cssClass:'e-pv-open-separator-container'});if(!this.pdfViewer.enableRtl){// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-first-page-navigation-icon e-pv-icon',cssClass:'e-pv-first-page-navigation-container',id:this.pdfViewer.dataId+'_firstPage',text:this.pdfViewer.localeObj.getConstant('First text'),align:'Left'});items.push({prefixIcon:'e-pv-previous-page-navigation-icon e-pv-icon',cssClass:'e-pv-previous-page-navigation-container',id:this.pdfViewer.dataId+'_previousPage',text:this.pdfViewer.localeObj.getConstant('Previous text'),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-next-page-navigation-icon e-pv-icon',cssClass:'e-pv-next-page-navigation-container',id:this.pdfViewer.dataId+'_nextPage',text:this.pdfViewer.localeObj.getConstant('Next text'),align:'Left'});items.push({prefixIcon:'e-pv-last-page-navigation-icon e-pv-icon',cssClass:'e-pv-last-page-navigation-container',id:this.pdfViewer.dataId+'_lastPage',text:this.pdfViewer.localeObj.getConstant('Last text'),align:'Left'});items.push({template:currentPageInputTemplate,align:'Left',cssClass:'e-pv-current-page-container'});items.push({template:totalPageTemplate,align:'Left',cssClass:'e-pv-total-page-container'});}else{// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-last-page-navigation-icon e-pv-icon',cssClass:'e-pv-last-page-navigation-container',id:this.pdfViewer.dataId+'_firstPage',text:this.pdfViewer.localeObj.getConstant('First text'),align:'Left'});items.push({prefixIcon:'e-pv-next-page-navigation-icon e-pv-icon',cssClass:'e-pv-next-page-navigation-container',id:this.pdfViewer.dataId+'_previousPage',text:this.pdfViewer.localeObj.getConstant('Previous text'),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-previous-page-navigation-icon e-pv-icon',cssClass:'e-pv-previous-page-navigation-container',id:this.pdfViewer.dataId+'_nextPage',text:this.pdfViewer.localeObj.getConstant('Next text'),align:'Left'});items.push({prefixIcon:'e-pv-first-page-navigation-icon e-pv-icon',cssClass:'e-pv-first-page-navigation-container',id:this.pdfViewer.dataId+'_lastPage',text:this.pdfViewer.localeObj.getConstant('Last text'),align:'Left'});items.push({template:totalPageTemplate,align:'Left',cssClass:'e-pv-total-page-container'});items.push({template:currentPageInputTemplate,align:'Left',cssClass:'e-pv-current-page-container'});}items.push({type:'Separator',align:'Left',cssClass:'e-pv-navigation-separator-container'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-zoom-out-icon e-pv-icon',cssClass:'e-pv-zoom-out-container',id:this.pdfViewer.dataId+'_zoomOut',text:this.pdfViewer.localeObj.getConstant('Zoom out text'),align:'Left'});items.push({prefixIcon:'e-pv-zoom-in-icon e-pv-icon',cssClass:'e-pv-zoom-in-container',id:this.pdfViewer.dataId+'_zoomIn',text:this.pdfViewer.localeObj.getConstant('Zoom in text'),align:'Left'});items.push({template:zoomDropDownTemplateString,cssClass:'e-pv-zoom-drop-down-container',align:'Left'});items.push({type:'Separator',align:'Left',cssClass:'e-pv-magnification-separator-container'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-text-select-tool-icon e-pv-icon',cssClass:'e-pv-text-select-tool-container',id:this.pdfViewer.dataId+'_selectTool',text:this.pdfViewer.localeObj.getConstant('Selection text')});items.push({prefixIcon:'e-pv-pan-tool-icon e-pv-icon',cssClass:'e-pv-pan-tool-container',id:this.pdfViewer.dataId+'_handTool',text:this.pdfViewer.localeObj.getConstant('Pan text')});items.push({type:'Separator',align:'Left',cssClass:'e-pv-pan-separator-container'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-undo-icon e-pv-icon',cssClass:'e-pv-undo-container',id:this.pdfViewer.dataId+'_undo',text:this.pdfViewer.localeObj.getConstant('Undo'),align:'Left'});items.push({prefixIcon:'e-pv-redo-icon e-pv-icon',cssClass:'e-pv-redo-container',id:this.pdfViewer.dataId+'_redo',text:this.pdfViewer.localeObj.getConstant('Redo'),align:'Left'});items.push({type:'Separator',align:'Left',cssClass:'e-pv-undo-separator-container'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-comment-icon e-pv-icon',cssClass:'e-pv-comment-container',id:this.pdfViewer.dataId+'_comment',text:this.pdfViewer.localeObj.getConstant('Add Comments'),align:'Left'});items.push({type:'Separator',align:'Left',cssClass:'e-pv-comment-separator-container'});items.push({template:submitButton,cssClass:'e-pv-submit',align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-text-search-icon e-pv-icon',cssClass:'e-pv-text-search-container',id:this.pdfViewer.dataId+'_search',text:this.pdfViewer.localeObj.getConstant('Search text'),align:'Right'});items.push({prefixIcon:'e-pv-annotation-icon e-pv-icon',cssClass:'e-pv-annotation-container',id:this.pdfViewer.dataId+'_annotation',text:this.pdfViewer.localeObj.getConstant('Annotation Edit text'),align:'Right'});items.push({prefixIcon:'e-pv-formdesigner-icon e-pv-icon',cssClass:'e-pv-formdesigner-container',id:this.pdfViewer.dataId+'_formdesigner',text:this.pdfViewer.localeObj.getConstant('FormDesigner Edit text'),align:'Right'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-print-document-icon e-pv-icon',cssClass:'e-pv-print-document-container',id:this.pdfViewer.dataId+'_print',text:this.pdfViewer.localeObj.getConstant('Print text'),align:'Right'});items.push({prefixIcon:'e-pv-download-document-icon e-pv-icon',cssClass:'e-pv-download-document-container',id:this.pdfViewer.dataId+'_download',text:this.pdfViewer.localeObj.getConstant('Download'),align:'Right'});return items;};Toolbar$$1.prototype.afterToolbarCreationInMobile=function(){this.itemsContainer=this.toolbar.element.childNodes[0];this.itemsContainer.id=this.pdfViewer.dataId+'_toolbarItemsContainer';this.openDocumentItem=this.addClassToolbarItem('_open','e-pv-open-document',this.pdfViewer.localeObj.getConstant('Open'));this.undoItem=this.addClassToolbarItem('_undo','e-pv-undo',this.pdfViewer.localeObj.getConstant('Undo'));this.redoItem=this.addClassToolbarItem('_redo','e-pv-redo',this.pdfViewer.localeObj.getConstant('Redo'));this.annotationItem=this.addClassToolbarItem('_annotation','e-pv-annotation',this.pdfViewer.localeObj.getConstant('Annotation'));this.textSearchItem=this.addClassToolbarItem('_search','e-pv-text-search',this.pdfViewer.localeObj.getConstant('Text Search'));};Toolbar$$1.prototype.afterToolbarCreation=function(){this.itemsContainer=this.toolbar.element.childNodes[0];this.itemsContainer.id=this.pdfViewer.dataId+'_toolbarItemsContainer';this.openDocumentItem=this.addClassToolbarItem('_open','e-pv-open-document',this.pdfViewer.localeObj.getConstant('Open'));this.undoItem=this.addClassToolbarItem('_undo','e-pv-undo',this.pdfViewer.localeObj.getConstant('Undo'));this.redoItem=this.addClassToolbarItem('_redo','e-pv-redo',this.pdfViewer.localeObj.getConstant('Redo'));if(!this.pdfViewer.enableRtl){// eslint-disable-next-line max-len
this.firstPageItem=this.addClassToolbarItem('_firstPage','e-pv-first-page-navigation',this.pdfViewer.localeObj.getConstant('Go To First Page'));this.previousPageItem=this.addClassToolbarItem('_previousPage','e-pv-previous-page-navigation',this.pdfViewer.localeObj.getConstant('Previous Page'));// eslint-disable-next-line max-len
this.nextPageItem=this.addClassToolbarItem('_nextPage','e-pv-next-page-navigation',this.pdfViewer.localeObj.getConstant('Next Page'));this.lastPageItem=this.addClassToolbarItem('_lastPage','e-pv-last-page-navigation',this.pdfViewer.localeObj.getConstant('Go To Last Page'));}else{// eslint-disable-next-line max-len
this.firstPageItem=this.addClassToolbarItem('_firstPage','e-pv-last-page-navigation',this.pdfViewer.localeObj.getConstant('Go To First Page'));this.previousPageItem=this.addClassToolbarItem('_previousPage','e-pv-next-page-navigation',this.pdfViewer.localeObj.getConstant('Previous Page'));// eslint-disable-next-line max-len
this.nextPageItem=this.addClassToolbarItem('_nextPage','e-pv-previous-page-navigation',this.pdfViewer.localeObj.getConstant('Next Page'));this.lastPageItem=this.addClassToolbarItem('_lastPage','e-pv-first-page-navigation',this.pdfViewer.localeObj.getConstant('Go To Last Page'));}this.zoomOutItem=this.addClassToolbarItem('_zoomOut','e-pv-zoom-out',this.pdfViewer.localeObj.getConstant('Zoom Out'));this.zoomInItem=this.addClassToolbarItem('_zoomIn','e-pv-zoom-in',this.pdfViewer.localeObj.getConstant('Zoom In'));// eslint-disable-next-line max-len
this.textSelectItem=this.addClassToolbarItem('_selectTool','e-pv-text-select-tool',this.pdfViewer.localeObj.getConstant('Text Selection'));this.panItem=this.addClassToolbarItem('_handTool','e-pv-pan-tool',this.pdfViewer.localeObj.getConstant('Panning'));this.commentItem=this.addClassToolbarItem('_comment','e-pv-comment',this.pdfViewer.localeObj.getConstant('Add Comments'));// eslint-disable-next-line max-len
this.textSearchItem=this.addClassToolbarItem('_search','e-pv-text-search',this.pdfViewer.localeObj.getConstant('Text Search'));this.annotationItem=this.addClassToolbarItem('_annotation','e-pv-annotation',this.pdfViewer.localeObj.getConstant('Annotation'));this.formDesignerItem=this.addClassToolbarItem('_formdesigner','e-pv-formdesigner',this.pdfViewer.localeObj.getConstant('FormDesigner'));// eslint-disable-next-line max-len
this.printItem=this.addClassToolbarItem('_print','e-pv-print-document',this.pdfViewer.localeObj.getConstant('Print'));this.downloadItem=this.addClassToolbarItem('_download','e-pv-download-document',this.pdfViewer.localeObj.getConstant('Download file'));this.zoomDropdownItem=this.pdfViewerBase.getElement('_zoomDropDown');this.createTooltip(this.zoomDropdownItem,this.pdfViewer.localeObj.getConstant('Zoom'));this.zoomDropdownItem.setAttribute('aria-label',this.pdfViewer.localeObj.getConstant('Zoom'));// eslint-disable-next-line max-len
this.addPropertiesToolItemContainer(this.zoomDropdownItem.parentElement.parentElement,null,'_zoomDropDownContainer');this.pdfViewerBase.getElement('_zoomDropDownContainer').style.minWidth='';this.createTooltip(this.currentPageBoxElement,this.pdfViewer.localeObj.getConstant('Page Number'));this.currentPageBoxElement.setAttribute('aria-label',this.pdfViewer.localeObj.getConstant('Page Number'));this.submitItem=this.pdfViewerBase.getElement('_submitForm');this.addPropertiesToolItemContainer(this.submitItem.parentElement,'e-pv-submit','_submitForm');this.createTooltip(this.submitItem,this.pdfViewer.localeObj.getConstant('SubmitForm'));// eslint-disable-next-line max-len
this.addPropertiesToolItemContainer(this.currentPageBoxElement.parentElement.parentElement,'e-pv-current-page-container','_currentPageInputContainer');this.pdfViewerBase.getElement('_currentPageInputContainer').style.minWidth='20px';this.totalPageItem=this.pdfViewerBase.getElement('_totalPage');this.addPropertiesToolItemContainer(this.totalPageItem.parentElement,'e-pv-total-page-container','_totalPageContainer');};/**
     * @param idString
     * @param className
     * @param tooltipText
     * @param idString
     * @param className
     * @param tooltipText
     * @private
     */Toolbar$$1.prototype.addClassToolbarItem=function(idString,className,tooltipText){var element=this.pdfViewerBase.getElement(idString);element.classList.add(className);element.classList.add('e-pv-tbar-btn');element.setAttribute('aria-label',tooltipText);element.parentElement.classList.add(className+'-container');element.parentElement.classList.add('e-popup-text');element.parentElement.id=this.pdfViewer.dataId+idString+'Container';if(element.childNodes.length>0){var spanElement=element.childNodes[0];spanElement.id=this.pdfViewer.dataId+idString+'Icon';spanElement.classList.remove('e-icons');spanElement.classList.remove('e-btn-icon');if(this.pdfViewer.enableRtl){spanElement.classList.add('e-right');}var textElement=element.childNodes[1];if(textElement){if(textElement.classList.contains('e-tbar-btn-text')){textElement.id=this.pdfViewer.dataId+idString+'Text';}}}element.style.width='';this.createTooltip(element,tooltipText);return element;};Toolbar$$1.prototype.addPropertiesToolItemContainer=function(element,className,idString){if(className!==null){element.classList.add(className);}element.classList.add('e-popup-text');element.id=this.pdfViewer.dataId+idString;};Toolbar$$1.prototype.createZoomDropdownElement=function(){// eslint-disable-next-line max-len
var zoomDropdownElement=this.createToolbarItem('input',this.pdfViewer.dataId+'_zoomDropDown',null);return zoomDropdownElement.outerHTML;};Toolbar$$1.prototype.createZoomDropdown=function(){// eslint-disable-next-line max-len
var items=[{percent:'10%',id:'0'},{percent:'25%',id:'1'},{percent:'50%',id:'2'},{percent:'75%',id:'3'},{percent:'100%',id:'4'},{percent:'125%',id:'5'},// eslint-disable-next-line max-len
{percent:'150%',id:'6'},{percent:'200%',id:'7'},{percent:'400%',id:'8'},{percent:this.pdfViewer.localeObj.getConstant('Fit Page'),id:'9'},{percent:this.pdfViewer.localeObj.getConstant('Fit Width'),id:'10'},{percent:this.pdfViewer.localeObj.getConstant('Automatic'),id:'11'}];// eslint-disable-next-line max-len
if(!this.pdfViewer.enableRtl){this.zoomDropDown=new sf.dropdowns.ComboBox({dataSource:items,text:'100%',fields:{text:'percent',value:'id'},readonly:true,cssClass:'e-pv-zoom-drop-down',popupHeight:'450px',showClearButton:false,open:this.openZoomDropdown.bind(this),select:function select(args){if(args.e.type=='keydown'&&args.itemData.text!==this.zoomDropDown.element.value){args.cancel=true;}}});}else{this.zoomDropDown=new sf.dropdowns.ComboBox({dataSource:items,text:'100%',enableRtl:true,fields:{text:'percent',value:'id'},readonly:true,cssClass:'e-pv-zoom-drop-down-rtl',popupHeight:'450px',showClearButton:false,open:this.openZoomDropdown.bind(this),select:function select(args){if(args.e.type=='keydown'&&args.itemData.text!==this.zoomDropDown.element.value){args.cancel=true;}}});}this.zoomDropDown.appendTo(this.pdfViewerBase.getElement('_zoomDropDown'));};Toolbar$$1.prototype.createCurrentPageInputTemplate=function(){// eslint-disable-next-line max-len
var goToPageElement=this.createToolbarItem('input',this.pdfViewer.dataId+'_currentPageInput',null);return goToPageElement.outerHTML;};Toolbar$$1.prototype.createTotalPageTemplate=function(){// eslint-disable-next-line max-len
var totalPageElement=this.createToolbarItem('span',this.pdfViewer.dataId+'_totalPage','e-pv-total-page');return totalPageElement.outerHTML;};Toolbar$$1.prototype.createNumericTextBox=function(){this.currentPageBox=new sf.inputs.NumericTextBox({value:0,format:'##',cssClass:'e-pv-current-page-box',showSpinButton:false});this.currentPageBoxElement=this.pdfViewerBase.getElement('_currentPageInput');this.currentPageBox.appendTo(this.currentPageBoxElement);};Toolbar$$1.prototype.createToolbarItemsForMobile=function(){this.toolbarElement.classList.add('e-pv-mobile-toolbar');var template='<button id="'+this.pdfViewer.dataId+'_more_option" class="e-tbar-btn"></button>';this.toolbar=new sf.navigations.Toolbar({// eslint-disable-next-line max-len
items:[{prefixIcon:'e-pv-open-document-icon e-pv-icon',tooltipText:this.pdfViewer.localeObj.getConstant('Open'),id:this.pdfViewer.dataId+'_open'},{type:'Separator',align:'Left'},// eslint-disable-next-line max-len
{prefixIcon:'e-pv-undo-icon e-pv-icon',tooltipText:this.pdfViewer.localeObj.getConstant('Undo'),id:this.pdfViewer.dataId+'_undo'},// eslint-disable-next-line max-len
{prefixIcon:'e-pv-redo-icon e-pv-icon',tooltipText:this.pdfViewer.localeObj.getConstant('Redo'),id:this.pdfViewer.dataId+'_redo'},// eslint-disable-next-line max-len
{prefixIcon:'e-pv-annotation-icon e-pv-icon',cssClass:'e-pv-annotation-container',tooltipText:this.pdfViewer.localeObj.getConstant('Annotation'),id:this.pdfViewer.dataId+'_annotation',align:'Right'},// eslint-disable-next-line max-len
{prefixIcon:'e-pv-text-search-icon e-pv-icon',tooltipText:this.pdfViewer.localeObj.getConstant('Text Search'),id:this.pdfViewer.dataId+'_search',align:'Right'},{template:template,align:'Right'}],clicked:this.toolbarClickHandler,width:'',height:'',overflowMode:'Popup'});this.toolbar.isStringTemplate=true;this.toolbar.appendTo(this.toolbarElement);this.openDocumentItem=this.pdfViewerBase.getElement('_open');this.openDocumentItem.classList.add('e-pv-open-document');this.openDocumentItem.firstElementChild.id=this.pdfViewer.dataId+'_openIcon';this.annotationItem=this.pdfViewerBase.getElement('_annotation');this.annotationItem.classList.add('e-pv-annotation');this.annotationItem.firstElementChild.id=this.pdfViewer.dataId+'_annotationIcon';this.textSearchItem=this.pdfViewerBase.getElement('_search');this.textSearchItem.classList.add('e-pv-text-search');this.textSearchItem.firstElementChild.id=this.pdfViewer.dataId+'_searchIcon';this.undoItem=this.pdfViewerBase.getElement('_undo');this.undoItem.classList.add('e-pv-undo');this.redoItem=this.pdfViewerBase.getElement('_redo');this.redoItem.classList.add('e-pv-redo');this.redoItem.firstElementChild.id=this.pdfViewer.dataId+'_redoIcon';this.undoItem.firstElementChild.id=this.pdfViewer.dataId+'_undoIcon';this.createMoreOption(this.pdfViewer.dataId+'_more_option');};Toolbar$$1.prototype.createMoreOption=function(idString){var _this=this;this.moreOptionItem=document.getElementById(idString);var items=[{text:this.pdfViewer.localeObj.getConstant('Download'),id:this.pdfViewer.dataId+'_menu_download',iconCss:'e-icons e-pv-download-document-icon e-pv-icon'},{text:this.pdfViewer.localeObj.getConstant('Bookmarks'),id:this.pdfViewer.dataId+'_menu_bookmarks',iconCss:'e-icons e-pv-bookmark-icon e-pv-icon'}];this.moreDropDown=new sf.splitbuttons.DropDownButton({items:items,iconCss:'e-pv-more-icon e-pv-icon',cssClass:'e-caret-hide',open:function open(args){var dropdownButtonPosition=_this.moreDropDown.element.getBoundingClientRect();// eslint-disable-next-line max-len
if(!_this.pdfViewer.enableRtl){args.element.parentElement.style.left=dropdownButtonPosition.left+dropdownButtonPosition.width-args.element.parentElement.offsetWidth+'px';}},select:function select(args){switch(args.item.id){case _this.pdfViewer.dataId+'_menu_download':_this.pdfViewerBase.download();break;case _this.pdfViewer.dataId+'_menu_bookmarks':_this.showToolbar(false);_this.pdfViewerBase.navigationPane.createNavigationPaneMobile('bookmarks');break;default:break;}},beforeItemRender:function beforeItemRender(args){if(args.item.id===_this.pdfViewer.dataId+'_menu_bookmarks'){if(!_this.pdfViewer.bookmarkViewModule||!_this.pdfViewer.bookmarkViewModule.bookmarks){args.element.classList.add('e-disabled');}else{args.element.classList.remove('e-disabled');}}},close:function close(args){_this.moreOptionItem.blur();_this.pdfViewerBase.focusViewerContainer();}});this.moreDropDown.appendTo('#'+idString);};Toolbar$$1.prototype.createToolbarItem=function(elementName,id,className){var toolbarItem=sf.base.createElement(elementName,{id:id});if(className!==null){toolbarItem.className=className;}if(elementName==='input'&&id!==this.pdfViewer.dataId+'_zoomDropDown'){toolbarItem.type='text';}return toolbarItem;};/**
     * @param toolbarItem
     * @param tooltipText
     * @param toolbarItem
     * @param tooltipText
     * @private
     */Toolbar$$1.prototype.createTooltip=function(toolbarItem,tooltipText){if(tooltipText!==null){// eslint-disable-next-line
var tooltip=new sf.popups.Tooltip({content:tooltipText,opensOn:'Hover',beforeOpen:this.onTooltipBeforeOpen.bind(this)});tooltip.appendTo(toolbarItem);}};Toolbar$$1.prototype.onTooltipBeforeOpen=function(args){if(!this.pdfViewer.toolbarSettings.showTooltip&&this.toolbarElement.contains(args.target)){args.cancel=true;}if(this.annotationToolbarModule){// eslint-disable-next-line max-len
if(!this.pdfViewer.toolbarSettings.showTooltip&&(this.annotationToolbarModule.toolbarElement&&this.annotationToolbarModule.toolbarElement.contains(args.target)||this.annotationToolbarModule.shapeToolbarElement&&this.annotationToolbarModule.shapeToolbarElement.contains(args.target))){args.cancel=true;}}if(this.formDesignerToolbarModule){// eslint-disable-next-line max-len
if(!this.pdfViewer.toolbarSettings.showTooltip&&this.formDesignerToolbarModule.toolbarElement&&this.formDesignerToolbarModule.toolbarElement.contains(args.target)){args.cancel=true;}}};Toolbar$$1.prototype.createFileElement=function(toolbarElement){if(toolbarElement){if(!sf.base.isBlazor()){// eslint-disable-next-line max-len
this.fileInputElement=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_fileUploadElement',styles:'position:fixed; left:-100em',attrs:{'type':'file'}});this.fileInputElement.setAttribute('accept','.pdf');this.fileInputElement.setAttribute('aria-label','file upload element');}else{this.fileInputElement=this.pdfViewer.element.querySelector('.e-pv-fileupload-element');}if(toolbarElement){toolbarElement.appendChild(this.fileInputElement);}}};Toolbar$$1.prototype.wireEvent=function(){if(this.fileInputElement){this.fileInputElement.addEventListener('change',this.loadDocument);}if(!sf.base.isBlazor()){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.toolbarElement.addEventListener('mouseup',this.toolbarOnMouseup.bind(this));this.currentPageBoxElement.addEventListener('focusout',this.textBoxFocusOut);this.currentPageBoxElement.addEventListener('keypress',this.navigateToPage);this.zoomDropDown.change=this.zoomPercentSelect.bind(this);this.zoomDropDown.element.addEventListener('keypress',this.onZoomDropDownInput.bind(this));this.zoomDropDown.element.addEventListener('click',this.onZoomDropDownInputClick.bind(this));}}};Toolbar$$1.prototype.unWireEvent=function(){if(this.fileInputElement){this.fileInputElement.removeEventListener('change',this.loadDocument);}if((!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)&&!sf.base.isBlazor()){this.toolbarElement.removeEventListener('mouseup',this.toolbarOnMouseup.bind(this));this.currentPageBoxElement.removeEventListener('focusout',this.textBoxFocusOut);this.currentPageBoxElement.removeEventListener('keypress',this.navigateToPage);this.zoomDropDown.removeEventListener('change',this.zoomPercentSelect);this.zoomDropDown.element.removeEventListener('keypress',this.onZoomDropDownInput);this.zoomDropDown.element.removeEventListener('click',this.onZoomDropDownInputClick);}};/**
     * @param viewerWidth
     * @private
     */Toolbar$$1.prototype.onToolbarResize=function(viewerWidth){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewerBase.navigationPane.toolbarResize();}else{this.toolbar.refreshOverflow();}};Toolbar$$1.prototype.toolbarOnMouseup=function(event){if(event.target===this.itemsContainer||event.target===this.toolbarElement){this.pdfViewerBase.focusViewerContainer();}};Toolbar$$1.prototype.applyHideToToolbar=function(show,startIndex,endIndex){var isHide=!show;for(var index=startIndex;index<=endIndex;index++){if(this.toolbar.items[index]){var className=this.toolbar.items[index].cssClass;if(className&&className!==''){// Querying the toolbar item
var element=this.toolbar.element.querySelector('.'+className);if(element){this.toolbar.hideItem(element,isHide);}}else{this.toolbar.hideItem(index,isHide);}}}};Toolbar$$1.prototype.handleOpenIconClick=function(args){this.fileInputElement.click();if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){if(!sf.base.isBlazor()){args.originalEvent.target.blur();}this.pdfViewerBase.focusViewerContainer();}};// eslint-disable-next-line
Toolbar$$1.prototype.handleToolbarBtnClick=function(args){this.addInkAnnotation();this.deSelectCommentAnnotation();switch(args.originalEvent.target.id){case this.pdfViewer.dataId+'_open':case this.pdfViewer.dataId+'_openIcon':case this.pdfViewer.dataId+'_openText':this.handleOpenIconClick(args);break;case this.pdfViewer.dataId+'_download':case this.pdfViewer.dataId+'_downloadIcon':case this.pdfViewer.dataId+'_downloadText':this.pdfViewerBase.download();break;case this.pdfViewer.dataId+'_print':case this.pdfViewer.dataId+'_printIcon':case this.pdfViewer.dataId+'_printText':if(this.pdfViewer.printModule){this.pdfViewer.firePrintStart();}break;case this.pdfViewer.dataId+'_undo':case this.pdfViewer.dataId+'_undoIcon':case this.pdfViewer.dataId+'_undoText':if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.undo();}break;case this.pdfViewer.dataId+'_redo':case this.pdfViewer.dataId+'_redoIcon':case this.pdfViewer.dataId+'_redoText':if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.redo();}break;case this.pdfViewer.dataId+'_firstPage':case this.pdfViewer.dataId+'_firstPageIcon':case this.pdfViewer.dataId+'_firstPageText':if(this.pdfViewer.navigationModule){this.pdfViewer.navigationModule.goToFirstPage();}break;case this.pdfViewer.dataId+'_previousPage':case this.pdfViewer.dataId+'_previousPageIcon':case this.pdfViewer.dataId+'_previousPageText':if(this.pdfViewer.navigationModule){this.pdfViewer.navigationModule.goToPreviousPage();}break;case this.pdfViewer.dataId+'_nextPage':case this.pdfViewer.dataId+'_nextPageIcon':case this.pdfViewer.dataId+'_nextPageText':if(this.pdfViewer.navigationModule){this.pdfViewer.navigationModule.goToNextPage();}break;case this.pdfViewer.dataId+'_lastPage':case this.pdfViewer.dataId+'_lastPageIcon':case this.pdfViewer.dataId+'_lastPageText':if(this.pdfViewer.navigationModule){this.pdfViewer.navigationModule.goToLastPage();}break;case this.pdfViewer.dataId+'_zoomIn':case this.pdfViewer.dataId+'_zoomInIcon':case this.pdfViewer.dataId+'_zoomInText':this.pdfViewer.magnificationModule.zoomIn();break;case this.pdfViewer.dataId+'_zoomOut':case this.pdfViewer.dataId+'_zoomOutIcon':case this.pdfViewer.dataId+'_zoomOutText':this.pdfViewer.magnificationModule.zoomOut();break;case this.pdfViewer.dataId+'_selectTool':case this.pdfViewer.dataId+'_selectToolIcon':case this.pdfViewer.dataId+'_selectToolText':if(!this.isSelectionToolDisabled){this.pdfViewerBase.initiateTextSelectMode();this.updateInteractionTools(true);}break;case this.pdfViewer.dataId+'_handTool':case this.pdfViewer.dataId+'_handToolIcon':case this.pdfViewer.dataId+'_handToolText':if(!(this.isScrollingToolDisabled||this.getStampMode())){this.pdfViewerBase.initiatePanning();this.updateInteractionTools(false);}break;case this.pdfViewer.dataId+'_search':case this.pdfViewer.dataId+'_searchIcon':case this.pdfViewer.dataId+'_searchText':this.textSearchButtonHandler();break;case this.pdfViewer.dataId+'_annotation':case this.pdfViewer.dataId+'_annotationIcon':case this.pdfViewer.dataId+'_annotationText':this.initiateAnnotationMode(args.originalEvent.target.id);break;case this.pdfViewer.dataId+'_formdesigner':case this.pdfViewer.dataId+'_formdesignerIcon':case this.pdfViewer.dataId+'_formdesignerText':this.initiateFormDesignerMode();this.formDesignerToolbarModule.showHideDeleteIcon(false);break;case this.pdfViewer.dataId+'_comment':case this.pdfViewer.dataId+'_commentIcon':this.pdfViewerBase.isAddComment=true;this.pdfViewerBase.isCommentIconAdded=true;this.annotationToolbarModule.deselectAllItems();this.pdfViewer.annotation.triggerAnnotationUnselectEvent();this.addComments(args.originalEvent.target);break;case this.pdfViewer.dataId+'_submitForm':case this.pdfViewer.dataId+'_submitFormSpan':this.pdfViewerBase.exportFormFields();break;}};Toolbar$$1.prototype.addInkAnnotation=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}if(this.annotationToolbarModule){this.pdfViewer.toolbar.annotationToolbarModule.deselectInkAnnotation();this.annotationToolbarModule.inkAnnotationSelected=false;}};Toolbar$$1.prototype.deSelectCommentAnnotation=function(){if(!sf.base.isBlazor()){this.pdfViewer.toolbar.deSelectItem(this.commentItem);}else{this.pdfViewer.toolbar.deSelectItem(this.CommentElement);}this.pdfViewerBase.isCommentIconAdded=false;};/**
    * @private
    */ // eslint-disable-next-line
Toolbar$$1.prototype.addComments=function(targetElement){this.pdfViewerBase.isCommentIconAdded=true;this.pdfViewerBase.isAddComment=true;this.annotationToolbarModule.deselectAllItemsInBlazor();this.pdfViewer.annotation.triggerAnnotationUnselectEvent();var commentsButton=this.CommentElement;commentsButton.classList.add('e-pv-select');this.updateStampItems();document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+(this.pdfViewerBase.currentPageNumber-1)).addEventListener('mousedown',this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this));};Toolbar$$1.prototype.openZoomDropdown=function(){var toolbarData=this;if(document.fullscreen){if(sf.base.isBlazor()){// eslint-disable-next-line
var fullscreenElement=document.fullscreenElement;if(fullscreenElement&&fullscreenElement.tagName!=='BODY'&&fullscreenElement.tagName!=='HTML'){setTimeout(function(){// eslint-disable-next-line
var popupElement=document.getElementById(toolbarData.pdfViewer.element.id+"_zoomCombo_popup");var targetElement=document.getElementById(toolbarData.toolbarElement.id);// eslint-disable-next-line
if(popupElement&&targetElement&&popupElement.ej2_instances){targetElement.appendChild(popupElement);popupElement.ej2_instances[0].refreshPosition();}},100);}}else{var popupElement=document.getElementById(this.pdfViewer.dataId+"_zoomDropDown_popup");var targetElement=document.getElementById(this.toolbarElement.id);if(popupElement){targetElement.appendChild(popupElement);}}}};Toolbar$$1.prototype.onZoomDropDownInput=function(event){if((event.which<48||event.which>57)&&event.which!==8&&event.which!==13){event.preventDefault();return false;}else{if(event.which===13){event.preventDefault();var value=this.zoomDropDown.element.value;this.zoomDropDownChange(value);}return true;}};Toolbar$$1.prototype.onZoomDropDownInputClick=function(){this.zoomDropDown.element.select();};Toolbar$$1.prototype.zoomPercentSelect=function(args){if(this.pdfViewerBase.pageCount>0){if(args.isInteracted){if(args.itemData){// eslint-disable-next-line @typescript-eslint/no-explicit-any
var zoomText=args.itemData.percent;this.zoomDropDownChange(zoomText);}}else{this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor);}}};Toolbar$$1.prototype.zoomDropDownChange=function(zoomText){// eslint-disable-next-line max-len
if(zoomText!==this.pdfViewer.localeObj.getConstant('Fit Width')&&zoomText!==this.pdfViewer.localeObj.getConstant('Fit Page')&&zoomText!==this.pdfViewer.localeObj.getConstant('Automatic')){this.pdfViewer.magnificationModule.isAutoZoom=false;this.pdfViewer.magnificationModule.zoomTo(parseFloat(zoomText));this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor);this.zoomDropDown.focusOut();}else if(zoomText===this.pdfViewer.localeObj.getConstant('Fit Width')){this.pdfViewer.magnificationModule.isAutoZoom=false;this.pdfViewer.magnificationModule.fitToWidth();this.zoomDropDown.focusOut();}else if(zoomText===this.pdfViewer.localeObj.getConstant('Fit Page')){this.pdfViewer.magnificationModule.fitToPage();this.zoomDropDown.focusOut();}else if(zoomText===this.pdfViewer.localeObj.getConstant('Automatic')){this.pdfViewer.magnificationModule.isAutoZoom=true;this.pdfViewer.magnificationModule.fitToAuto();this.zoomDropDown.focusOut();}};/**
     * @param zoomFactor
     * @private
     */Toolbar$$1.prototype.updateZoomPercentage=function(zoomFactor){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){// eslint-disable-next-line radix
var currentPercent=parseInt((zoomFactor*100).toString())+'%';if(sf.base.isBlazor()){// eslint-disable-next-line
var blazorZoomDropDown=this.pdfViewerBase.getElement('_zoomDropDown');if(blazorZoomDropDown&&blazorZoomDropDown.children.length>0){blazorZoomDropDown.children[0].children[0].value=currentPercent;}}else{if(this.zoomDropDown.text===currentPercent){this.zoomDropDown.element.value=currentPercent;}if(this.zoomDropDown.index===11){this.zoomDropDown.value=4;}if(zoomFactor<=0.25){this.pdfViewerBase.isMinimumZoom=true;}else{this.pdfViewerBase.isMinimumZoom=false;}// eslint-disable-next-line
this.zoomDropDown.text=currentPercent;}}};Toolbar$$1.prototype.updateInteractionItems=function(){if(this.pdfViewer.textSelectionModule){if(this.pdfViewer.enableTextSelection){this.toolbar.enableItems(this.textSelectItem.parentElement,true);}else{this.toolbar.enableItems(this.textSelectItem.parentElement,false);}}else{this.toolbar.enableItems(this.textSelectItem.parentElement,false);}this.toolbar.enableItems(this.panItem.parentElement,true);if(this.pdfViewer.interactionMode==='TextSelection'&&this.pdfViewer.enableTextSelection){this.selectItem(this.textSelectItem);this.deSelectItem(this.panItem);}else{this.selectItem(this.panItem);this.deSelectItem(this.textSelectItem);this.pdfViewerBase.initiatePanning();}};/**
     * @private
     */Toolbar$$1.prototype.textSearchButtonHandler=function(){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(this.pdfViewer.textSearchModule&&this.pdfViewerBase.pageCount>0){this.isTextSearchBoxDisplayed=!this.isTextSearchBoxDisplayed;this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed);if(this.isTextSearchBoxDisplayed){if(!sf.base.isBlazor()){this.selectItem(this.textSearchItem);}// eslint-disable-next-line max-len
var searchInputElement=document.getElementById(this.pdfViewer.dataId+'_search_input');searchInputElement.select();searchInputElement.focus();}else{if(!sf.base.isBlazor()){this.deSelectItem(this.textSearchItem);this.textSearchItem.blur();}else{var searchItem=this.pdfViewerBase.getElement('_search');searchItem.firstElementChild.blur();}}}}else{this.showToolbar(false);this.pdfViewerBase.navigationPane.createNavigationPaneMobile('search');}};Toolbar$$1.prototype.initiateAnnotationMode=function(id){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(this.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.annotationToolbarModule.showAnnotationToolbar(this.annotationItem);this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.refreshOverflow();if(this.pdfViewer.isAnnotationToolbarVisible&&this.pdfViewer.isFormDesignerToolbarVisible){var formDesignerMainDiv=document.getElementById(this.pdfViewer.dataId+"_formdesigner_toolbar");formDesignerMainDiv.style.display="none";this.formDesignerToolbarModule.isToolbarHidden=false;this.formDesignerToolbarModule.showFormDesignerToolbar(this.formDesignerItem);this.annotationToolbarModule.adjustViewer(true);}}}else{if(!sf.base.isBlazor()){if(id===this.pdfViewer.dataId+'_annotation'){id=this.pdfViewer.dataId+'_annotationIcon';}this.annotationToolbarModule.createAnnotationToolbarForMobile(id);}}};Toolbar$$1.prototype.initiateFormDesignerMode=function(){if(this.formDesignerToolbarModule&&this.pdfViewer.enableFormDesignerToolbar){this.formDesignerToolbarModule.showFormDesignerToolbar(this.formDesignerItem);if(this.pdfViewer.isAnnotationToolbarVisible&&this.pdfViewer.isFormDesignerToolbarVisible){var annotationMainDiv=document.getElementById(this.pdfViewer.dataId+"_annotation_toolbar");annotationMainDiv.style.display="none";this.annotationToolbarModule.isToolbarHidden=false;this.annotationToolbarModule.showAnnotationToolbar(this.annotationItem);this.formDesignerToolbarModule.adjustViewer(true);}}};/**
     * @private
     */Toolbar$$1.prototype.DisableInteractionTools=function(){this.deSelectItem(this.textSelectItem);this.deSelectItem(this.panItem);};/**
     * @param element
     * @private
     */Toolbar$$1.prototype.selectItem=function(element){if(element){element.classList.add('e-pv-select');}};/**
     * @param element
     * @private
     */Toolbar$$1.prototype.deSelectItem=function(element){if(element){element.classList.remove('e-pv-select');}};/**
     * @param isTextSelect
     * @private
     */Toolbar$$1.prototype.updateInteractionTools=function(isTextSelect){var isBlazorPlatform=sf.base.isBlazor();if(isTextSelect){if(isBlazorPlatform){this.selectItem(this.SelectToolElement);this.deSelectItem(this.PanElement);}else{this.selectItem(this.textSelectItem);this.deSelectItem(this.panItem);}}else{if(isBlazorPlatform){this.selectItem(this.PanElement);this.deSelectItem(this.SelectToolElement);}else{this.selectItem(this.panItem);this.deSelectItem(this.textSelectItem);}}};Toolbar$$1.prototype.initialEnableItems=function(){if(this.pdfViewer.enableToolbar){this.showToolbar(true);}else{this.showToolbar(false);}if(this.pdfViewer.enableNavigationToolbar){this.showNavigationToolbar(true);}else{this.showNavigationToolbar(false);}if(!sf.base.isBlazor()){if(this.isPrintBtnVisible){this.showPrintOption(true);}else{this.showPrintOption(false);}if(this.isDownloadBtnVisible){this.showDownloadOption(true);}else{this.showDownloadOption(false);}if(this.isSearchBtnVisible){this.showSearchOption(true);}else{this.showSearchOption(false);}if(this.isCommentBtnVisible){this.showCommentOption(true);}else{this.showCommentOption(false);}}};Toolbar$$1.prototype.showSeparator=function(toolbarItems){// eslint-disable-next-line max-len
if(!this.isOpenBtnVisible||!this.isNavigationToolVisible&&!this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible&&!this.isUndoRedoBtnsVisible){this.applyHideToToolbar(false,1,1);}if(!this.isNavigationToolVisible&&!this.isMagnificationToolVisible&&!this.isOpenBtnVisible||this.isOpenBtnVisible&&!this.isNavigationToolVisible||// eslint-disable-next-line max-len
!this.isOpenBtnVisible&&!this.isNavigationToolVisible||!this.isMagnificationToolVisible&&!this.isScrollingBtnVisible&&!this.isSelectionBtnVisible){this.applyHideToToolbar(false,8,8);}if(!this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible||this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible||!this.isMagnificationToolVisible&&(this.isSelectionBtnVisible||this.isScrollingBtnVisible)){this.applyHideToToolbar(false,12,12);}if(!this.isMagnificationToolVisible&&!this.isNavigationToolVisible&&!this.isScrollingBtnVisible&&!this.isSelectionBtnVisible&&this.isUndoRedoBtnsVisible||!this.isUndoRedoBtnsVisible){this.applyHideToToolbar(false,15,15);}};Toolbar$$1.prototype.applyToolbarSettings=function(){var toolbarSettingsItems=this.pdfViewer.toolbarSettings.toolbarItems;if(toolbarSettingsItems){if(toolbarSettingsItems.indexOf('OpenOption')!==-1){this.showOpenOption(true);}else{this.showOpenOption(false);}if(toolbarSettingsItems.indexOf('PageNavigationTool')!==-1){this.showPageNavigationTool(true);}else{this.showPageNavigationTool(false);}if(toolbarSettingsItems.indexOf('MagnificationTool')!==-1){this.showMagnificationTool(true);}else{this.showMagnificationTool(false);}if(toolbarSettingsItems.indexOf('SelectionTool')!==-1){this.showSelectionTool(true);}else{this.showSelectionTool(false);}if(toolbarSettingsItems.indexOf('PanTool')!==-1){this.showScrollingTool(true);}else{this.showScrollingTool(false);}if(toolbarSettingsItems.indexOf('PrintOption')!==-1){this.showPrintOption(true);}else{this.showPrintOption(false);}if(toolbarSettingsItems.indexOf('DownloadOption')!==-1){this.showDownloadOption(true);}else{this.showDownloadOption(false);}if(toolbarSettingsItems.indexOf('SearchOption')!==-1){this.showSearchOption(true);}else{this.showSearchOption(false);}if(toolbarSettingsItems.indexOf('UndoRedoTool')!==-1){this.showUndoRedoTool(true);}else{this.showUndoRedoTool(false);}if(toolbarSettingsItems.indexOf('AnnotationEditTool')!==-1){this.showAnnotationEditTool(true);}else{this.showAnnotationEditTool(false);}if(toolbarSettingsItems.indexOf('FormDesignerEditTool')!==-1){this.showFormDesignerEditTool(true);}else{this.showFormDesignerEditTool(false);}if(toolbarSettingsItems.indexOf('CommentTool')!==-1){this.showCommentOption(true);}else{this.showCommentOption(false);}if(toolbarSettingsItems.indexOf('SubmitForm')!==-1){this.showSubmitForm(true);}else{this.showSubmitForm(false);}this.showSeparator(toolbarSettingsItems);}};Toolbar$$1.prototype.applyToolbarSettingsForMobile=function(){var toolbarSettingsItems=this.pdfViewer.toolbarSettings.toolbarItems;if(toolbarSettingsItems){if(toolbarSettingsItems.indexOf('OpenOption')!==-1){this.showOpenOption(true);}else{this.showOpenOption(false);}if(toolbarSettingsItems.indexOf('UndoRedoTool')!==-1){this.showUndoRedoTool(true);}else{this.showUndoRedoTool(false);}if(toolbarSettingsItems.indexOf('AnnotationEditTool')!==-1){this.showAnnotationEditTool(true);}else{this.showAnnotationEditTool(false);}if(toolbarSettingsItems.indexOf('SearchOption')!==-1){this.showSearchOption(true);}else{this.showSearchOption(false);}}};Toolbar$$1.prototype.getStampMode=function(){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.stampAnnotationModule){return this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode;}else{return false;}};// eslint-disable-next-line
Toolbar$$1.prototype.stampBeforeOpen=function(args){this.annotationToolbarModule.resetFreeTextAnnot();if(args.ParentItem.Text===''&&this.pdfViewer.customStampSettings.isAddToMenu&&args.Items.length>0){// eslint-disable-next-line
var currentElements=null;for(var i=0;i<args.Items.length;i++){if(args.Items[i].Text==='Custom Stamp'){args.Items[i].Items=[];currentElements=args.Items[i];break;}}// eslint-disable-next-line
var elements=this.pdfViewerBase.customStampCollection;// eslint-disable-next-line
var stampElements=this.pdfViewer.customStampSettings.customStamps;if(elements.length===0&&stampElements&&stampElements.length>0){for(var n=0;n<stampElements.length;n++){// eslint-disable-next-line max-len
elements.push({customStampName:stampElements[n].customStampName,customStampImageSource:stampElements[n].customStampImageSource});}}for(var m=0;m<elements.length;m++){if(currentElements!=null){currentElements.Items.push({text:elements[m].customStampName});}}}};// eslint-disable-next-line
Toolbar$$1.prototype.stampBeforeClose=function(args,showItemOnClick){// eslint-disable-next-line max-len
if(args.ParentItem&&args.ParentItem.Text!=='Custom Stamp'&&args.ParentItem.Text!=='Standard Business'&&args.ParentItem.Text!=='Dynamic'&&args.ParentItem.Text!=='Sign Here'||!args.ParentItem){showItemOnClick=true;}};/**
     * @private
     */ // eslint-disable-next-line
Toolbar$$1.prototype.updateStampItems=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stampAnnotationModule&&this.pdfViewer.annotationModule.stampAnnotationModule.isNewStampAnnot){if(this.pdfViewer.selectedItems.annotations[0]){this.pdfViewer.remove(this.pdfViewer.selectedItems.annotations[0]);this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1);this.pdfViewer.renderDrawing();this.pdfViewerBase.tool=null;}this.pdfViewerBase.isAlreadyAdded=false;this.pdfViewer.annotationModule.stampAnnotationModule.isNewStampAnnot=false;}};// eslint-disable-next-line
Toolbar$$1.prototype.stampSelect=function(args,stampParentID){this.pdfViewerBase.isAlreadyAdded=false;this.updateStampItems();if(args.Item.Text==='Custom Stamp'){this.annotationToolbarModule.checkStampAnnotations();this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=true;// eslint-disable-next-line
var stampImage=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_stampElement',attrs:{'type':'file'}});stampImage.setAttribute('accept','.jpg,.jpeg,.png');stampImage.style.position='absolute';stampImage.style.left='0px';stampImage.style.top='0px';stampImage.style.visibility='hidden';document.body.appendChild(stampImage);stampImage.click();stampImage.addEventListener('change',this.annotationToolbarModule.addStampImage);document.body.removeChild(stampImage);// eslint-disable-next-line max-len
}else if(stampParentID==='Custom Stamp'&&args.Item.Text!==''){// eslint-disable-next-line
var elements=this.pdfViewerBase.customStampCollection;for(var n=0;n<elements.length;n++){if(elements[n].customStampName===args.Item.Text){this.pdfViewer.annotationModule.stampAnnotationModule.customStampName=args.Item.Text;this.annotationToolbarModule.checkStampAnnotations();this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=true;this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=true;this.pdfViewerBase.stampAdded=true;this.pdfViewerBase.isAlreadyAdded=true;// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(elements[n].customStampImageSource);this.pdfViewerBase.stampAdded=false;}}// eslint-disable-next-line max-len
}else if(args.Item.Text!=='Dynamic'&&args.Item.Text!==''&&args.Item.Text!=='Standard Business'&&(stampParentID==='Sign Here'||args.Item.Text!=='Sign Here')){this.annotationToolbarModule.checkStampAnnotations();this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=true;this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=true;this.pdfViewerBase.stampAdded=true;if(stampParentID==='Dynamic'){this.pdfViewerBase.isDynamicStamp=true;this.pdfViewer.annotationModule.stampAnnotationModule.retrieveDynamicStampAnnotation(args.Item.Text);}else{this.pdfViewerBase.isDynamicStamp=false;this.pdfViewer.annotationModule.stampAnnotationModule.retrievestampAnnotation(args.Item.Text);}}};/**
     * @private
     */Toolbar$$1.prototype.getModuleName=function(){return'Toolbar';};// eslint-disable-next-line
Toolbar$$1.prototype.stampSelection=function(isResetFreetext,isStampSelect,args,stampParentID){if(isResetFreetext){this.annotationToolbarModule.resetFreeTextAnnot();}if(isStampSelect){this.stampSelect(args,stampParentID);}};// eslint-disable-next-line
Toolbar$$1.prototype.primaryToolbarClick=function(isAddInkAnnotation,isDeselectComment,isNavigationselect,navigationOption,isFocus,targetElement,isAnnotatioToolbarOpen){if(isAddInkAnnotation){this.addInkAnnotation();}if(isDeselectComment){this.deSelectCommentAnnotation();}if(isNavigationselect){switch(navigationOption){case"GoToNext":this.pdfViewer.navigationModule.goToNextPage();break;case"GoToPrevious":this.pdfViewer.navigationModule.goToPreviousPage();break;case"GoToFirst":this.pdfViewer.navigationModule.goToFirstPage();break;case"GoToLast":this.pdfViewer.navigationModule.goToLastPage();break;case"ZoomOut":this.pdfViewer.magnificationModule.zoomOut();break;case"ZoomIn":this.pdfViewer.magnificationModule.zoomIn();break;case"SelectTool":this.pdfViewerBase.initiateTextSelection();break;case"PanTool":this.pdfViewerBase.initiatePanning();break;case"Undo":this.pdfViewer.undo();break;case"Redo":this.pdfViewer.redo();break;case"SubmitForm":this.pdfViewer.exportFormFields(null);break;case"AddComments":this.addComments(targetElement);break;case"TextSearch":this.textSearchButtonHandler();break;case"EditAnnotation":this.pdfViewerBase.blazorUIAdaptor.showAnnotationToolbar(isAnnotatioToolbarOpen);break;case"PrintDocument":this.pdfViewer.firePrintStart();break;case"Download":this.pdfViewer.download();break;}}if(isFocus){this.pdfViewerBase.focusViewerContainer();}};return Toolbar$$1;}();/* eslint-disable */ // eslint-disable-next-line max-len
/**
 * @hidden
 */var AnnotationToolbar=/** @class */function(){function AnnotationToolbar(viewer,viewerBase,toolbar){var _this=this;this.toolbarBorderHeight=1;/**
         * @private
         */this.isToolbarHidden=false;/**
         * @private
         */this.isMobileAnnotEnabled=false;this.isHighlightEnabled=false;this.isUnderlineEnabled=false;this.isStrikethroughEnabled=false;this.isHighlightBtnVisible=true;this.isCommentBtnVisible=true;this.isUnderlineBtnVisible=true;this.isStrikethroughBtnVisible=true;this.isColorToolVisible=true;this.isOpacityToolVisible=true;this.isDeleteAnnotationToolVisible=true;this.isCurrentAnnotationOpacitySet=false;this.isStampBtnVisible=false;this.isShapeBtnVisible=false;this.isSignatureBtnVisible=false;this.isInkBtnVisible=false;this.isFontFamilyToolVisible=false;this.isFontSizeToolVisible=false;this.isFontAlignToolVisible=false;this.isFontColorToolVisible=false;this.isFontStylesToolVisible=false;this.isCommentPanelBtnVisible=false;this.isFreeTextBtnVisible=false;this.isCalibrateBtnVisible=false;this.isStrokeColorToolVisible=false;this.isThicknessToolVisible=false;this.stampMenu=[];this.stampParentID='';/**
         * @private
         */this.inkAnnotationSelected=false;/**
         * @private
         */this.openSignaturePopup=false;this.isSavedSignatureClicked=false;this.saveSignatureCount=0;this.saveInitialCount=0;/**
         * @private
         */this.isToolbarCreated=false;// eslint-disable-next-line
this.addStampImage=function(args){// eslint-disable-next-line
var proxy=_this;// eslint-disable-next-line
var upoadedFiles=args.target.files;if(args.target.files[0]!==null){var uploadedFile=upoadedFiles[0];_this.pdfViewer.annotationModule.stampAnnotationModule.customStampName=uploadedFile.name.split('.')[0];if(uploadedFile.type.split('/')[0]==='image'){var reader=new FileReader();// eslint-disable-next-line
reader.onload=function(e){var uploadedFileUrl=e.currentTarget.result;proxy.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=true;proxy.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=true;proxy.pdfViewerBase.stampAdded=true;_this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(uploadedFileUrl);proxy.pdfViewerBase.stampAdded=false;};reader.readAsDataURL(uploadedFile);}}args.target.value='';args.currentTarget.value='';};this.onShapeToolbarClicked=function(args){var elementId=_this.pdfViewer.dataId;var shapeAnnotationModule=_this.pdfViewer.annotation.shapeAnnotationModule;if(!sf.base.Browser.isDevice){_this.deselectAllItems();_this.resetFreeTextAnnot();}else{// eslint:disable-next-line
var element=args.originalEvent.target;_this.pdfViewer.toolbarModule.selectItem(element.parentElement);}switch(args.originalEvent.target.id){case elementId+'_shape_line':case elementId+'_shape_lineIcon':shapeAnnotationModule.setAnnotationType('Line');_this.onShapeDrawSelection(true);_this.updateColorInIcon(_this.colorDropDownElement,shapeAnnotationModule.lineFillColor);_this.updateColorInIcon(_this.strokeDropDownElement,shapeAnnotationModule.lineStrokeColor);_this.handleShapeTool(elementId+'_shape_line');break;case elementId+'_shape_arrow':case elementId+'_shape_arrowIcon':shapeAnnotationModule.setAnnotationType('Arrow');_this.onShapeDrawSelection(true);_this.updateColorInIcon(_this.colorDropDownElement,shapeAnnotationModule.arrowFillColor);_this.updateColorInIcon(_this.strokeDropDownElement,shapeAnnotationModule.arrowStrokeColor);_this.handleShapeTool(elementId+'_shape_arrow');break;case elementId+'_shape_rectangle':case elementId+'_shape_rectangleIcon':shapeAnnotationModule.setAnnotationType('Rectangle');_this.onShapeDrawSelection(true);_this.updateColorInIcon(_this.colorDropDownElement,shapeAnnotationModule.rectangleFillColor);_this.updateColorInIcon(_this.strokeDropDownElement,shapeAnnotationModule.rectangleStrokeColor);_this.handleShapeTool(elementId+'_shape_rectangle');break;case elementId+'_shape_circle':case elementId+'_shape_circleIcon':shapeAnnotationModule.setAnnotationType('Circle');_this.onShapeDrawSelection(true);_this.updateColorInIcon(_this.colorDropDownElement,shapeAnnotationModule.circleFillColor);_this.updateColorInIcon(_this.strokeDropDownElement,shapeAnnotationModule.circleStrokeColor);_this.handleShapeTool(elementId+'_shape_circle');break;case elementId+'_shape_pentagon':case elementId+'_shape_pentagonIcon':shapeAnnotationModule.setAnnotationType('Polygon');_this.onShapeDrawSelection(true);_this.updateColorInIcon(_this.colorDropDownElement,shapeAnnotationModule.polygonFillColor);_this.updateColorInIcon(_this.strokeDropDownElement,shapeAnnotationModule.polygonStrokeColor);_this.handleShapeTool(elementId+'_shape_pentagon');break;}// this.pdfViewer.clearSelection();
};this.pdfViewer=viewer;this.pdfViewerBase=viewerBase;this.primaryToolbar=toolbar;}/**
     * @private
     */AnnotationToolbar.prototype.initializeAnnotationToolbar=function(){var _this=this;// eslint-disable-next-line max-len
this.toolbarElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_annotation_toolbar',className:'e-pv-annotation-toolbar'});this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);this.toolbar=new sf.navigations.Toolbar({width:'',height:'',overflowMode:'Popup',cssClass:'e-pv-toolbar-scroll',items:this.createToolbarItems(),clicked:this.onToolbarClicked.bind(this),created:function created(){_this.createDropDowns();}});this.toolbar.isStringTemplate=true;if(this.pdfViewer.enableRtl){this.toolbar.enableRtl=true;}this.toolbar.appendTo(this.toolbarElement);this.afterToolbarCreation();this.createStampContainer();this.createSignContainer();this.applyAnnotationToolbarSettings();this.updateToolbarItems();this.showAnnotationToolbar(null,true);};AnnotationToolbar.prototype.createMobileAnnotationToolbar=function(isEnable,isPath){var _this=this;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){if(this.toolbarElement==null&&isEnable){this.isMobileAnnotEnabled=true;// eslint-disable-next-line max-len
this.toolbarElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_annotation_toolbar',className:'e-pv-annotation-toolbar'});this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement,this.pdfViewerBase.viewerContainer);this.toolbar=new sf.navigations.Toolbar({width:'',height:'',overflowMode:'Popup',items:this.createMobileToolbarItems(isPath),clicked:this.onToolbarClicked.bind(this),created:function created(){_this.createDropDowns(isPath);}});this.toolbar.isStringTemplate=true;if(this.pdfViewer.enableRtl){this.toolbar.enableRtl=true;}this.pdfViewerBase.navigationPane.goBackToToolbar();this.pdfViewer.toolbarModule.showToolbar(false);this.toolbar.appendTo(this.toolbarElement);this.deleteItem=this.pdfViewerBase.getElement('_annotation_delete');this.deleteItem.firstElementChild.id=this.pdfViewer.dataId+'_annotation_delete';}else if(this.toolbarElement!=null){if(isEnable){this.isMobileAnnotEnabled=true;this.pdfViewerBase.navigationPane.goBackToToolbar();this.pdfViewer.toolbarModule.showToolbar(false);this.toolbarElement.style.display='block';}else if(!isEnable){this.isMobileAnnotEnabled=false;this.pdfViewer.toolbarModule.showToolbar(true);this.hideMobileAnnotationToolbar();}}}else{this.isMobileAnnotEnabled=true;}};AnnotationToolbar.prototype.hideMobileAnnotationToolbar=function(){if(this.toolbarElement!=null){if(this.pdfViewer.selectedItems.annotations.length>0||this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){if(this.propertyToolbar&&this.propertyToolbar.element.children.length>0){this.propertyToolbar.element.style.display='block';this.toolbarCreated=true;}}else{if(this.toolbar.element.children.length>0){this.toolbarCreated=true;}else{this.toolbarCreated=false;}if(this.propertyToolbar&&this.propertyToolbar.element.style.display!=='none'){this.propertyToolbar.element.style.display='none';if(!this.toolbarCreated){var editIcon=document.getElementById(this.pdfViewer.dataId+'_annotationIcon');if(editIcon&&editIcon.parentElement.classList.contains('e-pv-select')){this.createAnnotationToolbarForMobile();}}}}if(this.toolbarElement.children.length>0){this.toolbarElement.style.display='block';}this.adjustMobileViewer();}else if(this.toolbarCreated&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0){this.propertyToolbar.element.style.display='none';this.adjustMobileViewer();this.toolbarCreated=false;}};AnnotationToolbar.prototype.FreeTextForMobile=function(){var _this=this;this.hideExistingTool();// eslint-disable-next-line max-len
this.freetextToolbarElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_freeTextToolbar',className:'e-pv-mobile-annotation-toolbar',styles:'bottom: 0px; position: absolute; width: 100%; float: left'});this.pdfViewerBase.viewerMainContainer.appendChild(this.freetextToolbarElement);// eslint-disable-next-line max-len
var colorTemplate=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span','_annotation_color','e-pv-annotation-color-container');// eslint-disable-next-line max-len
var strokeTemplate=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span','_annotation_stroke','e-pv-annotation-stroke-container');var thicknessTemplate=this.getTemplate('span','_annotation_thickness','e-pv-annotation-thickness-container');var opacityTemplate=this.getTemplate('span','_annotation_opacity','e-pv-annotation-opacity-container');var fontFamilyTemplate=this.getTemplate('input','_annotation_fontname','e-pv-annotation-fontname-container');var fontSizeTemplate=this.getTemplate('input','_annotation_fontsize','e-pv-annotation-fontsize-container');var textColorTemplate=this.getTemplate('span','_annotation_textcolor','e-pv-annotation-textcolor-container');var alignmentTemplate=this.getTemplate('span','_annotation_textalign','e-pv-annotation-textalign-container');// eslint-disable-next-line max-len
var textPropertiesTemplate=this.getTemplate('span','_annotation_textproperties','e-pv-annotation-textprop-container');// eslint:disable-next-line
var items;items=[// eslint-disable-next-line max-len
{prefixIcon:'e-pv-backward-icon e-pv-icon',tooltipText:this.pdfViewer.localeObj.getConstant('Go Back'),id:this.pdfViewer.dataId+'_backward',click:this.goBackToToolbar.bind(this)},{type:'Separator',align:'Left',cssClass:'e-pv-hightlight-separator-container'},{template:fontFamilyTemplate},{template:fontSizeTemplate},{template:textColorTemplate},{template:alignmentTemplate},{template:textPropertiesTemplate},{template:colorTemplate},{template:strokeTemplate},{template:thicknessTemplate},{template:opacityTemplate}];this.toolbar=new sf.navigations.Toolbar({items:items,width:'',height:'',overflowMode:'Scrollable',created:function created(){// eslint-disable-next-line max-len
_this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(_this.pdfViewer.dataId+'_annotation_freeTextEdit');}});this.toolbar.appendTo(this.freetextToolbarElement);this.showFreeTextPropertiesTool();};/**
     * @private
     */AnnotationToolbar.prototype.createPropertyTools=function(shapeType){var _this=this;if(shapeType!==""){if(this.propertyToolbar){this.propertyToolbar.destroy();}if(this.toolbar){this.toolbar.destroy();}// eslint-disable-next-line max-len
var shapeToolbarElement=void 0;shapeToolbarElement=document.getElementById(this.pdfViewer.dataId+'_propertyToolbar');if(shapeToolbarElement){shapeToolbarElement.parentElement.removeChild(shapeToolbarElement);}// eslint-disable-next-line max-len
shapeToolbarElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_propertyToolbar',className:'e-pv-mobile-annotation-toolbar',styles:'bottom: 0px; position: absolute; width: 100%; float: left'});this.pdfViewerBase.viewerMainContainer.appendChild(shapeToolbarElement);var id_1;var propertyToolbar=new sf.navigations.Toolbar({// eslint-disable-next-line max-len
items:this.createPropertyToolbarForMobile(shapeType),width:'',height:'',overflowMode:'Scrollable',created:function created(){if(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){id_1=_this.pdfViewer.dataId+'_underlineIcon';}else if(_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='FreeText'){id_1=_this.pdfViewer.dataId+'_annotation_freeTextEdit';// eslint-disable-next-line max-len
}else if(_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Stamp'||_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='StickyNotes'||_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Image'){id_1=_this.pdfViewer.dataId+'_annotation_stamp';// eslint-disable-next-line max-len
}else if(_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='HandWrittenSignature'||_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureText'){id_1=_this.pdfViewer.dataId+'_annotation_handwrittenSign';}else if(_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Ink'||_this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Path'){id_1=_this.pdfViewer.dataId+'_annotation_inkIcon';}else if(shapeType==='Highlight'||shapeType==='Underline'||shapeType==='Strikethrough'){id_1=_this.pdfViewer.dataId+'_highlightIcon';}else{id_1=_this.pdfViewer.dataId+'_annotation_shapesIcon';}_this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(id_1);}});propertyToolbar.isStringTemplate=true;propertyToolbar.appendTo(shapeToolbarElement);if(!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Line'){this.toolbar.enableItems(this.colorDropDownElement.parentElement,false);}if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='HandWrittenSignature'){var commentIcon=document.getElementById(this.pdfViewer.dataId+'_annotation_commentPanel');this.toolbar.enableItems(commentIcon.parentElement,false);}}this.showPropertyTool(propertyToolbar,id_1);}};AnnotationToolbar.prototype.showPropertyTool=function(existingTool,id){if(this.toolbar){this.toolbar.destroy();}this.propertyToolbar=existingTool;this.applyProperiesToolSettings(id);//this.propertyToolbar.element.style.display = 'block';
if(this.pdfViewer.selectedItems.annotations[0]){// eslint:disable-next-line
var selectedAnnotation=this.pdfViewer.selectedItems.annotations[0];// eslint-disable-next-line max-len
if(selectedAnnotation.shapeAnnotationType!=='SignatureText'&&selectedAnnotation.shapeAnnotationType!=='HandWrittenSignature'&&selectedAnnotation.shapeAnnotationType!=='Stamp'&&selectedAnnotation.shapeAnnotationType!=='Image'&&selectedAnnotation.shapeAnnotationType!=='Ink'&&selectedAnnotation.shapeAnnotationType!=='Path'&&selectedAnnotation.shapeAnnotationType!=='StickyNotes'){this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.selectedItems.annotations[0].fillColor);this.updateColorInIcon(this.strokeDropDownElement,this.pdfViewer.selectedItems.annotations[0].strokeColor);if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='FreeText'){// eslint:disable-next-line
var fontFamily=this.fontFamilyElement;fontFamily.ej2_instances[0].value=this.pdfViewer.selectedItems.annotations[0].fontFamily;// eslint:disable-next-line
var fontColor=this.fontColorElement;fontColor.children[0].style.borderBottomColor=this.pdfViewer.selectedItems.annotations[0].fontColor;this.pdfViewer.annotation.modifyTextAlignment(this.pdfViewer.selectedItems.annotations[0].textAlign);this.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign);}}else{if(this.strokeDropDownElement){this.updateColorInIcon(this.strokeDropDownElement,this.pdfViewer.selectedItems.annotations[0].strokeColor);}}}this.toolbarCreated=true;this.adjustMobileViewer();};AnnotationToolbar.prototype.stampToolMobileForMobile=function(args){var _this=this;this.hideExistingTool();if(this.stampToolbarElement){this.stampToolbarElement.parentElement.removeChild(this.stampToolbarElement);}// eslint-disable-next-line max-len
this.stampToolbarElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_stampToolbar',className:'e-pv-mobile-annotation-toolbar',styles:'bottom: 0px; position: absolute; width: 100%; float: left'});this.pdfViewerBase.viewerMainContainer.appendChild(this.stampToolbarElement);// eslint-disable-next-line max-len
this.toolbar=new sf.navigations.Toolbar({items:this.createStampToolbarItemsForMobile(),width:'',height:'',overflowMode:'Scrollable',clicked:this.onShapeToolbarClicked.bind(this),created:function created(){_this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args);}});this.toolbar.isStringTemplate=true;this.toolbar.appendTo(this.stampToolbarElement);this.showStampPropertiesTool();//this.afterShapeToolbarCreationForMobile();
};AnnotationToolbar.prototype.shapeToolMobile=function(args){var _this=this;this.hideExistingTool();if(this.shapeToolbarElement){this.shapeToolbarElement.parentElement.removeChild(this.shapeToolbarElement);}// eslint-disable-next-line max-len
this.shapeToolbarElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_shapeToolbar',className:'e-pv-mobile-annotation-toolbar',styles:'bottom: 0px; position: absolute; width: 100%; float: left'});this.pdfViewerBase.viewerMainContainer.appendChild(this.shapeToolbarElement);// eslint-disable-next-line max-len
this.toolbar=new sf.navigations.Toolbar({items:this.createShapeToolbarItemsForMobile(),width:'',height:'',overflowMode:'Scrollable',clicked:this.onShapeToolbarClicked.bind(this),created:function created(){_this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args.originalEvent.target.id);}});this.toolbar.isStringTemplate=true;this.toolbar.appendTo(this.shapeToolbarElement);this.afterShapeToolbarCreationForMobile();this.showShapeTool();};AnnotationToolbar.prototype.calibrateToolMobile=function(args){var _this=this;this.hideExistingTool();if(this.calibrateToolbarElement){this.calibrateToolbarElement.parentElement.removeChild(this.calibrateToolbarElement);}// eslint-disable-next-line max-len
this.calibrateToolbarElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_calibrateToolbar',className:'e-pv-mobile-annotation-toolbar',styles:'bottom: 0px; position: absolute; width: 100%; float: left'});this.pdfViewerBase.viewerMainContainer.appendChild(this.calibrateToolbarElement);// eslint-disable-next-line max-len
this.toolbar=new sf.navigations.Toolbar({items:this.createCalibrateToolbarItemsForMobile(),width:'',height:'',overflowMode:'Scrollable',clicked:this.onCalibrateToolbarClicked.bind(this),created:function created(){_this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args.originalEvent.target.id);}});this.toolbar.isStringTemplate=true;this.toolbar.appendTo(this.calibrateToolbarElement);this.afterCalibrateToolbarCreationForMobile();this.showShapeTool();};AnnotationToolbar.prototype.textMarkupForMobile=function(args){var _this=this;this.hideExistingTool();if(this.textMarkupToolbarElement){this.textMarkupToolbarElement.parentElement.removeChild(this.textMarkupToolbarElement);}// eslint-disable-next-line max-len
this.textMarkupToolbarElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_mobileAnnotationToolbar',className:'e-pv-mobile-annotation-toolbar',styles:'bottom: 0px; position: absolute; width: 100%; float: left'});this.pdfViewerBase.viewerMainContainer.appendChild(this.textMarkupToolbarElement);// eslint-disable-next-line max-len
var colorTemplate=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span','_annotation_color','e-pv-annotation-color-container');var opacityTemplate=this.getTemplate('span','_annotation_opacity','e-pv-annotation-opacity-container');// eslint:disable-next-line
var items;items=[// eslint-disable-next-line max-len
{prefixIcon:'e-pv-backward-icon e-pv-icon',tooltipText:this.pdfViewer.localeObj.getConstant('Go Back'),id:this.pdfViewer.dataId+'_backward',click:this.goBackToToolbar.bind(this)},{type:'Separator',align:'Left',cssClass:'e-pv-hightlight-separator-container'},{template:colorTemplate,align:'left'},{template:opacityTemplate,align:'left'}];this.propertyToolbar=new sf.navigations.Toolbar({items:items,width:'',height:'',overflowMode:'Scrollable',created:function created(){_this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(args.originalEvent.target.id);}});this.propertyToolbar.isStringTemplate=true;this.propertyToolbar.appendTo(this.textMarkupToolbarElement);this.showTextMarkupPropertiesTool();};AnnotationToolbar.prototype.showShapeTool=function(){// eslint-disable-next-line
var annotationToolbarItems=this.pdfViewer.toolbarSettings.annotationToolbarItems;if(annotationToolbarItems){if(annotationToolbarItems.indexOf('ColorEditTool')!==-1){this.showColorEditTool(true,7,7);}else{this.showColorEditTool(false,7,7);}if(annotationToolbarItems.indexOf('StrokeColorEditTool')!==-1){this.showStrokeColorEditTool(true,8,8);}else{this.showStrokeColorEditTool(false,8,8);}if(annotationToolbarItems.indexOf('ThicknessEditTool')!==-1){this.showThicknessEditTool(true,9,9);}else{this.showThicknessEditTool(false,9,9);}if(annotationToolbarItems.indexOf('OpacityEditTool')!==-1){this.showOpacityEditTool(true,10,10);}else{this.showOpacityEditTool(false,10,10);}}};AnnotationToolbar.prototype.signatureInkForMobile=function(){var _this=this;this.hideExistingTool();if(this.signatureInkToolbarElement){this.signatureInkToolbarElement.parentElement.removeChild(this.signatureInkToolbarElement);}// eslint-disable-next-line max-len
this.signatureInkToolbarElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_mobileAnnotationToolbar',className:'e-pv-mobile-annotation-toolbar',styles:'bottom: 0px; position: absolute; width: 100%; float: left'});this.pdfViewerBase.viewerMainContainer.appendChild(this.signatureInkToolbarElement);var opacityTemplate=this.getTemplate('span','_annotation_opacity','e-pv-annotation-opacity-container');// eslint-disable-next-line max-len
var strokeTemplate=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span','_annotation_stroke','e-pv-annotation-stroke-container');var thicknessTemplate=this.getTemplate('span','_annotation_thickness','e-pv-annotation-thickness-container');// eslint:disable-next-line
var items;items=[// eslint-disable-next-line max-len
{prefixIcon:'e-pv-backward-icon e-pv-icon',tooltipText:this.pdfViewer.localeObj.getConstant('Go Back'),id:this.pdfViewer.dataId+'_backward',click:this.goBackToToolbar.bind(this)},{template:opacityTemplate,align:'left'},{template:strokeTemplate,aign:'left'},{template:thicknessTemplate,align:'left'}];this.toolbar=new sf.navigations.Toolbar({items:items,width:'',height:'',overflowMode:'Scrollable',created:function created(){_this.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(_this.pdfViewer.dataId+'_annotation_inkIcon');}});this.toolbar.isStringTemplate=true;this.toolbar.appendTo(this.signatureInkToolbarElement);};AnnotationToolbar.prototype.hideExistingTool=function(){if(this.toolbar&&!this.pdfViewer.enableDesktopMode){this.toolbar.destroy();}if(this.propertyToolbar&&!this.pdfViewer.enableDesktopMode){this.propertyToolbar.destroy();}var mobileAnnotationToolbar=document.getElementById(this.pdfViewer.dataId+'_mobileAnnotationToolbar');if(mobileAnnotationToolbar){mobileAnnotationToolbar.style.display='none';}};AnnotationToolbar.prototype.applyProperiesToolSettings=function(type){switch(type){case this.pdfViewer.dataId+'_highlightIcon':this.showTextMarkupPropertiesTool();break;case this.pdfViewer.dataId+'_annotation_freeTextEdit':this.showFreeTextPropertiesTool();break;case this.pdfViewer.dataId+'_annotation_shapesIcon':this.shapePropertiesTool();break;case'stampTool':case this.pdfViewer.dataId+'_annotation_stamp':this.showStampPropertiesTool();break;case this.pdfViewer.dataId+'_annotation_handwrittenSign':case this.pdfViewer.dataId+'_annotation_inkIcon':this.showInkPropertiesTool();break;}};AnnotationToolbar.prototype.showFreeTextPropertiesTool=function(){// eslint-disable-next-line
var annotationToolbarItems=this.pdfViewer.toolbarSettings.annotationToolbarItems;if(annotationToolbarItems){if(annotationToolbarItems.indexOf('FontFamilyAnnotationTool')!==-1){this.showFontFamilyAnnotationTool(true,2,2);}else{this.showFontFamilyAnnotationTool(false,2,2);}if(annotationToolbarItems.indexOf('FontSizeAnnotationTool')!==-1){this.showFontSizeAnnotationTool(true,3,3);}else{this.showFontSizeAnnotationTool(false,3,3);}if(annotationToolbarItems.indexOf('FontColorAnnotationTool')!==-1){this.showFontColorAnnotationTool(true,4,4);}else{this.showFontColorAnnotationTool(false,4,4);}if(annotationToolbarItems.indexOf('FontAlignAnnotationTool')!==-1){this.showFontAlignAnnotationTool(true,5,5);}else{this.showFontAlignAnnotationTool(false,5,5);}if(annotationToolbarItems.indexOf('FontStylesAnnotationTool')!==-1){this.showFontStylesAnnotationTool(true,6,6);}else{this.showFontStylesAnnotationTool(false,6,6);}if(annotationToolbarItems.indexOf('ColorEditTool')!==-1){this.showColorEditTool(true,7,7);}else{this.showColorEditTool(false,7,7);}if(annotationToolbarItems.indexOf('StrokeColorEditTool')!==-1){this.showStrokeColorEditTool(true,8,8);}else{this.showStrokeColorEditTool(false,8,8);}if(annotationToolbarItems.indexOf('ThicknessEditTool')!==-1){this.showThicknessEditTool(true,9,9);}else{this.showThicknessEditTool(false,9,9);}if(annotationToolbarItems.indexOf('OpacityEditTool')!==-1){this.showOpacityEditTool(true,10,10);}else{this.showOpacityEditTool(false,10,10);}if(annotationToolbarItems.indexOf('CommentPanelTool')!==-1){this.showCommentPanelTool(true,11,11);}else{this.showCommentPanelTool(false,11,11);}if(annotationToolbarItems.indexOf('AnnotationDeleteTool')!==-1){this.showAnnotationDeleteTool(true,12,12);}else{this.showAnnotationDeleteTool(false,12,12);}}};AnnotationToolbar.prototype.shapePropertiesTool=function(){// eslint-disable-next-line
var annotationToolbarItems=this.pdfViewer.toolbarSettings.annotationToolbarItems;if(annotationToolbarItems){if(annotationToolbarItems.indexOf('ColorEditTool')!==-1){this.showColorEditTool(true,2,2);}else{this.showColorEditTool(false,2,2);}if(annotationToolbarItems.indexOf('StrokeColorEditTool')!==-1){this.showStrokeColorEditTool(true,3,3);}else{this.showStrokeColorEditTool(false,3,3);}if(annotationToolbarItems.indexOf('ThicknessEditTool')!==-1){this.showThicknessEditTool(true,4,4);}else{this.showThicknessEditTool(false,4,4);}if(annotationToolbarItems.indexOf('OpacityEditTool')!==-1){this.showOpacityEditTool(true,5,5);}else{this.showOpacityEditTool(false,5,5);}if(annotationToolbarItems.indexOf('CommentPanelTool')!==-1){this.showCommentPanelTool(true,6,6);}else{this.showCommentPanelTool(false,6,6);}if(annotationToolbarItems.indexOf('AnnotationDeleteTool')!==-1){this.showAnnotationDeleteTool(true,7,7);}else{this.showAnnotationDeleteTool(false,7,7);}}};AnnotationToolbar.prototype.showStampPropertiesTool=function(){// eslint-disable-next-line
var annotationToolbarItems=this.pdfViewer.toolbarSettings.annotationToolbarItems;if(annotationToolbarItems){if(annotationToolbarItems.indexOf('OpacityEditTool')!==-1){this.showOpacityEditTool(true,2,2);}else{this.showOpacityEditTool(false,2,2);}if(annotationToolbarItems.indexOf('CommentPanelTool')!==-1){this.showCommentPanelTool(true,3,3);}else{this.showCommentPanelTool(false,3,3);}if(annotationToolbarItems.indexOf('AnnotationDeleteTool')!==-1){this.showAnnotationDeleteTool(true,4,4);}else{this.showAnnotationDeleteTool(false,4,4);}}};AnnotationToolbar.prototype.showTextMarkupPropertiesTool=function(){// eslint-disable-next-line
var annotationToolbarItems=this.pdfViewer.toolbarSettings.annotationToolbarItems;if(annotationToolbarItems){if(annotationToolbarItems.indexOf('ColorEditTool')!==-1){this.showColorEditTool(true,2,2);}else{this.showColorEditTool(false,2,2);}if(annotationToolbarItems.indexOf('OpacityEditTool')!==-1){this.showOpacityEditTool(true,3,3);}else{this.showOpacityEditTool(false,3,3);}if(annotationToolbarItems.indexOf('CommentPanelTool')!==-1){this.showCommentPanelTool(true,4,4);}else{this.showCommentPanelTool(false,4,4);}if(annotationToolbarItems.indexOf('AnnotationDeleteTool')!==-1){this.showAnnotationDeleteTool(true,5,5);}else{this.showAnnotationDeleteTool(false,5,5);}}};AnnotationToolbar.prototype.showInkPropertiesTool=function(){// eslint-disable-next-line
var annotationToolbarItems=this.pdfViewer.toolbarSettings.annotationToolbarItems;if(annotationToolbarItems){if(annotationToolbarItems.indexOf('StrokeColorEditTool')!==-1){this.showStrokeColorEditTool(true,2,2);}else{this.showStrokeColorEditTool(false,2,2);}if(annotationToolbarItems.indexOf('ThicknessEditTool')!==-1){this.showThicknessEditTool(true,3,3);}else{this.showThicknessEditTool(false,3,3);}if(annotationToolbarItems.indexOf('OpacityEditTool')!==-1){this.showOpacityEditTool(true,4,4);}else{this.showOpacityEditTool(false,4,4);}if(annotationToolbarItems.indexOf('CommentPanelTool')!==-1){this.showCommentPanelTool(true,5,5);}else{this.showCommentPanelTool(false,5,5);}if(annotationToolbarItems.indexOf('AnnotationDeleteTool')!==-1){this.showAnnotationDeleteTool(true,6,6);}else{this.showAnnotationDeleteTool(false,6,6);}}};/**
     * @private
     */ // eslint:disable-next-line
AnnotationToolbar.prototype.createAnnotationToolbarForMobile=function(id){var hideToolbar;if(id){var editIcon=document.getElementById(id);if(editIcon.parentElement.classList.contains('e-pv-select')){hideToolbar=true;editIcon.parentElement.classList.remove('e-pv-select');}else{hideToolbar=false;this.pdfViewer.toolbarModule.selectItem(editIcon.parentElement);}}if(hideToolbar){this.toolbarCreated=false;this.adjustMobileViewer();if(this.toolbar){this.toolbar.destroy();}if(this.propertyToolbar){this.propertyToolbar.destroy();}var mobileAnnotationToolbar=document.getElementById(this.pdfViewer.dataId+'_mobileAnnotationToolbar');if(mobileAnnotationToolbar){mobileAnnotationToolbar.style.display='none';}return[];}else{this.isToolbarCreated=true;if(this.propertyToolbar){this.propertyToolbar.destroy();}if(this.toolbarElement){this.toolbarElement.parentElement.removeChild(this.toolbarElement);}// eslint-disable-next-line max-len
this.toolbarElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_mobileAnnotationToolbar',className:'e-pv-mobile-annotation-toolbar',styles:'bottom: 0px; position: absolute; width: 100%; float: left;'});//this.toolbarElement.append(this.pdfViewerBase.viewerContainer);
this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);var stampTemplate=this.getTemplate('span','_annotation_stamp','e-pv-annotation-stamp-container');var signTemplate=this.getTemplate('span','_annotation_signature','e-pv-annotation-handwritten-container');// eslint:disable-next-line
var items=void 0;items=[// eslint-disable-next-line max-len
{prefixIcon:'e-pv-comment-icon e-pv-icon',className:'e-pv-comment-container',id:this.pdfViewer.dataId+'_comment'},{type:'Separator',align:'Left'},// eslint-disable-next-line max-len
{prefixIcon:'e-pv-highlight-icon e-pv-icon',className:'e-pv-highlight-container',id:this.pdfViewer.dataId+'_highlight'},// eslint-disable-next-line max-len
{prefixIcon:'e-pv-underline-icon e-pv-icon',className:'e-pv-underline-container',id:this.pdfViewer.dataId+'_underline'},// eslint-disable-next-line max-len
{prefixIcon:'e-pv-strikethrough-icon e-pv-icon',className:'e-pv-strikethrough-container',id:this.pdfViewer.dataId+'_strikethrough'},{type:'Separator',align:'Left'},// eslint-disable-next-line max-len
{prefixIcon:'e-pv-annotation-shape-icon e-pv-icon',className:'e-pv-annotation-shapes-container',id:this.pdfViewer.dataId+'_annotation_shapes'},{type:'Separator',align:'Left'},// eslint-disable-next-line max-len
{prefixIcon:'e-pv-annotation-calibrate-icon e-pv-icon',className:'e-pv-annotation-calibrate-container',id:this.pdfViewer.dataId+'_annotation_calibrate'},{type:'Separator',align:'Left'},// eslint-disable-next-line max-len
{prefixIcon:'e-pv-freetext-icon e-pv-icon',className:'e-pv-annotation-freetextedit-container',id:this.pdfViewer.dataId+'_annotation_freeTextEdit'},{type:'Separator',align:'Left'},{template:stampTemplate},{type:'Separator',align:'Left'},{template:signTemplate,align:'Left'},{type:'Separator',align:'Left'},// eslint-disable-next-line max-len
{prefixIcon:'e-pv-inkannotation-icon e-pv-icon',className:'e-pv-annotation-ink-container',id:this.pdfViewer.dataId+'_annotation_ink',align:'Left'},{type:'Separator',align:'Left'},// eslint-disable-next-line max-len
{prefixIcon:'e-pv-comment-panel-icon e-pv-icon',className:'e-pv-comment-panel-icon-container',id:this.pdfViewer.dataId+'_annotation_commentPanel',align:'Right'}];if(this.toolbarCreated&&this.toolbar){this.toolbar.destroy();this.toolbarCreated=false;this.adjustMobileViewer();}else{// eslint-disable-next-line max-len
this.toolbar=new sf.navigations.Toolbar({items:items,width:'',height:'',overflowMode:'Scrollable',clicked:this.onToolbarClicked.bind(this)});if(this.pdfViewer.enableRtl){this.toolbar.enableRtl=true;}this.toolbar.isStringTemplate=true;this.toolbar.appendTo(this.toolbarElement);this.afterMobileToolbarCreation();this.createStampContainer();this.createSignContainer();this.applyMobileAnnotationToolbarSettings();this.toolbarCreated=true;this.adjustMobileViewer();}return items;}};/**
     * @private
     */AnnotationToolbar.prototype.adjustMobileViewer=function(){var toolbarHeight;if(this.toolbarElement){toolbarHeight=this.toolbarElement.clientHeight;}var isPrimaryTool=false;if(this.toolbarElement&&this.toolbarElement.children.length===0&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0){toolbarHeight=this.propertyToolbar.element.clientHeight;if(this.pdfViewer.toolbarModule.toolbarElement.style.display==='none'){this.pdfViewer.toolbarModule.toolbarElement.style.display='block';}}else if(this.freetextToolbarElement&&this.freetextToolbarElement.children.length>0){toolbarHeight=this.freetextToolbarElement.clientHeight;}else if(toolbarHeight===0&&this.pdfViewer.toolbarModule.toolbar){toolbarHeight=this.pdfViewer.toolbarModule.toolbarElement.clientHeight;isPrimaryTool=true;}else if(!toolbarHeight&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0){toolbarHeight=this.propertyToolbar.element.clientHeight;}if(this.pdfViewer.enableToolbar&&this.toolbarCreated){// eslint-disable-next-line max-len
this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),toolbarHeight+toolbarHeight)+'px';}else{if(!isPrimaryTool){if(this.pdfViewerBase.viewerContainer.style.height.split('%').length>1){this.pdfViewerBase.viewerContainer.style.height=this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),-toolbarHeight)+'px';}else{this.pdfViewerBase.viewerContainer.style.height=this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),toolbarHeight)+'px';}}}};/**
     * Shows /hides the toolbar in the PdfViewer
     * @param  {boolean} enableToolbar - If set true , its show the Toolbar
     * @returns void
     */AnnotationToolbar.prototype.showToolbar=function(enable){var toolbar=this.toolbarElement;if(enable){toolbar.style.display='block';if(sf.base.Browser.isDevice&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule){this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();}}else{toolbar.style.display='none';}};// eslint-disable-next-line
AnnotationToolbar.prototype.createMobileToolbarItems=function(isPath){var colorTemplate=this.getTemplate('span','_annotation_color','e-pv-annotation-color-container');var opacityTemplate=this.getTemplate('span','_annotation_opacity','e-pv-annotation-opacity-container');// eslint-disable-next-line
var items=[];items.push({prefixIcon:'e-pv-backward-icon e-pv-icon',tooltipText:this.pdfViewer.localeObj.getConstant('Go Back'),id:this.pdfViewer.dataId+'_backward',click:this.goBackToToolbar.bind(this)});// eslint-disable-next-line max-len
if(!isPath){items.push({template:colorTemplate,align:'right'});items.push({template:opacityTemplate,align:'right'});items.push({type:'Separator',align:'right'});}// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-annotation-delete-icon e-pv-icon',className:'e-pv-annotation-delete-container',id:this.pdfViewer.dataId+'_annotation_delete',align:'right'});return items;};AnnotationToolbar.prototype.goBackToToolbar=function(){this.isMobileAnnotEnabled=false;if(this.toolbarElement.children.length>0){this.toolbarElement.style.display='block';}else{this.toolbarCreated=false;this.toolbar.destroy();this.createAnnotationToolbarForMobile();}var page=this.pdfViewerBase.getSelectTextMarkupCurrentPage();if(page){this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null;this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(page);}};// eslint-disable-next-line
AnnotationToolbar.prototype.createToolbarItems=function(){var colorTemplate=this.getTemplate('span','_annotation_color','e-pv-annotation-color-container');var strokeTemplate=this.getTemplate('span','_annotation_stroke','e-pv-annotation-stroke-container');var thicknessTemplate=this.getTemplate('span','_annotation_thickness','e-pv-annotation-thickness-container');var opacityTemplate=this.getTemplate('span','_annotation_opacity','e-pv-annotation-opacity-container');var shapesTemplate=this.getTemplate('span','_annotation_shapes','e-pv-annotation-shapes-container');var calibrateTemplate=this.getTemplate('span','_annotation_calibrate','e-pv-annotation-calibrate-container');var stampTemplate=this.getTemplate('span','_annotation_stamp','e-pv-annotation-stamp-container');var fontFamilyTemplate=this.getTemplate('input','_annotation_fontname','e-pv-annotation-fontname-container');var fontSizeTemplate=this.getTemplate('input','_annotation_fontsize','e-pv-annotation-fontsize-container');var textColorTemplate=this.getTemplate('span','_annotation_textcolor','e-pv-annotation-textcolor-container');var alignmentTemplate=this.getTemplate('span','_annotation_textalign','e-pv-annotation-textalign-container');var textPropertiesTemplate=this.getTemplate('span','_annotation_textproperties','e-pv-annotation-textprop-container');var signTemplate=this.getTemplate('span','_annotation_signature','e-pv-annotation-handwritten-container');// eslint-disable-next-line
var items=[];// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-highlight-icon e-pv-icon',className:'e-pv-highlight-container',id:this.pdfViewer.dataId+'_highlight',align:'Left'});items.push({prefixIcon:'e-pv-underline-icon e-pv-icon',className:'e-pv-underline-container',id:this.pdfViewer.dataId+'_underline',align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-strikethrough-icon e-pv-icon',className:'e-pv-strikethrough-container',id:this.pdfViewer.dataId+'_strikethrough',align:'Left'});items.push({type:'Separator',align:'Left',cssClass:'e-pv-hightlight-separator-container'});items.push({template:shapesTemplate,align:'Left',cssClass:'e-pv-shape-template-container'});items.push({type:'Separator',align:'Left',cssClass:'e-pv-shape-separator-container'});items.push({template:calibrateTemplate,align:'Left',cssClass:'e-pv-calibrate-template-container'});items.push({type:'Separator',align:'Left',cssClass:'e-pv-calibrate-separator-container'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-freetext-icon e-pv-icon',className:'e-pv-annotation-freetextedit-container',id:this.pdfViewer.dataId+'_annotation_freeTextEdit',align:'Left'});items.push({type:'Separator',align:'Left',cssClass:'e-pv-freetext-separator-container'});items.push({template:stampTemplate,align:'Left',cssClass:'e-pv-stamp-template-container'});items.push({type:'Separator',align:'Left',cssClass:'e-pv-stamp-separator-container'});// eslint-disable-next-line max-len
items.push({template:signTemplate,align:'Left',cssClass:'e-pv-sign-template-container'});items.push({type:'Separator',align:'Left',cssClass:'e-pv-sign-separator-container'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-inkannotation-icon e-pv-icon',className:'e-pv-annotation-ink-container',id:this.pdfViewer.dataId+'_annotation_ink',align:'Left'});items.push({type:'Separator',align:'Left',cssClass:'e-pv-ink-separator-container'});items.push({template:fontFamilyTemplate,align:'Left',cssClass:'e-pv-fontfamily-container'});items.push({template:fontSizeTemplate,align:'Left',cssClass:'e-pv-fontsize-container'});items.push({template:textColorTemplate,align:'Left',cssClass:'e-pv-text-color-container'});items.push({template:alignmentTemplate,align:'Left',cssClass:'e-pv-alignment-container'});items.push({template:textPropertiesTemplate,align:'Left',cssClass:'e-pv-text-properties-container'});items.push({type:'Separator',align:'Left',cssClass:'e-pv-text-separator-container'});items.push({template:colorTemplate,align:'Left',cssClass:'e-pv-color-template-container'});items.push({template:strokeTemplate,align:'Left',cssClass:'e-pv-stroke-template-container'});items.push({template:thicknessTemplate,align:'Left',cssClass:'e-pv-thickness-template-container'});items.push({template:opacityTemplate,align:'Left',cssClass:'e-pv-opacity-template-container'});items.push({type:'Separator',align:'Left',cssClass:'e-pv-opacity-separator-container'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-annotation-delete-icon e-pv-icon',className:'e-pv-annotation-delete-container',id:this.pdfViewer.dataId+'_annotation_delete',align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-comment-panel-icon e-pv-icon',className:'e-pv-comment-panel-icon-container',id:this.pdfViewer.dataId+'_annotation_commentPanel',align:'Right'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-annotation-tools-close-icon e-pv-icon',className:'e-pv-annotation-tools-close-container',id:this.pdfViewer.dataId+'_annotation_close',align:'Right'});return items;};AnnotationToolbar.prototype.createSignContainer=function(){var _this=this;this.handWrittenSignatureItem=this.pdfViewerBase.getElement('_annotation_signature');// eslint-disable-next-line max-len
this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement('_annotation_signature'),this.pdfViewer.localeObj.getConstant('SignatureFieldDialogHeaderText'));// eslint-disable-next-line
var proxy=this;var items=[];if(this.pdfViewer.handWrittenSignatureSettings.signatureItem.length===0||this.pdfViewer.handWrittenSignatureSettings.signatureItem.length==2){items=[{text:'ADD SIGNATURE'},{separator:true},{text:'ADD INITIAL'}];}else{if(this.pdfViewer.handWrittenSignatureSettings.signatureItem[0]==='Signature'){items=[{text:'ADD SIGNATURE'}];}else{items=[{text:'ADD INITIAL'}];}}var saveOptions={items:items,iconCss:'e-pv-handwritten-icon e-pv-icon',cssClass:'e-pv-handwritten-popup',open:function open(args){proxy.openSignature();},beforeItemRender:function beforeItemRender(args){_this.pdfViewer.clearSelection(_this.pdfViewerBase.currentPageNumber-1);if(args.element&&args.element.className.indexOf("e-separator")!==-1){args.element.style.margin="8px 0";}if(args.item.text==='ADD SIGNATURE'){args.element.innerHTML='';_this.saveSignatureCount=0;for(var collection=_this.pdfViewerBase.signatureModule.signaturecollection.length;collection>0;collection--){if(_this.saveSignatureCount<_this.pdfViewerBase.signatureModule.getSaveLimit(_this.pdfViewer.handWrittenSignatureSettings.saveSignatureLimit)){args.element.style.display='block';// eslint-disable-next-line
var signatureCollection=_this.pdfViewerBase.signatureModule.signaturecollection[collection-1];// eslint-disable-next-line
var collectionKey=signatureCollection.image[0].imageData;var signatureID=signatureCollection.image[0].id.split('_')[1];if(!signatureCollection.isInitial&&collectionKey!==''){// eslint-disable-next-line max-len
var signatureContainer=sf.base.createElement('div');signatureContainer.id='s'+signatureID;signatureContainer.style.display='block';signatureContainer.style.paddingBottom='10px';var signatureSpan=sf.base.createElement('span');signatureSpan.id='sign_border_'+signatureID;signatureSpan.classList.add('e-pv-align-border');var signatureImage=void 0;if(signatureCollection.image[0].signatureType==='SignatureText'){signatureImage=sf.base.createElement('div');signatureImage.classList.add('e-pv-align-border-div');signatureImage.innerText=collectionKey;signatureImage.style.fontFamily=signatureCollection.image[0].fontFamily;signatureImage.style.fontSize='15px';signatureImage.style.display='inline-flex';signatureImage.style.alignItems='center';signatureImage.style.position='relative';signatureImage.id='sign_'+signatureID;signatureImage.style.width='80px';signatureImage.style.height='53px';signatureImage.style.overflow='hidden';signatureImage.style.textOverflow='ellipsis';signatureImage.style.paddingLeft='11px';}else{signatureImage=sf.base.createElement('img');signatureImage.id='sign_'+signatureID;signatureImage.src=collectionKey;signatureImage.width=80;signatureImage.height=32;signatureImage.classList.add('e-pv-signatureimage');signatureImage.style.paddingLeft='20px';signatureImage.style.paddingRight='18px';signatureImage.style.paddingTop='12px';signatureImage.style.paddingBottom='12px';signatureImage.style.boxSizing='content-box';}signatureImage.addEventListener('mouseover',_this.hoverSignatureImage.bind(_this));signatureImage.addEventListener('mouseleave',_this.leaveSignatureImage.bind(_this));var signatureDeleteSpan=sf.base.createElement('span');signatureDeleteSpan.id='delete_'+signatureID;signatureDeleteSpan.classList.add('e-pv-delete');signatureDeleteSpan.classList.add('e-pv-align');signatureSpan.append(signatureImage);signatureSpan.append(signatureDeleteSpan);signatureContainer.append(signatureSpan);args.element.appendChild(signatureContainer);args.element.style.pointerEvents='auto';args.element.style.background='none';_this.pdfViewerBase.getElement('_annotation_signature-popup').style.width='206px';_this.saveSignatureCount++;}}}var addInitialSpan=sf.base.createElement('button');addInitialSpan.classList.add("e-control","e-btn","e-lib","e-outline","e-primary");addInitialSpan.textContent=_this.pdfViewer.localeObj.getConstant('HandwrittenSignatureDialogHeaderText');addInitialSpan.style.width="130px";addInitialSpan.style.height="36px";addInitialSpan.addEventListener('click',_this.clickSignature.bind(_this));args.element.appendChild(addInitialSpan);args.element.addEventListener('mouseover',_this.hoverInitialBtn.bind(_this));args.element.style.width='206px';args.element.style.display='flex';args.element.style.flexDirection='column';args.element.style.height='auto';args.element.style.alignItems='center';}if(args.item.text==='ADD INITIAL'){_this.saveInitialCount=0;args.element.innerHTML='';for(var collection=_this.pdfViewerBase.signatureModule.signaturecollection.length;collection>0;collection--){if(_this.saveInitialCount<_this.pdfViewerBase.signatureModule.getSaveLimit(_this.pdfViewer.handWrittenSignatureSettings.saveInitialLimit)){// eslint-disable-next-line
var signatureCollection=_this.pdfViewerBase.signatureModule.signaturecollection[collection-1];// eslint-disable-next-line
var collectionKey=signatureCollection.image[0].imageData;var signatureID=signatureCollection.image[0].id.split('_')[1];if(signatureCollection.isInitial&&collectionKey!==''){var signatureContainer=sf.base.createElement('div');signatureContainer.id='s'+signatureID;signatureContainer.style.display='block';signatureContainer.style.paddingBottom='10px';var signatureSpan=sf.base.createElement('span');signatureSpan.id='sign_border_'+signatureID;signatureSpan.classList.add('e-pv-align-border');var signatureImage=void 0;if(signatureCollection.image[0].signatureType==='SignatureText'){signatureImage=sf.base.createElement('div');signatureImage.classList.add('e-pv-align-border-div');signatureImage.innerText=collectionKey;signatureImage.style.fontFamily=signatureCollection.image[0].fontFamily;signatureImage.style.fontSize='15px';signatureImage.style.display='inline-flex';signatureImage.style.alignItems='center';signatureImage.style.position='relative';signatureImage.id='sign_'+signatureID;signatureImage.style.width='80px';signatureImage.style.height='53px';signatureImage.style.overflow='hidden';signatureImage.style.textOverflow='ellipsis';signatureImage.style.paddingLeft='11px';}else{signatureImage=sf.base.createElement('img');signatureImage.id='sign_'+signatureID;signatureImage.src=collectionKey;signatureImage.width=80;signatureImage.height=32;signatureImage.classList.add('e-pv-signatureimage');signatureImage.style.paddingLeft='20px';signatureImage.style.paddingRight='18px';signatureImage.style.paddingTop='12px';signatureImage.style.paddingBottom='12px';signatureImage.style.boxSizing='content-box';}signatureImage.addEventListener('mouseover',_this.hoverSignatureImage.bind(_this));signatureImage.addEventListener('mouseleave',_this.leaveSignatureImage.bind(_this));signatureImage.width=80;signatureImage.height=32;var signatureDeleteSpan=sf.base.createElement('span');signatureDeleteSpan.id='delete_'+signatureID;signatureDeleteSpan.classList.add('e-pv-delete');signatureDeleteSpan.classList.add('e-pv-align');signatureSpan.append(signatureImage);signatureSpan.append(signatureDeleteSpan);signatureContainer.append(signatureSpan);args.element.appendChild(signatureContainer);// eslint-disable-next-line max-len
args.element.style.pointerEvents='auto';args.element.style.background='none';_this.pdfViewerBase.getElement('_annotation_signature-popup').style.width='206px';_this.saveInitialCount++;}}}_this.isSignatureIteam=false;var addInitialSpan=sf.base.createElement('button');addInitialSpan.classList.add("e-control","e-btn","e-lib","e-outline","e-primary");addInitialSpan.textContent=_this.pdfViewer.localeObj.getConstant('HandwrittenInitialDialogHeaderText');addInitialSpan.style.width="130px";addInitialSpan.style.height="36px";addInitialSpan.addEventListener('click',_this.clickInitial.bind(_this));args.element.appendChild(addInitialSpan);args.element.addEventListener('mouseover',_this.hoverInitialBtn.bind(_this));args.element.style.width='206px';args.element.style.display='flex';args.element.style.flexDirection='column';args.element.style.height='auto';args.element.style.alignItems='center';}},select:function select(args){_this.pdfViewer.clearSelection(_this.pdfViewerBase.currentPageNumber-1);}};var drpDownBtn=new sf.splitbuttons.DropDownButton(saveOptions);if(this.pdfViewer.enableRtl){drpDownBtn.enableRtl=this.pdfViewer.enableRtl;}drpDownBtn.appendTo(this.handWrittenSignatureItem);};AnnotationToolbar.prototype.updateSignatureCount=function(){this.openSignaturePopup=false;// eslint-disable-next-line
var signatureCollection=this.pdfViewerBase.signatureModule.signaturecollection;for(var collection=0;collection<signatureCollection.length;collection++){// eslint-disable-next-line
var colletionList=signatureCollection[collection];if(colletionList.image[0].imageData===''){}}};AnnotationToolbar.prototype.openSignature=function(){this.saveInitialCount=0;this.saveSignatureCount=0;for(var collection=this.pdfViewerBase.signatureModule.signaturecollection.length;collection>0;collection--){if(this.saveSignatureCount<this.pdfViewerBase.signatureModule.getSaveLimit(this.pdfViewer.handWrittenSignatureSettings.saveSignatureLimit)){// eslint-disable-next-line
var signatureCollection=this.pdfViewerBase.signatureModule.signaturecollection[collection-1];if(signatureCollection.image[0].imageData!==''){if(!signatureCollection.isInitial){this.saveSignatureCount++;// eslint-disable-next-line
var addedSignature=document.getElementById('sign_border_'+signatureCollection.image[0].id.split('_')[1]+'');// eslint-disable-next-line
var deleteSignature=document.getElementById('delete_'+signatureCollection.image[0].id.split('_')[1]+'');deleteSignature.style.backgroundClip='content-box';addedSignature.addEventListener('click',this.renderAddedSignature.bind(this));deleteSignature.addEventListener('click',this.deleteSavedSign.bind(this));deleteSignature.addEventListener('mouseover',this.hoverSignatureDelete.bind(this));deleteSignature.addEventListener('mouseleave',this.leaveSignatureDelete.bind(this));addedSignature.addEventListener('mouseover',this.hoverSignatureDelete.bind(this));addedSignature.addEventListener('mouseleave',this.leaveSignatureDelete.bind(this));}}}}for(var collection=this.pdfViewerBase.signatureModule.signaturecollection.length;collection>0;collection--){if(this.saveInitialCount<this.pdfViewerBase.signatureModule.getSaveLimit(this.pdfViewer.handWrittenSignatureSettings.saveInitialLimit)){// eslint-disable-next-line
var signatureCollection=this.pdfViewerBase.signatureModule.signaturecollection[collection-1];if(signatureCollection.image[0].imageData!==''){if(signatureCollection.isInitial){this.saveInitialCount++;// eslint-disable-next-line
var addedSignature=document.getElementById('sign_border_'+signatureCollection.image[0].id.split('_')[1]+'');// eslint-disable-next-line
var deleteSignature=document.getElementById('delete_'+signatureCollection.image[0].id.split('_')[1]+'');deleteSignature.style.backgroundClip='content-box';addedSignature.addEventListener('click',this.renderAddedSignature.bind(this));deleteSignature.addEventListener('click',this.deleteSavedSign.bind(this));deleteSignature.addEventListener('mouseover',this.hoverSignatureDelete.bind(this));deleteSignature.addEventListener('mouseleave',this.leaveSignatureDelete.bind(this));addedSignature.addEventListener('mouseover',this.hoverSignatureDelete.bind(this));addedSignature.addEventListener('mouseleave',this.leaveSignatureDelete.bind(this));}}}}};AnnotationToolbar.prototype.hoverSignatureDelete=function(){var eventTarget=event.target;if(eventTarget.id==='sign_'+eventTarget.id.split('_')[1]||eventTarget.classList.contains('e-pv-delete')){eventTarget.classList.add('e-pv-signaturehover');eventTarget.style.cursor='pointer';}};AnnotationToolbar.prototype.hoverInitialBtn=function(event){var eventTarget=event.target;var currentFieldID='';if(navigator.userAgent.indexOf('MSIE')!==-1||navigator.userAgent.indexOf('Trident')!==-1){currentFieldID=eventTarget.id;}else{currentFieldID=sf.base.isNullOrUndefined(event.path)?event.composedPath()[0].id:event.path[0].id;}if(currentFieldID!=='sign_'+currentFieldID.split("_")[1]&&currentFieldID!=='delete_'+currentFieldID.split("_")[1]){var liElement=document.getElementById(eventTarget.id);if(sf.base.isNullOrUndefined(liElement)){liElement=document.getElementById(eventTarget.parentElement.id);}if(liElement!=null&&(eventTarget.id!=='sign_'+eventTarget.id.split('_')[1]||eventTarget.id!=='sign_border_'+eventTarget.id.split('_')[2])){liElement.style.background='transparent';liElement.style.cursor='default';}else if(liElement.parentElement!=null&&(eventTarget.id!=='sign_'+eventTarget.id.split('_')[1]||eventTarget.id!=='sign_border_'+eventTarget.id.split('_')[2])){liElement.parentElement.style.background='transparent';liElement.parentElement.style.cursor='default';}}};AnnotationToolbar.prototype.hoverSignatureImage=function(){var eventTarget=event.target;if(eventTarget.id==='sign_'+eventTarget.id.split('_')[1]||eventTarget.classList.contains('e-pv-delete')){eventTarget.classList.add('e-pv-signaturehover');eventTarget.classList.remove('e-pv-signatureimage');eventTarget.style.cursor='pointer';}};AnnotationToolbar.prototype.leaveSignatureDelete=function(){var eventTarget=event.target;if(eventTarget.id==='sign_'+eventTarget.id.split('_')[1]||eventTarget.classList.contains('e-pv-delete')){eventTarget.classList.remove('e-pv-signaturehover');if(eventTarget.children[0]&&eventTarget.children[0].tagName==='IMG'){eventTarget.children[0].classList.remove('e-pv-signaturehover');}eventTarget.style.cursor='default';}};AnnotationToolbar.prototype.clickSignature=function(){this.pdfViewerBase.isInitialField=false;this.addSignature();};AnnotationToolbar.prototype.clickInitial=function(){this.pdfViewerBase.isInitialField=true;this.addSignature();};AnnotationToolbar.prototype.leaveSignatureImage=function(){var eventTarget=event.target;if(eventTarget.id==='sign_'+eventTarget.id.split('_')[1]||eventTarget.classList.contains('e-pv-delete')){eventTarget.classList.remove('e-pv-signaturehover');if(eventTarget.tagName==='IMG')eventTarget.classList.add('e-pv-signatureimage');if(eventTarget.children[0]&&eventTarget.children[0].tagName==='IMG'){eventTarget.children[0].classList.remove('e-pv-signaturehover');eventTarget.children[0].classList.add('e-pv-signatureimage');}eventTarget.style.cursor='default';}};AnnotationToolbar.prototype.addSignature=function(){this.deselectAllItems();this.showSignaturepanel();};AnnotationToolbar.prototype.renderAddedSignature=function(){this.pdfViewerBase.isAddedSignClicked=true;this.isSavedSignatureClicked=true;this.pdfViewerBase.signatureModule.RenderSavedSignature();};// eslint-disable-next-line
AnnotationToolbar.prototype.deleteSavedSign=function(event){event.stopPropagation();// eslint-disable-next-line
var signaturecollection=this.pdfViewerBase.signatureModule.signaturecollection;for(var collection=signaturecollection.length;collection>0;collection--){if(event.target.parentElement.children[0].id==='sign_'+signaturecollection[collection-1].image[0].id.split('_')[1]){// eslint-disable-next-line
var RemoveSignature=signaturecollection[collection-1];RemoveSignature.image[0].imageData='';this.pdfViewerBase.signatureModule.signaturecollection.splice(collection-1,1);break;}}event.target.parentElement.remove();};AnnotationToolbar.prototype.getTemplate=function(elementName,id,className){var element=sf.base.createElement(elementName,{id:this.pdfViewer.dataId+id});if(className){element.className=className;}return element.outerHTML;};// eslint-disable-next-line
AnnotationToolbar.prototype.createStampContainer=function(){var _this=this;this.stampElement=this.pdfViewerBase.getElement('_annotation_stamp');// eslint-disable-next-line max-len
this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement('_annotation_stamp'),this.pdfViewer.localeObj.getConstant('Add Stamp'));var contextMenuElement=sf.base.createElement('ul',{id:this.pdfViewer.dataId+'contextMenuElement'});this.pdfViewerBase.getElement('_annotation_stamp').appendChild(contextMenuElement);var items=[];if(this.pdfViewer.stampSettings.dynamicStamps&&this.pdfViewer.stampSettings.dynamicStamps.length>0){var dynamicStamps_1=[];items.push({text:this.pdfViewer.localeObj.getConstant('Dynamic'),label:'Dynamic',items:dynamicStamps_1});this.pdfViewer.stampSettings.dynamicStamps.forEach(function(stampItem,index){var name=DynamicStampItem[stampItem];switch(name){case'NotApproved':name='Not Approved';break;}dynamicStamps_1.push({text:_this.pdfViewer.localeObj.getConstant(name),label:name});});}if(this.pdfViewer.stampSettings.signStamps&&this.pdfViewer.stampSettings.signStamps.length>0){var signStamps_1=[];items.push({text:this.pdfViewer.localeObj.getConstant('Sign Here'),label:'Sign Here',items:signStamps_1});this.pdfViewer.stampSettings.signStamps.forEach(function(stampItem,index){var name=SignStampItem[stampItem];switch(name){case'InitialHere':name='Initial Here';break;case'SignHere':name='Sign Here';break;}signStamps_1.push({text:_this.pdfViewer.localeObj.getConstant(name),label:name});});}if(this.pdfViewer.stampSettings.standardBusinessStamps&&this.pdfViewer.stampSettings.standardBusinessStamps.length>0){var standardsBusinessStamps_1=[];items.push({text:this.pdfViewer.localeObj.getConstant('Standard Business'),label:'Standard Business',items:standardsBusinessStamps_1});this.pdfViewer.stampSettings.standardBusinessStamps.forEach(function(stampItem,index){var name=StandardBusinessStampItem[stampItem];switch(name){case'NotApproved':name='Not Approved';break;case'ForPublicRelease':name='For Public Release';break;case'NotForPublicRelease':name='Not For Public Release';break;case'ForComment':name='For Comment';break;case'PreliminaryResults':name='Preliminary Results';break;case'InformationOnly':name='Information Only';break;}standardsBusinessStamps_1.push({text:_this.pdfViewer.localeObj.getConstant(name),label:name});});}if(this.pdfViewer.customStampSettings.enableCustomStamp&&!sf.base.Browser.isDevice){if(items.length>0){items.push({separator:true});}items.push({text:this.pdfViewer.localeObj.getConstant('Custom Stamp'),label:'Custom Stamp',items:[]});}this.stampMenu=[{iconCss:'e-pv-stamp-icon e-pv-icon',items:items}];var menuOptions={items:this.stampMenu,cssClass:'e-custom-scroll',showItemOnClick:true,enableScrolling:true,beforeOpen:function beforeOpen(args){_this.resetFreeTextAnnot();if(args.parentItem.text===''&&_this.pdfViewer.customStampSettings.isAddToMenu&&args.items.length>0){// eslint-disable-next-line
var currentElements=null;for(var i=0;i<args.items.length;i++){if(args.items[i].text===_this.pdfViewer.localeObj.getConstant('Custom Stamp')){args.items[i].items=[];currentElements=args.items[i];break;}}// eslint-disable-next-line
var elements=_this.pdfViewerBase.customStampCollection;// eslint-disable-next-line
var stampElements=_this.pdfViewer.customStampSettings.customStamps;if(elements.length===0&&stampElements&&stampElements.length>0){for(var n=0;n<stampElements.length;n++){// eslint-disable-next-line max-len
elements.push({customStampName:stampElements[n].customStampName,customStampImageSource:stampElements[n].customStampImageSource});}}for(var m=0;m<elements.length;m++){if(currentElements!=null){currentElements.items.push({text:elements[m].customStampName});for(var i=0;i<args.items.length;i++){if(args.items[i].text===_this.pdfViewer.localeObj.getConstant('Custom Stamp')){var liElem=args.element.children[i];if(liElem&&!liElem.childElementCount){var span=document.createElement('span');span.className='e-icons e-caret e-menu-caret-icon';liElem.appendChild(span);liElem.setAttribute('aria-haspopup','true');liElem.setAttribute('aria-expanded','false');}}}}}}if(args.parentItem.text===_this.pdfViewer.localeObj.getConstant('Custom Stamp')){// eslint-disable-next-line
var stampElements=_this.pdfViewer.customStampSettings.customStamps;if(stampElements&&stampElements.length>10){sf.base.closest(args.element,'.e-menu-wrapper').style.height='350px';}}_this.stampParentID=args.parentItem.text;_this.menuItems.showItemOnClick=false;},beforeClose:function beforeClose(args){// eslint-disable-next-line max-len
if(args.parentItem&&args.parentItem.text!==_this.pdfViewer.localeObj.getConstant('Custom Stamp')&&args.parentItem.text!=='Standard Business'&&args.parentItem.text!=='Dynamic'&&args.parentItem.text!=='Sign Here'||!args.parentItem){_this.menuItems.showItemOnClick=true;}},select:function select(args){_this.pdfViewerBase.isAlreadyAdded=false;if(args.item.text===_this.pdfViewer.localeObj.getConstant('Custom Stamp')){_this.updateInteractionTools();_this.checkStampAnnotations();_this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=true;// eslint-disable-next-line
var stampImage=document.getElementById(_this.pdfViewer.dataId+'_stampElement');if(stampImage){stampImage.click();}_this.pdfViewer.annotation.triggerAnnotationUnselectEvent();// eslint-disable-next-line max-len
}else if(_this.stampParentID===_this.pdfViewer.localeObj.getConstant('Custom Stamp')&&args.item.text!==''){// eslint-disable-next-line
var elements=_this.pdfViewerBase.customStampCollection;for(var n=0;n<elements.length;n++){if(elements[n].customStampName===args.item.text){_this.pdfViewer.annotationModule.stampAnnotationModule.customStampName=args.item.text;_this.checkStampAnnotations();_this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=true;_this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=true;_this.pdfViewerBase.stampAdded=true;_this.pdfViewerBase.isAlreadyAdded=true;// eslint-disable-next-line max-len
_this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(elements[n].customStampImageSource);_this.pdfViewerBase.stampAdded=false;}}// eslint-disable-next-line max-len
}else if(args.item.text!==_this.pdfViewer.localeObj.getConstant('Dynamic')&&args.item.text!==''&&args.item.text!=='Standard Business'&&(_this.stampParentID==='Sign Here'||args.item.text!=='Sign Here')){_this.updateInteractionTools();_this.checkStampAnnotations();_this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=true;_this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=true;_this.pdfViewerBase.stampAdded=true;_this.pdfViewer.annotation.triggerAnnotationUnselectEvent();if(_this.stampParentID===_this.pdfViewer.localeObj.getConstant('Dynamic')){_this.pdfViewerBase.isDynamicStamp=true;_this.pdfViewer.annotationModule.stampAnnotationModule.retrieveDynamicStampAnnotation(args.item.label);}else{_this.pdfViewerBase.isDynamicStamp=false;_this.pdfViewer.annotationModule.stampAnnotationModule.retrievestampAnnotation(args.item.label);}if(sf.base.Browser.isDevice){_this.stampToolMobileForMobile(_this.pdfViewer.dataId+'_annotation_stamp');}}}};this.menuItems=new sf.navigations.Menu(menuOptions,'#'+this.pdfViewer.dataId+'contextMenuElement');contextMenuElement.parentElement.classList.add('e-pv-stamp');if(this.pdfViewer.enableRtl){this.menuItems.enableRtl=true;}return contextMenuElement;};/**
     * @private
     */AnnotationToolbar.prototype.createCustomStampElement=function(){// eslint-disable-next-line
var stampImage=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_stampElement',attrs:{'type':'file'}});stampImage.setAttribute('accept','.jpg,.jpeg,.png');stampImage.style.position='absolute';stampImage.style.left='0px';stampImage.style.top='0px';stampImage.style.visibility='hidden';document.body.appendChild(stampImage);stampImage.addEventListener('change',this.addStampImage);};AnnotationToolbar.prototype.checkStampAnnotations=function(){// eslint-disable-next-line max-len
if(this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode&&this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations){for(var i=0;i<this.pdfViewer.selectedItems.annotations.length;i++){// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[i];// eslint-disable-next-line
if(annotation&&!annotation.annotName&&!annotation.author&&(annotation.shapeAnnotationType!=='Shape'||annotation.shapeAnnotationType!=='Image')){this.pdfViewer.remove(annotation);this.pdfViewer.annotation.renderAnnotations(annotation.pageIndex,null,null,null);this.pdfViewer.clearSelection(annotation.pageIndex);}}}};AnnotationToolbar.prototype.createDropDowns=function(isPath){var _this=this;if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.shapeElement=this.pdfViewerBase.getElement('_annotation_shapes');var shapeToolbar=this.createShapeOptions(this.shapeElement.id,true);// eslint-disable-next-line max-len
this.shapeDropDown=this.createDropDownButton(this.shapeElement,'e-pv-annotation-shape-icon',shapeToolbar.element,this.pdfViewer.localeObj.getConstant('Add Shapes'));this.calibrateElement=this.pdfViewerBase.getElement('_annotation_calibrate');var calibrateToolbar=this.createShapeOptions(this.calibrateElement.id,false);// eslint-disable-next-line max-len
this.calibrateDropDown=this.createDropDownButton(this.calibrateElement,'e-pv-annotation-calibrate-icon',calibrateToolbar.element,this.pdfViewer.localeObj.getConstant('Calibrate'));}if(!isPath){this.colorDropDownElement=this.pdfViewerBase.getElement('_annotation_color');this.colorPalette=this.createColorPicker(this.colorDropDownElement.id);this.colorPalette.change=this.onColorPickerChange.bind(this);// eslint-disable-next-line max-len
this.colorDropDown=this.createDropDownButton(this.colorDropDownElement,'e-pv-annotation-color-icon',this.colorPalette.element.parentElement,this.pdfViewer.localeObj.getConstant('Color edit'));this.colorDropDown.beforeOpen=this.colorDropDownBeforeOpen.bind(this);this.colorDropDown.open=this.colorDropDownOpen.bind(this);this.pdfViewerBase.getElement('_annotation_color-popup').addEventListener('click',this.onColorPickerCancelClick.bind(this));}if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.strokeDropDownElement=this.pdfViewerBase.getElement('_annotation_stroke');this.strokeColorPicker=this.createColorPicker(this.strokeDropDownElement.id);this.strokeColorPicker.change=this.onStrokePickerChange.bind(this);// eslint-disable-next-line max-len
this.strokeDropDown=this.createDropDownButton(this.strokeDropDownElement,'e-pv-annotation-stroke-icon',this.strokeColorPicker.element.parentElement,this.pdfViewer.localeObj.getConstant('Stroke edit'));this.strokeDropDown.beforeOpen=this.strokeDropDownBeforeOpen.bind(this);this.strokeDropDown.open=this.strokeDropDownOpen.bind(this);this.pdfViewerBase.getElement('_annotation_stroke-popup').addEventListener('click',this.onStrokePickerCancelClick.bind(this));this.thicknessElement=this.pdfViewerBase.getElement('_annotation_thickness');var thicknessContainer=this.createThicknessSlider(this.thicknessElement.id);// eslint-disable-next-line max-len
this.thicknessDropDown=this.createDropDownButton(this.thicknessElement,'e-pv-annotation-thickness-icon',thicknessContainer,this.pdfViewer.localeObj.getConstant('Change thickness'));this.thicknessDropDown.beforeOpen=this.thicknessDropDownBeforeOpen.bind(this);this.thicknessSlider.change=this.thicknessChange.bind(this);this.thicknessSlider.changed=this.thicknessChange.bind(this);this.thicknessDropDown.open=this.thicknessDropDownOpen.bind(this);}if(!isPath){this.opacityDropDownElement=this.pdfViewerBase.getElement('_annotation_opacity');var sliderContainer=this.createSlider(this.opacityDropDownElement.id);// eslint-disable-next-line max-len
this.opacityDropDown=this.createDropDownButton(this.opacityDropDownElement,'e-pv-annotation-opacity-icon',sliderContainer,this.pdfViewer.localeObj.getConstant('Opacity edit'));this.opacityDropDown.beforeOpen=this.opacityDropDownBeforeOpen.bind(this);this.opacitySlider.change=this.opacityChange.bind(this);this.opacitySlider.changed=this.opacityChange.bind(this);this.opacityDropDown.open=this.opacityDropDownOpen.bind(this);}if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.fontFamilyElement=this.pdfViewerBase.getElement('_annotation_fontname');this.createDropDownListForFamily(this.fontFamilyElement);//this.fontFamilyElement.style.textAlign = 'left';
this.fontFamilyElement.addEventListener('change',function(){_this.onFontFamilyChange.bind(_this);});this.fontSizeElement=this.pdfViewerBase.getElement('_annotation_fontsize');this.createDropDownListForSize(this.fontSizeElement);this.fontColorElement=this.pdfViewerBase.getElement('_annotation_textcolor');this.fontColorPalette=this.createColorPicker(this.fontColorElement.id);this.fontColorPalette.change=this.onFontColorChange.bind(this);// eslint-disable-next-line max-len
this.fontColorDropDown=this.createDropDownButton(this.fontColorElement,'e-pv-annotation-textcolor-icon',this.fontColorPalette.element.parentElement,this.pdfViewer.localeObj.getConstant('Font color'));this.textAlignElement=this.pdfViewerBase.getElement('_annotation_textalign');this.alignmentToolbar=this.createShapeOptions(this.textAlignElement.id,undefined,true);// eslint-disable-next-line max-len
this.textAlignDropDown=this.createDropDownButton(this.textAlignElement,'e-pv-annotation-textalign-icon',this.alignmentToolbar.element,this.pdfViewer.localeObj.getConstant('Text Align'));this.textAlignDropDown.beforeOpen=this.textAlignDropDownBeforeOpen.bind(this);this.textPropElement=this.pdfViewerBase.getElement('_annotation_textproperties');this.propertiesToolbar=this.createShapeOptions(this.textPropElement.id,undefined,false,true);// eslint-disable-next-line max-len
this.textPropertiesDropDown=this.createPropDropDownButton(this.textPropElement,'e-pv-annotation-textprop-icon',this.propertiesToolbar.element,this.pdfViewer.localeObj.getConstant('Text Properties'));this.textPropertiesDropDown.beforeOpen=this.textPropertiesDropDownBeforeOpen.bind(this);}};AnnotationToolbar.prototype.mobileColorpicker=function(id){var _this=this;this.opacityDropDownElement=this.pdfViewerBase.getElement('_annotation_opacity');var sliderContainer=this.createSlider(this.opacityDropDownElement.id);// eslint-disable-next-line max-len
this.opacityDropDown=this.createDropDownButton(this.opacityDropDownElement,'e-pv-annotation-opacity-icon',sliderContainer,this.pdfViewer.localeObj.getConstant('Opacity edit'));this.opacityDropDown.beforeOpen=this.opacityDropDownBeforeOpen.bind(this);this.opacitySlider.change=this.opacityChange.bind(this);this.opacitySlider.changed=this.opacityChange.bind(this);this.opacityDropDown.open=this.opacityDropDownOpen.bind(this);if(id===this.pdfViewer.dataId+'_annotation_shapes'){id=this.pdfViewer.dataId+'_annotation_shapesIcon';}else if(id===this.pdfViewer.dataId+'_annotation_calibrate'){id=this.pdfViewer.dataId+'_annotation_calibrateIcon';}else if(id===this.pdfViewer.dataId+'_highlight'){id=this.pdfViewer.dataId+'_highlightIcon';}else if(id===this.pdfViewer.dataId+'_underline'){id=this.pdfViewer.dataId+'_underlineIcon';}else if(id===this.pdfViewer.dataId+'_strikethrough'){id=this.pdfViewer.dataId+'_strikethroughIcon';}// eslint-disable-next-line max-len
if(id===this.pdfViewer.dataId+'_annotation_shapesIcon'||id===this.pdfViewer.dataId+'_annotation_calibrateIcon'||id===this.pdfViewer.dataId+'_annotation_freeTextEdit'||// eslint-disable-next-line max-len
id===this.pdfViewer.dataId+'_highlightIcon'||id===this.pdfViewer.dataId+'_underlineIcon'||id===this.pdfViewer.dataId+'_strikethroughIcon'||id===this.pdfViewer.dataId+'_annotation_inkIcon'||id===this.pdfViewer.dataId+'_annotation_handwrittenSign'){if(id!==this.pdfViewer.dataId+'_annotation_handwrittenSign'&&id!==this.pdfViewer.dataId+'_annotation_inkIcon'){this.colorDropDownElement=this.pdfViewerBase.getElement('_annotation_color');this.colorPalette=this.createColorPicker(this.colorDropDownElement.id);this.colorPalette.change=this.onColorPickerChange.bind(this);// eslint-disable-next-line max-len
this.colorDropDown=this.createDropDownButton(this.colorDropDownElement,'e-pv-annotation-color-icon',this.colorPalette.element.parentElement,this.pdfViewer.localeObj.getConstant('Color edit'));this.colorDropDown.beforeOpen=this.colorDropDownBeforeOpen.bind(this);this.colorDropDown.open=this.colorDropDownOpen.bind(this);// eslint-disable-next-line max-len
this.pdfViewerBase.getElement('_annotation_color-popup').addEventListener('click',this.onColorPickerCancelClick.bind(this));}if(id===this.pdfViewer.dataId+'_annotation_freeTextEdit'){this.fontFamilyElement=this.pdfViewerBase.getElement('_annotation_fontname');this.createDropDownListForFamily(this.fontFamilyElement);this.fontFamilyElement.style.textAlign='left';this.fontFamilyElement.addEventListener('change',function(){_this.onFontFamilyChange.bind(_this);});this.fontSizeElement=this.pdfViewerBase.getElement('_annotation_fontsize');this.createDropDownListForSize(this.fontSizeElement);this.fontColorElement=this.pdfViewerBase.getElement('_annotation_textcolor');this.fontColorPalette=this.createColorPicker(this.fontColorElement.id);this.fontColorPalette.change=this.onFontColorChange.bind(this);// eslint-disable-next-line max-len
this.fontColorDropDown=this.createDropDownButton(this.fontColorElement,'e-pv-annotation-textcolor-icon',this.fontColorPalette.element.parentElement,this.pdfViewer.localeObj.getConstant('Font color'));this.textAlignElement=this.pdfViewerBase.getElement('_annotation_textalign');this.alignmentToolbar=this.createShapeOptions(this.textAlignElement.id,undefined,true);// eslint-disable-next-line max-len
this.textAlignDropDown=this.createDropDownButton(this.textAlignElement,'e-pv-annotation-textalign-icon',this.alignmentToolbar.element,this.pdfViewer.localeObj.getConstant('Text Align'));this.textAlignDropDown.beforeOpen=this.textAlignDropDownBeforeOpen.bind(this);this.textPropElement=this.pdfViewerBase.getElement('_annotation_textproperties');this.propertiesToolbar=this.createShapeOptions(this.textPropElement.id,undefined,false,true);// eslint-disable-next-line max-len
this.textPropertiesDropDown=this.createPropDropDownButton(this.textPropElement,'e-pv-annotation-textprop-icon',this.propertiesToolbar.element,this.pdfViewer.localeObj.getConstant('Text Properties'));this.textPropertiesDropDown.beforeOpen=this.textPropertiesDropDownBeforeOpen.bind(this);}// eslint-disable-next-line max-len
if(id===this.pdfViewer.dataId+'_annotation_shapesIcon'||id===this.pdfViewer.dataId+'_annotation_calibrateIcon'||id===this.pdfViewer.dataId+'_annotation_freeTextEdit'||id===this.pdfViewer.dataId+'_annotation_inkIcon'||id===this.pdfViewer.dataId+'_annotation_handwrittenSign'){this.thicknessElement=this.pdfViewerBase.getElement('_annotation_thickness');var thicknessContainer=this.createThicknessSlider(this.thicknessElement.id);// eslint-disable-next-line max-len
this.thicknessDropDown=this.createDropDownButton(this.thicknessElement,'e-pv-annotation-thickness-icon',thicknessContainer,this.pdfViewer.localeObj.getConstant('Change thickness'));this.thicknessDropDown.beforeOpen=this.thicknessDropDownBeforeOpen.bind(this);this.thicknessSlider.change=this.thicknessChange.bind(this);this.thicknessSlider.changed=this.thicknessChange.bind(this);this.thicknessDropDown.open=this.thicknessDropDownOpen.bind(this);this.strokeDropDownElement=this.pdfViewerBase.getElement('_annotation_stroke');this.strokeColorPicker=this.createColorPicker(this.strokeDropDownElement.id);this.strokeColorPicker.change=this.onStrokePickerChange.bind(this);// eslint-disable-next-line max-len
this.strokeDropDown=this.createDropDownButton(this.strokeDropDownElement,'e-pv-annotation-stroke-icon',this.strokeColorPicker.element.parentElement,this.pdfViewer.localeObj.getConstant('Stroke edit'));this.strokeDropDown.beforeOpen=this.strokeDropDownBeforeOpen.bind(this);this.strokeDropDown.open=this.strokeDropDownOpen.bind(this);// eslint-disable-next-line max-len
this.pdfViewerBase.getElement('_annotation_stroke-popup').addEventListener('click',this.onStrokePickerCancelClick.bind(this));}}};AnnotationToolbar.prototype.opacityDropDownOpen=function(args){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){args.element.parentElement.style.left='0px';args.element.parentElement.style.top=this.pdfViewerBase.viewerContainer.clientHeight+'px';}else{this.calculateToolbarPosition(args);}};AnnotationToolbar.prototype.onColorPickerCancelClick=function(event){if(event.target.classList.contains('e-cancel')){this.colorDropDown.toggle();}};AnnotationToolbar.prototype.onStrokePickerCancelClick=function(event){if(event.target.classList.contains('e-cancel')){this.strokeDropDown.toggle();}};AnnotationToolbar.prototype.colorDropDownBeforeOpen=function(args){this.colorPalette.noColor=false;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){this.colorPalette.value=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color;}else{this.setCurrentColorInPicker();}}if(this.pdfViewer.selectedItems.annotations.length===1){this.colorPalette.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill;this.colorPalette.noColor=true;}else{this.setCurrentColorInPicker();}this.colorPalette.refresh();this.updateColorInIcon(this.colorDropDownElement,this.colorPalette.value);};/**
     * @private
     */AnnotationToolbar.prototype.setCurrentColorInPicker=function(){if(!sf.base.isBlazor()){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule){switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case'Highlight':// eslint-disable-next-line max-len
this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);break;case'Underline':// eslint-disable-next-line max-len
this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);break;case'Strikethrough':// eslint-disable-next-line max-len
this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor);break;}}if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode){case'Line':// eslint-disable-next-line max-len
this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.lineFillColor);break;case'Arrow':// eslint-disable-next-line max-len
this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.arrowFillColor);break;case'Rectangle':// eslint-disable-next-line max-len
this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.rectangleFillColor);break;case'Circle':// eslint-disable-next-line max-len
this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.circleFillColor);break;case'Polygon':// eslint-disable-next-line max-len
this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.polygonFillColor);break;}}if(this.colorDropDownElement){this.updateColorInIcon(this.colorDropDownElement,this.colorPalette.value);}}};AnnotationToolbar.prototype.colorDropDownOpen=function(args){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){// eslint-disable-next-line max-len
args.element.parentElement.style.top=this.pdfViewerBase.viewerContainer.clientHeight/2+'px';}this.colorPalette.refresh();};AnnotationToolbar.prototype.strokeDropDownBeforeOpen=function(args){if(this.pdfViewer.selectedItems.annotations.length===1){this.strokeColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;}else{this.setCurrentStrokeColorInPicker();}this.strokeColorPicker.refresh();this.updateColorInIcon(this.strokeDropDownElement,this.strokeColorPicker.value);this.updateInkannotationItems();};AnnotationToolbar.prototype.setCurrentStrokeColorInPicker=function(){if(!sf.base.isBlazor()){if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode){case'Line':// eslint-disable-next-line max-len
this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.lineStrokeColor);break;case'Arrow':// eslint-disable-next-line max-len
this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.arrowStrokeColor);break;case'Rectangle':// eslint-disable-next-line max-len
this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.rectangleStrokeColor);break;case'Circle':// eslint-disable-next-line max-len
this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.circleStrokeColor);break;case'Polygon':// eslint-disable-next-line max-len
this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.polygonStrokeColor);break;}}}};AnnotationToolbar.prototype.strokeDropDownOpen=function(args){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){args.element.parentElement.style.top=this.pdfViewerBase.viewerContainer.clientHeight/2+'px';}this.strokeColorPicker.refresh();};// eslint-disable-next-line
AnnotationToolbar.prototype.onFontColorChange=function(args){// eslint-disable-next-line
var currentColor;if(!sf.base.isBlazor()){currentColor=args.currentValue.hex===''?'#ffffff00':args.currentValue.hex;}else{currentColor=args;}if(this.pdfViewer.selectedItems.annotations.length===1){this.pdfViewer.annotation.modifyFontColor(currentColor);}else{this.pdfViewer.freeTextSettings.fontColor=currentColor;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}if(sf.base.isBlazor()){this.fontColorElementInBlazor=this.pdfViewer.element.querySelector('.e-pv-annotation-textcolor-container');this.updateColorInIcon(this.fontColorElementInBlazor,currentColor);}else{this.updateColorInIcon(this.fontColorElement,currentColor);this.fontColorDropDown.toggle();}};// eslint-disable-next-line
AnnotationToolbar.prototype.onFontFamilyChange=function(args){var currentValue;if(!sf.base.isBlazor()){currentValue=args&&args.fontFamily&&args.fontFamily.value?args.fontFamily.value:'';}else{currentValue=args;}if(this.pdfViewer.selectedItems.annotations.length===1&&currentValue){this.pdfViewer.annotation.modifyFontFamily(currentValue);}else{this.pdfViewer.freeTextSettings.fontFamily=currentValue;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}};// eslint-disable-next-line
AnnotationToolbar.prototype.onFontSizeChange=function(args){var currentValue;if(!sf.base.isBlazor()){currentValue=args&&args.fontSize&&args.fontSize.value?args.fontSize.value:'';}else{currentValue=args;}var fontSize=parseFloat(currentValue);if(this.pdfViewer.selectedItems.annotations.length===1&&currentValue){this.pdfViewer.annotation.modifyFontSize(fontSize);}else{this.pdfViewer.freeTextSettings.fontSize=fontSize;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}};AnnotationToolbar.prototype.textAlignDropDownBeforeOpen=function(args){if(this.pdfViewer.selectedItems.annotations.length===1){if(args.element.getElementsByTagName('button')&&args.element.getElementsByTagName('button').length>0){// eslint-disable-next-line
var dropDownOptions=args.element.getElementsByTagName('button');// eslint-disable-next-line
var selectedAnnotation=this.pdfViewer.selectedItems.annotations[0];for(var n=0;n<dropDownOptions.length;n++){if(dropDownOptions[n]){dropDownOptions[n].classList.remove('textprop-option-active');// eslint-disable-next-line max-len
if(dropDownOptions[n].id===this.pdfViewer.dataId+'_left_align'&&selectedAnnotation.textAlign==='Left'){dropDownOptions[n].classList.add('textprop-option-active');}// eslint-disable-next-line max-len
if(dropDownOptions[n].id===this.pdfViewer.dataId+'_right_align'&&selectedAnnotation.textAlign==='Right'){dropDownOptions[n].classList.add('textprop-option-active');}// eslint-disable-next-line max-len
if(dropDownOptions[n].id===this.pdfViewer.dataId+'_center_align'&&selectedAnnotation.textAlign==='Center'){dropDownOptions[n].classList.add('textprop-option-active');}// eslint-disable-next-line max-len
if(dropDownOptions[n].id===this.pdfViewer.dataId+'_justify_align'&&selectedAnnotation.textAlign==='Justify'){dropDownOptions[n].classList.add('textprop-option-active');}}}}}};AnnotationToolbar.prototype.textPropertiesDropDownBeforeOpen=function(args){if(this.pdfViewer.selectedItems.annotations.length===1){if(args.element.getElementsByTagName('button')&&args.element.getElementsByTagName('button').length>0){// eslint-disable-next-line
var dropDownOptions=args.element.getElementsByTagName('button');// eslint-disable-next-line
var selectedAnnotation=this.pdfViewer.selectedItems.annotations[0];for(var n=0;n<dropDownOptions.length;n++){if(dropDownOptions[n]){dropDownOptions[n].classList.remove('textprop-option-active');if(dropDownOptions[n].id===this.pdfViewer.dataId+'_bold'&&selectedAnnotation.font.isBold){dropDownOptions[n].classList.add('textprop-option-active');}if(dropDownOptions[n].id===this.pdfViewer.dataId+'_italic'&&selectedAnnotation.font.isItalic){dropDownOptions[n].classList.add('textprop-option-active');}if(dropDownOptions[n].id===this.pdfViewer.dataId+'_strikeout'&&selectedAnnotation.font.isStrikeout){dropDownOptions[n].classList.add('textprop-option-active');}// eslint-disable-next-line max-len
if(dropDownOptions[n].id===this.pdfViewer.dataId+'_underline_textinput'&&selectedAnnotation.font.isUnderline){dropDownOptions[n].classList.add('textprop-option-active');}}}}}};// eslint-disable-next-line
AnnotationToolbar.prototype.onClickTextAlignment=function(args){var currentValue;if(sf.base.isBlazor()){currentValue=args;}else{currentValue=args&&args.item&&args.item.value?args.item.value:'';}if(this.pdfViewer.selectedItems.annotations.length===1&&currentValue){this.pdfViewer.annotation.modifyTextAlignment(currentValue);}else{this.pdfViewer.freeTextSettings.textAlignment=args.item.value;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}this.updateTextAlignInIcon(currentValue);};// eslint-disable-next-line
AnnotationToolbar.prototype.onClickTextProperties=function(args){var currentValue;if(sf.base.isBlazor()){currentValue=args;}else{currentValue=args&&args.item&&args.item.value?args.item.value:'';}if(this.pdfViewer.selectedItems.annotations.length===1&&currentValue){var fontInfo={isBold:undefined,isItalic:undefined,isStrikeout:undefined,isUnderline:undefined};if(currentValue==='bold'){fontInfo.isBold=!this.pdfViewer.selectedItems.annotations[0].font.isBold;}else if(currentValue==='italic'){fontInfo.isItalic=!this.pdfViewer.selectedItems.annotations[0].font.isItalic;}else if(currentValue==='underline'){fontInfo.isUnderline=!this.pdfViewer.selectedItems.annotations[0].font.isUnderline;}else if(currentValue==='strikeout'){fontInfo.isStrikeout=!this.pdfViewer.selectedItems.annotations[0].font.isStrikeout;}this.pdfViewer.annotation.modifyTextProperties(fontInfo,currentValue);}else{if(currentValue==='bold'){if(this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold){this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold=false;}else{this.pdfViewer.freeTextSettings.fontStyle=1;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}}else if(currentValue==='italic'){if(this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic){this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic=false;}else{this.pdfViewer.freeTextSettings.fontStyle=2;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}}else if(currentValue==='underline'){if(this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline){this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline=false;}else{this.pdfViewer.freeTextSettings.fontStyle=4;this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough=false;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}}else if(currentValue==='strikeout'){if(this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough){this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough=false;}else{this.pdfViewer.freeTextSettings.fontStyle=8;this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline=false;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}}}this.updateTextPropertySelection(currentValue);};// eslint-disable-next-line
AnnotationToolbar.prototype.opacityChange=function(args){var opacityValue=1;if(args!==null&&args!==undefined){opacityValue=args;opacityValue=opacityValue/100;}if(this.pdfViewer.annotationModule.textMarkupAnnotationModule){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null,opacityValue);}else{switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case'Highlight':this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity=opacityValue;break;case'Underline':this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity=opacityValue;break;case'Strikethrough':this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity=opacityValue;break;}}}if(this.pdfViewer.selectedItems.annotations.length===1){// eslint-disable-next-line
var currentAnnotations=this.pdfViewer.selectedItems.annotations[0];// eslint-disable-next-line max-len
if(currentAnnotations!=null&&(currentAnnotations.shapeAnnotationType==='Stamp'||currentAnnotations.shapeAnnotationType==='Image')){var clonedObject=cloneObject(currentAnnotations);var redoClonedObject=cloneObject(currentAnnotations);redoClonedObject.opacity=opacityValue;this.pdfViewer.nodePropertyChange(currentAnnotations,{opacity:opacityValue});this.pdfViewer.annotation.triggerAnnotationPropChange(currentAnnotations,false,false,false,true);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(this.pdfViewer.selectedItems.annotations[0].pageIndex,null,this.pdfViewer.selectedItems.annotations[0],'stampOpacity','',clonedObject,redoClonedObject);// eslint-disable-next-line max-len
this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(this.pdfViewer.selectedItems.annotations[0],null,'opacity');}else{this.pdfViewer.annotation.modifyOpacity(opacityValue,true);}}else{if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case'Line':this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity=opacityValue;break;case'Arrow':this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity=opacityValue;break;case'Rectangle':this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity=opacityValue;break;case'Circle':this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity=opacityValue;break;case'Polygon':this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity=opacityValue;break;}}// eslint-disable-next-line
var annotationModule=this.pdfViewer.annotation;if(annotationModule&&annotationModule.inkAnnotationModule){this.pdfViewer.inkAnnotationSettings.opacity=opacityValue;}if(this.pdfViewer.drawingObject){this.pdfViewer.drawingObject.opacity=opacityValue;if(this.pdfViewer.drawingObject.shapeAnnotationType==='FreeText'){this.pdfViewer.freeTextSettings.opacity=opacityValue;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}}}};AnnotationToolbar.prototype.opacityDropDownBeforeOpen=function(args){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){this.isCurrentAnnotationOpacitySet=true;// eslint-disable-next-line max-len
this.opacitySlider.value=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity*100;}else{switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case'Highlight':this.opacitySlider.value=this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity*100;break;case'Underline':this.opacitySlider.value=this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity*100;break;case'Strikethrough':this.opacitySlider.value=this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity*100;break;}}}if(this.pdfViewer.selectedItems.annotations.length===1){this.opacitySlider.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity*100;}else{if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case'Line':this.opacitySlider.value=this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity*100;break;case'Arrow':this.opacitySlider.value=this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity*100;break;case'Rectangle':this.opacitySlider.value=this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity*100;break;case'Circle':this.opacitySlider.value=this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity*100;break;case'Polygon':this.opacitySlider.value=this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity*100;break;}}}this.updateOpacityIndicator();this.updateInkannotationItems();};AnnotationToolbar.prototype.thicknessDropDownBeforeOpen=function(){if(this.pdfViewer.selectedItems.annotations.length===1){this.thicknessSlider.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;}else{if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case'Line':this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.lineThickness;break;case'Arrow':this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness;break;case'Rectangle':this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness;break;case'Circle':this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.circleThickness;break;case'Polygon':this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness;break;}}}this.updateThicknessIndicator();this.updateInkannotationItems();};// eslint-disable-next-line
AnnotationToolbar.prototype.thicknessDropDownOpen=function(args){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){args.element.parentElement.style.left='0px';args.element.parentElement.style.top=this.pdfViewerBase.viewerContainer.clientHeight+'px';}else{this.calculateToolbarPosition(args);}};AnnotationToolbar.prototype.calculateToolbarPosition=function(args){if(args.element&&args.element.parentElement){var leftValue=parseFloat(args.element.parentElement.style.left);var width=args.element.parentElement.offsetWidth;if(leftValue+width<this.pdfViewer.element.offsetWidth+10){args.element.parentElement.style.left=leftValue-width+'px';}}};// eslint-disable-next-line
AnnotationToolbar.prototype.thicknessChangeInBlazor=function(args){if(this.pdfViewer.selectedItems.annotations.length===1){this.pdfViewer.annotation.modifyThickness(args);}else{this.ShapeThickness(args);}};AnnotationToolbar.prototype.thicknessChange=function(args){if(this.pdfViewer.selectedItems.annotations.length===1){if(args.name==='changed'){this.pdfViewer.annotation.modifyThickness(args.value);if(!sf.base.isBlazor()){this.updateThicknessIndicator();}var annotationModule=this.pdfViewer.annotation;if(annotationModule&&annotationModule.inkAnnotationModule){this.pdfViewer.inkAnnotationSettings.thickness=args.value;}}}else{this.ShapeThickness(args.value);}};// eslint-disable-next-line
AnnotationToolbar.prototype.ShapeThickness=function(args){if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case'Line':this.pdfViewer.annotation.shapeAnnotationModule.lineThickness=args;break;case'Arrow':this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness=args;break;case'Rectangle':this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness=args;break;case'Circle':this.pdfViewer.annotation.shapeAnnotationModule.circleThickness=args;break;case'Polygon':this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness=args;break;}// eslint-disable-next-line
var annotationModule_1=this.pdfViewer.annotation;if(annotationModule_1&&annotationModule_1.inkAnnotationModule){this.pdfViewer.inkAnnotationSettings.thickness=args.value;}if(this.pdfViewer.drawingObject){this.pdfViewer.drawingObject.thickness=args.value;}if(this.pdfViewer.drawingObject&&this.pdfViewer.drawingObject.shapeAnnotationType==='FreeText'){this.pdfViewer.freeTextSettings.borderWidth=args.value;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}}// eslint-disable-next-line
var annotationModule=this.pdfViewer.annotation;if(annotationModule&&annotationModule.inkAnnotationModule){this.pdfViewer.inkAnnotationSettings.thickness=args;}if(this.pdfViewer.drawingObject){this.pdfViewer.drawingObject.thickness=args;}if(this.pdfViewer.drawingObject&&this.pdfViewer.drawingObject.shapeAnnotationType==='FreeText'){this.pdfViewer.freeTextSettings.borderWidth=args;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}if(!sf.base.isBlazor()){this.updateThicknessIndicator();}};AnnotationToolbar.prototype.createDropDownButton=function(element,iconClass,target,tooltipText){// eslint-disable-next-line max-len
var dropDownButton=new sf.splitbuttons.DropDownButton({iconCss:iconClass+' e-pv-icon',target:target});if(this.pdfViewer.enableRtl){dropDownButton.enableRtl=true;}dropDownButton.appendTo(element);this.primaryToolbar.createTooltip(element,tooltipText);return dropDownButton;};AnnotationToolbar.prototype.createShapeOptions=function(idString,isShape,isAlign,isTextProp){var toolbarElement=sf.base.createElement('div',{id:idString+'_target',className:'e-pv-shapes-toolbar'});document.body.appendChild(toolbarElement);var toolbar;if(isAlign){toolbar=new sf.navigations.Toolbar({items:this.textAlignmentToolbarItems(),overflowMode:'MultiRow'},toolbarElement);toolbar.isStringTemplate=true;this.afterAlignmentToolbarCreation();}else if(isTextProp){toolbar=new sf.navigations.Toolbar({items:this.textPropertiesToolbarItems(),overflowMode:'MultiRow'},toolbarElement);toolbar.isStringTemplate=true;this.afterPropertiesToolbarCreation();}else{if(isShape){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){// eslint-disable-next-line max-len
toolbar=new sf.navigations.Toolbar({items:this.createShapeToolbarItems(),overflowMode:'MultiRow',clicked:this.onShapeToolbarClicked.bind(this)},toolbarElement);toolbar.isStringTemplate=true;this.afterShapeToolbarCreation();}else{// eslint-disable-next-line max-len
this.toolbarElement=sf.base.createElement('div',{id:idString+'_target',className:'e-pv-mobile-annotation-toolbar',styles:'bottom: 0px; position: absolute; width: 100%; float: left'});this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);// eslint-disable-next-line max-len
toolbar=new sf.navigations.Toolbar({items:this.createShapeToolbarItemsForMobile(),overflowMode:'Scrollable',clicked:this.onShapeToolbarClicked.bind(this)},this.toolbarElement);toolbar.isStringTemplate=true;this.afterShapeToolbarCreationForMobile();}}else{// eslint-disable-next-line max-len
toolbar=new sf.navigations.Toolbar({items:this.createCalibrateToolbarItems(),overflowMode:'MultiRow',clicked:this.onCalibrateToolbarClicked.bind(this)},toolbarElement);toolbar.isStringTemplate=true;this.afterCalibrateToolbarCreation();}}return toolbar;};// eslint:disable-next-line
AnnotationToolbar.prototype.createPropertyToolbarForMobile=function(shapeType){var _this=this;var colorTemplate=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span','_annotation_color','e-pv-annotation-color-container');// eslint-disable-next-line max-len
var strokeTemplate=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span','_annotation_stroke','e-pv-annotation-stroke-container');var thicknessTemplate=this.getTemplate('span','_annotation_thickness','e-pv-annotation-thickness-container');var opacityTemplate=this.getTemplate('span','_annotation_opacity','e-pv-annotation-opacity-container');var fontFamilyTemplate=this.getTemplate('input','_annotation_fontname','e-pv-annotation-fontname-container');var fontSizeTemplate=this.getTemplate('input','_annotation_fontsize','e-pv-annotation-fontsize-container');var textColorTemplate=this.getTemplate('span','_annotation_textcolor','e-pv-annotation-textcolor-container');var alignmentTemplate=this.getTemplate('span','_annotation_textalign','e-pv-annotation-textalign-container');// eslint-disable-next-line max-len
var textPropertiesTemplate=this.getTemplate('span','_annotation_textproperties','e-pv-annotation-textprop-container');// eslint:disable-next-line
var items=[];// eslint-disable-next-line max-len
if(shapeType==='Polygon'||shapeType==='Rectangle'||shapeType==='Ellipse'||shapeType==='Line'||shapeType==='LineWidthArrowHead'||shapeType==='Distance'||shapeType==='Perimeter'||shapeType==='Radius'||shapeType==='FreeText'){if(shapeType==='FreeText'){// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-freetext-icon e-pv-icon',className:'e-pv-annotation-freetextedit-container'});items.push({type:'Separator',align:'Left'});items.push({template:fontFamilyTemplate});items.push({template:fontSizeTemplate});items.push({template:textColorTemplate});items.push({template:alignmentTemplate});items.push({template:textPropertiesTemplate});}if(shapeType==='Polygon'){if(this.pdfViewer.selectedItems.annotations[0].measureType==='Area'){items.push({prefixIcon:'e-pv-calibrate-area-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}else if(this.pdfViewer.selectedItems.annotations[0].measureType==='Volume'){items.push({prefixIcon:'e-pv-calibrate-volume-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}else{items.push({prefixIcon:'e-pv-shape-pentagon-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}}else if(shapeType==='Rectangle'){items.push({prefixIcon:'e-pv-shape-rectangle-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}else if(shapeType==='Ellipse'){items.push({prefixIcon:'e-pv-shape-circle-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}else if(shapeType==='Line'){if(this.pdfViewer.selectedItems.annotations[0].measureType==='Perimeter'){items.push({prefixIcon:'e-pv-calibrate-perimeter-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}else{items.push({prefixIcon:'e-pv-shape-line-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}}else if(shapeType==='LineWidthArrowHead'){items.push({prefixIcon:'e-pv-shape-arrow-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}else if(shapeType==='Distance'){items.push({prefixIcon:'e-pv-calibrate-distance-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}else if(shapeType==='Perimeter'){items.push({prefixIcon:'e-pv-calibrate-perimeter-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}else if(shapeType==='Radius'){items.push({prefixIcon:'e-pv-calibrate-radius-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}items.push({template:colorTemplate});items.push({template:strokeTemplate});items.push({template:thicknessTemplate});}else if(shapeType==='Path'||shapeType==='Ink'||shapeType==='HandWrittenSignature'||shapeType==='SignatureText'){if(shapeType==='Path'||shapeType==='Ink'){items.push({prefixIcon:'e-pv-inkannotation-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}else if(shapeType==='HandWrittenSignature'||shapeType==='SignatureText'){items.push({prefixIcon:'e-pv-handwritten-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}items.push({template:strokeTemplate});items.push({template:thicknessTemplate});}else if(shapeType==='Underline'||shapeType==='Highlight'||shapeType==='Strikethrough'){if(shapeType==='Highlight'){items.push({prefixIcon:'e-pv-highlight-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}else if(shapeType==='Underline'){items.push({prefixIcon:'e-pv-underline-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}else if(shapeType==='Strikethrough'){items.push({prefixIcon:'e-pv-strikethrough-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}items.push({template:colorTemplate});}else if(shapeType==='Stamp'||shapeType==='Image'){items.push({prefixIcon:'e-pv-stamp-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}else if(shapeType==='StickyNotes'){items.push({prefixIcon:'e-pv-comment-icon e-pv-icon'});items.push({type:'Separator',align:'Left'});}items.push({template:opacityTemplate});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-comment-panel-icon e-pv-icon',className:'e-pv-comment-panel-icon-container',id:this.pdfViewer.dataId+'_annotation_commentPanel',align:'Right',click:function click(args){_this.pdfViewer.annotationModule.showCommentsPanel();}});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-annotation-delete-icon e-pv-icon',className:'e-pv-annotation-delete-container',id:this.pdfViewer.dataId+'_annotation_delete',align:'Right',click:function click(args){_this.pdfViewer.annotationModule.deleteAnnotation();_this.propertyToolbar.destroy();_this.toolbarCreated=false;_this.createAnnotationToolbarForMobile();_this.adjustMobileViewer();}});return items;};// eslint:disable-next-line
AnnotationToolbar.prototype.createStampToolbarItemsForMobile=function(){var opacityTemplate=this.getTemplate('span','_annotation_opacity','e-pv-annotation-opacity-container');// eslint:disable-next-line
var items=[];items.push({prefixIcon:'e-pv-backward-icon e-pv-icon',tooltipText:this.pdfViewer.localeObj.getConstant('Go Back'),id:this.pdfViewer.dataId+'_backward',click:this.goBackToToolbar.bind(this)});items.push({type:'Separator',align:'Left'});items.push({template:opacityTemplate});return items;};// eslint:disable-next-line
AnnotationToolbar.prototype.createShapeToolbarItemsForMobile=function(){var colorTemplate=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span','_annotation_color','e-pv-annotation-color-container');// eslint-disable-next-line max-len
var strokeTemplate=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span','_annotation_stroke','e-pv-annotation-stroke-container');var thicknessTemplate=this.getTemplate('span','_annotation_thickness','e-pv-annotation-thickness-container');var opacityTemplate=this.getTemplate('span','_annotation_opacity','e-pv-annotation-opacity-container');// eslint:disable-next-line
var items=[];// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-backward-icon e-pv-icon',tooltipText:this.pdfViewer.localeObj.getConstant('Go Back'),id:this.pdfViewer.dataId+'_backward',click:this.goBackToToolbar.bind(this)});items.push({prefixIcon:'e-pv-shape-line-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_shape_line',text:this.pdfViewer.localeObj.getConstant('Line Shape'),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-shape-arrow-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_shape_arrow',text:this.pdfViewer.localeObj.getConstant('Arrow Shape'),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-shape-rectangle-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_shape_rectangle',text:this.pdfViewer.localeObj.getConstant('Rectangle Shape'),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-shape-circle-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_shape_circle',text:this.pdfViewer.localeObj.getConstant('Circle Shape'),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-shape-pentagon-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_shape_pentagon',text:this.pdfViewer.localeObj.getConstant('Pentagon Shape'),align:'Left'});items.push({type:'Separator',align:'Left'});items.push({template:colorTemplate});items.push({template:strokeTemplate});items.push({template:thicknessTemplate});items.push({template:opacityTemplate});return items;};// eslint:disable-next-line
AnnotationToolbar.prototype.createCalibrateToolbarItemsForMobile=function(){var colorTemplate=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span','_annotation_color','e-pv-annotation-color-container');// eslint-disable-next-line max-len
var strokeTemplate=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate('span','_annotation_stroke','e-pv-annotation-stroke-container');var thicknessTemplate=this.getTemplate('span','_annotation_thickness','e-pv-annotation-thickness-container');var opacityTemplate=this.getTemplate('span','_annotation_opacity','e-pv-annotation-opacity-container');// eslint:disable-next-line
var items=[];// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-backward-icon e-pv-icon',tooltipText:this.pdfViewer.localeObj.getConstant('Go Back'),id:this.pdfViewer.dataId+'_backward',click:this.goBackToToolbar.bind(this)});items.push({prefixIcon:'e-pv-calibrate-distance-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_calibrate_distance',text:this.pdfViewer.localeObj.getConstant(''),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-calibrate-perimeter-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_calibrate_perimeter',text:this.pdfViewer.localeObj.getConstant(''),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-calibrate-area-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_calibrate_area',text:this.pdfViewer.localeObj.getConstant(''),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-calibrate-radius-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_calibrate_radius',text:this.pdfViewer.localeObj.getConstant(''),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-calibrate-volume-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_calibrate_volume',text:this.pdfViewer.localeObj.getConstant(''),align:'Left'});items.push({type:'Separator',align:'Left'});items.push({template:colorTemplate});items.push({template:strokeTemplate});items.push({template:thicknessTemplate});items.push({template:opacityTemplate});return items;};AnnotationToolbar.prototype.handleShapeTool=function(type){if(!sf.base.isBlazor()&&sf.base.Browser.isDevice){// eslint:disable-next-line
var selectedItems=document.querySelectorAll('.e-pv-select');for(var i=0;i<selectedItems.length;i++){if(selectedItems[i].id!==type&&selectedItems[i].id!==this.pdfViewer.dataId+'_annotation'){selectedItems[i].classList.remove('e-pv-select');}}}};AnnotationToolbar.prototype.createPropDropDownButton=function(element,iconClass,target,tooltipText){// eslint-disable-next-line max-len
var dropDownButton=new sf.splitbuttons.DropDownButton({iconCss:iconClass+' e-pv-icon',target:target,cssClass:'e-caret-hide'});if(this.pdfViewer.enableRtl){dropDownButton.enableRtl=true;}dropDownButton.appendTo(element);this.primaryToolbar.createTooltip(element,tooltipText);return dropDownButton;};// eslint-disable-next-line
AnnotationToolbar.prototype.textAlignmentToolbarItems=function(){// eslint-disable-next-line
var items=[];items.push({prefixIcon:'e-pv-left-align-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_left_align',align:'Left',value:'Left',click:this.onClickTextAlignment.bind(this)});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-center-align-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_center_align',align:'Left',value:'Center',click:this.onClickTextAlignment.bind(this)});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-right-align-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_right_align',align:'Left',value:'Right',click:this.onClickTextAlignment.bind(this)});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-justfiy-align-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_justify_align',align:'Left',value:'Justify',click:this.onClickTextAlignment.bind(this)});// eslint-disable-next-line max-len
return items;};AnnotationToolbar.prototype.afterAlignmentToolbarCreation=function(){// eslint-disable-next-line max-len
this.alignLeftElement=this.primaryToolbar.addClassToolbarItem('_left_align','e-pv-left-align',this.pdfViewer.localeObj.getConstant('Align left'));this.alignRightElement=this.primaryToolbar.addClassToolbarItem('_right_align','e-pv-right-align',this.pdfViewer.localeObj.getConstant('Align right'));// eslint-disable-next-line max-len
this.alignCenterElement=this.primaryToolbar.addClassToolbarItem('_center_align','e-pv-center-align',this.pdfViewer.localeObj.getConstant('Center'));this.alignJustifyElement=this.primaryToolbar.addClassToolbarItem('_justify_align','e-pv-justfiy-align',this.pdfViewer.localeObj.getConstant('Justify'));};AnnotationToolbar.prototype.afterPropertiesToolbarCreation=function(){// eslint-disable-next-line max-len
this.boldElement=this.primaryToolbar.addClassToolbarItem('_bold','e-pv-bold',this.pdfViewer.localeObj.getConstant('Bold'));this.italicElement=this.primaryToolbar.addClassToolbarItem('_italic','e-pv-italic',this.pdfViewer.localeObj.getConstant('Italic'));// eslint-disable-next-line max-len
this.fontStyleStrikethroughItem=this.primaryToolbar.addClassToolbarItem('_strikeout','e-pv-strikeout',this.pdfViewer.localeObj.getConstant('Strikethroughs'));this.fontStyleUnderlineItem=this.primaryToolbar.addClassToolbarItem('_underline_textinput','e-pv-underlinetext',this.pdfViewer.localeObj.getConstant('Underlines'));};AnnotationToolbar.prototype.createDropDownListForSize=function(fontSelectElement){var _this=this;// eslint-disable-next-line max-len
var fontSize=['8px','9px','10px','11px','12px','14px','16px','18px','20px','22px','24px','26px','28px','36px','48px','72px','96px'];if(!this.pdfViewer.enableRtl){this.fontSize=new sf.dropdowns.ComboBox({dataSource:fontSize,cssClass:'e-pv-prop-dropdown',allowCustom:true,showClearButton:false,width:'80px',popupWidth:'100px'});}else{this.fontSize=new sf.dropdowns.ComboBox({dataSource:fontSize,cssClass:'e-pv-prop-dropdown-rtl',allowCustom:true,showClearButton:false,width:'80px',popupWidth:'100px',enableRtl:true});}this.fontSize.value='16px';this.fontSize.appendTo(fontSelectElement);this.primaryToolbar.createTooltip(fontSelectElement,this.pdfViewer.localeObj.getConstant('Font size'));this.fontSize.addEventListener('change',function(){_this.onFontSizeChange(_this);});};AnnotationToolbar.prototype.createDropDownListForFamily=function(fontSelectElement){var _this=this;var fontStyle=[{FontName:'Helvetica'},{FontName:'Courier'},{FontName:'Symbol'},{FontName:'Times New Roman'}];if(!this.pdfViewer.enableRtl){this.fontFamily=new sf.dropdowns.ComboBox({dataSource:fontStyle,query:new sf.data.Query().select(['FontName']),fields:{text:'FontName',value:'FontName'},cssClass:'e-pv-prop-dropdown',itemTemplate:'<span style="font-family: ${FontName};">${FontName}</span>',allowCustom:true,showClearButton:false,width:'110px',popupWidth:'190px'});}else{this.fontFamily=new sf.dropdowns.ComboBox({dataSource:fontStyle,query:new sf.data.Query().select(['FontName']),fields:{text:'FontName',value:'FontName'},cssClass:'e-pv-prop-dropdown-rtl',itemTemplate:'<span style="font-family: ${FontName};">${FontName}</span>',allowCustom:true,showClearButton:false,width:'110px',popupWidth:'190px',enableRtl:true});}this.fontFamily.isStringTemplate=true;this.fontFamily.value='Helvetica';this.fontFamily.appendTo(fontSelectElement);this.primaryToolbar.createTooltip(fontSelectElement,this.pdfViewer.localeObj.getConstant('Font family'));this.fontFamily.addEventListener('change',function(){_this.onFontFamilyChange(_this);});};// eslint-disable-next-line
AnnotationToolbar.prototype.textPropertiesToolbarItems=function(){// eslint-disable-next-line
var items=[];items.push({prefixIcon:'e-pv-bold-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_bold',align:'Left',value:'bold',click:this.onClickTextProperties.bind(this)});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-italic-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_italic',align:'Left',value:'italic',click:this.onClickTextProperties.bind(this)});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-strikeout-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_strikeout',align:'Left',value:'strikeout',click:this.onClickTextProperties.bind(this)});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-underlinetext-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_underline_textinput',align:'Left',value:'underline',click:this.onClickTextProperties.bind(this)});return items;};// eslint-disable-next-line
AnnotationToolbar.prototype.createShapeToolbarItems=function(){// eslint-disable-next-line
var items=[];items.push({prefixIcon:'e-pv-shape-line-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_shape_line',text:this.pdfViewer.localeObj.getConstant('Line Shape'),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-shape-arrow-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_shape_arrow',text:this.pdfViewer.localeObj.getConstant('Arrow Shape'),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-shape-rectangle-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_shape_rectangle',text:this.pdfViewer.localeObj.getConstant('Rectangle Shape'),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-shape-circle-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_shape_circle',text:this.pdfViewer.localeObj.getConstant('Circle Shape'),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-shape-pentagon-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_shape_pentagon',text:this.pdfViewer.localeObj.getConstant('Pentagon Shape'),align:'Left'});return items;};// eslint-disable-next-line
AnnotationToolbar.prototype.createCalibrateToolbarItems=function(){// eslint-disable-next-line
var items=[];items.push({prefixIcon:'e-pv-calibrate-distance-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_calibrate_distance',text:this.pdfViewer.localeObj.getConstant(''),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-calibrate-perimeter-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_calibrate_perimeter',text:this.pdfViewer.localeObj.getConstant(''),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-calibrate-area-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_calibrate_area',text:this.pdfViewer.localeObj.getConstant(''),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-calibrate-radius-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_calibrate_radius',text:this.pdfViewer.localeObj.getConstant(''),align:'Left'});// eslint-disable-next-line max-len
items.push({prefixIcon:'e-pv-calibrate-volume-icon e-pv-icon',cssClass:'',id:this.pdfViewer.dataId+'_calibrate_volume',text:this.pdfViewer.localeObj.getConstant(''),align:'Left'});return items;};AnnotationToolbar.prototype.onCalibrateToolbarClicked=function(args){var elementId=this.pdfViewer.dataId;var measureModule=this.pdfViewer.annotation.measureAnnotationModule;this.deselectAllItems();this.resetFreeTextAnnot();if(sf.base.Browser.isDevice&&!sf.base.isBlazor()){// tslint:disable-next-line
var element=args.originalEvent.target;this.pdfViewer.toolbarModule.selectItem(element.parentElement);}switch(args.originalEvent.target.id){case elementId+'_calibrate_distance':case elementId+'_calibrate_distanceIcon':measureModule.setAnnotationType('Distance');this.onShapeDrawSelection(false);this.updateColorInIcon(this.colorDropDownElement,measureModule.distanceFillColor);this.updateColorInIcon(this.strokeDropDownElement,measureModule.distanceStrokeColor);this.handleShapeTool(elementId+'_calibrate_distance');break;case elementId+'_calibrate_perimeter':case elementId+'_calibrate_perimeterIcon':measureModule.setAnnotationType('Perimeter');this.onShapeDrawSelection(false);this.updateColorInIcon(this.colorDropDownElement,measureModule.perimeterFillColor);this.updateColorInIcon(this.strokeDropDownElement,measureModule.perimeterStrokeColor);this.handleShapeTool(elementId+'_calibrate_perimeter');break;case elementId+'_calibrate_area':case elementId+'_calibrate_areaIcon':measureModule.setAnnotationType('Area');this.onShapeDrawSelection(false);this.updateColorInIcon(this.colorDropDownElement,measureModule.areaFillColor);this.updateColorInIcon(this.strokeDropDownElement,measureModule.areaStrokeColor);this.handleShapeTool(elementId+'_calibrate_area');break;case elementId+'_calibrate_radius':case elementId+'_calibrate_radiusIcon':measureModule.setAnnotationType('Radius');this.onShapeDrawSelection(false);this.updateColorInIcon(this.colorDropDownElement,measureModule.radiusFillColor);this.updateColorInIcon(this.strokeDropDownElement,measureModule.radiusStrokeColor);this.handleShapeTool(elementId+'_calibrate_radius');break;case elementId+'_calibrate_volume':case elementId+'_calibrate_volumeIcon':measureModule.setAnnotationType('Volume');this.onShapeDrawSelection(false);this.updateColorInIcon(this.colorDropDownElement,measureModule.volumeFillColor);this.updateColorInIcon(this.strokeDropDownElement,measureModule.volumeStrokeColor);this.handleShapeTool(elementId+'_calibrate_volume');break;}};AnnotationToolbar.prototype.onShapeDrawSelection=function(isShape){// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[0];if(!sf.base.Browser.isDevice){this.updateInteractionTools();this.enableAnnotationPropertiesTools(true);if(isShape){this.shapeDropDown.toggle();}else{this.calibrateDropDown.toggle();}}this.pdfViewer.annotation.triggerAnnotationUnselectEvent();};AnnotationToolbar.prototype.afterCalibrateToolbarCreationForMobile=function(){// eslint-disable-next-line max-len
this.primaryToolbar.addClassToolbarItem('_calibrate_distance','e-pv-calibrate-distance',this.pdfViewer.localeObj.getConstant('Calibrate Distance'));this.primaryToolbar.addClassToolbarItem('_calibrate_perimeter','e-pv-calibrate-perimeter',this.pdfViewer.localeObj.getConstant('Calibrate Perimeter'));// eslint-disable-next-line max-len
this.primaryToolbar.addClassToolbarItem('_calibrate_area','e-pv-calibrate-area',this.pdfViewer.localeObj.getConstant('Calibrate Area'));this.primaryToolbar.addClassToolbarItem('_calibrate_radius','e-pv-calibrate-radius',this.pdfViewer.localeObj.getConstant('Calibrate Radius'));// eslint-disable-next-line max-len
this.primaryToolbar.addClassToolbarItem('_calibrate_volume','e-pv-calibrate-volume',this.pdfViewer.localeObj.getConstant('Calibrate Volume'));};AnnotationToolbar.prototype.afterShapeToolbarCreationForMobile=function(){// eslint-disable-next-line max-len
this.primaryToolbar.addClassToolbarItem('_annotation_color','e-pv-annotation-color-container',this.pdfViewer.localeObj.getConstant('Change Color'));// eslint-disable-next-line max-len
this.primaryToolbar.addClassToolbarItem('_annotation_stroke','e-pv-annotation-stroke-container',this.pdfViewer.localeObj.getConstant('Change Stroke Color'));// eslint-disable-next-line max-len
this.primaryToolbar.addClassToolbarItem('_annotation_thickness','e-pv-annotation-thickness-container',this.pdfViewer.localeObj.getConstant('Chnage Border Thickness'));// eslint-disable-next-line max-len
this.primaryToolbar.addClassToolbarItem('_annotation_opacity','e-annotation-opacity-container',this.pdfViewer.localeObj.getConstant('Change Opacity'));this.primaryToolbar.addClassToolbarItem('_shape_line','e-pv-shape-line',this.pdfViewer.localeObj.getConstant('Add line'));this.primaryToolbar.addClassToolbarItem('_shape_arrow','e-pv-shape-arrow',this.pdfViewer.localeObj.getConstant('Add arrow'));// eslint-disable-next-line max-len
this.primaryToolbar.addClassToolbarItem('_shape_rectangle','e-pv-shape-rectangle',this.pdfViewer.localeObj.getConstant('Add rectangle'));// eslint-disable-next-line max-len
this.primaryToolbar.addClassToolbarItem('_shape_circle','e-pv-shape-circle',this.pdfViewer.localeObj.getConstant('Add circle'));this.primaryToolbar.addClassToolbarItem('_shape_pentagon','e-pv-shape-pentagon',this.pdfViewer.localeObj.getConstant('Add polygon'));};AnnotationToolbar.prototype.afterShapeToolbarCreation=function(){this.lineElement=this.primaryToolbar.addClassToolbarItem('_shape_line','e-pv-shape-line',this.pdfViewer.localeObj.getConstant('Add line'));this.arrowElement=this.primaryToolbar.addClassToolbarItem('_shape_arrow','e-pv-shape-arrow',this.pdfViewer.localeObj.getConstant('Add arrow'));// eslint-disable-next-line max-len
this.rectangleElement=this.primaryToolbar.addClassToolbarItem('_shape_rectangle','e-pv-shape-rectangle',this.pdfViewer.localeObj.getConstant('Add rectangle'));// eslint-disable-next-line max-len
this.circleElement=this.primaryToolbar.addClassToolbarItem('_shape_circle','e-pv-shape-circle',this.pdfViewer.localeObj.getConstant('Add circle'));this.polygonElement=this.primaryToolbar.addClassToolbarItem('_shape_pentagon','e-pv-shape-pentagon',this.pdfViewer.localeObj.getConstant('Add polygon'));};AnnotationToolbar.prototype.afterCalibrateToolbarCreation=function(){// eslint-disable-next-line max-len
this.calibrateDistance=this.primaryToolbar.addClassToolbarItem('_calibrate_distance','e-pv-calibrate-distance',this.pdfViewer.localeObj.getConstant('Calibrate Distance'));this.calibratePerimeter=this.primaryToolbar.addClassToolbarItem('_calibrate_perimeter','e-pv-calibrate-perimeter',this.pdfViewer.localeObj.getConstant('Calibrate Perimeter'));// eslint-disable-next-line max-len
this.calibrateArea=this.primaryToolbar.addClassToolbarItem('_calibrate_area','e-pv-calibrate-area',this.pdfViewer.localeObj.getConstant('Calibrate Area'));this.calibrateRadius=this.primaryToolbar.addClassToolbarItem('_calibrate_radius','e-pv-calibrate-radius',this.pdfViewer.localeObj.getConstant('Calibrate Radius'));// eslint-disable-next-line max-len
this.calibrateVolume=this.primaryToolbar.addClassToolbarItem('_calibrate_volume','e-pv-calibrate-volume',this.pdfViewer.localeObj.getConstant('Calibrate Volume'));};AnnotationToolbar.prototype.afterMobileToolbarCreation=function(){// eslint-disable-next-line max-len
this.highlightItem=this.primaryToolbar.addClassToolbarItem('_highlight','e-pv-highlight',this.pdfViewer.localeObj.getConstant('Highlight'));this.underlineItem=this.primaryToolbar.addClassToolbarItem('_underline','e-pv-underline',this.pdfViewer.localeObj.getConstant('Underline'));// eslint-disable-next-line max-len
this.strikethroughItem=this.primaryToolbar.addClassToolbarItem('_strikethrough','e-pv-strikethrough',this.pdfViewer.localeObj.getConstant('Strikethrough'));// eslint-disable-next-line max-len
this.shapesItem=this.primaryToolbar.addClassToolbarItem('_annotation_shapes','e-pv-annotation-shapes',this.pdfViewer.localeObj.getConstant('Add Shapes'));this.calibrateItem=this.primaryToolbar.addClassToolbarItem('_annotation_calibrate','e-pv-annotation-calibrate',this.pdfViewer.localeObj.getConstant('Calibrate'));// eslint-disable-next-line max-len
this.freeTextEditItem=this.primaryToolbar.addClassToolbarItem('_annotation_freeTextEdit','e-pv-annotation-freeTextEdit',this.pdfViewer.localeObj.getConstant('Free Text'));// eslint-disable-next-line max-len
this.commentItem=this.primaryToolbar.addClassToolbarItem('_comment','e-pv-comment',this.pdfViewer.localeObj.getConstant('Add Comments'));// eslint-disable-next-line max-len
this.commentItem=this.primaryToolbar.addClassToolbarItem('_annotation_commentPanel','e-pv-annotation-comment-panel',this.pdfViewer.localeObj.getConstant('Comment Panel'));// eslint-disable-next-line max-len
this.inkAnnotationItem=this.primaryToolbar.addClassToolbarItem('_annotation_ink','e-pv-annotation-ink',this.pdfViewer.localeObj.getConstant('Draw Ink'));this.selectAnnotationDeleteItem(false);this.enableCommentPanelTool(this.pdfViewer.enableCommentPanel);};AnnotationToolbar.prototype.createColorPicker=function(idString){var inputElement;var existingInput=document.getElementById(idString+'_target');if(existingInput){inputElement=existingInput;}else{inputElement=sf.base.createElement('input',{id:idString+'_target'});}document.body.appendChild(inputElement);var colorPicker=new sf.inputs.ColorPicker({inline:true,mode:'Palette',cssClass:'e-show-value',enableOpacity:false,value:'#000000',showButtons:false,modeSwitcher:false});if(this.pdfViewer.enableRtl){colorPicker.enableRtl=true;}colorPicker.appendTo(inputElement);return colorPicker;};// eslint-disable-next-line
AnnotationToolbar.prototype.onColorPickerChange=function(args){// eslint-disable-next-line
var currentColor;if(!sf.base.isBlazor()){currentColor=args.currentValue.hex===''?'#ffffff00':args.currentValue.hex;}else{currentColor=args;}if(this.pdfViewer.annotationModule.textMarkupAnnotationModule){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(currentColor);}else{switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case'Highlight':this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor=currentColor;break;case'Underline':this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor=currentColor;break;case'Strikethrough':this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor=currentColor;break;}}}if(this.pdfViewer.selectedItems.annotations.length===1){if(sf.base.isBlazor()){this.pdfViewer.annotation.modifyFillColor(currentColor);}else{if(args.currentValue.hex!==args.previousValue.hex){this.pdfViewer.annotation.modifyFillColor(currentColor);}}}else{if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case'Line':this.pdfViewer.annotation.shapeAnnotationModule.lineFillColor=currentColor;break;case'Arrow':this.pdfViewer.annotation.shapeAnnotationModule.arrowFillColor=currentColor;break;case'Rectangle':this.pdfViewer.annotation.shapeAnnotationModule.rectangleFillColor=currentColor;break;case'Circle':this.pdfViewer.annotation.shapeAnnotationModule.circleFillColor=currentColor;break;case'Polygon':this.pdfViewer.annotation.shapeAnnotationModule.polygonFillColor=currentColor;break;}}if(this.pdfViewer.drawingObject){this.pdfViewer.drawingObject.fillColor=currentColor;if(this.pdfViewer.drawingObject.shapeAnnotationType==='FreeText'){this.pdfViewer.freeTextSettings.fillColor=currentColor;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}}}if(sf.base.isBlazor()){this.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector('.e-pv-annotation-color-container');this.updateColorInIcon(this.colorDropDownElementInBlazor,currentColor);}else{this.updateColorInIcon(this.colorDropDownElement,currentColor);this.colorDropDown.toggle();}};// eslint-disable-next-line
AnnotationToolbar.prototype.onStrokePickerChange=function(args){// eslint-disable-next-line
var currentColor;if(!sf.base.isBlazor()){currentColor=args.currentValue.hex===''?'#ffffff00':args.currentValue.hex;}else{currentColor=args;}if(this.pdfViewer.selectedItems.annotations.length===1){if(sf.base.isBlazor()){this.pdfViewer.annotation.modifyStrokeColor(currentColor);}else{if(args.currentValue.hex!==args.previousValue.hex){this.pdfViewer.annotation.modifyStrokeColor(currentColor);}}}else{if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case'Line':this.pdfViewer.annotation.shapeAnnotationModule.lineStrokeColor=currentColor;break;case'Arrow':this.pdfViewer.annotation.shapeAnnotationModule.arrowStrokeColor=currentColor;break;case'Rectangle':this.pdfViewer.annotation.shapeAnnotationModule.rectangleStrokeColor=currentColor;break;case'Circle':this.pdfViewer.annotation.shapeAnnotationModule.circleStrokeColor=currentColor;break;case'Polygon':this.pdfViewer.annotation.shapeAnnotationModule.polygonStrokeColor=currentColor;break;}}// eslint-disable-next-line
var annotationModule=this.pdfViewer.annotation;if(annotationModule&&annotationModule.inkAnnotationModule){this.pdfViewer.inkAnnotationSettings.strokeColor=currentColor;}if(this.pdfViewer.drawingObject){this.pdfViewer.drawingObject.strokeColor=currentColor;}if(this.pdfViewer.drawingObject&&this.pdfViewer.drawingObject.shapeAnnotationType==='FreeText'){this.pdfViewer.freeTextSettings.borderColor=currentColor;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}}if(sf.base.isBlazor()){this.strokeDropDownElementInBlazor=this.pdfViewer.element.querySelector('.e-pv-annotation-stroke-container');this.updateColorInIcon(this.strokeDropDownElementInBlazor,currentColor);}else{this.updateColorInIcon(this.strokeDropDownElement,currentColor);this.strokeDropDown.toggle();}};/**
     * @param element
     * @param color
     * @param element
     * @param color
     * @private
     */AnnotationToolbar.prototype.updateColorInIcon=function(element,color){if(sf.base.isBlazor()){if(element){element.children[0].style.borderBottomColor=color;}}else{element.childNodes[0]?element.childNodes[0].style.borderBottomColor=color:element.childNodes[0];}};/**
     * @param currentOption
     * @private
     */AnnotationToolbar.prototype.updateTextPropertySelection=function(currentOption){if(currentOption==='bold'){document.getElementById(this.pdfViewer.dataId+'_bold').classList.toggle('textprop-option-active');}else if(currentOption==='italic'){document.getElementById(this.pdfViewer.dataId+'_italic').classList.toggle('textprop-option-active');}else if(currentOption==='underline'){document.getElementById(this.pdfViewer.dataId+'_underline_textinput').classList.toggle('textprop-option-active');document.getElementById(this.pdfViewer.dataId+'_strikeout').classList.remove('textprop-option-active');}else if(currentOption==='strikeout'){document.getElementById(this.pdfViewer.dataId+'_strikeout').classList.toggle('textprop-option-active');document.getElementById(this.pdfViewer.dataId+'_underline_textinput').classList.remove('textprop-option-active');}};/**
     * @param family
     * @private
     */AnnotationToolbar.prototype.updateFontFamilyInIcon=function(family){this.fontFamily.value=family;};/**
     * @param align
     * @private
     */AnnotationToolbar.prototype.updateTextAlignInIcon=function(align){var className='e-btn-icon e-pv-left-align-icon e-pv-icon';var leftAlign=document.getElementById(this.pdfViewer.dataId+'_left_align');var rightAlign=document.getElementById(this.pdfViewer.dataId+'_right_align');var centerAlign=document.getElementById(this.pdfViewer.dataId+'_center_align');var justifyAlign=document.getElementById(this.pdfViewer.dataId+'_justify_align');if(!sf.base.isBlazor()){leftAlign.classList.remove('textprop-option-active');rightAlign.classList.remove('textprop-option-active');centerAlign.classList.remove('textprop-option-active');justifyAlign.classList.remove('textprop-option-active');}if(align==='Left'){leftAlign.classList.add('textprop-option-active');}else if(align==='Right'){className='e-btn-icon e-pv-right-align-icon e-pv-icon';rightAlign.classList.add('textprop-option-active');}else if(align==='Center'){className='e-btn-icon e-pv-center-align-icon e-pv-icon';centerAlign.classList.add('textprop-option-active');}else if(align==='Justify'){className='e-btn-icon e-pv-justfiy-align-icon e-pv-icon';justifyAlign.classList.add('textprop-option-active');}document.getElementById(this.pdfViewer.dataId+'_annotation_textalign').children[0].className=className;};/**
     * @param size
     * @private
     */AnnotationToolbar.prototype.updateFontSizeInIcon=function(size){this.fontSize.value=size+'px';};AnnotationToolbar.prototype.updateOpacityIndicator=function(){// eslint-disable-next-line
this.opacityIndicator.textContent=parseInt(Math.round(this.opacitySlider.value).toString())+'%';};AnnotationToolbar.prototype.updateThicknessIndicator=function(){this.thicknessIndicator.textContent=this.thicknessSlider.value+' pt';};AnnotationToolbar.prototype.createSlider=function(idString){var outerContainer=sf.base.createElement('div',{className:'e-pv-annotation-opacity-popup-container'});document.body.appendChild(outerContainer);var label=sf.base.createElement('span',{id:idString+'_label',className:'e-pv-annotation-opacity-label'});label.textContent=this.pdfViewer.localeObj.getConstant('Opacity');var sliderElement=sf.base.createElement('div',{id:idString+'_slider'});this.opacitySlider=new sf.inputs.Slider({type:'MinRange',cssClass:'e-pv-annotation-opacity-slider',max:100,min:0});// eslint-disable-next-line max-len
this.opacityIndicator=sf.base.createElement('div',{id:idString+'_opacity_indicator',className:'e-pv-annotation-opacity-indicator'});this.opacityIndicator.textContent='100%';if(!this.pdfViewer.enableRtl){outerContainer.appendChild(label);outerContainer.appendChild(sliderElement);this.opacitySlider.appendTo(sliderElement);this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');outerContainer.appendChild(this.opacityIndicator);}else{outerContainer.appendChild(this.opacityIndicator);outerContainer.appendChild(sliderElement);this.opacitySlider.enableRtl=true;this.opacitySlider.appendTo(sliderElement);this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');outerContainer.appendChild(label);}return outerContainer;};AnnotationToolbar.prototype.createThicknessSlider=function(idString){var outerContainer=sf.base.createElement('div',{className:'e-pv-annotation-thickness-popup-container'});document.body.appendChild(outerContainer);var label=sf.base.createElement('span',{id:idString+'_label',className:'e-pv-annotation-thickness-label'});label.textContent=this.pdfViewer.localeObj.getConstant('Line Thickness');var sliderElement=sf.base.createElement('div',{id:idString+'_slider'});this.thicknessSlider=new sf.inputs.Slider({type:'MinRange',cssClass:'e-pv-annotation-thickness-slider',max:12,min:0});// eslint-disable-next-line max-len
this.thicknessIndicator=sf.base.createElement('div',{id:idString+'_thickness_indicator',className:'e-pv-annotation-thickness-indicator'});this.thicknessIndicator.textContent='0 pt';if(!this.pdfViewer.enableRtl){outerContainer.appendChild(label);outerContainer.appendChild(sliderElement);this.thicknessSlider.appendTo(sliderElement);outerContainer.appendChild(this.thicknessIndicator);}else{outerContainer.appendChild(this.thicknessIndicator);outerContainer.appendChild(sliderElement);this.thicknessSlider.enableRtl=true;this.thicknessSlider.appendTo(sliderElement);outerContainer.appendChild(label);}this.thicknessSlider.element.parentElement.classList.add('e-pv-annotation-thickness-slider-container');return outerContainer;};AnnotationToolbar.prototype.afterToolbarCreation=function(){// eslint-disable-next-line max-len
this.highlightItem=this.primaryToolbar.addClassToolbarItem('_highlight','e-pv-highlight',this.pdfViewer.localeObj.getConstant('Highlight'));this.underlineItem=this.primaryToolbar.addClassToolbarItem('_underline','e-pv-underline',this.pdfViewer.localeObj.getConstant('Underline'));// eslint-disable-next-line max-len
this.strikethroughItem=this.primaryToolbar.addClassToolbarItem('_strikethrough','e-pv-strikethrough',this.pdfViewer.localeObj.getConstant('Strikethrough'));this.deleteItem=this.primaryToolbar.addClassToolbarItem('_annotation_delete','e-pv-annotation-delete',this.pdfViewer.localeObj.getConstant('Delete'));// eslint-disable-next-line max-len
this.freeTextEditItem=this.primaryToolbar.addClassToolbarItem('_annotation_freeTextEdit','e-pv-annotation-freeTextEdit',this.pdfViewer.localeObj.getConstant('Free Text'));// eslint-disable-next-line max-len
this.inkAnnotationItem=this.primaryToolbar.addClassToolbarItem('_annotation_ink','e-pv-annotation-ink',this.pdfViewer.localeObj.getConstant('Draw Ink'));// eslint-disable-next-line max-len
this.commentItem=this.primaryToolbar.addClassToolbarItem('_annotation_commentPanel','e-pv-annotation-comment-panel',this.pdfViewer.localeObj.getConstant('Comment Panel'));this.closeItem=this.primaryToolbar.addClassToolbarItem('_annotation_close','e-pv-annotation-tools-close',null);this.selectAnnotationDeleteItem(false);this.enableTextMarkupAnnotationPropertiesTools(false);this.enableCommentPanelTool(this.pdfViewer.enableCommentPanel);};AnnotationToolbar.prototype.onToolbarClicked=function(args){// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[0];if(args.originalEvent.target.id){this.pdfViewer.toolbarModule.updateStampItems();}this.pdfViewer.toolbarModule.deSelectCommentAnnotation();switch(args.originalEvent.target.id){case this.pdfViewer.dataId+'_highlight':case this.pdfViewer.dataId+'_highlightIcon':this.pdfViewer.tool='';if(!sf.base.Browser.isDevice){this.pdfViewer.tool='';this.resetFreeTextAnnot();this.handleHighlight();}else{this.pdfViewer.annotationModule.setAnnotationMode('Highlight');this.textMarkupForMobile(args);}this.pdfViewer.annotation.triggerAnnotationUnselectEvent();break;case this.pdfViewer.dataId+'_underline':case this.pdfViewer.dataId+'_underlineIcon':this.pdfViewer.tool='';if(!sf.base.Browser.isDevice){this.pdfViewer.tool='';this.resetFreeTextAnnot();this.handleUnderline();}else{this.pdfViewer.annotationModule.setAnnotationMode('Underline');this.textMarkupForMobile(args);}this.pdfViewer.annotation.triggerAnnotationUnselectEvent();break;case this.pdfViewer.dataId+'_strikethrough':case this.pdfViewer.dataId+'_strikethroughIcon':this.pdfViewer.tool='';if(!sf.base.Browser.isDevice){this.pdfViewer.tool='';this.resetFreeTextAnnot();this.handleStrikethrough();}else{this.pdfViewer.annotationModule.setAnnotationMode('Strikethrough');this.textMarkupForMobile(args);}this.pdfViewer.annotation.triggerAnnotationUnselectEvent();break;case this.pdfViewer.dataId+'_annotation_delete':case this.pdfViewer.dataId+'_annotation_deleteIcon':this.pdfViewer.annotationModule.deleteAnnotation();this.resetFreeTextAnnot();break;case this.pdfViewer.dataId+'_annotation_commentPanel':case this.pdfViewer.dataId+'_annotation_commentPanelIcon':this.inkAnnotationSelected=false;var commentPanel=document.getElementById(this.pdfViewer.dataId+'_commantPanel');if(this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule){this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(true);}if(commentPanel.style.display==='block'){this.pdfViewerBase.navigationPane.closeCommentPanelContainer();}else{this.pdfViewer.annotationModule.showCommentsPanel();}break;case this.pdfViewer.dataId+'_annotation_close':case this.pdfViewer.dataId+'_annotation_closeIcon':this.inkAnnotationSelected=false;var commentsPanel=document.getElementById(this.pdfViewer.dataId+'_commantPanel');if(commentsPanel.style.display==='block'){this.pdfViewerBase.navigationPane.closeCommentPanelContainer();}this.showAnnotationToolbar(this.primaryToolbar.annotationItem);break;case this.pdfViewer.dataId+'_annotation_freeTextEdit':case this.pdfViewer.dataId+'_annotation_freeTextEditIcon':if(!sf.base.Browser.isDevice){this.resetFreeTextAnnot();this.handleFreeTextEditor();}else{this.pdfViewer.annotationModule.setAnnotationMode('FreeText');this.FreeTextForMobile();}break;case this.pdfViewer.dataId+'_annotation_signature':case this.pdfViewer.dataId+'_annotation_signatureIcon':this.inkAnnotationSelected=false;this.updateSignatureCount();break;case this.pdfViewer.dataId+'_annotation_ink':case this.pdfViewer.dataId+'_annotation_inkIcon':if(annotation){this.pdfViewer.annotation.triggerAnnotationUnselectEvent();}this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1);if(this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;if(currentPageNumber&&currentPageNumber!==''){// eslint-disable-next-line
this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));this.primaryToolbar.deSelectItem(this.inkAnnotationItem);}}if(!this.inkAnnotationSelected){this.deselectAllItems();this.drawInkAnnotation();}else{this.inkAnnotationSelected=false;}break;case this.pdfViewer.dataId+'_annotation_shapesIcon':case this.pdfViewer.dataId+'_annotation_shapes':if(sf.base.Browser.isDevice){this.shapeToolMobile(args);}break;case this.pdfViewer.dataId+'_annotation_calibrateIcon':case this.pdfViewer.dataId+'_annotation_calibrate':if(sf.base.Browser.isDevice){this.calibrateToolMobile(args);}break;case this.pdfViewer.dataId+'_commentIcon':case this.pdfViewer.dataId+'_comment':this.pdfViewerBase.isAddComment=true;this.pdfViewerBase.isCommentIconAdded=true;var commentsButton=document.getElementById(this.pdfViewer.dataId+'_comment');commentsButton.classList.add('e-pv-select');this.pdfViewer.toolbarModule.addComments(args);break;}};AnnotationToolbar.prototype.addInkAnnotation=function(){this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1);if(this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;if(currentPageNumber&&currentPageNumber!==''){// eslint-disable-next-line
this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));if(!sf.base.isBlazor()){this.primaryToolbar.deSelectItem(this.inkAnnotationItem);}else{this.primaryToolbar.deSelectItem(this.InkAnnotationElement);this.pdfViewerBase.focusViewerContainer();}}}if(!this.inkAnnotationSelected){this.deselectAllItemsInBlazor();this.drawInkAnnotation();}else{this.inkAnnotationSelected=false;}};/**
     * @private
     */AnnotationToolbar.prototype.deselectInkAnnotation=function(){this.primaryToolbar.deSelectItem(this.InkAnnotationElement);};AnnotationToolbar.prototype.drawInkAnnotation=function(){this.inkAnnotationSelected=true;if(!sf.base.isBlazor()){this.primaryToolbar.selectItem(this.inkAnnotationItem);}else{this.primaryToolbar.selectItem(this.InkAnnotationElement);}this.enableSignaturePropertiesTools(true);this.pdfViewerBase.isToolbarInkClicked=true;this.pdfViewer.annotationModule.inkAnnotationModule.drawInk();};AnnotationToolbar.prototype.resetFreeTextAnnot=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule){this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot=false;this.pdfViewer.annotation.freeTextAnnotationModule.isNewAddedAnnot=false;if(!sf.base.Browser.isDevice){if(this.freeTextEditItem&&!sf.base.isBlazor()){this.primaryToolbar.deSelectItem(this.freeTextEditItem);}else if(sf.base.isBlazor()){this.primaryToolbar.deSelectItem(this.FreeTextElement);}this.enableFreeTextAnnotationPropertiesTools(false);}}if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;if(currentPageNumber&&currentPageNumber!==''){// eslint-disable-next-line
this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));if(!sf.base.isBlazor()){this.primaryToolbar.deSelectItem(this.inkAnnotationItem);}else{this.primaryToolbar.deSelectItem(this.InkAnnotationElement);}}}this.inkAnnotationSelected=false;};AnnotationToolbar.prototype.updateInkannotationItems=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule&&this.inkAnnotationSelected){// eslint-disable-next-line
var currentPageNumber=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;if(currentPageNumber&&currentPageNumber!==''){// eslint-disable-next-line
this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));this.pdfViewerBase.isToolbarInkClicked=true;this.pdfViewer.tool='Ink';this.pdfViewer.clearSelection(currentPageNumber);}}};AnnotationToolbar.prototype.showSignaturepanel=function(){this.pdfViewerBase.isToolbarSignClicked=true;this.pdfViewerBase.signatureModule.showSignatureDialog(true);};AnnotationToolbar.prototype.handleFreeTextEditor=function(){// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[0];this.enableFreeTextAnnotationPropertiesTools(true);if(annotation){this.pdfViewer.fireAnnotationUnSelect(annotation.annotName,annotation.pageIndex,annotation);}this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1);if(this.pdfViewer.annotationModule.textMarkupAnnotationModule){this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=false;}this.isStrikethroughEnabled=false;this.isHighlightEnabled=false;this.isUnderlineEnabled=false;var freeTextAnnotationModule=this.pdfViewer.annotation.freeTextAnnotationModule;freeTextAnnotationModule.setAnnotationType('FreeText');freeTextAnnotationModule.isNewFreeTextAnnot=true;freeTextAnnotationModule.isNewAddedAnnot=true;this.updateInteractionTools();this.primaryToolbar.deSelectItem(this.highlightItem);this.primaryToolbar.deSelectItem(this.underlineItem);this.primaryToolbar.deSelectItem(this.strikethroughItem);this.primaryToolbar.selectItem(this.freeTextEditItem);this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.annotationModule.freeTextAnnotationModule.fillColor);this.updateColorInIcon(this.strokeDropDownElement,this.pdfViewer.annotationModule.freeTextAnnotationModule.borderColor);this.updateColorInIcon(this.fontColorElement,this.pdfViewer.annotationModule.freeTextAnnotationModule.fontColor);this.updateFontFamilyInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.fontFamily);this.updateFontSizeInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.fontSize);this.updateTextAlignInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.textAlign);this.updateFontFamily();};AnnotationToolbar.prototype.updateFontFamily=function(){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold?this.updateFontFamilyIcon('_bold',true):this.updateFontFamilyIcon('_bold',false);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic?this.updateFontFamilyIcon('_italic',true):this.updateFontFamilyIcon('_italic',false);if(this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline){this.updateFontFamilyIcon('_underline_textinput',true);this.updateFontFamilyIcon('_strikeout',false);}else{this.updateFontFamilyIcon('_underline_textinput',false);}if(this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough){this.updateFontFamilyIcon('_strikeout',true);this.updateFontFamilyIcon('_underline_textinput',false);}else{this.updateFontFamilyIcon('_strikeout',false);}};AnnotationToolbar.prototype.updateFontFamilyIcon=function(fontFamily,isActive){var fontFamilyElement=document.getElementById(this.pdfViewer.dataId+fontFamily);isActive?fontFamilyElement.classList.add('textprop-option-active'):fontFamilyElement.classList.remove('textprop-option-active');};/**
     * @param element
     * @param isInitialLoading
     * @param element
     * @param isInitialLoading
     * @private
     */AnnotationToolbar.prototype.showAnnotationToolbar=function(element,isInitialLoading){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(!this.isToolbarHidden){// eslint-disable-next-line
var annotationModule=this.pdfViewer.annotationModule;if(element){this.primaryToolbar.deSelectItem(element);}else{if(this.pdfViewer.enableToolbar){this.primaryToolbar.deSelectItem(this.primaryToolbar.annotationItem);}}this.adjustViewer(false);// eslint-disable-next-line max-len
if(annotationModule&&annotationModule.textMarkupAnnotationModule&&annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){this.enablePropertiesTool(annotationModule);}else{this.deselectAllItems();}this.toolbarElement.style.display='none';if(!isInitialLoading){this.pdfViewer.isAnnotationToolbarVisible=false;}if(this.pdfViewerBase.isPanMode){this.primaryToolbar.updateInteractionTools(false);}else{this.primaryToolbar.updateInteractionTools(true);}}else{var toolBarInitialStatus=void 0;if(this.toolbarElement){toolBarInitialStatus=this.toolbarElement.style.display;this.toolbarElement.style.display='block';}if(!isInitialLoading){this.pdfViewer.isAnnotationToolbarVisible=true;}if(element){this.primaryToolbar.selectItem(element);}else{if(this.pdfViewer.enableToolbar){this.primaryToolbar.selectItem(this.primaryToolbar.annotationItem);}}if(toolBarInitialStatus==='none'){this.adjustViewer(true);}}// eslint-disable-next-line max-len
if(this.pdfViewer.magnification&&this.pdfViewer.magnification.fitType==='fitToPage'){this.pdfViewer.magnification.fitToPage();}this.enableAnnotationAddTools(true);this.isToolbarHidden=!this.isToolbarHidden;}};// eslint-disable-next-line
AnnotationToolbar.prototype.enablePropertiesTool=function(annotationModule){this.isHighlightEnabled=false;this.isUnderlineEnabled=false;this.isStrikethroughEnabled=false;if(this.pdfViewerBase.isTextMarkupAnnotationModule()){annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=false;}this.primaryToolbar.deSelectItem(this.highlightItem);this.primaryToolbar.deSelectItem(this.underlineItem);this.primaryToolbar.deSelectItem(this.strikethroughItem);this.enableTextMarkupAnnotationPropertiesTools(true);// eslint-disable-next-line max-len
this.updateColorInIcon(this.colorDropDownElement,annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color);this.selectAnnotationDeleteItem(true);};AnnotationToolbar.prototype.applyAnnotationToolbarSettings=function(){// eslint-disable-next-line
var annotationToolbarItems=this.pdfViewer.toolbarSettings.annotationToolbarItems;if(annotationToolbarItems){if(annotationToolbarItems.indexOf('HighlightTool')!==-1){this.showHighlightTool(true,0,0);}else{this.showHighlightTool(false,0,0);}if(annotationToolbarItems.indexOf('UnderlineTool')!==-1){this.showUnderlineTool(true,1,1);}else{this.showUnderlineTool(false,1,1);}if(annotationToolbarItems.indexOf('StrikethroughTool')!==-1){this.showStrikethroughTool(true,2,2);}else{this.showStrikethroughTool(false,2,2);}if(annotationToolbarItems.indexOf('ShapeTool')!==-1){this.showShapeAnnotationTool(true,4,4);}else{this.showShapeAnnotationTool(false,4,4);}if(annotationToolbarItems.indexOf('CalibrateTool')!==-1){this.showCalibrateAnnotationTool(true,6,6);}else{this.showCalibrateAnnotationTool(false,6,6);}if(annotationToolbarItems.indexOf('ColorEditTool')!==-1){this.showColorEditTool(true,22,22);}else{this.showColorEditTool(false,22,22);}if(annotationToolbarItems.indexOf('StrokeColorEditTool')!==-1){this.showStrokeColorEditTool(true,23,23);}else{this.showStrokeColorEditTool(false,23,23);}if(annotationToolbarItems.indexOf('ThicknessEditTool')!==-1){this.showThicknessEditTool(true,24,24);}else{this.showThicknessEditTool(false,24,24);}if(annotationToolbarItems.indexOf('OpacityEditTool')!==-1){this.showOpacityEditTool(true,25,25);}else{this.showOpacityEditTool(false,25,25);}if(annotationToolbarItems.indexOf('AnnotationDeleteTool')!==-1){this.showAnnotationDeleteTool(true,27,27);}else{this.showAnnotationDeleteTool(false,27,27);}if(annotationToolbarItems.indexOf('StampAnnotationTool')!==-1){this.showStampAnnotationTool(true,10,10);}else{this.showStampAnnotationTool(false,10,10);}if(annotationToolbarItems.indexOf('HandWrittenSignatureTool')!==-1){this.showSignatureTool(true,12,12);}else{this.showSignatureTool(false,12,12);}if(annotationToolbarItems.indexOf('FreeTextAnnotationTool')!==-1){this.showFreeTextAnnotationTool(true,8,8);}else{this.showFreeTextAnnotationTool(false,8,8);}if(annotationToolbarItems.indexOf('FontFamilyAnnotationTool')!==-1){this.showFontFamilyAnnotationTool(true,16,16);}else{this.showFontFamilyAnnotationTool(false,16,16);}if(annotationToolbarItems.indexOf('FontSizeAnnotationTool')!==-1){this.showFontSizeAnnotationTool(true,17,17);}else{this.showFontSizeAnnotationTool(false,17,17);}if(annotationToolbarItems.indexOf('FontStylesAnnotationTool')!==-1){this.showFontStylesAnnotationTool(true,20,20);}else{this.showFontStylesAnnotationTool(false,20,20);}if(annotationToolbarItems.indexOf('FontAlignAnnotationTool')!==-1){this.showFontAlignAnnotationTool(true,18,18);}else{this.showFontAlignAnnotationTool(false,18,18);}if(annotationToolbarItems.indexOf('FontColorAnnotationTool')!==-1){this.showFontColorAnnotationTool(true,19,19);}else{this.showFontColorAnnotationTool(false,19,19);}if(annotationToolbarItems.indexOf('CommentPanelTool')!==-1){this.showCommentPanelTool(true,28,28);}else{this.showCommentPanelTool(false,28,28);}this.showInkAnnotationTool();this.showSeparator();}};AnnotationToolbar.prototype.applyMobileAnnotationToolbarSettings=function(){// eslint-disable-next-line
var annotationToolbarItems=this.pdfViewer.toolbarSettings.annotationToolbarItems;if(annotationToolbarItems){if(annotationToolbarItems.indexOf('HighlightTool')!==-1){this.showHighlightTool(true,2,2);}else{this.showHighlightTool(false,2,2);}if(annotationToolbarItems.indexOf('UnderlineTool')!==-1){this.showUnderlineTool(true,3,3);}else{this.showUnderlineTool(false,3,3);}if(annotationToolbarItems.indexOf('StrikethroughTool')!==-1){this.showStrikethroughTool(true,4,4);}else{this.showStrikethroughTool(false,4,4);}if(annotationToolbarItems.indexOf('ShapeTool')!==-1){this.showShapeAnnotationTool(true,6,6);}else{this.showShapeAnnotationTool(false,6,6);}if(annotationToolbarItems.indexOf('CalibrateTool')!==-1){this.showCalibrateAnnotationTool(true,8,8);}else{this.showCalibrateAnnotationTool(false,8,8);}if(this.pdfViewer.toolbarSettings.toolbarItems.indexOf('CommentTool')!==-1){this.showStickyNoteToolInMobile(true);}else{this.showStickyNoteToolInMobile(false);}if(annotationToolbarItems.indexOf('StampAnnotationTool')!==-1){this.showStampAnnotationTool(true,12,12);}else{this.showStampAnnotationTool(false,12,12);}if(annotationToolbarItems.indexOf('HandWrittenSignatureTool')!==-1){this.showSignatureTool(true,14,14);}else{this.showSignatureTool(false,14,14);}if(annotationToolbarItems.indexOf('FreeTextAnnotationTool')!==-1){this.showFreeTextAnnotationTool(true,10,10);}else{this.showFreeTextAnnotationTool(false,10,10);}if(annotationToolbarItems.indexOf('CommentPanelTool')!==-1){this.showCommentPanelTool(true,18,18);}else{this.showCommentPanelTool(false,18,18);}if(annotationToolbarItems.indexOf('InkAnnotationTool')!==-1){this.showInkTool(true,16,16);}else{this.showInkTool(false,16,16);}this.showSeparatorInMobile();}};AnnotationToolbar.prototype.showStickyNoteToolInMobile=function(isShow){this.isCommentBtnVisible=isShow;this.applyHideToToolbar(isShow,0,0);};AnnotationToolbar.prototype.showSeparatorInMobile=function(){if(!this.isCommentBtnVisible){this.applyHideToToolbar(false,1,1);}if(!this.isHighlightBtnVisible&&!this.isUnderlineBtnVisible&&!this.isStrikethroughBtnVisible){this.applyHideToToolbar(false,5,5);}if(!this.isShapeBtnVisible){this.applyHideToToolbar(false,7,7);}if(!this.isCalibrateBtnVisible){this.applyHideToToolbar(false,9,9);}if(!this.isFreeTextBtnVisible){this.applyHideToToolbar(false,11,11);}if(!this.isStampBtnVisible){this.applyHideToToolbar(false,13,13);}if(!this.isSignatureBtnVisible){this.applyHideToToolbar(false,15,15);}if(!this.isInkBtnVisible){this.applyHideToToolbar(false,17,17);}};AnnotationToolbar.prototype.showInkAnnotationTool=function(){if(this.pdfViewer.toolbarSettings.annotationToolbarItems.indexOf('InkAnnotationTool')!==-1){this.showInkTool(true,14,14);}else{this.showInkTool(false,14,14);}};AnnotationToolbar.prototype.showSeparator=function(){if(!this.isHighlightBtnVisible&&!this.isUnderlineBtnVisible&&!this.isStrikethroughBtnVisible){this.applyHideToToolbar(false,3,3);}if(!this.isShapeBtnVisible){this.applyHideToToolbar(false,5,5);}if(!this.isCalibrateBtnVisible){this.applyHideToToolbar(false,7,7);}if(!this.isFreeTextBtnVisible){this.applyHideToToolbar(false,9,9);}if(!this.isStampBtnVisible){this.applyHideToToolbar(false,11,11);}if(!this.isSignatureBtnVisible){this.applyHideToToolbar(false,13,13);}if(!this.isInkBtnVisible){this.applyHideToToolbar(false,15,15);}// eslint-disable-next-line max-len
if(!this.isFontFamilyToolVisible&&!this.isFontSizeToolVisible&&!this.isFontColorToolVisible&&!this.isFontAlignToolVisible&&!this.isFontStylesToolVisible){this.applyHideToToolbar(false,21,21);}// eslint-disable-next-line max-len
if(!this.isColorToolVisible&&!this.isStrokeColorToolVisible&&!this.isThicknessToolVisible&&!this.isOpacityToolVisible||!this.isDeleteAnnotationToolVisible){this.applyHideToToolbar(false,26,26);}};AnnotationToolbar.prototype.showHighlightTool=function(isShow,startIndex,endIndex){this.isHighlightBtnVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showUnderlineTool=function(isShow,startIndex,endIndex){this.isUnderlineBtnVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showStrikethroughTool=function(isShow,startIndex,endIndex){this.isStrikethroughBtnVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showShapeAnnotationTool=function(isShow,startIndex,endIndex){this.isShapeBtnVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showCalibrateAnnotationTool=function(isShow,startIndex,endIndex){this.isCalibrateBtnVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showFreeTextAnnotationTool=function(isShow,startIndex,endIndex){this.isFreeTextBtnVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showStampAnnotationTool=function(isShow,startIndex,endIndex){this.isStampBtnVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showSignatureTool=function(isShow,startIndex,endIndex){this.isSignatureBtnVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showInkTool=function(isShow,startIndex,endIndex){this.isInkBtnVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showFontFamilyAnnotationTool=function(isShow,startIndex,endIndex){this.isFontFamilyToolVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showFontSizeAnnotationTool=function(isShow,startIndex,endIndex){this.isFontSizeToolVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showFontAlignAnnotationTool=function(isShow,startIndex,endIndex){this.isFontAlignToolVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showFontColorAnnotationTool=function(isShow,startIndex,endIndex){this.isFontColorToolVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showFontStylesAnnotationTool=function(isShow,startIndex,endIndex){this.isFontStylesToolVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showColorEditTool=function(isShow,startIndex,endIndex){this.isColorToolVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showStrokeColorEditTool=function(isShow,startIndex,endIndex){this.isStrokeColorToolVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showThicknessEditTool=function(isShow,startIndex,endIndex){this.isThicknessToolVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showOpacityEditTool=function(isShow,startIndex,endIndex){this.isOpacityToolVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showAnnotationDeleteTool=function(isShow,startIndex,endIndex){this.isDeleteAnnotationToolVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.showCommentPanelTool=function(isShow,startIndex,endIndex){this.isCommentPanelBtnVisible=isShow;this.applyHideToToolbar(isShow,startIndex,endIndex);};AnnotationToolbar.prototype.applyHideToToolbar=function(show,startIndex,endIndex){var isHide=!show;for(var index=startIndex;index<=endIndex;index++){var toolbar_1=void 0;var propertyToolbarElement=this.propertyToolbar&&this.propertyToolbar.element?this.propertyToolbar.element:null;var toolbarElement=this.toolbar&&this.toolbar.element?this.toolbar.element:null;if(toolbarElement&&toolbarElement.children&&toolbarElement.children.length>0){toolbar_1=this.toolbar;}else if(sf.base.Browser.isDevice&&propertyToolbarElement&&propertyToolbarElement.children&&propertyToolbarElement.children.length>0){toolbar_1=this.propertyToolbar;}if(toolbar_1.items[index]){var className=toolbar_1.items[index].cssClass;if(className&&className!==''){// Querying the toolbar item
var element=toolbar_1.element.querySelector('.'+className);if(element){this.toolbar.hideItem(element,isHide);}}else{toolbar_1.hideItem(index,isHide);}}}};/**
     * @param isAdjust
     * @private
     */AnnotationToolbar.prototype.adjustViewer=function(isAdjust){var splitterElement;var toolbarContainer;var annotationToolbarHeight;splitterElement=this.pdfViewer.element.querySelector('.e-pv-sidebar-toolbar-splitter');toolbarContainer=this.pdfViewer.element.querySelector('.e-pv-toolbar');var annotationToolbarContainer=this.pdfViewer.element.querySelector('.e-pv-annotation-toolbar');annotationToolbarHeight=this.getToolbarHeight(annotationToolbarContainer);var toolbarHeight=this.getToolbarHeight(toolbarContainer);var sideBarToolbar=this.pdfViewerBase.navigationPane.sideBarToolbar;var sideBarContentContainer=this.pdfViewerBase.navigationPane.sideBarContentContainer;var commentsContainer=this.pdfViewerBase.navigationPane.commentPanelContainer;var commentPanelResizer=this.pdfViewerBase.navigationPane.commentPanelResizer;var newToolbarHeight='';if(isAdjust){if(this.pdfViewer.enableToolbar){sideBarToolbar.style.top=toolbarHeight+annotationToolbarHeight+'px';sideBarContentContainer.style.top=toolbarHeight+annotationToolbarHeight+'px';splitterElement.style.top=toolbarHeight+annotationToolbarHeight+'px';commentsContainer.style.top=toolbarHeight+annotationToolbarHeight+'px';commentPanelResizer.style.top=toolbarHeight+annotationToolbarHeight+'px';}else{sideBarToolbar.style.top=annotationToolbarHeight+'px';sideBarContentContainer.style.top=annotationToolbarHeight+'px';splitterElement.style.top=annotationToolbarHeight+'px';commentsContainer.style.top=annotationToolbarHeight+'px';commentPanelResizer.style.top=toolbarHeight+annotationToolbarHeight+'px';}if(!this.pdfViewer.enableToolbar){toolbarHeight=0;}// eslint-disable-next-line max-len
this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),annotationToolbarHeight+toolbarHeight)+'px';newToolbarHeight=this.getNavigationToolbarHeight(annotationToolbarHeight+toolbarHeight);sideBarToolbar.style.height=newToolbarHeight;splitterElement.style.height=newToolbarHeight;commentPanelResizer.style.height=newToolbarHeight;sideBarContentContainer.style.height=newToolbarHeight;}else{if(this.pdfViewer.enableToolbar){// eslint-disable-next-line max-len
sideBarToolbar.style.top=toolbarHeight+'px';sideBarContentContainer.style.top=toolbarHeight+'px';splitterElement.style.top=toolbarHeight+'px';commentsContainer.style.top=toolbarHeight+'px';commentPanelResizer.style.top=toolbarHeight+'px';}else{sideBarToolbar.style.top=1+'px';sideBarToolbar.style.height='100%';sideBarContentContainer.style.top=1+'px';sideBarContentContainer.style.height='100%';splitterElement.style.top=1+'px';splitterElement.style.height='100%';commentsContainer.style.top=1+'px';commentsContainer.style.height='100%';commentPanelResizer.style.top=1+'px';commentPanelResizer.style.height='100%';}if(!this.pdfViewer.enableToolbar){toolbarHeight=0;}// eslint-disable-next-line max-len
this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),toolbarHeight)+'px';newToolbarHeight=this.getNavigationToolbarHeight(toolbarHeight);sideBarToolbar.style.height=newToolbarHeight;splitterElement.style.height=newToolbarHeight;commentPanelResizer.style.height=newToolbarHeight;sideBarContentContainer.style.height=newToolbarHeight;if(this.pdfViewerBase.viewerContainer.style.height==='0px'){// eslint-disable-next-line
this.pdfViewerBase.viewerContainer.style.height=parseInt(this.pdfViewer.element.style.height)-parseInt(sideBarToolbar.style.top)+'px';}}};AnnotationToolbar.prototype.updateContentContainerHeight=function(isAdjust,isBlazor$$1){var annotationToolbarHeight;if(isBlazor$$1){var annotationToolbarContainer=this.pdfViewer.element.querySelector('.e-pv-annotation-toolbar');annotationToolbarHeight=this.getToolbarHeight(annotationToolbarContainer);}else{annotationToolbarHeight=this.getToolbarHeight(this.toolbarElement);}var sideBarClientRect=this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();if(sideBarClientRect.height!==0){if(isAdjust){// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height=sideBarClientRect.height-annotationToolbarHeight+'px';}else{// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height=sideBarClientRect.height+annotationToolbarHeight+'px';}}};AnnotationToolbar.prototype.getToolbarHeight=function(element){var toolbarHeight=element.getBoundingClientRect().height;if(toolbarHeight===0&&element===this.pdfViewerBase.getElement('_toolbarContainer')){// getComputedStyle gets the value from style and toolbar border height is added to it.
// eslint-disable-next-line
toolbarHeight=parseFloat(window.getComputedStyle(element)['height'])+this.toolbarBorderHeight;}return toolbarHeight;};AnnotationToolbar.prototype.getNavigationToolbarHeight=function(toolbarHeight){var height=this.pdfViewer.element.getBoundingClientRect().height;return height!==0?height-toolbarHeight+'px':'';};AnnotationToolbar.prototype.handleHighlight=function(){if(!this.isHighlightEnabled){this.updateInteractionTools();this.clearShapeMode();this.clearMeasureMode();this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');this.primaryToolbar.selectItem(this.highlightItem);this.primaryToolbar.deSelectItem(this.underlineItem);this.primaryToolbar.deSelectItem(this.strikethroughItem);this.primaryToolbar.deSelectItem(this.freeTextEditItem);this.primaryToolbar.deSelectItem(this.inkAnnotationItem);this.enableTextMarkupAnnotationPropertiesTools(true);this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor=null;this.setCurrentColorInPicker();this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);this.isHighlightEnabled=true;this.isUnderlineEnabled=false;this.isStrikethroughEnabled=false;}else{this.deselectAllItems();}};AnnotationToolbar.prototype.handleUnderline=function(){if(!this.isUnderlineEnabled){this.updateInteractionTools();this.clearShapeMode();this.clearMeasureMode();this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');this.primaryToolbar.selectItem(this.underlineItem);this.primaryToolbar.deSelectItem(this.highlightItem);this.primaryToolbar.deSelectItem(this.strikethroughItem);this.primaryToolbar.deSelectItem(this.freeTextEditItem);this.primaryToolbar.deSelectItem(this.inkAnnotationItem);this.enableTextMarkupAnnotationPropertiesTools(true);this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor=null;this.setCurrentColorInPicker();this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);this.isUnderlineEnabled=true;this.isHighlightEnabled=false;this.isStrikethroughEnabled=false;}else{this.deselectAllItems();}};AnnotationToolbar.prototype.handleStrikethrough=function(){if(!this.isStrikethroughEnabled){this.updateInteractionTools();this.clearShapeMode();this.clearMeasureMode();this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');this.primaryToolbar.selectItem(this.strikethroughItem);this.primaryToolbar.deSelectItem(this.highlightItem);this.primaryToolbar.deSelectItem(this.underlineItem);this.primaryToolbar.deSelectItem(this.freeTextEditItem);this.primaryToolbar.deSelectItem(this.inkAnnotationItem);this.enableTextMarkupAnnotationPropertiesTools(true);this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor=null;this.setCurrentColorInPicker();// eslint-disable-next-line max-len
this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor);this.isStrikethroughEnabled=true;this.isHighlightEnabled=false;this.isUnderlineEnabled=false;}else{this.deselectAllItems();}};/**
     * @private
     */AnnotationToolbar.prototype.deselectAllItemsInBlazor=function(){if(this.pdfViewerBase.isTextMarkupAnnotationModule()){this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=false;this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(true);}if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.primaryToolbar.deSelectItem(this.HighlightElement);this.primaryToolbar.deSelectItem(this.UnderlineElement);this.primaryToolbar.deSelectItem(this.StrikethroughElement);this.primaryToolbar.deSelectItem(this.FreeTextElement);this.primaryToolbar.deSelectItem(this.InkAnnotationElement);this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateTextMarkupButtons',false,false,false);}this.resetFreeTextAnnot();this.clearTextMarkupMode();this.clearShapeMode();this.clearMeasureMode();this.pdfViewer.tool='';if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.enableTextMarkupAnnotationPropertiesTools(false);this.enableFreeTextAnnotationPropertiesTools(false);this.updateColorInIcon(this.colorDropDownElement,'#000000');this.updateColorInIcon(this.strokeDropDownElement,'#000000');this.updateColorInIcon(this.fontColorElement,'#000000');this.selectAnnotationDeleteItem(false);}if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot=false;}};/**
     * @private
     */AnnotationToolbar.prototype.deselectAllItems=function(){var isBlazorPlatform=sf.base.isBlazor();this.isHighlightEnabled=false;this.isUnderlineEnabled=false;this.isStrikethroughEnabled=false;if(this.pdfViewerBase.isTextMarkupAnnotationModule()){this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=false;this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(true);}if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(isBlazorPlatform){this.primaryToolbar.deSelectItem(this.pdfViewer.toolbar.SelectToolElement);this.primaryToolbar.selectItem(this.pdfViewer.toolbar.PanElement);this.primaryToolbar.deSelectItem(this.HighlightElement);this.primaryToolbar.deSelectItem(this.UnderlineElement);this.primaryToolbar.deSelectItem(this.StrikethroughElement);this.primaryToolbar.deSelectItem(this.FreeTextElement);this.primaryToolbar.deSelectItem(this.InkAnnotationElement);}else{this.primaryToolbar.deSelectItem(this.highlightItem);this.primaryToolbar.deSelectItem(this.underlineItem);this.primaryToolbar.deSelectItem(this.strikethroughItem);this.primaryToolbar.deSelectItem(this.freeTextEditItem);this.primaryToolbar.deSelectItem(this.inkAnnotationItem);}}this.resetFreeTextAnnot();this.clearTextMarkupMode();this.clearShapeMode();this.clearMeasureMode();this.pdfViewer.tool='';if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.enableTextMarkupAnnotationPropertiesTools(false);this.enableFreeTextAnnotationPropertiesTools(false);this.updateColorInIcon(this.colorDropDownElement,'#000000');this.updateColorInIcon(this.strokeDropDownElement,'#000000');this.updateColorInIcon(this.fontColorElement,'#000000');this.selectAnnotationDeleteItem(false);}if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot=false;}};AnnotationToolbar.prototype.updateInteractionTools=function(){if(this.pdfViewer.enableTextSelection){this.pdfViewerBase.initiateTextSelectMode();if(!sf.base.Browser.isDevice){this.pdfViewer.toolbar.updateInteractionTools(true);}}else if(!sf.base.Browser.isDevice){this.pdfViewer.toolbar.updateInteractionTools(false);}};/**
     * @param isEnable
     * @private
     */AnnotationToolbar.prototype.selectAnnotationDeleteItem=function(isEnable,deleteIconCicked){if(!sf.base.isBlazor()&&!sf.base.Browser.isDevice){if(this.toolbar){if(isEnable){// eslint-disable-next-line
var annotation=this.pdfViewer.annotationModule.findCurrentAnnotation();if(annotation){// eslint-disable-next-line
if(annotation.annotationSettings&&annotation.annotationSettings.isLock){if(this.pdfViewer.annotationModule.checkAllowedInteractions('Delete',annotation)){this.toolbar.enableItems(this.deleteItem.parentElement,isEnable);}else{this.toolbar.enableItems(this.deleteItem.parentElement,false);}}else{this.toolbar.enableItems(this.deleteItem.parentElement,isEnable);}}}else{this.toolbar.enableItems(this.deleteItem.parentElement,isEnable);}}}else{if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(isEnable){// eslint-disable-next-line
var annotation=this.pdfViewer.annotationModule.findCurrentAnnotation();if(annotation){// eslint-disable-next-line
if(annotation.annotationSettings&&annotation.annotationSettings.isLock){if(this.pdfViewer.annotationModule.checkAllowedInteractions('Delete',annotation)){this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);}else{this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(false);}}else if(this.pdfViewerBase.blazorUIAdaptor){this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);}}}else if(this.pdfViewerBase.blazorUIAdaptor){this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);}if(deleteIconCicked){this.pdfViewerBase.focusViewerContainer();}}}};/**
     * @param isEnable
     * @private
     */AnnotationToolbar.prototype.enableTextMarkupAnnotationPropertiesTools=function(isEnable){if(!sf.base.Browser.isDevice){if(!sf.base.isBlazor()){this.toolbar.enableItems(this.colorDropDownElement.parentElement,isEnable);this.toolbar.enableItems(this.opacityDropDownElement.parentElement,isEnable);if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.toolbar.enableItems(this.strokeDropDownElement.parentElement,false);this.toolbar.enableItems(this.thicknessElement.parentElement,false);this.toolbar.enableItems(this.fontFamilyElement.parentElement,false);this.toolbar.enableItems(this.fontSizeElement.parentElement,false);this.toolbar.enableItems(this.fontColorElement.parentElement,false);this.toolbar.enableItems(this.textAlignElement.parentElement,false);this.toolbar.enableItems(this.textPropElement.parentElement,false);}}else{// this.pdfViewer._dotnetInstance.invokeMethodAsync('AnnotationSelect', 'TextMarkup');
this.pdfViewerBase.blazorUIAdaptor.enableTextMarkupAnnotationPropertiesTools(isEnable);}}};AnnotationToolbar.prototype.checkAnnotationPropertiesChange=function(){// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[0];if(annotation&&annotation.annotationSettings){// eslint-disable-next-line
var isLock=annotation.annotationSettings.isLock;if(isLock){if(this.pdfViewer.annotationModule.checkAllowedInteractions('PropertyChange',annotation)){return true;}else{return false;}}}return true;};/**
     * @param isEnable
     * @private
     */AnnotationToolbar.prototype.enableAnnotationPropertiesTools=function(isEnable){if(!sf.base.Browser.isDevice){var isPropertiesChanges=this.checkAnnotationPropertiesChange();if(!isEnable){isPropertiesChanges=true;}if(!sf.base.isBlazor()){if(isPropertiesChanges){// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0]&&this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Line'){this.toolbar.enableItems(this.colorDropDownElement.parentElement,false);}else{this.toolbar.enableItems(this.colorDropDownElement.parentElement,isEnable);}this.toolbar.enableItems(this.opacityDropDownElement.parentElement,isEnable);this.toolbar.enableItems(this.strokeDropDownElement.parentElement,isEnable);this.toolbar.enableItems(this.thicknessElement.parentElement,isEnable);if(this.pdfViewer.enableShapeLabel){this.toolbar.enableItems(this.fontFamilyElement.parentElement,isEnable);this.toolbar.enableItems(this.fontSizeElement.parentElement,isEnable);this.toolbar.enableItems(this.fontColorElement.parentElement,isEnable);}this.toolbar.enableItems(this.textAlignElement.parentElement,false);this.toolbar.enableItems(this.textPropElement.parentElement,false);}}else{// this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableAnnotationPropertiesTools', isEnable, isPropertiesChanges);
this.pdfViewerBase.blazorUIAdaptor.enableAnnotationPropertiesTool(isEnable,isPropertiesChanges);}}};/**
     * @param isEnable
     * @private
     */AnnotationToolbar.prototype.enableSignaturePropertiesTools=function(isEnable){if(!sf.base.Browser.isDevice){var isPropertiesChanges=this.checkAnnotationPropertiesChange();if(!isEnable){isPropertiesChanges=true;}if(!sf.base.isBlazor()){if(isPropertiesChanges){this.toolbar.enableItems(this.colorDropDownElement.parentElement,false);this.toolbar.enableItems(this.opacityDropDownElement.parentElement,isEnable);this.toolbar.enableItems(this.strokeDropDownElement.parentElement,isEnable);this.toolbar.enableItems(this.thicknessElement.parentElement,isEnable);this.toolbar.enableItems(this.textAlignElement.parentElement,false);this.toolbar.enableItems(this.textPropElement.parentElement,false);this.toolbar.enableItems(this.fontFamilyElement.parentElement,false);this.toolbar.enableItems(this.fontSizeElement.parentElement,false);this.toolbar.enableItems(this.fontColorElement.parentElement,false);this.toolbar.enableItems(this.textAlignElement.parentElement,false);}}else{//this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableSignaturePropertiesTools', isEnable, isPropertiesChanges);
this.pdfViewerBase.blazorUIAdaptor.enableSignaturePropertiesTools(isEnable,isPropertiesChanges);}}};/**
     * @param isEnable
     * @private
     */AnnotationToolbar.prototype.enableStampAnnotationPropertiesTools=function(isEnable){var isPropertiesChanges=this.checkAnnotationPropertiesChange();if(!isEnable){isPropertiesChanges=true;}if(!sf.base.isBlazor()){if(isPropertiesChanges){this.toolbar.enableItems(this.opacityDropDownElement.parentElement,isEnable);this.toolbar.enableItems(this.colorDropDownElement.parentElement,false);this.toolbar.enableItems(this.strokeDropDownElement.parentElement,false);this.toolbar.enableItems(this.thicknessElement.parentElement,false);this.toolbar.enableItems(this.fontFamilyElement.parentElement,false);this.toolbar.enableItems(this.fontSizeElement.parentElement,false);this.toolbar.enableItems(this.fontColorElement.parentElement,false);this.toolbar.enableItems(this.textAlignElement.parentElement,false);this.toolbar.enableItems(this.textPropElement.parentElement,false);}}else{// this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableStampAnnotationPropertiesTools', isEnable, isPropertiesChanges);
this.pdfViewerBase.blazorUIAdaptor.enableStampAnnotationPropertiesTools(isEnable,isPropertiesChanges);}};/**
     * @param isEnable
     * @private
     */AnnotationToolbar.prototype.enableFreeTextAnnotationPropertiesTools=function(isEnable){var isPropertiesChanges=this.checkAnnotationPropertiesChange();if(!isEnable){isPropertiesChanges=true;}if(!sf.base.isBlazor()){if(isPropertiesChanges){this.toolbar.enableItems(this.opacityDropDownElement.parentElement,isEnable);this.toolbar.enableItems(this.colorDropDownElement.parentElement,isEnable);this.toolbar.enableItems(this.strokeDropDownElement.parentElement,isEnable);this.toolbar.enableItems(this.thicknessElement.parentElement,isEnable);this.toolbar.enableItems(this.fontFamilyElement.parentElement,isEnable);this.toolbar.enableItems(this.fontSizeElement.parentElement,isEnable);this.toolbar.enableItems(this.fontColorElement.parentElement,isEnable);this.toolbar.enableItems(this.textAlignElement.parentElement,isEnable);this.toolbar.enableItems(this.textPropElement.parentElement,isEnable);}}else{//this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableFreeTextAnnotationPropertiesTools', isEnable, isPropertiesChanges);
this.pdfViewerBase.blazorUIAdaptor.enableFreeTextAnnotationPropertiesTools(isEnable,isPropertiesChanges);}};/**
     * @param isEnable
     * @private
     */AnnotationToolbar.prototype.enableAnnotationAddTools=function(isEnable){if(this.toolbar&&!sf.base.Browser.isDevice){if(this.pdfViewer.enableTextMarkupAnnotation){this.toolbar.enableItems(this.highlightItem.parentElement,isEnable);this.toolbar.enableItems(this.underlineItem.parentElement,isEnable);this.toolbar.enableItems(this.strikethroughItem.parentElement,isEnable);}if(this.pdfViewer.enableShapeAnnotation){this.toolbar.enableItems(this.shapeElement.parentElement,isEnable);}if(this.pdfViewer.enableStampAnnotations){this.toolbar.enableItems(this.stampElement.parentElement,isEnable);}if(this.pdfViewer.enableMeasureAnnotation&&this.pdfViewerBase.isCalibrateAnnotationModule()){this.toolbar.enableItems(this.calibrateElement.parentElement,isEnable);}if(this.pdfViewer.enableFreeText){this.toolbar.enableItems(this.freeTextEditItem.parentElement,isEnable);}if(this.pdfViewer.enableHandwrittenSignature){this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement,isEnable);}if(this.pdfViewer.enableInkAnnotation){this.toolbar.enableItems(this.inkAnnotationItem.parentElement,isEnable);}if(this.pdfViewer.enableCommentPanel){this.enableCommentPanelTool(isEnable);}}};/**
     * @private
     */AnnotationToolbar.prototype.isAnnotationButtonsEnabled=function(){var isButtonsEnabled=false;if(this.isHighlightEnabled||this.isUnderlineEnabled||this.isStrikethroughEnabled){isButtonsEnabled=true;}return isButtonsEnabled;};/**
     * @param isEnable
     * @private
     */AnnotationToolbar.prototype.enableCommentPanelTool=function(isEnable){if(this.toolbar){this.toolbar.enableItems(this.commentItem.parentElement,isEnable);}};AnnotationToolbar.prototype.updateToolbarItems=function(){if(this.pdfViewer.enableTextMarkupAnnotation){this.enableTextMarkupAddTools(true);}else{this.enableTextMarkupAddTools(false);}this.toolbar.enableItems(this.shapeElement.parentElement,this.pdfViewer.enableShapeAnnotation);this.toolbar.enableItems(this.stampElement.parentElement,this.pdfViewer.enableStampAnnotations);this.toolbar.enableItems(this.calibrateElement.parentElement,this.pdfViewer.enableMeasureAnnotation);this.toolbar.enableItems(this.freeTextEditItem.parentElement,this.pdfViewer.enableFreeText);this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement,this.pdfViewer.enableHandwrittenSignature);this.toolbar.enableItems(this.inkAnnotationItem.parentElement,this.pdfViewer.enableInkAnnotation);};AnnotationToolbar.prototype.enableTextMarkupAddTools=function(isEnable){this.toolbar.enableItems(this.highlightItem.parentElement,isEnable);this.toolbar.enableItems(this.underlineItem.parentElement,isEnable);this.toolbar.enableItems(this.strikethroughItem.parentElement,isEnable);};/**
     * @private
     */ // for shapes added by drawing package
AnnotationToolbar.prototype.updateAnnnotationPropertyItems=function(){if(!sf.base.isBlazor()){if(this.pdfViewer.selectedItems.annotations.length===1){// eslint-disable-next-line max-len
this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElement,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,'fillColor'));this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElement,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,'strokeColor'));if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='FreeText'){// eslint-disable-next-line
this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElement,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor,'fontColor'));this.pdfViewer.toolbar.annotationToolbarModule.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily);// eslint-disable-next-line max-len
this.pdfViewer.toolbar.annotationToolbarModule.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize);this.pdfViewer.toolbar.annotationToolbarModule.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign);}}else{this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElement,'#000000');this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElement,'#000000');this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElement,'#000000');}}else{this.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector('.e-pv-annotation-color-container');this.strokeDropDownElementInBlazor=this.pdfViewer.element.querySelector('.e-pv-annotation-stroke-container');this.fontColorElementInBlazor=this.pdfViewer.element.querySelector('.e-pv-annotation-textcolor-container');if(this.pdfViewer.selectedItems.annotations.length===1){// eslint-disable-next-line max-len
this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,'fillColor'));this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,'strokeColor'));if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='FreeText'){// eslint-disable-next-line
this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor,'fontColor'));//this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFontFamilyInIcon', this.pdfViewer.selectedItems.annotations[0].fontFamily);
// eslint-disable-next-line max-len
this.pdfViewerBase.blazorUIAdaptor.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily);// this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFontSizeInIcon', this.pdfViewer.selectedItems.annotations[0].fontSize);
this.pdfViewerBase.blazorUIAdaptor.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize);//this.pdfViewer.toolbar.annotationtoolbar.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign);
}}else{this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor,'#000000');this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor,'#000000');this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor,'#000000');}}};AnnotationToolbar.prototype.getColorHexValue=function(colorString,type){if(colorString==='#ffffff00'){colorString='#ffffff';}if(colorString.toLowerCase()==='red'){colorString='#FF0000';}if(colorString!=='transparent'){if(!sf.base.isBlazor()){return this.colorPalette.getValue(colorString,'hex');}else{return colorString;}}else{if(type==='fontColor'||type==='strokeColor'){return'#000000';}else{return'#ffffff';}}};AnnotationToolbar.prototype.setColorInPicker=function(colorpick,colorString){if(colorpick){colorpick.setProperties({'value':colorString},true);}};/**
     * @private
     */AnnotationToolbar.prototype.resetToolbar=function(){this.adjustViewer(false);this.updateToolbarItems();// eslint-disable-next-line max-len
if((this.pdfViewer.isAnnotationToolbarOpen||this.pdfViewer.isAnnotationToolbarVisible)&&this.pdfViewer.enableAnnotationToolbar){this.toolbarElement.style.display='';this.isToolbarHidden=false;this.adjustViewer(true);this.enableAnnotationAddTools(false);this.pdfViewer.isAnnotationToolbarVisible=true;}else{this.toolbarElement.style.display='none';this.isToolbarHidden=true;this.pdfViewer.isAnnotationToolbarVisible=false;}};/**
     * @private
     */AnnotationToolbar.prototype.clearTextMarkupMode=function(){if(this.pdfViewerBase.isTextMarkupAnnotationModule()){if(sf.base.isBlazor()){this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=false;}this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode='';}};/**
     * @private
     */AnnotationToolbar.prototype.clearShapeMode=function(){if(this.pdfViewerBase.isShapeAnnotationModule()){this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode='';}};/**
     * @private
     */AnnotationToolbar.prototype.clearMeasureMode=function(){if(this.pdfViewerBase.isCalibrateAnnotationModule()){this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode='';}};/**
     * @private
     */AnnotationToolbar.prototype.clear=function(){this.deselectAllItems();};/**
     * @private
     */AnnotationToolbar.prototype.destroy=function(){this.destroyComponent();this.shapeDropDown?this.shapeDropDown.destroy():null;this.calibrateDropDown?this.calibrateDropDown.destroy():null;this.fontColorDropDown?this.fontColorDropDown.destroy():null;this.textAlignDropDown?this.textAlignDropDown.destroy():null;this.colorDropDown?this.colorDropDown.destroy():null;this.strokeDropDown?this.strokeDropDown.destroy():null;this.thicknessDropDown?this.thicknessDropDown.destroy():null;this.opacityDropDown?this.opacityDropDown.destroy():null;this.textPropertiesDropDown?this.textPropertiesDropDown.destroy():null;this.toolbar?this.toolbar.destroy():null;// eslint-disable-next-line
var stampImage=document.getElementById(this.pdfViewer.dataId+'_stampElement');if(stampImage){stampImage.parentElement.removeChild(stampImage);}};AnnotationToolbar.prototype.destroyComponent=function(){// eslint-disable-next-line
var componentElement=[this.highlightItem,this.underlineItem,this.strikethroughItem,this.lineElement,this.arrowElement,this.rectangleElement,this.circleElement,this.polygonElement,this.calibrateDistance,this.calibrateArea,this.calibrateRadius,this.calibrateVolume,this.calibratePerimeter,this.freeTextEditItem,this.stampElement,this.handWrittenSignatureItem,this.inkAnnotationItem,this.fontFamilyElement,this.fontSizeElement,this.alignLeftElement,this.alignRightElement,this.alignCenterElement,this.alignJustifyElement,this.boldElement,this.italicElement,this.fontStyleStrikethroughItem,this.fontStyleUnderlineItem,this.deleteItem,this.commentItem,this.shapeDropDown?this.shapeDropDown.activeElem[0]:null,this.calibrateDropDown?this.calibrateDropDown.activeElem[0]:null,this.fontColorDropDown?this.fontColorDropDown.activeElem[0]:null,this.textAlignDropDown?this.textAlignDropDown.activeElem[0]:null,this.colorDropDown?this.colorDropDown.activeElem[0]:null,this.strokeDropDown?this.strokeDropDown.activeElem[0]:null,this.thicknessDropDown?this.thicknessDropDown.activeElem[0]:null,this.opacityDropDown?this.opacityDropDown.activeElem[0]:null,this.textPropertiesDropDown?this.textPropertiesDropDown.activeElem[0]:null];for(var i=0;i<componentElement.length;i++){if(componentElement[i]){this.destroyDependentComponent(componentElement[i]);}}};AnnotationToolbar.prototype.destroyDependentComponent=function(component){if(component.ej2_instances){for(var i=component.ej2_instances.length-1;i>=0;i--){component.ej2_instances[i].destroy();}}};AnnotationToolbar.prototype.getElementHeight=function(element){try{return element.getBoundingClientRect().height;}catch(error){return 0;}};AnnotationToolbar.prototype.updateViewerHeight=function(viewerHeight,toolbarHeight){return this.getElementHeight(this.pdfViewer.element)-toolbarHeight;};AnnotationToolbar.prototype.resetViewerHeight=function(viewerHeight,toolbarHeight){return viewerHeight+toolbarHeight;};/**
     * @private
     */AnnotationToolbar.prototype.afterAnnotationToolbarCreationInBlazor=function(){this.HighlightElement=document.getElementById(this.pdfViewer.dataId+'_highLight').children[0];this.UnderlineElement=document.getElementById(this.pdfViewer.dataId+'_underline').children[0];this.StrikethroughElement=document.getElementById(this.pdfViewer.dataId+'_strikethrough').children[0];this.InkAnnotationElement=document.getElementById(this.pdfViewer.dataId+'_annotation_ink').children[0];this.InkAnnotationElement.classList.add('e-pv-tbar-btn');this.FreeTextElement=document.getElementById(this.pdfViewer.dataId+'_annotation_freeTextEdit').children[0];this.HighlightElement=this.addClassToToolbarInBlazor(this.HighlightElement,'e-pv-highlight','_highLight');this.UnderlineElement=this.addClassToToolbarInBlazor(this.UnderlineElement,'e-pv-underline','_underline');this.StrikethroughElement=this.addClassToToolbarInBlazor(this.StrikethroughElement,'e-pv-strikethrough','_strikethrough');};// eslint-disable-next-line
AnnotationToolbar.prototype.addClassToToolbarInBlazor=function(element,className,idString){element.classList.add(className);element.classList.add('e-pv-tbar-btn');if(element.childNodes.length>0){var spanElement=element.childNodes[0];if(spanElement&&spanElement.classList){spanElement.id=this.pdfViewer.dataId+idString+'Icon';spanElement.classList.remove('e-icons');spanElement.classList.remove('e-btn-icon');if(this.pdfViewer.enableRtl){spanElement.classList.add('e-right');}}}return element;};AnnotationToolbar.prototype.handleHighlightInBlazor=function(){if(this.HighlightElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.HighlightElement);}else if(!this.HighlightElement.classList.contains('e-pv-select')){this.primaryToolbar.selectItem(this.HighlightElement);}if(this.StrikethroughElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.StrikethroughElement);}if(this.UnderlineElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.UnderlineElement);}};AnnotationToolbar.prototype.handleUnderlineInBlazor=function(){if(this.UnderlineElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.UnderlineElement);}else if(!this.UnderlineElement.classList.contains('e-pv-select')){this.primaryToolbar.selectItem(this.UnderlineElement);}if(this.StrikethroughElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.StrikethroughElement);}if(this.HighlightElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.HighlightElement);}};AnnotationToolbar.prototype.handleStrikethroughInBlazor=function(){if(this.StrikethroughElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.StrikethroughElement);}else if(!this.StrikethroughElement.classList.contains('e-pv-select')){this.primaryToolbar.selectItem(this.StrikethroughElement);}if(this.HighlightElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.HighlightElement);}if(this.UnderlineElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.UnderlineElement);}};AnnotationToolbar.prototype.AnnotationSliderOpened=function(){if(this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.selectedItems.annotations[0]){if(this.pdfViewer.selectedItems.annotations[0].wrapper&&this.pdfViewer.selectedItems.annotations[0].wrapper.children[0]){var opacity=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity*100;var thickness=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateAnnotationSlider',opacity,thickness);}}else if(this.pdfViewer.annotationModule.textMarkupAnnotationModule){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){var opacityValue=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity*100;this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateAnnotationOpacity',opacityValue);}}};AnnotationToolbar.prototype.DropDownOpened=function(colorElement){if(colorElement&&colorElement[0].element){var colorElementBounds=colorElement[0].element.getBoundingClientRect();var sidebarElement=this.pdfViewerBase.navigationPane.sideBarToolbar;var sideBarElementWidth=sidebarElement?sidebarElement.getBoundingClientRect().width:0;if(colorElementBounds.left>this.pdfViewerBase.viewerContainer.clientWidth+colorElementBounds.width+sideBarElementWidth){colorElement[0].element.style.left=colorElementBounds.left-this.pdfViewerBase.viewerContainer.clientHeight/2+'px';}}};AnnotationToolbar.prototype.annotatioToolbarClick=function(isResetFreeText,isHandleTextMarkup,isSetAnnotation,annotationType){if(isResetFreeText){this.resetFreeTextAnnot();}if(isHandleTextMarkup){if(annotationType==="Highlight"){this.handleHighlightInBlazor();}else if(annotationType==="Underline"){this.handleUnderlineInBlazor();}else if(annotationType==="Strikethrough"){this.handleStrikethroughInBlazor();}}if(!isSetAnnotation){this.pdfViewer.annotationModule.setAnnotationMode(annotationType);}else{this.clearTextMarkupMode();}};return AnnotationToolbar;}();/**
 * export types
 */ /**
 * BookmarkView module
 */var BookmarkView=/** @class */function(){/**
     * @param pdfViewer
     * @param pdfViewerBase
     * @param pdfViewer
     * @param pdfViewerBase
     * @private
     */function BookmarkView(pdfViewer,pdfViewerBase){var _this=this;/**
         * @private
         */this.childNavigateCount=0;// eslint-disable-next-line
this.bookmarkClick=function(args){// eslint-disable-next-line
if(!args.event.target.classList.contains('e-icons')){var bookid=args.data.Id;_this.childNavigateCount=0;_this.pdfViewerBase.navigationPane.goBackToToolbar();// eslint-disable-next-line
var selectedItem=_this.bookmarkList.getSelectedItems();_this.navigateToBookmark(bookid,args.text,selectedItem.data.FileName);}else{_this.childNavigateCount++;}return false;};this.nodeClick=function(args){_this.setHeight(args.node);var bookid=Number(args.nodeData.id);// eslint-disable-next-line
var data=_this.treeObj.getTreeData(args.node);_this.navigateToBookmark(bookid,args.node.textContent,data[0].FileName);if(_this.pdfViewer.annotationModule&&_this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(_this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);_this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}return false;};this.bookmarkPanelBeforeOpen=function(args){if(_this.pdfViewer.enableBookmarkStyles){for(var k=0;k<_this.bookmarkStyles.length;k++){if(args.text.trim()===_this.bookmarkStyles[k].Text.trim()){// eslint-disable-next-line
var element=args.node.lastElementChild;if(element){// eslint-disable-next-line
var fontStyle=_this.bookmarkStyles[k].FontStyle.split(',');for(var n=0;n<fontStyle.length;n++){switch(fontStyle[n].trim()){case'Italic':element.style.fontStyle='italic';break;case'Bold':element.style.fontWeight='Bold';}}// eslint-disable-next-line
var currentElement=element.getElementsByClassName('e-pv-bookmark-title')[0];if(currentElement){currentElement.style.color=_this.bookmarkStyles[k].Color;}else{element.children[0].style.color=_this.bookmarkStyles[k].Color;}}break;}}}};this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @private
     */BookmarkView.prototype.createRequestForBookmarks=function(){var proxy=this;// eslint-disable-next-line max-len
var jsonObject={hashId:this.pdfViewerBase.hashId,action:'Bookmarks',elementId:this.pdfViewer.dataId,uniqueId:this.pdfViewerBase.documentId};if(this.pdfViewerBase.jsonDocumentId){// eslint-disable-next-line
jsonObject.documentId=this.pdfViewerBase.jsonDocumentId;}if(this.pdfViewer.enableBookmarkStyles){// eslint-disable-next-line
jsonObject.bookmarkStyles=this.pdfViewer.enableBookmarkStyles;}this.bookmarkRequestHandler=new AjaxHandler(this.pdfViewer);this.bookmarkRequestHandler.url=proxy.pdfViewer.serviceUrl+'/Bookmarks';this.bookmarkRequestHandler.responseType='json';this.bookmarkRequestHandler.send(jsonObject);// eslint-disable-next-line
this.bookmarkRequestHandler.onSuccess=function(result){if(proxy.pdfViewerBase.navigationPane){proxy.pdfViewerBase.navigationPane.disableBookmarkButton();}// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){proxy.pdfViewerBase.onControlError(500,data,'Bookmarks');data=null;}}if(data&&data.uniqueId===proxy.pdfViewerBase.documentId){proxy.pdfViewer.fireAjaxRequestSuccess('Bookmarks',data);proxy.bookmarks={bookMark:data.Bookmarks};proxy.bookmarkStyles=data.Bookmarkstyles;proxy.bookmarksDestination={bookMarkDestination:data.BookmarksDestination};if(sf.base.isBlazor()){// eslint-disable-next-line
var bookmarkCollection={bookmarks:proxy.bookmarks,bookmarksDestination:proxy.bookmarksDestination};if(proxy.pdfViewer&&proxy.pdfViewer._dotnetInstance){proxy.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateBookmarkCollection',bookmarkCollection);}}}}if(proxy.pdfViewerBase.navigationPane){if(proxy.bookmarks==null){proxy.pdfViewerBase.navigationPane.disableBookmarkButton();if(sf.base.isBlazor()&&proxy.pdfViewer._dotnetInstance){proxy.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateBookmarkCollection',null);}}else{proxy.pdfViewerBase.navigationPane.enableBookmarkButton();proxy.isBookmarkViewDiv=false;if(proxy.pdfViewer.isBookmarkPanelOpen){proxy.pdfViewerBase.navigationPane.openBookmarkcontentInitially();}}}};// eslint-disable-next-line
this.bookmarkRequestHandler.onFailure=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,'Bookmarks');};// eslint-disable-next-line
this.bookmarkRequestHandler.onError=function(result){proxy.pdfViewerBase.openNotificationPopup();proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,'Bookmarks');};};/**
     * @private
     */BookmarkView.prototype.renderBookmarkcontent=function(){var _this=this;if(!this.isBookmarkViewDiv){var isblazor=sf.base.isBlazor();// eslint-disable-next-line max-len
this.bookmarkView=isblazor?this.pdfViewer.element.querySelector('.e-pv-bookmark-view'):sf.base.createElement('div',{id:this.pdfViewer.dataId+'_bookmark_view',className:'e-pv-bookmark-view'});this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);// eslint-disable-next-line max-len
var bookmarkIconView=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_bookmark_iconview',className:'e-pv-bookmark-icon-view'});// eslint-disable-next-line max-len
if(!this.pdfViewer.enableRtl){// eslint-disable-next-line max-len
var bookmarkIcon=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_bookmark_icon',className:'e-pv-bookmark-icon e-pv-icon'});bookmarkIconView.appendChild(bookmarkIcon);}else{// eslint-disable-next-line max-len
var bookmarkIcon=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_bookmark_icon',className:'e-pv-bookmark-icon e-pv-icon e-right'});bookmarkIconView.appendChild(bookmarkIcon);}// eslint-disable-next-line max-len
var bookmarkTitle=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_bookmark_Title',className:'e-pv-bookmark-title'});if(this.pdfViewer.enableRtl){bookmarkTitle.style.paddingRight=26+'px';}bookmarkTitle.innerText='${Title}';bookmarkIconView.appendChild(bookmarkTitle);if(!isblazor){// eslint-disable-next-line max-len
this.treeObj=new sf.navigations.TreeView({fields:{dataSource:this.bookmarks.bookMark,id:'Id',text:'Title',child:'Child',hasChildren:'HasChild'},nodeTemplate:bookmarkIconView.outerHTML,nodeSelected:this.nodeClick.bind(this),drawNode:this.bookmarkPanelBeforeOpen.bind(this)});this.treeObj.isStringTemplate=true;if(this.pdfViewer.enableRtl){this.treeObj.enableRtl=true;}this.treeObj.appendTo(this.bookmarkView);}// eslint-disable-next-line
var event_1=['mouseover','keydown'];for(var m=0;m<event_1.length;m++){this.bookmarkView.addEventListener(event_1[m],function(event){_this.setHeight(event.target);});}this.isBookmarkViewDiv=true;}this.bookmarkView.style.display='block';};/**
     * @private
     */BookmarkView.prototype.renderBookmarkContentMobile=function(){if(this.bookmarkView!=null){this.bookmarkView.remove();}this.bookmarkView=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_bookmark_view',className:'e-pv-bookmark-view'});this.pdfViewerBase.getElement('_bookmarks_container').appendChild(this.bookmarkView);this.bookmarkList=new sf.lists.ListView({dataSource:this.bookmarks.bookMark,fields:{id:'Id',text:'Title',child:'Child'},showHeader:false,select:this.bookmarkClick.bind(this)});this.bookmarkList.isStringTemplate=true;if(this.pdfViewer.enableRtl){this.bookmarkList.enableRtl=true;}this.bookmarkList.appendTo(this.bookmarkView);};// eslint-disable-next-line
BookmarkView.prototype.setHeight=function(element){if(this.treeObj){if(this.treeObj.fullRowSelect&&element.classList){if(element.classList.contains('e-treeview')){element=element.querySelector('.e-node-focus').querySelector('.e-fullrow');}else if(element.classList.contains('e-list-parent')){element=element.querySelector('.e-fullrow');}else if(element.classList.value!=='e-fullrow'){if(element.closest&&element.closest('.e-list-item')){element=element.closest('.e-list-item').querySelector('.e-fullrow');}else{if(element.classList.contains('e-list-item')){element=element.querySelector('.e-fullrow');}else if(element.classList.contains('e-icons')&&element.classList.contains('interaction')&&element.parentElement.parentElement.classList.contains('e-list-item')){element=element.parentElement.parentElement.querySelector('.e-fullrow');}}}if(element.nextElementSibling){element.style.height=element.nextElementSibling.offsetHeight+'px';}}}};/**
     * @private
     */BookmarkView.prototype.setBookmarkContentHeight=function(){if(this.treeObj){// eslint-disable-next-line
var element=this.treeObj.element;if(this.treeObj.fullRowSelect){if(element.classList.contains('e-treeview')){element=element.querySelector('.e-node-focus').querySelector('.e-fullrow');}if(element.nextElementSibling){element.style.height=element.nextElementSibling.offsetHeight+'px';}}}};BookmarkView.prototype.bindBookmarkListViewEvent=function(){var bookmarkLists=document.getElementsByClassName("e-pv-bookmark-view");if(bookmarkLists&&bookmarkLists[0]&&bookmarkLists[0].children.length>0&&bookmarkLists[0].children[1]){bookmarkLists[0].children[1].addEventListener('mousedown',this.bookmarkListClickEvent.bind(this));}};BookmarkView.prototype.bookmarkListClickEvent=function(args){var _this=this;if(args.target&&!args.target.classList.contains('e-icons')){if(args.target.parentElement.parentElement){var id_1=args.target.parentElement.parentElement.id.split('_')[1];if(this.pdfViewer&&this.pdfViewer._dotnetInstance){this.pdfViewer._dotnetInstance.invokeMethodAsync('BookmarkViewClosed',null);}this.closeBookmarkContainer();setTimeout(function(){_this.navigateToBookmark(id_1,args.target.innerHTML,_this.pdfViewer.fileName);},300);}}};BookmarkView.prototype.closeBookmarkContainer=function(){var bookmarkContainer=this.pdfViewerBase.getElement('_bookmarks_container');if(bookmarkContainer){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewerBase.mobileScrollerContainer.style.display='';}}};BookmarkView.prototype.navigateToBookmark=function(bookid,text,fileName){if(this.bookmarksDestination.bookMarkDestination[bookid]){var pageIndex=this.bookmarksDestination.bookMarkDestination[bookid].PageIndex;var Y=this.bookmarksDestination.bookMarkDestination[bookid].Y;if(pageIndex!==-1){this.goToBookmark(pageIndex,Y);}this.pdfViewer.fireBookmarkClick(pageIndex!==-1?pageIndex+1:pageIndex,Y,text,fileName);}};/**
     * Get Bookmarks of the PDF document being loaded in the ejPdfViewer control
     *
     * @returns any
     */ // eslint-disable-next-line
BookmarkView.prototype.getBookmarks=function(){if(this.bookmarks&&this.bookmarksDestination){// eslint-disable-next-line max-len
return{bookmarks:this.bookmarks,bookmarksDestination:this.bookmarksDestination};}};/**
     * Navigate To current Bookmark location of the PDF document being loaded in the ejPdfViewer control.
     *
     * @param  {number} pageIndex - Specifies the pageIndex for Navigate
     * @param  {number} y - Specifies the Y coordinates value of the Page
     * @returns void
     */BookmarkView.prototype.goToBookmark=function(pageIndex,y){var proxy=this;var destPage=this.pdfViewerBase.pageSize[pageIndex].height;var scrollValue;if(y===0){scrollValue=this.pdfViewerBase.pageSize[pageIndex].top*this.pdfViewerBase.getZoomFactor();}else{// eslint-disable-next-line max-len
scrollValue=this.pdfViewerBase.pageSize[pageIndex].top*this.pdfViewerBase.getZoomFactor()+(destPage-y)*this.pdfViewerBase.getZoomFactor();}var scroll=scrollValue.toString();// eslint-disable-next-line radix
proxy.pdfViewerBase.viewerContainer.scrollTop=parseInt(scroll);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewerBase.mobileScrollerContainer.style.display='';this.pdfViewerBase.updateMobileScrollerPosition();}proxy.pdfViewerBase.focusViewerContainer();return false;};/**
     * @private
     */BookmarkView.prototype.clear=function(){if(this.pdfViewerBase.navigationPane){this.pdfViewerBase.navigationPane.disableBookmarkButton();this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();}if(this.bookmarks){this.bookmarks.bookMark=[];this.bookmarks=null;}if(this.bookmarksDestination){this.bookmarksDestination.bookMarkDestination=[];}if(this.bookmarkView!=null&&!sf.base.isBlazor()){if(this.bookmarkView.parentElement!==null){this.bookmarkView.parentElement.removeChild(this.bookmarkView);}while(this.bookmarkView.hasChildNodes()){this.bookmarkView.removeChild(this.bookmarkView.lastChild);}}if(this.bookmarkRequestHandler){this.bookmarkRequestHandler.clear();}};/**
     * @private
     */BookmarkView.prototype.destroy=function(){this.clear();};/**
     * @private
     */BookmarkView.prototype.getModuleName=function(){return'BookmarkView';};return BookmarkView;}();/**
 * export types
 */ /* eslint-disable */ /**
 * The `TextSelection` module is used to handle the text selection of PDF viewer.
 */var TextSelection=/** @class */function(){/**
     * @param pdfViewer
     * @param pdfViewerBase
     * @param pdfViewer
     * @param pdfViewerBase
     * @private
     */function TextSelection(pdfViewer,pdfViewerBase){var _this=this;/**
         * @private
         */this.isTextSelection=false;/**
         * @private
         */this.selectionStartPage=null;this.isBackwardPropagatedSelection=false;this.contextMenuHeight=144;this.backwardStart=0;/**
         * @private
         */this.selectionRangeArray=[];this.selectionAnchorTouch=null;this.selectionFocusTouch=null;// eslint-disable-next-line
this.scrollMoveTimer=0;this.isMouseLeaveSelection=false;this.isTouchSelection=false;this.previousScrollDifference=0;this.topStoreLeft=null;this.topStoreRight=null;this.isTextSearched=false;this.isSelectionStartTriggered=false;this.allTextContent="";this.onLeftTouchSelectElementTouchStart=function(event){_this.initiateSelectionByTouch();};this.onRightTouchSelectElementTouchStart=function(event){_this.initiateSelectionByTouch();};this.onLeftTouchSelectElementTouchEnd=function(event){_this.terminateSelectionByTouch(event);};this.onRightTouchSelectElementTouchEnd=function(event){_this.terminateSelectionByTouch(event);};this.onLeftTouchSelectElementTouchMove=function(event){var range;var nodeElement;event.preventDefault();event.target.style.zIndex='0';var rightElement=_this.dropDivElementRight;var isTouchedWithinViewerContainer=_this.isTouchedWithinContainer(event);if(rightElement&&isTouchedWithinViewerContainer){var dropBounds=rightElement.getBoundingClientRect();var xTouch=event.changedTouches[0].clientX;var yTouch=event.changedTouches[0].clientY;event.target.style.zIndex='1000';nodeElement=_this.getNodeElement(range,xTouch,yTouch,event,nodeElement);if(nodeElement){// eslint-disable-next-line max-len
var currentDifference=Math.sqrt((yTouch-dropBounds.top)*(yTouch-dropBounds.top)+(xTouch-dropBounds.left)*(xTouch-dropBounds.left));var isCloserMovement=_this.isCloserTouchScroll(currentDifference);var isTextSelected=false;if(yTouch<=dropBounds.top){_this.dropElementLeft.style.transform='rotate(0deg)';_this.dropElementRight.style.transform='rotate(-90deg)';isTextSelected=_this.selectTextByTouch(nodeElement.parentElement,xTouch,yTouch,false,'left',isCloserMovement);}else{_this.dropElementLeft.style.transform='rotate(-90deg)';_this.dropElementRight.style.transform='rotate(0deg)';isTextSelected=_this.selectTextByTouch(nodeElement.parentElement,xTouch,yTouch,true,'left',isCloserMovement);}if(isTextSelected){var elementClientRect=_this.dropDivElementLeft.getBoundingClientRect();var pageTopValue=_this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber-1].top;var topClientValue=_this.getClientValueTop(yTouch,_this.pdfViewerBase.currentPageNumber-1);// eslint-disable-next-line max-len
var currentPageLeft=_this.pdfViewerBase.getElement('_pageDiv_'+(_this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;var currentRangeLeft=xTouch-currentPageLeft;// eslint-disable-next-line max-len
_this.dropDivElementLeft.style.top=pageTopValue*_this.pdfViewerBase.getZoomFactor()+topClientValue+'px';_this.topStoreLeft={pageTop:pageTopValue,topClientValue:_this.getMagnifiedValue(topClientValue),pageNumber:_this.pdfViewerBase.currentPageNumber-1,left:_this.getMagnifiedValue(currentRangeLeft),isHeightNeeded:false};// eslint-disable-next-line max-len
_this.dropDivElementLeft.style.left=xTouch-_this.pdfViewerBase.viewerContainer.getBoundingClientRect().left-elementClientRect.width/2+'px';_this.previousScrollDifference=currentDifference;}}}};// eslint-disable-next-line
this.onRightTouchSelectElementTouchMove=function(event){var range;var nodeElement;event.preventDefault();event.target.style.zIndex='0';var leftElement=_this.dropDivElementLeft;var isTouchedWithinViewerContainer=_this.isTouchedWithinContainer(event);if(leftElement&&isTouchedWithinViewerContainer){var dropPosition=leftElement.getBoundingClientRect();var touchX=event.changedTouches[0].clientX;var touchY=event.changedTouches[0].clientY;event.target.style.zIndex='1000';nodeElement=_this.getNodeElement(range,touchX,touchY,event,nodeElement);if(nodeElement){// eslint-disable-next-line max-len
var currentDifference=Math.sqrt((touchY-dropPosition.top)*(touchY-dropPosition.top)+(touchX-dropPosition.left)*(touchX-dropPosition.left));var isCloserMovement=_this.isCloserTouchScroll(currentDifference);var isTextSelected=false;if(touchY>=dropPosition.top){_this.dropElementRight.style.transform='rotate(-90deg)';_this.dropElementLeft.style.transform='rotate(0deg)';isTextSelected=_this.selectTextByTouch(nodeElement.parentElement,touchX,touchY,true,'right',isCloserMovement);}else{_this.dropElementRight.style.transform='rotate(0deg)';_this.dropElementLeft.style.transform='rotate(-90deg)';isTextSelected=_this.selectTextByTouch(nodeElement.parentElement,touchX,touchY,false,'right',isCloserMovement);}if(isTextSelected){var pageTopValue=_this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber-1].top;var topClientValue=_this.getClientValueTop(touchY,_this.pdfViewerBase.currentPageNumber-1);var elementClientRect=_this.dropDivElementRight.getBoundingClientRect();_this.dropDivElementRight.style.top=pageTopValue*_this.pdfViewerBase.getZoomFactor()+topClientValue+'px';// eslint-disable-next-line max-len
var currentPageLeft=_this.pdfViewerBase.getElement('_pageDiv_'+(_this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;var currentRangeLeft=touchX-currentPageLeft;// eslint-disable-next-line max-len
_this.topStoreRight={pageTop:pageTopValue,topClientValue:_this.getMagnifiedValue(topClientValue),pageNumber:_this.pdfViewerBase.currentPageNumber-1,left:_this.getMagnifiedValue(currentRangeLeft),isHeightNeeded:false};// eslint-disable-next-line max-len
_this.dropDivElementRight.style.left=touchX-_this.pdfViewerBase.viewerContainer.getBoundingClientRect().left-elementClientRect.width/2+'px';_this.previousScrollDifference=currentDifference;}}}};this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @param target
     * @param x
     * @param y
     * @param isExtended
     * @private
     */TextSelection.prototype.textSelectionOnMouseMove=function(target,x,y,isExtended){var targetElement=target;this.isTextSearched=true;if(targetElement.nodeType===targetElement.TEXT_NODE){if(!this.isSelectionStartTriggered&&!this.pdfViewerBase.getTextMarkupAnnotationMode()){this.pdfViewer.fireTextSelectionStart(this.pdfViewerBase.currentPageNumber);this.isSelectionStartTriggered=true;}this.isBackwardPropagatedSelection=false;var range=targetElement.ownerDocument.createRange();var selection=window.getSelection();if(selection.anchorNode!==null){var position=selection.anchorNode.compareDocumentPosition(selection.focusNode);if(!position&&selection.anchorOffset>selection.focusOffset||position===Node.DOCUMENT_POSITION_PRECEDING){this.isBackwardPropagatedSelection=true;}}range.selectNodeContents(targetElement);var currentPosition=0;var endPosition=range.endOffset;while(currentPosition<endPosition){range.setStart(targetElement,currentPosition);range.setEnd(targetElement,currentPosition+1);var rangeBounds=range.getBoundingClientRect();var rightBounds=rangeBounds.right;if(isExtended){// eslint-disable-next-line
rightBounds=parseInt(rangeBounds.right.toString());}// eslint-disable-next-line max-len
// eslint-disable-next-line
if(rangeBounds.left<=x&&rightBounds>=x&&parseInt(rangeBounds.top.toString())<=y&&rangeBounds.bottom>=y){if(selection.anchorNode!==null&&selection.anchorNode.parentNode.classList.contains('e-pv-text')){if(selection.anchorOffset>currentPosition){if(this.backwardStart!=0){range.setStart(selection.anchorNode,this.backwardStart);}else{range.setStart(selection.anchorNode,selection.anchorOffset+1);}}else{range.setStart(selection.anchorNode,selection.anchorOffset);}}selection.removeAllRanges();selection.addRange(range);if(!this.isTextSelection){this.selectionStartPage=this.pdfViewerBase.currentPageNumber-1;}this.isTextSelection=true;// eslint-disable-next-line
var isIE=!!document.documentMode;if(!isIE){if(this.isBackwardPropagatedSelection||range.endOffset>currentPosition){if(this.backwardStart!=range.startOffset&&range.startOffset>=currentPosition){this.backwardStart=range.endOffset;}if(currentPosition===0&&range.endOffset!=1){selection.extend(targetElement,currentPosition);}else{selection.extend(targetElement,currentPosition+1);}}else if(isExtended){selection.extend(targetElement,currentPosition);}else{selection.extend(targetElement,currentPosition+1);}}range.detach();}currentPosition+=1;}// eslint-disable-next-line
var annotationModule=this.pdfViewer.annotationModule;// eslint-disable-next-line max-len
if(annotationModule&&annotationModule.textMarkupAnnotationModule&&annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)){// eslint-disable-next-line
var leftDivElement=document.getElementById(this.pdfViewer.dataId+'_droplet_left');if(this.pdfViewerBase.isSelection&&selection&&selection.rangeCount>0){// eslint-disable-next-line
var currentrange=selection.getRangeAt(0);// eslint-disable-next-line
var rect=currentrange.getBoundingClientRect();var left=rect.left;var top_1=rect.top;this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(left,top_1);this.pdfViewerBase.isSelection=false;}else if(leftDivElement&&leftDivElement.style.display==='none'){this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(x,y);}this.pdfViewer.annotation.textMarkupAnnotationModule.updatePosition(x,y);}}else{for(var i=0;i<targetElement.childNodes.length;i++){if(targetElement.childNodes[i].nodeType===targetElement.TEXT_NODE){var range=this.getSelectionRange(i,targetElement);var rangeBounds=range.getBoundingClientRect();// eslint-disable-next-line max-len
// eslint-disable-next-line
if(rangeBounds.left<=x&&rangeBounds.right>=parseInt(x.toString())&&parseInt(rangeBounds.top.toString())<=y&&rangeBounds.bottom>=y){range.detach();this.textSelectionOnMouseMove(targetElement.childNodes[i],x,y,isExtended);}else{range.detach();}}}}};/**
     * @param target
     * @param x
     * @param y
     * @param isforward
     * @param target
     * @param x
     * @param y
     * @param isforward
     * @param target
     * @param x
     * @param y
     * @param isforward
     * @private
     */TextSelection.prototype.textSelectionOnDrag=function(target,x,y,isforward){var targetElement=target;this.isTextSearched=true;if(targetElement.nodeType===targetElement.TEXT_NODE){this.isBackwardPropagatedSelection=false;var range=targetElement.ownerDocument.createRange();var selection=window.getSelection();if(selection.anchorNode!==null){var position=selection.anchorNode.compareDocumentPosition(selection.focusNode);if(!position&&selection.anchorOffset>selection.focusOffset||position===Node.DOCUMENT_POSITION_PRECEDING){this.isBackwardPropagatedSelection=true;}}range.selectNodeContents(targetElement);var currentPosition=0;var endPosition=range.endOffset;while(currentPosition<endPosition){range.setStart(targetElement,currentPosition);range.setEnd(targetElement,currentPosition+1);var rangeBounds=range.getBoundingClientRect();// eslint-disable-next-line max-len
// eslint-disable-next-line
if(rangeBounds.left<=x&&rangeBounds.right>=x&&parseInt(rangeBounds.top.toString())<=y&&rangeBounds.bottom>=y){if(isforward){// eslint-disable-next-line max-len
if(selection.anchorNode!==null&&selection.anchorNode.parentNode.classList.contains('e-pv-text')){range.setStart(selection.anchorNode,selection.anchorOffset);}selection.removeAllRanges();selection.addRange(range);selection.extend(targetElement,currentPosition);}else if(selection.focusNode){range.setEnd(selection.focusNode,selection.focusOffset);selection.removeAllRanges();selection.addRange(range);}if(!this.isTextSelection){this.selectionStartPage=this.pdfViewerBase.currentPageNumber-1;}this.isTextSelection=true;range.detach();return true;}currentPosition+=1;}if(this.pdfViewerBase.isSelection){// eslint-disable-next-line
var currentrange=selection.getRangeAt(0);// eslint-disable-next-line
var rect=currentrange.getBoundingClientRect();var left=rect.left;var top_2=rect.top;this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(left,top_2);this.pdfViewerBase.isSelection=false;}this.pdfViewer.annotation.textMarkupAnnotationModule.updatePosition(x,y);}else{for(var i=0;i<targetElement.childNodes.length;i++){if(targetElement.childNodes[i].nodeType===targetElement.TEXT_NODE){var range=this.getSelectionRange(i,targetElement);var rangeBounds=range.getBoundingClientRect();// eslint-disable-next-line max-len
// eslint-disable-next-line
if(rangeBounds.left<=x&&rangeBounds.right>=x&&parseInt(rangeBounds.top.toString())<=y&&rangeBounds.bottom>=y){range.detach();this.textSelectionOnDrag(targetElement.childNodes[i],x,y,isforward);}else{range.detach();}}}}return null;};/**
     * Select the target text region in the PDF document of the given bounds.
     *
     * @param  {number} pageNumbers - Specifies the page number
     * @param  {IRectangle[]} bounds -  Specifies the bounds of the texts.
     * @returns void
     */TextSelection.prototype.selectTextRegion=function(pageNumbers,bounds){// eslint-disable-next-line
var element=null;var pageNumber=pageNumbers-1;for(var k=0;k<bounds.length;k++){// eslint-disable-next-line
var bound=bounds[k];var x=(bound.left?bound.left:bound.Left)*this.pdfViewerBase.getZoomFactor();var y=(bound.top?bound.top:bound.Top)*this.pdfViewerBase.getZoomFactor();var width=(bound.width?bound.width:bound.Width)*this.pdfViewerBase.getZoomFactor();var height=bound.height?bound.height:bound.Height;// eslint-disable-next-line
var textLayer=this.pdfViewerBase.getElement('_textLayer_'+pageNumber);if(textLayer){// eslint-disable-next-line
var textDivs=textLayer.childNodes;for(var n=0;n<textDivs.length;n++){if(textDivs[n]){// eslint-disable-next-line
var rangebounds=textDivs[n].getBoundingClientRect();var top_3=this.getClientValueTop(rangebounds.top,pageNumber);// eslint-disable-next-line max-len
var currentLeft=rangebounds.left-this.pdfViewerBase.getElement('_pageDiv_'+pageNumber).getBoundingClientRect().left;var totalLeft=currentLeft+rangebounds.width;// eslint-disable-next-line
var textDiVLeft=parseInt(textDivs[n].style.left);// eslint-disable-next-line
var currentTop=parseInt(textDivs[n].style.top);var isLeftBounds=this.checkLeftBounds(currentLeft,textDiVLeft,totalLeft,x);var isTopBounds=this.checkTopBounds(top_3,currentTop,y);if(isLeftBounds&&isTopBounds){element=textDivs[n];break;}}}if(element!=null){// eslint-disable-next-line
var boundingRect=this.pdfViewerBase.getElement('_textLayer_'+pageNumber).getBoundingClientRect();this.textSelectionOnMouseMove(element,x+boundingRect.left,y+boundingRect.top,false);if(bounds.length-1===k){// eslint-disable-next-line max-len
this.textSelectionOnMouseMove(element,x+boundingRect.left+width,y+boundingRect.top,false);}}}}};/**
     * @param left
     * @param textDiVLeft
     * @param totalLeft
     * @param x
     * @private
     */TextSelection.prototype.checkLeftBounds=function(left,textDiVLeft,totalLeft,x){var isExists=false;// eslint-disable-next-line max-len
// eslint-disable-next-line
if(left===parseInt(x.toString())||parseInt(left.toString())===parseInt(x.toString())||left+1===parseInt(x.toString())||left-1===parseInt(x.toString())// eslint-disable-next-line
||textDiVLeft===parseInt(x.toString())||textDiVLeft===x||totalLeft>=x&&left<=x){isExists=true;}return isExists;};/**
     * @param top
     * @param currentTop
     * @param y
     * @param top
     * @param currentTop
     * @param y
     * @private
     */TextSelection.prototype.checkTopBounds=function(top,currentTop,y){var isExists=false;// eslint-disable-next-line max-len
// eslint-disable-next-line
if(top===parseInt(y.toString())||parseInt(top.toString())===parseInt(y.toString())||parseInt((top+1).toString())===parseInt(y.toString())||parseInt((top-1).toString())===parseInt(y.toString())// eslint-disable-next-line
||currentTop===parseInt(y.toString())||currentTop===y){isExists=true;}return isExists;};/**
     * @param event
     * @private
     */TextSelection.prototype.textSelectionOnMouseLeave=function(event){var _this=this;event.preventDefault();var viewerTop=this.pdfViewerBase.viewerContainer.offsetTop;if(this.pdfViewer.magnificationModule){if(this.pdfViewer.magnificationModule.fitType==='fitToPage'){return;}}if(event.clientY>viewerTop){this.scrollMoveTimer=setInterval(function(){_this.scrollForwardOnSelection();},500);}else{this.scrollMoveTimer=setInterval(function(){_this.scrollBackwardOnSelection();},500);}};TextSelection.prototype.scrollForwardOnSelection=function(){this.isMouseLeaveSelection=true;this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop+200;this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1);};TextSelection.prototype.scrollBackwardOnSelection=function(){this.isMouseLeaveSelection=true;this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop-200;this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1);};/**
     * @private
     */TextSelection.prototype.clear=function(){if(this.scrollMoveTimer){this.isMouseLeaveSelection=false;clearInterval(this.scrollMoveTimer);}};/**
     * @param element
     * @param x
     * @param y
     * @param isStoreSelection
     * @param element
     * @param x
     * @param y
     * @param isStoreSelection
     * @param element
     * @param x
     * @param y
     * @param isStoreSelection
     * @private
     */ // eslint-disable-next-line
TextSelection.prototype.selectAWord=function(element,x,y,isStoreSelection){if(element.nodeType===element.TEXT_NODE){var selection=window.getSelection();var range=element.ownerDocument.createRange();range.selectNodeContents(element);var currentPosition=0;var endPosition=range.endOffset;while(currentPosition<endPosition){range.setStart(element,currentPosition);range.setEnd(element,currentPosition+1);var rangeBounds=range.getBoundingClientRect();if(rangeBounds.left<=x&&rangeBounds.right>=x&&rangeBounds.top<=y&&rangeBounds.bottom>=y){var textContent=element.textContent;var indices=[];var startPosition=void 0;var endPos=void 0;for(var i=0;i<textContent.length;i++){if(textContent[i]===' '){indices.push(i);}}for(var j=0;j<indices.length;j++){if(currentPosition===indices[j]){startPosition=indices[j];endPos=indices[j];}if(indices[0]>currentPosition){startPosition=0;endPos=indices[j];break;}if(currentPosition>indices[j]&&currentPosition<indices[j+1]){startPosition=indices[j];endPos=indices[j+1];}else if(currentPosition>indices[j]){if(!indices[j+1]){startPosition=indices[j];}}}if(!endPos){endPos=textContent.length;}if(startPosition===0){range.setStart(element,startPosition);}else{range.setStart(element,startPosition+1);}range.setEnd(element,endPos);selection.removeAllRanges();selection.addRange(range);this.isTextSelection=true;// eslint-disable-next-line max-len
var startParent=sf.base.isNullOrUndefined(range.startContainer.parentElement)?range.startContainer.parentNode:range.startContainer.parentElement;// eslint-disable-next-line radix
this.selectionStartPage=parseInt(startParent.id.split('_text_')[1]);if(isStoreSelection){// eslint-disable-next-line max-len
this.selectionAnchorTouch={anchorNode:selection.anchorNode.parentElement.id,anchorOffset:selection.anchorOffset};this.selectionFocusTouch={focusNode:selection.focusNode.parentElement.id,focusOffset:selection.focusOffset};}if(!sf.base.Browser.isIE){range.detach();}break;}currentPosition+=1;}}else{for(var i=0;i<element.childNodes.length;i++){var range=this.getSelectionRange(i,element);var rangeBounds=range.getBoundingClientRect();if(rangeBounds.left<=x&&rangeBounds.right>=x&&rangeBounds.top<=y&&rangeBounds.bottom>=y){range.detach();this.selectAWord(element.childNodes[i],x,y,isStoreSelection);}else{range.detach();}}}};TextSelection.prototype.getSelectionRange=function(index,element){var range=element.childNodes[index].ownerDocument.createRange();range.selectNodeContents(element.childNodes[index]);return range;};/**
     * @param event
     * @private
     */TextSelection.prototype.selectEntireLine=function(event){var textIds=[];var targetElement=event.target;var targetRect=targetElement.getBoundingClientRect();// eslint-disable-next-line
var targetcentre=parseInt((targetRect.top+targetRect.height/2).toString());// eslint-disable-next-line radix
var pageNumber=parseInt(event.target.id.split('_text_')[1]);var textDivs=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_text_'+pageNumber+'"]');if(targetElement.classList.contains('e-pv-text')){this.pdfViewer.fireTextSelectionStart(pageNumber+1);for(var i=0;i<textDivs.length;i++){var rect=textDivs[i].getBoundingClientRect();// eslint-disable-next-line radix
var topValue=parseInt(rect.top.toString());// eslint-disable-next-line radix
var bottomValue=parseInt(rect.bottom.toString());if(topValue<=targetcentre&&bottomValue>targetcentre&&targetRect.bottom+10>bottomValue){var textId=textDivs[i].id;if(textId!==''){textIds.push(textId);}}}var selection=window.getSelection();selection.removeAllRanges();var range=document.createRange();var lengths=textIds.length-1;var d1=document.getElementById(textIds[0]);var d2=document.getElementById(textIds[lengths]);var childNodes=d2.childNodes.length;if(childNodes>0){range.setStart(d1.childNodes[0],0);range.setEnd(d2.childNodes[0],d2.textContent.length);}else{range.setStart(d1.childNodes[0],0);range.setEnd(d2,1);}// eslint-disable-next-line radix
this.selectionStartPage=parseInt(range.startContainer.parentElement.id.split('_text_')[1]);selection.addRange(range);this.isTextSelection=true;if(selection!=null&&this.pdfViewer.contextMenuSettings.contextMenuAction==='MouseUp'){this.calculateContextMenuPosition(event.clientY,event.clientY);}}};/**
     * @private
     */TextSelection.prototype.enableTextSelectionMode=function(){this.pdfViewerBase.isTextSelectionDisabled=false;this.pdfViewerBase.viewerContainer.classList.remove('e-disable-text-selection');this.pdfViewerBase.viewerContainer.classList.add('e-enable-text-selection');this.pdfViewerBase.viewerContainer.addEventListener('selectstart',function(){return true;});};TextSelection.prototype.clearTextSelection=function(){if(this.isTextSelection){this.pdfViewerBase.textLayer.clearDivSelection();if(window.getSelection){if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges();}}if(this.pdfViewer.linkAnnotationModule){var lowerPageIndex=this.pdfViewerBase.currentPageNumber-3;lowerPageIndex=lowerPageIndex<0?0:lowerPageIndex;var higherPageIndex=this.pdfViewer.currentPageNumber+1;// eslint-disable-next-line max-len
higherPageIndex=higherPageIndex<this.pdfViewerBase.pageCount-1?higherPageIndex:this.pdfViewerBase.pageCount-1;for(var i=lowerPageIndex;i<=higherPageIndex;i++){this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i,false);}}if(this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule){this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(true);}this.selectionRangeArray=[];this.isTextSelection=false;this.isTouchSelection=false;if(this.pdfViewer.textSearchModule){this.pdfViewer.textSearchModule.searchAfterSelection();}this.pdfViewerBase.contextMenuModule.close();this.removeTouchElements();}};/**
     * @private
     */TextSelection.prototype.removeTouchElements=function(){if(this.dropDivElementLeft){this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft);this.dropDivElementLeft=null;this.dropElementLeft.style.transform='rotate(0deg)';}if(this.dropDivElementRight){this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight);this.dropDivElementRight=null;this.dropElementRight.style.transform='rotate(-90deg)';}};/**
     * @private
     */TextSelection.prototype.resizeTouchElements=function(){var viewerContainerLeft=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;if(this.dropDivElementLeft){var elementClientRect=this.dropDivElementLeft.getBoundingClientRect();var dropElementHeight=0;// eslint-disable-next-line max-len
var leftCurrentPagePosition=this.pdfViewerBase.getElement('_pageDiv_'+this.topStoreLeft.pageNumber).getBoundingClientRect();this.dropDivElementLeft.style.left=parseFloat(this.topStoreLeft.left.toString())*this.pdfViewerBase.getZoomFactor()+leftCurrentPagePosition.left-viewerContainerLeft-elementClientRect.width/2+'px';if(this.topStoreLeft.isHeightNeeded){dropElementHeight=elementClientRect.height/2*this.pdfViewerBase.getZoomFactor();}// eslint-disable-next-line max-len
this.dropDivElementLeft.style.top=parseFloat(this.topStoreLeft.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreLeft.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+dropElementHeight+'px';}if(this.dropDivElementRight){var elementClientRect=this.dropDivElementRight.getBoundingClientRect();var dropElementHeight=0;// eslint-disable-next-line max-len
var rightCurrentPagePosition=this.pdfViewerBase.getElement('_pageDiv_'+this.topStoreRight.pageNumber).getBoundingClientRect();this.dropDivElementRight.style.left=parseFloat(this.topStoreRight.left.toString())*this.pdfViewerBase.getZoomFactor()+rightCurrentPagePosition.left-viewerContainerLeft-elementClientRect.width/2+'px';if(this.topStoreRight.isHeightNeeded){dropElementHeight=elementClientRect.height/2*this.pdfViewerBase.getZoomFactor();}// eslint-disable-next-line max-len
this.dropDivElementRight.style.top=parseFloat(this.topStoreRight.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreRight.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+dropElementHeight+'px';}};/**
     * @param event
     * @private
     */TextSelection.prototype.textSelectionOnMouseup=function(event){this.clear();if(window.getSelection().anchorNode!==null){this.isMouseLeaveSelection=false;this.isSelectionStartTriggered=false;this.maintainSelectionOnZoom(true,false);this.fireTextSelectEnd();var isTextSearch=this.pdfViewerBase.textLayer.getTextSearchStatus();if(isTextSearch){this.pdfViewerBase.textLayer.clearDivSelection();// eslint-disable-next-line
var indexes=this.pdfViewer.textSearchModule.getIndexes();var lowerPageValue=parseFloat(indexes.lowerPageValue.toString());var higherPageValue=parseFloat(indexes.higherPageValue.toString());for(var i=lowerPageValue;i<higherPageValue;i++){this.applySelectionRangeOnScroll(i);}this.pdfViewer.textSearchModule.searchAfterSelection();}else{this.applySpanForSelection();}if(this.pdfViewer.linkAnnotationModule){this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber-1,false);}if(this.isTextSearched&&this.pdfViewer.contextMenuSettings.contextMenuAction==='MouseUp'){this.calculateContextMenuPosition(event.clientY,event.clientX);this.isTextSearched=false;}}else{this.pdfViewerBase.textLayer.clearDivSelection();if(this.pdfViewer.textSearchModule){this.pdfViewer.textSearchModule.searchAfterSelection();}this.pdfViewerBase.contextMenuModule.close();this.removeTouchElements();}};/**
     * @private
     */TextSelection.prototype.fireTextSelectEnd=function(){if(this.selectionRangeArray.length!==0){var selectEndPageIndex=0;var selectedText='';// eslint-disable-next-line
var selectedBounds=[];for(var k=0;k<this.selectionRangeArray.length;k++){selectedText+=this.selectionRangeArray[k].textContent;for(var j=0;j<this.selectionRangeArray[k].rectangleBounds.length;j++){var currentBound=this.selectionRangeArray[k].rectangleBounds[j];// eslint-disable-next-line max-len
selectedBounds.push({left:currentBound.left,right:currentBound.right,top:currentBound.top,bottom:currentBound.bottom,width:currentBound.width,height:currentBound.height,pageIndex:this.selectionRangeArray[k].pageNumber+1});}if(this.selectionRangeArray[k].isBackward&&k===0){selectEndPageIndex=this.selectionRangeArray[k].pageNumber+1;}else if(!this.selectionRangeArray[k].isBackward&&k===this.selectionRangeArray.length-1){selectEndPageIndex=this.selectionRangeArray[k].pageNumber+1;}}this.pdfViewer.fireTextSelectionEnd(selectEndPageIndex,selectedText,selectedBounds);}};/**
     * @param isMaintainSelection
     * @param isStich
     * @param isMaintainSelection
     * @param isStich
     * @private
     */TextSelection.prototype.maintainSelectionOnZoom=function(isMaintainSelection,isStich){var selection=window.getSelection();if(selection.type==='Range'||!selection.type&&!selection.isCollapsed){var isBackward=this.pdfViewerBase.textLayer.isBackWardSelection(selection);if(selection.anchorNode!==null){// eslint-disable-next-line radix
var anchorPageId=parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);// eslint-disable-next-line radix
var focusPageId=parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);if(this.isTouchSelection&&isNaN(focusPageId)){var focusElement=selection.focusNode;if(focusElement===this.pdfViewerBase.pageContainer){var lastChildNode=this.pdfViewerBase.pageContainer.lastChild;if(lastChildNode.classList.contains('e-pv-touch-select-drop')){// eslint-disable-next-line radix
focusPageId=parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);}else if(lastChildNode.classList.contains('e-pv-page-div')){// eslint-disable-next-line radix
focusPageId=parseInt(lastChildNode.id.split('_pageDiv_')[1]);}}}if(!isBackward){for(var i=anchorPageId;i<=focusPageId;i++){this.maintainSelectionOnScroll(i,isStich);}}else{for(var i=anchorPageId;i>=focusPageId;i--){this.maintainSelectionOnScroll(i,isStich);}}}if(!isMaintainSelection){selection.removeAllRanges();}}};/**
     * @param pageNumber
     * @private
     */TextSelection.prototype.isSelectionAvailableOnScroll=function(pageNumber){var isSelectionAvailable=false;var ranges=this.selectionRangeArray;for(var i=0;i<ranges.length;i++){if(ranges[i]!==null){if(pageNumber===ranges[i].pageNumber){isSelectionAvailable=true;if(this.isTouchSelection&&!this.pdfViewerBase.getMagnified()){isSelectionAvailable=false;}break;}}}return isSelectionAvailable;};/**
     * @param pageNumber
     * @private
     */TextSelection.prototype.applySelectionRangeOnScroll=function(pageNumber){if(this.isMouseLeaveSelection){this.applySelectionMouseScroll(pageNumber);}else{this.applySelectionRange(pageNumber);}};// eslint-disable-next-line
TextSelection.prototype.getSelectionRangeFromArray=function(pageNumber){var isSelectionAvailable=false;var selectionRange=null;var ranges=this.selectionRangeArray;for(var i=0;i<ranges.length;i++){if(ranges[i]!==null){if(pageNumber===ranges[i].pageNumber){selectionRange=ranges[i];isSelectionAvailable=true;break;}}}return{isSelectionAvailable:isSelectionAvailable,selectionRange:selectionRange};};TextSelection.prototype.applySelectionRange=function(pageNumber){var selectionObject=this.getSelectionRangeFromArray(pageNumber);var isSelectionAvailable=selectionObject.isSelectionAvailable;var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageNumber);if(textLayer){if(isSelectionAvailable&&textLayer.childNodes.length!==0){var selectionRange=selectionObject.selectionRange;var anchorOffsetDiv=void 0;var focusOffsetDiv=void 0;var anchorOffset=void 0;var focusOffset=void 0;if(selectionRange.isBackward){// eslint-disable-next-line radix
var startId=parseInt(selectionRange.endNode.split('_text_')[1].split('_')[1]);// eslint-disable-next-line radix
var endId=parseInt(selectionRange.startNode.split('_text_')[1].split('_')[1]);if(startId<endId){anchorOffsetDiv=startId;anchorOffset=selectionRange.endOffset;focusOffset=selectionRange.startOffset;focusOffsetDiv=endId;}else{anchorOffsetDiv=endId;anchorOffset=selectionRange.endOffset;focusOffsetDiv=startId;focusOffset=selectionRange.startOffset;}}else{// eslint-disable-next-line radix
anchorOffsetDiv=parseInt(selectionRange.startNode.split('text_')[1].split('_')[1]);// eslint-disable-next-line radix
focusOffsetDiv=parseInt(selectionRange.endNode.split('text_')[1].split('_')[1]);anchorOffset=selectionRange.startOffset;focusOffset=selectionRange.endOffset;}window.getSelection().removeAllRanges();// eslint-disable-next-line max-len
this.pdfViewerBase.textLayer.applySpanForSelection(pageNumber,pageNumber,anchorOffsetDiv,focusOffsetDiv,anchorOffset,focusOffset);if(this.pdfViewer.textSearchModule){this.pdfViewer.textSearchModule.searchAfterSelection();}}}};TextSelection.prototype.applySelectionMouseScroll=function(pageNumber){var selectionObject=this.getSelectionRangeFromArray(pageNumber);var isSelectionAvailable=selectionObject.isSelectionAvailable;if(isSelectionAvailable){var selectionRange=selectionObject.selectionRange;var selection=window.getSelection();var anchorNode=document.getElementById(selectionRange.startNode).childNodes[0];var focusNode=document.getElementById(selectionRange.endNode).childNodes[0];var range=document.createRange();if(selection.anchorNode===null){if(!selectionRange.isBackward){range.setStart(anchorNode,selectionRange.startOffset);range.setEnd(focusNode,selectionRange.endOffset);}else{range.setStart(focusNode,selectionRange.endOffset);range.setEnd(anchorNode,selectionRange.startOffset);}}else{// eslint-disable-next-line
var anchorPageIndex=isNaN(parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]))?parseInt(selection.anchorNode.id.split('_pageDiv_')[1]):parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);if(isNaN(anchorPageIndex)){// eslint-disable-next-line radix
anchorPageIndex=parseInt(selection.anchorNode.id.split('_text_')[1]);}// eslint-disable-next-line
var focusPageIndex=isNaN(parseInt(selection.focusNode.parentElement.id.split('_text_')[1]))?parseInt(selection.focusNode.id.split('_pageDiv_')[1]):parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);// eslint-disable-next-line radix
var currentAnchorIndex=parseInt(selectionRange.startNode.split('_text_')[1]);if(anchorPageIndex===focusPageIndex&&anchorPageIndex===currentAnchorIndex){if(!selectionRange.isBackward){range.setStart(anchorNode,selectionRange.startOffset);range.setEnd(focusNode,selectionRange.endOffset);}else{range.setStart(focusNode,selectionRange.endOffset);range.setEnd(anchorNode,selectionRange.startOffset);}}else if(!isNaN(anchorPageIndex)){if(!isNaN(anchorPageIndex)&&!selectionRange.isBackward){// eslint-disable-next-line max-len
if(anchorPageIndex<currentAnchorIndex&&currentAnchorIndex<focusPageIndex&&anchorPageIndex!==focusPageIndex){range.setStart(selection.anchorNode,selection.anchorOffset);range.setEnd(selection.focusNode,selection.focusOffset);}else if(anchorPageIndex<currentAnchorIndex){range.setStart(selection.anchorNode,selection.anchorOffset);range.setEnd(focusNode,selectionRange.endOffset);}else{range.setStart(anchorNode,selectionRange.startOffset);range.setEnd(selection.focusNode,selection.focusOffset);}}else{var isBackward=this.pdfViewerBase.textLayer.isBackWardSelection(selection);// eslint-disable-next-line max-len
if(anchorPageIndex>currentAnchorIndex&&currentAnchorIndex>focusPageIndex&&anchorPageIndex!==focusPageIndex){if(!isBackward){range.setStart(selection.anchorNode,selection.anchorOffset);range.setEnd(selection.focusNode,selection.focusOffset);}else{selection.extend(selection.focusNode,selection.focusOffset);}// eslint-disable-next-line max-len
}else if(anchorPageIndex<currentAnchorIndex&&currentAnchorIndex<focusPageIndex&&anchorPageIndex!==focusPageIndex){if(!isBackward){range.setStart(selection.anchorNode,selection.anchorOffset);range.setEnd(selection.focusNode,selection.focusOffset);}else{selection.extend(selection.focusNode,selection.focusOffset);}}else if(anchorPageIndex<currentAnchorIndex){if(!isBackward){if(currentAnchorIndex!==this.selectionRangeArray[0].pageNumber){range.setStart(selection.anchorNode,selection.anchorOffset);range.setEnd(focusNode,selectionRange.endOffset);}else{range.setStart(selection.anchorNode,selection.anchorOffset);range.setEnd(anchorNode,selectionRange.startOffset);}}else{if(currentAnchorIndex!==this.selectionRangeArray[0].pageNumber){this.extendCurrentSelection(focusNode.parentElement,selectionRange.endOffset,selection,range);}else{this.extendCurrentSelection(anchorNode.parentElement,selectionRange.startOffset,selection,range);}}}else if(anchorPageIndex===currentAnchorIndex){if(currentAnchorIndex===focusPageIndex){range.setStart(anchorNode,selectionRange.startOffset);range.setEnd(anchorNode,selectionRange.startOffset);selection.removeAllRanges();selection.addRange(range);range=document.createRange();selection.extend(focusNode,selectionRange.endOffset);}else{if(isBackward){this.extendCurrentSelection(focusNode.parentElement,selectionRange.endOffset,selection,range);}else{range.setStart(focusNode,selectionRange.endOffset);range.setEnd(selection.focusNode,selection.focusOffset);}}}else if(focusPageIndex===currentAnchorIndex){if(isBackward){selection.extend(selection.focusNode,selection.focusOffset);}else{range.setStart(selection.anchorNode,selection.anchorOffset);range.setEnd(selection.focusNode,selection.focusOffset);}}else if(anchorPageIndex>currentAnchorIndex){// eslint-disable-next-line radix
var currentAnchorOffset=parseInt(selectionRange.startNode.split('_'+currentAnchorIndex+'_')[1]);// eslint-disable-next-line radix
var currentFocusOffset=parseInt(selectionRange.endNode.split('_'+currentAnchorIndex+'_')[1]);if(isBackward){if(currentAnchorIndex!==this.selectionRangeArray[0].pageNumber){if(currentAnchorOffset<currentFocusOffset){this.extendCurrentSelection(anchorNode.parentElement,selectionRange.startOffset,selection,range);}else{range.setStart(focusNode.parentElement,selectionRange.endOffset);range.setEnd(selection.anchorNode,selection.anchorOffset);}}else{this.extendCurrentSelection(focusNode.parentElement,selectionRange.endOffset,selection,range);}}else{if(currentAnchorOffset<currentFocusOffset){range.setStart(anchorNode,selectionRange.startOffset);range.setEnd(selection.focusNode,selection.focusOffset);}else{range.setStart(focusNode,selectionRange.endOffset);range.setEnd(selection.focusNode,selection.focusOffset);}}}}}else if(isNaN(anchorPageIndex)){if(!selectionRange.isBackward){range.setStart(anchorNode,selectionRange.startOffset);range.setEnd(focusNode,selectionRange.endOffset);}else{range.setStart(focusNode,selectionRange.endOffset);range.setEnd(anchorNode,selectionRange.startOffset);}}}if(range.toString()!==''){selection.removeAllRanges();selection.addRange(range);}}};/**
     * @param pageNumber
     * @param isStich
     * @param pageNumber
     * @param isStich
     * @private
     */TextSelection.prototype.maintainSelectionOnScroll=function(pageNumber,isStich){var isSelectionAvailable=this.isSelectionAvailableOnScroll(pageNumber);if(this.isTextSelection&&!isSelectionAvailable){this.maintainSelection(pageNumber,isStich);}};/**
     * @param pageNumber
     * @param isStich
     * @private
     */TextSelection.prototype.maintainSelection=function(pageNumber,isStich){var selection=window.getSelection();if(this.isTextSelection&&(selection.type==='Range'||!selection.type&&!selection.isCollapsed)){// eslint-disable-next-line
var anchorPageId=parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);// eslint-disable-next-line
var focusPageId=parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);if(isNaN(focusPageId)&&selection.anchorNode!==null){var backward_1=this.pdfViewerBase.textLayer.isBackWardSelection(selection);if(!backward_1){// eslint-disable-next-line radix
var lastChildNode=this.pdfViewerBase.pageContainer.lastChild;if(lastChildNode.classList.contains('e-pv-touch-select-drop')){// eslint-disable-next-line radix
focusPageId=parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);}else{// eslint-disable-next-line radix
focusPageId=parseInt(lastChildNode.id.split('_pageDiv_')[1]);}}else{// eslint-disable-next-line radix
focusPageId=parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split('_pageDiv_')[1]);}}var backward=this.pdfViewerBase.textLayer.isBackWardSelection(selection);if(this.isTouchSelection&&pageNumber>focusPageId&&pageNumber>anchorPageId){return;}if(anchorPageId===focusPageId){var selectionObject=null;var selectionBounds=this.getSelectionBounds(selection.getRangeAt(0),pageNumber);var selectionRectBounds=this.getSelectionRectangleBounds(selection.getRangeAt(0),pageNumber);// eslint-disable-next-line max-len
var anchorOffsetValue=this.getNodeElementFromNode(selection.anchorNode).childNodes.length===1?selection.anchorOffset:this.getCorrectOffset(selection.anchorNode,selection.anchorOffset);var focusOffsetValue=this.getNodeElementFromNode(selection.focusNode).childNodes.length===1?selection.focusOffset:this.getCorrectOffset(selection.focusNode,selection.focusOffset);selectionObject={isBackward:backward,startNode:this.getNodeElementFromNode(selection.anchorNode).id,startOffset:anchorOffsetValue,endNode:this.getNodeElementFromNode(selection.focusNode).id,// eslint-disable-next-line max-len
endOffset:focusOffsetValue,textContent:this.allTextContent,pageNumber:pageNumber,bound:selectionBounds,rectangleBounds:selectionRectBounds};this.pushSelectionRangeObject(selectionObject,pageNumber);}else{var selectionObject=this.createRangeObjectOnScroll(pageNumber,anchorPageId,focusPageId);if(selectionObject){this.pushSelectionRangeObject(selectionObject,pageNumber);if(isStich){this.stichSelection(backward,selection,pageNumber);}}}}};TextSelection.prototype.getCorrectOffset=function(node,offset){var offsetValue=0;var parentElement=this.getNodeElementFromNode(node);for(var i=0;i<parentElement.childNodes.length;i++){if(parentElement.childNodes[i]===node){offsetValue=offsetValue+offset;break;}else{offsetValue=offsetValue+parentElement.childNodes[i].textContent.length;}}return offsetValue;};TextSelection.prototype.pushSelectionRangeObject=function(selectionObject,pageNumber){if(this.isTouchSelection){var currentObject=this.selectionRangeArray.filter(// eslint-disable-next-line
function(obj){return obj.pageNumber===pageNumber;});if(currentObject.length>0){var currentObjectIndex=this.selectionRangeArray.indexOf(currentObject[0]);this.selectionRangeArray.splice(currentObjectIndex,1,selectionObject);return;}}var nextPageObject=this.selectionRangeArray.filter(// eslint-disable-next-line
function(obj){return obj.pageNumber===pageNumber+1;});if(nextPageObject.length===0){if(this.isTouchSelection&&this.selectionRangeArray.length!==0){var prevPageObject=this.selectionRangeArray.filter(// eslint-disable-next-line
function(obj){return obj.pageNumber===pageNumber-1;});if(prevPageObject.length!==0){var prevIndex=this.selectionRangeArray.indexOf(prevPageObject[0]);this.selectionRangeArray.splice(prevIndex+1,0,selectionObject);}else{var firstObject=this.selectionRangeArray[0];if(pageNumber<firstObject.pageNumber){this.selectionRangeArray.splice(0,0,selectionObject);}else{this.selectionRangeArray.push(selectionObject);}}}else{this.selectionRangeArray.push(selectionObject);}}else{var index=this.selectionRangeArray.indexOf(nextPageObject[0]);this.selectionRangeArray.splice(index,0,selectionObject);}};TextSelection.prototype.extendCurrentSelection=function(element,offset,selection,range){var currentFocusOffset=selection.focusOffset;var currentFocusElement=selection.focusNode.parentElement.id;// eslint-disable-next-line
var focusPageId=isNaN(parseInt(currentFocusElement.split('_text_')[1]))?parseInt(selection.focusNode.id.split('_pageDiv_')[1]):parseInt(currentFocusElement.split('_text_')[1]);// eslint-disable-next-line radix
if(isNaN(parseInt(currentFocusElement.split('_text_')[1]))){// eslint-disable-next-line
currentFocusElement=this.pdfViewerBase.getElement('_textLayer_'+(focusPageId+1)).firstChild.id;}range.setStart(element.childNodes[0],offset);range.setEnd(element.childNodes[0],offset);selection.removeAllRanges();selection.addRange(range);selection.extend(document.getElementById(currentFocusElement).childNodes[0],currentFocusOffset);};TextSelection.prototype.stichSelection=function(backward,selection,pageNumber){var range=document.createRange();var nextPageElement;if(backward){nextPageElement=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(pageNumber-1));if(nextPageElement){var lastElement=nextPageElement.lastChild;if(lastElement){this.extendCurrentSelection(lastElement,this.getTextLastLength(lastElement),selection,range);}else{nextPageElement=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(pageNumber-2));lastElement=nextPageElement.lastChild;this.extendCurrentSelection(lastElement,this.getTextLastLength(lastElement),selection,range);}}else{nextPageElement=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(pageNumber+1));var lastElement=nextPageElement.firstChild;this.extendCurrentSelection(lastElement,0,selection,range);}}else{nextPageElement=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(pageNumber+1));if(nextPageElement){var firstElement=nextPageElement.firstChild;if(!firstElement){nextPageElement=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(pageNumber+2));firstElement=nextPageElement.firstChild;range.setStart(firstElement.childNodes[0],0);}else{range.setStart(firstElement.childNodes[0],0);}range.setEnd(selection.focusNode,selection.focusOffset);selection.removeAllRanges();selection.addRange(range);}}};/**
     * @param currentPageNumber
     * @private
     */TextSelection.prototype.textSelectionOnMouseWheel=function(currentPageNumber){this.isMouseLeaveSelection=true;this.stichSelectionOnScroll(currentPageNumber);};/**
     * @param currentPageNumber
     * @private
     */TextSelection.prototype.stichSelectionOnScroll=function(currentPageNumber){var selection=window.getSelection();if(this.isTextSelection){// eslint-disable-next-line radix
var anchorPageId=parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);// eslint-disable-next-line radix
var focusPageId=parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);var nextPageElement=void 0;if(anchorPageId!==currentPageNumber&&focusPageId!==currentPageNumber){var backward=this.pdfViewerBase.textLayer.isBackWardSelection(selection);if(!backward){nextPageElement=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(currentPageNumber-1));if(nextPageElement){var lastElement=nextPageElement.lastChild;if(lastElement){if(lastElement.childNodes[0]){this.extendSelectionStich(lastElement.childNodes[0],this.getTextLastLength(lastElement),selection);}else{this.extendSelectionStich(lastElement,this.getTextLastLength(lastElement),selection);}}else{nextPageElement=this.pdfViewerBase.getElement('_textLayer_'+currentPageNumber);var lastElement_1=nextPageElement.firstChild;this.extendSelectionStich(lastElement_1.childNodes[0],0,selection);}}}else{nextPageElement=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(currentPageNumber-1));if(nextPageElement){var lastElement=nextPageElement.firstChild;if(lastElement){this.extendSelectionStich(lastElement.childNodes[0],0,selection);}}}}this.maintainSelectionArray();}};TextSelection.prototype.extendSelectionStich=function(node,offset,selection){if(selection.extend){selection.extend(node,offset);}};/**
     * @param pageNumber
     * @param anchorPageId
     * @param focusPageId
     * @param pageNumber
     * @param anchorPageId
     * @param focusPageId
     * @private
     */TextSelection.prototype.createRangeObjectOnScroll=function(pageNumber,anchorPageId,focusPageId){var selectionObject=null;var selection=window.getSelection();if(selection.anchorNode!==null){var backward=this.pdfViewerBase.textLayer.isBackWardSelection(selection);var firstElement=void 0;var lastElement=void 0;var startOffset=void 0;var endOffset=void 0;var element=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageNumber);if(element.childNodes){if(!backward){if(pageNumber===anchorPageId){firstElement=this.getNodeElementFromNode(selection.anchorNode);// eslint-disable-next-line max-len
lastElement=element.lastChild;startOffset=this.getCorrectOffset(selection.anchorNode,selection.anchorOffset);endOffset=this.getTextLastLength(lastElement);}else if(pageNumber>anchorPageId&&pageNumber<focusPageId){// eslint-disable-next-line max-len
firstElement=element.firstChild;// eslint-disable-next-line max-len
lastElement=element.lastChild;startOffset=0;endOffset=this.getTextLastLength(lastElement);}else if(pageNumber===focusPageId){// eslint-disable-next-line max-len
firstElement=element.firstChild;var pageNumberIndex=this.getNodeElementFromNode(selection.focusNode).id.indexOf(focusPageId.toString());if(pageNumberIndex!==-1){lastElement=this.getNodeElementFromNode(selection.focusNode);endOffset=this.getCorrectOffset(selection.focusNode,selection.focusOffset);}else{// eslint-disable-next-line max-len
lastElement=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+focusPageId).lastChild;endOffset=this.getTextLastLength(lastElement);}startOffset=0;}}else{if(pageNumber===anchorPageId){firstElement=this.getNodeElementFromNode(selection.anchorNode);// eslint-disable-next-line max-len
lastElement=element.firstChild;startOffset=this.getCorrectOffset(selection.anchorNode,selection.anchorOffset);endOffset=0;}else if(pageNumber<anchorPageId&&pageNumber>focusPageId){// eslint-disable-next-line max-len
firstElement=element.firstChild;// eslint-disable-next-line max-len
lastElement=element.lastChild;startOffset=0;endOffset=this.getTextLastLength(lastElement);}else if(pageNumber===focusPageId){firstElement=this.getNodeElementFromNode(selection.focusNode);// eslint-disable-next-line max-len
lastElement=element.lastChild;startOffset=this.getCorrectOffset(selection.focusNode,selection.focusOffset);endOffset=this.getTextLastLength(lastElement);}}if(firstElement&&lastElement){// eslint-disable-next-line max-len
var selectionRangeObject=this.getSelectionRangeObject(firstElement.id,startOffset,lastElement.id,endOffset,pageNumber);var selectionString=selectionRangeObject.toString();var selectionBound=this.getSelectionBounds(selectionRangeObject,pageNumber);var selectionRectBounds=this.getSelectionRectangleBounds(selectionRangeObject,pageNumber);// eslint-disable-next-line max-len
return selectionObject={isBackward:backward,startNode:firstElement.id,startOffset:startOffset,endNode:lastElement.id,endOffset:endOffset,textContent:this.allTextContent,pageNumber:pageNumber,bound:selectionBound,rectangleBounds:selectionRectBounds};}else{return null;}}}return null;};TextSelection.prototype.getSelectionRangeObject=function(startNode,startOffset,endNode,endOffset,pageNumber){var startElement=document.getElementById(startNode);var endElement=document.getElementById(endNode);if(startElement.childNodes[0]){startElement=startElement.childNodes[0];}if(endElement.childNodes[0]){endElement=endElement.childNodes[0];}// eslint-disable-next-line radix
var currentAnchorOffset=parseInt(startNode.split('_'+pageNumber+'_')[1]);// eslint-disable-next-line radix
var currentFocusOffset=parseInt(endNode.split('_'+pageNumber+'_')[1]);var range=document.createRange();if(currentAnchorOffset<=currentFocusOffset){range.setStart(startElement,startOffset);range.setEnd(endElement,endOffset);}else{range.setStart(endElement,endOffset);range.setEnd(startElement,startOffset);}return range;};TextSelection.prototype.getSelectionBounds=function(range,pageNumber){var startElement=this.getNodeElementFromNode(range.startContainer);var endElement=this.getNodeElementFromNode(range.endContainer);var bounds=null;if(startElement!==endElement){var newStartRange=document.createRange();// eslint-disable-next-line max-len
var startRange=this.createRangeForSelection(range.startContainer,range.endContainer,range.startOffset,range.endOffset,newStartRange);bounds=this.normalizeBounds(startRange.getBoundingClientRect(),pageNumber);}else{bounds=this.normalizeBounds(range.getBoundingClientRect(),pageNumber);}return bounds;};TextSelection.prototype.getSelectionRectangleBounds=function(range,pageNumber){var selectionBounds=[];var startElement=this.getNodeElementFromNode(range.startContainer);var endElement=this.getNodeElementFromNode(range.endContainer);var bounds=null;var selectionTexts=[];this.allTextContent="";if(startElement!==endElement){var startOffset=0;var endOffset=0;var currentId=0;var anchorPageId=this.pdfViewerBase.textLayer.getPageIndex(range.startContainer);var anchorTextId=this.pdfViewerBase.textLayer.getTextIndex(range.startContainer,anchorPageId);var focusPageId=this.pdfViewerBase.textLayer.getPageIndex(range.endContainer);var focusTextId=this.pdfViewerBase.textLayer.getTextIndex(range.endContainer,focusPageId);var textDivs=this.pdfViewerBase.getElement('_textLayer_'+focusPageId).childNodes;if(pageNumber===anchorPageId){currentId=anchorTextId;}else{currentId=0;}for(var j=currentId;j<textDivs.length;j++){var textElement=textDivs[j];if(j===anchorTextId){startOffset=range.startOffset;}else{startOffset=0;}if(j===focusTextId){endOffset=range.endOffset;}else{endOffset=textElement.textContent.length;}if(startOffset!==0||endOffset!==0){var newRange=document.createRange();for(var k=0;k<textElement.childNodes.length;k++){var node=textElement.childNodes[k];newRange.setStart(node,startOffset);newRange.setEnd(node,endOffset);}var boundingRect=this.normalizeBounds(newRange.getBoundingClientRect(),pageNumber);var pageDetails=this.pdfViewerBase.pageSize[pageNumber];var textRotate=0;var pageRotation=this.getAngle(pageDetails.rotation);if(textElement&&textElement.style.transform!==''){if(textElement.style.transform.startsWith('rotate(90deg)')){textRotate=90;}else if(textElement.style.transform.startsWith('rotate(180deg)')){textRotate=180;}else if(textElement.style.transform.startsWith('rotate(-90deg)')||textElement.style.transform.startsWith('rotate(270deg)')){textRotate=270;}else{textRotate=0;}}boundingRect.rotation=textRotate;selectionBounds.push(boundingRect);var textselection=newRange.toString();selectionTexts.push(textselection);newRange.detach();if(j===focusTextId){break;}}}for(var i=0;i<selectionTexts.length;i++){var text=selectionTexts[i];if(text.slice(text.length-2)!=='\r\n'||i===selectionTexts.length-1){this.allTextContent+=text;}else{this.allTextContent+=text;}}}else{bounds=this.normalizeBounds(range.getBoundingClientRect(),pageNumber);this.allTextContent=range.toString();var pageDetails=this.pdfViewerBase.pageSize[pageNumber];var textRotate=0;var pageRotation=this.getAngle(pageDetails.rotation);if(startElement&&startElement.style.transform!==''){if(startElement.style.transform.startsWith('rotate(90deg)')){textRotate=90;}else if(startElement.style.transform.startsWith('rotate(180deg)')){textRotate=180;}else if(startElement.style.transform.startsWith('rotate(-90deg)')||startElement.style.transform.startsWith('rotate(270deg)')){textRotate=270;}else{textRotate=0;}}bounds.rotation=textRotate;selectionBounds.push(bounds);}return selectionBounds;};TextSelection.prototype.getAngle=function(rotation){var angle=0;if(rotation){switch(rotation){case 0:angle=0;break;case 1:angle=90;break;case 2:angle=180;break;case 3:angle=270;break;}}return angle;};TextSelection.prototype.getTextId=function(elementId){var index=elementId.lastIndexOf('_');var divId=elementId.substring(index+1,elementId.length);// eslint-disable-next-line radix
return parseInt(divId);};TextSelection.prototype.normalizeBounds=function(bound,pageNumber){var newBounds=null;var currentPageElement=this.pdfViewerBase.getElement('_pageDiv_'+pageNumber);if(this.pdfViewerBase.isMixedSizeDocument){var currentTextElement=this.pdfViewerBase.getElement('_textLayer_'+pageNumber);if(currentTextElement){currentPageElement=currentTextElement;}}var currentPageRect=currentPageElement.getBoundingClientRect();newBounds={bottom:this.getMagnifiedValue(bound.bottom-currentPageRect.top),height:this.getMagnifiedValue(bound.height),left:this.getMagnifiedValue(bound.left-currentPageRect.left),top:this.getMagnifiedValue(bound.top-currentPageRect.top),right:this.getMagnifiedValue(bound.right-currentPageRect.left),width:this.getMagnifiedValue(bound.width)};return newBounds;};TextSelection.prototype.getMagnifiedValue=function(value){return value/this.pdfViewerBase.getZoomFactor();};/**
     * @param pageNumber
     * @private
     */TextSelection.prototype.getCurrentSelectionBounds=function(pageNumber){var bound=null;var ranges=this.selectionRangeArray;for(var i=0;i<ranges.length;i++){if(ranges[i]!==null){if(pageNumber===ranges[i].pageNumber){bound=ranges[i].bound;}}}return bound;};TextSelection.prototype.createRangeForSelection=function(start,end,startOffset,endOffset,range){range.setStart(start,startOffset);range.setEnd(end,endOffset);return range;};TextSelection.prototype.maintainSelectionArray=function(){var _this=this;if(this.selectionRangeArray.length!==0){var selection=window.getSelection();var isBackward=this.pdfViewerBase.textLayer.isBackWardSelection(selection);// eslint-disable-next-line
var anchorPage=isNaN(parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]))?parseInt(selection.anchorNode.id.split('_pageDiv_')[1]):parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);if(isNaN(anchorPage)){// eslint-disable-next-line radix
anchorPage=parseInt(selection.anchorNode.id.split('_text_')[1]);}// eslint-disable-next-line
var focusPage_1=isNaN(parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]))?parseInt(selection.focusNode.id.split('_pageDiv_')[1]):parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);if(isNaN(focusPage_1)){// eslint-disable-next-line
focusPage_1=isNaN(parseInt(selection.focusNode.id.split('_text_')[1]))?parseInt(selection.focusNode.id.split('_textLayer_')[1]):parseInt(selection.focusNode.id.split('_text_')[1]);}var arrayObject=[];if(!isBackward){arrayObject=this.selectionRangeArray.filter(// eslint-disable-next-line
function(obj){return!(_this.selectionStartPage<=obj.pageNumber&&obj.pageNumber<focusPage_1);});}else{arrayObject=this.selectionRangeArray.filter(// eslint-disable-next-line
function(obj){return!(focusPage_1<obj.pageNumber&&obj.pageNumber<=_this.selectionStartPage);});}if(arrayObject.length>0){for(var i=0;i<arrayObject.length;i++){var indexInArray=this.selectionRangeArray.indexOf(arrayObject[i]);if(indexInArray!==-1){this.selectionRangeArray.splice(indexInArray,1);}}if(this.selectionRangeArray.length===1){// eslint-disable-next-line max-len
if(this.selectionRangeArray[0].pageNumber===anchorPage||this.selectionRangeArray[0].pageNumber===focusPage_1){arrayObject=[];}}}}};/**
     * @private
     */TextSelection.prototype.applySpanForSelection=function(){var selection=window.getSelection();// eslint-disable-next-line max-len
if(selection.anchorNode===selection.focusNode&&selection.anchorOffset===selection.focusOffset&&!selection.isCollapsed){selection.removeAllRanges();}// eslint-disable-next-line max-len
if(selection.anchorNode!==null&&this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(selection.anchorNode))){var isBackWardSelection=this.pdfViewerBase.textLayer.isBackWardSelection(selection);var anchorPageId=void 0;var focusPageId=void 0;var anchorOffsetDiv=void 0;var focusOffsetDiv=void 0;var anchorOffset=void 0;var focusOffset=void 0;if(isBackWardSelection){// eslint-disable-next-line radix
anchorPageId=parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);// eslint-disable-next-line radix
focusPageId=parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);// eslint-disable-next-line radix
anchorOffsetDiv=parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1].split('_')[1]);// eslint-disable-next-line radix
focusOffsetDiv=parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1].split('_')[1]);anchorOffset=selection.focusOffset;focusOffset=selection.anchorOffset;}else{var anchorElement=this.getNodeElementFromNode(selection.anchorNode);var focusElement=this.getNodeElementFromNode(selection.focusNode);// eslint-disable-next-line
anchorPageId=anchorElement.id.indexOf('text_')!==-1?parseInt(anchorElement.id.split('text_')[1]):parseInt(anchorElement.id.split('_textLayer_')[1]);// eslint-disable-next-line
focusPageId=focusElement.id.indexOf('text_')!==-1?parseInt(focusElement.id.split('text_')[1]):parseInt(focusElement.id.split('_textLayer_')[1]);var isFocusChanged=false;if(this.isTouchSelection){if(selection.focusNode===this.pdfViewerBase.pageContainer){var lastChildNode=this.pdfViewerBase.pageContainer.lastChild;if(lastChildNode.classList.contains('e-pv-touch-select-drop')){var lastPageDiv=lastChildNode.previousSibling.previousSibling;// eslint-disable-next-line radix
focusPageId=parseInt(lastPageDiv.id.split('_pageDiv_')[1]);focusElement=this.pdfViewerBase.getElement('_textLayer_'+focusPageId).lastChild;isFocusChanged=true;}else if(lastChildNode.classList.contains('e-pv-page-div')){var lastPageDiv=lastChildNode;// eslint-disable-next-line radix
focusPageId=parseInt(lastPageDiv.id.split('_pageDiv_')[1]);focusElement=this.pdfViewerBase.getElement('_textLayer_'+focusPageId).lastChild;isFocusChanged=true;}}}if(anchorElement.classList.contains('e-pv-maintaincontent')){anchorElement=this.getNodeElementFromNode(anchorElement);// eslint-disable-next-line radix
anchorPageId=parseInt(anchorElement.id.split('text_')[1]);}if(focusElement.classList.contains('e-pv-maintaincontent')){focusElement=this.getNodeElementFromNode(focusElement);// eslint-disable-next-line radix
focusPageId=parseInt(focusElement.id.split('text_')[1]);}if(anchorPageId===focusPageId){if(anchorElement.contains(focusElement)){anchorElement=focusElement;}if(focusElement.contains(anchorElement)){focusElement=anchorElement;}}// eslint-disable-next-line radix
anchorOffsetDiv=anchorElement.id.split('text_')[1]?parseInt(anchorElement.id.split('text_')[1].split('_')[1]):null;// eslint-disable-next-line radix
focusOffsetDiv=focusElement.id.split('text_')[1]?parseInt(focusElement.id.split('text_')[1].split('_')[1]):null;anchorOffsetDiv=isNaN(anchorOffsetDiv)?focusOffsetDiv:anchorOffsetDiv;focusOffsetDiv=isNaN(focusOffsetDiv)?anchorOffsetDiv:focusOffsetDiv;anchorOffset=selection.anchorOffset;focusOffset=!isFocusChanged?selection.focusOffset:focusElement.textContent.length;}selection.removeAllRanges();this.pdfViewerBase.textLayer.clearDivSelection();// eslint-disable-next-line max-len
this.pdfViewerBase.textLayer.applySpanForSelection(anchorPageId,focusPageId,anchorOffsetDiv,focusOffsetDiv,anchorOffset,focusOffset);if(this.pdfViewer.textSearchModule){this.pdfViewer.textSearchModule.searchAfterSelection();}}};/**
     * @param event
     * @param x
     * @param y
     * @private
     */TextSelection.prototype.initiateTouchSelection=function(event,x,y){if(this.pdfViewerBase.isShapeBasedAnnotationsEnabled()){if(this.pdfViewer.selectedItems.annotations.length>0){this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.annotations[0].pageIndex);}}// eslint-disable-next-line
var element=event.target;var belowElements=document.elementsFromPoint(event.touches[0].clientX,event.touches[0].clientY);if(belowElements.length!==0){if(belowElements[0].classList.contains('e-pv-hyperlink')&&belowElements[1].classList.contains('e-pv-text')){element=belowElements[1];}}var pageNumber=parseFloat(element.id.split('_')[2]);this.pdfViewer.fireTextSelectionStart(pageNumber+1);this.selectAWord(element,x,y,true);this.createTouchSelectElement(event);this.maintainSelectionOnZoom(true,false);this.fireTextSelectEnd();this.applySpanForSelection();};// eslint-disable-next-line
TextSelection.prototype.selectTextByTouch=function(element,x,y,isForwardSelection,target,isCloserMovement){var isTextSelected=false;if(element.nodeType===element.TEXT_NODE){var rangeObject=element.ownerDocument.createRange();var selection=window.getSelection();rangeObject.selectNodeContents(element);var currentPosition=0;var endPosition=rangeObject.endOffset;while(currentPosition<endPosition){rangeObject.setStart(element,currentPosition);rangeObject.setEnd(element,currentPosition+1);var rangeBounds=rangeObject.getBoundingClientRect();if(rangeBounds.left<=x&&rangeBounds.right>=x&&rangeBounds.top<=y&&rangeBounds.bottom>=y){if(selection.anchorNode!=null){if(isForwardSelection){rangeObject.setStart(selection.anchorNode,selection.anchorOffset);}// eslint-disable-next-line max-len
rangeObject=this.setTouchSelectionStartPosition(selection,rangeObject,isForwardSelection,target,element,currentPosition,isCloserMovement);if(isForwardSelection){selection.extend(element,currentPosition);}isTextSelected=true;}rangeObject.detach();return isTextSelected;}currentPosition+=1;}}else{for(var i=0;i<element.childNodes.length;i++){var range=element.childNodes[i].ownerDocument.createRange();range.selectNodeContents(element.childNodes[i]);var rangeBounds=range.getBoundingClientRect();if(rangeBounds.left<=x&&rangeBounds.right>=x&&rangeBounds.top<=y&&rangeBounds.bottom>=y){range.detach();return this.selectTextByTouch(element.childNodes[i],x,y,isForwardSelection,target,isCloserMovement);}else{range.detach();}}}return isTextSelected;};// eslint-disable-next-line
TextSelection.prototype.setTouchSelectionStartPosition=function(selection,range,isForwardSelection,target,element,currentPosition,isCloserMovement){if(isForwardSelection){if(target==='left'){// eslint-disable-next-line
var startNode=this.getTouchFocusElement(selection,true);range.setStart(startNode.focusNode,startNode.focusOffset);range.setEnd(element,currentPosition);this.selectionAnchorTouch={anchorNode:range.endContainer.parentElement.id,anchorOffset:range.endOffset};}else if(target==='right'){// eslint-disable-next-line
var startNode=this.getTouchAnchorElement(selection,false);range.setStart(startNode.anchorNode,startNode.anchorOffset);range.setEnd(element,currentPosition);this.selectionFocusTouch={focusNode:range.endContainer.parentElement.id,focusOffset:range.endOffset};}}else{if(target==='left'){if(!isCloserMovement){// eslint-disable-next-line
var startNode=this.getTouchFocusElement(selection,false);range.setStart(element,currentPosition);// eslint-disable-next-line radix
range.setEnd(startNode.focusNode,startNode.focusOffset);if(range.toString()===''){range.setStart(element,currentPosition);range.setEnd(selection.focusNode,selection.focusOffset);}this.selectionAnchorTouch={anchorNode:range.startContainer.parentElement.id,anchorOffset:range.startOffset};}else{range.setStart(element,currentPosition);range.setEnd(selection.focusNode,selection.focusOffset);this.selectionAnchorTouch={anchorNode:range.startContainer.parentElement.id,anchorOffset:range.startOffset};}}else if(target==='right'){// eslint-disable-next-line
var startNode=this.getTouchAnchorElement(selection,true);range.setStart(element,currentPosition);range.setEnd(startNode.anchorNode,startNode.anchorOffset);if(range.toString()===''){range.setStart(startNode.anchorNode,startNode.anchorOffset);range.setEnd(element,currentPosition);}this.selectionFocusTouch={focusNode:range.startContainer.parentElement.id,focusOffset:range.startOffset};}}selection.removeAllRanges();selection.addRange(range);return range;};TextSelection.prototype.getTouchAnchorElement=function(selection,isCurrentFocus){var element=document.getElementById(this.selectionAnchorTouch.anchorNode.toString());var startNode=null;var offset=0;if(element){startNode=element.childNodes[0];// eslint-disable-next-line radix
offset=parseInt(this.selectionAnchorTouch.anchorOffset.toString());}else{if(isCurrentFocus){startNode=selection.focusNode;offset=selection.focusOffset;}else{startNode=selection.anchorNode;offset=selection.anchorOffset;}}return{anchorNode:startNode,anchorOffset:offset};};TextSelection.prototype.getTouchFocusElement=function(selection,isCurrentAnchor){var element=document.getElementById(this.selectionFocusTouch.focusNode.toString());var startNode=null;var offset=0;if(element){startNode=element.childNodes[0];// eslint-disable-next-line radix
offset=parseInt(this.selectionFocusTouch.focusOffset.toString());}else{if(isCurrentAnchor){startNode=selection.anchorNode;offset=selection.anchorOffset;}else{startNode=selection.focusNode;offset=selection.focusOffset;}}return{focusNode:startNode,focusOffset:offset};};TextSelection.prototype.createTouchSelectElement=function(event){var topMargin=10;this.isTouchSelection=true;var selection=window.getSelection();if(selection.type==='Range'){// eslint-disable-next-line max-len
this.dropDivElementLeft=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_touchSelect_droplet_left',className:'e-pv-touch-select-drop'});// eslint-disable-next-line max-len
this.dropDivElementRight=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_touchSelect_droplet_right',className:'e-pv-touch-select-drop'});this.dropElementLeft=sf.base.createElement('div',{className:'e-pv-touch-ellipse'});this.dropElementLeft.style.transform='rotate(0deg)';this.dropDivElementLeft.appendChild(this.dropElementLeft);this.dropElementRight=sf.base.createElement('div',{className:'e-pv-touch-ellipse'});this.dropElementRight.style.transform='rotate(-90deg)';this.dropElementRight.style.margin='0 9px 0 0';this.dropDivElementRight.appendChild(this.dropElementRight);this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft);this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);var range=selection.getRangeAt(0);var rangePosition=range.getBoundingClientRect();var dropElementRect=this.dropDivElementLeft.getBoundingClientRect();// eslint-disable-next-line max-len
var pageTopValue=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top;var viewerLeftPosition=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;var topClientValue=this.getClientValueTop(rangePosition.top,this.pdfViewerBase.currentPageNumber-1);// eslint-disable-next-line max-len
var topPositionValue=topClientValue+pageTopValue*this.pdfViewerBase.getZoomFactor()+dropElementRect.height/2*this.pdfViewerBase.getZoomFactor()+'px';this.dropDivElementLeft.style.top=topPositionValue;this.dropDivElementLeft.style.left=rangePosition.left-(viewerLeftPosition+dropElementRect.width)+'px';this.dropDivElementRight.style.top=topPositionValue;// eslint-disable-next-line max-len
this.dropDivElementRight.style.left=rangePosition.left+rangePosition.width-viewerLeftPosition+'px';var currentPageLeft=this.pdfViewerBase.getElement('_pageDiv_'+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;var currentRangeLeft=rangePosition.left-currentPageLeft;// eslint-disable-next-line max-len
this.topStoreLeft={pageTop:pageTopValue,topClientValue:this.getMagnifiedValue(topClientValue),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(currentRangeLeft),isHeightNeeded:true};// eslint-disable-next-line max-len
this.topStoreRight={pageTop:pageTopValue,topClientValue:this.getMagnifiedValue(topClientValue),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(currentRangeLeft+rangePosition.width),isHeightNeeded:true};this.dropDivElementLeft.addEventListener('touchstart',this.onLeftTouchSelectElementTouchStart);this.dropDivElementLeft.addEventListener('touchmove',this.onLeftTouchSelectElementTouchMove);this.dropDivElementLeft.addEventListener('touchend',this.onLeftTouchSelectElementTouchEnd);this.dropDivElementRight.addEventListener('touchstart',this.onRightTouchSelectElementTouchStart);this.dropDivElementRight.addEventListener('touchmove',this.onRightTouchSelectElementTouchMove);this.dropDivElementRight.addEventListener('touchend',this.onRightTouchSelectElementTouchEnd);// eslint-disable-next-line max-len
this.calculateContextMenuPosition(event.touches[0].clientY+this.dropDivElementLeft.clientHeight+topMargin,parseInt(this.dropDivElementLeft.style.left,10)-topMargin);}};/**
     * @param top
     * @param left
     * @private
     */ // eslint-disable-next-line
TextSelection.prototype.calculateContextMenuPosition=function(top,left){var _this=this;var topMargin=10;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){// eslint-disable-next-line
var contextTop=top-this.contextMenuHeight;if(contextTop<this.pdfViewerBase.toolbarHeight){top=top+this.contextMenuHeight;}else{top=contextTop;}if(top+this.contextMenuHeight>window.innerHeight){top=top-this.contextMenuHeight;}}if(this.pdfViewer.contextMenuSettings.contextMenuAction==='MouseUp'){left=left-50;}var proxy=this;setTimeout(function(){var leftValue=35;var selectedContent=document.getElementsByClassName("e-pv-maintaincontent")[0].getBoundingClientRect();if(selectedContent){if(selectedContent.bottom+proxy.contextMenuHeight+proxy.pdfViewerBase.toolbarHeight>window.innerHeight){top=selectedContent.top-(proxy.contextMenuHeight+proxy.pdfViewerBase.toolbarHeight-topMargin);}else{top=selectedContent.bottom+proxy.pdfViewerBase.toolbarHeight-topMargin;}left=selectedContent.left-leftValue;var toolbarModule=_this.pdfViewer.toolbarModule?_this.pdfViewer.toolbarModule.annotationToolbarModule:'null';if(!toolbarModule||!toolbarModule.textMarkupToolbarElement||toolbarModule.textMarkupToolbarElement.children.length===0){// eslint-disable-next-line max-len
proxy.pdfViewerBase.contextMenuModule.open(top,left,proxy.pdfViewerBase.viewerContainer);}}});};/**
     * @private
     */TextSelection.prototype.initiateSelectionByTouch=function(){this.pdfViewerBase.textLayer.clearDivSelection();this.pdfViewerBase.contextMenuModule.close();var lowerPageIndex=this.pdfViewerBase.currentPageNumber-3;lowerPageIndex=lowerPageIndex<0?0:lowerPageIndex;var higherPageIndex=this.pdfViewer.currentPageNumber+1;// eslint-disable-next-line max-len
higherPageIndex=higherPageIndex<this.pdfViewerBase.pageCount-1?higherPageIndex:this.pdfViewerBase.pageCount-1;for(var i=lowerPageIndex;i<=higherPageIndex;i++){var textLayer=this.pdfViewerBase.getElement('_textLayer_'+i);if(textLayer){if(textLayer.childNodes!==null){this.applySelectionMouseScroll(i);}}}if(this.selectionRangeArray.length>0){this.pdfViewer.fireTextSelectionStart(this.selectionRangeArray[0].pageNumber+1);}};// eslint-disable-next-line
TextSelection.prototype.terminateSelectionByTouch=function(event){var topMargin=10;this.maintainSelectionOnZoom(true,false);this.applySpanForSelection();if(this.pdfViewerBase.getTextMarkupAnnotationMode()){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);}else{this.fireTextSelectEnd();var top_4=event.changedTouches[0].clientY+event.currentTarget.clientHeight;var spanBounds=this.getSpanBounds();if(spanBounds.bottom+this.contextMenuHeight+this.pdfViewerBase.toolbarHeight>window.innerHeight){top_4=spanBounds.top-(this.contextMenuHeight+this.pdfViewerBase.toolbarHeight);}else{top_4=spanBounds.bottom+this.pdfViewerBase.toolbarHeight-topMargin;}this.pdfViewerBase.contextMenuModule.open(top_4,(spanBounds.right-spanBounds.left)/2,this.pdfViewerBase.viewerContainer);}};TextSelection.prototype.getSpanBounds=function(){var spanWidth=[];var spanRight=[];var spanLeft=[];var spanHeight=0;var selectedContent=document.getElementsByClassName("e-pv-maintaincontent");if(selectedContent.length>0){for(var i=0;i<selectedContent.length;i++){var spanElement=selectedContent[i].getBoundingClientRect();spanHeight=spanHeight+spanElement.height;spanWidth.push(spanElement.width);spanRight.push(spanElement.right);spanLeft.push(spanElement.left);}// eslint-disable-next-line max-len
return{top:selectedContent[0].getBoundingClientRect().top,bottom:selectedContent[selectedContent.length-1].getBoundingClientRect().bottom,left:Math.min.apply(null,spanLeft),right:Math.max.apply(null,spanRight),width:Math.max.apply(null,spanWidth),height:spanHeight};}};TextSelection.prototype.getNodeElement=function(range,touchX,touchY,event,nodeElement){if(document.caretRangeFromPoint){range=document.caretRangeFromPoint(touchX,touchY);nodeElement=this.onTouchElementScroll(range,nodeElement,touchY,event);// eslint-disable-next-line
}else if(document.caretPositionFromPoint){// eslint-disable-next-line
var start=document.caretPositionFromPoint(touchX,touchY);// eslint-disable-next-line
var end=document.caretPositionFromPoint(touchX,touchY);range=document.createRange();range.setStart(start.offsetNode,start.offset);range.setEnd(end.offsetNode,end.offset);nodeElement=this.onTouchElementScroll(range,nodeElement,touchY,event);}return nodeElement;};TextSelection.prototype.isTouchedWithinContainer=function(event){var elements=document.elementsFromPoint(event.touches[0].clientX,event.touches[0].clientY);var isTouchedWithinContainer=false;if(elements.length!==0){isTouchedWithinContainer=true;}return isTouchedWithinContainer;};TextSelection.prototype.onTouchElementScroll=function(range,nodeElement,touchY,event){var viewerScrollTop=this.pdfViewerBase.viewerContainer.scrollTop;if(range!=null){nodeElement=range.startContainer;var isScrollBar=this.isScrolledOnScrollBar(event);if(!this.pdfViewerBase.viewerContainer.contains(nodeElement.parentElement)||isScrollBar){if(touchY<this.pdfViewerBase.viewerContainer.clientHeight){this.pdfViewerBase.viewerContainer.scrollTop=viewerScrollTop-30;}else{this.pdfViewerBase.viewerContainer.scrollTop=viewerScrollTop+30;}}}else{if(touchY<this.pdfViewerBase.viewerContainer.clientHeight){this.pdfViewerBase.viewerContainer.scrollTop=viewerScrollTop-30;}else{this.pdfViewerBase.viewerContainer.scrollTop=viewerScrollTop+30;}}return nodeElement;};TextSelection.prototype.isCloserTouchScroll=function(currentDifference){var isForwardMovement=false;if(this.previousScrollDifference>currentDifference){isForwardMovement=true;}return isForwardMovement;};TextSelection.prototype.getClientValueTop=function(clientValue,pageNumber){if(this.pdfViewerBase.getElement('_pageDiv_'+pageNumber)){// eslint-disable-next-line max-len
return clientValue-this.pdfViewerBase.getElement('_pageDiv_'+pageNumber).getBoundingClientRect().top;}else{return clientValue;}};TextSelection.prototype.isScrolledOnScrollBar=function(event){var isScrollBar=false;// eslint-disable-next-line max-len
if(event.touches&&this.pdfViewerBase.viewerContainer.clientHeight+this.pdfViewerBase.viewerContainer.offsetTop<event.touches[0].clientY&&event.touches[0].clientY<this.pdfViewerBase.viewerContainer.offsetHeight+this.pdfViewerBase.viewerContainer.offsetTop){isScrollBar=true;}return isScrollBar;};TextSelection.prototype.getTextLastLength=function(element){if(element){return element.textContent.length;}else{return 0;}};TextSelection.prototype.getNodeElementFromNode=function(node){if(node.parentElement){return node.parentElement;}else{return node.parentNode;}};/**
     * Copy the selected text in the PDF Document.
     *
     * @returns void
     */TextSelection.prototype.copyText=function(){var selectionText='';this.maintainSelectionOnZoom(true,false);if(this.selectionRangeArray.length>0){for(var i=0;i<this.selectionRangeArray.length;i++){selectionText+=this.selectionRangeArray[i].textContent;}}if(selectionText.length>0){if(this.pdfViewer.annotation){this.pdfViewer.annotation.isShapeCopied=false;}var textArea=document.createElement('textarea');textArea.contentEditable='true';textArea.textContent=selectionText;// eslint-disable-next-line max-len
if(this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule){this.pdfViewer.annotation.freeTextAnnotationModule.selectedText=selectionText;}textArea.style.position='fixed';document.body.appendChild(textArea);textArea.select();try{document.execCommand('copy');}catch(ex){console.warn('Copy to clipboard failed.',ex);}finally{if(textArea){document.body.removeChild(textArea);}}}};/**
     * @private
     */TextSelection.prototype.destroy=function(){this.clear();};/**
     * @private
     */TextSelection.prototype.getModuleName=function(){return'TextSelection';};return TextSelection;}();/**
 * export types
 */ /* eslint-disable */ /**
 * TextSearch module
 */var TextSearch=/** @class */function(){/**
     * @param pdfViewer
     * @param pdfViewerBase
     * @param pdfViewer
     * @param pdfViewerBase
     * @private
     */function TextSearch(pdfViewer,pdfViewerBase){var _this=this;/**
         * @private
         */this.isTextSearch=false;/**
         * @private
         */this.searchCount=0;this.searchIndex=0;this.currentSearchIndex=0;this.startIndex=null;this.searchPageIndex=null;this.searchString=null;this.isMatchCase=false;/**
         * @private
         */this.searchRequestHandler=null;// eslint-disable-next-line
this.textContents=new Array();// eslint-disable-next-line
this.searchMatches=new Array();// eslint-disable-next-line
this.searchCollection=new Array();this.searchedPages=[];this.isPrevSearch=false;// eslint-disable-next-line
this.tempElementStorage=new Array();/**
         * @private
         */this.isMessagePopupOpened=false;/**
         * @private
         */this.isTextRetrieved=false;this.isTextSearched=false;this.isTextSearchEventTriggered=false;this.isSearchText=false;// eslint-disable-next-line
this.checkBoxOnChange=function(event){if(sf.base.isBlazor()){if(event.currentTarget&&event.currentTarget.checked){_this.isMatchCase=true;}else{_this.isMatchCase=false;}}else{if(event.checked){_this.isMatchCase=true;}else{_this.isMatchCase=false;}}if(_this.isTextSearch){_this.resetVariables();_this.clearAllOccurrences();var inputString=_this.searchInput.value;_this.searchIndex=0;_this.textSearch(inputString);}};this.searchKeypressHandler=function(event){_this.enableNextButton(true);_this.enablePrevButton(true);if(event.which===13){_this.initiateTextSearch(_this.searchInput);_this.updateSearchInputIcon(false);}else{_this.resetVariables();}};this.searchClickHandler=function(event){_this.searchButtonClick(_this.searchBtn,_this.searchInput);};this.nextButtonOnClick=function(event){_this.nextSearch();};this.prevButtonOnClick=function(event){_this.prevSearch();};this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @private
     */TextSearch.prototype.createTextSearchBox=function(){var _this=this;// eslint-disable-next-line max-len
this.searchBox=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_search_box',className:'e-pv-search-bar'});var toolbarElement;if(sf.base.isBlazor()){toolbarElement=document.getElementById('toolbarContainer');}else{toolbarElement=this.pdfViewerBase.getElement('_toolbarContainer');}if(toolbarElement){if(sf.base.isBlazor()){this.searchBox.style.top=toolbarElement.clientHeight+'px';}else{this.searchBox.style.top=toolbarElement.clientHeight+'px';}}var searchElementsContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_search_box_elements',className:'e-pv-search-bar-elements'});// eslint-disable-next-line max-len
var searchInputContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_search_input_container',className:'e-input-group e-pv-search-input'});this.searchInput=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_search_input',className:'e-input'});this.searchInput.type='text';if(sf.base.isBlazor()){var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_Findindocument');promise.then(function(value){_this.searchInput.placeholder=value;});}else{this.searchInput.placeholder=this.pdfViewer.localeObj.getConstant('Find in document');}// eslint-disable-next-line max-len
this.searchBtn=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_search_box-icon',className:'e-input-group-icon e-input-search-group-icon e-pv-search-icon'});searchInputContainer.appendChild(this.searchInput);searchInputContainer.appendChild(this.searchBtn);searchElementsContainer.appendChild(searchInputContainer);if(this.pdfViewer.enableRtl){this.prevSearchBtn=this.createSearchBoxButtons('prev_occurrence','e-pv-next-search');}else{this.prevSearchBtn=this.createSearchBoxButtons('prev_occurrence','e-pv-prev-search');}this.prevSearchBtn.setAttribute('aria-label','Previous Search text');searchElementsContainer.appendChild(this.prevSearchBtn);if(this.pdfViewer.enableRtl){this.nextSearchBtn=this.createSearchBoxButtons('next_occurrence','e-pv-prev-search');}else{this.nextSearchBtn=this.createSearchBoxButtons('next_occurrence','e-pv-next-search');}this.nextSearchBtn.setAttribute('aria-label','Next Search text');searchElementsContainer.appendChild(this.nextSearchBtn);// eslint-disable-next-line max-len
var matchCaseContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_match_case_container',className:'e-pv-match-case-container'});var matchCaseInput=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_match_case'});matchCaseInput.type='checkbox';if(sf.base.isBlazor()){matchCaseInput.style.height='17px';matchCaseInput.style.width='17px';matchCaseInput.addEventListener('change',this.checkBoxOnChange.bind(this));}matchCaseContainer.appendChild(matchCaseInput);this.searchBox.appendChild(searchElementsContainer);this.searchBox.appendChild(matchCaseContainer);this.pdfViewerBase.mainContainer.appendChild(this.searchBox);if(sf.base.isBlazor()){// eslint-disable-next-line max-len
var matchCaseText_1=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_search_box_text',styles:'position: absolute; padding-top: 3px; padding-left: 8px; padding-right: 8px; font-size: 13px'});var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_Matchcase');promise.then(function(value){matchCaseText_1.textContent=value;});matchCaseContainer.appendChild(matchCaseText_1);}else{// eslint-disable-next-line max-len
var checkBox=new sf.buttons.CheckBox({cssClass:'e-pv-match-case',label:this.pdfViewer.localeObj.getConstant('Match case'),change:this.checkBoxOnChange.bind(this)});checkBox.appendTo(matchCaseInput);}var waitingPopup=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_textSearchLoadingIndicator'});searchInputContainer.appendChild(waitingPopup);waitingPopup.style.position='absolute';waitingPopup.style.top='15px';waitingPopup.style.left=searchInputContainer.clientWidth-46+'px';createSpinner({target:waitingPopup,cssClass:'e-spin-center'});this.setLoaderProperties(waitingPopup);this.showSearchBox(false);if(this.pdfViewer.enableRtl){this.searchBox.classList.add('e-rtl');this.searchBox.style.left='88.3px';}else{this.searchBox.classList.remove('e-rtl');this.searchBox.style.right='88.3px';}this.searchInput.addEventListener('focus',function(){_this.searchInput.parentElement.classList.add('e-input-focus');});this.searchInput.addEventListener('blur',function(){_this.searchInput.parentElement.classList.remove('e-input-focus');});this.searchInput.addEventListener('keydown',this.searchKeypressHandler.bind(this));this.searchBtn.addEventListener('click',this.searchClickHandler.bind(this));this.nextSearchBtn.addEventListener('click',this.nextButtonOnClick.bind(this));this.prevSearchBtn.addEventListener('click',this.prevButtonOnClick.bind(this));};TextSearch.prototype.setLoaderProperties=function(element){var spinnerElement=element.firstChild.firstChild.firstChild;if(spinnerElement){spinnerElement.style.height='18px';spinnerElement.style.width='18px';spinnerElement.style.transformOrigin='9px 9px 9px';}};TextSearch.prototype.showLoadingIndicator=function(isShow){var waitingPopup=document.getElementById(this.pdfViewer.dataId+'_textSearchLoadingIndicator');if(waitingPopup){if(isShow){showSpinner(waitingPopup);}else{hideSpinner(waitingPopup);}}};/**
     * @private
     */TextSearch.prototype.textSearchBoxOnResize=function(){if(this.pdfViewer.toolbarModule&&this.pdfViewer.enableToolbar){var secondaryToolbar=this.pdfViewerBase.getElement('_toolbarContainer_popup');if(secondaryToolbar){if(secondaryToolbar.contains(this.pdfViewerBase.getElement('_search').parentElement)){this.searchBox.style.right='0px';}}}else{// eslint-disable-next-line max-len
if(this.pdfViewerBase.viewerContainer.clientWidth+this.pdfViewerBase.viewerContainer.offsetLeft<this.searchBox.offsetLeft+this.searchBox.clientWidth){this.searchBox.style.right='0px';// eslint-disable-next-line
this.searchBox.style.width=parseInt(this.searchBox.style.width)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+'px';// eslint-disable-next-line
this.searchInput.style.width=parseInt(this.searchInput.style.width)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+'px';}else{this.searchBox.style.right='88.3px';this.searchBox.style.width='';this.searchInput.style.width='';}}};/**
     * @param isShow
     * @private
     */TextSearch.prototype.showSearchBox=function(isShow){if(isShow){this.searchBox.style.display='block';}else{this.searchBox.style.display='none';this.searchInput.value='';}this.onTextSearchClose();};/**
     * @private
     */TextSearch.prototype.searchAfterSelection=function(){if(this.isTextSearch){this.initSearch(this.searchPageIndex,true);this.highlightOthers();}};TextSearch.prototype.initiateTextSearch=function(searchElement){var inputString=searchElement.value;if(inputString&&inputString.length>0&&inputString[inputString.length-1]===' '){inputString=inputString.slice(0,inputString.length-1);}this.initiateSearch(inputString);};/**
     * @param inputString
     * @private
     */TextSearch.prototype.initiateSearch=function(inputString){if(inputString!==this.searchString){this.isTextSearch=false;this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1;}this.clearAllOccurrences();if(inputString!==''){// eslint-disable-next-line
if(this.searchMatches[this.searchPageIndex]&&inputString===this.searchString){if(this.searchMatches[this.searchPageIndex].length===0){this.initSearch(this.searchPageIndex,false);}else{this.nextSearch();}}else{this.resetVariables();this.searchIndex=0;this.textSearch(inputString);}}};TextSearch.prototype.textSearch=function(inputString){if(inputString!==''||inputString){this.searchString=inputString;this.isTextSearch=true;this.isSearchText=true;this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1;this.searchCount=0;this.isTextSearchEventTriggered=false;this.showLoadingIndicator(true);this.pdfViewer.fireTextSearchStart(inputString,this.isMatchCase);if(this.pdfViewer.isExtractText){if(this.isTextRetrieved){for(var i=0;i<this.pdfViewerBase.pageCount;i++){this.initSearch(i,false,true);}}else{this.isTextSearched=true;for(var i=0;i<this.documentTextCollection.length;i++){this.initSearch(i,false,true);}}}this.initSearch(this.searchPageIndex,false);this.highlightOthers();}};TextSearch.prototype.nextSearch=function(){this.isPrevSearch=false;this.isTextSearch=true;this.isSearchText=false;if(this.searchString){this.clearAllOccurrences();this.searchIndex=this.searchIndex+1;if(this.searchMatches[this.searchPageIndex]){// eslint-disable-next-line max-len
if(this.searchIndex>=this.searchMatches[this.searchPageIndex].length){this.searchIndex=0;this.searchPageIndex=this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0;if(this.pdfViewerBase.pageCount>1){this.initSearch(this.searchPageIndex,false);}else{this.initSearch(this.searchPageIndex,true);if(!this.isMessagePopupOpened){this.onMessageBoxOpen();}this.pdfViewerBase.updateScrollTop(this.searchPageIndex);}this.showLoadingIndicator(true);}else{this.highlightSearchedTexts(this.searchPageIndex,false,undefined);this.showLoadingIndicator(false);}this.highlightOthers(true);}else{this.initiateTextSearch(this.searchInput);}}else{this.initiateTextSearch(this.searchInput);}};TextSearch.prototype.prevSearch=function(){this.isPrevSearch=true;this.isTextSearch=true;this.isSearchText=false;if(this.searchString){this.clearAllOccurrences();this.searchIndex=this.searchIndex-1;if(this.searchIndex<0){this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1;this.initSearch(this.searchPageIndex,false);this.showLoadingIndicator(true);}else{this.highlightSearchedTexts(this.searchPageIndex,false,undefined);this.showLoadingIndicator(false);}this.highlightOthers(true);}else{this.searchIndex=this.searchIndex-1;this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1;var inputString=this.searchInput.value;this.textSearch(inputString);}};TextSearch.prototype.initSearch=function(pageIndex,isSinglePageSearch,isCount){// eslint-disable-next-line
var storedData=this.pdfViewerBase.getLinkInformation(pageIndex,true);var pageText=null;var textContents=null;// eslint-disable-next-line
var characterBounds=null;if(isCount){if(this.documentTextCollection.length!==0){// eslint-disable-next-line
var documentIndex=this.documentTextCollection[pageIndex][pageIndex];var pageTextData=documentIndex.pageText?documentIndex.pageText:documentIndex.PageText;if(this.documentTextCollection[pageIndex]&&documentIndex){// eslint-disable-next-line max-len
this.getSearchTextContent(pageIndex,this.searchString,pageTextData,textContents,isSinglePageSearch,this.documentTextCollection[pageIndex]);}}}else{if(storedData){// eslint-disable-next-line
pageText=storedData['pageText'];// eslint-disable-next-line
textContents=storedData['textContent'];characterBounds=this.pdfViewerBase.textLayer.characterBound[pageIndex];this.textContents[pageIndex]=textContents;this.getPossibleMatches(pageIndex,this.searchString,pageText,textContents,isSinglePageSearch,characterBounds);}else{if(!isSinglePageSearch){this.createRequestForSearch(pageIndex);}}}if(this.pdfViewerBase.pageCount===(this.searchMatches&&this.searchMatches.length)){if(!this.isTextSearchEventTriggered){this.isTextSearchEventTriggered=true;this.pdfViewer.fireTextSearchComplete(this.searchString,this.isMatchCase);}}};// eslint-disable-next-line
TextSearch.prototype.getPossibleMatches=function(pageIndex,searchString,pageString,textContents,isSinglePageSearch,characterBounds){var arrayReturns;if(this.searchMatches&&!this.searchMatches[pageIndex]){var pageText=pageString;var searchText=searchString;var multiSearch=pageText.replace(/(\s\r\n)/gm,' ').replace(/(\r\n)/gm," ");var Multiline=pageString.replace(/(\s\r\n)/gm,'  ').replace(/(\r\n)/gm," ");var specialCharcterSearch=multiSearch.replace(/[^a-zA-z0-9" "]/g,"");var queryLength=searchString.length;if(!this.isMatchCase){searchText=searchString.toLowerCase();pageText=pageString.toLowerCase();multiSearch=multiSearch.toLowerCase();Multiline=Multiline.toLowerCase();specialCharcterSearch=specialCharcterSearch.toLowerCase();}var matches=[];var matchedArray=[];var matchIndex=-queryLength;var newIndex=-queryLength;var multiSearchIndex=-queryLength;var MultilineIndex=-queryLength;var specialcharcterIndex=-queryLength;while(matchIndex!==0){if(searchText===''||searchText===' '||!searchText){break;}matchIndex=pageText.indexOf(searchText,matchIndex+queryLength);if(searchText.indexOf(' ')!==-1){var newString=searchString.replace(' ','\r\n');newIndex=pageText.indexOf(newString,newIndex+queryLength);newIndex=-1;if(!(newIndex<=-1)){if(newIndex<matchIndex){matches.push(newIndex);}}}if(matchIndex<=-1&&newIndex<=-1){break;}if(!(matchIndex<=-1)){matches.push(matchIndex);}if(newIndex>matchIndex&&!(newIndex<=-1)){matches.push(newIndex);}}if(matches.length==0){multiSearchIndex=multiSearch.indexOf(searchText,multiSearchIndex+queryLength);MultilineIndex=Multiline.indexOf(searchText,MultilineIndex+queryLength);specialcharcterIndex=specialCharcterSearch.indexOf(searchText,specialcharcterIndex+queryLength);if(multiSearchIndex!==-1){arrayReturns=this.correctLinetext(searchString,matchIndex,pageText);matchIndex=-arrayReturns[0].length;for(var i=0;i<arrayReturns.length;i++){matchIndex=pageText.indexOf(arrayReturns[i].trim(),matchIndex+(arrayReturns[i-1]===undefined||null?arrayReturns[0].length:arrayReturns[i-1].length));matchedArray.push(matchIndex);if(matchedArray.length>1){if(matchedArray[1]-(matchedArray[0]+arrayReturns[0].length)<=3){matches.push(matchedArray);this.searchMatches[pageIndex]=matches;}else{i=-1;matchIndex=matchedArray[0]+arrayReturns[0].length;matchedArray.splice(0,matchedArray.length);}}}}else if(specialcharcterIndex!==-1){arrayReturns=this.correctLinetext(searchString,matchIndex,pageText);matchIndex=-arrayReturns[0].length;for(var i=0;i<arrayReturns.length;i++){matchIndex=pageText.indexOf(arrayReturns[i].trim(),matchIndex+(arrayReturns[i-1]===undefined||null?arrayReturns[0].length:arrayReturns[i-1].length));matchedArray.push(matchIndex);if(matchedArray.length>1){if(matchedArray[1]-(matchedArray[0]+arrayReturns[0].length)<=3){matches.push(matchedArray);this.searchMatches[pageIndex]=matches;}else{i=-1;matchIndex=matchedArray[0]+arrayReturns[0].length;matchedArray.splice(0,matchedArray.length);}}}}else if(MultilineIndex!==-1){arrayReturns=this.correctLinetext(searchString,matchIndex,pageText);matchIndex=-arrayReturns[0].length;for(var i=0;i<arrayReturns.length;i++){matchIndex=pageText.indexOf(arrayReturns[i].trim(),matchIndex+(arrayReturns[i-1]===undefined||null?arrayReturns[0].length:arrayReturns[i-1].length));matchedArray.push(matchIndex);if(matchedArray.length>1){if(matchedArray[1]-(matchedArray[0]+arrayReturns[0].length)<=3){matches.push(matchedArray);this.searchMatches[pageIndex]=matches;}else{i=-1;matchIndex=matchedArray[0]+arrayReturns[0].length;matchedArray.splice(0,matchedArray.length);}}}}if(matches.length>1){matches.splice(1,matches.length);}}if(this.searchMatches&&matches.length>0){this.searchMatches[pageIndex]=matches;}}if(!isSinglePageSearch){if(this.searchedPages.indexOf(pageIndex)===-1){this.searchedPages.push(pageIndex);this.startIndex=this.searchedPages[0];}this.updateSearchInputIcon(false);}if(this.searchMatches&&this.searchMatches[pageIndex]&&this.searchMatches[pageIndex].length!==0){if(!isSinglePageSearch){if(this.isPrevSearch){this.searchIndex=this.searchMatches[pageIndex].length-1;}if(this.pdfViewerBase.currentPageNumber-1!==this.searchPageIndex){// eslint-disable-next-line max-len
if(this.searchMatches.length>0&&(this.searchIndex===0||this.searchIndex===-1)&&this.searchPageIndex===this.currentSearchIndex){if(!this.isMessagePopupOpened&&!this.isSearchText){this.onMessageBoxOpen();}this.searchPageIndex=this.getSearchPage(this.pdfViewerBase.currentPageNumber-1);this.searchedPages=[this.searchPageIndex];}else if(this.isPrevSearch&&this.searchMatches&&this.searchMatches.length>0&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&this.startIndex-1===this.searchPageIndex){if(!this.isMessagePopupOpened){this.onMessageBoxOpen();}this.searchedPages=[this.startIndex];}this.pdfViewerBase.updateScrollTop(this.searchPageIndex);}else if(this.searchMatches&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&this.startIndex===this.searchPageIndex&&this.pdfViewerBase.pageCount>1){if(!this.isMessagePopupOpened){this.onMessageBoxOpen();}this.searchedPages=[this.startIndex];}}this.highlightSearchedTexts(pageIndex,isSinglePageSearch,arrayReturns);}else{if(!isSinglePageSearch){if(this.isPrevSearch){this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1;}else{this.searchPageIndex=this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0;}if(this.searchedPages.indexOf(this.searchPageIndex)===-1&&this.searchedPages.length!==this.pdfViewerBase.pageCount){this.showLoadingIndicator(true);this.initSearch(this.searchPageIndex,false);}else{var searchPageIndex=this.getSearchPage(pageIndex);// eslint-disable-next-line max-len
if(this.searchMatches&&sf.base.isNullOrUndefined(this.searchMatches[this.searchPageIndex])&&this.searchedPages.length===this.pdfViewerBase.pageCount){// eslint-disable-next-line max-len
if(!this.isMessagePopupOpened){this.onMessageBoxOpen();}this.pdfViewerBase.updateScrollTop(this.startIndex);// eslint-disable-next-line max-len
}else if(this.searchMatches&&this.searchMatches.length>0&&(this.searchIndex===0||this.searchIndex===-1)&&searchPageIndex===this.currentSearchIndex){if(this.isPrevSearch){// eslint-disable-next-line max-len
if(!this.isMessagePopupOpened){this.onMessageBoxOpen();}this.searchPageIndex=searchPageIndex;this.searchedPages=[searchPageIndex];this.searchIndex=-1;}else{if(!this.isMessagePopupOpened&&this.pdfViewerBase.currentPageNumber!==1&&!this.isSearchText){this.onMessageBoxOpen();}this.searchPageIndex=searchPageIndex;this.searchedPages=[searchPageIndex];this.searchIndex=0;}this.highlightSearchedTexts(this.searchPageIndex,isSinglePageSearch,undefined);}else if(this.searchMatches&&this.searchMatches[this.searchPageIndex]&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount){if(!this.isMessagePopupOpened){this.onMessageBoxOpen();}this.searchPageIndex=this.startIndex;this.searchedPages=[this.searchPageIndex];this.searchIndex=0;this.pdfViewerBase.updateScrollTop(this.startIndex);this.highlightSearchedTexts(this.searchPageIndex,isSinglePageSearch,undefined);}}}}};TextSearch.prototype.correctLinetext=function(searchString,matchIndex,pageText){var indiuvalLineArray=[];var searchArray=searchString.toLowerCase().split(/[" "]+/);matchIndex=0;var linestring="";for(var i=0;i<searchArray.length;i++){var searchArrayText=linestring+searchArray[i];matchIndex=pageText.indexOf(searchArrayText,matchIndex);if(matchIndex!==-1){linestring+=searchArray[i]+" ";if(i==searchArray.length-1){indiuvalLineArray.push(linestring);}}else{indiuvalLineArray.push(linestring);linestring=searchArray[i]+" ";if(i==searchArray.length-1){indiuvalLineArray.push(linestring);}}}return indiuvalLineArray;};// eslint-disable-next-line
TextSearch.prototype.getSearchTextContent=function(pageIndex,searchString,pageString,textContents,isSinglePageSearch,characterBounds){var pageText=pageString;var searchText=searchString;var queryLength=searchString.length;if(!this.isMatchCase){searchText=searchString.toLowerCase();pageText=pageString.toLowerCase();}var matches=[];var matchIndex=-queryLength;var newIndex=-queryLength;while(matchIndex!==0){if(searchText===''||searchText===' '||!searchText){break;}matchIndex=pageText.indexOf(searchText,matchIndex+queryLength);if(searchText.indexOf(' ')!==-1){var newString=searchString.replace(' ','\r\n');newIndex=pageText.indexOf(newString,newIndex+queryLength);if(!(newIndex<=-1)){if(newIndex<matchIndex){matches.push(newIndex);}}}if(matchIndex<=-1&&newIndex<=-1){break;}if(!(matchIndex<=-1)){matches.push(matchIndex);}if(newIndex>matchIndex&&!(newIndex<=-1)){matches.push(newIndex);}}if(matches.length!==0){this.searchCount=this.searchCount+matches.length;}this.searchMatches[pageIndex]=matches;};TextSearch.prototype.getSearchPage=function(pageIndex){var pageNumber=null;if(this.isPrevSearch){for(var i=pageIndex;i>=0;i--){if(i!==pageIndex&&this.searchMatches[i]){pageNumber=i;break;}}if(!pageNumber){for(var j=this.pdfViewerBase.pageCount-1;j>pageIndex;j--){if(this.searchMatches[j]){pageNumber=j;break;}}}}else{for(var i=pageIndex;i<this.pdfViewerBase.pageCount;i++){if(i!==pageIndex&&this.searchMatches[i]){pageNumber=i;break;}}if(!pageNumber){if(pageIndex===0){pageNumber=pageIndex;}else{for(var j=0;j<pageIndex;j++){if(this.searchMatches[j]){pageNumber=j;break;}}}}}return pageNumber;};TextSearch.prototype.highlightSearchedTexts=function(pageIndex,isSinglePageSearch,ArrayReturns){// eslint-disable-next-line
var matches=this.searchMatches[pageIndex];var scrollPoint={y:-100,x:-100};var className;var searchingText=this.searchString;// eslint-disable-next-line
var characterBounds=this.pdfViewerBase.textLayer.characterBound[pageIndex];if(isSinglePageSearch&&this.pdfViewerBase.currentPageNumber-1!==this.searchPageIndex){if(this.searchMatches.length>0){if(pageIndex===this.getSearchPage(this.pdfViewerBase.currentPageNumber-1)){}}}if(characterBounds){for(var i=0;i<matches.length;i++){if(matches[i].length!==undefined&&ArrayReturns!==undefined){if(i===this.searchIndex&&pageIndex===this.searchPageIndex){for(var j=0;j<ArrayReturns.length;j++){className='e-pv-search-text-highlight';this.searchString=ArrayReturns[j].trim();this.addDivForSearch(i,pageIndex,characterBounds,this.searchString.length,className,j);}}else{for(var j=0;j<ArrayReturns.length;j++){className='e-pv-search-text-highlightother';this.searchString=ArrayReturns[j].trim();this.addDivForSearch(i,pageIndex,characterBounds,this.searchString.length,className,j);}}}else if(i===this.searchIndex&&pageIndex===this.searchPageIndex){className='e-pv-search-text-highlight';}else{className='e-pv-search-text-highlightother';}if(matches[i].length==undefined){this.addDivForSearch(i,pageIndex,characterBounds,this.searchString.length,className,undefined);}}this.searchString=searchingText;if(pageIndex===this.searchPageIndex&&!isSinglePageSearch){var element=this.pdfViewerBase.getElement('_searchtext_'+pageIndex+'_'+this.searchIndex);if(element){var targetScrollElement=this.getScrollElement(element);this.scrollToSearchStr(targetScrollElement,scrollPoint);}else{this.pdfViewerBase.updateScrollTop(pageIndex);var element_1=this.pdfViewerBase.getElement('_searchtext_'+pageIndex+'_'+this.searchIndex);if(element_1){var targetScrollElement=this.getScrollElement(element_1);this.scrollToSearchStr(targetScrollElement,scrollPoint);}}}}};// eslint-disable-next-line
TextSearch.prototype.addDivForSearch=function(index,pageIndex,characterBounds,queryLength,className,nestedIndex){var textLayer=this.pdfViewerBase.getElement('_textLayer_'+pageIndex);if(sf.base.isNullOrUndefined(textLayer)&&className==='e-pv-search-text-highlight'){if(this.pdfViewer.navigation){this.pdfViewer.navigation.goToPage(pageIndex+1);}}var count;if(this.searchMatches[pageIndex][index].length!==undefined){count=this.searchMatches[pageIndex][index][nestedIndex];}else{count=this.searchMatches[pageIndex][index];}var initial=count;var divCount=0;while(count<initial+queryLength){count=this.addDivElement(count,characterBounds,queryLength,className,index,pageIndex,initial,divCount,nestedIndex);divCount++;}if(className==='e-pv-search-text-highlight'){this.showLoadingIndicator(false);}};// eslint-disable-next-line
TextSearch.prototype.addDivElement=function(count,characterBounds,queryLength,className,index,pageIndex,initial,divCount,nestedIndex){var height=0;var width=0;var top=0;var left=0;var isRTL=false;if(characterBounds[count]){left=characterBounds[count].X;top=characterBounds[count].Y;}var v=0;if(count-initial!==0){v=count-initial;queryLength+=1;}for(v=v;v<queryLength;v++){if(characterBounds[count]){// eslint-disable-next-line
var charBound=characterBounds[count];if(left>charBound.X){isRTL=true;}top=top<charBound.Y?top:charBound.Y;var topDifference=top<charBound.Y?charBound.Y-top:top-charBound.Y;height=height>topDifference+charBound.Height?height:topDifference+charBound.Height;count++;}}var isContinuation=false;if(!isRTL){if(initial+queryLength!==count){isContinuation=true;if(characterBounds[count-1]){width=characterBounds[count-1].X-left;}}else{isContinuation=false;// eslint-disable-next-line
var storedData=this.pdfViewerBase.getLinkInformation(pageIndex,true);var pageText=null;if(storedData){pageText=storedData['pageText'];}else if(this.pdfViewer.isExtractText&&this.documentTextCollection.length!==0){// eslint-disable-next-line
var documentIndex=this.documentTextCollection[pageIndex][pageIndex];pageText=documentIndex.pageText?documentIndex.pageText:documentIndex.PageText;}if(characterBounds[count]){if(pageText&&(pageText[count]===''||pageText[count]===' '||pageText[count]==='\r'||pageText[count]==='\n')&&characterBounds[count].Width===0){width=characterBounds[count-1].X-left+characterBounds[count-1].Width;}else{width=characterBounds[count].X-left;}}else{if(characterBounds[count-1]){width=characterBounds[count-1].X-left;}}}}else{var charBound=characterBounds[initial+queryLength-1];left=charBound.X;width=characterBounds[initial].X-characterBounds[initial+queryLength-1].X;top=top<charBound.Y?top:charBound.Y;var topDifference=top<charBound.Y?charBound.Y-top:top-charBound.Y;height=height>topDifference+charBound.Height?height:topDifference+charBound.Height;//some RTL character calculated width is zero and width difference value calculated from Y possition difference in the same line.
var widthDifference=characterBounds[initial-1].Y-characterBounds[initial].Y;for(var j=initial+queryLength-1;j>=initial;j--){charBound=characterBounds[j];if(charBound.Width===0){widthDifference=charBound.Y-characterBounds[j-1].Y;}}width=width+widthDifference;}this.createSearchTextDiv(index,pageIndex,height,width,top,left,className,isContinuation,divCount,nestedIndex);return count;};// eslint-disable-next-line
TextSearch.prototype.createSearchTextDiv=function(index,pageIndex,height,width,top,left,className,isContinuation,divCount,nestedIndex){var idString='_searchtext_'+pageIndex+'_'+index;if(isContinuation){idString+='_'+divCount;}if(nestedIndex!==undefined&&this.pdfViewerBase.getElement(idString)){var textDiv=sf.base.createElement('div',{id:this.pdfViewer.element.id+idString+"_"+nestedIndex});// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];this.calculateBounds(textDiv,height,width,top,left,pageDetails);textDiv.classList.add(className);if(className==='e-pv-search-text-highlight'){// eslint-disable-next-line max-len
textDiv.style.backgroundColor=this.pdfViewer.textSearchColorSettings.searchHighlightColor===''?'#fdd835':this.pdfViewer.textSearchColorSettings.searchHighlightColor;var bounds={left:left,top:top,width:width,height:height};this.pdfViewer.fireTextSearchHighlight(this.searchString,this.isMatchCase,bounds,pageIndex+1);}else if(className==='e-pv-search-text-highlightother'){// eslint-disable-next-line max-len
textDiv.style.backgroundColor=this.pdfViewer.textSearchColorSettings.searchColor===''?'#8b4c12':this.pdfViewer.textSearchColorSettings.searchColor;}var textLayer=this.pdfViewerBase.getElement('_textLayer_'+pageIndex);if(textLayer){textLayer.appendChild(textDiv);}}if(!this.pdfViewerBase.getElement(idString)){var textDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+idString});// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];this.calculateBounds(textDiv,height,width,top,left,pageDetails);textDiv.classList.add(className);if(className==='e-pv-search-text-highlight'){// eslint-disable-next-line max-len
textDiv.style.backgroundColor=this.pdfViewer.textSearchColorSettings.searchHighlightColor===''?'#fdd835':this.pdfViewer.textSearchColorSettings.searchHighlightColor;var bounds={left:left,top:top,width:width,height:height};this.pdfViewer.fireTextSearchHighlight(this.searchString,this.isMatchCase,bounds,pageIndex+1);}else if(className==='e-pv-search-text-highlightother'){// eslint-disable-next-line max-len
textDiv.style.backgroundColor=this.pdfViewer.textSearchColorSettings.searchColor===''?'#8b4c12':this.pdfViewer.textSearchColorSettings.searchColor;}var textLayer=this.pdfViewerBase.getElement('_textLayer_'+pageIndex);if(textLayer){textLayer.appendChild(textDiv);}}};// eslint-disable-next-line
TextSearch.prototype.calculateBounds=function(textDiv,height,width,top,left,pageDetails){if(pageDetails.rotation===0||pageDetails.rotation===2){textDiv.style.height=Math.ceil(height)*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.width=width*this.pdfViewerBase.getZoomFactor()+'px';if(pageDetails.rotation===2){textDiv.style.top=(pageDetails.height-top-height)*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.left=Math.ceil(pageDetails.width-left-width)*this.pdfViewerBase.getZoomFactor()+'px';}else{textDiv.style.top=top*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.left=left*this.pdfViewerBase.getZoomFactor()+'px';}}else if(pageDetails.rotation===1){textDiv.style.height=width*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.width=height*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.top=left*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.left=(pageDetails.height-top-height)*this.pdfViewerBase.getZoomFactor()+'px';}else if(pageDetails.rotation===3){textDiv.style.height=width*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.width=height*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.left=(pageDetails.width-pageDetails.height+top)*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.top=(pageDetails.height-left-width)*this.pdfViewerBase.getZoomFactor()+'px';}};TextSearch.prototype.isClassAvailable=function(){var isClass=false;for(var j=0;j<this.tempElementStorage.length;j++){if(this.tempElementStorage[j].classString){// eslint-disable-next-line max-len
if(this.tempElementStorage[j].classString==='e-pv-search-text-highlight'||this.tempElementStorage[j].classString==='e-pv-search-text-highlightother'){isClass=true;break;}}}return isClass;};TextSearch.prototype.getScrollElement=function(element){var targetElement=element;if(element.childNodes.length>0){for(var i=0;i<element.childNodes.length;i++){if(element.childNodes[i].classList){if(element.childNodes[i].classList.contains('e-pv-search-text-highlight')){targetElement=element.childNodes[i];}}}}return targetElement;};// eslint-disable-next-line
TextSearch.prototype.scrollToSearchStr=function(element,scrollPoint){var parent=element.offsetParent;var offsetY=element.offsetTop+element.clientTop;var offsetX=element.offsetLeft+element.clientLeft;while(parent.id!==this.pdfViewerBase.viewerContainer.id){offsetY+=parent.offsetTop;offsetX+=parent.offsetLeft;parent=parent.offsetParent;}if(scrollPoint){offsetY+=scrollPoint.y;offsetX+=scrollPoint.x;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){parent.scrollLeft=offsetX;}else{if(this.pdfViewerBase.getZoomFactor()>1.5){parent.scrollLeft=offsetX;}}}parent.scrollTop=offsetY;this.pdfViewerBase.updateMobileScrollerPosition();};/**
     * @param pageIndex
     * @private
     */TextSearch.prototype.resizeSearchElements=function(pageIndex){var searchDivs=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_searchtext_'+pageIndex+'"]');for(var i=0;i<searchDivs.length;i++){var textDiv=searchDivs[i];var previousZoomFactor=1;if(this.pdfViewer.magnificationModule){previousZoomFactor=this.pdfViewer.magnificationModule.previousZoomFactor;}// eslint-disable-next-line max-len
var outputdata=pageIndex+'_'+previousZoomFactor+'_'+this.pdfViewerBase.getZoomFactor();if(textDiv.getAttribute('name')!==outputdata){// eslint-disable-next-line
textDiv.style.width=parseFloat(textDiv.style.width)/previousZoomFactor*this.pdfViewerBase.getZoomFactor()+'px';// eslint-disable-next-line
textDiv.style.height=parseFloat(textDiv.style.height)/previousZoomFactor*this.pdfViewerBase.getZoomFactor()+'px';// eslint-disable-next-line
textDiv.style.top=parseFloat(textDiv.style.top)/previousZoomFactor*this.pdfViewerBase.getZoomFactor()+'px';// eslint-disable-next-line
textDiv.style.left=parseFloat(textDiv.style.left)/previousZoomFactor*this.pdfViewerBase.getZoomFactor()+'px';textDiv.setAttribute('name',outputdata);}}};/**
     * @param pageNumber
     * @private
     */TextSearch.prototype.highlightOtherOccurrences=function(pageNumber){this.initSearch(pageNumber,true);};TextSearch.prototype.highlightOthers=function(isSearched){var indexes=this.getIndexes();var lowerPageValue=parseFloat(indexes.lowerPageValue.toString());var higherPageValue=parseFloat(indexes.higherPageValue.toString());for(var i=lowerPageValue;i<=higherPageValue;i++){this.highlightOtherOccurrences(i);}if(isSearched){this.showLoadingIndicator(false);}};/**
     * @private
     */TextSearch.prototype.clearAllOccurrences=function(){var searchTextDivs=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_searchtext_"]');for(var i=0;i<searchTextDivs.length;i++){searchTextDivs[i].parentElement.removeChild(searchTextDivs[i]);}};/**
     * @private
     */ // eslint-disable-next-line
TextSearch.prototype.getIndexes=function(){var lowerPageValue=this.pdfViewerBase.currentPageNumber-3;lowerPageValue=lowerPageValue>0?lowerPageValue:0;var higherPageValue=this.pdfViewerBase.currentPageNumber+1;higherPageValue=higherPageValue<this.pdfViewerBase.pageCount?higherPageValue:this.pdfViewerBase.pageCount-1;return{lowerPageValue:lowerPageValue,higherPageValue:higherPageValue};};TextSearch.prototype.applyTextSelection=function(){if(this.pdfViewer.textSelectionModule&&!this.pdfViewerBase.isTextSelectionDisabled){var indexes=this.getIndexes();var lowerPageValue=parseFloat(indexes.lowerPageValue.toString());var higherPageValue=parseFloat(indexes.higherPageValue.toString());for(var i=lowerPageValue;i<=higherPageValue;i++){this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);}}};/**
     * @private
     */TextSearch.prototype.resetTextSearch=function(){this.resetVariables();this.onTextSearchClose();this.searchPageIndex=null;this.searchIndex=0;this.updateSearchInputIcon(true);this.enableNextButton(false);this.enablePrevButton(false);this.documentTextCollection=[];this.isTextRetrieved=false;this.isTextSearched=false;this.isSearchText=false;if(this.searchRequestHandler){this.searchRequestHandler.clear();}};TextSearch.prototype.onTextSearchClose=function(){this.isPrevSearch=false;this.isTextSearch=false;if(this.pdfViewerBase.pageCount>0){this.clearAllOccurrences();}};TextSearch.prototype.createRequestForSearch=function(pageIndex){var proxy=this;var viewPortWidth=816;var viewPortHeight=this.pdfViewer.element.clientHeight;var pageWidth=this.pdfViewerBase.pageSize[pageIndex].width;var pageHeight=this.pdfViewerBase.pageSize[pageIndex].height;var tileCount=this.pdfViewerBase.getTileCount(pageWidth);var noTileX=viewPortWidth>=pageWidth?1:tileCount;var noTileY=viewPortWidth>=pageWidth?1:tileCount;var isTileRendering=false;var tileSettings=this.pdfViewer.tileRenderingSettings;if(tileSettings.enableTileRendering&&tileSettings.x>0&&tileSettings.y>0){noTileX=viewPortWidth>=pageWidth?1:tileSettings.x;noTileY=viewPortWidth>=pageWidth?1:tileSettings.y;}if(noTileX>1&&noTileY>1){isTileRendering=true;}var _loop_1=function _loop_1(x){var _loop_2=function _loop_2(y){var jsonObject=void 0;// eslint-disable-next-line max-len
jsonObject={xCoordinate:x,yCoordinate:y,pageNumber:pageIndex,viewPortWidth:viewPortWidth,viewPortHeight:viewPortHeight,documentId:proxy.pdfViewerBase.getDocumentId(),hashId:proxy.pdfViewerBase.hashId,zoomFactor:proxy.pdfViewerBase.getZoomFactor(),tilecount:tileCount,action:'Search',elementId:proxy.pdfViewer.element.id,uniqueId:proxy.pdfViewerBase.documentId,tileXCount:noTileX,tileYCount:noTileY};if(this_1.pdfViewerBase.jsonDocumentId){// eslint-disable-next-line
jsonObject.documentId=this_1.pdfViewerBase.jsonDocumentId;}var zoomFactor=this_1.pdfViewerBase.retrieveCurrentZoomFactor();this_1.searchRequestHandler=new AjaxHandler(this_1.pdfViewer);this_1.searchRequestHandler.url=this_1.pdfViewer.serviceUrl+'/'+this_1.pdfViewer.serverActionSettings.renderPages;this_1.searchRequestHandler.responseType='json';var hyperlinkId=this_1.pdfViewerBase.documentId+'_'+pageIndex+'_hyperlinkAndLinkAnnotation';if(sf.base.isNullOrUndefined(this_1.pdfViewerBase.hyperlinkAndLinkAnnotation)||sf.base.isNullOrUndefined(this_1.pdfViewerBase.hyperlinkAndLinkAnnotation[hyperlinkId])){this_1.searchRequestHandler.send(jsonObject);}// eslint-disable-next-line
this_1.searchRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){proxy.pdfViewerBase.onControlError(500,data,this.pdfViewer.serverActionSettings.renderPages);data=null;}}if(data){if(data.uniqueId===proxy.pdfViewerBase.documentId){proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,data);var pageNumber=data.pageNumber!==undefined?data.pageNumber:pageIndex;var storeObject={hyperlinks:data['hyperlinks'],hyperlinkBounds:data['hyperlinkBounds'],linkAnnotation:data['linkAnnotation'],linkPage:data['linkPage'],annotationLocation:data['annotationLocation'],width:data['width'],rotation:data['rotation'],scaleFactor:data['scaleFactor'],uniqueId:data['uniqueId'],zoomFactor:data['zoomFactor']};if(proxy.pdfViewerBase.pageSize[pageNumber]){// eslint-disable-next-line
proxy.pdfViewerBase.pageSize[pageNumber].rotation=parseFloat(data['rotation']);}proxy.pdfViewerBase.hyperlinkAndLinkAnnotation[proxy.pdfViewerBase.documentId+'_'+pageNumber+'_hyperlinkAndLinkAnnotation']=JSON.stringify(storeObject);}}}};// eslint-disable-next-line
this_1.searchRequestHandler.onFailure=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,this.pdfViewer.serverActionSettings.renderPages);};// eslint-disable-next-line
this_1.searchRequestHandler.onError=function(result){proxy.pdfViewerBase.openNotificationPopup();// eslint-disable-next-line max-len
proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,this.pdfViewer.serverActionSettings.renderPages);};var textDetailsId=this_1.pdfViewerBase.documentId+'_'+pageIndex+'_textDetails';var isTextNeed=this_1.pdfViewerBase.pageTextDetails?this_1.pdfViewerBase.pageTextDetails[textDetailsId]?false:true:true;if(viewPortWidth>=pageWidth||!this_1.pdfViewer.tileRenderingSettings.enableTileRendering){this_1.pdfViewerBase.pdfViewerRunner.postMessage({pageIndex:pageIndex,message:'renderPage',zoomFactor:proxy.pdfViewer.magnificationModule.zoomFactor,isTextNeed:isTextNeed});}else{this_1.pdfViewerBase.pdfViewerRunner.postMessage({pageIndex:pageIndex,message:'renderImageAsTile',zoomFactor:zoomFactor,tileX:x,tileY:y,tileXCount:noTileX,tileYCount:noTileY,isTextNeed:isTextNeed});}this_1.pdfViewerBase.pdfViewerRunner.onmessage=function(event){switch(event.data.message){case'imageRendered':if(event.data.message==='imageRendered'){var canvas=document.createElement('canvas');var data=event.data;var value=data.value;var width=data.width;var height=data.height;var pageIndex_1=data.pageIndex;canvas.width=width;canvas.height=height;var canvasContext=canvas.getContext('2d');var imageData=canvasContext.createImageData(width,height);imageData.data.set(value);canvasContext.putImageData(imageData,0,0);var imageUrl=canvas.toDataURL();var textBounds=data.textBounds;var textContent=data.textContent;var pageText=data.pageText;var rotation=data.rotation;var characterBounds=data.characterBounds;var pdfiumData={image:imageUrl,pageNumber:pageIndex_1,uniqueId:proxy.pdfViewerBase.documentId,pageWidth:width,zoomFactor:zoomFactor};if(isTextNeed){pdfiumData.textBounds=textBounds;pdfiumData.textContent=textContent;pdfiumData.rotation=rotation;pdfiumData.pageText=pageText;proxy.pdfViewerBase.storeTextDetails(pageIndex_1,textBounds,textContent,pageText,rotation,characterBounds);}if(pdfiumData&&pdfiumData.image&&pdfiumData.uniqueId===proxy.pdfViewerBase.documentId){proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages,pdfiumData);var pageNumber=pdfiumData.pageNumber!==undefined?pdfiumData.pageNumber:pageIndex_1;var blobObj=proxy.pdfViewerBase.createBlobUrl(pdfiumData.image.split('base64,')[1],'image/png');var Url=URL||webkitURL;var blobUrl=Url.createObjectURL(blobObj);var storeObject={image:blobUrl,width:pdfiumData.pageWidth,uniqueId:pdfiumData.uniqueId,zoomFactor:pdfiumData.zoomFactor};proxy.pdfViewerBase.storeImageData(pageNumber,storeObject);if(!isTileRendering){proxy.initSearch(pageIndex_1,false);}else{if(x===noTileX-1&&y===noTileY-1){proxy.initSearch(pageIndex_1,false);}}}}break;case'renderTileImage':if(event.data.message==='renderTileImage'){var canvas=document.createElement('canvas');var _a=event.data,value=_a.value,w=_a.w,h=_a.h,noTileX_1=_a.noTileX,noTileY_1=_a.noTileY,x_1=_a.x,y_1=_a.y,pageIndex_2=_a.pageIndex;canvas.setAttribute('height',h);canvas.setAttribute('width',w);canvas.width=w;canvas.height=h;var canvasContext=canvas.getContext('2d');var imageData=canvasContext.createImageData(w,h);imageData.data.set(value);canvasContext.putImageData(imageData,0,0);var imageUrl=canvas.toDataURL();var tileWidth=w;var tileHeight=h;var textBounds=event.data.textBounds;var textContent=event.data.textContent;var pageText=event.data.pageText;var rotation=event.data.rotation;var characterBounds=event.data.characterBounds;var tileData={image:imageUrl,noTileX:noTileX_1,noTileY:noTileY_1,pageNumber:pageIndex_2,tileX:x_1,tileY:y_1,uniqueId:proxy.pdfViewerBase.documentId,pageWidth:pageWidth,width:tileWidth,transformationMatrix:{Values:[1,0,0,1,tileWidth*x_1,tileHeight*y_1,0,0,0]},zoomFactor:proxy.pdfViewerBase.retrieveCurrentZoomFactor()};if(tileData&&tileData.image&&tileData.uniqueId===proxy.pdfViewerBase.documentId){proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages,tileData);var pageNumber=tileData.pageNumber!==undefined?tileData.pageNumber:pageIndex_2;if(x_1==0&&y_1==0){var blobObj=proxy.pdfViewerBase.createBlobUrl(tileData.image.split('base64,')[1],'image/png');var Url=URL||webkitURL;var blobUrl=Url.createObjectURL(blobObj);var storeObject={// eslint-disable-next-line
image:blobUrl,width:tileData.pageWidth,uniqueId:tileData.uniqueId,tileX:tileData.tileX,tileY:tileData.tileY,zoomFactor:tileData.zoomFactor};if(isTextNeed){tileData.textBounds=textBounds;tileData.textContent=textContent;tileData.rotation=rotation;tileData.pageText=pageText;proxy.pdfViewerBase.storeTextDetails(pageIndex_2,textBounds,textContent,pageText,rotation,characterBounds);}else{var textDetails=JSON.parse(proxy.pdfViewerBase.pageTextDetails[textDetailsId]);tileData.textBounds=textDetails.textBounds;tileData.textContent=textDetails.textContent;tileData.rotation=textDetails.rotation;tileData.pageText=textDetails.pageText;}proxy.pdfViewerBase.storeImageData(pageNumber,storeObject,tileData.tileX,tileData.tileY);}else{var blobObj=proxy.pdfViewerBase.createBlobUrl(tileData.image.split('base64,')[1],'image/png');var Url=URL||webkitURL;var blobUrl=Url.createObjectURL(blobObj);var storeObject={// eslint-disable-next-line
image:blobUrl,width:tileData.pageWidth,uniqueId:tileData.uniqueId,tileX:tileData.tileX,tileY:tileData.tileY,zoomFactor:tileData.zoomFactor};proxy.pdfViewerBase.storeImageData(pageNumber,storeObject,tileData.tileX,tileData.tileY);}if(x_1===noTileX_1-1&&y_1===noTileY_1-1){proxy.initSearch(pageIndex_2,false);}}}break;default:console.log('Unknown message type:',event.data.message);}};};for(var y=0;y<noTileY;y++){_loop_2(y);}};var this_1=this;for(var x=0;x<noTileX;x++){_loop_1(x);}};/**
     * @private
     */TextSearch.prototype.getPDFDocumentTexts=function(){var startIndex=0;var endIndex=50;var pageCount=this.pdfViewerBase.pageCount;if(endIndex>=pageCount){endIndex=pageCount;}this.createRequestForGetPdfTexts(startIndex,endIndex);};/**
     * @param startIndex
     * @param endIndex
     * @private
     */TextSearch.prototype.createRequestForGetPdfTexts=function(startIndex,endIndex){var proxy=this;var jsonObject;// eslint-disable-next-line max-len
jsonObject={pageStartIndex:startIndex,pageEndIndex:endIndex,documentId:proxy.pdfViewerBase.getDocumentId(),hashId:proxy.pdfViewerBase.hashId,action:'RenderPdfTexts',elementId:proxy.pdfViewer.element.id,uniqueId:proxy.pdfViewerBase.documentId};if(this.pdfViewerBase.jsonDocumentId){// eslint-disable-next-line
jsonObject.documentId=this.pdfViewerBase.jsonDocumentId;}this.searchRequestHandler=new AjaxHandler(this.pdfViewer);this.searchRequestHandler.url=this.pdfViewer.serviceUrl+'/'+this.pdfViewer.serverActionSettings.renderTexts;this.searchRequestHandler.responseType='json';this.searchRequestHandler.send(jsonObject);// eslint-disable-next-line
this.searchRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){proxy.pdfViewerBase.onControlError(500,data,this.pdfViewer.serverActionSettings.renderTexts);data=null;}}if(data){if(data.documentTextCollection&&data.uniqueId===proxy.pdfViewerBase.documentId){proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderTexts,data);if(proxy.documentTextCollection.length>0){proxy.documentTextCollection=data.documentTextCollection.concat(proxy.documentTextCollection);proxy.documentTextCollection=proxy.orderPdfTextCollections(proxy.documentTextCollection);}else{proxy.documentTextCollection=data.documentTextCollection;}var pageCount=proxy.pdfViewerBase.pageCount;if(endIndex!==pageCount){startIndex=endIndex;endIndex=endIndex+50;if(endIndex>=pageCount){endIndex=pageCount;}proxy.createRequestForGetPdfTexts(startIndex,endIndex);}else{proxy.isTextRetrieved=true;proxy.pdfViewer.fireTextExtractionCompleted(proxy.documentTextCollection);if(proxy.isTextSearched&&proxy.searchString.length>0){proxy.textSearch(proxy.searchString);proxy.isTextSearched=false;}}}}}};// eslint-disable-next-line
this.searchRequestHandler.onFailure=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,this.pdfViewer.serverActionSettings.renderTexts);};// eslint-disable-next-line
this.searchRequestHandler.onError=function(result){proxy.pdfViewerBase.openNotificationPopup();proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,this.pdfViewer.serverActionSettings.renderTexts);};};// eslint-disable-next-line
TextSearch.prototype.orderPdfTextCollections=function(oldCollection){// eslint-disable-next-line
var annotationCollectionList=[];for(var i=0;i<oldCollection.length;i++){if(annotationCollectionList.length===0){annotationCollectionList.push(oldCollection[i]);}else{// eslint-disable-next-line
if(parseInt(Object.keys(oldCollection[i])[0])>parseInt(Object.keys(annotationCollectionList[annotationCollectionList.length-1])[0])){annotationCollectionList.push(oldCollection[i]);}else{for(var j=0;j<annotationCollectionList.length;j++){// eslint-disable-next-line
if(parseInt(Object.keys(oldCollection[i])[0])<parseInt(Object.keys(annotationCollectionList[j])[0])){annotationCollectionList.splice(j,0,oldCollection[i]);break;}}}}}return annotationCollectionList;};TextSearch.prototype.createSearchBoxButtons=function(id,className){// eslint-disable-next-line max-len
var button=sf.base.createElement('button',{id:this.pdfViewer.dataId+'_'+id,className:'e-btn e-icon-btn e-pv-search-btn '+className});button.setAttribute('type','button');// eslint-disable-next-line max-len
var iconSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_'+id+'Icon',className:'e-pv-icon-search '+className+'-icon'});button.disabled=true;button.appendChild(iconSpan);return button;};TextSearch.prototype.enablePrevButton=function(isEnable){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(isEnable){this.prevSearchBtn.removeAttribute('disabled');}else{if(this.prevSearchBtn){this.prevSearchBtn.disabled=true;}}}};TextSearch.prototype.enableNextButton=function(isEnable){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(isEnable){this.nextSearchBtn.removeAttribute('disabled');}else{if(this.nextSearchBtn){this.nextSearchBtn.disabled=true;}}}};/**
     * @private
     */TextSearch.prototype.resetVariables=function(){this.searchedPages=[];// eslint-disable-next-line
this.searchMatches=new Array();};/**
     * @param element
     * @param inputElement
     * @private
     */TextSearch.prototype.searchButtonClick=function(element,inputElement){this.isMessagePopupOpened=false;if(sf.base.isBlazor()&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var searchElement=this.pdfViewerBase.getElement('_search_box-icon');element=searchElement.children[0].children[0];inputElement=this.pdfViewerBase.getElement('_search_input');}if(element.classList.contains('e-pv-search-icon')){this.initiateTextSearch(inputElement);}else if(element.classList.contains('e-pv-search-close')){this.showLoadingIndicator(false);inputElement.value='';this.resetTextSearch();inputElement.focus();}};TextSearch.prototype.updateSearchInputIcon=function(isEnable){if(sf.base.isBlazor()){if(this.searchBtn&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.searchBtn=this.pdfViewerBase.getElement('_search_box-icon').children[0].children[0];}}if(this.searchBtn){if(isEnable){this.searchBtn.classList.remove('e-pv-search-close');this.searchBtn.classList.add('e-pv-search-icon');}else{this.searchBtn.classList.remove('e-pv-search-icon');this.searchBtn.classList.add('e-pv-search-close');}}};TextSearch.prototype.onMessageBoxOpen=function(){var _this=this;this.showLoadingIndicator(false);this.pdfViewerBase.getElement('_search_input').blur();this.isMessagePopupOpened=true;if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(sf.base.isBlazor()){var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_Nomatches');promise.then(function(value){_this.pdfViewerBase.textLayer.createNotificationPopup(value);});}else{this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));}}else{if(sf.base.isBlazor()){var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_NoTextFound');promise.then(function(value){_this.pdfViewerBase.navigationPane.createTooltipMobile(value,true);});}else{this.pdfViewerBase.navigationPane.createTooltipMobile(this.pdfViewer.localeObj.getConstant('No Text Found'));}}};/**
     * Searches the target text in the PDF document and highlights the occurrences in the pages
     *
     * @param  {string} searchText - Specifies the searchText content
     * @param  {boolean} isMatchCase - If set true , its highlights the MatchCase content
     * @returns void
     */TextSearch.prototype.searchText=function(searchText,isMatchCase){if(searchText&&searchText.length>0&&searchText[searchText.length-1]===' '){searchText=searchText.slice(0,searchText.length-1);}this.searchString=searchText;this.isMatchCase=isMatchCase;if(this.isTextSearch){this.resetVariables();this.clearAllOccurrences();}this.searchIndex=0;this.textSearch(searchText);};/**
     * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer.
     *
     * @returns void
     */TextSearch.prototype.searchNext=function(){this.nextSearch();};/**
     * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer.
     *
     * @returns void
     */TextSearch.prototype.searchPrevious=function(){this.prevSearch();};/**
     * Cancels the text search of the PdfViewer.
     *
     * @returns void
     */TextSearch.prototype.cancelTextSearch=function(){this.resetTextSearch();};/**
     * @private
     */TextSearch.prototype.destroy=function(){this.searchMatches=undefined;};/**
     * @private
     */TextSearch.prototype.getModuleName=function(){return'TextSearch';};return TextSearch;}();/**
 * export types
 */ /**
 * Print module
 */var Print=/** @class */function(){/**
     * @param viewer
     * @param base
     * @private
     */function Print(viewer,base){this.pdfViewer=viewer;this.pdfViewerBase=base;}/**
     * Print the PDF document being loaded in the ejPdfViewer control.
     *
     * @returns void
     */Print.prototype.print=function(){if(this.pdfViewerBase.pageCount>0){// eslint-disable-next-line max-len
this.printViewerContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_print_viewer_container',className:'e-pv-print-viewer-container'});if(this.pdfViewer.printMode==='Default'){this.pdfViewerBase.showPrintLoadingIndicator(true);this.iframe=document.createElement('iframe');this.iframe.className='iframeprint';this.iframe.id='iframePrint';this.iframe.style.position='fixed';this.iframe.style.top='-100000000px';document.body.appendChild(this.iframe);this.frameDoc=this.iframe.contentWindow?this.iframe.contentWindow:this.iframe.contentDocument;this.frameDoc.document.open();}else{this.printWindow=window.open('','print','height='+window.outerHeight+',width='+window.outerWidth+',tabbar=no');this.printWindow.moveTo(0,0);this.printWindow.resizeTo(screen.availWidth,screen.availHeight);this.createPrintLoadingIndicator(this.printWindow.document.body);}window.customStampCollection=new Map();var annotationIndex_1=0;var annotationCollection=this.pdfViewer.annotationCollection;var isCustomStampPresent=false;var customStampCount_1=0;var annotationCount_1=0;var _this_1=this;if(!this.pdfViewer.annotationSettings.skipPrint){if(annotationCollection&&annotationCollection.length>0){annotationCount_1=this.pdfViewer.annotationCollection.length;for(annotationIndex_1=0;annotationIndex_1<annotationCollection.length;annotationIndex_1++){if(annotationCollection[annotationIndex_1].stampAnnotationType&&annotationCollection[annotationIndex_1].stampAnnotationType=="image"){if(annotationCollection[annotationIndex_1].stampAnnotationPath){var customStampImage=new Image();customStampImage.src=annotationCollection[annotationIndex_1].stampAnnotationPath;customStampCount_1++;isCustomStampPresent=true;window.customStampCollection.set(annotationCollection[annotationIndex_1].annotationId,customStampImage);customStampImage.onload=function(){customStampCount_1--;if(customStampCount_1==0&&annotationIndex_1==annotationCount_1){_this_1.callPrintAction();}};}else{var annotationCollections=this.pdfViewerBase.documentAnnotationCollections;var stampCollections=annotationCollections[annotationCollection[annotationIndex_1].pageNumber].stampAnnotations;if(stampCollections&&stampCollections.length>0){for(var stampPageIndex=0;stampPageIndex<stampCollections.length;stampPageIndex++){if(stampCollections[stampPageIndex].Apperarance&&stampCollections[stampPageIndex].Apperarance['2']&&stampCollections[stampPageIndex].Apperarance['2'].imagedata){var customStampImage=new Image();customStampImage.src=stampCollections[stampPageIndex].Apperarance['2'].imagedata;customStampCount_1++;isCustomStampPresent=true;window.customStampCollection.set(stampCollections[stampPageIndex].AnnotName,customStampImage);customStampImage.onload=function(){customStampCount_1--;if(customStampCount_1==0&&annotationIndex_1==annotationCount_1){_this_1.callPrintAction();}};}}}}}}if(!isCustomStampPresent&&annotationIndex_1==annotationCount_1){this.callPrintAction();}}else if(!isCustomStampPresent&&annotationIndex_1==annotationCount_1){this.callPrintAction();}}else if(!isCustomStampPresent&&annotationIndex_1==annotationCount_1){this.callPrintAction();}}};Print.prototype.callPrintAction=function(){var _this_1=this;setTimeout(function(){for(var pageIndex=0;pageIndex<_this_1.pdfViewerBase.pageCount;pageIndex++){var pageWidth=_this_1.pdfViewerBase.pageSize[pageIndex].width;var pageHeight=_this_1.pdfViewerBase.pageSize[pageIndex].height;_this_1.pdfViewer.printModule.createRequestForPrint(pageIndex,pageWidth,pageHeight,_this_1.pdfViewerBase.pageCount,_this_1.pdfViewer.printScaleFactor);}_this_1.pdfViewer.firePrintEnd(_this_1.pdfViewer.downloadFileName);},100);};Print.prototype.createRequestForPrint=function(pageIndex,pageWidth,pageHeight,pageCount,printScaleFactor){var proxy=this;// tslint: disable-next-line:max-line-length
// set default zoomFactor value.
// BLAZ-25661 - We have use the window.devicePixelRatio to default printDevicePixelRatio as 2 for improve the print quality of image.
var printDevicePixelRatio=2;var jsonObject={pageNumber:pageIndex,documentId:this.pdfViewerBase.documentId,hashId:this.pdfViewerBase.hashId,zoomFactor:printDevicePixelRatio,action:'PrintImages',elementId:this.pdfViewer.dataId,uniqueId:this.pdfViewerBase.documentId};if(this.pdfViewerBase.jsonDocumentId){// eslint-disable-next-line
jsonObject.documentId=this.pdfViewerBase.jsonDocumentId;}proxy.pdfViewerBase.createFormfieldsJsonData();proxy.printRequestHandler=new AjaxHandler(proxy.pdfViewer);proxy.printRequestHandler.url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.print;proxy.printRequestHandler.responseType=null;proxy.printRequestHandler.mode=false;if(this.pdfViewerBase.validateForm&&this.pdfViewer.enableFormFieldsValidation){this.pdfViewer.fireValidatedFailed(proxy.pdfViewer.serverActionSettings.download);this.pdfViewerBase.validateForm=false;this.pdfViewerBase.showPrintLoadingIndicator(false);}else{this.pdfViewerBase.pdfViewerRunner.postMessage({pageIndex:pageIndex,message:'printImage',printScaleFactor:printScaleFactor>=1?printScaleFactor:1,printDevicePixelRatio:printDevicePixelRatio});}// eslint-disable-next-line
this.printRequestHandler.onFailure=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.print);};// eslint-disable-next-line
this.printRequestHandler.onError=function(result){proxy.pdfViewerBase.openNotificationPopup();proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.print);};};Print.prototype.printOnmessage=function(event){var canvas=document.createElement('canvas');var _a=event.data,value=_a.value,width=_a.width,height=_a.height,pageIndex=_a.pageIndex,pageWidth=_a.pageWidth,pageHeight=_a.pageHeight,printDevicePixelRatio=_a.printDevicePixelRatio;canvas.width=width;canvas.height=height;var canvasContext=canvas.getContext('2d');var imageData=canvasContext.createImageData(width,height);imageData.data.set(value);canvasContext.putImageData(imageData,0,0);var imageUrl=canvas.toDataURL();var data={image:imageUrl,pageNumber:pageIndex,uniqueId:this.pdfViewerBase.documentId,pageWidth:width};this.printSuccess(data,pageWidth,pageHeight,pageIndex,printDevicePixelRatio);};Print.prototype.printSuccess=function(result,pageWidth,pageHeight,pageIndex,printDevicePixelRatio){var _this_1=this;this.pdfViewerBase.isPrint=true;// eslint-disable-next-line
var printImage=result;if(printImage){if(_typeof(printImage)!=='object'){try{printImage=JSON.parse(printImage);if(_typeof(printImage)!=='object'){this.pdfViewerBase.onControlError(500,printImage,this.pdfViewer.serverActionSettings.print);printImage=null;}}catch(error){this.pdfViewerBase.onControlError(500,printImage,this.pdfViewer.serverActionSettings.print);printImage=null;}}}if(printImage&&printImage.uniqueId===this.pdfViewerBase.documentId){this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.print,printImage);var annotationSource_1='';if(!this.pdfViewer.annotationSettings.skipPrint){// eslint-disable-next-line
var annotationCollections=this.pdfViewerBase.documentAnnotationCollections;if(annotationCollections&&annotationCollections[printImage.pageNumber]&&this.pdfViewerBase.isTextMarkupAnnotationModule()){// eslint-disable-next-line
var printCollection=annotationCollections[printImage.pageNumber];if(this.pdfViewerBase.isImportAction){var textMarkupAnnotation=printCollection.textMarkupAnnotation;var shapeAnnotation=printCollection.shapeAnnotation;var measureShapeAnnotation=printCollection.measureShapeAnnotation;var stampAnnotation=printCollection.stampAnnotations;// eslint-disable-next-line
var stickyNoteAnnotation=printCollection.stickyNotesAnnotation;// eslint-disable-next-line max-len
annotationSource_1=this.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(textMarkupAnnotation,printImage.pageNumber,stampAnnotation,shapeAnnotation,measureShapeAnnotation,stickyNoteAnnotation);}else{// eslint-disable-next-line max-len
annotationSource_1=this.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(printCollection.textMarkupAnnotation,printImage.pageNumber,printCollection.stampAnnotations,printCollection.shapeAnnotation,printCollection.measureShapeAnnotation,printCollection.stickyNoteAnnotation);}}if(this.pdfViewerBase.isAnnotationCollectionRemoved){// eslint-disable-next-line max-len
annotationSource_1=this.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(null,printImage.pageNumber,null,null,null,null);}}var currentPageNumber_1=printImage.pageNumber;// eslint-disable-next-line max-len
this.printCanvas=sf.base.createElement('canvas',{id:this.pdfViewer.element.id+'_printCanvas_'+pageIndex,className:'e-pv-print-canvas'});this.printCanvas.style.width=pageWidth+'px';this.printCanvas.style.height=pageHeight+'px';var printScaleValue=1.5;//An A0 piece of paper measures 33.1  46.8 inches, with 46.8 inches being the greater dimension. The pixel value of 46.8 inches is 4493px. If the document size is too large, we may not be able to display the image. Therefore, we should consider the maximum size of A0 paper if the page size is greater than 4493 pixels.
var maxPageSize=4493;var whichIsBigger=pageWidth>pageHeight?'Width':'Height';var maxWidth=pageWidth;var maxHeight=pageHeight;if(whichIsBigger==='Width'){maxWidth=pageWidth>maxPageSize?maxPageSize:pageWidth;if(maxWidth===maxPageSize){maxHeight=pageHeight/(pageWidth/maxPageSize);}}else{maxHeight=pageHeight>maxPageSize?maxPageSize:pageHeight;if(maxHeight===maxPageSize){maxWidth=pageWidth/(pageHeight/maxPageSize);}}if(pageHeight<pageWidth&&this.pdfViewer.enablePrintRotation){this.printCanvas.height=pageWidth*printScaleValue*printDevicePixelRatio;this.printCanvas.width=pageHeight*printScaleValue*printDevicePixelRatio;}else{this.printCanvas.height=maxHeight*printScaleValue*printDevicePixelRatio;this.printCanvas.width=maxWidth*printScaleValue*printDevicePixelRatio;}var context_1=this.printCanvas.getContext('2d');var pageImage_1=new Image();var annotationImage_1=new Image();pageImage_1.onload=function(){if(pageHeight>pageWidth||!_this_1.pdfViewer.enablePrintRotation){context_1.drawImage(pageImage_1,0,0,_this_1.printCanvas.width,_this_1.printCanvas.height);if(annotationSource_1){context_1.drawImage(annotationImage_1,0,0,_this_1.printCanvas.width,_this_1.printCanvas.height);}}else{// translate to center canvas
context_1.translate(_this_1.printCanvas.width*0.5,_this_1.printCanvas.height*0.5);// rotate the canvas to - 90 degree
context_1.rotate(-0.5*Math.PI);// un translate the canvas back to origin
context_1.translate(-_this_1.printCanvas.height*0.5,-_this_1.printCanvas.width*0.5);// draw the image
context_1.drawImage(pageImage_1,0,0,_this_1.printCanvas.height,_this_1.printCanvas.width);if(annotationSource_1){context_1.drawImage(annotationImage_1,0,0,_this_1.printCanvas.height,_this_1.printCanvas.width);}}if(currentPageNumber_1===_this_1.pdfViewerBase.pageCount-1){_this_1.printWindowOpen();}_this_1.pdfViewer.renderDrawing(null,currentPageNumber_1);};pageImage_1.src=printImage.image;annotationImage_1.src=annotationSource_1;this.printViewerContainer.appendChild(this.printCanvas);this.pdfViewerBase.isPrint=false;}};// eslint-disable-next-line
Print.prototype.renderFieldsForPrint=function(pageIndex,heightRatio,widthRatio){// eslint-disable-next-line
var data=null;if(this.pdfViewer.formFieldsModule){data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');}var targetField;if(this.pdfViewer.printMode==='Default'){targetField=this.frameDoc.document.getElementById('fields_'+pageIndex);}else{targetField=this.printWindow.document.getElementById('fields_'+pageIndex);}if(data){// eslint-disable-next-line
var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){// eslint-disable-next-line
var currentData=formFieldsData[i];// eslint-disable-next-line
if(parseFloat(currentData['PageIndex'])===pageIndex){// eslint-disable-next-line
var field=this.pdfViewer.formFieldsModule.createFormFields(currentData,pageIndex,i,targetField);// eslint-disable-next-line
var inputField=field.currentField;inputField=inputField&&inputField.inputField?inputField.inputField:inputField;if(inputField){// eslint-disable-next-line
var bounds=currentData['LineBounds'];// eslint-disable-next-line
var font=currentData['Font'];this.applyPosition(inputField,bounds,font,heightRatio,widthRatio);inputField.InsertSpaces=currentData.InsertSpaces;if(inputField.InsertSpaces){// eslint-disable-next-line
var font_1=parseInt(inputField.style.width)/inputField.maxLength-parseFloat(inputField.style.fontSize)/2-0.6;inputField.style.letterSpacing=''+font_1+'px';inputField.style.fontFamily='monospace';}// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];if(pageDetails.width>pageDetails.height&&this.pdfViewer.enablePrintRotation){inputField.style.transform='rotate(-90deg)';var previousLeft=parseFloat(inputField.style.left);var currentWidthPosition=parseFloat(inputField.style.width)/2;var currentHeightPosition=parseFloat(inputField.style.height)/2;var currentTop=parseFloat(inputField.style.top);var currentHeight=parseFloat(inputField.style.height);inputField.style.left=currentHeightPosition-currentWidthPosition+currentTop+'px';inputField.style.top=pageDetails.width/widthRatio-currentHeight/heightRatio-(currentWidthPosition/heightRatio-currentHeightPosition/heightRatio+previousLeft)+'px';}if(currentData['Name']==='Textbox'||currentData['Name']==='Password'||currentData['Name']==='DropDown'||currentData['Name']==='ListBox'){inputField.style.backgroundColor='white';}else{inputField.style.backgroundColor='transparent';}if(!currentData.IsSignatureField){inputField.style.borderColor='transparent';}targetField.appendChild(inputField);}}}}var formDesignerData=null;if(this.pdfViewer.formDesignerModule){formDesignerData=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');}if(formDesignerData){var formDesignerFieldsData=JSON.parse(formDesignerData);for(var i=0;i<formDesignerFieldsData.length;i++){// eslint-disable-next-line
var currentData=formDesignerFieldsData[i].FormField;if(currentData.pageNumber-1===pageIndex&&currentData.isPrint){var signatureField=this.pdfViewer.nameTable[formDesignerFieldsData[i].Key.split("_")[0]];var element=signatureField.wrapper.children[0];var htmlElement=void 0;if(element){if(currentData.formFieldAnnotationType==="RadioButton"){for(var j=0;j<currentData.radiobuttonItem.length;j++){signatureField=this.pdfViewer.nameTable[currentData.radiobuttonItem[j].id.split("_")[0]];htmlElement=this.createFormDesignerFields(currentData.radiobuttonItem[j],element,signatureField);if(htmlElement){// eslint-disable-next-line
var bounds=currentData.radiobuttonItem[j].lineBound;// eslint-disable-next-line
var font=currentData.radiobuttonItem[j].fontFamily;this.applyPosition(htmlElement,bounds,font,heightRatio,widthRatio,true,currentData.radiobuttonItem[j].zoomValue);targetField.appendChild(htmlElement);}}}else{htmlElement=this.createFormDesignerFields(currentData,element,signatureField);if(htmlElement){// eslint-disable-next-line
var bounds=currentData.lineBound;// eslint-disable-next-line
var font=currentData.fontFamily;this.applyPosition(htmlElement,bounds,font,heightRatio,widthRatio,true,currentData.zoomValue);targetField.appendChild(htmlElement);}}}}}}};Print.prototype.createFormDesignerFields=function(currentData,element,signatureField){var htmlElement;var parentHtmlElement;var parentHtmlElementAttribute={'id':"form_field_"+element.id+'_html_element','class':'foreign-object'};parentHtmlElement=this.pdfViewer.formDesignerModule.createHtmlElement('div',parentHtmlElementAttribute);var HtmlElementAttribute={'id':element.id+'_html_element','class':'foreign-object'};htmlElement=this.pdfViewer.formDesignerModule.createHtmlElement('div',HtmlElementAttribute);if(currentData.formFieldAnnotationType==="SignatureField"||currentData.formFieldAnnotationType==="InitialField"){this.pdfViewer.formDesignerModule.disableSignatureClickEvent=true;element.template=htmlElement.appendChild(this.pdfViewer.formDesignerModule.createSignatureDialog(this.pdfViewer,signatureField,null,true));this.pdfViewer.formDesignerModule.disableSignatureClickEvent=false;}else if(currentData.formFieldAnnotationType==="DropdownList"){element.template=htmlElement.appendChild(this.pdfViewer.formDesignerModule.createDropDownList(element,signatureField));}else if(currentData.formFieldAnnotationType==="ListBox"){element.template=htmlElement.appendChild(this.pdfViewer.formDesignerModule.createListBox(element,signatureField));}else{element.template=htmlElement.appendChild(this.pdfViewer.formDesignerModule.createInputElement(currentData.formFieldAnnotationType,signatureField,null,true));}parentHtmlElement.appendChild(htmlElement);return htmlElement;};/**
     * @param inputField
     * @param bounds
     * @param font
     * @param heightRatio
     * @param widthRatio
     * @param inputField
     * @param bounds
     * @param font
     * @param heightRatio
     * @param widthRatio
     * @private
     */ // eslint-disable-next-line
Print.prototype.applyPosition=function(inputField,bounds,font,heightRatio,widthRatio,isFormDesignerField,zoomValue){if(bounds){var left=isFormDesignerField?bounds.X/zoomValue/widthRatio:this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.X)/widthRatio;var top_1=isFormDesignerField?bounds.Y/zoomValue/heightRatio:this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Y)/heightRatio;var width=isFormDesignerField?bounds.Width/zoomValue/widthRatio:this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Width)/widthRatio;var height=isFormDesignerField?bounds.Height/zoomValue/heightRatio:this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Height)/heightRatio;var fontHeight=0;if(font!==null&&font.Height){inputField.style.fontFamily=font.Name;if(font.Italic){inputField.style.fontStyle='italic';}if(font.Bold){inputField.style.fontWeight='Bold';}fontHeight=this.pdfViewerBase.ConvertPointToPixel(font.Size);}if(sf.base.Browser.isIE){top_1=top_1-1;}if(inputField.type==="text"){height=height-6;width=width-7;}inputField=inputField&&inputField.inputField?inputField.inputField:inputField;this.pdfViewerBase.setStyleToTextDiv(inputField,left,top_1,fontHeight,width,height,true);}};Print.prototype.printWindowOpen=function(){var _this_1=this;var browserUserAgent=navigator.userAgent;// eslint-disable-next-line
var printDocument;if(this.pdfViewer.printMode==='Default'){printDocument=this.frameDoc.document;}else{printDocument=this.printWindow.document;}for(var i=0;i<this.printViewerContainer.children.length;i++){var pageWidth=this.pdfViewerBase.pageSize[i].width;var pageHeight=this.pdfViewerBase.pageSize[i].height;var printHeight=pageHeight;var printWidth=pageWidth-1;if(pageHeight<pageWidth&&this.pdfViewer.enablePrintRotation){printHeight=pageWidth;printWidth=pageHeight;}if(i===0){if(browserUserAgent.indexOf('Chrome')!==-1||browserUserAgent.indexOf('Safari')!==-1||browserUserAgent.indexOf('Firefox')!==-1){printDocument.write('<!DOCTYPE html>');printDocument.write('<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; width:100% }'+' img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; }'+' img { width:100%; width:100%; box-sizing: border-box; }br, button { display: none; }'+' div{ page-break-inside: avoid; }} @page{margin:0mm;  size:'+printWidth.toString()+'px '+printHeight.toString()+'px; }</style></head><body><center class="loader">');}else{printDocument.write('<!DOCTYPE html>');printDocument.write('<html><head>'+'<style>html, body { height: 100%; } img { height: 100%; width: 100%; }@media print { body { margin: 0cm; }'+'img { width:100%; width:100%; box-sizing: border-box; }br, button { display: none; } '+'div{ page-break-inside: avoid; }} @page{margin:0mm;  size:'+printWidth.toString()+'px '+printHeight.toString()+'px; }</style></head><body><center>');}}// eslint-disable-next-line max-len
var canvasUrl=this.printViewerContainer.children[i].toDataURL();printDocument.write('<div style="margin:0mm;width:'+printWidth.toString()+'px;height:'+printHeight.toString()+'px;position:relative"><img src="'+canvasUrl+'" id="'+'image_'+i+'" /><div id="'+'fields_'+i+'" style="margin:0px;top:0px;left:0px;position:absolute;width:'+printWidth.toString()+'px;height:'+printHeight.toString()+'px;z-index:2"></div></div>');if(this.pdfViewer.formFieldsModule||this.pdfViewer.formDesignerModule){var heightRatio;var widthRatio;if(pageHeight<pageWidth&&this.pdfViewer.enablePrintRotation){heightRatio=pageHeight/pageWidth;widthRatio=pageWidth/pageHeight;}else{heightRatio=1;widthRatio=1;}this.renderFieldsForPrint(i,heightRatio,widthRatio);}}if(sf.base.Browser.isIE||sf.base.Browser.info.name==='edge'){try{if(this.pdfViewer.printMode==='Default'){this.pdfViewerBase.showPrintLoadingIndicator(false);this.iframe.contentWindow.document.execCommand('print',false,null);}else{this.printWindow.document.execCommand('print',false,null);}}catch(e){if(this.pdfViewer.printMode==='Default'){this.pdfViewerBase.showPrintLoadingIndicator(false);this.iframe.contentWindow.print();}else{this.printWindow.print();}}}else{setTimeout(function(){if(_this_1.pdfViewer.printMode==='Default'){_this_1.pdfViewerBase.showPrintLoadingIndicator(false);_this_1.iframe.contentWindow.print();_this_1.iframe.contentWindow.focus();document.body.removeChild(_this_1.iframe);}else{if(_this_1.printWindow){_this_1.printWindow.print();_this_1.printWindow.focus();_this_1.printWindow.close();}}},200);}};// eslint-disable-next-line
Print.prototype.createPrintLoadingIndicator=function(element){// eslint-disable-next-line
var printWindowContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_printWindowcontainer'});printWindowContainer.style.height='100%';printWindowContainer.style.width='100%';printWindowContainer.style.position='absolute';printWindowContainer.style.zIndex=2000;printWindowContainer.style.left=0;printWindowContainer.style.top=0;printWindowContainer.style.overflow='auto';printWindowContainer.style.backgroundColor='rgba(0, 0, 0, 0.3)';element.appendChild(printWindowContainer);var printWaitingPopup=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_printLoadingContainer'});printWaitingPopup.style.position='absolute';printWaitingPopup.style.width='50px';printWaitingPopup.style.height='50px';printWaitingPopup.style.left='46%';printWaitingPopup.style.top='45%';printWindowContainer.style.zIndex=3000;printWindowContainer.appendChild(printWaitingPopup);// eslint-disable-next-line
var printImageContainer=new Image();// eslint-disable-next-line
printImageContainer.src='data:image/gif;base64,R0lGODlhNgA3APMAAP///wAAAHh4eBwcHA4ODtjY2FRUVNzc3MTExEhISIqKigAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAANgA3AAAEzBDISau9OOvNu/9gKI5kaZ4lkhBEgqCnws6EApMITb93uOqsRC8EpA1Bxdnx8wMKl51ckXcsGFiGAkamsy0LA9pAe1EFqRbBYCAYXXUGk4DWJhZN4dlAlMSLRW80cSVzM3UgB3ksAwcnamwkB28GjVCWl5iZmpucnZ4cj4eWoRqFLKJHpgSoFIoEe5ausBeyl7UYqqw9uaVrukOkn8LDxMXGx8ibwY6+JLxydCO3JdMg1dJ/Is+E0SPLcs3Jnt/F28XXw+jC5uXh4u89EQAh+QQJCgAAACwAAAAANgA3AAAEzhDISau9OOvNu/9gKI5kaZ5oqhYGQRiFWhaD6w6xLLa2a+iiXg8YEtqIIF7vh/QcarbB4YJIuBKIpuTAM0wtCqNiJBgMBCaE0ZUFCXpoknWdCEFvpfURdCcM8noEIW82cSNzRnWDZoYjamttWhphQmOSHFVXkZecnZ6foKFujJdlZxqELo1AqQSrFH1/TbEZtLM9shetrzK7qKSSpryixMXGx8jJyifCKc1kcMzRIrYl1Xy4J9cfvibdIs/MwMue4cffxtvE6qLoxubk8ScRACH5BAkKAAAALAAAAAA2ADcAAATOEMhJq7046827/2AojmRpnmiqrqwwDAJbCkRNxLI42MSQ6zzfD0Sz4YYfFwyZKxhqhgJJeSQVdraBNFSsVUVPHsEAzJrEtnJNSELXRN2bKcwjw19f0QG7PjA7B2EGfn+FhoeIiYoSCAk1CQiLFQpoChlUQwhuBJEWcXkpjm4JF3w9P5tvFqZsLKkEF58/omiksXiZm52SlGKWkhONj7vAxcbHyMkTmCjMcDygRNAjrCfVaqcm11zTJrIjzt64yojhxd/G28XqwOjG5uTxJhEAIfkECQoAAAAsAAAAADYANwAABM0QyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7/i8qmCoGQoacT8FZ4AXbFopfTwEBhhnQ4w2j0GRkgQYiEOLPI6ZUkgHZwd6EweLBqSlq6ytricICTUJCKwKkgojgiMIlwS1VEYlspcJIZAkvjXHlcnKIZokxJLG0KAlvZfAebeMuUi7FbGz2z/Rq8jozavn7Nev8CsRACH5BAkKAAAALAAAAAA2ADcAAATLEMhJq7046827/2AojmRpnmiqrqwwDAJbCkRNxLI42MSQ6zzfD0Sz4YYfFwzJNCmPzheUyJuKijVrZ2cTlrg1LwjcO5HFyeoJeyM9U++mfE6v2+/4PD6O5F/YWiqAGWdIhRiHP4kWg0ONGH4/kXqUlZaXmJlMBQY1BgVuUicFZ6AhjyOdPAQGQF0mqzauYbCxBFdqJao8rVeiGQgJNQkIFwdnB0MKsQrGqgbJPwi2BMV5wrYJetQ129x62LHaedO21nnLq82VwcPnIhEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7/g8Po7kX9haKoAZZ0iFGIc/iRaDQ40Yfj+RepSVlpeYAAgJNQkIlgo8NQqUCKI2nzNSIpynBAkzaiCuNl9BIbQ1tl0hraewbrIfpq6pbqsioaKkFwUGNQYFSJudxhUFZ9KUz6IGlbTfrpXcPN6UB2cHlgfcBuqZKBEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7yJEopZA4CsKPDUKfxIIgjZ+P3EWe4gECYtqFo82P2cXlTWXQReOiJE5bFqHj4qiUhmBgoSFho59rrKztLVMBQY1BgWzBWe8UUsiuYIGTpMglSaYIcpfnSHEPMYzyB8HZwdrqSMHxAbath2MsqO0zLLorua05OLvJxEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhfohELYHQuGBDgIJXU0Q5CKqtOXsdP0otITHjfTtiW2lnE37StXUwFNaSScXaGZvm4r0jU1RWV1hhTIWJiouMjVcFBjUGBY4WBWw1A5RDT3sTkVQGnGYYaUOYPaVip3MXoDyiP3k3GAeoAwdRnRoHoAa5lcHCw8TFxscduyjKIrOeRKRAbSe3I9Um1yHOJ9sjzCbfyInhwt3E2cPo5dHF5OLvJREAOwAAAAAAAAAAAA==';printImageContainer.style.width='50px';printImageContainer.style.height='50px';printWaitingPopup.appendChild(printImageContainer);var printLabelContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_printLabelContainer'});printLabelContainer.style.position='absolute';printLabelContainer.textContent='Loading ...';printLabelContainer.style.fontWeight='Bold';printLabelContainer.style.left='46%';printLabelContainer.style.top='54.5%';printLabelContainer.style.zIndex='3000';printWindowContainer.appendChild(printLabelContainer);};/**
     * @private
     */Print.prototype.destroy=function(){this.printViewerContainer=undefined;this.frameDoc=undefined;this.printWindow=undefined;};/**
     * @private
     */Print.prototype.getModuleName=function(){return'Print';};return Print;}();/**
 * export types
 */ /**
 * The `FormFields` module is to render formfields in the PDF document.
 *
 */var FormFields=/** @class */function(){/**
     * @param viewer
     * @param base
     * @param viewer
     * @param base
     * @private
     */function FormFields(viewer,base){// eslint-disable-next-line
this.maintainTabIndex={};// eslint-disable-next-line
this.maintanMinTabindex={};this.isSignatureField=false;this.isKeyDownCheck=false;/**
         * @private
         */ // eslint-disable-next-line
this.readOnlyCollection=[];this.isSignatureRendered=false;/**
         * @private
         */ // eslint-disable-next-line
this.signatureFieldCollection=[];this.selectedIndex=[];this.pdfViewer=viewer;this.pdfViewerBase=base;}/**
     * @param pageIndex
     * @private
     */FormFields.prototype.renderFormFields=function(pageIndex){this.maxTabIndex=0;this.minTabIndex=-1;// eslint-disable-next-line
this.data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');if(this.data){// eslint-disable-next-line
this.formFieldsData=JSON.parse(this.data);var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageIndex);var canvasElement=document.getElementById(this.pdfViewer.dataId+'_pageCanvas_'+pageIndex);var count=void 0;if(this.formFieldsData!==null&&canvasElement!==null&&textLayer!==null){var flag=false;for(var i=0;i<this.formFieldsData.length;i++){var formField=this.formFieldsData[i];if(!flag&&sf.base.isNullOrUndefined(formField.ActualFieldName)&&formField.PageIndex===pageIndex){count=parseInt(formField.FieldName.split('_')[1]);flag=true;}}for(var i=0;i<this.formFieldsData.length;i++){// eslint-disable-next-line
var currentData=this.formFieldsData[i];if(currentData.FieldName!==''){if(currentData.IsInitialField){currentData.Name='InitialField';}// eslint-disable-next-line
var font=currentData['Font'];if(this.pdfViewer.formDesigner){if(parseFloat(currentData['PageIndex'])==pageIndex){var fontFamily=void 0;var fontStyle=void 0;var fontSize=void 0;if(font!==null&&font.Height){fontFamily=font.Name;if(font.Italic){fontStyle='Italic';}if(font.Bold){fontStyle='Bold';}if(font.Strikeout){fontStyle='Strikethrough';}if(font.Underline){fontStyle='Underline';}fontSize=this.ConvertPointToPixel(font.Size);}var textAlignment=currentData.Alignment===2?'right':currentData.Alignment===1?'center':'left';var backgroundColor=currentData['BackColor'];var bounds=currentData['LineBounds'];var backColor='rgba('+backgroundColor.R+','+backgroundColor.G+','+backgroundColor.B+','+1+')';backColor=this.rgbaToHex(backColor);// set default color if field have black color as bg.
if(backColor==='#000000ff'){backColor='#daeaf7ff';}// eslint-disable-next-line
var fontColor=currentData['FontColor'];var left=this.ConvertPointToPixel(bounds.X);var top_1=this.ConvertPointToPixel(bounds.Y);var width=this.ConvertPointToPixel(bounds.Width);var height=this.ConvertPointToPixel(bounds.Height);var boundArray={left:left,top:top_1,width:width,height:height};boundArray=this.getBounds(boundArray,pageIndex);var foreColor='rgba('+fontColor.R+','+fontColor.G+','+fontColor.B+','+1+')';foreColor=this.rgbaToHex(foreColor);var borderColor=currentData['BorderColor'];var borderRGB='rgba('+borderColor.R+','+borderColor.G+','+borderColor.B+','+1+')';borderRGB=this.rgbaToHex(borderRGB);var borderWidth=currentData['BorderWidth'];this.selectedIndex=[];var fieldProperties={bounds:{X:boundArray.left,Y:boundArray.top,Width:boundArray.width,Height:boundArray.height},pageNumber:parseFloat(currentData['PageIndex'])+1,name:currentData['ActualFieldName'],tooltip:currentData['ToolTip'],value:currentData['Text'],isChecked:currentData['Selected'],isSelected:currentData['Selected'],fontFamily:fontFamily,fontStyle:fontStyle,backgroundColor:backColor,color:foreColor,borderColor:borderRGB,thickness:borderWidth,fontSize:fontSize,isMultiline:currentData.Multiline,isReadOnly:currentData['IsReadonly'],isRequired:currentData['IsRequired'],alignment:textAlignment,options:this.getListValues(currentData),selectedIndex:this.selectedIndex,maxLength:currentData.MaxLength,visibility:currentData.Visible===1?"hidden":"visible",font:{isItalic:!sf.base.isNullOrUndefined(font)?font.Italic:false,isBold:!sf.base.isNullOrUndefined(font)?font.Bold:false,isStrikeout:!sf.base.isNullOrUndefined(font)?font.Strikeout:false,isUnderline:!sf.base.isNullOrUndefined(font)?font.Underline:false}};if(currentData.Name==='DropDown'||currentData.Name==='ListBox'){fieldProperties.value=currentData['SelectedValue'];}// eslint-disable-next-line
var fieldType=this.getFormFieldType(currentData);if(currentData.Name!=='SignatureText'||currentData.Name!=='SignatureImage'){if(!sf.base.isNullOrUndefined(this.getFormFieldType(currentData))){if(currentData.IsRequired){var thickness=fieldProperties.thickness;thickness=thickness>0?thickness:1;fieldProperties.thickness=thickness;}var addedElement1=this.pdfViewer.formDesignerModule.addFormField(this.getFormFieldType(currentData),fieldProperties);if(addedElement1&&addedElement1.parentElement){currentData.id=addedElement1.parentElement.id.split('_')[0];}}}if(fieldType==='SignatureField'||fieldType==='InitialField'){this.addSignaturePath(currentData);if(!sf.base.isNullOrUndefined(currentData.Value)){this.renderExistingAnnnot(currentData,parseFloat(currentData['PageIndex'])+1,null);this.isSignatureRendered=true;}}this.pdfViewerBase.isLoadedFormFieldAdded=true;}}else{// eslint-disable-next-line
if(parseFloat(currentData['PageIndex'])==pageIndex){// eslint-disable-next-line
var field=this.createFormFields(currentData,pageIndex,i,null,count);var inputField=field.currentField;var signCount=field.count;if(inputField){var indicatorSpanIndex=void 0;var inputFieldOfSignature=inputField.inputField;if(inputFieldOfSignature){indicatorSpanIndex=inputField.index;inputField=inputFieldOfSignature;}// eslint-disable-next-line
var divElement=this.createParentElement(currentData,pageIndex);// eslint-disable-next-line
var bounds=currentData['LineBounds'];// eslint-disable-next-line
var font_1=currentData['Font'];// eslint-disable-next-line
var isFieldRotated=false;var rotateAngle=0;if(currentData['Rotation']===0){isFieldRotated=true;rotateAngle=this.getAngle(pageIndex);if(divElement){divElement.style.transform='rotate('+rotateAngle+'deg)';}else{inputField.style.transform='rotate('+rotateAngle+'deg)';}}else{if(divElement){divElement.style.transform='rotate('+rotateAngle+'deg)';}else{inputField.style.transform='rotate('+rotateAngle+'deg)';}}if(!currentData.InsertSpaces){this.applyPosition(inputField,bounds,font_1,pageIndex,0,isFieldRotated,false);}else{this.applyPosition(inputField,bounds,font_1,pageIndex,0,isFieldRotated);}inputField.InsertSpaces=currentData.InsertSpaces;if(inputField.InsertSpaces){var zoomFactor=this.pdfViewerBase.getZoomFactor();// eslint-disable-next-line
var font_2=parseInt(inputField.style.width)/inputField.maxLength-parseFloat(inputField.style.fontSize)/2-0.6*zoomFactor;// eslint-disable-next-line
inputField.style.letterSpacing=''+font_2+'px';inputField.style.fontFamily='monospace';inputField.style.paddingLeft=font_2/2+'px';}// eslint-disable-next-line
currentData['uniqueID']=this.pdfViewer.dataId+'input_'+pageIndex+'_'+i;for(var j=0;j<this.pdfViewer.formFieldCollections.length;j++){if((inputField.type==='text'||inputField.type==='password'||inputField.type==='textarea')&&currentData.Name!=='SignatureField'){if(currentData['uniqueID']===this.pdfViewer.formFieldCollections[j].id){this.pdfViewer.formFieldCollections[j].value=currentData['Text'];}}}this.applyCommonProperties(inputField,pageIndex,i,currentData,isFieldRotated);this.checkIsReadonly(currentData,inputField);this.applyTabIndex(currentData,inputField,pageIndex);this.checkIsRequiredField(currentData,inputField);this.applyDefaultColor(inputField);this.updateFormFieldsCollection(currentData);// eslint-disable-next-line
if(currentData['Rotation']===0){var rotationAngle=this.getAngle(pageIndex);if(divElement){divElement.style.transform='rotate('+rotationAngle+'deg)';}else{inputField.style.transform='rotate('+rotationAngle+'deg)';}}if(divElement){divElement.appendChild(inputField);textLayer.appendChild(divElement);}else{inputField.style.position='absolute';var indicatorSpanElement=document.getElementById('signIcon'+pageIndex+'_'+indicatorSpanIndex);if(indicatorSpanElement){indicatorSpanElement.style.left=inputField.style.left;indicatorSpanElement.style.top=inputField.style.top;}textLayer.appendChild(inputField);}inputField.addEventListener('focus',this.focusFormFields.bind(this));inputField.addEventListener('blur',this.blurFormFields.bind(this));inputField.addEventListener('click',this.updateFormFields.bind(this));inputField.addEventListener('change',this.changeFormFields.bind(this));inputField.addEventListener('keydown',this.updateFormFieldsValue.bind(this));inputField.addEventListener('keyup',this.updateSameFieldsValue.bind(this));count=signCount;}}}}}if(!this.pdfViewer.formDesigner){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_formfields');this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData,'_formfields');}}}};FormFields.prototype.trim=function(str){return str.replace(/^\s+|\s+$/gm,'');};FormFields.prototype.rgbaToHex=function(rgba){var inParts=rgba.substring(rgba.indexOf("(")).split(",");var r=parseInt(this.trim(inParts[0].substring(1)),10);var g=parseInt(this.trim(inParts[1]),10);var b=parseInt(this.trim(inParts[2]),10);var a=parseFloat(parseFloat(this.trim(inParts[3].substring(0,inParts[3].length-1))).toFixed(2));var outParts=[r.toString(16),g.toString(16),b.toString(16),Math.round(a*255).toString(16).substring(0,2)];// Pad single-digit output values
outParts.forEach(function(part,i){if(part.length===1){outParts[i]='0'+part;}});return'#'+outParts.join('');};FormFields.prototype.getListValues=function(currentData){var listItem=currentData['TextList'];var options=[];for(var i=0;i<listItem.length;i++){if(listItem[i]===currentData['SelectedValue'])this.selectedIndex.push(i);options.push({itemName:listItem[i],itemValue:listItem[i]});}if(this.getFormFieldType(currentData)==='ListBox'){this.selectedIndex=currentData['SelectedList'];}return options;};// eslint-disable-next-line
FormFields.prototype.createParentElement=function(data,pageIndex){// eslint-disable-next-line
var divElement;// eslint-disable-next-line
if(data['Name']==='Textbox'||data['Name']==='Password'||data['Name']==='DropDown'||data['Name']==='ListBox'){divElement=document.createElement('div');divElement.style.background='white';if(data.InsertSpaces){divElement.style.background='transparent';}// eslint-disable-next-line
var bounds=data['LineBounds'];// eslint-disable-next-line
var font=data['Font'];// eslint-disable-next-line
divElement.style.position='absolute';// eslint-disable-next-line
var isFieldRotated=false;if(data['Rotation']===0){isFieldRotated=true;}var insertSpacesValue=data.InsertSpaces;this.applyPosition(divElement,bounds,font,pageIndex,0,isFieldRotated,true,insertSpacesValue);}return divElement;};/**
     * @private
     */FormFields.prototype.getAngle=function(pageIndex){// eslint-disable-next-line
var angle=0;// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];if(pageDetails.rotation){switch(pageDetails.rotation){case 0:angle=0;break;case 1:angle=90;break;case 2:angle=180;break;case 3:angle=270;break;}}return angle;};FormFields.prototype.nextField=function(){this.signatureFieldNavigate(true);};FormFields.prototype.previousField=function(){this.signatureFieldNavigate(false);};FormFields.prototype.signatureFieldNavigate=function(nextSign){var isNextSignField=nextSign;// eslint-disable-next-line
var signatureFields=this.signatureFieldCollection;if(signatureFields.length===0){signatureFields=this.getSignField();}// eslint-disable-next-line
var currentField;if(this.currentTarget){for(var i=0;i<signatureFields.length;i++){currentField=this.pdfViewer.formDesignerModule?signatureFields[i].FormField:signatureFields[i];if(this.currentTarget.id===currentField.uniqueID){this.currentTarget=document.getElementById(currentField.uniqueID);this.getSignatureIndex(i,signatureFields.length,isNextSignField);break;}}}else{if(nextSign){currentField=this.pdfViewer.formDesignerModule?signatureFields[0].FormField:signatureFields[0];if(currentField.uniqueID){this.currentTarget=document.getElementById(currentField.uniqueID);this.getSignatureIndex(0,signatureFields.length,isNextSignField,true);}}}};FormFields.prototype.getSignatureIndex=function(currentSignatureIndex,signatureCount,isNextSign,isFirstNavigate){var signatureIndex=currentSignatureIndex;if(!isFirstNavigate){if(isNextSign){signatureIndex++;}else{signatureIndex--;}}if(signatureCount===1){this.renderSignatureField(0);}else{if(signatureIndex<signatureCount&&signatureIndex>=0){this.renderSignatureField(signatureIndex);}else{if(isNextSign){if(signatureIndex>=signatureCount){this.renderSignatureField(0);}}else{if(signatureIndex<=0){this.renderSignatureField(signatureCount-1);}}}}};FormFields.prototype.renderSignatureField=function(currentSignIndex){var curSignIndex=currentSignIndex;// eslint-disable-next-line
var signatureFields=this.signatureFieldCollection;// eslint-disable-next-line
var currentField;if(curSignIndex<signatureFields.length){for(var i=0;i<signatureFields.length;i++){var curSignIndexId=this.pdfViewer.formDesignerModule?signatureFields[curSignIndex].FormField.uniqueID:signatureFields[curSignIndex].uniqueID;var signatureFieldData=this.pdfViewer.formDesignerModule?signatureFields[i].FormField:signatureFields[i];if(curSignIndexId===signatureFieldData.uniqueID){var pageIndex=signatureFieldData.PageIndex>=0?signatureFieldData.PageIndex:signatureFieldData.pageNumber;var isRender=this.pdfViewer.annotationModule.findRenderPageList(pageIndex);if(!isRender){this.pdfViewer.navigation.goToPage(pageIndex);}this.currentTarget=document.getElementById(signatureFieldData.uniqueID);currentField=signatureFieldData;break;}}if(this.currentTarget===null){var pageIndex=currentField.PageIndex>=0?currentField.PageIndex:currentField.pageNumber;this.pdfViewer.navigation.goToPage(pageIndex);this.currentTarget=document.getElementById(currentField.uniqueID);}if(this.currentTarget){if(this.currentTarget.className==='e-pdfviewer-signatureformfields-signature'){document.getElementById(this.currentTarget.id).focus();this.pdfViewer.select([this.currentTarget.id],null);}else if(this.currentTarget.className==='e-pdfviewer-signatureformfields'){if(this.pdfViewer.formDesignerModule){document.getElementById(this.currentTarget.id).parentElement.focus();}else{document.getElementById(this.currentTarget.id).focus();}}}}};/**
     * @private
     */FormFields.prototype.setFocus=function(id){if(!id){if(this.currentTarget){document.getElementById(this.currentTarget.id).focus();}}else{this.removeFocus();var signatureElement=document.getElementById(id);signatureElement.classList.add('e-pv-signature-focus');var caretColor="caretColor";signatureElement.style[caretColor]='transparent';}};/**
     * @private
     */FormFields.prototype.removeFocus=function(){if(this.signatureFieldCollection){// eslint-disable-next-line
var signatureFields=this.signatureFieldCollection;if(signatureFields.length===0){signatureFields=this.getSignField();}for(var i=0;i<this.signatureFieldCollection.length;i++){var signatureFieldId=this.pdfViewer.formDesignerModule?this.signatureFieldCollection[i].FormField.uniqueID:this.signatureFieldCollection[i].uniqueID;var signatureElement=document.getElementById(signatureFieldId);if(signatureElement){signatureElement.classList.remove('e-pv-signature-focus');}}}};// eslint-disable-next-line
FormFields.prototype.getSignField=function(){if(this.pdfViewer.formDesignerModule){this.signatureFieldCollection=this.pdfViewer.formDesignerModule.getFormDesignerSignField(this.signatureFieldCollection);}else{this.signatureFieldCollection=this.getFormFieldSignField();}return this.signatureFieldCollection;};FormFields.prototype.getFormFieldSignField=function(){// eslint-disable-next-line
var data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');// eslint-disable-next-line
var currentData;if(data){// eslint-disable-next-line
var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){currentData=formFieldsData[i];if(currentData.Name==='SignatureField'){// eslint-disable-next-line
currentData['uniqueID']=this.pdfViewer.dataId+'input_'+currentData.PageIndex+'_'+i;this.signatureFieldCollection.push(formFieldsData[i]);}}}return this.signatureFieldCollection;};/**
     * @private
     */FormFields.prototype.formFieldCollections=function(){// eslint-disable-next-line
var data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');if(data){// eslint-disable-next-line
var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){// eslint-disable-next-line
var currentData=formFieldsData[i];// eslint-disable-next-line
var type=currentData['Name'];if(currentData.Name!=='ink'){// eslint-disable-next-line
var formFieldCollection={name:this.retriveFieldName(currentData),id:this.pdfViewer.dataId+'input_'+parseFloat(currentData['PageIndex'])+'_'+i,isReadOnly:false,type:type,value:this.retriveCurrentValue(currentData),fontName:'',isRequired:currentData.IsRequired};if(formFieldCollection.type!=="SignatureText"){this.pdfViewer.formFieldCollections.push(formFieldCollection);}}}}};FormFields.prototype.updateFormFieldsCollection=function(formField){var type=formField['Name'];var formFieldValue;if(formField.Value!=null){formFieldValue=formField.Value;}else{formFieldValue=formField.Text;}var formFieldCollection={name:this.retriveFieldName(formField),id:formField.uniqueID,isReadOnly:formField.IsReadonly,isRequired:formField.IsRequired,isSelected:type==='CheckBox'?false:formField.Selected,isChecked:type==='RadioButton'?false:formField.Selected,type:type,value:type==='ListBox'||type==='DropDown'?formField.SelectedValue:formFieldValue,fontName:formField.FontFamily?formField.FontFamily:''};this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function(el){return el.id===formFieldCollection.id;})]=formFieldCollection;};// eslint-disable-next-line
FormFields.prototype.updateFormFieldValues=function(formFields){this.readOnlyCollection.push(formFields.id);if(formFields){// eslint-disable-next-line
var currentElement=document.getElementById(formFields.id);if(currentElement){if(formFields.isReadOnly){currentElement.disabled=true;currentElement.style.backgroundColor='';currentElement.style.cursor='default';}else{if(currentElement.style.backgroundColor===''){currentElement.style.backgroundColor='rgba(0, 20, 200, 0.2)';}currentElement.disabled=false;currentElement.style.cursor='';}}this.updateDataInSession(currentElement);}};/**
     * @param currentData
     * @private
     */ // eslint-disable-next-line
FormFields.prototype.retriveFieldName=function(currentData){// eslint-disable-next-line
var currentField;// eslint-disable-next-line
switch(currentData['Name']){case'Textbox':case'Password':case'SignatureField':currentField=currentData.FieldName;break;case'RadioButton':case'CheckBox':currentField=currentData.GroupName;break;case'DropDown':case'ListBox':currentField=currentData.Text;break;}return currentField;};// eslint-disable-next-line
FormFields.prototype.retriveCurrentValue=function(currentData){// eslint-disable-next-line
var currentField;// eslint-disable-next-line
switch(currentData['Name']){case'Textbox':case'Password':currentField=currentData.Text;break;case'SignatureField':currentField=currentData.Value;break;case'RadioButton':case'CheckBox':currentField=currentData.Selected;break;case'DropDown':currentField=currentData.SelectedValue;break;case'ListBox':currentField=currentData.SelectedList;break;}return currentField;};// eslint-disable-next-line
FormFields.prototype.getSignatureBounds=function(LineBounds,bounds,pageIndex){// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];// eslint-disable-next-line
var bound=0;switch(pageDetails.rotation){case 0:bound=bounds;break;case 1:bound={x:bounds.x+LineBounds.Width+bounds.width/3.5,y:pageDetails.width-LineBounds.X+bounds.height/4};break;case 2:bound={x:pageDetails.width-bounds.x-bounds.width,y:pageDetails.height-bounds.y-bounds.height};break;case 3:bound={x:bounds.y-bounds.width/2+bounds.height,y:bounds.x+bounds.width/3};break;}return bound;};/**
     * @private
     */ // eslint-disable-next-line
FormFields.prototype.downloadFormFieldsData=function(){// eslint-disable-next-line
var data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');if(data){// eslint-disable-next-line
var formFieldsData=JSON.parse(data);// eslint-disable-next-line
var datas={};var fieldDatas=[];for(var i=0;i<formFieldsData.length;i++){for(var j=i+1;j<formFieldsData.length;j++){if(formFieldsData[i].FieldName==formFieldsData[j].FieldName){formFieldsData[i].flagSet=true;formFieldsData[j].flagSet=true;}}}for(var m=0;m<formFieldsData.length;m++){// eslint-disable-next-line
var currentData=formFieldsData[m];var isRequired=currentData.IsRequired;if(currentData.Name==='Textbox'||currentData.Name==='Password'||currentData.Multiline){if(isRequired&&(currentData.Text===''||currentData.Text===null)){this.pdfViewerBase.validateForm=true;this.pdfViewerBase.nonFillableFields[currentData.FieldName]=currentData.Text;}else{delete this.pdfViewerBase.nonFillableFields[currentData.FieldName];}fieldDatas={fieldValue:currentData.Text,isReadOnly:currentData.IsReadonly};datas[currentData.FieldName]=fieldDatas;}else if(currentData.Name==='RadioButton'){if(isRequired&&currentData.Selected===false){this.pdfViewerBase.validateForm=true;this.pdfViewerBase.nonFillableFields[currentData.GroupName]=currentData.Value;}else{delete this.pdfViewerBase.nonFillableFields[currentData.GroupName];}if(currentData.Value&&currentData.Selected){fieldDatas={fieldValue:currentData.Value,isReadOnly:currentData.IsReadonly};datas[currentData.GroupName]=fieldDatas;}else if(datas[currentData.GroupName]===undefined||datas[currentData.GroupName]===null){fieldDatas={fieldValue:currentData.Selected,isReadOnly:currentData.IsReadonly};datas[currentData.GroupName]=fieldDatas;}}else if(currentData.Name==='CheckBox'){if(isRequired&&currentData.Selected===false){this.pdfViewerBase.validateForm=true;this.pdfViewerBase.nonFillableFields[currentData.GroupName]=currentData.Selected;}else{delete this.pdfViewerBase.nonFillableFields[currentData.GroupName];}if(currentData.CheckboxIndex&&currentData.Selected){fieldDatas={fieldValue:currentData.CheckboxIndex,isReadOnly:currentData.IsReadonly};datas[currentData.GroupName]=fieldDatas;}else if(datas[currentData.GroupName]===undefined||datas[currentData.GroupName]===null){fieldDatas={fieldValue:currentData.Selected,isReadOnly:currentData.IsReadonly};datas[currentData.GroupName]=fieldDatas;}}else if(currentData.Name==='DropDown'){if(isRequired&&currentData.SelectedValue===''){this.pdfViewerBase.validateForm=true;this.pdfViewerBase.nonFillableFields[currentData.FieldName]=currentData.SelectedValue;}else{delete this.pdfViewerBase.nonFillableFields[currentData.FieldName];}fieldDatas={fieldValue:currentData.SelectedValue,isReadOnly:currentData.IsReadonly};datas[currentData.FieldName]=fieldDatas;}else if(currentData.Name==='ListBox'){// eslint-disable-next-line
var childItems=currentData['TextList'];var childItemsText=[];for(var m_1=0;m_1<currentData.SelectedList.length;m_1++){// eslint-disable-next-line
var currentElement=currentData.SelectedList[m_1];childItemsText.push(childItems[currentElement]);}fieldDatas={fieldValue:JSON.stringify(childItemsText),isReadOnly:currentData.IsReadonly};datas[currentData.Text]=fieldDatas;}else if(currentData.Name==='SignatureField'){// eslint-disable-next-line
var csData=void 0;if(currentData.Value===null||currentData.Value===''){this.addSignaturePath(currentData);}if(currentData.Value&&currentData.Value!==''){csData=currentData.Value;var fontFamily=currentData.fontFamily?currentData.fontFamily:currentData.FontFamily;if(fontFamily){if(currentData.flagSet){datas[currentData.FieldName+'fontName'+'_'+m]=fontFamily;datas[currentData.FieldName+'fontSize'+'_'+m]=currentData.fontSize?currentData.fontSize:currentData.FontSize;}else{datas[currentData.FieldName+'fontName']=fontFamily;datas[currentData.FieldName+'fontSize']=currentData.fontSize?currentData.fontSize:currentData.FontSize;}}else if(currentData.Value.split('base64,')[1]){if(currentData.flagSet){datas[currentData.FieldName+'ImageData'+'_'+m]=true;}else{datas[currentData.FieldName+'ImageData']=true;}}else{// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(currentData.Value);csData=sf.drawings.splitArrayCollection(collectionData);}}if(isRequired&&currentData.Value===null||currentData.Value===''){this.pdfViewerBase.validateForm=true;this.pdfViewerBase.nonFillableFields[currentData.FieldName]=JSON.stringify(csData);}else{delete this.pdfViewerBase.nonFillableFields[currentData.FieldName];}datas[currentData.FieldName]=JSON.stringify(csData);if(currentData.Bounds){// eslint-disable-next-line
var bounds=this.getSignatureBounds(currentData.LineBounds,currentData.Bounds,currentData.PageIndex);currentData.Bounds.x=bounds.x;currentData.Bounds.y=bounds.y;if(currentData.flagSet){datas[currentData.FieldName+'bounds'+'_'+m]=JSON.stringify(currentData.Bounds);}else{datas[currentData.FieldName+'bounds']=JSON.stringify(currentData.Bounds);}}else{// eslint-disable-next-line
var lineBounds=currentData.LineBounds;// eslint-disable-next-line
var bounds={x:this.ConvertPointToPixel(lineBounds.X),y:this.ConvertPointToPixel(lineBounds.Y),width:this.ConvertPointToPixel(lineBounds.Width),height:this.ConvertPointToPixel(lineBounds.Height)};datas[currentData.FieldName+'bounds']=JSON.stringify(bounds);}if(currentData.flagSet){datas[currentData.FieldName+'isReadOnly'+'_'+m]=currentData.IsReadonly;}else{datas[currentData.FieldName+'isReadOnly']=currentData.IsReadonly;}}}return JSON.stringify(datas);}};FormFields.prototype.focusFormFields=function(event){// eslint-disable-next-line
var currentTarget=event.target;// eslint-disable-next-line
if(currentTarget&&currentTarget.className!=='e-pdfviewer-signatureformfields'&&currentTarget.className!=='e-pdfviewer-signatureformfields e-pv-signature-focus'){// eslint-disable-next-line
var backgroundcolor=currentTarget.style.backgroundColor;// eslint-disable-next-line
var currentIndex=backgroundcolor.lastIndexOf(',');// eslint-disable-next-line
var currentColor=backgroundcolor.slice(0,currentIndex+1)+0+')';currentTarget.style.backgroundColor=currentColor;currentTarget.style.boxShadow="0 0 5px "+(currentTarget.style.borderColor==='transparent'?'#000000':currentTarget.style.borderColor);}else if(currentTarget){// eslint-disable-next-line
if(currentTarget.className==='e-pdfviewer-signatureformfields'||currentTarget.className==='e-pdfviewer-signatureformfields-signature'||currentTarget.className==='e-pdfviewer-signatureformfields e-pv-signature-focus'||currentTarget.className==='e-pdfviewer-signatureformfields-signature  e-pv-signature-focus'){this.setFocus(currentTarget.id);}}};FormFields.prototype.blurFormFields=function(event){// eslint-disable-next-line
var currentTarget=event.target;if(currentTarget.InsertSpaces&&this.isKeyDownCheck){// eslint-disable-next-line
var font=parseInt(currentTarget.style.width)-parseInt(currentTarget.style.height)/2;currentTarget.style.width=''+font+'px';this.isKeyDownCheck=false;}if(currentTarget.type==='checkbox'){this.pdfViewer.fireFocusOutFormField(currentTarget.name,currentTarget.checked);}else{this.pdfViewer.fireFocusOutFormField(currentTarget.name,currentTarget.value);}// eslint-disable-next-line
var backgroundcolor=currentTarget.style.backgroundColor;// eslint-disable-next-line
var currentIndex=backgroundcolor.lastIndexOf(',');// eslint-disable-next-line
var currentColor=backgroundcolor.slice(0,currentIndex+1)+0.2+')';currentTarget.style.backgroundColor=currentColor;currentTarget.style.boxShadow='none';};FormFields.prototype.updateFormFields=function(event){// eslint-disable-next-line
var currentTarget=event.target;if(currentTarget.className==='e-pdfviewer-ListBox'){currentTarget=currentTarget.parentElement;this.updateDataInSession(currentTarget);}else if(currentTarget.className==='e-pdfviewer-signatureformfields'){this.currentTarget=currentTarget;}else if(currentTarget.className==='e-pv-buttonItem'||currentTarget.type==='button'){this.pdfViewer.fireButtonFieldClickEvent(currentTarget.value,currentTarget.name,currentTarget.id);}for(var m=0;m<this.pdfViewer.formFieldCollections.length;m++){if(currentTarget.id===this.pdfViewer.formFieldCollections[m].id){this.pdfViewer.fireFormFieldClickEvent('formFieldClicked',this.pdfViewer.formFieldCollections[m]);// eslint-disable-next-line
if(currentTarget.className==='e-pdfviewer-signatureformfields'||currentTarget.className==='e-pdfviewer-signatureformfields-signature'||currentTarget.className==='e-pdfviewer-signatureformfields e-pv-signature-focus'||currentTarget.className==='e-pdfviewer-signatureformfields-signature  e-pv-signature-focus'){this.setFocus(currentTarget.id);}}}};/**
     * @param signatureType
     * @param value
     * @param target
     * @param fontname
     * @param signatureType
     * @param value
     * @param target
     * @param fontname
     * @private
     */ // eslint-disable-next-line
FormFields.prototype.drawSignature=function(signatureType,value,target,fontname){var annot;// eslint-disable-next-line
var bounds;var targetBounds;var parentElementBounds;var data;if(this.pdfViewer.formDesigner){data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');}else{data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');}var formFieldsData=JSON.parse(data);var targetName=this.currentTarget?this.currentTarget.name:target.name?target.name:target.offsetParent.name;for(var i=0;i<formFieldsData.length;i++){var fieldName=this.pdfViewer.formDesigner?formFieldsData[i].FormField.name:formFieldsData[i].FieldName;if(this.pdfViewer.formDesigner?fieldName===targetName:fieldName===targetName&&!sf.base.isNullOrUndefined(formFieldsData[i].ActualFieldName)){target=this.pdfViewer.formDesigner?document.getElementById(formFieldsData[i].Key.split("_")[0]):document.getElementById(formFieldsData[i].uniqueID);var currentField=target;var elementId=currentField.offsetParent.offsetParent.id.split("_")[0];var signatureField=this.pdfViewer.nameTable[elementId];if(target&&target.offsetParent&&signatureField){targetBounds=target.getBoundingClientRect();parentElementBounds=target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();this.pdfViewerBase.drawSignatureWithTool=true;if(target.nextSibling&&target.nextSibling.id.indexOf("initial")!==-1){this.pdfViewer.isInitialFieldToolbarSelection=true;}}var currentValue=value?value:this.pdfViewerBase.signatureModule.outputString;var currentFont=fontname?fontname:this.pdfViewerBase.signatureModule.fontName;var zoomvalue=this.pdfViewerBase.getZoomFactor();var currentWidth=this.pdfViewerBase.drawSignatureWithTool?targetBounds.width/zoomvalue:parseFloat(currentField.style.width)/zoomvalue;var currentHeight=this.pdfViewerBase.drawSignatureWithTool?targetBounds.height/zoomvalue:parseFloat(currentField.style.height)/zoomvalue;var currentLeft=this.pdfViewerBase.drawSignatureWithTool?(targetBounds.left-parentElementBounds.left)/zoomvalue:parseFloat(currentField.style.left)/zoomvalue;var currentTop=this.pdfViewerBase.drawSignatureWithTool?(targetBounds.top-parentElementBounds.top)/zoomvalue:parseFloat(currentField.style.top)/zoomvalue;var currentPage=this.pdfViewerBase.drawSignatureWithTool?this.pdfViewerBase.getActivePage():parseFloat(currentField.id.split('_')[1]);var currentIndex=this.pdfViewerBase.drawSignatureWithTool?target.nextElementSibling?parseFloat(target.nextElementSibling.id.split('_')[1]):parseFloat(currentField.id.split('_')[2]):parseFloat(currentField.id.split('_')[2]);var signString=this.pdfViewerBase.signatureModule.saveImageString;var signatureFontFamily=void 0;var signatureFontSize=void 0;var rotateAngle=this.getAngle(currentPage);if(signatureType==='Type'){if(!currentFont){currentFont='Helvetica';}// eslint-disable-next-line
bounds=this.getSignBounds(currentIndex,rotateAngle,currentPage,zoomvalue,currentLeft,currentTop,currentWidth,currentHeight);if(!this.pdfViewer.signatureFitMode||this.pdfViewer.signatureFitMode==='Default'){bounds=this.getDefaultBoundsforSign(bounds);}annot={// eslint-disable-next-line max-len
id:currentField.id,bounds:{x:bounds.x,y:bounds.y,width:bounds.width,height:bounds.height},pageIndex:currentPage,data:currentValue,modifiedDate:'',shapeAnnotationType:'SignatureText',opacity:1,rotateAngle:this.rotateAngle,annotName:'SignatureField',comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:''},fontFamily:currentFont,fontSize:bounds.height/1.25};signString=annot.data;signatureFontFamily=annot.fontFamily;signatureFontSize=annot.fontSize;}else if(signatureType==='Image'){// eslint-disable-next-line
bounds=this.getSignBounds(currentIndex,rotateAngle,currentPage,zoomvalue,currentLeft,currentTop,currentWidth,currentHeight);var image=new Image();image.src=currentValue;if(!this.pdfViewer.signatureFitMode||this.pdfViewer.signatureFitMode==='Default'){// To check whether the image shape is square or rectangle
var difference=20;var hightDifference=4;var heightRatio=2;if(Math.abs(image.height-image.width)<difference){if(bounds.width>bounds.height){bounds.x=bounds.x+bounds.width/heightRatio-bounds.height/heightRatio;bounds.width=bounds.height;}else{bounds.y=bounds.y+bounds.height/heightRatio-bounds.width/heightRatio;bounds.height=bounds.width;}}else{if(bounds.width>bounds.height){bounds.y=bounds.y+bounds.height/hightDifference;bounds.x=bounds.x+bounds.height/hightDifference;var height=bounds.height/heightRatio;bounds={x:bounds.x,y:bounds.y,width:bounds.width-height,height:bounds.height-height};}else{bounds.y=bounds.y+bounds.height/hightDifference;bounds.height=bounds.height/heightRatio;}}}annot={// eslint-disable-next-line max-len
id:currentField.id,bounds:{x:bounds.x,y:bounds.y,width:bounds.width,height:bounds.height},pageIndex:currentPage,data:currentValue,modifiedDate:'',shapeAnnotationType:'SignatureImage',opacity:1,rotateAngle:this.rotateAngle,annotName:'SignatureField',comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:''}};signString=annot.data;}else{if(currentValue.indexOf('base64')!==-1){// eslint-disable-next-line
bounds=this.getSignBounds(currentIndex,rotateAngle,currentPage,zoomvalue,currentLeft,currentTop,currentWidth,currentHeight);if(!this.pdfViewer.signatureFitMode||this.pdfViewer.signatureFitMode==='Default'){bounds=this.getDefaultBoundsforSign(bounds);}annot={// eslint-disable-next-line max-len
id:currentField.id,bounds:{x:bounds.x,y:bounds.y,width:bounds.width,height:bounds.height},pageIndex:currentPage,data:currentValue,modifiedDate:'',shapeAnnotationType:'SignatureImage',opacity:1,rotateAngle:this.rotateAngle,annotName:'SignatureField',comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:''}};signString=annot.data;}else{// eslint-disable-next-line
if(!this.pdfViewer.signatureFitMode||this.pdfViewer.signatureFitMode==='Default'){// eslint-disable-next-line
var signatureBounds=this.updateSignatureAspectRatio(currentValue,false,currentField);// eslint-disable-next-line
bounds=this.getSignBounds(currentIndex,rotateAngle,currentPage,zoomvalue,currentLeft,currentTop,signatureBounds.width,signatureBounds.height,true);bounds.x=bounds.x+signatureBounds.left;bounds.y=bounds.y+signatureBounds.top;}else{bounds=this.getSignBounds(currentIndex,rotateAngle,currentPage,zoomvalue,currentLeft,currentTop,currentWidth,currentHeight);}annot={// eslint-disable-next-line max-len
id:currentField.id,bounds:{x:bounds.x,y:bounds.y,width:bounds.width,height:bounds.height},pageIndex:currentPage,data:currentValue,modifiedDate:'',shapeAnnotationType:'Path',opacity:1,rotateAngle:this.rotateAngle,annotName:'SignatureField',comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:''}};}}if(this.pdfViewerBase.drawSignatureWithTool&&signatureField){annot.id=signatureField.id+"_content";var obj=this.pdfViewer.add(annot);signatureField.wrapper.children.push(obj.wrapper);}else{this.pdfViewer.add(annot);}if(annot&&annot.shapeAnnotationType==='Path'&&currentValue!==''){this.pdfViewerBase.currentSignatureAnnot=annot;// eslint-disable-next-line
var position={currentHeight:currentHeight,currentWidth:currentWidth,currentLeft:currentLeft,currentTop:currentTop};this.pdfViewerBase.signatureModule.addSignatureCollection(bounds,position);signString=this.pdfViewerBase.signatureModule.saveImageString;this.pdfViewerBase.currentSignatureAnnot=null;}// eslint-disable-next-line
var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+currentPage);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvass,currentPage);this.pdfViewerBase.signatureModule.showSignatureDialog(false);if(currentField.className==='e-pdfviewer-signatureformfields e-pv-signature-focus'){currentField.className='e-pdfviewer-signatureformfields-signature e-pv-signature-focus';}else{currentField.className='e-pdfviewer-signatureformfields-signature';}if(this.pdfViewerBase.drawSignatureWithTool&&signatureField){var key=target.offsetParent.offsetParent.id.split('_')[0]+'_content';this.updateSignatureDataInSession(annot,key);}else{this.updateDataInSession(currentField,annot.data,annot.bounds,signatureFontFamily,signatureFontSize);}currentField.style.pointerEvents='none';this.pdfViewerBase.signatureModule.hideSignaturePanel();if(this.pdfViewer.annotation){this.pdfViewer.annotation.addAction(annot.pageIndex,null,annot,'FormField Value Change','',annot,annot);}// eslint-disable-next-line
this.pdfViewer.fireSignatureAdd(annot.pageIndex,annot.id,'HandWrittenSignature',annot.bounds,annot.opacity,null,null,signString);this.pdfViewer.fireFocusOutFormField(currentField.name,currentValue);this.pdfViewerBase.drawSignatureWithTool=false;this.pdfViewer.isInitialFieldToolbarSelection=false;}}};FormFields.prototype.updateSignatureDataInSession=function(annot,key){var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){if(formFieldsData[i].Key===key){if(annot.shapeAnnotationType==="SignatureText"){formFieldsData[i].FormField.signatureType="Text";this.pdfViewerBase.formFieldCollection[i].FormField.signatureType="Text";this.pdfViewer.nameTable[key].signatureType="Text";formFieldsData[i].FormField.fontFamily=annot.fontFamily;this.pdfViewerBase.formFieldCollection[i].FormField.fontFamily=annot.fontFamily;this.pdfViewer.nameTable[key].fontFamily=annot.fontFamily;}else if(annot.shapeAnnotationType==="SignatureImage"){formFieldsData[i].FormField.signatureType="Image";this.pdfViewerBase.formFieldCollection[i].FormField.signatureType="Image";this.pdfViewer.nameTable[key].signatureType="Image";}else{formFieldsData[i].FormField.signatureType="Path";this.pdfViewerBase.formFieldCollection[i].FormField.signatureType="Path";this.pdfViewer.nameTable[key].signatureType="Path";}formFieldsData[i].FormField.signatureBound=annot.bounds;this.pdfViewerBase.formFieldCollection[i].FormField.signatureBound=annot.bounds;this.pdfViewer.nameTable[key].signatureBound=annot.bounds;if(annot.shapeAnnotationType==="Path"){var collectionData=sf.drawings.processPathData(annot.data);var csData=sf.drawings.splitArrayCollection(collectionData);formFieldsData[i].FormField.value=JSON.stringify(csData);this.pdfViewer.nameTable[key].value=annot.data;this.pdfViewer.nameTable[key.split('_')[0]].value=annot.data;this.pdfViewerBase.formFieldCollection[i].FormField.value=JSON.stringify(csData);}else{formFieldsData[i].FormField.value=annot.data;this.pdfViewerBase.formFieldCollection[i].FormField.value=annot.data;this.pdfViewer.nameTable[key.split('_')[0]].value=annot.data;this.pdfViewer.nameTable[key].value=annot.data;}this.pdfViewer.formDesigner.updateFormFieldCollections(formFieldsData[i].FormField);}}this.pdfViewerBase.setItemInSessionStorage(formFieldsData,'_formDesigner');};/**
     * @private
     */FormFields.prototype.getDefaultBoundsforSign=function(bounds){return{x:bounds.x+10,y:bounds.y+10,width:bounds.width-21,height:bounds.height-21};};// eslint-disable-next-line
FormFields.prototype.getSignBounds=function(currentIndex,rotateAngle,currentPage,zoomvalue,currentLeft,currentTop,currentWidth,currentHeight,isDraw){// eslint-disable-next-line
var bounds;var signatureId=this.pdfViewer.isInitialFieldToolbarSelection?'initialIcon':'signIcon';var signIcon=document.getElementById(signatureId+currentPage+'_'+currentIndex);var signLeft=parseFloat(signIcon.style.left)*zoomvalue;var difference=currentLeft*zoomvalue-signLeft/zoomvalue;if(rotateAngle===90||rotateAngle===270){this.rotateAngle=0;if(isDraw){return bounds={x:currentLeft-difference/zoomvalue-zoomvalue,y:currentTop+difference/zoomvalue+zoomvalue,width:currentWidth,height:currentHeight};}else{return bounds={x:currentLeft-difference/zoomvalue-zoomvalue,y:currentTop+difference/zoomvalue+zoomvalue,width:currentHeight,height:currentWidth};}}else{this.rotateAngle=0;return bounds={x:currentLeft,y:currentTop,width:currentWidth,height:currentHeight};}};// eslint-disable-next-line
FormFields.prototype.updateSameFieldsValue=function(event){if(this.formFieldsData){for(var i=0;i<this.formFieldsData.length;i++){// eslint-disable-next-line
var currentField=this.formFieldsData[i];if(event.target.name===currentField.FieldName&&event.target.id!==currentField.uniqueID){// eslint-disable-next-line
var currentTarget=document.getElementById(this.formFieldsData[i].uniqueID);if(currentTarget){currentTarget.value=event.target.value;}else{currentField.Text=event.target.value;this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData,'_formfields');}}}}};FormFields.prototype.updateFormFieldsValue=function(event){// eslint-disable-next-line
var currentTarget=event.target;var fieldIndex;var nextFields;if(currentTarget.InsertSpaces&&!this.isKeyDownCheck){// eslint-disable-next-line
var font=parseInt(currentTarget.style.width)+parseInt(currentTarget.style.height)/2;currentTarget.style.width=''+font+'px';this.isKeyDownCheck=true;}if(event.which===9&&currentTarget&&(currentTarget.className==='e-pdfviewer-formFields'||currentTarget.className==='e-pdfviewer-signatureformfields e-pv-signature-focus'||currentTarget.className==='e-pdfviewer-signatureformfields-signature')){// eslint-disable-next-line
var id=currentTarget.id.split('input_')[1].split('_')[0];// eslint-disable-next-line
var textLayer=document.getElementById(this.pdfViewer.element.id+'_textLayer_'+parseInt(id));// eslint-disable-next-line
var currentFields=textLayer.getElementsByClassName('e-pdfviewer-formFields');var istabindexed=true;fieldIndex=this.pdfViewer.formFieldCollections.findIndex(function(field){return field.id===currentTarget.id;});if(!event.shiftKey&&event.key==="Tab"){nextFields=fieldIndex+1<this.pdfViewer.formFieldCollections.length?this.pdfViewer.formFieldCollections[fieldIndex+1]:this.pdfViewer.formFieldCollections[0];}this.pdfViewer.focusFormField(nextFields);istabindexed=true;event.preventDefault();var tabindex=currentTarget.tabIndex+1;while(!istabindexed){for(var l=0;l<currentFields.length;l++){istabindexed=false;if(currentFields[l].tabIndex===tabindex){currentFields[l].focus();istabindexed=true;event.preventDefault();break;}}if(this.maintainTabIndex[id]===tabindex){istabindexed=true;}tabindex=tabindex+1;}}if(event.shiftKey&&event.key==="Tab"){var fieldIndex_1=this.pdfViewer.formFieldCollections.findIndex(function(field){return field.id===currentTarget.id;});var nextField=fieldIndex_1>0?this.pdfViewer.formFieldCollections[fieldIndex_1-1]:this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.length-1];this.pdfViewer.focusFormField(nextField);event.preventDefault();}if(event.currentTarget.classList.contains('e-pdfviewer-signatureformfields')||event.currentTarget.classList.contains('e-pdfviewer-signatureformfields-signature')){if(event.key==='Enter'){// eslint-disable-next-line
var currentTarget_1=event.target;this.currentTarget=currentTarget_1;for(var m=0;m<this.pdfViewer.formFieldCollections.length;m++){if(currentTarget_1.id===this.pdfViewer.formFieldCollections[m].id){this.setFocus(currentTarget_1.id);this.pdfViewer.fireFormFieldClickEvent('formFieldClicked',this.pdfViewer.formFieldCollections[m]);}}}else{event.preventDefault();}}};FormFields.prototype.changeFormFields=function(event){// eslint-disable-next-line
var currentTarget=event.target;this.updateDataInSession(currentTarget);};FormFields.prototype.calculateSignatureBounds=function(signatureCavasWidth,signatureCavasHeight,newdifferenceX,newdifferenceY,isSignature,currentField){var ratioX=newdifferenceX/signatureCavasWidth;var ratioY=newdifferenceY/signatureCavasHeight;var zoomvalue=this.pdfViewerBase.getZoomFactor();var currentWidth=0;var currentHeight=0;var isSignatureStretched=false;var isHeightStretched=false;var leftDifference=0;var topDifference=0;if(isSignature){currentWidth=this.pdfViewer.handWrittenSignatureSettings.width?this.pdfViewer.handWrittenSignatureSettings.width:150;currentHeight=this.pdfViewer.handWrittenSignatureSettings.height?this.pdfViewer.handWrittenSignatureSettings.height:100;}else{var fieldWidth=currentField.style.width==='100%'?currentField.clientWidth:parseFloat(currentField.style.width);var fieldHeight=currentField.style.height==='100%'?currentField.clientHeight:parseFloat(currentField.style.height);var fieldWidthRatio=fieldWidth/fieldHeight;var fieldHeightRatio=fieldHeight/fieldWidth;var canvasWidthRatio=signatureCavasWidth/signatureCavasHeight;var canvasHeightRatio=signatureCavasHeight/signatureCavasWidth;if(fieldWidthRatio>canvasWidthRatio||fieldHeightRatio>canvasWidthRatio||Math.abs(fieldWidthRatio-fieldHeightRatio)<=1){var ratioDifference=0;if(fieldHeightRatio>canvasWidthRatio||Math.abs(fieldWidthRatio-fieldHeightRatio)<=1){isHeightStretched=true;ratioDifference=fieldHeightRatio/canvasHeightRatio;}else{isSignatureStretched=true;ratioDifference=fieldWidthRatio/canvasWidthRatio;}if(currentField.style.transform==='rotate(90deg)'||currentField.style.transform==='rotate(270deg)'){// eslint-disable-next-line
currentWidth=fieldHeight/zoomvalue;// eslint-disable-next-line
currentHeight=fieldWidth/zoomvalue;}else{if(isSignatureStretched){// eslint-disable-next-line
leftDifference=fieldWidth/zoomvalue;// eslint-disable-next-line
currentWidth=fieldWidth/ratioDifference/zoomvalue;// eslint-disable-next-line
currentHeight=fieldHeight/zoomvalue;}if(isHeightStretched){// eslint-disable-next-line
topDifference=fieldHeight/zoomvalue;// eslint-disable-next-line
currentWidth=fieldWidth/zoomvalue;// eslint-disable-next-line
currentHeight=fieldHeight/ratioDifference/zoomvalue;}}}else{if(currentField.style.transform==='rotate(90deg)'||currentField.style.transform==='rotate(270deg)'){// eslint-disable-next-line
currentWidth=fieldHeight/zoomvalue;// eslint-disable-next-line
currentHeight=fieldWidth/zoomvalue;}else{// eslint-disable-next-line
currentWidth=fieldWidth/zoomvalue;// eslint-disable-next-line
currentHeight=fieldHeight/zoomvalue;}}}var currentLeftDiff=(signatureCavasWidth-newdifferenceX)/2;var currentTopDiff=(signatureCavasHeight-newdifferenceY)/2;if(isSignatureStretched){currentLeftDiff=currentLeftDiff/signatureCavasWidth*leftDifference;var leftValueDiff=(leftDifference*ratioX-currentWidth*ratioX)/2;currentLeftDiff=currentLeftDiff+leftValueDiff;currentTopDiff=currentTopDiff/signatureCavasHeight*currentHeight;}else if(isHeightStretched){currentLeftDiff=currentLeftDiff/signatureCavasWidth*currentWidth;currentTopDiff=currentTopDiff/signatureCavasHeight*topDifference;var topValueDiff=(topDifference*ratioY-currentHeight*ratioY)/2;currentTopDiff=currentTopDiff+topValueDiff;}else{currentLeftDiff=currentLeftDiff/signatureCavasWidth*currentWidth;currentTopDiff=currentTopDiff/signatureCavasHeight*currentHeight;}currentWidth=currentWidth*ratioX;currentHeight=currentHeight*ratioY;return{currentLeftDiff:currentLeftDiff,currentTopDiff:currentTopDiff,currentWidth:currentWidth,currentHeight:currentHeight};};/**
     * @param data
     * @param isSignature
     * @param currentField
     * @param data
     * @param isSignature
     * @param currentField
     * @param data
     * @param isSignature
     * @param currentField
     * @private
     */ // eslint-disable-next-line
FormFields.prototype.updateSignatureAspectRatio=function(data,isSignature,currentField){// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(data);// eslint-disable-next-line
var csData=sf.drawings.splitArrayCollection(collectionData);var minimumX=-1;var minimumY=-1;var maximumX=-1;var maximumY=-1;var signatureCanvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');var signatureCavasWidth=0;var signatureCavasHeight=0;for(var m=0;m<csData.length;m++){// eslint-disable-next-line
var val=csData[m];if(minimumX===-1){// eslint-disable-next-line
minimumX=parseFloat(val['x'].toString());// eslint-disable-next-line
maximumX=parseFloat(val['x'].toString());// eslint-disable-next-line
minimumY=parseFloat(val['y'].toString());// eslint-disable-next-line
maximumY=parseFloat(val['y'].toString());}else{// eslint-disable-next-line
var point1=parseFloat(val['x'].toString());// eslint-disable-next-line
var point2=parseFloat(val['y'].toString());if(minimumX>=point1){minimumX=point1;}if(minimumY>=point2){minimumY=point2;}if(maximumX<=point1){maximumX=point1;}if(maximumY<=point2){maximumY=point2;}}}signatureCavasWidth=signatureCanvas?signatureCanvas.clientWidth:650;signatureCavasHeight=signatureCanvas?signatureCanvas.clientHeight:300;var newdifferenceX=maximumX-minimumX;var newdifferenceY=maximumY-minimumY;var signBounds=this.calculateSignatureBounds(signatureCavasWidth,signatureCavasHeight,newdifferenceX,newdifferenceY,isSignature,currentField);if(isSignature){var zoomvalue=this.pdfViewerBase.getZoomFactor();var pageIndex=this.pdfViewerBase.currentPageNumber-1;var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+pageIndex);var currentLeft=(parseFloat(pageDiv.style.width)/2-signBounds.currentWidth/2)/zoomvalue;// eslint-disable-next-line max-len
var currentTop=(parseFloat(pageDiv.style.height)/2-signBounds.currentHeight/2)/zoomvalue;return{x:currentLeft,y:currentTop,width:signBounds.currentWidth,height:signBounds.currentHeight};}else{return{left:signBounds.currentLeftDiff,top:signBounds.currentTopDiff,width:signBounds.currentWidth,height:signBounds.currentHeight};}};/**
     * @param target
     * @param signaturePath
     * @param signatureBounds
     * @param signatureFontFamily
     * @param signatureFontSize
     * @param target
     * @param signaturePath
     * @param signatureBounds
     * @param signatureFontFamily
     * @param signatureFontSize
     * @param target
     * @param signaturePath
     * @param signatureBounds
     * @param signatureFontFamily
     * @param signatureFontSize
     * @param target
     * @param signaturePath
     * @param signatureBounds
     * @param signatureFontFamily
     * @param signatureFontSize
     * @param target
     * @param signaturePath
     * @param signatureBounds
     * @param signatureFontFamily
     * @param signatureFontSize
     * @private
     */ // eslint-disable-next-line
FormFields.prototype.updateDataInSession=function(target,signaturePath,signatureBounds,signatureFontFamily,signatureFontSize){this.pdfViewerBase.updateDocumentEditedProperty(true);// eslint-disable-next-line
var filterFields=[];var fieldsByName=" ";var filterFieldName=[];var filterArrayLength=0;var data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');if(data){// eslint-disable-next-line
var FormFieldsData=JSON.parse(data);if(target&&target.type!=='checkbox'&&target.type!=='radio'){filterFields=FormFieldsData.filter(function(item){return item.uniqueID===target.id;});if(filterFields.length>0){fieldsByName=filterFields[0].FieldName;filterFieldName=FormFieldsData.filter(function(item){return item.FieldName===fieldsByName;});filterArrayLength=filterFieldName.length;}}for(var m=0;m<FormFieldsData.length;m++){// eslint-disable-next-line
var currentData=FormFieldsData[m];if(currentData.ActualFieldName===target.name){currentData.selectedIndex=target.selectedIndex;}if(target.classList&&target.classList.contains('e-pdfviewer-signatureformfields-signature')?currentData.uniqueID===target.id:currentData.uniqueID===target.id||fieldsByName===currentData.FieldName){if(target&&target.type==='text'||target.type==='password'||target.type==='textarea'||target.classList&&target.classList.contains('e-pdfviewer-signatureformfields-signature')){var signField=target;if(signField.classList.contains('e-pdfviewer-signatureformfields')||signField.classList.contains('e-pdfviewer-signatureformfields-signature')){if(signaturePath){currentData.Value=signaturePath;}if(signatureBounds){currentData.Bounds=signatureBounds;}if(signatureFontFamily){currentData.FontFamily=signatureFontFamily;currentData.FontSize=signatureFontSize;}}else{currentData.Text=target.value;currentData.Value=target.value;}}else if(target.type==='radio'){for(var l=0;l<FormFieldsData.length;l++){// eslint-disable-next-line
var currentType=FormFieldsData[l];if(FormFieldsData[l].GroupName===target.name){FormFieldsData[l].Selected=false;}}currentData.Selected=true;}else if(target.type==='checkbox'){for(var l=0;l<FormFieldsData.length;l++){// eslint-disable-next-line
var currentFormField=FormFieldsData[l];if(currentFormField.GroupName===target.name){if(currentData.CheckBoxGroupName===currentFormField.CheckBoxGroupName){if(target.checked){currentFormField.Selected=true;}else{currentFormField.Selected=false;}}else{currentFormField.Selected=false;}// eslint-disable-next-line
var currentTarget=document.getElementById(currentFormField.uniqueID);if(currentTarget){if(currentData.GroupName===target.name&&currentData.uniqueID!==currentTarget.id&&currentData.CheckBoxGroupName===currentFormField.CheckBoxGroupName){if(target.checked){currentData.Selected=true;currentTarget.checked=true;}else{currentData.Selected=false;currentTarget.checked=false;}}else if(currentData.GroupName===target.name&&currentData.uniqueID!==currentTarget.id){currentData.Selected=false;currentTarget.checked=false;}}}}if(target.checked){currentData.Selected=true;}else{currentData.Selected=false;}}else if(target.type==='select-one'&&target.size===0){// eslint-disable-next-line
var currentValue=target.options[target.selectedIndex].textContent;// eslint-disable-next-line
var childrens=target.children;for(var k=0;k<childrens.length;k++){if(childrens[k].textContent===currentValue){currentData.SelectedValue=currentValue;}}}else if(target.type==='select-multiple'||target.size>0){// eslint-disable-next-line
var currentValue=target.selectedOptions;currentData.SelectedList=[];for(var z=0;z<currentValue.length;z++){// eslint-disable-next-line
var childrens=target.children;for(var k=0;k<childrens.length;k++){if(childrens[k]===currentValue[z]){currentData.SelectedList.push(k);}}}}if(target.disabled){currentData.IsReadonly=true;}this.updateFormFieldsCollection(currentData);filterArrayLength--;if(filterArrayLength==0)break;}else if(target&&target.getAttribute('list')!=null&&target.type==='text'&&currentData.uniqueID===target.list.id){currentData.SelectedValue=target.value;}this.updateFormFieldsCollection(currentData);}window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_formfields');this.formFieldsData=FormFieldsData;this.pdfViewerBase.setItemInSessionStorage(FormFieldsData,'_formfields');}else{if(this.pdfViewer.formDesignerModule){var selectedItem=this.pdfViewer.nameTable[target.id.split('_')[0]];selectedItem.value=target.value;var point=sf.drawings.cornersPointsBeforeRotation(selectedItem.wrapper.children[0]).topLeft;this.pdfViewer.formDesignerModule.updateFormDesignerFieldInSessionStorage(point,selectedItem.wrapper.children[0],selectedItem.formFieldAnnotationType,selectedItem);}}};/**
     * @private
     */FormFields.prototype.removeExistingFormFields=function(){var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');var formFieldsData=JSON.parse(data);if(formFieldsData){for(var i=0;i<formFieldsData.length;i++){this.pdfViewer.formDesignerModule.deleteFormField(formFieldsData[i].Key.split('_')[0]);}}};// eslint-disable-next-line
FormFields.prototype.applyCommonProperties=function(inputdiv,pageIndex,index,currentData,isFieldRotated){// eslint-disable-next-line
var inputField=document.getElementById(this.pdfViewer.dataId+'input_'+pageIndex+'_'+index);if(inputField){var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageIndex);if(inputdiv.type==='text'&&inputField.parentElement!==textLayer){inputField.parentElement.remove();}inputField.remove();}// eslint-disable-next-line
var signIcon=document.getElementById('signIcon'+pageIndex+'_'+pageIndex);var left=parseFloat(inputdiv.style.left);var top=parseInt(inputdiv.style.top);var width=parseFloat(inputdiv.style.width);var height=parseFloat(inputdiv.style.height);var signIconWidth;var signIconHeght;var hightDifference;var widthDifference;var zoomvalue=this.pdfViewerBase.getZoomFactor();if(signIcon&&!isFieldRotated){signIconWidth=parseFloat(signIcon.style.width);signIconHeght=parseFloat(signIcon.style.height);if(signIcon.style.transform=='rotate(90deg)'){signIcon.style.transform='rotate(0deg)';hightDifference=height/2;widthDifference=signIconWidth*zoomvalue;signIcon.style.left=left-(hightDifference-signIconWidth*zoomvalue)+widthDifference/2+'px';}if(signIcon.style.transform=='rotate(180deg)'){signIcon.style.transform='rotate(0deg)';signIcon.style.left=left+'px';signIcon.style.top=top+'px';}if(signIcon.style.transform=='rotate(270deg)'){signIcon.style.transform='rotate(0deg)';hightDifference=height/2;widthDifference=signIconWidth*zoomvalue;signIcon.style.left=left-(hightDifference-widthDifference)+widthDifference/2+'px';signIcon.style.top=top+(width+signIconHeght*zoomvalue)+signIconHeght*zoomvalue/2+'px';}}if(currentData.IsSignatureField&&this.isSignatureField){inputdiv.className='e-pdfviewer-signatureformfields-signature';inputdiv.style.pointerEvents='none';}else if(currentData.IsSignatureField){inputdiv.className='e-pdfviewer-signatureformfields';}else if(currentData.Name!=='Button'){inputdiv.className='e-pdfviewer-formFields';}inputdiv.id=this.pdfViewer.dataId+'input_'+pageIndex+'_'+index;inputdiv.style.zIndex=1000;};/**
     * @param currentData
     * @param pageIndex
     * @param index
     * @param printContainer
     * @param currentData
     * @param pageIndex
     * @param index
     * @param printContainer
     * @private
     */ // eslint-disable-next-line
FormFields.prototype.createFormFields=function(currentData,pageIndex,index,printContainer,count){// eslint-disable-next-line
var currentField;// eslint-disable-next-line
switch(currentData['Name']){case'Textbox':currentField=this.createTextBoxField(currentData,pageIndex,'text');break;case'Password':currentField=this.createTextBoxField(currentData,pageIndex,'password');break;case'RadioButton':currentField=this.createRadioBoxField(currentData,pageIndex,'radio');break;case'CheckBox':currentField=this.createRadioBoxField(currentData,pageIndex,'checkbox',printContainer);break;case'DropDown':currentField=this.createDropDownField(currentData,pageIndex,index,printContainer);break;case'ListBox':currentField=this.createListBoxField(currentData,pageIndex);break;case'SignatureField':currentField=this.createSignatureField(currentData,pageIndex,index,printContainer,count);if(currentData.Value&&currentData.Value!==''){this.renderExistingAnnnot(currentData,index,printContainer);this.isSignatureRendered=true;count++;}break;case'Button':currentField=this.createButtonField(currentData,pageIndex);break;case'ink':case'SignatureText':case'SignatureImage':if(currentData.Value&&currentData.Value!==''&&!this.isSignatureRendered){this.renderExistingAnnnot(currentData,index,printContainer);}break;}return{currentField:currentField,count:count};};FormFields.prototype.getFormFieldType=function(currentData){// eslint-disable-next-line
var currentField;// eslint-disable-next-line
switch(currentData['Name']){case'Textbox':currentField='Textbox';break;case'Password':currentField='Password';break;case'RadioButton':currentField='RadioButton';break;case'CheckBox':currentField='CheckBox';break;case'DropDown':currentField='DropDown';break;case'ListBox':currentField='ListBox';break;case'SignatureField':currentField='SignatureField';if(currentData.IsInitialField){currentField='InitialField';}break;case'InitialField':currentField='InitialField';break;}return currentField;};// eslint-disable-next-line
FormFields.prototype.createButtonField=function(data,pageIndex){// eslint-disable-next-line
var inputField=document.createElement('input');if(data.Value){inputField.type='image';inputField.src=data.Value;}else{inputField.type='button';}inputField.className='e-pv-buttonItem';if(data.Text!==''){inputField.value=data.Text;}else{inputField.value='';}inputField.name=data.FieldName;return inputField;};// eslint-disable-next-line
FormFields.prototype.createTextBoxField=function(data,pageIndex,type){// eslint-disable-next-line
var inputField;if(data.Visible===1){return;}if(data.Multiline){inputField=document.createElement('textarea');inputField.style.resize='none';}else{inputField=document.createElement('input');inputField.type=type;}if(data.MaxLength>0){inputField.maxLength=data.MaxLength;}this.addAlignmentPropety(data,inputField);if(data.Text!==''){inputField.value=data.Text;}else{inputField.value='';}if(!this.pdfViewer.enableAutoComplete){inputField.autocomplete='off';}inputField.name=data.FieldName;return inputField;};// eslint-disable-next-line
FormFields.prototype.checkIsReadonly=function(data,inputField){var isReadonly=false;for(var n=0;n<this.readOnlyCollection.length;n++){if(inputField.id===this.readOnlyCollection[n]){isReadonly=true;break;}}if(data.IsReadonly||!this.pdfViewer.enableFormFields||isReadonly){inputField.disabled=true;inputField.style.cursor='default';inputField.style.backgroundColor='transparent';}else{// eslint-disable-next-line
var borderColor=data.BackColor;inputField.style.backgroundColor='rgba('+borderColor.R+','+borderColor.G+','+borderColor.B+','+0.2+')';// eslint-disable-next-line
var fontColor=data.FontColor;inputField.style.color='rgba('+fontColor.R+','+fontColor.G+','+fontColor.B+','+1+')';}};/**
     * @param isReadonly
     * @private
     */ // eslint-disable-next-line max-len
FormFields.prototype.formFieldsReadOnly=function(isReadonly){// eslint-disable-next-line
var formFields=document.getElementsByClassName('e-pdfviewer-formFields');this.makeformFieldsReadonly(formFields,isReadonly);// eslint-disable-next-line
var signatureFields=document.getElementsByClassName('e-pdfviewer-signatureformfields');this.makeformFieldsReadonly(signatureFields,isReadonly);};// eslint-disable-next-line
FormFields.prototype.makeformFieldsReadonly=function(formFields,isReadonly){for(var i=0;i<formFields.length;i++){if(formFields[i]){// eslint-disable-next-line
var inputField=formFields[i];if(!isReadonly){inputField.disabled=true;inputField.style.cursor='default';}else{// eslint-disable-next-line
inputField.disabled=false;}}}};// eslint-disable-next-line
FormFields.prototype.applyTabIndex=function(data,inputField,pageIndex){inputField.tabIndex=data.TabIndex;this.maxTabIndex=Math.max(this.maxTabIndex,inputField.tabIndex);if(this.minTabIndex===-1){this.minTabIndex=inputField.tabIndex;}this.minTabIndex=Math.min(this.minTabIndex,inputField.tabIndex);this.maintainTabIndex[pageIndex.toString()]=this.maxTabIndex;this.maintanMinTabindex[pageIndex.toString()]=this.minTabIndex;};// eslint-disable-next-line
FormFields.prototype.checkIsRequiredField=function(data,inputField){if(data.IsRequired){inputField.required=true;inputField.style.border='1px solid red';}else{// eslint-disable-next-line
var borderColor=data.BorderColor;inputField.style.border=data.BorderWidth+'px';inputField.style.borderColor='rgba('+borderColor.R+','+borderColor.G+','+borderColor.B+','+1+')';}if(inputField.type!=='checkbox'&&inputField.type!=='radio'){var borderStyle=data.BorderStyle;this.addBorderStylePropety(borderStyle,inputField);}};// eslint-disable-next-line
FormFields.prototype.applyDefaultColor=function(inputField){// eslint-disable-next-line max-len
if(inputField.type!=='button'&&(inputField.style.backgroundColor==='rgba(255, 255, 255, 0.2)'||inputField.style.backgroundColor==='rgba(0, 0, 0, 0.2)')){inputField.style.backgroundColor='rgba(0, 20, 200, 0.2)';}if(inputField.style.color==='rgba(255, 255, 255, 0.2)'){inputField.style.color='black';}};// eslint-disable-next-line
FormFields.prototype.addAlignmentPropety=function(data,inputField){// eslint-disable-next-line
var alignment=data.Alignment;switch(alignment){case 0:inputField.style.textAlign='left';break;case 1:inputField.style.textAlign='center';break;case 2:inputField.style.textAlign='right';break;case 3:inputField.style.textAlign='justify';break;}};// eslint-disable-next-line
FormFields.prototype.addBorderStylePropety=function(borderStyle,inputField){// eslint-disable-next-line
switch(borderStyle){case 0:inputField.style.borderStyle='solid';break;case 1:inputField.style.borderStyle='dashed';break;case 2:inputField.style.borderStyle='outset';break;case 3:inputField.style.borderStyle='inset';break;case 4:inputField.style.borderStyle='outset';break;case 5:inputField.style.borderStyle='dotted';break;case 6:inputField.style.borderStyle='inset';break;}};// eslint-disable-next-line
FormFields.prototype.createRadioBoxField=function(data,pageIndex,type,printContainer){// eslint-disable-next-line
var inputField=document.createElement('input');inputField.type=type;if(data.Selected){inputField.checked=true;inputField.setAttribute('checked',true);}inputField.name=data.GroupName;inputField.value=data.Value;return inputField;};// eslint-disable-next-line
FormFields.prototype.createDropDownField=function(data,pageIndex,index,printContainer){// eslint-disable-next-line
var inputField=document.createElement('select');// eslint-disable-next-line
var childItems=data['TextList'];if(data.Selected&&!printContainer){// eslint-disable-next-line
var previousField=document.getElementById('editableDropdown'+pageIndex+'_'+index);if(previousField){previousField.remove();}// eslint-disable-next-line
var inputFields=document.createElement('input');inputFields.id='editableDropdown'+pageIndex+'_'+index;inputFields.setAttribute('list',this.pdfViewer.dataId+'input_'+pageIndex+'_'+index);// eslint-disable-next-line
var bounds=data['LineBounds'];// eslint-disable-next-line
var font=data['Font'];inputFields.style.position='absolute';inputFields.style.border='0px';// eslint-disable-next-line
this.applyPosition(inputFields,bounds,font,pageIndex,data['Rotation']);inputFields.style.backgroundColor='rgba(0, 20, 200, 0.2)';inputFields.className='e-pdfviewer-formFields';inputFields.value=data.SelectedValue;if(printContainer){printContainer.appendChild(inputFields);}else{var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageIndex);textLayer.appendChild(inputFields);}inputFields.addEventListener('focus',this.focusFormFields.bind(this));inputFields.addEventListener('blur',this.blurFormFields.bind(this));inputFields.addEventListener('click',this.updateFormFields.bind(this));inputFields.addEventListener('change',this.changeFormFields.bind(this));inputFields.addEventListener('keydown',this.updateFormFieldsValue.bind(this));inputField=document.createElement('DATALIST');}for(var j=0;j<childItems.length;j++){// eslint-disable-next-line
var option=document.createElement('option');option.className='e-dropdownSelect';if(data.SelectedValue===childItems[j]||data.selectedIndex===j){option.selected=true;}else{option.selected=false;}if(inputField.nodeName==='DATALIST'){option.value=childItems[j];}option.innerHTML=childItems[j];inputField.appendChild(option);}inputField.name=data.FieldName;return inputField;};// eslint-disable-next-line
FormFields.prototype.createListBoxField=function(data,pageIndex){// eslint-disable-next-line
var inputField=document.createElement('select');// eslint-disable-next-line
var childItems=data['TextList'];if(data.MultiSelect){inputField.multiple=true;}else{inputField.multiple=false;inputField.size=childItems.length;}for(var j=0;j<childItems.length;j++){// eslint-disable-next-line
var option=document.createElement('option');option.className='e-pdfviewer-ListBox';for(var k=0;k<data.SelectedList.length;k++){if(data.SelectedList[k]===j){option.selected=true;}}option.innerHTML=childItems[j];inputField.appendChild(option);}inputField.name=data.Text;return inputField;};// eslint-disable-next-line
FormFields.prototype.createSignatureField=function(data,pageIndex,index,printContainer,count){// eslint-disable-next-line
var inputField=document.createElement('div');inputField.name=data.FieldName;if(data.Visible===1){inputField.style.visibility='hidden';}// eslint-disable-next-line
var previousField=document.getElementById('signIcon'+pageIndex+'_'+index);if(previousField&&!printContainer){previousField.remove();}this.pdfViewerBase.isInitialField=data.IsInitialField;var signIndicator=this.pdfViewerBase.isInitialField?"Initial":"Sign";//check whether the width for sign indicator has default value or not and then set the default width value for initial field.
var signatureFieldIndicatorWidth=20;// eslint-disable-next-line
var span=document.createElement('span');var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageIndex);// eslint-disable-next-line
var bounds=data['LineBounds'];// eslint-disable-next-line
var font=data['Font'];var left=this.ConvertPointToPixel(bounds.X);var top=this.ConvertPointToPixel(bounds.Y);var height=10;// eslint-disable-next-line max-len
var width=signatureFieldIndicatorWidth>bounds.Width/2?bounds.Width/2:signatureFieldIndicatorWidth;var fontSize=10;span.style.position='absolute';span.id='signIcon'+pageIndex+'_'+index;var zoomvalue=this.pdfViewerBase.getZoomFactor();var rotation=0;// eslint-disable-next-line
var annotBounds={left:left,top:top,width:width,height:height};// eslint-disable-next-line
var fieldBounds=this.getBounds(annotBounds,pageIndex);span.style.transform='rotate('+rotation+'deg)';span.style.left=fieldBounds.left*zoomvalue+'px';span.style.top=fieldBounds.top*zoomvalue+'px';if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){span.style.height=5+'px';span.style.width=10+'px';span.style.fontSize='3px';}else{span.style.height=height+'px';span.style.width=width+'px';span.style.fontSize=fontSize+'px';if(sf.base.isBlazor()){span.style.fontSize=fontSize-1+'px';}}span.style.padding='2px';span.style.textAlign='center';span.style.boxSizing='content-box';// eslint-disable-next-line
span.innerHTML=signIndicator;span.style.color='black';// eslint-disable-next-line
span.style.backgroundColor='orange';span.style.opacity=1;if(data.Visible===1){span.style.visibility='hidden';}textLayer.appendChild(span);this.addSignaturePath(data,count);return{inputField:inputField,index:index};};// eslint-disable-next-line
FormFields.prototype.addSignaturePath=function(signData,count){this.isSignatureField=false;// eslint-disable-next-line
var data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');if(data){// eslint-disable-next-line
var formFieldsData=JSON.parse(data);for(var m=0;m<formFieldsData.length;m++){// eslint-disable-next-line
var currentData=formFieldsData[m];// eslint-disable-next-line max-len
if((currentData.Name==='ink'||currentData.Name==='SignatureField'||currentData.Name==='SignatureImage'||currentData.Name==='SignatureText')&&currentData.FieldName===signData.ActualFieldName+'_'+count&&currentData.Value&&currentData.Value!==''){signData.Value=currentData.Value;signData.FontFamily=currentData.FontFamily;signData.FontSize=currentData.FontSize;this.isSignatureField=true;if(!signData.Bounds){signData.Bounds=currentData.LineBounds;}break;}}}return this.isSignatureField;};// eslint-disable-next-line
FormFields.prototype.getBounds=function(bound,pageIndex,rotation,isFieldRotated){// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];// eslint-disable-next-line
var bounds;if(rotation>0){bounds=this.getBoundsPosition(rotation,bound,pageDetails);}else{bounds=this.getBoundsPosition(pageDetails.rotation,bound,pageDetails,isFieldRotated);}return bounds;};// eslint-disable-next-line
FormFields.prototype.getBoundsPosition=function(rotation,bound,pageDetails,isFieldRotated){// eslint-disable-next-line
var bounds;if(!isFieldRotated){switch(rotation){case 90:// eslint-disable-next-line
bounds={left:pageDetails.width-bound.top-bound.height,top:bound.left,width:bound.height,height:bound.width};break;case 180:// eslint-disable-next-line
bounds={left:pageDetails.width-bound.left-bound.width,top:pageDetails.height-bound.top-bound.height,width:bound.width,height:bound.height};break;case 270:// eslint-disable-next-line
bounds={left:bound.top,top:pageDetails.height-bound.left-bound.width,width:bound.height,height:bound.width};break;case 0:bounds=bound;break;case 1:// eslint-disable-next-line
bounds={left:pageDetails.width-bound.top-bound.height,top:bound.left,width:bound.height,height:bound.width};break;case 2:// eslint-disable-next-line
bounds={left:pageDetails.width-bound.left-bound.width,top:pageDetails.height-bound.top-bound.height,width:bound.width,height:bound.height};break;case 3:// eslint-disable-next-line
bounds={left:bound.top,top:pageDetails.height-bound.left-bound.width,width:bound.height,height:bound.width};break;}if(!bounds){bounds=bound;}}else{switch(rotation){case 0:bounds=bound;break;case 1:bounds={left:pageDetails.width-bound.top-bound.height-(bound.width/2-bound.height/2),top:bound.left+(bound.width/2-bound.height/2),width:bound.width,height:bound.height};break;case 2:bounds={left:pageDetails.width-bound.left-bound.width,top:pageDetails.height-bound.top-bound.height,width:bound.width,height:bound.height};break;case 3:bounds={left:bound.top-(bound.width/2-bound.height/2),top:pageDetails.height-bound.left-bound.width+(bound.width/2-bound.height/2),width:bound.width,height:bound.height};break;}if(!bounds){bounds=bound;}}return bounds;};// eslint-disable-next-line
FormFields.prototype.applyPosition=function(inputField,bounds,font,pageIndex,rotation,isFieldRotated,isParentDiv,insertSpaceValue){if(bounds){var left=this.ConvertPointToPixel(bounds.X);var top_2=this.ConvertPointToPixel(bounds.Y);var width=this.ConvertPointToPixel(bounds.Width);var height=this.ConvertPointToPixel(bounds.Height);var fontHeight=0;// eslint-disable-next-line
var fieldBounds={left:left,top:top_2-0.2,width:width,height:height+0.2};// eslint-disable-next-line
var annotBounds=this.getBounds(fieldBounds,pageIndex,rotation,isFieldRotated);if(font!==null&&font.Height){inputField.style.fontFamily=font.Name;if(font.Italic){inputField.style.fontStyle='italic';}if(font.Bold){inputField.style.fontWeight='Bold';}fontHeight=this.ConvertPointToPixel(font.Size);}if(isParentDiv===undefined){inputField.style.padding='0px 2px 2px 2px';}this.pdfViewerBase.setStyleToTextDiv(inputField,annotBounds.left,annotBounds.top,fontHeight,annotBounds.width,annotBounds.height,false,isParentDiv,insertSpaceValue);}};// eslint-disable-next-line
FormFields.prototype.renderExistingAnnnot=function(data,index,printContainer){if(!printContainer){// eslint-disable-next-line
var bounds=void 0;if(data.Bounds&&data.Name!=='ink'){bounds=data.Bounds;}else{bounds=data.LineBounds;}var currentLeft=void 0;var currentTop=void 0;var currentWidth=void 0;var currentHeight=void 0;if(bounds.x||bounds.y||bounds.width||bounds.height){currentLeft=bounds.x;currentTop=bounds.y;currentWidth=bounds.width;currentHeight=bounds.height;}else{currentLeft=this.ConvertPointToPixel(bounds.X);currentTop=this.ConvertPointToPixel(bounds.Y);currentWidth=this.ConvertPointToPixel(bounds.Width);currentHeight=this.ConvertPointToPixel(bounds.Height);}// eslint-disable-next-line
var currentPage=parseFloat(data['PageIndex']);// eslint-disable-next-line
var bound={left:currentLeft,top:currentTop,width:currentWidth,height:currentHeight};// eslint-disable-next-line
var newBounds=this.updateSignatureBounds(bound,currentPage);var annot=void 0;var fontFamily=data.FontFamily?data.FontFamily:data.fontFamily;// eslint-disable-next-line
if(data.Value.split('base64,')[1]){annot={// eslint-disable-next-line max-len
id:this.pdfViewer.dataId+'input_'+currentPage+'_'+index,bounds:newBounds,pageIndex:currentPage,data:data.Value,modifiedDate:'',shapeAnnotationType:'SignatureImage',opacity:1,rotateAngle:this.getAngle(currentPage),annotName:'SignatureField',comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:''}};}else if(fontFamily){annot={// eslint-disable-next-line max-len
id:this.pdfViewer.dataId+'input_'+currentPage+'_'+index,bounds:newBounds,pageIndex:currentPage,data:data.Value,modifiedDate:'',shapeAnnotationType:'SignatureText',opacity:1,rotateAngle:this.getAngle(currentPage),annotName:'SignatureField',comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:''},fontFamily:data.FontFamily,fontSize:data.FontSize};annot.fontFamily=fontFamily;annot.fontSize=data.FontSize?data.FontSize:data.fontSize;}else{annot={// eslint-disable-next-line max-len
id:this.pdfViewer.dataId+'input_'+currentPage+'_'+index,bounds:newBounds,pageIndex:currentPage,data:data.Value,modifiedDate:'',shapeAnnotationType:'Path',opacity:1,rotateAngle:this.getAngle(currentPage),annotName:'SignatureField',comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:''}};}if((data.Name==='SignatureField'||data.Name==='InitialField')&&!sf.base.isNullOrUndefined(data.id)){var elementId=data.id;var signatureFieldElement=document.getElementById(elementId+'_content_html_element');var signatureField=this.pdfViewer.nameTable[elementId];annot.id=signatureField.id+"_content";var obj=this.pdfViewer.add(annot);signatureField.wrapper.children.push(obj.wrapper);if(!sf.base.isNullOrUndefined(signatureFieldElement)&&this.isSignatureField){var inputField=signatureFieldElement.children[0].children[0];inputField.style.pointerEvents='none';inputField.className='e-pdfviewer-signatureformfields-signature';inputField.parentElement.style.pointerEvents='none';}}else{this.pdfViewer.add(annot);}data.Bounds=annot.bounds;if(this.pdfViewer.formDesignerModule){this.updateSignatureDataInSession(annot,annot.id);}// eslint-disable-next-line
var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+currentPage);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvass,currentPage);}};// eslint-disable-next-line
FormFields.prototype.updateSignatureBounds=function(bound,pageIndex){// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];if(pageDetails){if(pageDetails.rotation===1){return{x:pageDetails.width-bound.top-bound.height-(bound.width/2-bound.height/2),y:bound.left+(bound.width/2-bound.height/2),width:bound.width,height:bound.height};}else if(pageDetails.rotation===2){// eslint-disable-next-line max-len
return{x:pageDetails.width-bound.left-bound.width,y:pageDetails.height-bound.top-bound.height,width:bound.width,height:bound.height};}else if(pageDetails.rotation===3){return{x:bound.top-(bound.width/2-bound.height/2),y:pageDetails.height-bound.left-bound.width+(bound.width/2-bound.height/2),width:bound.width,height:bound.height};}else{return{x:bound.left,y:bound.top,width:bound.width,height:bound.height};}}else{return{x:bound.left,y:bound.top,width:bound.width,height:bound.height};}};FormFields.prototype.resetFormFields=function(){var formFieldData=this.pdfViewer.formFieldCollections;for(var i=0;i<formFieldData.length;i++){var currentData=formFieldData[i];this.currentTarget=document.getElementById(currentData.id);if(currentData.type==='Textbox'){this.currentTarget.value=currentData.value;}else if(currentData.type==='RadioButton'){this.currentTarget.checked=currentData.value;if(currentData.value){this.updateDataInSession(this.currentTarget);}}else if(currentData.type==='DropDown'){this.currentTarget.value=currentData.value;}else if(currentData.type==='CheckBox'){this.currentTarget.checked=currentData.value;}else if(currentData.type==='SignatureField'){// eslint-disable-next-line
var annotation=this.pdfViewer.nameTable[currentData.id];if(annotation){if(this.currentTarget&&this.currentTarget.className==='e-pdfviewer-signatureformfields-signature'){this.currentTarget.className='e-pdfviewer-signatureformfields';this.currentTarget.style.pointerEvents='';this.updateDataInSession(this.currentTarget,'');}this.pdfViewer.remove(annotation);this.pdfViewer.renderDrawing();}}if(currentData.type!=='RadioButton'&&currentData.type!=='SignatureField'){this.updateDataInSession(this.currentTarget);}}};/**
     * @private
     */ // eslint-disable-next-line
FormFields.prototype.clearFormFieldStorage=function(){// eslint-disable-next-line
var sessionSize=Math.round(JSON.stringify(window.sessionStorage).length/1024);var maxSessionSize=4500;if(sessionSize>maxSessionSize){var storageLength=window.sessionStorage.length;// eslint-disable-next-line
var annotationList=[];for(var i=0;i<storageLength;i++){if(window.sessionStorage.key(i)&&window.sessionStorage.key(i).split('_')[3]){if(window.sessionStorage.key(i).split('_')[3]==='annotations'){// eslint-disable-next-line max-len
this.pdfViewerBase.formFieldStorage[window.sessionStorage.key(i)]=window.sessionStorage.getItem(window.sessionStorage.key(i));annotationList.push(window.sessionStorage.key(i));}}}if(annotationList){for(var i=0;i<annotationList.length;i++){window.sessionStorage.removeItem(annotationList[i]);}}}};// eslint-disable-next-line
FormFields.prototype.clearFormFields=function(formField){// eslint-disable-next-line
var data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');if(data){// eslint-disable-next-line
var formFieldsData=void 0;if(formField){formFieldsData=[formField];}else{formFieldsData=JSON.parse(data);}var isFirstRadio=true;for(var m=0;m<formFieldsData.length;m++){// eslint-disable-next-line
var currentData=formFieldsData[m];if(formField){currentData.uniqueID=formField.id;currentData.Name=formField.type;}// eslint-disable-next-line
this.currentTarget=document.getElementById(currentData.uniqueID);if(currentData.Name==='Textbox'){this.currentTarget.value='';}else if(currentData.Name==='RadioButton'){if(isFirstRadio){this.currentTarget.checked=true;this.updateDataInSession(this.currentTarget);isFirstRadio=false;}}else if(currentData.Name==='DropDown'){this.currentTarget.value=currentData.TextList[0];}else if(currentData.Name==='CheckBox'){this.currentTarget.checked=false;}else if(currentData.Name==='SignatureField'){// eslint-disable-next-line
var annotation=this.pdfViewer.nameTable[currentData.uniqueID];if(annotation){if(this.currentTarget&&this.currentTarget.className==='e-pdfviewer-signatureformfields-signature'){this.currentTarget.className='e-pdfviewer-signatureformfields';this.currentTarget.style.pointerEvents='';this.currentTarget.parentElement.style.pointerEvents='';this.updateDataInSession(this.currentTarget,'');if(formField){formField.value='';formField.signatureType=[formField.signatureType];formField.signatureType[0]='';}}this.pdfViewer.remove(annotation);this.pdfViewer.renderDrawing();}}if(currentData.Name!=='SignatureField'&&currentData.Name!=='ink'&&currentData.Name!=='RadioButton'){this.updateDataInSession(this.currentTarget);}}}};/**
     * @param number
     * @private
     */ // eslint-disable-next-line
FormFields.prototype.ConvertPointToPixel=function(number){return number*(96/72);};/**
     * @private
     */FormFields.prototype.destroy=function(){this.currentTarget=null;this.readOnlyCollection=[];if(this.pdfViewerBase&&this.pdfViewerBase.signatureModule)this.pdfViewerBase.signatureModule.destroy();};/**
     * @private
     */FormFields.prototype.getModuleName=function(){return'FormFields';};return FormFields;}();/**
 * export types
 */ /* eslint-disable */ /* eslint-disable */ /**
 * The `FormDesigner` module is used to handle form designer actions of PDF viewer.
 */var FormDesigner=/** @class */function(){/**
    * @param viewer
    * @param base
    * @private
    */function FormDesigner(viewer,base){this.isFormFieldExistingInCollection=false;this.multilineCheckboxCheckedState=false;this.formFieldListItemCollection=[];this.formFieldListItemDataSource=[];this.isInitialField=false;/**
         * @private
         */this.disableSignatureClickEvent=false;/**
         * @private
         */this.formFieldIndex=0;/**
         * @private
         */this.formFieldIdIndex=0;/**
         * @private
         */this.isProgrammaticSelection=false;/**
         * @private
        */this.isShapeCopied=false;this.isDrawHelper=false;this.pdfViewer=viewer;this.pdfViewerBase=base;}/**
     * @private
     */FormDesigner.prototype.drawHelper=function(formFieldAnnotationType,obj,event){var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+this.pdfViewerBase.activeElements.activePageID);var canvasElement=document.getElementById(this.pdfViewer.dataId+'_pageCanvas_'+this.pdfViewerBase.activeElements.activePageID);if(canvasElement!==null&&textLayer!==null){var zoomValue=this.pdfViewerBase.getZoomFactor();var htmlElement=void 0;var HtmlElementAttribute={'id':'FormField_helper_html_element','class':'foreign-object'};var bounds=this.updateFormFieldInitialSize(obj,formFieldAnnotationType);htmlElement=this.createHtmlElement('div',HtmlElementAttribute);this.isDrawHelper=true;if(formFieldAnnotationType==="SignatureField"||formFieldAnnotationType==="InitialField"){htmlElement.appendChild(this.createSignatureDialog(this.pdfViewer,obj,bounds));}else if(formFieldAnnotationType==="DropdownList"){var element={id:"dropdown_helper"};htmlElement.appendChild(this.createDropDownList(element,obj));}else if(formFieldAnnotationType==="ListBox"){var element={id:"listbox_helper"};htmlElement.appendChild(this.createListBox(element,obj));}else{htmlElement.appendChild(this.createInputElement(formFieldAnnotationType,obj,bounds));}textLayer.appendChild(htmlElement);var point=this.pdfViewerBase.getMousePosition(event);htmlElement.setAttribute('style','height:'+bounds.height*zoomValue+'px; width:'+bounds.width*zoomValue+'px;left:'+point.x*zoomValue+'px; top:'+point.y*zoomValue+'px;'+'position:absolute;opacity: 0.5;');}};/**
     * @private
     */FormDesigner.prototype.drawHTMLContent=function(formFieldAnnotationType,element,drawingObject,pageIndex,commandHandler){var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageIndex);var canvasElement=document.getElementById(this.pdfViewer.dataId+'_pageCanvas_'+pageIndex);if(element!==null&&canvasElement!==null&&textLayer!==null){var zoomValue=this.pdfViewerBase.getZoomFactor();var htmlElement=void 0;var parentHtmlElement=void 0;var parentHtmlElementAttribute={'id':"form_field_"+element.id+'_html_element','class':'foreign-object'};parentHtmlElement=this.createHtmlElement('div',parentHtmlElementAttribute);var HtmlElementAttribute={'id':element.id+'_html_element','class':'foreign-object'};htmlElement=this.createHtmlElement('div',HtmlElementAttribute);if(formFieldAnnotationType==="SignatureField"||formFieldAnnotationType==="InitialField"){element.template=htmlElement.appendChild(this.createSignatureDialog(commandHandler,drawingObject));}else if(formFieldAnnotationType==="DropdownList"){element.template=htmlElement.appendChild(this.createDropDownList(element,drawingObject));}else if(formFieldAnnotationType==="ListBox"){element.template=htmlElement.appendChild(this.createListBox(element,drawingObject));}else{element.template=htmlElement.appendChild(this.createInputElement(formFieldAnnotationType,drawingObject));}var divElement=document.createElement("div");divElement.id=drawingObject.id+'_designer_name';divElement.style.fontSize=drawingObject.fontSize?drawingObject.fontSize*zoomValue+'px':10*zoomValue+'px';divElement.className="e-pv-show-designer-name";if(this.pdfViewer.designerMode){divElement.innerHTML=drawingObject.name;divElement.style.position='absolute';}else{divElement.innerHTML="";divElement.style.position='initial';}htmlElement.appendChild(divElement);parentHtmlElement.appendChild(htmlElement);textLayer.appendChild(parentHtmlElement);if(formFieldAnnotationType==="RadioButton"){if(document.getElementsByClassName("e-pv-radiobtn-span").length>0){var spanElement=document.getElementsByClassName("e-pv-radiobtn-span");for(var i=0;i<spanElement.length;i++){var bounds=this.getCheckboxRadioButtonBounds(drawingObject);spanElement[i].style.width=bounds.width-10+"px";spanElement[i].style.height=bounds.height-10+"px";if(parseInt(spanElement[i].style.width,10)<=1||parseInt(spanElement[i].style.height,10)<=1){spanElement[i].style.width="1px";spanElement[i].style.height="1px";spanElement[i].style.margin="1px";}}}}var point=sf.drawings.cornersPointsBeforeRotation(element).topLeft;htmlElement.setAttribute('style','height:'+element.actualSize.height*zoomValue+'px; width:'+element.actualSize.width*zoomValue+'px;left:'+point.x*zoomValue+'px; top:'+point.y*zoomValue+'px;'+'position:absolute;transform:rotate('+(element.rotateAngle+element.parentTransform)+'deg);'+'pointer-events:'+(this.pdfViewer.designerMode?'none':'all')+';visibility:'+(element.visible?'visible':'hidden')+';opacity:'+element.style.opacity+';');this.updateFormDesignerFieldInSessionStorage(point,element,formFieldAnnotationType,drawingObject);var field={value:drawingObject.value,fontFamily:drawingObject.fontFamily,fontSize:drawingObject.fontSize,fontStyle:drawingObject.fontStyle,color:drawingObject.color,backgroundColor:drawingObject.backgroundColor,alignment:drawingObject.alignment,isReadonly:drawingObject.isReadonly,visibility:drawingObject.visibility,maxLength:drawingObject.maxLength,isRequired:drawingObject.isRequired,isPrint:drawingObject.isPrint,rotation:drawingObject.rotateAngle,tooltip:drawingObject.tooltip,borderColor:drawingObject.borderColor,thickness:drawingObject.thickness,options:drawingObject.options,pageNumber:drawingObject.pageNumber,isChecked:drawingObject.isChecked,isSelected:drawingObject.isSelected};this.pdfViewer.fireFormFieldAddEvent("formFieldAdd",field,this.pdfViewerBase.activeElements.activePageID);}else{var point=sf.drawings.cornersPointsBeforeRotation(element).topLeft;this.updateFormDesignerFieldInSessionStorage(point,element,formFieldAnnotationType,drawingObject);}return element.template;};/**
     * @private
    */FormDesigner.prototype.updateFormDesignerFieldInSessionStorage=function(point,element,formFieldType,drawingObject){var zoomValue=this.pdfViewerBase.getZoomFactor();var formDesignObj={id:element.id,lineBound:{X:point.x*zoomValue,Y:point.y*zoomValue,Width:element.actualSize.width*zoomValue,Height:element.actualSize.height*zoomValue},name:drawingObject.name,zoomValue:zoomValue,pageNumber:drawingObject.pageNumber,value:drawingObject.value,formFieldAnnotationType:formFieldType,isMultiline:drawingObject.isMultiline,signatureType:drawingObject.signatureType,signatureBound:drawingObject.signatureBound,fontFamily:drawingObject.fontFamily,fontSize:drawingObject.fontSize,fontStyle:drawingObject.fontStyle,fontColor:this.getRgbCode(drawingObject.color),borderColor:this.getRgbCode(drawingObject.borderColor),thickness:drawingObject.thickness,backgroundColor:this.getRgbCode(drawingObject.backgroundColor),textAlign:drawingObject.alignment,isChecked:drawingObject.isChecked,isSelected:drawingObject.isSelected,isReadonly:drawingObject.isReadonly,font:{isBold:drawingObject.font.isBold,isItalic:drawingObject.font.isItalic,isStrikeout:drawingObject.font.isStrikeout,isUnderline:drawingObject.font.isUnderline},selectedIndex:drawingObject.selectedIndex,radiobuttonItem:null,option:drawingObject.options?drawingObject.options:[],visibility:drawingObject.visibility,maxLength:drawingObject.maxLength,isRequired:drawingObject.isRequired,isPrint:drawingObject.isPrint,rotation:0,tooltip:drawingObject.tooltip};if(formDesignObj.formFieldAnnotationType==="RadioButton"){formDesignObj.radiobuttonItem=[];formDesignObj.radiobuttonItem.push({id:element.id,lineBound:{X:point.x*zoomValue,Y:point.y*zoomValue,Width:element.actualSize.width*zoomValue,Height:element.actualSize.height*zoomValue},name:drawingObject.name,zoomValue:zoomValue,pageNumber:drawingObject.pageNumber,value:drawingObject.value,formFieldAnnotationType:formFieldType,fontFamily:drawingObject.fontFamily,fontSize:drawingObject.fontSize,fontStyle:drawingObject.fontStyle,fontColor:this.getRgbCode(drawingObject.color),borderColor:this.getRgbCode(drawingObject.borderColor),thickness:drawingObject.thickness,backgroundColor:this.getRgbCode(drawingObject.backgroundColor),textAlign:drawingObject.alignment,isChecked:drawingObject.isChecked,isSelected:drawingObject.isSelected,isReadonly:drawingObject.isReadonly,visibility:drawingObject.visibility,maxLength:drawingObject.maxLength,isRequired:drawingObject.isRequired,isPrint:drawingObject.isPrint,rotation:0,tooltip:drawingObject.tooltip});}var isItemAdd=this.getRadioButtonItem(formDesignObj,drawingObject);if(!isItemAdd){for(var i=0;i<this.pdfViewerBase.formFieldCollection.length;i++){var formFieldElement=this.pdfViewerBase.formFieldCollection[i];if(formFieldElement["Key"]===formDesignObj.id){this.pdfViewerBase.formFieldCollection.splice(i,1);this.pdfViewerBase.formFieldCollection.push({Key:element.id,FormField:formDesignObj});this.isFormFieldExistingInCollection=true;}}if(!this.isFormFieldExistingInCollection){this.pdfViewerBase.formFieldCollection.push({Key:element.id,FormField:formDesignObj});}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');this.isFormFieldExistingInCollection=false;if(this.pdfViewerBase.formFieldCollection.length>0){this.pdfViewerBase.enableFormFieldButton(true);}else{this.pdfViewerBase.enableFormFieldButton(false);}}};FormDesigner.prototype.getRadioButtonItem=function(radiobutton,formFieldProperty){var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');if(data){var formFieldsData=JSON.parse(data);var isItemAdd=false;for(var i=0;i<formFieldsData.length;i++){var currentData=formFieldsData[i];var radiobuttonItem=void 0;if(radiobutton.formFieldAnnotationType==="RadioButton"){if(radiobutton.radiobuttonItem&&currentData.FormField.radiobuttonItem){for(var m=0;m<currentData.FormField.radiobuttonItem.length;m++){if(currentData.FormField.radiobuttonItem[m].id===radiobutton.id){radiobuttonItem={lineBound:radiobutton.lineBound,id:radiobutton.id,name:radiobutton.name,zoomValue:radiobutton.zoomValue,pageNumber:radiobutton.pageNumber,value:radiobutton.value,formFieldAnnotationType:radiobutton.formFieldAnnotationType,fontFamily:radiobutton.fontFamily,fontSize:radiobutton.fontSize,fontStyle:radiobutton.fontStyle,fontColor:this.getRgbCode(formFieldProperty.color),borderColor:this.getRgbCode(formFieldProperty.borderColor),thickness:formFieldProperty.thickness,backgroundColor:this.getRgbCode(formFieldProperty.backgroundColor),textAlign:radiobutton.textAlign,isChecked:radiobutton.isChecked,isSelected:radiobutton.isSelected,isReadonly:radiobutton.isReadonly,visibility:radiobutton.visibility,maxLength:radiobutton.maxLength,isRequired:radiobutton.isRequired,isPrint:radiobutton.isPrint,rotation:0,tooltip:radiobutton.tooltip};currentData.FormField.radiobuttonItem.splice(m,1);currentData.FormField.radiobuttonItem.push(radiobuttonItem);if(!sf.base.isNullOrUndefined(this.pdfViewerBase.formFieldCollection[i])){this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem=currentData.FormField.radiobuttonItem;isItemAdd=true;}break;}else{if(radiobutton.formFieldAnnotationType===currentData.FormField.formFieldAnnotationType&&radiobutton.name===currentData.FormField.name){radiobuttonItem={lineBound:radiobutton.lineBound,id:radiobutton.id,name:radiobutton.name,zoomValue:radiobutton.zoomValue,pageNumber:radiobutton.pageNumber,value:radiobutton.value,formFieldAnnotationType:radiobutton.formFieldAnnotationType,fontFamily:radiobutton.fontFamily,fontSize:radiobutton.fontSize,fontStyle:radiobutton.fontStyle,fontColor:this.getRgbCode(formFieldProperty.color),borderColor:this.getRgbCode(formFieldProperty.borderColor),thickness:formFieldProperty.thickness,backgroundColor:this.getRgbCode(formFieldProperty.backgroundColor),textAlign:radiobutton.textAlign,isChecked:radiobutton.isChecked,isSelected:radiobutton.isSelected,isReadonly:radiobutton.isReadonly,visibility:radiobutton.visibility,maxLength:radiobutton.maxLength,isRequired:radiobutton.isRequired,isPrint:radiobutton.isPrint,rotation:0,tooltip:radiobutton.tooltip};var isContainsRadiobuttonItem=false;for(var i_1=0;i_1<currentData.FormField.radiobuttonItem.length;i_1++){if(currentData.FormField.radiobuttonItem[i_1].id===radiobuttonItem.id){currentData.FormField.radiobuttonItem[i_1]=radiobuttonItem;isContainsRadiobuttonItem=true;break;}}if(!isContainsRadiobuttonItem){currentData.FormField.radiobuttonItem.push(radiobuttonItem);}if(!sf.base.isNullOrUndefined(this.pdfViewerBase.formFieldCollection[i])){this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem=currentData.FormField.radiobuttonItem;isItemAdd=true;for(var l=0;l<this.pdfViewerBase.formFieldCollection.length;l++){var formFieldElement=this.pdfViewerBase.formFieldCollection[l];if(formFieldElement["Key"]===radiobuttonItem.id){this.pdfViewerBase.formFieldCollection.splice(l,1);}}}}}}}}}if(isItemAdd){this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');}}return isItemAdd;};// eslint-disable-next-line
FormDesigner.prototype.getRgbCode=function(colorString){if(!colorString.match(/#([a-z0-9]+)/gi)&&!colorString.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)){var colorCode=this.nameToHash(colorString);if(colorCode!="")colorString=colorCode;}var stringArray=colorString.split(',');if(sf.base.isNullOrUndefined(stringArray[1])){colorString=this.getValue(colorString,'rgba');stringArray=colorString.split(',');}// eslint-disable-next-line radix
var r=parseInt(stringArray[0].split('(')[1]);// eslint-disable-next-line radix
var g=parseInt(stringArray[1]);// eslint-disable-next-line radix
var b=parseInt(stringArray[2]);// eslint-disable-next-line radix
var a=parseFloat(stringArray[3])*100;return{r:r,g:g,b:b,a:a};};/**
     * @param colour
     * @private
     */ // eslint-disable-next-line
FormDesigner.prototype.nameToHash=function(colour){// eslint-disable-next-line
var colours={'aliceblue':'#f0f8ff','antiquewhite':'#faebd7','aqua':'#00ffff','aquamarine':'#7fffd4','azure':'#f0ffff','beige':'#f5f5dc','bisque':'#ffe4c4','black':'#000000','blanchedalmond':'#ffebcd','blue':'#0000ff','blueviolet':'#8a2be2','brown':'#a52a2a','burlywood':'#deb887','yellow':'#ffff00','yellowgreen':'#9acd32','cadetblue':'#5f9ea0','chartreuse':'#7fff00','chocolate':'#d2691e','coral':'#ff7f50','cornflowerblue':'#6495ed','cornsilk':'#fff8dc','crimson':'#dc143c','cyan':'#00ffff','darkblue':'#00008b','darkcyan':'#008b8b','darkgoldenrod':'#b8860b','darkgray':'#a9a9a9','darkred':'#8b0000','darksalmon':'#e9967a','darkgreen':'#006400','darkkhaki':'#bdb76b','darkmagenta':'#8b008b','darkolivegreen':'#556b2f','darkorange':'#ff8c00','darkorchid':'#9932cc','darkseagreen':'#8fbc8f','darkslateblue':'#483d8b','darkslategray':'#2f4f4f','darkturquoise':'#00ced1','darkviolet':'#9400d3','deeppink':'#ff1493','deepskyblue':'#00bfff','dimgray':'#696969','dodgerblue':'#1e90ff','firebrick':'#b22222','floralwhite':'#fffaf0','forestgreen':'#228b22','fuchsia':'#ff00ff','gainsboro':'#dcdcdc','ghostwhite':'#f8f8ff','gold':'#ffd700','goldenrod':'#daa520','gray':'#808080','green':'#008000','greenyellow':'#adff2f','honeydew':'#f0fff0','hotpink':'#ff69b4','indianred ':'#cd5c5c','mediumorchid':'#ba55d3','mediumpurple':'#9370d8','indigo':'#4b0082','ivory':'#fffff0','navy':'#000080','oldlace':'#fdf5e6','olive':'#808000','khaki':'#f0e68c','lavender':'#e6e6fa','lavenderblush':'#fff0f5','lawngreen':'#7cfc00','lemonchiffon':'#fffacd','lightblue':'#add8e6','lightcoral':'#f08080','lightcyan':'#e0ffff','lightgoldenrodyellow':'#fafad2','lightgrey':'#d3d3d3','lightgreen':'#90ee90','lightpink':'#ffb6c1','lightsalmon':'#ffa07a','lightseagreen':'#20b2aa','lightskyblue':'#87cefa','lightslategray':'#778899','lightsteelblue':'#b0c4de','lightyellow':'#ffffe0','lime':'#00ff00','limegreen':'#32cd32','linen':'#faf0e6','magenta':'#ff00ff','maroon':'#800000','mediumaquamarine':'#66cdaa','mediumblue':'#0000cd','mediumseagreen':'#3cb371','mediumslateblue':'#7b68ee','mediumspringgreen':'#00fa9a','mediumturquoise':'#48d1cc','mediumvioletred':'#c71585','midnightblue':'#191970','mintcream':'#f5fffa','mistyrose':'#ffe4e1','moccasin':'#ffe4b5','navajowhite':'#ffdead','rebeccapurple':'#663399','red':'#ff0000','rosybrown':'#bc8f8f','royalblue':'#4169e1','olivedrab':'#6b8e23','orange':'#ffa500','orangered':'#ff4500','orchid':'#da70d6','palegoldenrod':'#eee8aa','palegreen':'#98fb98','paleturquoise':'#afeeee','palevioletred':'#d87093','papayawhip':'#ffefd5','peachpuff':'#ffdab9','peru':'#cd853f','wheat':'#f5deb3','white':'#ffffff','whitesmoke':'#f5f5f5','pink':'#ffc0cb','plum':'#dda0dd','steelblue':'#4682b4','violet':'#ee82ee','powderblue':'#b0e0e6','purple':'#800080','saddlebrown':'#8b4513','salmon':'#fa8072','sandybrown':'#f4a460','seagreen':'#2e8b57','seashell':'#fff5ee','sienna':'#a0522d','silver':'#c0c0c0','skyblue':'#87ceeb','slateblue':'#6a5acd','slategray':'#708090','snow':'#fffafa','springgreen':'#00ff7f','tan':'#d2b48c','teal':'#008080','thistle':'#d8bfd8','tomato':'#ff6347','turquoise':'#40e0d0'};if(typeof colours[colour.toLowerCase()]!=='undefined'){return colours[colour.toLowerCase()];}return'';};/**
     * @param value
     * @param type
     * @param value
     * @param type
     * @private
     */FormDesigner.prototype.getValue=function(value,type){type=!type?'hex':type.toLowerCase();if(value[0]==='r'){var cValue=this.convertRgbToNumberArray(value);if(type==='hex'||type==='hexa'){var hex=this.rgbToHex(cValue);return type==='hex'?hex.slice(0,7):hex;}else{if(type==='hsv'){return this.convertToHsvString(this.rgbToHsv.apply(this,cValue.slice(0,3)));}else{if(type==='hsva'){return this.convertToHsvString(this.rgbToHsv.apply(this,cValue));}else{return'null';}}}}else{if(value[0]==='h'){var cValue=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(value));if(type==='rgba'){return this.convertToRgbString(cValue);}else{if(type==='hex'||type==='hexa'){var hex=this.rgbToHex(cValue);return type==='hex'?hex.slice(0,7):hex;}else{if(type==='rgb'){return this.convertToRgbString(cValue.slice(0,3));}else{return'null';}}}}else{value=this.roundValue(value);var rgb=this.hexToRgb(value);if(type==='rgb'||type==='hsv'){rgb=rgb.slice(0,3);}if(type==='rgba'||type==='rgb'){return this.convertToRgbString(rgb);}else{if(type==='hsva'||type==='hsv'){return this.convertToHsvString(this.rgbToHsv.apply(this,rgb));}else{if(type==='hex'){return value.slice(0,7);}else{if(type==='a'){return rgb[3].toString();}else{return'null';}}}}}}};FormDesigner.prototype.convertRgbToNumberArray=function(value){// eslint-disable-next-line max-len
return value.slice(value.indexOf('(')+1,value.indexOf(')')).split(',').map(function(n,i){return i!==3?parseInt(n,10):parseFloat(n);});};FormDesigner.prototype.convertToRgbString=function(rgb){return rgb.length?rgb.length===4?'rgba('+rgb.join()+')':'rgb('+rgb.join()+')':'';};FormDesigner.prototype.convertToHsvString=function(hsv){return hsv.length===4?'hsva('+hsv.join()+')':'hsv('+hsv.join()+')';};FormDesigner.prototype.roundValue=function(value){if(!value){return'';}if(value[0]!=='#'){value='#'+value;}var len=value.length;if(len===4){value+='f';len=5;}if(len===5){var tempValue='';for(var i=1,len_1=value.length;i<len_1;i++){tempValue+=value.charAt(i)+value.charAt(i);}value='#'+tempValue;len=9;}if(len===7){value+='ff';}return value;};FormDesigner.prototype.hexToRgb=function(hex){if(!hex){return[];}hex=hex.trim();if(hex.length!==9){hex=this.roundValue(hex);}var opacity=Number((parseInt(hex.slice(-2),16)/255).toFixed(2));hex=hex.slice(1,7);var bigInt=parseInt(hex,16);var h=[];h.push(bigInt>>16&255);h.push(bigInt>>8&255);h.push(bigInt&255);h.push(opacity);return h;};FormDesigner.prototype.rgbToHsv=function(r,g,b,opacity){r/=255;g/=255;b/=255;var max=Math.max(r,g,b);var min=Math.min(r,g,b);var h;var s;var v=max;var d=max-min;s=max===0?0:d/max;if(max===min){h=0;}else{switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}h/=6;}var hsv=[Math.round(h*360),Math.round(s*1000)/10,Math.round(v*1000)/10];if(!sf.base.isNullOrUndefined(opacity)){hsv.push(opacity);}return hsv;};FormDesigner.prototype.hsvToRgb=function(h,s,v,opacity){var r;var g;var b;var i;var f;var p;var q;var t;s/=100;v/=100;if(s===0){r=g=b=v;return[Math.round(r*255),Math.round(g*255),Math.round(b*255),opacity];}h/=60;i=Math.floor(h);f=h-i;p=v*(1-s);q=v*(1-s*f);t=v*(1-s*(1-f));switch(i){case 0:r=v;g=t;b=p;break;case 1:r=q;g=v;b=p;break;case 2:r=p;g=v;b=t;break;case 3:r=p;g=q;b=v;break;case 4:r=t;g=p;b=v;break;default:r=v;g=p;b=q;}var rgb=[Math.round(r*255),Math.round(g*255),Math.round(b*255)];if(!sf.base.isNullOrUndefined(opacity)){rgb.push(opacity);}return rgb;};FormDesigner.prototype.rgbToHex=function(rgb){// eslint-disable-next-line max-len
return rgb.length?'#'+this.hex(rgb[0])+this.hex(rgb[1])+this.hex(rgb[2])+(!sf.base.isNullOrUndefined(rgb[3])?rgb[3]!==0?(Math.round(rgb[3]*255)+0x10000).toString(16).substr(-2):'00':''):'';};/**
     * @private
     */FormDesigner.prototype.updateCanvas=function(pageNumber,canvas){if(canvas!==null&&canvas!==undefined){canvas=canvas;}else{canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);var zoom=this.pdfViewerBase.getZoomFactor();var ratio=this.pdfViewerBase.getZoomRatio(zoom);if(canvas){var width=this.pdfViewerBase.pageSize[pageNumber].width;var height=this.pdfViewerBase.pageSize[pageNumber].height;canvas.width=width*ratio;canvas.height=height*ratio;canvas.style.width=width*zoom+'px';canvas.style.height=height*zoom+'px';}}this.pdfViewer.drawing.refreshCanvasDiagramLayer(canvas,pageNumber);};/**
     * @private
    */FormDesigner.prototype.rerenderFormFields=function(pageIndex){var zoomValue=this.pdfViewerBase.getZoomFactor();var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');if(data){var formFieldsData=JSON.parse(data);var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageIndex);var canvasElement=document.getElementById(this.pdfViewer.dataId+'_pageCanvas_'+pageIndex);if(formFieldsData!==null&&canvasElement!==null&&textLayer!==null){for(var i=0;i<formFieldsData.length;i++){// eslint-disable-next-line
var currentData=formFieldsData[i].FormField;if(currentData.pageNumber===pageIndex+1){var domElementId=document.getElementById('form_field_'+currentData.id+'_html_element');if(!domElementId){var signatureField=this.pdfViewer.nameTable[formFieldsData[i].Key.split("_")[0]];var element=signatureField.wrapper.children[0];if(element){if(currentData.formFieldAnnotationType==="RadioButton"){for(var j=0;j<currentData.radiobuttonItem.length;j++){signatureField=this.pdfViewer.nameTable[currentData.radiobuttonItem[j].id.split("_")[0]];element=signatureField.wrapper.children[0];currentData.radiobuttonItem[j]=this.renderFormFieldsInZooming(element,currentData.radiobuttonItem[j],signatureField,zoomValue);this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[j].lineBound=currentData.radiobuttonItem[j].lineBound;this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[j].zoomValue=zoomValue;}}else{currentData.lineBound=this.renderFormFieldsInZooming(element,currentData,signatureField,zoomValue).lineBound;this.pdfViewerBase.formFieldCollection[i].FormField.lineBound=currentData.lineBound;this.pdfViewerBase.formFieldCollection[i].FormField.zoomValue=zoomValue;}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');}}}}}}};FormDesigner.prototype.renderFormFieldsInZooming=function(element,currentData,signatureField,zoomValue){if(element){var htmlElement=void 0;var parentHtmlElement=void 0;var parentHtmlElementAttribute={'id':"form_field_"+element.id+'_html_element','class':'foreign-object'};parentHtmlElement=this.createHtmlElement('div',parentHtmlElementAttribute);var HtmlElementAttribute={'id':element.id+'_html_element','class':'foreign-object'};htmlElement=this.createHtmlElement('div',HtmlElementAttribute);if(currentData.formFieldAnnotationType==="SignatureField"||currentData.formFieldAnnotationType==="InitialField"){this.disableSignatureClickEvent=true;signatureField.value=currentData.value;signatureField.signatureType=currentData.signatureType;signatureField.signatureBound=currentData.signatureBound;element.template=htmlElement.appendChild(this.createSignatureDialog(this.pdfViewer,signatureField));this.disableSignatureClickEvent=false;}else if(currentData.formFieldAnnotationType==="DropdownList"){element.template=htmlElement.appendChild(this.createDropDownList(element,signatureField));}else if(currentData.formFieldAnnotationType==="ListBox"){element.template=htmlElement.appendChild(this.createListBox(element,signatureField));}else{element.template=htmlElement.appendChild(this.createInputElement(currentData.formFieldAnnotationType,signatureField));}var divElement=document.createElement("div");divElement.id=signatureField.id+'_designer_name';divElement.style.fontSize=signatureField.fontSize?signatureField.fontSize*zoomValue+'px':10*zoomValue+'px';divElement.className="e-pv-show-designer-name";if(this.pdfViewer.designerMode){divElement.innerHTML=signatureField.name;divElement.style.position='absolute';}else{divElement.innerHTML="";divElement.style.position='initial';}htmlElement.appendChild(divElement);parentHtmlElement.appendChild(htmlElement);var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(currentData.pageNumber-1));textLayer.appendChild(parentHtmlElement);if(signatureField.formFieldAnnotationType==="RadioButton"){if(document.getElementsByClassName("e-pv-radiobtn-span").length>0){var bounds=this.getCheckboxRadioButtonBounds(signatureField);var spanElement=document.getElementsByClassName("e-pv-radiobtn-span");this.renderRadioButtonSpan(spanElement,bounds,zoomValue);}}var point=sf.drawings.cornersPointsBeforeRotation(signatureField.wrapper.children[0]).topLeft;htmlElement.setAttribute('style','height:'+element.actualSize.height*zoomValue+'px; width:'+element.actualSize.width*zoomValue+'px;left:'+point.x*zoomValue+'px; top:'+point.y*zoomValue+'px;'+'position:absolute;transform:rotate('+(element.rotateAngle+element.parentTransform)+'deg);'+'pointer-events:'+(this.pdfViewer.designerMode?'none':'all')+';visibility:'+(element.visible?'visible':'hidden')+';opacity:'+element.style.opacity+';');currentData.lineBound={X:point.x*zoomValue,Y:point.y*zoomValue,Width:element.actualSize.width*zoomValue,Height:element.actualSize.height*zoomValue};}return currentData;};FormDesigner.prototype.renderRadioButtonSpan=function(spanElement,bounds,zoomValue){for(var i=0;i<spanElement.length;i++){spanElement[i].style.width=Math.floor(bounds.width-10)+"px";spanElement[i].style.height=Math.floor(bounds.height-10)+"px";if(bounds.width<=14&&parseInt(spanElement[i].style.width,10)>=2){if(parseInt(spanElement[i].style.width,10)<=5){spanElement[i].style.width=Math.round(bounds.width/3)+"px";spanElement[i].style.height=Math.round(bounds.height/3)+"px";}spanElement[i].style.margin=Math.round(bounds.width/3)+"px";}if(parseInt(spanElement[i].style.width,10)<=1||parseInt(spanElement[i].style.height,10)<=1){if(bounds.width*zoomValue>=2){spanElement[i].style.width=Math.round(bounds.width/2)+"px";spanElement[i].style.height=Math.round(bounds.height/2)+"px";spanElement[i].style.margin=Math.round(parseInt(spanElement[i].style.width,10)/3)+"px";}else{spanElement[i].style.width="1px";spanElement[i].style.height="1px";spanElement[i].style.margin="1px";}}}};/**
     * @private
     */FormDesigner.prototype.updateFormFieldInitialSize=function(obj,formFieldAnnotationType){var zoomValue=this.pdfViewerBase.getZoomFactor();switch(formFieldAnnotationType){case'Textbox':obj.width=200*zoomValue;obj.height=24*zoomValue;break;case'PasswordField':obj.width=200*zoomValue;obj.height=24*zoomValue;break;case'SignatureField':case'InitialField':obj.width=200*zoomValue;obj.height=63*zoomValue;break;case'Checkbox':obj.width=20*zoomValue;obj.height=20*zoomValue;break;case'RadioButton':obj.width=20*zoomValue;obj.height=20*zoomValue;break;case'DropdownList':obj.width=200*zoomValue;obj.height=24*zoomValue;break;case'ListBox':obj.width=198*zoomValue;obj.height=66*zoomValue;break;}return{width:obj.width,height:obj.height};};/**
     * @private
    */FormDesigner.prototype.updateHTMLElement=function(actualObject){var element=actualObject.wrapper.children[0];var zoomValue=this.pdfViewerBase.getZoomFactor();if(element){var htmlElement=document.getElementById(element.id+"_html_element");if(!sf.base.isNullOrUndefined(htmlElement)){var point=sf.drawings.cornersPointsBeforeRotation(actualObject.wrapper.children[0]).topLeft;htmlElement.setAttribute('style','height:'+element.actualSize.height*zoomValue+'px; width:'+element.actualSize.width*zoomValue+'px;left:'+point.x*zoomValue+'px; top:'+point.y*zoomValue+'px;'+'position:absolute;transform:rotate('+(element.rotateAngle+element.parentTransform)+'deg);'+'pointer-events:'+(this.pdfViewer.designerMode?'none':'all')+';visibility:'+(element.visible?'visible':'hidden')+';opacity:'+element.style.opacity+';');var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');if(actualObject.formFieldAnnotationType==="RadioButton"){var labelContainer=htmlElement.firstElementChild.firstElementChild;var spanElement=htmlElement.firstElementChild.firstElementChild.lastElementChild;if(element.actualSize.width>element.actualSize.height){htmlElement.firstElementChild.style.display="inherit";labelContainer.style.width=labelContainer.style.height=element.actualSize.height*zoomValue+"px";spanElement.style.width=spanElement.style.height=element.actualSize.height-10+"px";}else{htmlElement.firstElementChild.style.display="flex";labelContainer.style.width=labelContainer.style.height=element.actualSize.width*zoomValue+"px";spanElement.style.width=spanElement.style.height=element.actualSize.width-10+"px";}}if(actualObject.formFieldAnnotationType==="Checkbox"){var minCheckboxWidth=20;var labelContainer=htmlElement.firstElementChild.firstElementChild;var spanElement=htmlElement.firstElementChild.firstElementChild.lastElementChild.firstElementChild;if(element.actualSize.width>element.actualSize.height){htmlElement.firstElementChild.style.display="inherit";labelContainer.style.width=labelContainer.style.height=element.actualSize.height*zoomValue+"px";spanElement.style.width=element.actualSize.height/5*zoomValue+"px";spanElement.style.height=element.actualSize.height/2.5*zoomValue+"px";spanElement.style.left=element.actualSize.height/2.5*zoomValue+"px";spanElement.style.top=element.actualSize.height/5*zoomValue+"px";}else{htmlElement.firstElementChild.style.display="flex";labelContainer.style.width=labelContainer.style.height=element.actualSize.width*zoomValue+"px";spanElement.style.width=element.actualSize.width/5*zoomValue+"px";spanElement.style.height=element.actualSize.width/2.5*zoomValue+"px";spanElement.style.left=element.actualSize.width/2.5*zoomValue+"px";spanElement.style.top=element.actualSize.width/5*zoomValue+"px";}if(spanElement.className.indexOf("e-pv-cb-checked")!==-1){var checkboxWidth=parseInt(labelContainer.style.width,10);if(checkboxWidth>minCheckboxWidth){spanElement.style.borderWidth="3px";}else if(checkboxWidth<=15){spanElement.style.borderWidth="1px";}else{spanElement.style.borderWidth="2px";}}}var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){if(formFieldsData[i].FormField.formFieldAnnotationType==="RadioButton"){for(var j=0;j<formFieldsData[i].FormField.radiobuttonItem.length;j++){if(element.id===formFieldsData[i].FormField.radiobuttonItem[j].id){this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[j].lineBound={X:point.x*zoomValue,Y:point.y*zoomValue,Width:element.actualSize.width*zoomValue,Height:element.actualSize.height*zoomValue};this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[j].zoomValue=zoomValue;break;}}}else{if(formFieldsData[i].Key===element.id){formFieldsData[i].FormField.lineBound={X:point.x*zoomValue,Y:point.y*zoomValue,Width:element.actualSize.width*zoomValue,Height:element.actualSize.height*zoomValue};this.pdfViewerBase.formFieldCollection[i].FormField.lineBound=formFieldsData[i].FormField.lineBound;}}}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');}}};FormDesigner.prototype.getCheckboxRadioButtonBounds=function(drawingObject,bounds){var zoomValue=this.pdfViewerBase.getZoomFactor();var width=0;var height=0;var display='';if(bounds){if(bounds.width>bounds.height){width=height=bounds.height*zoomValue;display="inherit";}else{width=height=bounds.width*zoomValue;display="flex";}}else if(drawingObject){if(drawingObject.bounds.width>drawingObject.bounds.height){width=height=drawingObject.bounds.height*zoomValue;display="inherit";}else{width=height=drawingObject.bounds.width*zoomValue;display="flex";}}return{width:width,height:height,display:display};};FormDesigner.prototype.updateSessionFormFieldProperties=function(updatedFormFields){var zoomValue=this.pdfViewerBase.getZoomFactor();var element=updatedFormFields.wrapper.children[0];var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){if(formFieldsData[i].FormField.formFieldAnnotationType==="RadioButton"){for(var j=0;j<formFieldsData[i].FormField.radiobuttonItem.length;j++){if(element.id===formFieldsData[i].FormField.radiobuttonItem[j].id){var radioButtonItemUpdate={id:element.id,lineBound:{X:element.bounds.x*zoomValue,Y:element.bounds.y*zoomValue,Width:element.bounds.width*zoomValue,Height:element.bounds.height*zoomValue},name:updatedFormFields.name,zoomValue:zoomValue,pageNumber:updatedFormFields.pageNumber,value:updatedFormFields.value,formFieldAnnotationType:updatedFormFields.formFieldAnnotationType,fontFamily:updatedFormFields.fontFamily,fontSize:updatedFormFields.fontSize,fontStyle:updatedFormFields.fontStyle,fontColor:this.getRgbCode(updatedFormFields.color),backgroundColor:this.getRgbCode(updatedFormFields.backgroundColor),borderColor:this.getRgbCode(updatedFormFields.borderColor),thickness:updatedFormFields.thickness,textAlign:updatedFormFields.alignment,isChecked:updatedFormFields.isChecked,isSelected:updatedFormFields.isSelected,isReadonly:updatedFormFields.isReadonly,visibility:updatedFormFields.visibility,maxLength:updatedFormFields.maxLength,isRequired:updatedFormFields.isRequired,isPrint:updatedFormFields.isPrint,rotation:0,tooltip:updatedFormFields.tooltip};formFieldsData[i].FormField.radiobuttonItem[j]=radioButtonItemUpdate;if(this.pdfViewerBase.formFieldCollection[i]&&this.pdfViewerBase.formFieldCollection[i].FormField&&this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[j]){this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[j]=radioButtonItemUpdate;}break;}}}else if(formFieldsData[i].Key===element.id){var formDesignObj={id:element.id,lineBound:{X:element.bounds.x*zoomValue,Y:element.bounds.y*zoomValue,Width:element.bounds.width*zoomValue,Height:element.bounds.height*zoomValue},name:updatedFormFields.name,zoomValue:zoomValue,pageNumber:updatedFormFields.pageNumber,value:updatedFormFields.value,formFieldAnnotationType:updatedFormFields.formFieldAnnotationType,fontFamily:updatedFormFields.fontFamily,fontSize:updatedFormFields.fontSize,fontStyle:updatedFormFields.fontStyle,fontColor:this.getRgbCode(updatedFormFields.color),backgroundColor:this.getRgbCode(updatedFormFields.backgroundColor),borderColor:this.getRgbCode(updatedFormFields.borderColor),thickness:updatedFormFields.thickness,textAlign:updatedFormFields.alignment,isChecked:updatedFormFields.isChecked,isSelected:updatedFormFields.isSelected,isReadonly:updatedFormFields.isReadonly,font:{isBold:updatedFormFields.font.isBold,isItalic:updatedFormFields.font.isItalic,isStrikeout:updatedFormFields.font.isStrikeout,isUnderline:updatedFormFields.font.isUnderline},selectedIndex:[],radiobuttonItem:null,option:updatedFormFields.options?updatedFormFields.options:[],visibility:updatedFormFields.visibility,maxLength:updatedFormFields.maxLength,isRequired:updatedFormFields.isRequired,isPrint:updatedFormFields.isPrint,rotation:0,tooltip:updatedFormFields.tooltip};if(formFieldsData[i].FormField.formFieldAnnotationType==="SignatureField"||formFieldsData[i].FormField.formFieldAnnotationType==="InitialField"){var updatedSignatureFormFields=updatedFormFields;var formDesignObj_1={id:element.id,lineBound:{X:element.bounds.x*zoomValue,Y:element.bounds.y*zoomValue,Width:element.bounds.width*zoomValue,Height:element.bounds.height*zoomValue},name:updatedFormFields.name,zoomValue:zoomValue,pageNumber:updatedFormFields.pageNumber,value:updatedFormFields.value,formFieldAnnotationType:updatedFormFields.formFieldAnnotationType,fontFamily:updatedFormFields.fontFamily,fontSize:updatedFormFields.fontSize,fontStyle:updatedFormFields.fontStyle,fontColor:this.getRgbCode(updatedFormFields.color),backgroundColor:this.getRgbCode(updatedFormFields.backgroundColor),borderColor:this.getRgbCode(updatedFormFields.borderColor),thickness:updatedFormFields.thickness,textAlign:updatedFormFields.alignment,isChecked:updatedFormFields.isChecked,isSelected:updatedFormFields.isSelected,isReadonly:updatedFormFields.isReadonly,font:{isBold:updatedFormFields.font.isBold,isItalic:updatedFormFields.font.isItalic,isStrikeout:updatedFormFields.font.isStrikeout,isUnderline:updatedFormFields.font.isUnderline},selectedIndex:[],radiobuttonItem:null,option:updatedFormFields.options?updatedFormFields.options:[],visibility:updatedFormFields.visibility,maxLength:updatedFormFields.maxLength,isRequired:updatedFormFields.isRequired,isPrint:updatedFormFields.isPrint,rotation:0,tooltip:updatedFormFields.tooltip,signatureType:updatedFormFields.signatureType,signatureBound:updatedSignatureFormFields.signatureBound};formFieldsData[i].FormField=formDesignObj_1;this.pdfViewerBase.formFieldCollection[i].FormField=formDesignObj_1;}else{formFieldsData[i].FormField=formDesignObj;this.pdfViewerBase.formFieldCollection[i].FormField=formDesignObj;}break;}}if(this.pdfViewerBase.formFieldCollection.length>0){this.pdfViewerBase.enableFormFieldButton(true);}else{this.pdfViewerBase.enableFormFieldButton(false);}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');};/**
     * @private
     */FormDesigner.prototype.createSignatureDialog=function(commandHandler,signatureField,bounds,isPrint){this.isInitialField=sf.base.isNullOrUndefined(signatureField.isInitialField)?false:signatureField.isInitialField;this.pdfViewerBase.isInitialField=this.isInitialField;this.pdfViewerBase.isInitialField=signatureField.isInitialField;var element=sf.base.createElement("div");element.className="foreign-object";element.style.position="absolute";element.style.width="100%";element.style.height="100%";var divElement=sf.base.createElement("div");divElement.style.width="100%";divElement.style.height="100%";divElement.style.position="absolute";divElement.style.backgroundColor="transparent";divElement.style.border="1px solid #303030";if(!sf.base.isNullOrUndefined(signatureField.value)&&signatureField.value!==''){divElement.className='e-pdfviewer-signatureformfields-signature';divElement.style.pointerEvents='none';}else{divElement.className='e-pdfviewer-signatureformfields';divElement.style.pointerEvents='';}divElement.id=signatureField.id;divElement.disabled=signatureField.isReadonly;element.appendChild(divElement);//check whether the width for sign indicator has default value or not and then set the default width value for initial field.
var defaultWidth=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width===19?signatureField.isInitialField?30:25:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width;var signatureFieldIndicatorWidth=signatureField.signatureIndicatorSettings&&signatureField.signatureIndicatorSettings.width?signatureField.signatureIndicatorSettings.width:defaultWidth;var defaultHeight=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height===10?13:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height;var signatureFieldIndicatorHeight=signatureField.signatureIndicatorSettings&&signatureField.signatureIndicatorSettings.height?signatureField.signatureIndicatorSettings.height:defaultHeight;var signatureFieldIndicatorBG=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor==='orange'?'#FFE48559':this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor;var signIndicator=signatureField.isInitialField?"Initial":"Sign";var signatureFieldWidth=signatureField.bounds?signatureField.bounds.width:bounds.width;var signatureFieldHeight=signatureField.bounds?signatureField.bounds.height:bounds.height;// eslint-disable-next-line max-len
var height=signatureFieldIndicatorHeight>signatureFieldHeight/2?signatureFieldHeight/2:signatureFieldIndicatorHeight;// eslint-disable-next-line max-len
var width=signatureFieldIndicatorWidth>signatureFieldWidth/2?signatureFieldWidth/2:signatureFieldIndicatorWidth;var fontSize=10;if(signatureField.signatureIndicatorSettings&&signatureField.signatureIndicatorSettings.fontSize)// eslint-disable-next-line max-len
fontSize=signatureField.signatureIndicatorSettings.fontSize>height/2?10:signatureField.signatureIndicatorSettings.fontSize;else// eslint-disable-next-line max-len
fontSize=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize>height/2?10:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize;var spanElement=sf.base.createElement("span");var fieldText=signatureField.signatureIndicatorSettings?signatureField.signatureIndicatorSettings.text:null;if(signatureField.isInitialField){spanElement.id="initialIcon"+signatureField.pageIndex+"_"+this.setFormFieldIdIndex();this.setIndicatorText(spanElement,fieldText,this.pdfViewer.initialFieldSettings.initialIndicatorSettings.text,"Initial");}else{spanElement.id="signIcon"+signatureField.pageIndex+"_"+this.setFormFieldIdIndex();this.setIndicatorText(spanElement,fieldText,this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text,"Sign");}spanElement.style.color=signatureField.signatureIndicatorSettings&&signatureField.signatureIndicatorSettings.color?signatureField.signatureIndicatorSettings.color:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color;// eslint-disable-next-line
spanElement.style.backgroundColor=signatureField.signatureIndicatorSettings&&signatureField.signatureIndicatorSettings.backgroundColor?signatureField.signatureIndicatorSettings.backgroundColor:signatureFieldIndicatorBG;spanElement.style.opacity=signatureField.signatureIndicatorSettings&&signatureField.signatureIndicatorSettings.opacity?signatureField.signatureIndicatorSettings.opacity:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity;spanElement.style.position="absolute";var zoomValue=this.pdfViewerBase.getZoomFactor();spanElement.style.width=width*zoomValue+ +'px';spanElement.style.height=height*zoomValue+ +'px';spanElement.style.textAlign="center";spanElement.style.fontSize=fontSize*zoomValue+'px';spanElement.style.paddingTop="1px";if(!isPrint){element.appendChild(spanElement);}if(!sf.base.isNullOrUndefined(signatureField.tooltip)&&signatureField.tooltip!=""){this.setToolTip(signatureField.tooltip,element);}if(this.pdfViewer.isFormDesignerToolbarVisible&&this.pdfViewer.signatureFieldSettings.isReadOnly){signatureField.isReadonly=true;}// eslint-disable-next-line
if(this.pdfViewer.isFormDesignerToolbarVisible&&(signatureField.isInitialField&&this.pdfViewer.initialFieldSettings.isRequired||!signatureField.isInitialField&&this.pdfViewer.signatureFieldSettings.isRequired)){signatureField.isRequired=true;}this.updateSignatureFieldProperties(signatureField,element,isPrint);return element;};// eslint-disable-next-line
FormDesigner.prototype.setIndicatorText=function(spanElement,fieldText,indicatorText,defaultText){spanElement.innerHTML=fieldText?fieldText:indicatorText?indicatorText:defaultText;};/**
     * @private
     */FormDesigner.prototype.createDropDownList=function(dropdownElement,drawingObject){var dropDownChildren=drawingObject.options?drawingObject.options:[];var element=sf.base.createElement("div");element.className="foreign-object";element.style.position="absolute";element.style.width="100%";element.style.height="100%";var select=document.createElement("select");select.addEventListener('change',this.dropdownChange.bind(this));select.id=drawingObject.id+"_"+drawingObject.pageIndex+"_"+this.setFormFieldIdIndex();select.name="editabledropdown"+this.pdfViewerBase.activeElements.activePageID+dropdownElement.id;select.className="e-pv-formfield-dropdown";select.style.width="100%";select.style.height="100%";select.style.position="absolute";if(this.pdfViewer.isFormDesignerToolbarVisible&&this.pdfViewer.DropdownFieldSettings.isReadOnly){drawingObject.isReadonly=true;}if(this.pdfViewer.isFormDesignerToolbarVisible&&this.pdfViewer.DropdownFieldSettings.isRequired){drawingObject.isRequired=true;}this.updateDropdownListProperties(drawingObject,select);for(var j=0;j<dropDownChildren.length;j++){var option=document.createElement("option");option.className="e-pv-formfield-dropdown";option.value=dropDownChildren[j].itemValue;option.text=dropDownChildren[j].itemName;this.updateDropdownListProperties(drawingObject,option);select.appendChild(option);}select.selectedIndex=!sf.base.isNullOrUndefined(drawingObject.selectedIndex)?drawingObject.selectedIndex:0;element.appendChild(select);if(!sf.base.isNullOrUndefined(drawingObject.tooltip)&&drawingObject.tooltip!=""){this.setToolTip(drawingObject.tooltip,element);}return element;};/**
     * @private
     */FormDesigner.prototype.createListBox=function(listBoxElement,drawingObject){var dropDownChildren=drawingObject.options?drawingObject.options:[];var element=sf.base.createElement("div");element.className="foreign-object";element.style.position="absolute";element.style.width="100%";element.style.height="100%";var select=document.createElement("select");select.addEventListener('click',this.listBoxChange.bind(this));select.id=drawingObject.id+"_"+drawingObject.pageIndex+"_"+this.setFormFieldIdIndex();select.name="editabledropdown"+this.pdfViewerBase.activeElements.activePageID+listBoxElement.id;select.className="e-pv-formfield-listbox";select.style.width="100%";select.style.height="100%";select.style.position="absolute";select.multiple=true;if(this.pdfViewer.isFormDesignerToolbarVisible&&this.pdfViewer.listBoxFieldSettings.isReadOnly){drawingObject.isReadonly=true;}if(this.pdfViewer.isFormDesignerToolbarVisible&&this.pdfViewer.listBoxFieldSettings.isRequired){drawingObject.isRequired=true;}this.updateListBoxProperties(drawingObject,select);for(var j=0;j<dropDownChildren.length;j++){var option=document.createElement("option");option.className="e-pv-formfield-listbox";option.value=dropDownChildren[j].itemValue;option.text=dropDownChildren[j].itemName;if(!sf.base.isNullOrUndefined(drawingObject.selectedIndex)){for(var k=0;k<drawingObject.selectedIndex.length;k++){if(j===drawingObject.selectedIndex[k]){option.selected=true;}}}select.appendChild(option);}element.appendChild(select);if(!sf.base.isNullOrUndefined(drawingObject.tooltip)&&drawingObject.tooltip!=""){this.setToolTip(drawingObject.tooltip,element);}return element;};/**
     * @private
     */FormDesigner.prototype.createInputElement=function(formFieldAnnotationType,drawingObject,formFieldBounds,isPrint){var zoomValue=this.pdfViewerBase.getZoomFactor();var element=sf.base.createElement("div");element.className="foreign-object";element.style.position="absolute";element.style.width="100%";element.style.height="100%";var labelElement;var checkboxDiv;var innerSpan;var inputElement=sf.base.createElement("input");var textArea=sf.base.createElement('textarea');inputElement.id=drawingObject.id+"_"+drawingObject.pageIndex+"_"+this.setFormFieldIdIndex();inputElement.style.position="absolute";if(formFieldAnnotationType==="Textbox"){if(drawingObject.isMultiline){textArea=this.createTextAreaElement(inputElement.id);if(this.pdfViewer.isFormDesignerToolbarVisible&&this.pdfViewer.textFieldSettings.isReadOnly){drawingObject.isReadonly=true;}if(this.pdfViewer.isFormDesignerToolbarVisible&&this.pdfViewer.textFieldSettings.isRequired){drawingObject.isRequired=true;}this.updateTextboxProperties(drawingObject,textArea);}else{inputElement=this.createTextboxElement(inputElement.id);if(this.pdfViewer.isFormDesignerToolbarVisible&&this.pdfViewer.textFieldSettings.isReadOnly){drawingObject.isReadonly=true;}if(this.pdfViewer.isFormDesignerToolbarVisible&&this.pdfViewer.textFieldSettings.isRequired){drawingObject.isRequired=true;}this.updateTextboxProperties(drawingObject,inputElement);}}else if(formFieldAnnotationType=="Checkbox"){var minCheckboxWidth=20;element.style.textAlign=sf.base.Browser.info.name==="chrome"?"-webkit-center":"center";element.style.display="flex";element.style.alignItems="center";var bounds=this.getCheckboxRadioButtonBounds(drawingObject,formFieldBounds);element.style.display=bounds.display;labelElement=sf.base.createElement("label",{className:"e-pv-checkbox-container"});labelElement.style.width=bounds.width+"px";labelElement.style.height=bounds.height+"px";if(this.isDrawHelper)labelElement.style.cursor='crosshair';else labelElement.style.cursor='pointer';checkboxDiv=sf.base.createElement("div",{className:"e-pv-checkbox-div"});checkboxDiv.addEventListener('click',this.setCheckBoxState.bind(this));checkboxDiv.id=drawingObject.id+"_input";if(drawingObject.isChecked){innerSpan=sf.base.createElement("span",{className:"e-pv-checkbox-span e-pv-cb-checked"});}else innerSpan=sf.base.createElement("span",{className:"e-pv-checkbox-span e-pv-cb-unchecked"});innerSpan.id=drawingObject.id+"_input_span";labelElement.id=drawingObject.id+"_input_label";innerSpan.style.width=bounds.width/5+"px";innerSpan.style.height=bounds.height/2.5+"px";innerSpan.style.left=bounds.width/2.5+"px";innerSpan.style.top=bounds.height/5+"px";if(innerSpan.className.indexOf("e-pv-cb-checked")!==-1){var checkboxWidth=parseInt(labelElement.style.width,10);if(checkboxWidth>minCheckboxWidth){innerSpan.style.borderWidth="3px";}else if(checkboxWidth<=15){innerSpan.style.borderWidth="1px";}else{innerSpan.style.borderWidth="2px";}}inputElement.type="checkbox";inputElement.style.margin="0px";inputElement.style.width=bounds.width+"px";inputElement.style.height=bounds.height+"px";if(isPrint){this.updateCheckboxProperties(drawingObject,inputElement);}else{if(this.pdfViewer.isFormDesignerToolbarVisible&&this.pdfViewer.checkBoxFieldSettings.isReadOnly){drawingObject.isReadonly=true;}if(this.pdfViewer.isFormDesignerToolbarVisible&&this.pdfViewer.checkBoxFieldSettings.isRequired){drawingObject.isRequired=true;}this.updateCheckboxProperties(drawingObject,checkboxDiv);}labelElement.appendChild(inputElement);labelElement.appendChild(checkboxDiv);checkboxDiv.appendChild(innerSpan);if(isPrint){inputElement.style.outlineWidth=drawingObject.thickness+'px';inputElement.style.outlineColor=drawingObject.borderColor;inputElement.style.outlineStyle='solid';inputElement.style.background=drawingObject.backgroundColor;}}else if(formFieldAnnotationType=="PasswordField"){inputElement.type="password";inputElement.className="e-pv-formfield-input";inputElement.style.width='100%';inputElement.style.height='100%';inputElement.addEventListener('click',this.inputElementClick.bind(this));inputElement.addEventListener('change',this.getTextboxValue.bind(this));if(this.pdfViewer.isFormDesignerToolbarVisible&&this.pdfViewer.passwordFieldSettings.isReadOnly){drawingObject.isReadonly=true;}if(this.pdfViewer.isFormDesignerToolbarVisible&&this.pdfViewer.passwordFieldSettings.isRequired){drawingObject.isRequired=true;}this.updatePasswordFieldProperties(drawingObject,inputElement);}else{element.style.textAlign=sf.base.Browser.info.name==="chrome"?"-webkit-center":"center";element.style.display="flex";element.style.alignItems="center";var bounds=this.getCheckboxRadioButtonBounds(drawingObject,formFieldBounds);element.style.display=bounds.display;labelElement=sf.base.createElement("label",{className:"e-pv-radiobtn-container"});labelElement.style.width=bounds.width+"px";labelElement.style.height=bounds.height+"px";labelElement.style.display="table";labelElement.style.verticalAlign="middle";labelElement.style.boxShadow=drawingObject.borderColor+' 0px 0px 0px '+drawingObject.thickness+'px';labelElement.style.borderRadius='50%';labelElement.style.visibility=drawingObject.visibility;if(this.isDrawHelper)labelElement.style.cursor='crosshair';else labelElement.style.cursor='pointer';labelElement.style.background=drawingObject.backgroundColor;innerSpan=sf.base.createElement("span",{className:"e-pv-radiobtn-span"});innerSpan.id=drawingObject.id;innerSpan.style.width=Math.floor(bounds.width/2)+"px";innerSpan.style.height=Math.floor(bounds.height/2)+"px";if(zoomValue<1&&bounds.width<=20&&bounds.height<=20){innerSpan.style.margin=Math.round(parseInt(labelElement.style.width)/3.5)+"px";}else{innerSpan.style.margin="5px";}labelElement.addEventListener('click',this.setRadioButtonState.bind(this));labelElement.id=drawingObject.id+"_input_label";inputElement.type="radio";if(!isPrint)inputElement.className="e-pv-radio-btn";inputElement.style.margin="0px";inputElement.addEventListener('click',function(event){event.stopPropagation();});inputElement.style.width=bounds.width+"px";inputElement.style.height=bounds.height+"px";if(this.pdfViewer.isFormDesignerToolbarVisible&&this.pdfViewer.radioButtonFieldSettings.isReadOnly){drawingObject.isReadonly=true;}if(this.pdfViewer.isFormDesignerToolbarVisible&&this.pdfViewer.radioButtonFieldSettings.isRequired){drawingObject.isRequired=true;}this.updateRadioButtonProperties(drawingObject,inputElement);labelElement.appendChild(inputElement);labelElement.appendChild(innerSpan);if(drawingObject.isRequired){labelElement.style.boxShadow='red 0px 0px 0px '+drawingObject.thickness+'px';}// if (isPrint) {
//     inputElement.style.outlineWidth = drawingObject.thickness + 'px';
//     inputElement.style.outlineColor = drawingObject.borderColor;
//     inputElement.style.outlineStyle = 'solid';
//     inputElement.style.background = drawingObject.backgroundColor;
// }
}if((formFieldAnnotationType==="Checkbox"||formFieldAnnotationType==="RadioButton")&&!isPrint){element.appendChild(labelElement);}else{if(drawingObject.isMultiline){element.appendChild(textArea);}else{element.appendChild(inputElement);}}if(!sf.base.isNullOrUndefined(drawingObject.tooltip)&&drawingObject.tooltip!=""){if(formFieldAnnotationType==='RadioButton')this.setToolTip(drawingObject.tooltip,labelElement);else this.setToolTip(drawingObject.tooltip,element);}this.isDrawHelper=false;return element;};FormDesigner.prototype.listBoxChange=function(event){var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){if(formFieldsData[i].Key.split("_")[0]===event.currentTarget.id.split("_")[0]||this.pdfViewer.nameTable[event.currentTarget.id.split("_")[0]].name===formFieldsData[i].FormField.name){if(formFieldsData[i].Key.split("_")[0]!==event.currentTarget.id.split("_")[0]){var inputElement=document.getElementById(formFieldsData[i].Key.split("_")[0]+"_content_html_element").firstElementChild.firstElementChild;for(var k=0;k<event.currentTarget.options.length;k++){inputElement.options[k].selected=event.currentTarget.options[k].selected;}}formFieldsData[i].FormField.selectedIndex=[];var oldValues=this.pdfViewerBase.formFieldCollection[i].FormField.selectedIndex;for(var j=0;j<event.currentTarget.selectedOptions.length;j++){var selectIndex=event.currentTarget.selectedOptions[j].index;var oldValueIndex=0;if(this.pdfViewerBase.formFieldCollection[i].FormField.selectedIndex&&this.pdfViewerBase.formFieldCollection[i].FormField.selectedIndex.length!==0){oldValueIndex=this.pdfViewerBase.formFieldCollection[i].FormField.selectedIndex.pop();this.pdfViewerBase.formFieldCollection[i].FormField.selectedIndex.push(oldValueIndex);}var oldValue=formFieldsData[i].FormField.option[oldValueIndex].itemValue;formFieldsData[i].FormField.selectedIndex.push(selectIndex);this.pdfViewer.nameTable[formFieldsData[i].Key.split("_")[0]].selectedIndex=formFieldsData[i].FormField.selectedIndex;this.pdfViewerBase.formFieldCollection[i].FormField.selectedIndex=formFieldsData[i].FormField.selectedIndex;var newValue=formFieldsData[i].FormField.option[selectIndex].itemValue;this.pdfViewerBase.formFieldCollection[i].FormField.value=newValue;this.updateFormFieldCollections(this.pdfViewerBase.formFieldCollection[i].FormField);this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",formFieldsData[i].FormField,this.pdfViewerBase.formFieldCollection[i].FormField.pageNumber,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,oldValue,newValue);}this.pdfViewer.annotation.addAction(this.pdfViewerBase.formFieldCollection[i].FormField.pageNumber,null,this.pdfViewerBase.formFieldCollection[i].FormField,'FormField Value Change','',oldValues,this.pdfViewerBase.formFieldCollection[i].FormField.selectedIndex);}}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');};FormDesigner.prototype.dropdownChange=function(event){var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){if(formFieldsData[i].Key.split("_")[0]===event.target.id.split("_")[0]||this.pdfViewer.nameTable[event.target.id.split("_")[0]].name===formFieldsData[i].FormField.name){this.pdfViewerBase.formFieldCollection[i].FormField.selectedIndex=[];var selectIndex=document.getElementById(event.currentTarget.id).selectedIndex;var oldValueIndex=0;if(formFieldsData[i].FormField.selectedIndex.length!==0){oldValueIndex=formFieldsData[i].FormField.selectedIndex.pop();formFieldsData[i].FormField.selectedIndex.push(oldValueIndex);}var oldValue=formFieldsData[i].FormField.option[oldValueIndex].itemValue;formFieldsData[i].FormField.selectedIndex.push(selectIndex);this.pdfViewer.nameTable[formFieldsData[i].Key.split("_")[0]].selectedIndex=selectIndex;this.pdfViewerBase.formFieldCollection[i].FormField.selectedIndex.push(selectIndex);var newValue=formFieldsData[i].FormField.option[selectIndex].itemValue;this.pdfViewerBase.formFieldCollection[i].FormField.value=newValue;if(formFieldsData[i].Key.split("_")[0]!==event.target.id.split("_")[0]){var inputElement=document.getElementById(formFieldsData[i].Key.split("_")[0]+"_content_html_element").firstElementChild.firstElementChild;inputElement.selectedIndex=selectIndex;}this.updateFormFieldCollections(this.pdfViewerBase.formFieldCollection[i].FormField);this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",formFieldsData[i].FormField,this.pdfViewerBase.formFieldCollection[i].FormField.pageNumber,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,oldValue,newValue);this.pdfViewer.annotation.addAction(this.pdfViewerBase.formFieldCollection[i].FormField.pageNumber,null,this.pdfViewerBase.formFieldCollection[i].FormField,'FormField Value Change','',oldValueIndex,selectIndex);}}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');};FormDesigner.prototype.setCheckBoxState=function(event){var minCheckboxWidth=20;var isChecked=false;if(!this.pdfViewer.nameTable[event.target.id.split("_")[0]].isReadonly){if(event.target&&event.target.firstElementChild&&event.target.firstElementChild.className==="e-pv-checkbox-span e-pv-cb-checked"){event.target.firstElementChild.classList.remove("e-pv-cb-checked");event.target.firstElementChild.classList.add("e-pv-checkbox-span","e-pv-cb-unchecked");isChecked=false;}else if(event.target.className==="e-pv-checkbox-span e-pv-cb-checked"){event.target.classList.remove("e-pv-cb-checked");event.target.classList.add("e-pv-checkbox-span","e-pv-cb-unchecked");isChecked=false;}else{event.target.firstElementChild.classList.remove("e-pv-cb-unchecked");event.target.firstElementChild.classList.add("e-pv-checkbox-span","e-pv-cb-checked");isChecked=true;}var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');if(isChecked){if(event.target.firstElementChild.className.indexOf("e-pv-cb-checked")!==-1){var checkboxWidth=parseInt(event.target.parentElement.style.width,10);if(checkboxWidth>minCheckboxWidth){event.target.firstElementChild.style.borderWidth="3px";}else if(checkboxWidth<=15){event.target.firstElementChild.style.borderWidth="1px";}else{event.target.firstElementChild.style.borderWidth="2px";}}}var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){if(formFieldsData[i].Key.split("_")[0]===event.target.id.split("_")[0]||this.pdfViewer.nameTable[event.target.id.split("_")[0]].name===formFieldsData[i].FormField.name){this.pdfViewer.nameTable[formFieldsData[i].Key.split("_")[0]].isChecked=isChecked;var oldValue=this.pdfViewerBase.formFieldCollection[i].FormField.isChecked;formFieldsData[i].FormField.isChecked=isChecked;this.pdfViewerBase.formFieldCollection[i].FormField.isChecked=formFieldsData[i].FormField.isChecked;if(formFieldsData[i].Key.split("_")[0]!==event.target.id.split("_")[0]){var checkboxElement=document.getElementById(formFieldsData[i].Key.split("_")[0]+"_input").firstElementChild;if(isChecked){if(checkboxElement.classList.contains('e-pv-cb-unchecked'))checkboxElement.classList.remove('e-pv-cb-unchecked');checkboxElement.classList.add("e-pv-cb-checked");}else{if(checkboxElement.classList.contains('e-pv-cb-checked'))checkboxElement.classList.remove('e-pv-cb-checked');checkboxElement.classList.add("e-pv-cb-unchecked");}}this.updateFormFieldCollections(this.pdfViewerBase.formFieldCollection[i].FormField);this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",formFieldsData[i].FormField,this.pdfViewerBase.formFieldCollection[i].FormField.pageNumber,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,oldValue,isChecked);this.pdfViewer.annotation.addAction(this.pdfViewerBase.formFieldCollection[i].FormField.pageNumber,null,this.pdfViewerBase.formFieldCollection[i].FormField,'FormField Value Change','',oldValue,isChecked);}}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');}};FormDesigner.prototype.setCheckedValue=function(element,isChecked){if(isChecked){element.firstElementChild.classList.remove("e-pv-cb-unchecked");element.firstElementChild.classList.add("e-pv-checkbox-span","e-pv-cb-checked");}else{element.firstElementChild.classList.remove("e-pv-cb-checked");element.firstElementChild.classList.add("e-pv-checkbox-span","e-pv-cb-unchecked");}};FormDesigner.prototype.setRadioButtonState=function(event){var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){if(formFieldsData[i].FormField.radiobuttonItem!=null){var oldValue=void 0;var undoElement=void 0;var redoElement=void 0;for(var j=0;j<formFieldsData[i].FormField.radiobuttonItem.length;j++){if(formFieldsData[i].FormField.radiobuttonItem[j].id.split("_")[0]===event.currentTarget.id.split("_")[0]){this.pdfViewer.nameTable[event.currentTarget.id.split("_")[0]].isSelected=true;formFieldsData[i].FormField.radiobuttonItem[j].isSelected=true;oldValue=this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[j].isSelected;if(!oldValue)undoElement=this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[j];this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[j].isSelected=true;this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",formFieldsData[i].FormField,this.pdfViewerBase.formFieldCollection[i].FormField.pageNumber,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true);}else{if(this.pdfViewer.nameTable[event.currentTarget.id.split("_")[0]].name===formFieldsData[i].FormField.radiobuttonItem[j].name){this.pdfViewer.nameTable[formFieldsData[i].FormField.radiobuttonItem[j].id.split("_")[0]].isSelected=false;var oldValue_1=this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[j].isSelected;formFieldsData[i].FormField.radiobuttonItem[j].isSelected=false;oldValue_1=this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[j].isSelected;if(oldValue_1)redoElement=this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[j];this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[j].isSelected=formFieldsData[i].FormField.radiobuttonItem[j].isSelected;this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",formFieldsData[i].FormField,this.pdfViewerBase.formFieldCollection[i].FormField.pageNumber,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false);}}this.updateFormFieldCollections(this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[j]);}if(undoElement!=null||redoElement!=null)this.pdfViewer.annotation.addAction(this.pdfViewerBase.formFieldCollection[i].FormField.pageNumber,null,this.pdfViewerBase.formFieldCollection[i].FormField,'FormField Value Change','',undoElement,redoElement);}}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');};FormDesigner.prototype.getTextboxValue=function(event){var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){if(formFieldsData[i].Key.split("_")[0]===event.target.id.split("_")[0]||this.pdfViewer.nameTable[event.target.id.split("_")[0]].name===formFieldsData[i].FormField.name){var oldValue=this.pdfViewerBase.formFieldCollection[i].FormField.value;formFieldsData[i].FormField.value=event.target.value;this.pdfViewer.nameTable[formFieldsData[i].Key.split("_")[0]].value=formFieldsData[i].FormField.value;this.pdfViewerBase.formFieldCollection[i].FormField.value=formFieldsData[i].FormField.value;if(formFieldsData[i].Key.split("_")[0]!==event.target.id.split("_")[0]){var element=document.getElementById(formFieldsData[i].Key.split("_")[0]+"_content_html_element");if(element&&element.firstElementChild&&element.firstElementChild.firstElementChild){var inputElement=element.firstElementChild.firstElementChild;inputElement.value=formFieldsData[i].FormField.value;}}this.updateFormFieldCollections(this.pdfViewerBase.formFieldCollection[i].FormField);this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",this.pdfViewerBase.formFieldCollection[i].FormField,this.pdfViewerBase.formFieldCollection[i].FormField.pageNumber,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,oldValue,event.target.value);this.pdfViewer.annotation.addAction(this.pdfViewerBase.formFieldCollection[i].FormField.pageNumber,null,this.pdfViewerBase.formFieldCollection[i].FormField,'FormField Value Change','',oldValue,event.target.value);}}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');};FormDesigner.prototype.inputElementClick=function(event){event.target.focus();};/**
     * Adds form field to the PDF page.
     *
     * @param formFieldType
     * @param options
     * @returns HTMLElement
     */FormDesigner.prototype.addFormField=function(formFieldType,options){var obj={thickness:0,bounds:{x:options.bounds.X,y:options.bounds.Y,width:options.bounds.Width,height:options.bounds.Height},fontFamily:!sf.base.isNullOrUndefined(options.fontFamily)?options.fontFamily:"Helvetica",fontSize:!sf.base.isNullOrUndefined(options.fontSize)?options.fontSize:10,color:!sf.base.isNullOrUndefined(options.color)?options.color:"black",backgroundColor:!sf.base.isNullOrUndefined(options.backgroundColor)?options.backgroundColor:"#daeaf7ff",alignment:!sf.base.isNullOrUndefined(options.alignment)?options.alignment:"left",isReadonly:options.isReadOnly?options.isReadOnly:false};obj.fontStyle=!sf.base.isNullOrUndefined(options.fontStyle)?options.fontStyle:"None";obj.visibility=!sf.base.isNullOrUndefined(options.visibility)?options.visibility:"visible";obj.value=!sf.base.isNullOrUndefined(options.value)?options.value:"";obj.isRequired=options.isRequired?options.isRequired:false;obj.isPrint=options.isPrint;obj.pageNumber=!sf.base.isNullOrUndefined(options.pageNumber)?options.pageNumber:this.pdfViewerBase.currentPageNumber;obj.pageIndex=obj.pageNumber-1;obj.font=options.font;this.setFormFieldIndex();switch(formFieldType){case'Textbox':obj.formFieldAnnotationType=formFieldType;obj.isMultiline=options.isMultiline;obj.name=!sf.base.isNullOrUndefined(options.name)?options.name:'Textbox'+this.formFieldIndex;obj.maxLength=options.maxLength;obj.thickness=!sf.base.isNullOrUndefined(options.thickness)?options.thickness:1;obj.borderColor=!sf.base.isNullOrUndefined(options.borderColor)?options.borderColor:'#303030';break;case'Password':obj.formFieldAnnotationType='PasswordField';obj.name=!sf.base.isNullOrUndefined(options.name)?options.name:'Password'+this.formFieldIndex;obj.maxLength=options.maxLength;obj.thickness=!sf.base.isNullOrUndefined(options.thickness)?options.thickness:1;obj.borderColor=!sf.base.isNullOrUndefined(options.borderColor)?options.borderColor:'#303030';break;case'DropDown':obj.formFieldAnnotationType='DropdownList';obj.name=!sf.base.isNullOrUndefined(options.name)?options.name:'Dropdown'+this.formFieldIndex;obj.options=options.options?options.options:[];for(var i=0;i<this.pdfViewer.formFieldCollection.length;i++){var formField=this.pdfViewer.formFieldCollection[i];if(formField.formFieldAnnotationType==='DropdownList'&&formField.name===obj.name){obj.options=formField.options;break;}}obj.selectedIndex=options.selectedIndex;obj.thickness=!sf.base.isNullOrUndefined(options.thickness)?options.thickness:1;obj.borderColor=!sf.base.isNullOrUndefined(options.borderColor)?options.borderColor:'#303030';break;case'ListBox':obj.formFieldAnnotationType=formFieldType;obj.name=!sf.base.isNullOrUndefined(options.name)?options.name:'List Box'+this.formFieldIndex;obj.options=options.options?options.options:[];for(var i=0;i<this.pdfViewer.formFieldCollection.length;i++){var formField=this.pdfViewer.formFieldCollection[i];if(formField.formFieldAnnotationType===formFieldType&&formField.name===obj.name){obj.options=formField.options;break;}}obj.selectedIndex=options.selectedIndex;obj.thickness=!sf.base.isNullOrUndefined(options.thickness)?options.thickness:1;obj.borderColor=!sf.base.isNullOrUndefined(options.borderColor)?options.borderColor:'#303030';break;case'CheckBox':obj.formFieldAnnotationType='Checkbox';obj.bounds={x:options.bounds.X,y:options.bounds.Y,width:options.bounds.Width,height:options.bounds.Height};obj.backgroundColor=!sf.base.isNullOrUndefined(options.backgroundColor)?options.backgroundColor:"#daeaf7ff";obj.isReadonly=options.isReadOnly?options.isReadOnly:false;obj.name=!sf.base.isNullOrUndefined(options.name)?options.name:'Check Box'+this.formFieldIndex;obj.isChecked=options.isChecked?options.isChecked:false;obj.visibility=options.visibility?options.visibility:"visible";obj.isRequired=options.isRequired?options.isRequired:false;obj.thickness=!sf.base.isNullOrUndefined(options.thickness)?options.thickness:1;obj.borderColor=!sf.base.isNullOrUndefined(options.borderColor)?options.borderColor:'#303030';break;case'RadioButton':obj.formFieldAnnotationType=formFieldType;obj.bounds={x:options.bounds.X,y:options.bounds.Y,width:options.bounds.Width,height:options.bounds.Height};obj.backgroundColor=!sf.base.isNullOrUndefined(options.backgroundColor)?options.backgroundColor:"#daeaf7ff";obj.isReadonly=options.isReadOnly?options.isReadOnly:false;obj.name=!sf.base.isNullOrUndefined(options.name)?options.name:'Radio Button'+this.formFieldIndex;obj.isSelected=options.isSelected?options.isSelected:false;obj.visibility=options.visibility?options.visibility:"visible";obj.isRequired=options.isRequired?options.isRequired:false;obj.thickness=!sf.base.isNullOrUndefined(options.thickness)?options.thickness:1;obj.borderColor=!sf.base.isNullOrUndefined(options.borderColor)?options.borderColor:'#303030';break;case'SignatureField':obj.formFieldAnnotationType=formFieldType;obj.bounds={x:options.bounds.X,y:options.bounds.Y,width:options.bounds.Width,height:options.bounds.Height};obj.backgroundColor=!sf.base.isNullOrUndefined(options.backgroundColor)?options.backgroundColor:"#daeaf7ff";obj.fontSize=!sf.base.isNullOrUndefined(options.fontSize)?options.fontSize:10;obj.fontStyle=!sf.base.isNullOrUndefined(options.fontStyle)?options.fontStyle:"None";obj.name=!sf.base.isNullOrUndefined(options.name)?options.name:'Signature'+this.formFieldIndex;obj.isRequired=options.isRequired?options.isRequired:false;obj.isReadonly=options.isReadOnly?options.isReadOnly:false;obj.signatureIndicatorSettings=options.signatureIndicatorSettings?{opacity:options.signatureIndicatorSettings.opacity?options.signatureIndicatorSettings.opacity:1,backgroundColor:options.signatureIndicatorSettings.backgroundColor?options.signatureIndicatorSettings.backgroundColor:'orange',width:options.signatureIndicatorSettings.width?options.signatureIndicatorSettings.width:19,height:options.signatureIndicatorSettings.height?options.signatureIndicatorSettings.height:10,fontSize:options.signatureIndicatorSettings.fontSize?options.signatureIndicatorSettings.fontSize:10,text:options.signatureIndicatorSettings.text?options.signatureIndicatorSettings.text:null,color:options.signatureIndicatorSettings.color?options.signatureIndicatorSettings.color:'black'}:null;break;case'InitialField':obj.formFieldAnnotationType=formFieldType;obj.bounds={x:options.bounds.X,y:options.bounds.Y,width:options.bounds.Width,height:options.bounds.Height};obj.backgroundColor=!sf.base.isNullOrUndefined(options.backgroundColor)?options.backgroundColor:"#daeaf7ff";obj.fontSize=!sf.base.isNullOrUndefined(options.fontSize)?options.fontSize:10;obj.fontStyle=!sf.base.isNullOrUndefined(options.fontStyle)?options.fontStyle:"None";obj.name=!sf.base.isNullOrUndefined(options.name)?options.name:'Initial'+this.formFieldIndex;obj.isRequired=options.isRequired?options.isRequired:false;obj.isReadonly=options.isReadOnly?options.isReadOnly:false;obj.isInitialField=true;obj.signatureIndicatorSettings=options.signatureIndicatorSettings?{opacity:options.signatureIndicatorSettings.opacity?options.signatureIndicatorSettings.opacity:1,backgroundColor:options.signatureIndicatorSettings.backgroundColor?options.signatureIndicatorSettings.backgroundColor:'orange',width:options.signatureIndicatorSettings.width?options.signatureIndicatorSettings.width:19,height:options.signatureIndicatorSettings.height?options.signatureIndicatorSettings.height:10,fontSize:options.signatureIndicatorSettings.fontSize?options.signatureIndicatorSettings.fontSize:10,text:options.signatureIndicatorSettings.text?options.signatureIndicatorSettings.text:null,color:options.signatureIndicatorSettings.color?options.signatureIndicatorSettings.color:'black'}:null;break;}obj.tooltip=!sf.base.isNullOrUndefined(options.tooltip)?options.tooltip:'';this.pdfViewerBase.disableTextSelectionMode();var HTMLElement=this.drawFormField(obj);return HTMLElement;};/**
     * @private
     */FormDesigner.prototype.drawFormField=function(obj){var node=this.pdfViewer.add(obj);this.pdfViewer.formFieldCollection.push(node);var formField={id:node.id,name:node.name,value:node.value,type:node.formFieldAnnotationType,isReadOnly:node.isReadonly,fontFamily:node.fontFamily,fontSize:node.fontSize,fontStyle:node.fontStyle,color:node.color,backgroundColor:node.backgroundColor,isMultiline:node.isMultiline,alignment:node.alignment,visibility:node.visibility,maxLength:node.maxLength,isRequired:node.isRequired,isPrint:node.isPrint,isSelected:node.isSelected,isChecked:node.isChecked,tooltip:node.tooltip,bounds:node.bounds,thickness:node.thickness,borderColor:node.borderColor,signatureIndicatorSettings:node.signatureIndicatorSettings};this.pdfViewer.formFieldCollections.push(formField);var HTMLElement=this.drawHTMLContent(node.formFieldAnnotationType,node.wrapper.children[0],node,obj.pageNumber-1,this.pdfViewer);return HTMLElement;};/**
     * Set the form field mode to add the form field on user interaction.
     *
     * @param formFieldId
     * @param options
     * @returns void
     */FormDesigner.prototype.setFormFieldMode=function(formFieldType,options){switch(formFieldType){case'Textbox':this.activateTextboxElement(formFieldType);break;case'Password':var passwordType='PasswordField';this.activatePasswordField(passwordType);break;case'CheckBox':var checkboxType='Checkbox';this.activateCheckboxElement(checkboxType);break;case'RadioButton':this.activateRadioButtonElement(formFieldType);break;case'DropDown':var dropdownType='DropdownList';this.activateDropDownListElement(dropdownType,options);break;case'ListBox':this.activateListboxElement(formFieldType,options);break;case'SignatureField':case'InitialField':this.activateSignatureBoxElement(formFieldType);}};/**
     * Reset the form fields into its original state.
     *
     * @param formFieldId
     * @returns void
     */FormDesigner.prototype.resetFormField=function(formFieldId){var formField=this.getFormField(formFieldId);if(formField){switch(formField.formFieldAnnotationType){case'Textbox':this.resetTextboxProperties(formField);break;case'PasswordField':this.resetPasswordProperties(formField);break;case'Checkbox':this.resetCheckboxProperties(formField);break;case'RadioButton':this.resetRadioButtonProperties(formField);break;case'DropdownList':this.resetDropdownListProperties(formField);break;case'ListBox':this.resetListBoxProperties(formField);break;case'SignatureField':case'InitialField':this.resetSignatureTextboxProperties(formField);break;}this.updateSessionFormFieldProperties(formField);}};/**
     * Select the form field in the PDF Viewer.
     *
     * @param formFieldId
     * @returns void
     */FormDesigner.prototype.selectFormField=function(formFieldId){var formField=this.getFormField(formFieldId);if(formField){this.isProgrammaticSelection=true;this.pdfViewer.select([formField.id]);this.isProgrammaticSelection=false;}};/**
     * Update the form field with the given properties and value.
     *
     * @param formFieldId
     * @param options
     * @returns void
     */FormDesigner.prototype.updateFormField=function(formFieldId,options){var formField=this.getFormField(formFieldId);if(formField){switch(formField.formFieldAnnotationType){case'Textbox':case'PasswordField':case'DropdownList':case'ListBox':case'SignatureField':case'InitialField':var inputElement=document.getElementById(formField.id+"_content_html_element").firstElementChild.firstElementChild;this.formFieldPropertyChange(formField,options,inputElement);break;case'RadioButton':var radioButtonDivDivElement=document.getElementById(formField.id+"_content_html_element").firstElementChild.firstElementChild.firstElementChild;this.formFieldPropertyChange(formField,options,radioButtonDivDivElement);break;case'Checkbox':var checkboxDivElement=document.getElementById(formField.id+"_content_html_element").firstElementChild.firstElementChild.lastElementChild;this.formFieldPropertyChange(formField,options,checkboxDivElement);break;}}};FormDesigner.prototype.formFieldPropertyChange=function(formFieldObject,options,htmlElement){var isValueChanged=false,isFontFamilyChanged=false,isFontSizeChanged=false,isFontStyleChanged=false,isColorChanged=false,isBackgroundColorChanged=false,isBorderColorChanged=false,isBorderWidthChanged=false,isAlignmentChanged=false,isReadOnlyChanged=false,isVisibilityChanged=false,isMaxLengthChanged=false,isRequiredChanged=false,isPrintChanged=false,isToolTipChanged=false;var oldValue,newValue;var zoomValue=this.pdfViewerBase.getZoomFactor();if(options.name){formFieldObject.name=options.name;var designerName=document.getElementById(formFieldObject.id+"_designer_name");designerName.innerHTML=formFieldObject.name;designerName.style.fontSize=formFieldObject.fontSize?formFieldObject.fontSize*zoomValue+'px':10*zoomValue+'px';htmlElement.name=options.name;this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].name=formFieldObject.name;}if(formFieldObject.formFieldAnnotationType!=='SignatureField'){if(options.thickness){if(formFieldObject.thickness!==options.thickness){isBorderWidthChanged=true;oldValue=formFieldObject.thickness;newValue=options.thickness;}htmlElement.style.borderWidth=options.thickness.toString();formFieldObject.thickness=options.thickness;this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].thickness=options.thickness;if(isBorderWidthChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,false,false,false,false,false,false,false,isBorderWidthChanged,false,false,false,false,false,false,false,oldValue,newValue);}}if(options.borderColor){var borderColor=this.colorNametoHashValue(options.borderColor);if(formFieldObject.borderColor!==borderColor){isBorderColorChanged=true;oldValue=formFieldObject.borderColor;newValue=borderColor;}formFieldObject.borderColor=borderColor;htmlElement.style.borderColor=borderColor;if(formFieldObject.formFieldAnnotationType==='RadioButton'){htmlElement.parentElement.style.boxShadow=borderColor+' 0px 0px 0px '+formFieldObject.thickness+'px';this.setToolTip(options.tooltip,htmlElement.parentElement);}this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].borderColor=borderColor;if(isBorderColorChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,false,false,false,false,false,false,isBorderColorChanged,false,false,false,false,false,false,false,false,oldValue,newValue);}}}if(options.backgroundColor){var backColor=this.colorNametoHashValue(options.backgroundColor);if(formFieldObject.backgroundColor!==backColor){isBackgroundColorChanged=true;oldValue=formFieldObject.backgroundColor;newValue=backColor;}formFieldObject.backgroundColor=backColor;htmlElement.style.background=backColor;if(formFieldObject.formFieldAnnotationType==='RadioButton'){htmlElement.parentElement.style.background=formFieldObject.backgroundColor;}this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].backgroundColor=backColor;if(isBackgroundColorChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,false,false,false,false,false,isBackgroundColorChanged,false,false,false,false,false,false,false,false,false,oldValue,newValue);}}if(options.bounds){formFieldObject.bounds={x:options.bounds.X,y:options.bounds.Y,width:options.bounds.Width,height:options.bounds.Height};var formField_1=this.pdfViewer.nameTable[formFieldObject.id.split("_")[0]];formField_1.bounds={x:options.bounds.X,y:options.bounds.Y,width:options.bounds.Width,height:options.bounds.Height};formField_1.wrapper.bounds=new sf.drawings.Rect(options.bounds.X,options.bounds.Y,options.bounds.Width,options.bounds.Height);this.pdfViewer.drawing.nodePropertyChange(formField_1,{bounds:{x:formField_1.wrapper.bounds.x,y:formField_1.wrapper.bounds.y,width:formField_1.wrapper.bounds.width,height:formField_1.wrapper.bounds.height}});var element=formField_1.wrapper.children[0];var point=sf.drawings.cornersPointsBeforeRotation(formField_1.wrapper.children[0]).topLeft;var hEment=document.getElementById(element.id+"_html_element");if(!sf.base.isNullOrUndefined(hEment)){hEment.setAttribute('style','height:'+element.actualSize.height*zoomValue+'px; width:'+element.actualSize.width*zoomValue+'px;left:'+point.x*zoomValue+'px; top:'+point.y*zoomValue+'px;'+'position:absolute;transform:rotate('+(element.rotateAngle+element.parentTransform)+'deg);'+'pointer-events:'+(this.pdfViewer.designerMode?'none':'all')+';visibility:'+(element.visible?'visible':'hidden')+';opacity:'+element.style.opacity+';');}}if(!sf.base.isNullOrUndefined(options.isReadOnly)){if(formFieldObject.isReadonly!==options.isReadOnly){isReadOnlyChanged=true;oldValue=formFieldObject.isReadonly;newValue=options.isReadOnly;}formFieldObject.isReadonly=options.isReadOnly;this.setReadOnlyToElement(formFieldObject,htmlElement,options.isReadOnly);this.setReadOnlyToFormField(formFieldObject,options.isReadOnly);this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].isReadonly=options.isReadOnly;if(isReadOnlyChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,false,false,false,false,false,false,false,false,false,isReadOnlyChanged,false,false,false,false,false,oldValue,newValue);}}if(!sf.base.isNullOrUndefined(options.isRequired)){if(formFieldObject.isRequired!==options.isRequired){isRequiredChanged=true;oldValue=formFieldObject.isRequired;newValue=options.isRequired;}formFieldObject.isRequired=options.isRequired;this.setRequiredToElement(formFieldObject,htmlElement,options.isRequired);this.setRequiredToFormField(formFieldObject,options.isRequired);this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].isRequired=options.isRequired;if(isRequiredChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,false,false,false,false,false,false,false,false,false,false,false,false,isRequiredChanged,false,false,oldValue,newValue);}}if(options.visibility){if(formFieldObject.visibility!==options.visibility){isVisibilityChanged=true;oldValue=formFieldObject.visibility;newValue=options.visibility;}formFieldObject.visibility=options.visibility;htmlElement.style.visibility=options.visibility;if(formFieldObject.formFieldAnnotationType==='RadioButton'){htmlElement.parentElement.style.visibility=formFieldObject.visibility;}if(formFieldObject.formFieldAnnotationType==='SignatureField'||formFieldObject.formFieldAnnotationType==='InitialField'){htmlElement.parentElement.style.visibility=formFieldObject.visibility;var annotation=this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]+"_content"];var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');var formFieldsData=JSON.parse(data);var index=this.getFormFiledIndex(formFieldObject.id.split('_')[0]);if(formFieldObject.visibility==="hidden"){if(annotation){this.hideSignatureValue(formFieldObject,annotation,index,formFieldsData);}}else{if(annotation){this.showSignatureValue(formFieldObject,oldValue,annotation,index,formFieldsData);}}}this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].visibility=options.visibility;if(isVisibilityChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,false,false,false,false,false,false,false,false,false,false,isVisibilityChanged,false,false,false,false,oldValue,newValue);}}if(!sf.base.isNullOrUndefined(options.isPrint)){if(formFieldObject.isPrint!==options.isPrint){isPrintChanged=true;oldValue=formFieldObject.isPrint;newValue=options.isPrint;}formFieldObject.isPrint=options.isPrint;this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].isPrint=options.isPrint;if(isPrintChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,false,false,false,false,false,false,false,false,false,false,false,false,false,isPrintChanged,false,oldValue,newValue);}}if(options.tooltip){if(formFieldObject.tooltip!==options.tooltip){isToolTipChanged=true;oldValue=formFieldObject.tooltip;newValue=options.tooltip;}formFieldObject.tooltip=options.tooltip;if(!sf.base.isNullOrUndefined(options.tooltip)){if(formFieldObject.formFieldAnnotationType==='RadioButton'){this.setToolTip(options.tooltip,htmlElement.parentElement);}else{this.setToolTip(options.tooltip,htmlElement);}}this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].tooltip=options.tooltip;if(isToolTipChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,false,false,false,false,false,false,false,false,false,false,false,false,false,false,isToolTipChanged,oldValue,newValue);}}if(formFieldObject.formFieldAnnotationType==='Checkbox'&&!sf.base.isNullOrUndefined(options.isChecked)||options.isChecked){if(formFieldObject.isChecked!==this.checkboxCheckedState){isValueChanged=true;oldValue=formFieldObject.isChecked;newValue=options.isChecked;}formFieldObject.isChecked=options.isChecked;htmlElement.checked=options.isChecked;this.setCheckedValue(htmlElement,options.isChecked);this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].isChecked=options.isChecked;if(isValueChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,isValueChanged,false,false,false,false,false,false,false,false,false,false,false,false,false,false,oldValue,newValue);}}if(formFieldObject.formFieldAnnotationType==='RadioButton'&&!sf.base.isNullOrUndefined(options.isSelected)||options.isSelected){if(formFieldObject.isSelected!==options.isSelected){isValueChanged=true;oldValue=formFieldObject.isSelected;newValue=this.checkboxCheckedState;}formFieldObject.isSelected=options.isSelected;htmlElement.checked=options.isSelected;this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].isSelected=options.isSelected;if(isValueChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,isValueChanged,false,false,false,false,false,false,false,false,false,false,false,false,false,false,oldValue,newValue);}}if(formFieldObject.formFieldAnnotationType==='DropdownList'||formFieldObject.formFieldAnnotationType==='ListBox'){if(options.options){formFieldObject.options=options.options;this.updateDropDownListDataSource(formFieldObject,htmlElement);this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].options=formFieldObject.options;}}if(formFieldObject.formFieldAnnotationType==='Textbox'||formFieldObject.formFieldAnnotationType==='SignatureField'||formFieldObject.formFieldAnnotationType==='InitialField'||formFieldObject.formFieldAnnotationType==='DropdownList'||formFieldObject.formFieldAnnotationType==='ListBox'||formFieldObject.formFieldAnnotationType==='PasswordField'){if(options.value){if(formFieldObject.value!==options.value){isValueChanged=true;oldValue=formFieldObject.value;newValue=options.value;}formFieldObject.value=options.value;if(!(formFieldObject.formFieldAnnotationType==='DropdownList'||formFieldObject.formFieldAnnotationType==='ListBox')){htmlElement.value=options.value;}this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].value=options.value;if(isValueChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,isValueChanged,false,false,false,false,false,false,false,false,false,false,false,false,false,false,oldValue,newValue);}}if(options.fontSize){if(formFieldObject.fontSize!==options.fontSize){isFontSizeChanged=true;oldValue=formFieldObject.fontSize;newValue=options.fontSize;}formFieldObject.fontSize=options.fontSize;htmlElement.style.fontSize=options.fontSize*zoomValue+'px';this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].fontSize=options.fontSize;if(isFontSizeChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,false,false,isFontSizeChanged,false,false,false,false,false,false,false,false,false,false,false,false,oldValue,newValue);}}if(options.color){var color=this.colorNametoHashValue(options.color);if(formFieldObject.color!==color){isColorChanged=true;oldValue=formFieldObject.color;newValue=color;}formFieldObject.color=color;htmlElement.style.color=color;this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].color=color;if(isColorChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,false,false,false,false,isColorChanged,false,false,false,false,false,false,false,false,false,false,oldValue,newValue);}}if(formFieldObject.formFieldAnnotationType!=='SignatureField'){if(options.alignment){if(formFieldObject.alignment!==options.alignment){isAlignmentChanged=true;oldValue=formFieldObject.alignment;newValue=options.alignment;}formFieldObject.alignment=options.alignment;htmlElement.style.textAlign=options.alignment;this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].alignment=options.alignment;if(isAlignmentChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,false,false,false,false,false,false,false,false,isAlignmentChanged,false,false,false,false,false,false,oldValue,newValue);}}if(options.maxLength){if(formFieldObject.maxLength!==options.maxLength){isMaxLengthChanged=true;oldValue=formFieldObject.maxLength;newValue=options.maxLength;}formFieldObject.maxLength=options.maxLength;htmlElement.maxLength=options.maxLength;this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].maxLength=options.maxLength;if(isMaxLengthChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,false,false,false,false,false,false,false,false,false,false,false,isMaxLengthChanged,false,false,false,oldValue,newValue);}}}if(formFieldObject.formFieldAnnotationType!=='PasswordField'){if(options.fontFamily){if(formFieldObject.fontFamily!==options.fontFamily){isFontFamilyChanged=true;oldValue=formFieldObject.fontFamily;newValue=options.fontFamily;}formFieldObject.fontFamily=options.fontFamily;htmlElement.style.fontFamily=options.fontFamily;this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].fontFamily=options.fontFamily;if(isFontFamilyChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,false,isFontFamilyChanged,false,false,false,false,false,false,false,false,false,false,false,false,false,oldValue,newValue);}}var oldFontStyle='';var newFontStyle='';if(options.fontStyle){oldFontStyle+=formFieldObject.font.isBold?'Bold'+", ":'';oldFontStyle+=formFieldObject.font.isItalic?'Italic'+", ":'';oldFontStyle+=formFieldObject.font.isStrikeout?'Strikethrough'+", ":'';oldFontStyle+=formFieldObject.font.isUnderline?'Underline'+", ":'';if((options.fontStyle&FontStyle.Bold)!==0){htmlElement.style.fontWeight="bold";formFieldObject.fontStyle="Bold";formFieldObject.font.isBold=true;this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].font.isBold=true;}newFontStyle+=formFieldObject.font.isBold?'Bold'+", ":'';if((options.fontStyle&FontStyle.Italic)!==0){htmlElement.style.fontStyle="italic";formFieldObject.fontStyle="Italic";formFieldObject.font.isItalic=true;this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].font.isItalic=true;}newFontStyle+=formFieldObject.font.isItalic?'Italic'+", ":'';if((options.fontStyle&FontStyle.Strikethrough)!==0){htmlElement.style.textDecoration="line-through";formFieldObject.font.isStrikeout=true;formFieldObject.fontStyle="Strikethrough";this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].font.isStrikeout=true;}newFontStyle+=formFieldObject.font.isStrikeout?'Strikethrough'+", ":'';if((options.fontStyle&FontStyle.Underline)!==0){htmlElement.style.textDecoration="underline";formFieldObject.fontStyle="Underline";formFieldObject.font.isUnderline=true;this.pdfViewer.nameTable[formFieldObject.id.split('_')[0]].font.isUnderline=true;}newFontStyle+=formFieldObject.font.isUnderline?'Underline'+", ":'';isFontStyleChanged=true;if(isFontStyleChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",formFieldObject,false,false,false,isFontStyleChanged,false,false,false,false,false,false,false,false,false,false,false,oldFontStyle,newFontStyle);}}}}this.updateSessionFormFieldProperties(formFieldObject);var formField={id:formFieldObject.id,name:formFieldObject.name,value:formFieldObject.value,type:formFieldObject.formFieldAnnotationType,isReadOnly:formFieldObject.isReadonly,fontFamily:formFieldObject.fontFamily,fontSize:formFieldObject.fontSize,fontStyle:formFieldObject.fontStyle,color:formFieldObject.color,backgroundColor:formFieldObject.backgroundColor,alignment:formFieldObject.alignment,visibility:formFieldObject.visibility,maxLength:formFieldObject.maxLength,isRequired:formFieldObject.isRequired,isPrint:formFieldObject.isPrint,tooltip:formFieldObject.tooltip,bounds:formFieldObject.bounds,thickness:formFieldObject.thickness,borderColor:formFieldObject.borderColor};this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function(el){return el.id===formField.id;})]=formField;};FormDesigner.prototype.colorNametoHashValue=function(colorString){var colorCode=colorString;if(!colorCode.match(/#([a-z0-9]+)/gi)&&!colorCode.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)){colorCode=this.nameToHash(colorCode);}return colorCode!==''?colorCode:colorString;};/**
     * @private
     */FormDesigner.prototype.getFormField=function(formFieldId){var formField;var formFieldCollectionObject;if(_typeof(formFieldId)==='object'){formFieldCollectionObject=this.getAnnotationsFromAnnotationCollections(formFieldId.id);if(formFieldCollectionObject)formField=this.pdfViewer.nameTable[formFieldCollectionObject.id];}if(typeof formFieldId==='string'){formFieldCollectionObject=this.getAnnotationsFromAnnotationCollections(formFieldId);if(formFieldCollectionObject)formField=this.pdfViewer.nameTable[formFieldCollectionObject.id];}return formField;};FormDesigner.prototype.resetTextboxProperties=function(obj){var inputElement=document.getElementById(obj.id+"_content_html_element").firstElementChild.firstElementChild;if(inputElement){obj.name='textboxField';obj.value='';obj.fontFamily='Helvetica';obj.fontSize=10;obj.fontStyle="None";obj.color='black';obj.backgroundColor='#daeaf7ff';obj.alignment='left';obj.visibility='visible';obj.isReadonly=false;obj.isRequired=false;obj.tooltip='';obj.isPrint=true;obj.borderColor='#303030';obj.thickness=1;obj.maxLength=0;this.updateTextboxProperties(obj,inputElement);}};FormDesigner.prototype.resetPasswordProperties=function(obj){var inputElement=document.getElementById(obj.id+"_content_html_element").firstElementChild.firstElementChild;if(inputElement){obj.name='passswordField';obj.value='';obj.fontFamily='Helvetica';obj.fontSize=10;obj.fontStyle="None";obj.color='black';obj.backgroundColor='#daeaf7ff';obj.alignment='left';obj.visibility='visible';obj.isReadonly=false;obj.isRequired=false;obj.tooltip='';obj.isPrint=true;obj.borderColor='#303030';obj.thickness=1;obj.maxLength=0;this.updatePasswordFieldProperties(obj,inputElement);}};FormDesigner.prototype.resetCheckboxProperties=function(obj){var inputElement=document.getElementById(obj.id+"_content_html_element").firstElementChild.firstElementChild;if(inputElement){obj.name='checkboxField';obj.isChecked=false;obj.backgroundColor='#daeaf7ff';obj.visibility='visible';obj.isReadonly=false;obj.isRequired=false;obj.tooltip='';obj.isPrint=true;obj.borderColor='#303030';obj.thickness=1;this.updateCheckboxProperties(obj,inputElement);}};FormDesigner.prototype.resetRadioButtonProperties=function(obj){var inputElement=document.getElementById(obj.id+"_content_html_element").firstElementChild.firstElementChild;if(inputElement){obj.name='RadioButtonField';obj.isSelected=false;obj.backgroundColor='#daeaf7ff';obj.visibility='visible';obj.isReadonly=false;obj.isRequired=false;obj.tooltip='';obj.isPrint=true;obj.borderColor='#303030';obj.thickness=1;this.updateRadioButtonProperties(obj,inputElement);}};FormDesigner.prototype.resetDropdownListProperties=function(obj){var inputElement=document.getElementById(obj.id+"_content_html_element").firstElementChild.firstElementChild;if(inputElement){obj.name='dropDownField';obj.value='';obj.fontFamily='Helvetica';obj.fontSize=10;obj.fontStyle="None";obj.color='black';obj.backgroundColor='#daeaf7ff';obj.alignment='left';obj.visibility='visible';obj.isReadonly=false;obj.isRequired=false;obj.tooltip='';obj.isPrint=true;obj.borderColor='#303030';obj.thickness=1;obj.options=[];this.updateDropdownListProperties(obj,inputElement);if(obj.options){this.updateDropDownListDataSource(obj,inputElement);}}};FormDesigner.prototype.resetListBoxProperties=function(obj){var inputElement=document.getElementById(obj.id+"_content_html_element").firstElementChild.firstElementChild;if(inputElement){obj.name='listBoxField';obj.value='';obj.fontFamily='Helvetica';obj.fontSize=10;obj.fontStyle="None";obj.color='black';obj.backgroundColor='#daeaf7ff';obj.alignment='left';obj.visibility='visible';obj.isReadonly=false;obj.isRequired=false;obj.tooltip='';obj.isPrint=true;obj.borderColor='#303030';obj.thickness=1;obj.options=[];this.updateListBoxProperties(obj,inputElement);if(obj.options){this.updateDropDownListDataSource(obj,inputElement);}}};FormDesigner.prototype.resetSignatureTextboxProperties=function(obj){var inputElement=document.getElementById(obj.id+"_content_html_element").firstElementChild.firstElementChild;if(inputElement){obj.name='signatureField';obj.value='';obj.fontFamily='Helvetica';obj.fontSize=10;obj.fontStyle="None";obj.color='black';obj.backgroundColor='#daeaf7ff';obj.isRequired=false;obj.isReadonly=false;obj.tooltip='';obj.isPrint=true;obj.visibility='visible';this.updateSignatureFieldProperties(obj,inputElement);}};/**
     * Deletes the form field from the PDF page.
     *
     * @param formFieldId
     * @param addAction
     * @returns void
     */FormDesigner.prototype.deleteFormField=function(formFieldId,addAction){if(addAction===void 0){addAction=true;}var formField=this.getFormField(formFieldId);if(formField){this.clearSelection(formFieldId);this.pdfViewer.remove(formField);this.pdfViewer.renderDrawing();if(!sf.base.isNullOrUndefined(this.pdfViewer.toolbar)&&!sf.base.isNullOrUndefined(this.pdfViewer.toolbar.formDesignerToolbarModule))this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(false);if(this.pdfViewerBase.formFieldCollection.length>0){this.pdfViewerBase.enableFormFieldButton(true);}else{this.pdfViewerBase.enableFormFieldButton(false);}if(addAction){this.pdfViewer.annotation.addAction(this.pdfViewerBase.currentPageNumber,null,formField,'Delete','',formField,formField);}}};/**
     * Clears the selection of the form field in the PDF page.
     *
     * @param formFieldId
     * @returns void
     */FormDesigner.prototype.clearSelection=function(formFieldId){var formField;var formFieldCollectionObject;if(_typeof(formFieldId)==='object'){formFieldCollectionObject=this.getAnnotationsFromAnnotationCollections(formFieldId.id);formField=this.pdfViewer.nameTable[formFieldCollectionObject.id];}if(typeof formFieldId==='string'){formFieldCollectionObject=this.getAnnotationsFromAnnotationCollections(formFieldId);formField=this.pdfViewer.nameTable[formFieldCollectionObject.id];}if(formField&&this.pdfViewer.selectedItems&&!sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.properties.formFields)&&this.pdfViewer.selectedItems.properties.formFields.length>0&&this.pdfViewer.selectedItems.properties.formFields[0].id===formField.id){this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);}};/**
     * @private
     */FormDesigner.prototype.setMode=function(mode){if(mode&&mode.indexOf("designer")!==-1){this.enableDisableFormFieldsInteraction(true);this.pdfViewerBase.disableTextSelectionMode();}else{this.enableDisableFormFieldsInteraction(false);if(this.pdfViewer.textSelectionModule){this.pdfViewer.textSelectionModule.enableTextSelectionMode();}}};FormDesigner.prototype.enableDisableFormFieldsInteraction=function(enableDesignerMode){var collections=this.pdfViewer.formFieldCollection;if(collections&&collections.length>0){for(var i=0;i<collections.length;i++){var element=document.getElementById(collections[i].id+"_content_html_element");var designerName=document.getElementById(collections[i].id+"_designer_name");if(element){if(enableDesignerMode){this.pdfViewer.designerMode=true;element.style.pointerEvents="none";designerName.innerHTML=collections[i].name;var zoomValue=this.pdfViewerBase.getZoomFactor();designerName.style.fontSize=collections[i].fontSize?collections[i].fontSize*zoomValue+'px':10*zoomValue+'px';designerName.style.position='absolute';}else{this.pdfViewer.designerMode=false;element.style.pointerEvents="all";designerName.innerHTML="";designerName.style.position='initial';if(collections[i].formFieldAnnotationType==='RadioButton'){this.updateRadioButtonDesignerProperties(collections[i]);}if(collections[i].formFieldAnnotationType==='Checkbox'){this.updateCheckboxFormDesignerProperties(collections[i]);}this.pdfViewer.clearSelection(collections[i].pageIndex);}}}}};// eslint-disable-next-line
FormDesigner.prototype.getAnnotationsFromAnnotationCollections=function(annotationId){// eslint-disable-next-line
var collections=this.pdfViewer.formFieldCollection;if(collections&&annotationId){for(var i=0;i<collections.length;i++){if(collections[i].id===annotationId){return collections[i];}}}};/**
     * @private
     */FormDesigner.prototype.updateSignatureValue=function(formFieldId){for(var i=0;i<this.pdfViewerBase.formFieldCollection.length;i++){if(formFieldId===this.pdfViewerBase.formFieldCollection[i].FormField.id){this.pdfViewerBase.formFieldCollection[i].FormField.value='';this.pdfViewer.nameTable[this.pdfViewerBase.formFieldCollection[i].FormField.id.split('_')[0]].value='';this.pdfViewer.nameTable[this.pdfViewerBase.formFieldCollection[i].FormField.id].value='';this.pdfViewerBase.formFieldCollection[i].FormField.signatureType='';this.pdfViewer.nameTable[this.pdfViewerBase.formFieldCollection[i].FormField.id.split('_')[0]].signatureType='';this.pdfViewer.nameTable[this.pdfViewerBase.formFieldCollection[i].FormField.id].signatureType='';}}};/**
     * @private
     */FormDesigner.prototype.removeFieldsFromAnnotationCollections=function(annotationId){var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){if(formFieldsData[i].Key.split("_")[0]===annotationId){formFieldsData.splice(i,1);this.pdfViewerBase.formFieldCollection.splice(i,1);break;}}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape');if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,this.pdfViewerBase.currentPageNumber-1);if(annotObject[index]){for(var m=0;m<annotObject[index].annotations.length;m++){if(annotationId===annotObject[index].annotations[m].id){annotObject[index].annotations.splice(m,1);break;}}var annotationStringified=JSON.stringify(annotObject);window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_shape',annotationStringified);}}// eslint-disable-next-line
var collections=this.pdfViewer.formFieldCollection;if(collections&&annotationId){for(var i=0;i<collections.length;i++){if(collections[i].formFieldId===annotationId){this.pdfViewer.formFieldCollection.splice(i,1);}}}};FormDesigner.prototype.setFormFieldIndex=function(){this.formFieldIndex=this.formFieldIndex+1;return this.formFieldIndex;};FormDesigner.prototype.setFormFieldIdIndex=function(){this.formFieldIdIndex=this.formFieldIdIndex+1;return this.formFieldIdIndex;};FormDesigner.prototype.activateTextboxElement=function(formFieldType){this.pdfViewer.drawingObject={formFieldAnnotationType:formFieldType,name:'Textbox'+this.setFormFieldIndex(),value:'',fontFamily:'Helvetica',fontSize:10*this.pdfViewerBase.getZoomFactor(),fontStyle:'None',color:'black',backgroundColor:'#daeaf7ff',thickness:1,borderColor:'#303030',alignment:'left',isReadonly:false,visibility:"visible",isRequired:false,isPrint:true,rotateAngle:0,tooltip:'',font:{isItalic:false,isBold:false,isStrikeout:false,isUnderline:false}};this.pdfViewer.tool="DrawTool";};FormDesigner.prototype.activatePasswordField=function(formFieldType){this.pdfViewer.drawingObject={formFieldAnnotationType:formFieldType,name:'Password'+this.setFormFieldIndex(),value:'',fontFamily:'Helvetica',fontSize:10*this.pdfViewerBase.getZoomFactor(),fontStyle:'None',color:'black',alignment:'left',backgroundColor:'#daeaf7ff',thickness:1,borderColor:'#303030',isReadonly:false,visibility:"visible",isRequired:false,isPrint:true,rotateAngle:0,tooltip:'',font:{isItalic:false,isBold:false,isStrikeout:false,isUnderline:false}};this.pdfViewer.tool="DrawTool";};FormDesigner.prototype.activateCheckboxElement=function(formFieldType){this.pdfViewer.drawingObject={formFieldAnnotationType:formFieldType,name:'Check Box'+this.setFormFieldIndex(),isChecked:false,fontSize:10*this.pdfViewerBase.getZoomFactor(),backgroundColor:'#daeaf7ff',color:'black',thickness:1,borderColor:'#303030',isReadonly:false,visibility:"visible",isPrint:true,rotateAngle:0,tooltip:''};this.pdfViewer.tool="DrawTool";};FormDesigner.prototype.activateRadioButtonElement=function(formFieldType){this.pdfViewer.drawingObject={formFieldAnnotationType:formFieldType,name:'Radio Button'+this.setFormFieldIndex(),isSelected:false,fontSize:10*this.pdfViewerBase.getZoomFactor(),backgroundColor:'#daeaf7ff',color:'black',thickness:1,borderColor:'#303030',isReadonly:false,visibility:"visible",isPrint:true,rotateAngle:0,tooltip:''};this.pdfViewer.tool="DrawTool";};FormDesigner.prototype.activateDropDownListElement=function(formFieldType,dropDownOptions){this.pdfViewer.drawingObject={formFieldAnnotationType:formFieldType,name:'Dropdown'+this.setFormFieldIndex(),fontFamily:'Helvetica',fontSize:10*this.pdfViewerBase.getZoomFactor(),fontStyle:'None',color:'black',backgroundColor:'#daeaf7ff',thickness:1,borderColor:'#303030',alignment:'left',isReadonly:false,visibility:"visible",isRequired:false,isPrint:true,rotateAngle:0,tooltip:'',options:dropDownOptions,isMultiSelect:false,font:{isItalic:false,isBold:false,isStrikeout:false,isUnderline:false}};this.pdfViewer.tool="DrawTool";};FormDesigner.prototype.activateListboxElement=function(formFieldType,listBoxOptions){this.pdfViewer.drawingObject={formFieldAnnotationType:formFieldType,name:'List Box'+this.setFormFieldIndex(),fontFamily:'Helvetica',fontSize:10*this.pdfViewerBase.getZoomFactor(),fontStyle:'None',color:'black',backgroundColor:'#daeaf7ff',thickness:1,borderColor:'#303030',alignment:'left',isReadonly:false,visibility:"visible",isRequired:false,isPrint:true,rotateAngle:0,tooltip:'',options:listBoxOptions,isMultiSelect:true,font:{isItalic:false,isBold:false,isStrikeout:false,isUnderline:false}};this.pdfViewer.tool="DrawTool";};FormDesigner.prototype.activateSignatureBoxElement=function(formFieldType){this.pdfViewer.drawingObject={formFieldAnnotationType:formFieldType,name:this.pdfViewer.isInitialFieldToolbarSelection?'Initial'+this.setFormFieldIndex():'Signature'+this.setFormFieldIndex(),fontFamily:'Helvetica',fontSize:10*this.pdfViewerBase.getZoomFactor(),fontStyle:'None',color:'black',backgroundColor:'#daeaf7ff',alignment:'left',isReadonly:false,visibility:"visible",isRequired:false,isPrint:true,rotateAngle:0,tooltip:'',font:{isItalic:false,isBold:false,isStrikeout:false,isUnderline:false},isInitialField:this.pdfViewer.isInitialFieldToolbarSelection};this.pdfViewer.tool="DrawTool";};/**
     * @private
    */FormDesigner.prototype.updateTextboxProperties=function(obj,inputElement){inputElement.name=obj.name?obj.name:'Textbox'+this.setFormFieldIndex();inputElement.value=obj.value?obj.value:'';inputElement.style.fontFamily=obj.fontFamily&&this.getFontFamily(obj.fontFamily)?obj.fontFamily:'Helvetica';var zoomValue=this.pdfViewerBase.getZoomFactor();inputElement.style.fontSize=obj.fontSize?obj.fontSize*zoomValue+'px':10*zoomValue+'px';if(obj.font.isBold){inputElement.style.fontWeight="bold";}if(obj.font.isItalic){inputElement.style.fontStyle="italic";}if(obj.font.isStrikeout){inputElement.style.textDecoration="line-through";}if(obj.font.isUnderline){inputElement.style.textDecoration="underline";}inputElement.style.color=obj.color?obj.color:'black';inputElement.style.backgroundColor=obj.backgroundColor?obj.backgroundColor:'#daeaf7ff';inputElement.style.borderWidth=!sf.base.isNullOrUndefined(obj.thickness)?obj.thickness+'px':'1px';inputElement.style.borderColor=obj.borderColor?obj.borderColor:'#303030';inputElement.style.textAlign=obj.alignment?obj.alignment.toLowerCase():'left';inputElement.style.visibility=obj.visibility?obj.visibility:'visible';inputElement.style.pointerEvents=obj.isReadonly?'none':'default';if(obj.isReadonly){inputElement.disabled=true;inputElement.style.cursor='default';inputElement.style.backgroundColor='transparent';}if(obj.isRequired){inputElement.required=true;inputElement.style.border='1px solid red';inputElement.style.borderWidth=!sf.base.isNullOrUndefined(obj.thickness)?obj.thickness+'px':'1px';}if(obj.maxLength!=undefined){inputElement.maxLength=obj.maxLength===0?524288:obj.maxLength;}inputElement.tabIndex=this.formFieldIndex;};/**
     * @private
    */FormDesigner.prototype.updatePasswordFieldProperties=function(obj,inputElement){inputElement.name=obj.name?obj.name:'Password'+this.setFormFieldIndex();inputElement.value=obj.value?obj.value:'';inputElement.style.fontFamily=obj.fontFamily?obj.fontFamily:'Helvetica';var zoomValue=this.pdfViewerBase.getZoomFactor();inputElement.style.fontSize=obj.fontSize?obj.fontSize*zoomValue+'px':10*zoomValue+'px';if(obj.font.isBold){inputElement.style.fontWeight="bold";}if(obj.font.isItalic){inputElement.style.fontStyle="italic";}if(obj.font.isStrikeout){inputElement.style.textDecoration="line-through";}if(obj.font.isUnderline){inputElement.style.textDecoration="underline";}inputElement.style.borderWidth=!sf.base.isNullOrUndefined(obj.thickness)?obj.thickness+'px':'1px';inputElement.style.color=obj.color?obj.color:'black';inputElement.style.backgroundColor=obj.backgroundColor?obj.backgroundColor:'#daeaf7ff';inputElement.style.borderColor=obj.borderColor?obj.borderColor:'#303030';inputElement.style.textAlign=obj.alignment?obj.alignment.toLowerCase():'left';inputElement.style.visibility=obj.visibility?obj.visibility:'visible';inputElement.style.pointerEvents=obj.isReadonly?'none':'default';if(obj.isReadonly){inputElement.disabled=true;inputElement.style.cursor='default';inputElement.style.backgroundColor='transparent';}if(obj.isRequired){inputElement.required=true;inputElement.style.border='1px solid red';inputElement.style.borderWidth=!sf.base.isNullOrUndefined(obj.thickness)?obj.thickness+'px':'1px';}if(obj.maxLength!=undefined){inputElement.maxLength=obj.maxLength===0?524288:obj.maxLength;}inputElement.tabIndex=this.formFieldIndex;};/**
     * @private
    */FormDesigner.prototype.updateCheckboxProperties=function(obj,inputElement){inputElement.name=obj.name?obj.name:'Check Box'+this.setFormFieldIndex();inputElement.checked=obj.isChecked?true:false;inputElement.style.backgroundColor=obj.backgroundColor?obj.backgroundColor:'#daeaf7ff';inputElement.style.borderColor=obj.borderColor?obj.borderColor:'#303030';inputElement.style.visibility=obj.visibility?obj.visibility:'visible';inputElement.style.pointerEvents=obj.isReadonly?'none':'default';inputElement.style.borderWidth=!sf.base.isNullOrUndefined(obj.thickness)?obj.thickness+'px':'1px';if(obj.isReadonly){inputElement.disabled=true;inputElement.style.cursor='default';inputElement.style.backgroundColor='transparent';}if(obj.isRequired){inputElement.required=true;inputElement.style.border='1px solid red';inputElement.style.borderWidth=!sf.base.isNullOrUndefined(obj.thickness)?obj.thickness+'px':'1px';}inputElement.tabIndex=this.formFieldIndex;};/**
     * @private
    */FormDesigner.prototype.updateRadioButtonProperties=function(obj,inputElement){inputElement.name=obj.name?obj.name:'Radio Button'+this.setFormFieldIndex();inputElement.checked=obj.isSelected?true:false;inputElement.style.backgroundColor=obj.backgroundColor?obj.backgroundColor:'#daeaf7ff';inputElement.style.borderColor=obj.borderColor?obj.borderColor:'#303030';inputElement.style.visibility=obj.visibility?obj.visibility:'visible';inputElement.style.pointerEvents=obj.isReadonly?'none':'default';inputElement.style.borderWidth=!sf.base.isNullOrUndefined(obj.thickness)?obj.thickness+'px':'1px';if(obj.isReadonly){inputElement.disabled=true;inputElement.style.cursor='default';inputElement.style.backgroundColor='transparent';}if(obj.isRequired){inputElement.required=true;inputElement.style.border='1px solid red';inputElement.style.borderWidth=!sf.base.isNullOrUndefined(obj.thickness)?obj.thickness+'px':'1px';}inputElement.tabIndex=this.formFieldIndex;};/**
     * @private
    */FormDesigner.prototype.updateDropdownListProperties=function(obj,inputElement){inputElement.name=obj.name?obj.name:'Dropdown'+this.setFormFieldIndex();inputElement.value=obj.value?obj.value:'';inputElement.style.fontFamily=obj.fontFamily?obj.fontFamily:'Helvetica';var zoomValue=this.pdfViewerBase.getZoomFactor();inputElement.style.fontSize=obj.fontSize?obj.fontSize*zoomValue+'px':10*zoomValue+'px';if(obj.font.isBold){inputElement.style.fontWeight="bold";}if(obj.font.isItalic){inputElement.style.fontStyle="italic";}if(obj.font.isStrikeout){inputElement.style.textDecoration="line-through";}if(obj.font.isUnderline){inputElement.style.textDecoration="underline";}inputElement.style.borderWidth=!sf.base.isNullOrUndefined(obj.thickness)?obj.thickness+'px':'1px';inputElement.style.color=obj.color?obj.color:'black';inputElement.style.backgroundColor=obj.backgroundColor?obj.backgroundColor:'#daeaf7ff';inputElement.style.borderColor=obj.borderColor?obj.borderColor:'#303030';inputElement.style.textAlign=obj.alignment?obj.alignment.toLowerCase():'left';inputElement.style.visibility=obj.visibility?obj.visibility:'visible';inputElement.style.pointerEvents=obj.isReadonly?'none':'default';if(obj.isReadonly){inputElement.disabled=true;inputElement.style.cursor='default';inputElement.style.backgroundColor='transparent';}if(obj.isRequired){inputElement.required=true;inputElement.style.border='1px solid red';inputElement.style.borderWidth=!sf.base.isNullOrUndefined(obj.thickness)?obj.thickness+'px':'1px';}inputElement.tabIndex=this.formFieldIndex;};/**
     * @private
    */FormDesigner.prototype.updateListBoxProperties=function(obj,inputElement){inputElement.name=obj.name?obj.name:'List Box'+this.setFormFieldIndex();inputElement.value=obj.value?obj.value:'';inputElement.style.fontFamily=obj.fontFamily?obj.fontFamily:'Helvetica';var zoomValue=this.pdfViewerBase.getZoomFactor();inputElement.style.fontSize=obj.fontSize?obj.fontSize*zoomValue+'px':10*zoomValue+'px';if(obj.font.isBold){inputElement.style.fontWeight="bold";}if(obj.font.isItalic){inputElement.style.fontStyle="italic";}if(obj.font.isStrikeout){inputElement.style.textDecoration="line-through";}if(obj.font.isUnderline){inputElement.style.textDecoration="underline";}inputElement.style.color=obj.color?obj.color:'black';inputElement.style.backgroundColor=obj.backgroundColor?obj.backgroundColor:'#daeaf7ff';inputElement.style.borderColor=obj.borderColor?obj.borderColor:'#303030';inputElement.style.textAlign=obj.alignment?obj.alignment.toLowerCase():'left';inputElement.style.visibility=obj.visibility?obj.visibility:'visible';inputElement.style.pointerEvents=obj.isReadonly?'none':'default';inputElement.style.borderWidth=!sf.base.isNullOrUndefined(obj.thickness)?obj.thickness+'px':'1px';if(obj.isReadonly){inputElement.disabled=true;inputElement.style.cursor='default';inputElement.style.backgroundColor='transparent';}if(obj.isRequired){inputElement.required=true;inputElement.style.border='1px solid red';inputElement.style.borderWidth=!sf.base.isNullOrUndefined(obj.thickness)?obj.thickness+'px':'1px';}inputElement.tabIndex=this.formFieldIndex;};/**
     * @private
    */FormDesigner.prototype.updateSignatureFieldProperties=function(obj,inputElement,isPrint){inputElement.name=obj.name?obj.name:'Signature'+this.setFormFieldIndex();inputElement.value=obj.value?obj.value:'';inputElement.style.fontFamily=obj.fontFamily?obj.fontFamily:'Helvetica';inputElement.style.visibility=obj.visibility?obj.visibility:'visible';var zoomValue=this.pdfViewerBase.getZoomFactor();inputElement.style.fontSize=obj.fontSize?obj.fontSize*zoomValue+'px':10*zoomValue+'px';if(obj.font.isBold){inputElement.style.fontWeight="bold";}if(obj.font.isItalic){inputElement.style.fontStyle="italic";}if(obj.font.isStrikeout){inputElement.style.textDecoration="line-through";}if(obj.font.isUnderline){inputElement.style.textDecoration="underline";}inputElement.style.color=obj.color?obj.color:'black';inputElement.style.borderWidth=!sf.base.isNullOrUndefined(obj.thickness)?obj.thickness+'px':'1px';inputElement.style.backgroundColor=isPrint?'transparent':'#FFE48559';if(obj.isReadonly){inputElement.disabled=true;inputElement.style.cursor='default';inputElement.style.backgroundColor='transparent';}if(obj.isRequired){inputElement.required=true;inputElement.firstElementChild.style.border='1px solid red';inputElement.style.borderWidth=obj.thickness?obj.thickness+'px':'1px';}inputElement.tabIndex=this.formFieldIndex;};/**
     * @private
     */FormDesigner.prototype.createHtmlElement=function(elementType,attribute){var element=sf.base.createElement(elementType);this.setAttributeHtml(element,attribute);return element;};FormDesigner.prototype.setAttributeHtml=function(element,attributes){var keys=Object.keys(attributes);for(var i=0;i<keys.length;i++){if(keys[i]!=='style'){element.setAttribute(keys[i],attributes[keys[i]]);}else{this.applyStyleAgainstCsp(element,attributes[keys[i]]);}}};FormDesigner.prototype.applyStyleAgainstCsp=function(svg,attributes){var keys=attributes.split(';');for(var i=0;i<keys.length;i++){var attribute=keys[i].split(':');if(attribute.length===2){svg.style[attribute[0].trim()]=attribute[1].trim();}}};// eslint-disable-next-line
FormDesigner.prototype.getFieldBounds=function(bound,pageIndex){// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];// eslint-disable-next-line max-len
bound={X:bound.X?bound.X:bound.x,Y:bound.Y?bound.Y:bound.y,Width:bound.Width?bound.Width:bound.width,Height:bound.Height?bound.Height:bound.height};// eslint-disable-next-line
var bounds;switch(pageDetails.rotation){case 0:bounds=bound;break;case 1:bounds={X:bound.Y-(bound.Width/2-bound.Height/2),Y:pageDetails.width-bound.X-bound.Height-(bound.Width/2-bound.Height/2),Width:bound.Width,Height:bound.Height};break;case 2:bounds={X:pageDetails.width-bound.X-bound.Width,Y:pageDetails.height-bound.Y-bound.Height,Width:bound.Width,Height:bound.Height};break;case 3:bounds={X:pageDetails.height-bound.Y-bound.Width+(bound.Width/2-bound.Height/2),Y:bound.X+(bound.Width/2-bound.Height/2),Width:bound.Width,Height:bound.Height};break;}if(!bounds){bounds=bound;}return bounds;};/**
     * @private
     */ // eslint-disable-next-line
FormDesigner.prototype.downloadFormDesigner=function(){var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');if(data){var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){var currentData=formFieldsData[i].FormField;currentData.Multiline=currentData.isMultiline;currentData.lineBound=this.getFieldBounds(currentData.lineBound,currentData.pageNumber-1);if(currentData.isRequired){if(currentData.formFieldAnnotationType==='Textbox'||currentData.formFieldAnnotationType==='PasswordField'||currentData.Multiline){if(currentData.value===null||currentData.value===''){this.pdfViewerBase.validateForm=true;this.pdfViewerBase.nonFillableFields[currentData.name]=currentData.value;}else{delete this.pdfViewerBase.nonFillableFields[currentData.name];}}else if(currentData.formFieldAnnotationType==='RadioButton'){if(currentData.radiobuttonItem){var isSelected=false;for(var j=0;j<currentData.radiobuttonItem.length;j++){currentData.radiobuttonItem[j].lineBound=this.getFieldBounds(currentData.radiobuttonItem[j].lineBound,currentData.radiobuttonItem[j].pageNumber-1);if(currentData.radiobuttonItem[j].isSelected){isSelected=true;break;}}if(!isSelected){this.pdfViewerBase.validateForm=true;this.pdfViewerBase.nonFillableFields[currentData.name]=isSelected;}else{delete this.pdfViewerBase.nonFillableFields[currentData.name];}}}else if(currentData.formFieldAnnotationType==='Checkbox'){if(currentData.isChecked===false){this.pdfViewerBase.validateForm=true;this.pdfViewerBase.nonFillableFields[currentData.name]=currentData.isChecked;}else{delete this.pdfViewerBase.nonFillableFields[currentData.name];}}else if(currentData.formFieldAnnotationType==='DropdownList'||currentData.formFieldAnnotationType==='ListBox'){if(sf.base.isNullOrUndefined(currentData.selectedIndex)||currentData.selectedIndex.length===0){this.pdfViewerBase.validateForm=true;this.pdfViewerBase.nonFillableFields[currentData.name]=currentData.selectedIndex;}else{delete this.pdfViewerBase.nonFillableFields[currentData.name];}}else if(currentData.formFieldAnnotationType==='SignatureField'||currentData.formFieldAnnotationType==='InitialField'){if(currentData.signatureBound){currentData.signatureBound=this.getFieldBounds(currentData.signatureBound,currentData.pageNumber-1);}if(currentData.value===null||currentData.value===''){this.pdfViewerBase.validateForm=true;this.pdfViewerBase.nonFillableFields[currentData.name]=currentData.value;}else{delete this.pdfViewerBase.nonFillableFields[currentData.name];}}}}return JSON.stringify(formFieldsData);}else{return null;}};/**
     * @private
     */ // eslint-disable-next-line max-len
FormDesigner.prototype.createAnnotationLayer=function(pageDiv,pageWidth,pageHeight,pageNumber,displayMode){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(canvas){this.updateAnnotationCanvas(canvas,pageWidth,pageHeight,pageNumber);return canvas;}else{// eslint-disable-next-line max-len
var annotationCanvas=sf.base.createElement('canvas',{id:this.pdfViewer.dataId+'_annotationCanvas_'+pageNumber,className:'e-pv-annotation-canvas'});this.updateAnnotationCanvas(annotationCanvas,pageWidth,pageHeight,pageNumber);pageDiv.appendChild(annotationCanvas);return annotationCanvas;}};/**
     * @private
    */FormDesigner.prototype.resizeAnnotations=function(width,height,pageNumber){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(canvas){canvas.style.width=width+'px';canvas.style.height=height+'px';this.pdfViewerBase.applyElementStyles(canvas,pageNumber);}};/**
     * @private
    */FormDesigner.prototype.getEventPageNumber=function(event){var eventTarget=event.target;if(eventTarget.classList.contains('e-pv-hyperlink')){eventTarget=eventTarget.parentElement;}else if(eventTarget.parentElement.classList.contains('foreign-object')){eventTarget=eventTarget.parentElement.parentElement.parentElement.parentElement;}// eslint-disable-next-line
var pageString=eventTarget.id.split('_text_')[1]||eventTarget.id.split('_textLayer_')[1]||eventTarget.id.split('_annotationCanvas_')[1]||eventTarget.id.split('_pageDiv_')[1];if(isNaN(pageString)){event=this.pdfViewerBase.annotationEvent;if(event){eventTarget=event.target;// eslint-disable-next-line
pageString=eventTarget.id.split('_text_')[1]||eventTarget.id.split('_textLayer_')[1]||eventTarget.id.split('_annotationCanvas_')[1]||eventTarget.id.split('_pageDiv_')[1];}}// eslint-disable-next-line
return parseInt(pageString);};FormDesigner.prototype.getPropertyPanelHeaderContent=function(formFieldType){switch(formFieldType){case'Textbox':return this.pdfViewer.localeObj.getConstant('Textbox');case'PasswordField':return this.pdfViewer.localeObj.getConstant('Password');case'Checkbox':return this.pdfViewer.localeObj.getConstant('Check Box');case'RadioButton':return this.pdfViewer.localeObj.getConstant('Radio Button');case'DropdownList':return this.pdfViewer.localeObj.getConstant('Dropdown');case'ListBox':return this.pdfViewer.localeObj.getConstant('List Box');case'InitialField':return this.pdfViewer.localeObj.getConstant('Initial');case'SignatureField':return this.pdfViewer.localeObj.getConstant('Signature');}};/**
     * @private
    */FormDesigner.prototype.createPropertiesWindow=function(){var _this=this;var elementID=this.pdfViewer.dataId;var propertyWinMinHeight;// eslint-disable-next-line max-len
var dialogDiv=sf.base.createElement('div',{id:elementID+'_properties_window',className:'e-pv-properties-form-field-window'});var appearanceTab=this.createAppearanceTab();this.pdfViewerBase.pageContainer.appendChild(dialogDiv);if(this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType!=='DropdownList'&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType!=='ListBox')propertyWinMinHeight='430px';else propertyWinMinHeight='505px';this.propertiesDialog=new sf.popups.Dialog({showCloseIcon:true,closeOnEscape:false,isModal:true,header:'<div class="e-pv-form-field-property-header"> '+this.getPropertyPanelHeaderContent(this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType)+' '+this.pdfViewer.localeObj.getConstant('Properties')+'</div>',minHeight:propertyWinMinHeight,target:this.pdfViewer.element,content:appearanceTab,allowDragging:true,close:function close(){_this.destroyPropertiesWindow();}});if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.propertiesDialog.buttons=[// eslint-disable-next-line max-len
{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Cancel')},click:this.onCancelClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant('OK'),isPrimary:true},click:this.onOkClicked.bind(this)}];}else{this.propertiesDialog.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Cancel')},click:this.onCancelClicked.bind(this)},// eslint-disable-next-line max-len
{buttonModel:{content:this.pdfViewer.localeObj.getConstant('OK'),isPrimary:true},click:this.onOkClicked.bind(this)}];}if(this.pdfViewer.enableRtl){this.propertiesDialog.enableRtl=true;}var propertySpliterBottom=sf.base.createElement('div');propertySpliterBottom.className='e-pv-properties-bottom-spliter';dialogDiv.appendChild(propertySpliterBottom);this.propertiesDialog.appendTo(dialogDiv);};FormDesigner.prototype.onOkClicked=function(args){var selectedItem=this.pdfViewer.selectedItems.formFields[0];var clonedItem=cloneObject(selectedItem);if(selectedItem){switch(selectedItem.formFieldAnnotationType){case'Textbox':case'PasswordField':if(this.formFieldMultiline&&this.formFieldMultiline.checked&&selectedItem.formFieldAnnotationType==='Textbox'&&this.multilineCheckboxCheckedState){this.renderMultilineText(selectedItem);}else if(selectedItem.formFieldAnnotationType==='Textbox'&&this.multilineCheckboxCheckedState){this.renderTextbox(selectedItem);}this.updateTextboxFormDesignerProperties(selectedItem);if(selectedItem.formFieldAnnotationType==='Textbox'){var textboxCollection=this.checkTextboxName(selectedItem);if(textboxCollection&&textboxCollection.length>0){for(var i=0;i<textboxCollection.length;i++){var item=textboxCollection[i];if(selectedItem.isMultiline){this.renderMultilineText(item);}else{this.renderTextbox(item);}this.updateTextboxFormDesignerProperties(item);}}}this.multilineCheckboxCheckedState=false;var point=sf.drawings.cornersPointsBeforeRotation(selectedItem.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(point,selectedItem.wrapper.children[0],selectedItem.formFieldAnnotationType,selectedItem);break;case'Checkbox':this.updateCheckboxFormDesignerProperties(selectedItem);var point1=sf.drawings.cornersPointsBeforeRotation(selectedItem.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(point1,selectedItem.wrapper.children[0],selectedItem.formFieldAnnotationType,selectedItem);break;case'RadioButton':this.updateRadioButtonDesignerProperties(selectedItem);var point2=sf.drawings.cornersPointsBeforeRotation(selectedItem.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(point2,selectedItem.wrapper.children[0],selectedItem.formFieldAnnotationType,selectedItem);break;case'SignatureField':case'InitialField':this.updateSignatureTextboxProperties(selectedItem);var point3=sf.drawings.cornersPointsBeforeRotation(selectedItem.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(point3,selectedItem.wrapper.children[0],selectedItem.formFieldAnnotationType,selectedItem);break;case'DropdownList':this.updateDropdownFormDesignerProperties(selectedItem);var point4=sf.drawings.cornersPointsBeforeRotation(selectedItem.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(point4,selectedItem.wrapper.children[0],selectedItem.formFieldAnnotationType,selectedItem);break;case'ListBox':this.updateListBoxFormDesignerProperties(selectedItem);var point5=sf.drawings.cornersPointsBeforeRotation(selectedItem.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(point5,selectedItem.wrapper.children[0],selectedItem.formFieldAnnotationType,selectedItem);break;}this.updateFormFieldCollections(selectedItem);var cloneChangedNode=cloneObject(selectedItem);this.pdfViewer.annotation.addAction(this.pdfViewerBase.currentPageNumber,null,selectedItem,'FormDesigner Properties Change','',clonedItem,cloneChangedNode);}this.propertiesDialog.hide();};FormDesigner.prototype.checkTextboxName=function(selectedItem){var textboxObjectCollection=[];for(var i=0;i<this.pdfViewer.formFieldCollection.length;i++){var item=this.pdfViewer.formFieldCollection[i];if(item.name===selectedItem.name){textboxObjectCollection.push(item);}}return textboxObjectCollection;};FormDesigner.prototype.renderMultilineText=function(selectedItem,isUndoRedo){if(isUndoRedo){this.reRenderMultilineTextbox(selectedItem,"e-pv-formfield-input");}else{this.addMultilineTextbox(selectedItem,"e-pv-formfield-input",true);}};FormDesigner.prototype.renderTextbox=function(selectedItem,isUndoRedo){if(isUndoRedo){this.reRenderMultilineTextbox(selectedItem,"e-pv-formfield-textarea");}else{this.addMultilineTextbox(selectedItem,"e-pv-formfield-textarea",false);}};FormDesigner.prototype.addMultilineTextbox=function(selectedItem,className,isMultiline){var wrapperElement=selectedItem.wrapper.children[0];selectedItem.isMultiline=isMultiline;var htmlElement=document.getElementById(wrapperElement.id+'_html_element').children[0];var textAreaId=htmlElement.children[0].id;document.getElementById(htmlElement.children[0].id).remove();if(className.indexOf("e-pv-formfield-textarea")!==-1){var inputElement=this.createTextboxElement(textAreaId);wrapperElement.template=htmlElement.appendChild(inputElement);}else{var textArea=this.createTextAreaElement(textAreaId);wrapperElement.template=htmlElement.appendChild(textArea);}var index=this.getFormFiledIndex(selectedItem.id.split('_')[0]);this.pdfViewerBase.formFieldCollection[index].FormField.isMultiline=selectedItem.isMultiline;this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].isMultiline=selectedItem.isMultiline;};FormDesigner.prototype.reRenderMultilineTextbox=function(selectedItem,className){var wrapperElement=document.getElementById(selectedItem.id+"_content_html_element");if(wrapperElement){var textareaElement=wrapperElement.firstElementChild.firstElementChild;var textareaId=textareaElement.id;textareaElement.remove();if(className.indexOf('e-pv-formfield-textarea')!==-1){var textboxElement=this.createTextboxElement(textareaId);wrapperElement.firstElementChild.appendChild(textboxElement);}else{var textboxElement=this.createTextAreaElement(textareaId);wrapperElement.firstElementChild.appendChild(textboxElement);}}};FormDesigner.prototype.createTextAreaElement=function(id){var textArea=sf.base.createElement('textarea');textArea.id=id;textArea.className='e-pv-formfield-textarea';textArea.style.width='100%';textArea.style.height='100%';textArea.addEventListener('click',this.inputElementClick.bind(this));textArea.addEventListener('change',this.getTextboxValue.bind(this));return textArea;};FormDesigner.prototype.createTextboxElement=function(id){var inputElement=sf.base.createElement('input');inputElement.id=id;inputElement.type="text";inputElement.className="e-pv-formfield-input";inputElement.autocomplete="off";inputElement.style.width='100%';inputElement.style.height='100%';inputElement.style.position="absolute";inputElement.addEventListener('click',this.inputElementClick.bind(this));inputElement.addEventListener('change',this.getTextboxValue.bind(this));return inputElement;};/**
     * @private
     */FormDesigner.prototype.updateFormFieldCollections=function(formFieldObject){var formField={id:formFieldObject.id.split('_')[0],name:formFieldObject.name,value:formFieldObject.value,type:formFieldObject.formFieldAnnotationType,isReadOnly:formFieldObject.isReadonly,fontFamily:formFieldObject.fontFamily,isMultiline:formFieldObject.isMultiline,fontSize:formFieldObject.fontSize,fontStyle:formFieldObject.fontStyle,color:formFieldObject.color,backgroundColor:formFieldObject.backgroundColor,alignment:formFieldObject.alignment,visibility:formFieldObject.visibility,maxLength:formFieldObject.maxLength,isRequired:formFieldObject.isRequired,isPrint:formFieldObject.isPrint,isSelected:formFieldObject.isSelected,isChecked:formFieldObject.isChecked,tooltip:formFieldObject.tooltip,bounds:formFieldObject.bounds,thickness:formFieldObject.thickness,borderColor:formFieldObject.borderColor};this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function(el){return el.id===formField.id;})]=formField;};/**
     * @private
     */FormDesigner.prototype.updateDropdownFormDesignerProperties=function(selectedItem,isUndoRedo){var dropdownElement=document.getElementById(selectedItem.id+"_content_html_element").firstElementChild.firstElementChild;if(this.pdfViewer.designerMode||isUndoRedo){var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');var formFieldsData=JSON.parse(data);var index_1=this.getFormFiledIndex(selectedItem.id.split('_')[0]);selectedItem.options=this.createDropdownDataSource(selectedItem);this.updateDropDownListDataSource(selectedItem,dropdownElement);selectedItem.selectedIndex=[];if(index_1>-1){formFieldsData[index_1].FormField.option=selectedItem.options;this.pdfViewerBase.formFieldCollection[index_1].FormField.option=selectedItem.options;if(!sf.base.isNullOrUndefined(selectedItem.options)&&selectedItem.options.length>0){formFieldsData[index_1]&&formFieldsData[index_1].FormField.value?selectedItem.selectedIndex.push(selectedItem.options.findIndex(function(x){return x.itemValue===formFieldsData[index_1].FormField.value;})):selectedItem.selectedIndex.push(0);}}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].options=selectedItem.options;if(this.formFieldName&&this.formFieldName.value||isUndoRedo){this.updateNamePropertyChange(selectedItem,dropdownElement,isUndoRedo,index_1,formFieldsData);}if(this.formFieldValue&&formFieldsData[index_1]&&formFieldsData[index_1].FormField.value||isUndoRedo){this.updateValuePropertyChange(selectedItem,dropdownElement,isUndoRedo,index_1,formFieldsData);}if(this.formFieldPrinting||isUndoRedo){this.updateIsPrintPropertyChange(selectedItem,isUndoRedo,index_1,formFieldsData);}if(this.formFieldTooltip||isUndoRedo){this.updateTooltipPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_1,formFieldsData);}if(this.formFieldVisibility||isUndoRedo){this.updateVisibilityPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_1,formFieldsData);}if(this.formFieldFontFamily&&this.formFieldFontFamily.value||isUndoRedo){this.updateFontFamilyPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_1,formFieldsData);}if(this.formFieldFontSize&&this.formFieldFontSize.value||isUndoRedo){this.updateFontSizePropertyChange(selectedItem,dropdownElement,isUndoRedo,index_1,formFieldsData);}this.updateFontStylePropertyChange(selectedItem,dropdownElement,isUndoRedo,index_1,formFieldsData);if(this.formFieldAlign||isUndoRedo){this.updateAlignmentPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_1,formFieldsData);}if(this.fontColorValue||isUndoRedo){this.updateColorPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_1,formFieldsData);}if(this.backgroundColorValue||isUndoRedo){this.updateBackgroundColorPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_1,formFieldsData);}if(this.borderColorValue||isUndoRedo){this.updateBorderColorPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_1,formFieldsData);}if(this.formFieldBorderWidth||isUndoRedo){this.updateBorderThicknessPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_1,formFieldsData);}if(this.formFieldReadOnly||isUndoRedo){this.updateIsReadOnlyPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_1,formFieldsData);}if(this.formFieldRequired||isUndoRedo){this.updateIsRequiredPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_1,formFieldsData);}}if(isUndoRedo)this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');};/**
     * @private
     */FormDesigner.prototype.updateListBoxFormDesignerProperties=function(selectedItem,isUndoRedo){var dropdownElement=document.getElementById(selectedItem.id+"_content_html_element").firstElementChild.firstElementChild;if(this.pdfViewer.designerMode||isUndoRedo){var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');var formFieldsData=JSON.parse(data);var index_2=this.getFormFiledIndex(selectedItem.id.split('_')[0]);selectedItem.options=this.createDropdownDataSource(selectedItem);this.updateDropDownListDataSource(selectedItem,dropdownElement);selectedItem.selectedIndex=[];if(index_2>-1){formFieldsData[index_2].FormField.option=selectedItem.options;this.pdfViewerBase.formFieldCollection[index_2].FormField.option=selectedItem.options;if(!sf.base.isNullOrUndefined(selectedItem.options)&&selectedItem.options.length>0){formFieldsData[index_2]&&formFieldsData[index_2].FormField.value?selectedItem.selectedIndex.push(selectedItem.options.findIndex(function(x){return x.itemValue===formFieldsData[index_2].FormField.value;})):selectedItem.selectedIndex.push(0);}}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].options=selectedItem.options;if(this.formFieldName&&this.formFieldName.value||isUndoRedo){this.updateNamePropertyChange(selectedItem,dropdownElement,isUndoRedo,index_2,formFieldsData);}if(this.formFieldPrinting||isUndoRedo){this.updateIsPrintPropertyChange(selectedItem,isUndoRedo,index_2,formFieldsData);}if(this.formFieldTooltip||isUndoRedo){this.updateTooltipPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_2,formFieldsData);}if(this.formFieldVisibility||isUndoRedo){this.updateVisibilityPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_2,formFieldsData);}if(this.formFieldFontFamily&&this.formFieldFontFamily.value||isUndoRedo){this.updateFontFamilyPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_2,formFieldsData);}if(this.formFieldFontSize&&this.formFieldFontSize.value||isUndoRedo){this.updateFontSizePropertyChange(selectedItem,dropdownElement,isUndoRedo,index_2,formFieldsData);}this.updateFontStylePropertyChange(selectedItem,dropdownElement,isUndoRedo,index_2,formFieldsData);if(this.formFieldAlign||isUndoRedo){this.updateAlignmentPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_2,formFieldsData);}if(this.fontColorValue||isUndoRedo){this.updateColorPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_2,formFieldsData);}if(this.backgroundColorValue||isUndoRedo){this.updateBackgroundColorPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_2,formFieldsData);}if(this.borderColorValue||isUndoRedo){this.updateBorderColorPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_2,formFieldsData);}if(this.formFieldBorderWidth||isUndoRedo){this.updateBorderThicknessPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_2,formFieldsData);}if(this.formFieldReadOnly||isUndoRedo){this.updateIsReadOnlyPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_2,formFieldsData);}if(this.formFieldRequired||isUndoRedo){this.updateIsRequiredPropertyChange(selectedItem,dropdownElement,isUndoRedo,index_2,formFieldsData);}}if(isUndoRedo)this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');};FormDesigner.prototype.updateDropDownListDataSource=function(selectedItem,dropdownElement){while(dropdownElement.firstChild){dropdownElement.firstChild.remove();}for(var j=0;j<selectedItem.options.length;j++){var option=document.createElement("option");option.className="e-pv-formfield-dropdown";option.value=selectedItem.options[j].itemValue;option.text=selectedItem.options[j].itemName;dropdownElement.appendChild(option);}};FormDesigner.prototype.createDropdownDataSource=function(selectedItem){var ulItem=document.getElementById(this.pdfViewer.dataId+'_ul_list_item');this.formFieldListItemDataSource=[];if(ulItem&&ulItem.children&&ulItem.children.length>0){for(var i=0;i<ulItem.children.length;i++){var liItem=ulItem.children[i];this.formFieldListItemDataSource.push({itemName:liItem.innerHTML,itemValue:liItem.innerHTML});}}else if(selectedItem&&selectedItem.options.length>0){this.formFieldListItemDataSource=selectedItem.options;}return this.formFieldListItemDataSource;};/**
     * @private
     */FormDesigner.prototype.updateSignatureTextboxProperties=function(selectedItem,isUndoRedo){var inputElement=document.getElementById(selectedItem.id+"_content_html_element").firstElementChild.firstElementChild;var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');var formFieldsData=JSON.parse(data);var index=this.getFormFiledIndex(selectedItem.id.split('_')[0]);if(this.pdfViewer.designerMode||isUndoRedo){if(this.formFieldName&&this.formFieldName.value||isUndoRedo){this.updateNamePropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}if(this.formFieldPrinting||isUndoRedo){this.updateIsPrintPropertyChange(selectedItem,isUndoRedo,index,formFieldsData);}if(this.formFieldTooltip||isUndoRedo){this.updateTooltipPropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}if(this.formFieldVisibility||isUndoRedo){this.updateVisibilityPropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}if(this.formFieldReadOnly||isUndoRedo){this.updateIsReadOnlyPropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}if(this.formFieldRequired||isUndoRedo){this.updateIsRequiredPropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}}if(isUndoRedo)this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');};/**
     * @private
     */FormDesigner.prototype.updateCheckboxFormDesignerProperties=function(selectedItem,isUndoRedo){var checkBoxElement=document.getElementById(selectedItem.id+"_content_html_element").firstElementChild.firstElementChild.lastElementChild;var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');var formFieldsData=JSON.parse(data);var index=this.getFormFiledIndex(selectedItem.id.split('_')[0]);if(this.formFieldName&&this.formFieldName.value||isUndoRedo){this.updateNamePropertyChange(selectedItem,checkBoxElement,isUndoRedo,index,formFieldsData);}if(this.backgroundColorValue||isUndoRedo){this.updateBackgroundColorPropertyChange(selectedItem,checkBoxElement,isUndoRedo,index,formFieldsData);}if(this.borderColorValue||isUndoRedo){this.updateBorderColorPropertyChange(selectedItem,checkBoxElement,isUndoRedo,index,formFieldsData);}if(this.formFieldBorderWidth||isUndoRedo){this.updateBorderThicknessPropertyChange(selectedItem,checkBoxElement,isUndoRedo,index,formFieldsData);}if(this.formFieldChecked){this.checkboxCheckedState=this.formFieldChecked.checked;}if(this.formFieldPrinting||isUndoRedo){this.updateIsPrintPropertyChange(selectedItem,isUndoRedo,index,formFieldsData);}if(this.formFieldTooltip||isUndoRedo){this.updateTooltipPropertyChange(selectedItem,checkBoxElement,isUndoRedo,index,formFieldsData);}if(this.formFieldVisibility||isUndoRedo){this.updateVisibilityPropertyChange(selectedItem,checkBoxElement,isUndoRedo,index,formFieldsData);}if(this.checkboxCheckedState!=undefined||isUndoRedo){this.updateIsCheckedPropertyChange(selectedItem,checkBoxElement,isUndoRedo,index,formFieldsData);}if(this.pdfViewer.designerMode&&this.borderColorValue||isUndoRedo){this.updateBorderColorPropertyChange(selectedItem,checkBoxElement,isUndoRedo,index,formFieldsData);}if(this.pdfViewer.designerMode&&this.formFieldBorderWidth||isUndoRedo){this.updateBorderThicknessPropertyChange(selectedItem,checkBoxElement,isUndoRedo,index,formFieldsData);}if(this.formFieldReadOnly||isUndoRedo){this.updateIsReadOnlyPropertyChange(selectedItem,checkBoxElement,isUndoRedo,index,formFieldsData);}if(this.formFieldRequired||isUndoRedo){this.updateIsRequiredPropertyChange(selectedItem,checkBoxElement,isUndoRedo,index,formFieldsData);}if(isUndoRedo)this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');};/**
     * @private
     */FormDesigner.prototype.updateRadioButtonDesignerProperties=function(selectedItem,isUndoRedo){var radioButton=document.getElementById(selectedItem.id+"_content_html_element").firstElementChild.firstElementChild.firstElementChild;var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');var formFieldsData=JSON.parse(data);var index=this.getFormFiledIndex(selectedItem.id.split('_')[0]);if(this.formFieldName&&this.formFieldName.value||isUndoRedo){this.updateNamePropertyChange(selectedItem,radioButton,isUndoRedo,index,formFieldsData);}if(this.formFieldChecked){this.checkboxCheckedState=this.formFieldChecked.checked;}if(this.formFieldPrinting||isUndoRedo){this.updateIsPrintPropertyChange(selectedItem,isUndoRedo,index,formFieldsData);}if(this.formFieldTooltip||isUndoRedo){this.updateTooltipPropertyChange(selectedItem,radioButton,isUndoRedo,index,formFieldsData);}if(this.formFieldVisibility||isUndoRedo){this.updateVisibilityPropertyChange(selectedItem,radioButton,isUndoRedo,index,formFieldsData);}if(this.pdfViewer.designerMode&&this.formFieldBorderWidth||isUndoRedo){this.updateBorderThicknessPropertyChange(selectedItem,radioButton,isUndoRedo,index,formFieldsData);}if(this.backgroundColorValue||isUndoRedo){this.updateBackgroundColorPropertyChange(selectedItem,radioButton,isUndoRedo,index,formFieldsData);}if(this.borderColorValue||isUndoRedo){this.updateBorderColorPropertyChange(selectedItem,radioButton,isUndoRedo,index,formFieldsData);}if(this.checkboxCheckedState!=undefined||isUndoRedo){this.updateIsSelectedPropertyChange(selectedItem,radioButton,isUndoRedo,index,formFieldsData);}if(this.formFieldReadOnly||isUndoRedo){this.updateIsReadOnlyPropertyChange(selectedItem,radioButton,isUndoRedo,index,formFieldsData);}if(this.formFieldRequired||isUndoRedo){this.updateIsRequiredPropertyChange(selectedItem,radioButton,isUndoRedo,index,formFieldsData);}if(isUndoRedo){var formField=this.pdfViewer.nameTable[selectedItem.id.split('_')[0]];var point2=sf.drawings.cornersPointsBeforeRotation(formField.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(point2,formField.wrapper.children[0],formField.formFieldAnnotationType,formField);}};/**
     * @private
     */FormDesigner.prototype.updateTextboxFormDesignerProperties=function(selectedItem,isUndoRedo){var inputElement=document.getElementById(selectedItem.id+"_content_html_element").firstElementChild.firstElementChild;var isMaxLengthChanged=false;var oldValue,newValue;var data=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');var formFieldsData=JSON.parse(data);var index=this.getFormFiledIndex(selectedItem.id.split('_')[0]);if(this.pdfViewer.designerMode||isUndoRedo){if(this.formFieldName&&this.formFieldName.value||isUndoRedo){this.updateNamePropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}if(this.formFieldValue||isUndoRedo){this.updateValuePropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}if(this.formFieldPrinting||isUndoRedo){this.updateIsPrintPropertyChange(selectedItem,isUndoRedo,index,formFieldsData);}if(this.formFieldTooltip||isUndoRedo){this.updateTooltipPropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}if(this.formFieldVisibility||isUndoRedo){this.updateVisibilityPropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}if(this.formFieldFontFamily&&this.formFieldFontFamily.value||isUndoRedo){this.updateFontFamilyPropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}if(this.formFieldFontSize&&this.formFieldFontSize.value||isUndoRedo){this.updateFontSizePropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}this.updateFontStylePropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);if(this.formFieldAlign||isUndoRedo||this.multilineCheckboxCheckedState){this.updateAlignmentPropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}if(this.maxLengthItem||isUndoRedo){if(this.maxLengthItem&&selectedItem.maxLength!==this.maxLengthItem.value){isMaxLengthChanged=true;oldValue=selectedItem.maxLength;newValue=this.maxLengthItem.value;}var maxLength=this.maxLengthItem.value===0?524288:this.maxLengthItem.value;if(isUndoRedo&&selectedItem.maxLength!==0){inputElement.maxLength=selectedItem.maxLength;}else{inputElement.maxLength=maxLength;selectedItem.maxLength=this.maxLengthItem.value;}if(index>-1){formFieldsData[index].FormField.maxLength=selectedItem.maxLength;this.pdfViewerBase.formFieldCollection[index].FormField.maxLength=selectedItem.maxLength;}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].maxLength=selectedItem.maxLength;if(isMaxLengthChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,false,false,false,false,false,false,false,false,false,false,false,isMaxLengthChanged,false,false,false,oldValue,newValue);}}if(this.fontColorValue||isUndoRedo||this.multilineCheckboxCheckedState){this.updateColorPropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}if(this.backgroundColorValue||isUndoRedo||this.multilineCheckboxCheckedState){this.updateBackgroundColorPropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}if(this.borderColorValue||isUndoRedo||this.multilineCheckboxCheckedState){this.updateBorderColorPropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}if(this.formFieldBorderWidth||isUndoRedo){this.updateBorderThicknessPropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}if(this.formFieldReadOnly||isUndoRedo){this.updateIsReadOnlyPropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}if(this.formFieldRequired||isUndoRedo){this.updateIsRequiredPropertyChange(selectedItem,inputElement,isUndoRedo,index,formFieldsData);}}if(!this.pdfViewer.designerMode){if(this.formFieldVisibility&&this.formFieldVisibility.value){selectedItem.visibility=this.formFieldVisibility.value;var visibleItem=document.getElementById(selectedItem.id+'_content_html_element').firstElementChild.firstElementChild;visibleItem.style.visibility=selectedItem.visibility;}}if(isUndoRedo)this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');};/**
     * @private
     */FormDesigner.prototype.updateIsCheckedPropertyChange=function(selectedItem,element,isUndoRedo,index,formFieldsData){if(this.pdfViewer.designerMode||isUndoRedo){var isValueChanged=false;var oldValue=void 0,newValue=void 0;if(selectedItem.isChecked!==this.checkboxCheckedState){isValueChanged=true;oldValue=selectedItem.isChecked;newValue=this.checkboxCheckedState;}if(!isUndoRedo){selectedItem.isChecked=this.checkboxCheckedState;}if(index>-1){formFieldsData[index].FormField.isChecked=selectedItem.isChecked;this.pdfViewerBase.formFieldCollection[index].FormField.isChecked=selectedItem.isChecked;}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].isChecked=selectedItem.isChecked;if(isValueChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,isValueChanged,false,false,false,false,false,false,false,false,false,false,false,false,false,false,oldValue,newValue);}}if(!this.pdfViewer.designerMode||isUndoRedo){var checkboxElement=document.getElementById(selectedItem.id+"_input").firstElementChild;if(selectedItem.isChecked){if(checkboxElement.classList.contains('e-pv-cb-unchecked'))checkboxElement.classList.remove('e-pv-cb-unchecked');checkboxElement.classList.add("e-pv-cb-checked");}else{if(checkboxElement.classList.contains('e-pv-cb-checked'))checkboxElement.classList.remove('e-pv-cb-checked');checkboxElement.classList.add("e-pv-cb-unchecked");}}};/**
    * @private
    */FormDesigner.prototype.updateIsSelectedPropertyChange=function(selectedItem,element,isUndoRedo,index,formFieldsData){if(this.pdfViewer.designerMode||isUndoRedo){var isValueChanged=false;var oldValue=void 0,newValue=void 0;if(selectedItem.isSelected!==this.checkboxCheckedState){isValueChanged=true;oldValue=selectedItem.isSelected;newValue=this.checkboxCheckedState;}if(!isUndoRedo){selectedItem.isSelected=this.checkboxCheckedState;}if(index>-1){formFieldsData[index].FormField.isSelected=selectedItem.isSelected;this.pdfViewerBase.formFieldCollection[index].FormField.isSelected=selectedItem.isSelected;for(var i=0;i<formFieldsData[index].FormField.radiobuttonItem.length;i++){if(formFieldsData[index].FormField.radiobuttonItem[i].id.split("_")[0]===selectedItem.id.split("_")[0]){formFieldsData[index].FormField.radiobuttonItem[i].isSelected=selectedItem.isSelected;this.pdfViewerBase.formFieldCollection[index].FormField.radiobuttonItem[i].isSelected=selectedItem.isSelected;}}}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].isSelected=selectedItem.isSelected;if(isValueChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,isValueChanged,false,false,false,false,false,false,false,false,false,false,false,false,false,false,oldValue,newValue);}}if(!this.pdfViewer.designerMode||isUndoRedo){element.checked=selectedItem.isSelected;if(index>-1){formFieldsData[index].FormField.isSelected=selectedItem.isSelected;this.pdfViewerBase.formFieldCollection[index].FormField.isSelected=selectedItem.isSelected;for(var i=0;i<formFieldsData[index].FormField.radiobuttonItem.length;i++){if(formFieldsData[index].FormField.radiobuttonItem[i].id.split("_")[0]===selectedItem.id.split("_")[0]){formFieldsData[index].FormField.radiobuttonItem[i].isSelected=selectedItem.isSelected;this.pdfViewerBase.formFieldCollection[index].FormField.radiobuttonItem[i].isSelected=selectedItem.isSelected;}}}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].isSelected=selectedItem.isSelected;}};/**
     * @private
     */FormDesigner.prototype.updateValuePropertyChange=function(selectedItem,element,isUndoRedo,index,formFieldsData){var isValueChanged=false;var oldValue,newValue;if(selectedItem.formFieldAnnotationType!=="DropdownList"&&this.formFieldValue&&selectedItem.value!==this.formFieldValue.value){isValueChanged=true;oldValue=selectedItem.value;newValue=this.formFieldValue.value;}else if(selectedItem.formFieldAnnotationType==="DropdownList"&&this.formFieldValue&&selectedItem.value!==formFieldsData[index].FormField.value){isValueChanged=true;oldValue=selectedItem.value;newValue=formFieldsData[index].FormField.value;}if(isUndoRedo){element.value=selectedItem.value;}else{selectedItem.formFieldAnnotationType==="DropdownList"?selectedItem.value=formFieldsData[index].FormField.value:selectedItem.value=this.formFieldValue.value;selectedItem.formFieldAnnotationType==="DropdownList"?element.value=formFieldsData[index].FormField.value:element.value=this.formFieldValue.value;}if(index>-1){formFieldsData[index].FormField.value=selectedItem.value;this.pdfViewerBase.formFieldCollection[index].FormField.value=selectedItem.value;}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].value=selectedItem.value;if(isValueChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,isValueChanged,false,false,false,false,false,false,false,false,false,false,false,false,false,false,oldValue,newValue);}};FormDesigner.prototype.updateFontStylePropertyChange=function(selectedItem,element,isUndoRedo,index,formFieldsData){var isFontStyleChanged=false;var oldValue='';var newValue='';var result=this.updateFontStyle(element,selectedItem,isUndoRedo,index,formFieldsData);isFontStyleChanged=result[0];oldValue=result[1];newValue=result[2];if(index>-1){formFieldsData[index].FormField.fontStyle=selectedItem.fontStyle;this.pdfViewerBase.formFieldCollection[index].FormField.fontStyle=selectedItem.fontStyle;}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].fontStyle=selectedItem.fontStyle;if(isFontStyleChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,false,false,false,isFontStyleChanged,false,false,false,false,false,false,false,false,false,false,false,oldValue,newValue);}};FormDesigner.prototype.updateBorderThicknessPropertyChange=function(selectedItem,element,isUndoRedo,index,formFieldsData){var isBorderWidthChanged=false;var oldValue,newValue;var borderWidth=parseInt(this.formFieldBorderWidth);if(selectedItem.thickness!==borderWidth){isBorderWidthChanged=true;oldValue=selectedItem.thickness;newValue=borderWidth?borderWidth:selectedItem.thickness;}if(isUndoRedo){element.style.borderWidth=selectedItem.thickness.toString();}else{element.style.borderWidth=this.formFieldBorderWidth?this.formFieldBorderWidth:selectedItem.thickness;selectedItem.thickness=borderWidth;}if(index>-1){formFieldsData[index].FormField.thickness=selectedItem.thickness;this.pdfViewerBase.formFieldCollection[index].FormField.thickness=selectedItem.thickness;}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].thickness=selectedItem.thickness;if(isBorderWidthChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,false,false,false,false,false,false,false,isBorderWidthChanged,false,false,false,false,false,false,false,oldValue,newValue);}};FormDesigner.prototype.updateBorderColorPropertyChange=function(selectedItem,element,isUndoRedo,index,formFieldsData){var isBorderColorChanged=false;var oldValue,newValue;if(selectedItem.borderColor!==this.borderColorValue){isBorderColorChanged=true;oldValue=selectedItem.borderColor;newValue=this.borderColorValue?this.borderColorValue:selectedItem.borderColor;}if(isUndoRedo){element.style.borderColor=selectedItem.borderColor;}else{element.style.borderColor=this.borderColorValue?this.borderColorValue:selectedItem.borderColor;selectedItem.borderColor=this.borderColorValue?this.borderColorValue:selectedItem.borderColor;}if(selectedItem.formFieldAnnotationType=="RadioButton")element.parentElement.style.boxShadow=this.borderColorValue+' 0px 0px 0px '+selectedItem.thickness+'px';if(index>-1){formFieldsData[index].FormField.borderColor=this.getRgbCode(selectedItem.borderColor);this.pdfViewerBase.formFieldCollection[index].FormField.borderColor=this.getRgbCode(selectedItem.borderColor);}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].borderColor=selectedItem.borderColor;if(isBorderColorChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,false,false,false,false,false,false,isBorderColorChanged,false,false,false,false,false,false,false,false,oldValue,newValue);}};FormDesigner.prototype.updateBackgroundColorPropertyChange=function(selectedItem,element,isUndoRedo,index,formFieldsData){var isBackgroundColorChanged=false;var oldValue,newValue;if(selectedItem.backgroundColor!==this.backgroundColorValue){isBackgroundColorChanged=true;oldValue=selectedItem.backgroundColor;newValue=this.backgroundColorValue?this.backgroundColorValue:selectedItem.backgroundColor;}if(isUndoRedo){if(selectedItem.formFieldAnnotationType=="RadioButton")element.parentElement.style.background=selectedItem.backgroundColor;else element.style.background=selectedItem.backgroundColor;}else{if(selectedItem.formFieldAnnotationType=="RadioButton")element.parentElement.style.background=this.backgroundColorValue?this.backgroundColorValue:selectedItem.backgroundColor;else element.style.background=this.backgroundColorValue?this.backgroundColorValue:selectedItem.backgroundColor;selectedItem.backgroundColor=this.backgroundColorValue?this.backgroundColorValue:selectedItem.backgroundColor;}if(index>-1){formFieldsData[index].FormField.backgroundColor=this.getRgbCode(selectedItem.backgroundColor);this.pdfViewerBase.formFieldCollection[index].FormField.backgroundColor=this.getRgbCode(selectedItem.backgroundColor);}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].backgroundColor=selectedItem.backgroundColor;if(isBackgroundColorChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,false,false,false,false,false,isBackgroundColorChanged,false,false,false,false,false,false,false,false,false,oldValue,newValue);}};FormDesigner.prototype.updateColorPropertyChange=function(selectedItem,element,isUndoRedo,index,formFieldsData){var isColorChanged=false;var oldValue,newValue;if(selectedItem.color!==this.fontColorValue){isColorChanged=true;oldValue=selectedItem.color;newValue=this.fontColorValue?this.fontColorValue:selectedItem.color;}if(isUndoRedo){element.style.color=selectedItem.color;}else{element.style.color=this.fontColorValue?this.fontColorValue:selectedItem.color;selectedItem.color=this.fontColorValue?this.fontColorValue:selectedItem.color;}if(index>-1){formFieldsData[index].FormField.color=this.getRgbCode(selectedItem.color);this.pdfViewerBase.formFieldCollection[index].FormField.color=this.getRgbCode(selectedItem.color);}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].color=selectedItem.color;if(isColorChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,false,false,false,false,isColorChanged,false,false,false,false,false,false,false,false,false,false,oldValue,newValue);}};FormDesigner.prototype.updateAlignmentPropertyChange=function(selectedItem,element,isUndoRedo,index,formFieldsData){var isAlignmentChanged=false;var oldValue,newValue;if(selectedItem.alignment!==this.formFieldAlign){isAlignmentChanged=true;oldValue=selectedItem.alignment;newValue=this.formFieldAlign?this.formFieldAlign:selectedItem.alignment;}if(isUndoRedo){element.style.textAlign=selectedItem.alignment;if((selectedItem.formFieldAnnotationType=="ListBox"||selectedItem.formFieldAnnotationType=="DropdownList")&&element.children.length>0){element.style.textAlignLast=selectedItem.alignment;for(var i=0;i<element.children.length;i++){var dropDownChild=element.children[i];dropDownChild.style.textAlignLast=selectedItem.alignment;dropDownChild.style.textAlign=selectedItem.alignment;}}}else{element.style.textAlign=this.formFieldAlign?this.formFieldAlign:selectedItem.alignment;selectedItem.alignment=this.formFieldAlign?this.formFieldAlign:selectedItem.alignment;if((selectedItem.formFieldAnnotationType=="ListBox"||selectedItem.formFieldAnnotationType=="DropdownList")&&element.children.length>0){element.style.textAlignLast=this.formFieldAlign?this.formFieldAlign:selectedItem.alignment;for(var i=0;i<element.children.length;i++){var dropDownChild=element.children[i];dropDownChild.style.textAlignLast=this.formFieldAlign?this.formFieldAlign:selectedItem.alignment;dropDownChild.style.textAlign=this.formFieldAlign?this.formFieldAlign:selectedItem.alignment;}}}if(index>-1){formFieldsData[index].FormField.alignment=selectedItem.alignment;this.pdfViewerBase.formFieldCollection[index].FormField.alignment=selectedItem.alignment;}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].alignment=selectedItem.alignment;if(isAlignmentChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,false,false,false,false,false,false,false,false,isAlignmentChanged,false,false,false,false,false,false,oldValue,newValue);}};FormDesigner.prototype.updateFontSizePropertyChange=function(selectedItem,element,isUndoRedo,index,formFieldsData){var isFontSizeChanged=false;var oldValue,newValue;var zoomValue=this.pdfViewerBase.getZoomFactor();var fontSize=this.formFieldFontSize?parseInt(this.formFieldFontSize.value.toString()):null;if(selectedItem.fontSize!==fontSize){isFontSizeChanged=true;oldValue=selectedItem.fontSize;newValue=fontSize;}if(isUndoRedo){element.style.fontSize=selectedItem.fontSize*zoomValue+'px'.toString();}else{selectedItem.fontSize=fontSize;element.style.fontSize=parseInt(this.formFieldFontSize.value.toString())*zoomValue+'px';}if(index>-1){formFieldsData[index].FormField.fontSize=selectedItem.fontSize;this.pdfViewerBase.formFieldCollection[index].FormField.fontSize=selectedItem.fontSize;}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].fontSize=selectedItem.fontSize;if(isFontSizeChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,false,false,isFontSizeChanged,false,false,false,false,false,false,false,false,false,false,false,false,oldValue,newValue);}};FormDesigner.prototype.updateFontFamilyPropertyChange=function(selectedItem,element,isUndoRedo,index,formFieldsData){var isFontFamilyChanged=false;var oldValue,newValue;var fontFamily=this.formFieldFontFamily?this.formFieldFontFamily.value.toString():"";if(selectedItem.fontFamily!==fontFamily){isFontFamilyChanged=true;oldValue=selectedItem.fontFamily;newValue=fontFamily;}if(isUndoRedo){element.style.fontFamily=selectedItem.fontFamily;}else{selectedItem.fontFamily=fontFamily;element.style.fontFamily=fontFamily;}if(index>-1){formFieldsData[index].FormField.fontFamily=selectedItem.fontFamily;this.pdfViewerBase.formFieldCollection[index].FormField.fontFamily=selectedItem.fontFamily;}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].fontFamily=selectedItem.fontFamily;if(isFontFamilyChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,false,isFontFamilyChanged,false,false,false,false,false,false,false,false,false,false,false,false,false,oldValue,newValue);}};FormDesigner.prototype.updateVisibilityPropertyChange=function(selectedItem,element,isUndoRedo,index,formFieldsData){var isVisibilityChanged=false;var oldValue,newValue;if(this.formFieldVisibility&&selectedItem.visibility!==this.formFieldVisibility.value){isVisibilityChanged=true;oldValue=selectedItem.visibility;newValue=this.formFieldVisibility.value;}if(!isUndoRedo){selectedItem.visibility=this.formFieldVisibility.value;}element.style.visibility=selectedItem.visibility;if(selectedItem.formFieldAnnotationType==="RadioButton"){element.parentElement.style.visibility=selectedItem.visibility;}if(selectedItem.formFieldAnnotationType==="SignatureField"||selectedItem.formFieldAnnotationType==="InitialField"){var signElement=document.getElementById(selectedItem.id+"_content_html_element").firstElementChild.children[1];signElement.style.visibility=selectedItem.visibility;signElement.parentElement.style.visibility=selectedItem.visibility;var annotation=this.pdfViewer.nameTable[selectedItem.id.split('_')[0]+"_content"];if(selectedItem.visibility==="hidden"){if(annotation){this.hideSignatureValue(selectedItem,annotation,index,formFieldsData);}}else{if(annotation){this.showSignatureValue(selectedItem,oldValue,annotation,index,formFieldsData);}}}if(index>-1){formFieldsData[index].FormField.visibility=selectedItem.visibility;this.pdfViewerBase.formFieldCollection[index].FormField.visibility=selectedItem.visibility;}// selectedItem.visibility = this.formFieldVisibility.value;
this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].visibility=selectedItem.visibility;if(isVisibilityChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,false,false,false,false,false,false,false,false,false,false,isVisibilityChanged,false,false,false,false,oldValue,newValue);}};FormDesigner.prototype.hideSignatureValue=function(selectedItem,annotation,index,formFieldsData){selectedItem.wrapper.children.splice(selectedItem.wrapper.children.indexOf(annotation.wrapper.children[0]),1);selectedItem.value='';selectedItem.signatureType='';formFieldsData[index].FormField.value='';formFieldsData[index].FormField.signatureType='';this.pdfViewerBase.formFieldCollection[index].FormField.value='';this.pdfViewerBase.formFieldCollection[index].FormField.signatureType='';this.pdfViewer.remove(annotation);this.pdfViewer.renderDrawing();};FormDesigner.prototype.showSignatureValue=function(selectedItem,oldValue,annotation,index,formFieldsData){if(annotation.shapeAnnotationType==="SignatureText"){selectedItem.value=annotation.data;selectedItem.signatureType="Text";formFieldsData[index].FormField.signatureType="Text";formFieldsData[index].FormField.value=annotation.data;this.pdfViewerBase.formFieldCollection[index].FormField.value=annotation.data;this.pdfViewerBase.formFieldCollection[index].FormField.signatureType="Text";}else if(annotation.shapeAnnotationType==="SignatureImage"){selectedItem.value=annotation.data;selectedItem.signatureType="Image";formFieldsData[index].FormField.signatureType="Image";formFieldsData[index].FormField.value=annotation.data;this.pdfViewerBase.formFieldCollection[index].FormField.value=annotation.data;this.pdfViewerBase.formFieldCollection[index].FormField.signatureType="Image";}else{formFieldsData[index].FormField.signatureType="Path";selectedItem.signatureType="Path";this.pdfViewerBase.formFieldCollection[index].FormField.signatureType="Path";var collectionData=sf.drawings.processPathData(annotation.data);var csData=sf.drawings.splitArrayCollection(collectionData);selectedItem.value=JSON.stringify(csData);formFieldsData[index].FormField.value=JSON.stringify(csData);this.pdfViewerBase.formFieldCollection[index].FormField.value=JSON.stringify(csData);}selectedItem.signatureBound=annotation.signatureBound;if(oldValue==='hidden'){this.pdfViewer.add(annotation);selectedItem.wrapper.children.push(annotation.wrapper);var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+selectedItem.pageIndex);this.pdfViewer.renderDrawing(canvass,selectedItem.pageIndex);}this.pdfViewer.renderDrawing();};FormDesigner.prototype.updateTooltipPropertyChange=function(selectedItem,element,isUndoRedo,index,formFieldsData){var isToolTipChanged=false;var oldValue,newValue;if(this.formFieldTooltip&&selectedItem.tooltip!==this.formFieldTooltip.value){isToolTipChanged=true;oldValue=selectedItem.tooltip;newValue=this.formFieldTooltip.value;}if(isUndoRedo){this.formFieldTooltip=new sf.inputs.TextBox();this.formFieldTooltip.value=selectedItem.tooltip;}else{selectedItem.tooltip=this.formFieldTooltip?this.formFieldTooltip.value:selectedItem.tooltip;}if(index>-1){formFieldsData[index].FormField.tooltip=selectedItem.tooltip;this.pdfViewerBase.formFieldCollection[index].FormField.tooltip=selectedItem.tooltip;}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].tooltip=this.formFieldTooltip.value;if(!sf.base.isNullOrUndefined(this.formFieldTooltip.value)&&this.formFieldTooltip.value!==''){this.setToolTip(this.formFieldTooltip.value,selectedItem.formFieldAnnotationType=="RadioButton"||selectedItem.formFieldAnnotationType=="DropdownList"?element.parentElement:element);}if(isToolTipChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,false,false,false,false,false,false,false,false,false,false,false,false,false,false,isToolTipChanged,oldValue,newValue);}};FormDesigner.prototype.updateNamePropertyChange=function(selectedItem,element,isUndoRedo,index,formFieldsData){var designerName=document.getElementById(selectedItem.id+"_designer_name");var zoomValue=this.pdfViewerBase.getZoomFactor();designerName.style.fontSize=selectedItem.fontSize?selectedItem.fontSize*zoomValue+'px':10*zoomValue+'px';if(isUndoRedo){designerName.innerHTML=selectedItem.name;}else{selectedItem.name=this.formFieldName?this.formFieldName.value:selectedItem.name;designerName.innerHTML=selectedItem.name;}if(index>-1){formFieldsData[index].FormField.name=selectedItem.name;this.pdfViewerBase.formFieldCollection[index].FormField.name=selectedItem.name;}element.name=selectedItem.name;this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].name=selectedItem.name;if(selectedItem.formFieldAnnotationType=="DropdownList"||selectedItem.formFieldAnnotationType=="ListBox"){for(var i=0;i<this.pdfViewer.formFieldCollection.length;i++){var formField=this.pdfViewer.formFieldCollection[i];if((formField.formFieldAnnotationType==="DropdownList"||formField.formFieldAnnotationType==="ListBox")&&formField.name===selectedItem.name&&formField.id!==selectedItem.id){selectedItem.options=formField.options;this.updateDropDownListDataSource(selectedItem,element);break;}}}};FormDesigner.prototype.updateIsReadOnlyPropertyChange=function(selectedItem,element,isUndoRedo,index,formFieldsData){var isReadOnlyChanged=false;var oldValue,newValue;if(this.formFieldReadOnly&&selectedItem.isReadonly!==this.formFieldReadOnly.checked){isReadOnlyChanged=true;oldValue=selectedItem.isReadonly;newValue=this.formFieldReadOnly.checked;}if(isUndoRedo){this.formFieldReadOnly=new sf.buttons.CheckBox();this.formFieldReadOnly.checked=selectedItem.isReadonly;}else{selectedItem.isReadonly=this.formFieldReadOnly.checked;}if(index>-1){formFieldsData[index].FormField.isReadonly=selectedItem.isReadonly;this.pdfViewerBase.formFieldCollection[index].FormField.isReadonly=selectedItem.isReadonly;}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].isReadonly=selectedItem.isReadonly;this.setReadOnlyToElement(selectedItem,element,selectedItem.isReadonly);this.setReadOnlyToFormField(selectedItem,selectedItem.isReadonly);if(isReadOnlyChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,false,false,false,false,false,false,false,false,false,isReadOnlyChanged,false,false,false,false,false,oldValue,newValue);}};FormDesigner.prototype.updateIsRequiredPropertyChange=function(selectedItem,element,isUndoRedo,index,formFieldsData){var isRequiredChanged=false;var oldValue,newValue;if(this.formFieldRequired&&selectedItem.isRequired!==this.formFieldRequired.checked){isRequiredChanged=true;oldValue=selectedItem.isRequired;newValue=this.formFieldRequired.checked;}if(isUndoRedo){this.formFieldRequired=new sf.buttons.CheckBox();this.formFieldRequired.checked=selectedItem.isRequired;}else{selectedItem.isRequired=this.formFieldRequired.checked;}if(index>-1){formFieldsData[index].FormField.isRequired=selectedItem.isRequired;this.pdfViewerBase.formFieldCollection[index].FormField.isRequired=selectedItem.isRequired;if(this.pdfViewerBase.formFieldCollection[index].FormField.radiobuttonItem){for(var i=0;i<this.pdfViewerBase.formFieldCollection[index].FormField.radiobuttonItem.length;i++){this.pdfViewerBase.formFieldCollection[index].FormField.radiobuttonItem[i].isRequired=selectedItem.isRequired;this.pdfViewer.nameTable[this.pdfViewerBase.formFieldCollection[index].FormField.radiobuttonItem[i].id.split('_')[0]].isRequired=selectedItem.isRequired;}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,'_formDesigner');}}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].isRequired=selectedItem.isRequired;this.setRequiredToElement(selectedItem,element,selectedItem.isRequired);this.setRequiredToFormField(selectedItem,selectedItem.isRequired);if(isRequiredChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,false,false,false,false,false,false,false,false,false,false,false,false,isRequiredChanged,false,false,oldValue,newValue);}};FormDesigner.prototype.updateIsPrintPropertyChange=function(selectedItem,isUndoRedo,index,formFieldsData){var isPrintChanged=false;var oldValue,newValue;if(this.formFieldPrinting&&selectedItem.isPrint!==this.formFieldPrinting.checked){isPrintChanged=true;oldValue=selectedItem.isPrint;newValue=this.formFieldPrinting.checked;}if(isUndoRedo){this.formFieldPrinting=new sf.buttons.CheckBox();this.formFieldPrinting.checked=selectedItem.isPrint;}else{selectedItem.isPrint=this.formFieldPrinting.checked;}if(index>-1){formFieldsData[index].FormField.isPrint=selectedItem.isPrint;this.pdfViewerBase.formFieldCollection[index].FormField.isPrint=selectedItem.isPrint;}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].isPrint=selectedItem.isPrint;if(isPrintChanged){this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",selectedItem,false,false,false,false,false,false,false,false,false,false,false,false,false,isPrintChanged,false,oldValue,newValue);}};/**
     * @private
     */FormDesigner.prototype.getFormFiledIndex=function(id){if(this.pdfViewerBase.formFieldCollection==null||this.pdfViewerBase.formFieldCollection.length==0)return-1;var index=this.pdfViewerBase.formFieldCollection.findIndex(function(el){return el.Key.split('_')[0]===id;});if(index>-1){return index;}else{for(var i=0;i<this.pdfViewerBase.formFieldCollection.length;i++){if(this.pdfViewerBase.formFieldCollection[i].FormField.formFieldAnnotationType==='RadioButton'&&this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem){for(var k=0;k<this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem.length;k++){if(this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[k].id.split("_")[0]===id){return i;}}}}}return-1;};FormDesigner.prototype.updateFontStyle=function(inputElement,selectedItem,isUndoRedo,index,formFieldsData){var isFontStyleChanged=false;var oldValue='';var newValue='';if(this.formFieldBold){if(selectedItem.fontStyle!=='Bold'){isFontStyleChanged=true;oldValue+=selectedItem.font.isBold?'Bold'+", ":'';}if(isUndoRedo){if(selectedItem.font.isBold){this.setFontStyleValues(selectedItem,'Bold',this.formFieldBold,inputElement,true,'bold',index,formFieldsData);}else{this.setFontStyleValues(selectedItem,'None',this.formFieldBold,inputElement,false,'',index,formFieldsData);}}else if(this.formFieldBold==='bold'){this.setFontStyleValues(selectedItem,'Bold',this.formFieldBold,inputElement,true,'bold',index,formFieldsData);}else{this.setFontStyleValues(selectedItem,'None','bold',inputElement,false,'',index,formFieldsData);}}else if(selectedItem.font.isBold){this.setFontStyleValues(selectedItem,'None','bold',inputElement,false,'',index,formFieldsData);}newValue+=selectedItem.font.isBold?'Bold'+", ":'';if(this.formFieldItalic){if(selectedItem.fontStyle!=='Italic'){isFontStyleChanged=true;oldValue+=selectedItem.font.isItalic?'Italic'+", ":'';}if(isUndoRedo){if(selectedItem.font.isItalic){this.setFontStyleValues(selectedItem,'Italic',this.formFieldItalic,inputElement,true,'italic',index,formFieldsData);}else{this.setFontStyleValues(selectedItem,'None',this.formFieldItalic,inputElement,false,'',index,formFieldsData);}}else if(this.formFieldItalic==='italic'){this.setFontStyleValues(selectedItem,'Italic',this.formFieldItalic,inputElement,true,'italic',index,formFieldsData);}else{this.setFontStyleValues(selectedItem,'None','italic',inputElement,false,'',index,formFieldsData);}}else if(selectedItem.font.isItalic){this.setFontStyleValues(selectedItem,'None','italic',inputElement,false,'',index,formFieldsData);}newValue+=selectedItem.font.isItalic?'Italic'+", ":'';if(this.formFieldUnderline){if(selectedItem.fontStyle!=='Underline'){isFontStyleChanged=true;oldValue+=selectedItem.font.isUnderline?'Underline'+", ":'';}if(isUndoRedo){if(selectedItem.font.isUnderline){this.setFontStyleValues(selectedItem,'Underline',this.formFieldUnderline,inputElement,true,'underline',index,formFieldsData);}else{this.setFontStyleValues(selectedItem,'None',this.formFieldUnderline,inputElement,false,'',index,formFieldsData);}}else if(this.formFieldUnderline==='underline'){this.setFontStyleValues(selectedItem,'Underline',this.formFieldUnderline,inputElement,true,'underline',index,formFieldsData);}else{this.setFontStyleValues(selectedItem,'None','underline',inputElement,false,'',index,formFieldsData);}}else if(selectedItem.font.isUnderline){this.setFontStyleValues(selectedItem,'None','underline',inputElement,false,'',index,formFieldsData);}newValue+=selectedItem.font.isUnderline?'Underline'+", ":'';if(this.formFieldStrikeOut){if(selectedItem.fontStyle!=='Strikethrough'){isFontStyleChanged=true;oldValue+=selectedItem.font.isStrikeout?'Strikethrough'+", ":'';}if(isUndoRedo){if(selectedItem.font.isStrikeout){this.setFontStyleValues(selectedItem,'Strikethrough',this.formFieldStrikeOut,inputElement,true,'line-through',index,formFieldsData);}else{this.setFontStyleValues(selectedItem,'None',this.formFieldStrikeOut,inputElement,false,'',index,formFieldsData);}}else if(this.formFieldStrikeOut==='line-through'){this.setFontStyleValues(selectedItem,'Strikethrough',this.formFieldStrikeOut,inputElement,true,'line-through',index,formFieldsData);}else{this.setFontStyleValues(selectedItem,'None','line-through',inputElement,false,'',index,formFieldsData);}}else if(selectedItem.font.isStrikeout){this.setFontStyleValues(selectedItem,'None','line-through',inputElement,false,'',index,formFieldsData);}newValue+=selectedItem.font.isStrikeout?'Strikethrough'+", ":'';return[isFontStyleChanged,oldValue,newValue];};FormDesigner.prototype.setFontStyleValues=function(selectedItem,selectedItemFontStyle,fontStyleType,inputElement,isFontStyleEnabled,fontStyleValue,index,formFieldsData){if(fontStyleType==='bold'){selectedItem.fontStyle=selectedItemFontStyle;selectedItem.font.isBold=isFontStyleEnabled;inputElement.style.fontWeight=fontStyleValue;this.setDropdownFontStyleValue(inputElement,fontStyleType,fontStyleValue);if(index>-1){formFieldsData[index].FormField.font.isBold=isFontStyleEnabled;this.pdfViewerBase.formFieldCollection[index].FormField.font.isBold=isFontStyleEnabled;}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].font.isBold=isFontStyleEnabled;}else if(fontStyleType==='italic'){inputElement.style.fontStyle=fontStyleValue;this.setDropdownFontStyleValue(inputElement,fontStyleType,fontStyleValue);selectedItem.fontStyle=selectedItemFontStyle;selectedItem.font.isItalic=isFontStyleEnabled;if(index>-1){formFieldsData[index].FormField.font.isItalic=isFontStyleEnabled;this.pdfViewerBase.formFieldCollection[index].FormField.font.isItalic=isFontStyleEnabled;}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].font.isItalic=isFontStyleEnabled;}else if(fontStyleType==='underline'){this.setDropdownFontStyleValue(inputElement,fontStyleType,fontStyleValue);inputElement.style.textDecoration=fontStyleValue;selectedItem.fontStyle=selectedItemFontStyle;selectedItem.font.isUnderline=isFontStyleEnabled;if(index>-1){formFieldsData[index].FormField.font.isUnderline=isFontStyleEnabled;this.pdfViewerBase.formFieldCollection[index].FormField.font.isUnderline=isFontStyleEnabled;}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].font.isUnderline=isFontStyleEnabled;}else if(fontStyleType==='line-through'){this.setDropdownFontStyleValue(inputElement,fontStyleType,fontStyleValue);inputElement.style.textDecoration=fontStyleValue;selectedItem.fontStyle=selectedItemFontStyle;selectedItem.font.isStrikeout=isFontStyleEnabled;if(index>-1){formFieldsData[index].FormField.font.isStrikeout=isFontStyleEnabled;this.pdfViewerBase.formFieldCollection[index].FormField.font.isStrikeout=isFontStyleEnabled;}this.pdfViewer.nameTable[selectedItem.id.split('_')[0]].font.isStrikeout=isFontStyleEnabled;}};FormDesigner.prototype.setDropdownFontStyleValue=function(dropdownElement,fontStyleType,value){if(dropdownElement.length>0){for(var i=0;i<dropdownElement.length;i++){if(fontStyleType==='bold'){dropdownElement[i].style.fontWeight=value;}else if(fontStyleType==='italic'){dropdownElement[i].style.fontStyle=value;}else if(fontStyleType==='underline'){dropdownElement[i].style.textDecoration=value;}else if(fontStyleType==='line-through'){dropdownElement[i].style.textDecoration=value;}}}};FormDesigner.prototype.updateFormFieldPropertiesChanges=function(name,selectedItem,isValueChanged,isFontFamilyChanged,isFontSizeChanged,isFontStyleChanged,isColorChanged,isBackgroundColorChanged,isBorderColorChanged,isBorderWidthChanged,isAlignmentChanged,isReadOnlyChanged,isVisibilityChanged,isMaxLengthChanged,isRequiredChanged,isPrintChanged,isToolTipChanged,oldValue,newValue){var field={value:selectedItem.value,fontFamily:selectedItem.fontFamily,fontSize:selectedItem.fontSize,fontStyle:selectedItem.fontStyle,color:selectedItem.color,backgroundColor:selectedItem.backgroundColor,alignment:selectedItem.alignment,isReadonly:selectedItem.isReadonly,visibility:selectedItem.visibility,maxLength:selectedItem.maxLength,isRequired:selectedItem.isRequired,isPrint:selectedItem.isPrint,rotation:selectedItem.rotateAngle,tooltip:selectedItem.tooltip,options:selectedItem.options,isChecked:selectedItem.isChecked,isSelected:selectedItem.isSelected};this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",field,selectedItem.pageIndex,isValueChanged,isFontFamilyChanged,isFontSizeChanged,isFontStyleChanged,isColorChanged,isBackgroundColorChanged,isBorderColorChanged,isBorderWidthChanged,isAlignmentChanged,isReadOnlyChanged,isVisibilityChanged,isMaxLengthChanged,isRequiredChanged,isPrintChanged,isToolTipChanged,oldValue,newValue);};FormDesigner.prototype.onCancelClicked=function(args){this.propertiesDialog.hide();};FormDesigner.prototype.createAppearanceTab=function(){var elementID=this.pdfViewer.dataId;// eslint-disable-next-line max-len
var appearanceDiv=sf.base.createElement('div',{id:elementID+'_properties_appearance'});if(this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType!=='DropdownList'&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType!=='ListBox'){appearanceDiv.style.height='260px';}else{appearanceDiv.style.height='336px';}var propertySpliter=sf.base.createElement('div');propertySpliter.className='e-pv-properties-header-spliter';appearanceDiv.appendChild(propertySpliter);var tabContainer=sf.base.createElement('div',{className:'e-pv-properties-tab-style-prop'});appearanceDiv.appendChild(tabContainer);// <div style="/* border-color: red; *//* border-width: 2px; *//* background: red; *//* height: 1px; */width: 100%;position: absolute;padding-top: 35px;/* border-bottom-color: black; *//* border-bottom-width: 2px; *//* border: solid; */border-bottom-style: solid;border-bottom-width: 1px;left: 0;border-bottom-color: #E0E0E0;"></div>
if(this.pdfViewer.selectedItems&&(this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType==='ListBox'||this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType==='DropdownList')){// eslint-disable-next-line max-len
this.tabControl=new sf.navigations.Tab({items:[{header:{'text':'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant('General')+'</div>'},content:this.createGeneralProperties()},{header:{'text':'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant('Appearance')+'</div>'},content:this.createAppearanceProperties()},{header:{'text':'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant('Options')+'</div>'},content:this.createOptionProperties()}]},tabContainer);}else if(this.pdfViewer.selectedItems&&(this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType==='SignatureField'||this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType==='InitialField')){// eslint-disable-next-line max-len
this.tabControl=new sf.navigations.Tab({items:[{header:{'text':'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant('General')+'</div>'},content:this.createGeneralProperties()}]},tabContainer);}else{// eslint-disable-next-line max-len
this.tabControl=new sf.navigations.Tab({items:[{header:{'text':'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant('General')+'</div>'},content:this.createGeneralProperties()},{header:{'text':'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant('Appearance')+'</div>'},content:this.createAppearanceProperties()}]},tabContainer);}tabContainer.children[1].style.height='100%';return appearanceDiv;};FormDesigner.prototype.createGeneralProperties=function(){var selectedItem=this.pdfViewer.selectedItems.formFields?this.pdfViewer.selectedItems.formFields[0]:null;var visibilityItems=['visible','hidden'];// eslint-disable-next-line max-len
var elementID=this.pdfViewer.dataId;var generalPropertiesDiv=sf.base.createElement('div',{id:elementID+'_general_prop_appearance'});var textStyleContainer=sf.base.createElement('div',{className:'e-pv-properties-text-edit-prop'});generalPropertiesDiv.appendChild(textStyleContainer);var formFieldNameMainDiv=sf.base.createElement('div',{className:'e-pv-properties-form-field-name-main-div'});// eslint-disable-next-line max-len
var formFieldNameDiv=sf.base.createElement('div',{className:'e-pv-properties-name-edit-prop'});var formFieldNameContainer=sf.base.createElement('input',{className:'e-pv-properties-name-edit-input e-input'});formFieldNameDiv.appendChild(formFieldNameContainer);formFieldNameMainDiv.appendChild(formFieldNameDiv);// eslint-disable-next-line max-len
this.formFieldName=new sf.inputs.TextBox({type:"text",floatLabelType:'Always',placeholder:this.pdfViewer.localeObj.getConstant('Name'),value:selectedItem.name,cssClass:'e-pv-properties-formfield-name'},formFieldNameContainer);textStyleContainer.appendChild(formFieldNameMainDiv);var formFieldTooltipMainDiv=sf.base.createElement('div',{className:'e-pv-properties-form-field-tooltip-main-div'});var formFieldTooltipDiv=sf.base.createElement('div',{className:'e-pv-properties-tooltip-edit-prop'});var formFieldTooltipContainer=sf.base.createElement('input',{className:'e-pv-properties-tooltip-prop-input e-input'});formFieldTooltipDiv.appendChild(formFieldTooltipContainer);formFieldTooltipMainDiv.appendChild(formFieldTooltipDiv);// eslint-disable-next-line max-len
this.formFieldTooltip=new sf.inputs.TextBox({type:"text",floatLabelType:'Always',placeholder:this.pdfViewer.localeObj.getConstant('Tooltip'),value:selectedItem.tooltip,cssClass:'e-pv-properties-formfield-tooltip'},formFieldTooltipContainer);textStyleContainer.appendChild(formFieldTooltipMainDiv);var visibilityContainer=sf.base.createElement('div',{className:'e-pv-properties-visibility-style-prop'});generalPropertiesDiv.appendChild(visibilityContainer);var formFieldValueMainDiv=sf.base.createElement('div',{className:'e-pv-properties-form-field-value-main-div'});var formFieldValueDiv=sf.base.createElement('div',{className:'e-pv-properties-value-edit-prop'});var formFieldValueContainer=sf.base.createElement('input',{className:'e-pv-properties-value-input e-input'});formFieldValueDiv.appendChild(formFieldValueContainer);formFieldValueMainDiv.appendChild(formFieldValueDiv);// eslint-disable-next-line max-len
this.formFieldValue=new sf.inputs.TextBox({type:"text",floatLabelType:'Always',placeholder:this.pdfViewer.localeObj.getConstant('Value'),value:selectedItem.value,cssClass:'e-pv-properties-formfield-value'},formFieldValueContainer);if(this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType!=='Textbox'){this.formFieldValue.enabled=false;this.formFieldValue.value='';}visibilityContainer.appendChild(formFieldValueMainDiv);var formFieldVisibilityMainDiv=sf.base.createElement('div',{className:'e-pv-properties-form-field-visibility-main-div'});var formFieldVisibilityDiv=sf.base.createElement('div',{className:'e-pv-properties-visibility-edit-prop'});var formFieldVisibilityContainer=sf.base.createElement('div',{className:'e-pv-properties-formfield-visibility'});formFieldVisibilityDiv.appendChild(formFieldVisibilityContainer);formFieldVisibilityMainDiv.appendChild(formFieldVisibilityDiv);var selectedIndex=selectedItem.visibility==='visible'?0:1;this.formFieldVisibility=new sf.dropdowns.DropDownList({dataSource:visibilityItems,floatLabelType:'Always',index:selectedIndex,value:selectedItem.visibility,placeholder:this.pdfViewer.localeObj.getConstant('Form Field Visibility'),cssClass:'e-pv-properties-formfield-visibility'},formFieldVisibilityContainer);visibilityContainer.appendChild(formFieldVisibilityMainDiv);var checkboxMainDiv=sf.base.createElement('div',{className:'e-pv-properties-checkbox-main-div-prop'});var readOnly=sf.base.createElement('input',{className:'e-pv-properties-checkbox-readonly-input e-input'});checkboxMainDiv.appendChild(readOnly);this.formFieldReadOnly=new sf.buttons.CheckBox({label:this.pdfViewer.localeObj.getConstant('Read Only'),checked:selectedItem.isReadonly,cssClass:'e-pv-properties-form-field-checkbox'},readOnly);if(this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType==='Checkbox'||this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType==='RadioButton'){var checkedState=sf.base.createElement('input',{className:'e-pv-properties-checkbox-checked-input e-input'});checkboxMainDiv.appendChild(checkedState);this.formFieldChecked=new sf.buttons.CheckBox({label:this.pdfViewer.localeObj.getConstant('Checked'),cssClass:'e-pv-properties-form-field-checkbox',checked:selectedItem.isChecked||selectedItem.isSelected,change:this.checkBoxChange.bind(this)},checkedState);}var required=sf.base.createElement('input',{className:'e-pv-properties-checkbox-required-input e-input'});checkboxMainDiv.appendChild(required);this.formFieldRequired=new sf.buttons.CheckBox({label:this.pdfViewer.localeObj.getConstant('Required'),checked:selectedItem.isRequired,cssClass:'e-pv-properties-form-field-checkbox'},required);var showPrinting=sf.base.createElement('input',{className:'e-pv-properties-checkbox-printing-input e-input'});checkboxMainDiv.appendChild(showPrinting);this.formFieldPrinting=new sf.buttons.CheckBox({label:this.pdfViewer.localeObj.getConstant('Show Printing'),checked:selectedItem.isPrint,cssClass:'e-pv-properties-form-field-checkbox'},showPrinting);if(selectedItem.formFieldAnnotationType==='Textbox'){var multilineTextbox=sf.base.createElement('input',{className:'e-pv-properties-checkbox-multiline-input e-input'});checkboxMainDiv.appendChild(multilineTextbox);this.formFieldMultiline=new sf.buttons.CheckBox({label:this.pdfViewer.localeObj.getConstant('Multiline'),checked:selectedItem.isMultiline,cssClass:'e-pv-properties-form-field-checkbox',change:this.multilineCheckboxChange.bind(this)},multilineTextbox);}generalPropertiesDiv.appendChild(checkboxMainDiv);return generalPropertiesDiv;};FormDesigner.prototype.checkBoxChange=function(args){this.checkboxCheckedState=args.checked;};FormDesigner.prototype.multilineCheckboxChange=function(args){this.multilineCheckboxCheckedState=true;};FormDesigner.prototype.setToolTip=function(tooltipContent,targetElement){//initialize tooltip component
var tooltip=new sf.popups.Tooltip({content:tooltipContent});// render initialized tooltip
tooltip.appendTo(targetElement);tooltip.beforeOpen=this.tooltipBeforeOpen.bind(this);};FormDesigner.prototype.tooltipBeforeOpen=function(args){var currentFormField=this.pdfViewer.nameTable[args.target.id.split('_')[0]];if(!sf.base.isNullOrUndefined(currentFormField)){args.element.children[0].innerHTML=currentFormField.tooltip;}};FormDesigner.prototype.createAppearanceProperties=function(){var selectedItem=this.pdfViewer.selectedItems.formFields?this.pdfViewer.selectedItems.formFields[0]:null;var fontFamilyItems=['Helvetica','Courier','Times New Roman','Symbol','ZapfDingbats'];var fontSizeItems=['6px','8px','10px','12px','14px','16px','18px','20px','24px','28px','32px','36px','40px'];var elementID=this.pdfViewer.dataId;var appearancePropertiesDiv=sf.base.createElement('div',{id:elementID+'_formatting_text_prop_appearance'});var formatTextStyleContainer=sf.base.createElement('div',{className:'e-pv-properties-format-text-style-prop'});appearancePropertiesDiv.appendChild(formatTextStyleContainer);this.createLabelElement(this.pdfViewer.localeObj.getConstant('Formatting'),formatTextStyleContainer,true,'e-pv-properties-formfield-label',elementID+'_properties_formfield_formatting');var fontItemsContainer=sf.base.createElement('div',{className:'e-pv-properties-font-items-container'});var fontFamilyDropdownContainer=sf.base.createElement('div',{className:'e-pv-properties-font-family-container'});var formatdropdownContainer=sf.base.createElement('div',{className:'e-pv-properties-format-font-family-prop'});fontFamilyDropdownContainer.appendChild(formatdropdownContainer);fontItemsContainer.appendChild(fontFamilyDropdownContainer);this.formFieldFontFamily=new sf.dropdowns.DropDownList({dataSource:fontFamilyItems,value:this.getFontFamily(selectedItem.fontFamily)?selectedItem.fontFamily:'Helvetica',cssClass:'e-pv-properties-formfield-fontfamily'},formatdropdownContainer);this.setToolTip(this.pdfViewer.localeObj.getConstant('Font family'),fontFamilyDropdownContainer);var fontSizeContainer=sf.base.createElement('div',{className:'e-pv-properties-font-size-container'});var fontSizeDropdownContainer=sf.base.createElement('div',{className:'e-pv-properties-format-font-family-prop'});fontSizeContainer.appendChild(fontSizeDropdownContainer);fontItemsContainer.appendChild(fontSizeContainer);this.formFieldFontSize=new sf.dropdowns.DropDownList({dataSource:fontSizeItems,value:selectedItem.fontSize+'px',cssClass:'e-pv-properties-formfield-fontsize'},fontSizeDropdownContainer);this.setToolTip(this.pdfViewer.localeObj.getConstant('Font size'),fontSizeContainer);var fontStyleContainer=sf.base.createElement('div',{className:'e-pv-properties-form-field-font-style'});fontStyleContainer.onclick=this.fontStyleClicked.bind(this);fontStyleContainer.appendChild(this.addClassFontItem('_formField_bold','e-pv-bold-icon',selectedItem.font.isBold));fontStyleContainer.appendChild(this.addClassFontItem('_formField_italic','e-pv-italic-icon',selectedItem.font.isItalic));fontStyleContainer.appendChild(this.addClassFontItem('_formField_underline_textinput','e-pv-underlinetext-icon',selectedItem.font.isUnderline));// eslint-disable-next-line max-len
fontStyleContainer.appendChild(this.addClassFontItem('_formField_strikeout','e-pv-strikeout-icon',selectedItem.font.isStrikeout));fontItemsContainer.appendChild(fontStyleContainer);appearancePropertiesDiv.appendChild(fontItemsContainer);var fontColorContainer=sf.base.createElement('div',{className:'e-pv-properties-font-color-container'});var fontAlignContainer=sf.base.createElement('div',{className:'e-pv-properties-form-field-font-align'});fontAlignContainer.onclick=this.fontAlignClicked.bind(this);fontAlignContainer.appendChild(this.addClassFontItem('_formField_left_align','e-pv-left-align-icon',selectedItem.alignment==='left'?true:false));fontAlignContainer.appendChild(this.addClassFontItem('_formField_center_align','e-pv-center-align-icon',selectedItem.alignment==='center'?true:false));fontAlignContainer.appendChild(this.addClassFontItem('_formField_right_align','e-pv-right-align-icon',selectedItem.alignment==='right'?true:false));fontColorContainer.appendChild(fontAlignContainer);this.fontColorElement=sf.base.createElement('div',{className:'e-pv-formfield-textcolor-icon',id:this.pdfViewer.dataId+'formField_textColor'});this.fontColorPalette=this.createColorPicker(this.fontColorElement.id,selectedItem.color);this.fontColorPalette.change=this.onFontColorChange.bind(this);this.fontColorDropDown=this.createDropDownButton(this.fontColorElement,'e-pv-annotation-textcolor-icon',this.fontColorPalette.element.parentElement);fontColorContainer.appendChild(this.fontColorElement);this.setToolTip(this.pdfViewer.localeObj.getConstant('Font color'),this.fontColorDropDown.element);this.updateColorInIcon(this.fontColorElement,this.pdfViewer.selectedItems.formFields[0].color);if(selectedItem.formFieldAnnotationType==='Checkbox'||selectedItem.formFieldAnnotationType==='RadioButton'){this.fontColorPalette.disabled=true;this.fontColorDropDown.disabled=true;this.fontColorElement.style.pointerEvents='none';this.fontColorElement.style.opacity='0.5';fontAlignContainer.style.pointerEvents='none';fontAlignContainer.style.opacity='0.5';this.formFieldFontSize.enabled=false;this.formFieldFontFamily.enabled=false;fontFamilyDropdownContainer.style.pointerEvents='none';fontSizeContainer.style.pointerEvents='none';fontStyleContainer.style.pointerEvents='none';fontStyleContainer.style.opacity='0.5';}var maxLengthGroup=sf.base.createElement('div',{className:'e-pv-formfield-maxlength-group',id:this.pdfViewer.dataId+'formField_maxlength_group'});var maxLengthContainer=sf.base.createElement('div',{className:'e-pv-formfield-maxlength-icon',id:this.pdfViewer.dataId+'formField_maxlength'});maxLengthGroup.appendChild(maxLengthContainer);this.createLabelElement(this.pdfViewer.localeObj.getConstant('Max Length'),maxLengthContainer,true,'e-pv-properties-formfield-label',elementID+'_properties_formfield_maxlength');var maxLengthDropdownContainer=sf.base.createElement('div',{className:'e-pv-formfield-maxlength',id:this.pdfViewer.dataId+'formField_maxlength_container'});var maxLengthItemDropdown=sf.base.createElement('input',{className:'e-pv-formfield-maxlength-input e-input'});maxLengthDropdownContainer.appendChild(maxLengthItemDropdown);maxLengthGroup.appendChild(maxLengthDropdownContainer);// Render the Numeric Textbox
this.maxLengthItem=new sf.inputs.NumericTextBox({format:'n',value:selectedItem.maxLength!==0?selectedItem.maxLength:0,min:0},maxLengthItemDropdown);fontColorContainer.appendChild(maxLengthGroup);this.setToolTip(this.pdfViewer.localeObj.getConstant('Max Length'),this.maxLengthItem.element);if(selectedItem.formFieldAnnotationType!=='Textbox'&&selectedItem.formFieldAnnotationType!=='PasswordField'){this.maxLengthItem.enabled=false;maxLengthContainer.style.pointerEvents='none';}appearancePropertiesDiv.appendChild(fontColorContainer);var colorContainer=sf.base.createElement('div',{className:'e-pv-properties-color-container-style-prop'});var backgroundColorContainer=sf.base.createElement('div',{className:'e-pv-properties-fill-color-style-prop'});appearancePropertiesDiv.appendChild(backgroundColorContainer);this.createLabelElement(this.pdfViewer.localeObj.getConstant('Fill'),backgroundColorContainer,true,'e-pv-properties-formfield-label',elementID+'_properties_formfield_fontcolor');this.colorDropDownElement=sf.base.createElement('div',{className:'e-pv-formfield-fontcolor-icon',id:this.pdfViewer.dataId+'formField_fontColor'});this.colorPalette=this.createColorPicker(this.colorDropDownElement.id,selectedItem.backgroundColor);this.colorPalette.change=this.onColorPickerChange.bind(this);// eslint-disable-next-line max-len
this.colorDropDown=this.createDropDownButton(this.colorDropDownElement,'e-pv-annotation-color-icon',this.colorPalette.element.parentElement);this.setToolTip(this.pdfViewer.localeObj.getConstant('Fill Color'),this.colorDropDown.element);backgroundColorContainer.appendChild(this.colorDropDownElement);colorContainer.appendChild(backgroundColorContainer);this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.selectedItems.formFields[0].backgroundColor);var strokeColorContainer=sf.base.createElement('div',{className:'e-pv-properties-stroke-color-style-prop'});this.createLabelElement(this.pdfViewer.localeObj.getConstant('Border'),strokeColorContainer,true,'e-pv-properties-formfield-label',elementID+'_properties_formfield_strokecolor');this.strokeDropDownElement=sf.base.createElement('div',{className:'e-pv-formfield-strokecolor-icon',id:this.pdfViewer.dataId+'formField_strokeColor'});this.strokeColorPicker=this.createColorPicker(this.strokeDropDownElement.id,selectedItem.borderColor);this.strokeColorPicker.change=this.onStrokePickerChange.bind(this);// eslint-disable-next-line max-len
this.strokeDropDown=this.createDropDownButton(this.strokeDropDownElement,'e-pv-annotation-stroke-icon',this.strokeColorPicker.element.parentElement);this.setToolTip(this.pdfViewer.localeObj.getConstant('Border Color'),this.strokeDropDown.element);strokeColorContainer.appendChild(this.strokeDropDownElement);colorContainer.appendChild(strokeColorContainer);this.updateColorInIcon(this.strokeDropDownElement,this.pdfViewer.selectedItems.formFields[0].borderColor);var strokeThicknessContainer=sf.base.createElement('div',{className:'e-pv-properties-stroke-thickness-style-prop'});this.createLabelElement(this.pdfViewer.localeObj.getConstant('Thickness'),strokeThicknessContainer,true,'e-pv-properties-formfield-label',elementID+'_properties_formfield_strokethickness');this.thicknessElement=sf.base.createElement('div',{className:'e-pv-formfield-strokethickness-icon',id:this.pdfViewer.dataId+'formField_strokethickness'});var thicknessContainer=this.createThicknessSlider(this.thicknessElement.id);// eslint-disable-next-line max-len
this.thicknessDropDown=this.createDropDownButton(this.thicknessElement,'e-pv-annotation-thickness-icon',thicknessContainer);this.thicknessDropDown.beforeOpen=this.thicknessDropDownBeforeOpen.bind(this);this.setToolTip(this.pdfViewer.localeObj.getConstant('Thickness'),this.thicknessDropDown.element);this.thicknessSlider.change=this.thicknessChange.bind(this);this.thicknessSlider.changed=this.thicknessChange.bind(this);strokeThicknessContainer.appendChild(this.thicknessElement);colorContainer.appendChild(strokeThicknessContainer);appearancePropertiesDiv.appendChild(colorContainer);return appearancePropertiesDiv;};FormDesigner.prototype.thicknessChange=function(args){if(this.pdfViewer.selectedItems.formFields.length===1){this.formFieldBorderWidth=args.value;this.updateThicknessIndicator();}};FormDesigner.prototype.thicknessDropDownBeforeOpen=function(){if(this.pdfViewer.selectedItems.formFields.length===1){this.formFieldBorderWidth=this.pdfViewer.selectedItems.formFields[0].thickness.toString();this.thicknessSlider.value=this.pdfViewer.selectedItems.formFields[0].thickness;}this.updateThicknessIndicator();};FormDesigner.prototype.updateThicknessIndicator=function(){this.thicknessIndicator.textContent=this.thicknessSlider.value+' pt';};FormDesigner.prototype.createOptionProperties=function(){var _this=this;var elementID=this.pdfViewer.dataId;var optionPropertiesDiv=sf.base.createElement('div',{id:elementID+'_option_prop_appearance'});var listItemAddContainer=sf.base.createElement('div',{className:'e-pv-properties-form-field-list-add-div'});var formFieldListItemMainDiv=sf.base.createElement('div',{className:'e-pv-properties-form-field-list-item-main-div'});// eslint-disable-next-line max-len
this.createLabelElement(this.pdfViewer.localeObj.getConstant('List Item'),formFieldListItemMainDiv,true,'e-pv-properties-formfield-label',elementID+'_properties_formfield_listitem');var formFieldListItemDiv=sf.base.createElement('div',{className:'e-pv-properties-list-item-edit-prop'});var formFieldListItemContainer=sf.base.createElement('input',{className:'e-pv-properties-list-item-input e-input'});formFieldListItemContainer.addEventListener('keyup',function(args){_this.formFieldAddButton.disabled=true;_this.formFieldListItem.value=args.target.value;if(args.target&&args.target.value){if(_this.formFieldListItemCollection.length>0){for(var i=0;i<_this.formFieldListItemCollection.length;i++){var itemName=_this.formFieldListItemCollection[i];if(itemName===args.target.value){_this.formFieldAddButton.disabled=true;break;}else{_this.formFieldAddButton.disabled=false;}}}else{_this.formFieldAddButton.disabled=false;}}});formFieldListItemDiv.appendChild(formFieldListItemContainer);formFieldListItemMainDiv.appendChild(formFieldListItemDiv);// eslint-disable-next-line max-len
this.formFieldListItem=new sf.inputs.TextBox({type:"text",cssClass:'e-pv-properties-formfield-listitem'},formFieldListItemContainer);listItemAddContainer.appendChild(formFieldListItemMainDiv);optionPropertiesDiv.appendChild(listItemAddContainer);var buttonDiv=sf.base.createElement('div',{className:'e-pv-properties-form-field-list-btn-div'});var buttonAddInput=sf.base.createElement('button',{className:'e-btn'});buttonAddInput.addEventListener('click',this.addListItemOnClick.bind(this));buttonDiv.appendChild(buttonAddInput);this.formFieldAddButton=new sf.buttons.Button({content:this.pdfViewer.localeObj.getConstant('Add'),disabled:true,cssClass:'e-pv-properties-dropdown-btn'},buttonAddInput);listItemAddContainer.appendChild(buttonDiv);var exportValueContainer=sf.base.createElement('div',{className:'e-pv-properties-form-field-export-value-div'});var formFieldexportValueMainDiv=sf.base.createElement('div',{className:'e-pv-properties-form-field-export-value-main-div'});this.createLabelElement(this.pdfViewer.localeObj.getConstant('Export Value'),formFieldexportValueMainDiv,true,'e-pv-properties-formfield-label',elementID+'_properties_formfield_exportValue');var formFieldExportItemDiv=sf.base.createElement('div',{className:'e-pv-properties-export-value-edit-prop'});var formFieldExportItemContainer=sf.base.createElement('input',{className:'e-pv-properties-export-value-input e-input'});formFieldExportItemDiv.appendChild(formFieldExportItemContainer);formFieldexportValueMainDiv.appendChild(formFieldExportItemDiv);// eslint-disable-next-line max-len
this.formFieldListItem=new sf.inputs.TextBox({type:"text",cssClass:'e-pv-properties-formfield-exportvalue'},formFieldExportItemContainer);exportValueContainer.appendChild(formFieldexportValueMainDiv);optionPropertiesDiv.appendChild(exportValueContainer);var dropdownListItemContainer=sf.base.createElement('div',{className:'e-pv-properties-form-field-option-dropdown-list-div'});var formFieldDropdownListMainDiv=sf.base.createElement('div',{className:'e-pv-properties-form-field-option-dropdown-list-item-div'});var selectedElement=this.pdfViewer.selectedItems.formFields[0];if(selectedElement.formFieldAnnotationType==='DropdownList'){// eslint-disable-next-line max-len
this.createLabelElement(this.pdfViewer.localeObj.getConstant('Dropdown Item List'),formFieldDropdownListMainDiv,true,'e-pv-properties-formfield-label',elementID+'_properties_formfield_dropdown_listitem');}else{// eslint-disable-next-line max-len
this.createLabelElement(this.pdfViewer.localeObj.getConstant('List Box Item List'),formFieldDropdownListMainDiv,true,'e-pv-properties-formfield-label',elementID+'_properties_formfield_dropdown_listitem');}dropdownListItemContainer.appendChild(formFieldDropdownListMainDiv);var btnTextAreaContainer=sf.base.createElement('div',{className:'e-pv-properties-form-field-btn-textarea-container'});var textAreaContainer=sf.base.createElement('div',{className:'e-pv-properties-formfield-textarea',styles:'width:300px;height:123px;border:1px solid #E0E0E0;margin-right:15px;overflow:auto'});var listElement=sf.base.createElement('ul',{id:this.pdfViewer.dataId+'_ul_list_item',className:'e-pv-form-designer-ul-list-items'});var listCount=this.createListElement(listElement);textAreaContainer.appendChild(listElement);btnTextAreaContainer.appendChild(textAreaContainer);var buttonGroup=sf.base.createElement('div',{className:'e-pv-properties-form-field-group-btn-div'});var deleteButtonDiv=sf.base.createElement('div',{className:'e-pv-properties-form-field-delete-btn-div'});var buttonDeleteInput=sf.base.createElement('button',{className:'e-btn'});buttonDeleteInput.addEventListener('click',this.deleteListItem.bind(this));deleteButtonDiv.appendChild(buttonDeleteInput);this.formFieldDeleteButton=new sf.buttons.Button({content:this.pdfViewer.localeObj.getConstant('Delete Item'),disabled:listCount>0?false:true,cssClass:'e-pv-properties-dropdown-btn'},buttonDeleteInput);buttonGroup.appendChild(deleteButtonDiv);var upButtonDiv=sf.base.createElement('div',{className:'e-pv-properties-form-field-up-btn-div'});var buttonUpInput=sf.base.createElement('button',{className:'e-btn'});buttonUpInput.addEventListener('click',this.moveUpListItem.bind(this));upButtonDiv.appendChild(buttonUpInput);this.formFieldUpButton=new sf.buttons.Button({content:this.pdfViewer.localeObj.getConstant('Up'),disabled:listCount>1?false:true,cssClass:'e-pv-properties-dropdown-btn'},buttonUpInput);buttonGroup.appendChild(upButtonDiv);var downButtonDiv=sf.base.createElement('div',{className:'e-pv-properties-form-field-down-btn-div'});var buttonDownInput=sf.base.createElement('button',{className:'e-btn'});buttonDownInput.addEventListener('click',this.moveDownListItem.bind(this));downButtonDiv.appendChild(buttonDownInput);this.formFieldDownButton=new sf.buttons.Button({content:this.pdfViewer.localeObj.getConstant('Down'),disabled:true,cssClass:'e-pv-properties-dropdown-btn'},buttonDownInput);buttonGroup.appendChild(downButtonDiv);btnTextAreaContainer.appendChild(buttonGroup);dropdownListItemContainer.appendChild(btnTextAreaContainer);optionPropertiesDiv.appendChild(dropdownListItemContainer);return optionPropertiesDiv;};FormDesigner.prototype.addListItemOnClick=function(){var dropdownValue=this.formFieldListItem.value;this.formFieldListItemCollection.push(dropdownValue);var ulElement=document.getElementById(this.pdfViewer.dataId+'_ul_list_item');if(ulElement.children&&ulElement.children.length>0){for(var i=0;i<ulElement.children.length;i++){var element=ulElement.children[i];if(element.classList.contains('e-pv-li-select')){element.classList.remove('e-pv-li-select');}}}var createLiElement=sf.base.createElement('li',{className:'e-pv-formfield-li-element'});createLiElement.addEventListener('click',this.listItemOnClick.bind(this));createLiElement.innerHTML=dropdownValue;createLiElement.classList.add('e-pv-li-select');ulElement.appendChild(createLiElement);this.formFieldDeleteButton.disabled=false;this.formFieldAddButton.disabled=true;if(createLiElement.previousElementSibling){this.formFieldUpButton.disabled=false;}if(!createLiElement.nextElementSibling){this.formFieldDownButton.disabled=true;}};FormDesigner.prototype.listItemOnClick=function(args){var ulElement=document.getElementById(this.pdfViewer.dataId+'_ul_list_item');if(ulElement.children&&ulElement.children.length>0){for(var i=0;i<ulElement.children.length;i++){var element=ulElement.children[i];if(element.classList.contains('e-pv-li-select')){element.classList.remove('e-pv-li-select');}}}if(args.target){args.target.classList.add('e-pv-li-select');}if(args.target.nextElementSibling){this.formFieldDownButton.disabled=false;}else{this.formFieldDownButton.disabled=true;}if(args.target.previousElementSibling){this.formFieldUpButton.disabled=false;}else{this.formFieldUpButton.disabled=true;}};FormDesigner.prototype.deleteListItem=function(){var ulElement=document.getElementById(this.pdfViewer.dataId+'_ul_list_item');if(ulElement.children&&ulElement.children.length>0){for(var i=0;i<ulElement.children.length;i++){var element=ulElement.children[i];if(element.classList.contains('e-pv-li-select')){element.classList.remove('e-pv-li-select');this.formFieldListItemCollection.splice(i,1);if(element.previousElementSibling){element.previousElementSibling.classList.add('e-pv-li-select');if(!element.previousElementSibling.previousElementSibling){this.formFieldUpButton.disabled=true;}}else if(element.nextElementSibling){element.nextElementSibling.classList.add('e-pv-li-select');if(!element.nextElementSibling.nextElementSibling){this.formFieldDownButton.disabled=true;}}element.remove();}}}if(ulElement.children&&ulElement.children.length===0){this.formFieldDeleteButton.disabled=true;this.formFieldUpButton.disabled=true;this.formFieldDownButton.disabled=true;}if(ulElement.children&&ulElement.children.length===1){this.formFieldDeleteButton.disabled=false;this.formFieldUpButton.disabled=true;this.formFieldDownButton.disabled=true;}};FormDesigner.prototype.moveUpListItem=function(){var ulElement=document.getElementById(this.pdfViewer.dataId+'_ul_list_item');if(ulElement.children&&ulElement.children.length>0){for(var i=0;i<ulElement.children.length;i++){var element=ulElement.children[i];if(element.classList.contains('e-pv-li-select')){if(element.previousElementSibling){element.parentNode.insertBefore(element,element.previousElementSibling);if(!element.previousElementSibling)this.formFieldUpButton.disabled=true;}else{this.formFieldUpButton.disabled=true;}if(element.nextElementSibling){this.formFieldDownButton.disabled=false;}}}}};FormDesigner.prototype.moveDownListItem=function(){var element;var ulElement=document.getElementById(this.pdfViewer.dataId+'_ul_list_item');if(ulElement.children&&ulElement.children.length>0){for(var i=0;i<ulElement.children.length;i++){element=ulElement.children[i];if(element.classList.contains('e-pv-li-select')){if(element.nextElementSibling){element.parentNode.insertBefore(element.nextElementSibling,element);break;}else{this.formFieldDownButton.disabled=true;}}}}if(!element.nextElementSibling){this.formFieldDownButton.disabled=true;}if(element.previousElementSibling){this.formFieldUpButton.disabled=false;}};FormDesigner.prototype.createListElement=function(ulElement){var selectedElement=this.pdfViewer.selectedItems.formFields[0];if(selectedElement){if(selectedElement.options&&selectedElement.options.length>0){for(var i=0;i<selectedElement.options.length;i++){var dropdownValue=selectedElement.options[i].itemName;if(this.formFieldListItemCollection[i]!==selectedElement.options[i].itemName){this.formFieldListItemCollection.push(dropdownValue);var createLiElement=sf.base.createElement('li',{className:'e-pv-formfield-li-element'});createLiElement.addEventListener('click',this.listItemOnClick.bind(this));createLiElement.innerHTML=dropdownValue;ulElement.appendChild(createLiElement);}}ulElement.children[ulElement.children.length-1].classList.add('e-pv-li-select');}}return ulElement.children.length;};FormDesigner.prototype.createThicknessSlider=function(idString){var outerContainer=sf.base.createElement('div',{className:'e-pv-annotation-thickness-popup-container'});document.body.appendChild(outerContainer);var label=sf.base.createElement('span',{id:idString+'_label',className:'e-pv-annotation-thickness-label'});label.textContent=this.pdfViewer.localeObj.getConstant('Line Thickness');var sliderElement=sf.base.createElement('div',{id:idString+'_slider'});this.thicknessSlider=new sf.inputs.Slider({type:'MinRange',cssClass:'e-pv-annotation-thickness-slider',max:12,min:0});// eslint-disable-next-line max-len
this.thicknessIndicator=sf.base.createElement('div',{id:idString+'_thickness_indicator',className:'e-pv-annotation-thickness-indicator'});this.thicknessIndicator.textContent='0 pt';if(!this.pdfViewer.enableRtl){outerContainer.appendChild(label);outerContainer.appendChild(sliderElement);this.thicknessSlider.appendTo(sliderElement);outerContainer.appendChild(this.thicknessIndicator);}else{outerContainer.appendChild(this.thicknessIndicator);outerContainer.appendChild(sliderElement);this.thicknessSlider.enableRtl=true;this.thicknessSlider.appendTo(sliderElement);outerContainer.appendChild(label);}this.thicknessSlider.element.parentElement.classList.add('e-pv-annotation-thickness-slider-container');return outerContainer;};FormDesigner.prototype.createColorPicker=function(idString,color){var inputElement=sf.base.createElement('input',{id:idString+'_target'});document.body.appendChild(inputElement);var colorPicker=new sf.inputs.ColorPicker({inline:true,mode:'Palette',cssClass:'e-show-value',enableOpacity:false,value:color,showButtons:false,modeSwitcher:false});if(this.pdfViewer.enableRtl){colorPicker.enableRtl=true;}colorPicker.appendTo(inputElement);return colorPicker;};FormDesigner.prototype.fontStyleClicked=function(args){if(args.target){if(args.target.id.indexOf("formField_bold")!==-1){var item=args.target.id.indexOf("formField_bold_div")!==-1?args.target:args.target.parentElement;if(item.classList.contains('e-pv-li-select'))this.isBold=true;this.isBold=!this.isBold;if(this.isBold){this.formFieldBold="bold";item.classList.add('e-pv-li-select');}else{this.formFieldBold="normal";item.classList.remove('e-pv-li-select');}}else if(args.target.id.indexOf("formField_italic")!==-1){var item=args.target.id.indexOf("formField_italic_div")!==-1?args.target:args.target.parentElement;if(item.classList.contains('e-pv-li-select'))this.isItalic=true;this.isItalic=!this.isItalic;if(this.isItalic){this.formFieldItalic="italic";item.classList.add('e-pv-li-select');}else{this.formFieldItalic="normal";item.classList.remove('e-pv-li-select');}}else if(args.target.id.indexOf("formField_underline")!==-1){var item=args.target.id.indexOf("formField_underline_textinput_div")!==-1?args.target:args.target.parentElement;if(item.classList.contains('e-pv-li-select'))this.isUnderline=true;this.isUnderline=!this.isUnderline;if(this.isUnderline){this.formFieldUnderline="underline";this.isStrikeThrough=false;item.classList.add('e-pv-li-select');}else{this.formFieldUnderline="none";item.classList.remove('e-pv-li-select');}}else if(args.target.id.indexOf("formField_strikeout")!==-1){var item=args.target.id.indexOf("formField_strikeout_div")!==-1?args.target:args.target.parentElement;if(item.classList.contains('e-pv-li-select'))this.isStrikeThrough=true;this.isStrikeThrough=!this.isStrikeThrough;if(this.isStrikeThrough){this.formFieldStrikeOut="line-through";this.isUnderline=false;item.classList.add('e-pv-li-select');}else{this.formFieldStrikeOut="none";item.classList.remove('e-pv-li-select');}}}};FormDesigner.prototype.clearFontAlignIconSelection=function(currentElement){for(var i=0;i<currentElement.children.length;i++){if(currentElement.children[i].classList.contains('e-pv-li-select')){currentElement.children[i].classList.remove('e-pv-li-select');}}};FormDesigner.prototype.fontAlignClicked=function(args){if(args.target){args.target.classList.remove('e-pv-li-select');if(args.target.id.indexOf("_formField_left_align")!==-1){var item=args.target.id.indexOf("_formField_left_align_div")!==-1?args.target:args.target.parentElement;this.formFieldAlign="left";this.clearFontAlignIconSelection(args.currentTarget);item.classList.add('e-pv-li-select');}else if(args.target.id.indexOf("_formField_right_align")!==-1){var item=args.target.id.indexOf("_formField_right_align_div")!==-1?args.target:args.target.parentElement;this.formFieldAlign="right";this.clearFontAlignIconSelection(args.currentTarget);item.classList.add('e-pv-li-select');}else{var item=args.target.id.indexOf("_formField_center_align_div")!==-1?args.target:args.target.parentElement;this.formFieldAlign="center";this.clearFontAlignIconSelection(args.currentTarget);item.classList.add('e-pv-li-select');}}};FormDesigner.prototype.onFontColorChange=function(args){this.fontColorValue=args.currentValue.hex===''?'#ffffff00':args.currentValue.hex;this.updateColorInIcon(this.fontColorElement,this.fontColorValue);this.fontColorDropDown.toggle();};FormDesigner.prototype.onColorPickerChange=function(args){this.backgroundColorValue=args.currentValue.hex===''?'#ffffff00':args.currentValue.hex;this.updateColorInIcon(this.colorDropDownElement,this.backgroundColorValue);this.colorDropDown.toggle();};/**
     * @private
     */FormDesigner.prototype.updateColorInIcon=function(element,color){element.childNodes[0].style.borderBottomColor=color;};FormDesigner.prototype.onStrokePickerChange=function(args){this.borderColorValue=args.currentValue.hex===''?'#ffffff00':args.currentValue.hex;this.updateColorInIcon(this.strokeDropDownElement,this.borderColorValue);this.strokeDropDown.toggle();};FormDesigner.prototype.createDropDownButton=function(element,iconClass,target){// eslint-disable-next-line max-len
var dropDownButton=new sf.splitbuttons.DropDownButton({iconCss:iconClass+' e-pv-icon',target:target});if(this.pdfViewer.enableRtl){dropDownButton.enableRtl=true;}dropDownButton.appendTo(element);return dropDownButton;};/**
     * @private
    */FormDesigner.prototype.addClassFontItem=function(idString,className,isSelectedStyle){var element=sf.base.createElement('div',{id:this.pdfViewer.dataId+idString+'_div'});element.classList.add(className+"-div");var spanElement=sf.base.createElement('span',{id:this.pdfViewer.dataId+idString+'_span'});spanElement.classList.add(className);spanElement.classList.add("e-pv-icon");switch(className){case'e-pv-bold-icon':this.setToolTip(this.pdfViewer.localeObj.getConstant('Bold'),element);break;case'e-pv-italic-icon':this.setToolTip(this.pdfViewer.localeObj.getConstant('Italic'),element);break;case'e-pv-underlinetext-icon':this.setToolTip(this.pdfViewer.localeObj.getConstant('Underlines'),element);break;case'e-pv-strikeout-icon':this.setToolTip(this.pdfViewer.localeObj.getConstant('Strikethroughs'),element);break;case'e-pv-left-align-icon':this.setToolTip(this.pdfViewer.localeObj.getConstant('Align left'),element);break;case'e-pv-center-align-icon':this.setToolTip(this.pdfViewer.localeObj.getConstant('Center'),element);break;case'e-pv-right-align-icon':this.setToolTip(this.pdfViewer.localeObj.getConstant('Align right'),element);break;}if(isSelectedStyle)element.classList.add('e-pv-li-select');element.appendChild(spanElement);return element;};// eslint-disable-next-line max-len
FormDesigner.prototype.createLabelElement=function(labelText,parentElement,isLabelNeeded,className,idString){var container=sf.base.createElement('div',{id:idString+'_container',className:className+'-container'});var label=null;if(isLabelNeeded){label=sf.base.createElement('div',{id:idString+'_label',className:className});label.textContent=labelText;container.appendChild(label);}parentElement.appendChild(label);};FormDesigner.prototype.setReadOnlyToFormField=function(selectedItem,isReadOnly){for(var i=0;i<this.pdfViewer.formFieldCollection.length;i++){var formField=this.pdfViewer.formFieldCollection[i];if(formField.formFieldAnnotationType===selectedItem.formFieldAnnotationType&&formField.name===selectedItem.name&&formField.id!==selectedItem.id){formField.isReadonly=isReadOnly;switch(formField.formFieldAnnotationType){case'Textbox':case'PasswordField':case'DropdownList':case'ListBox':case'SignatureField':case'InitialField':var inputElement=document.getElementById(formField.id+"_content_html_element").firstElementChild.firstElementChild;this.setReadOnlyToElement(formField,inputElement,isReadOnly);break;case'RadioButton':var radioButtonDivDivElement=document.getElementById(formField.id+"_content_html_element").firstElementChild.firstElementChild.firstElementChild;this.setReadOnlyToElement(formField,radioButtonDivDivElement,isReadOnly);break;case'Checkbox':var checkboxDivElement=document.getElementById(formField.id+"_content_html_element").firstElementChild.firstElementChild.lastElementChild;this.setReadOnlyToElement(formField,checkboxDivElement,isReadOnly);break;}}}};/**
     * @private
    */FormDesigner.prototype.getFormDesignerSignField=function(signatureFieldCollection){var formDesignerData=this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');// eslint-disable-next-line
var currentData;if(formDesignerData){// eslint-disable-next-line
var formFieldsObject=JSON.parse(formDesignerData);for(var i=0;i<formFieldsObject.length;i++){currentData=formFieldsObject[i].FormField;if(currentData.formFieldAnnotationType==='SignatureField'){// eslint-disable-next-line
currentData['uniqueID']=currentData.id.replace("_content","");signatureFieldCollection.push(formFieldsObject[i]);}}}return signatureFieldCollection;};FormDesigner.prototype.setRequiredToFormField=function(selectedItem,isRequired){for(var i=0;i<this.pdfViewer.formFieldCollection.length;i++){var formField=this.pdfViewer.formFieldCollection[i];if(formField.formFieldAnnotationType===selectedItem.formFieldAnnotationType&&formField.name===selectedItem.name&&formField.id!==selectedItem.id){formField.isRequired=isRequired;switch(formField.formFieldAnnotationType){case'Textbox':case'PasswordField':case'DropdownList':case'SignatureField':case'InitialField':var inputElement=document.getElementById(formField.id+"_content_html_element").firstElementChild.firstElementChild;this.setRequiredToElement(formField,inputElement,isRequired);break;case'RadioButton':var radioButtonDivDivElement=document.getElementById(formField.id+"_content_html_element").firstElementChild.firstElementChild.firstElementChild;this.setRequiredToElement(formField,radioButtonDivDivElement,isRequired);this.updateFormFieldCollections(formField);break;case'Checkbox':var checkboxDivElement=document.getElementById(formField.id+"_content_html_element").firstElementChild.firstElementChild.lastElementChild;this.setRequiredToElement(formField,checkboxDivElement,isRequired);break;default:break;}}}};FormDesigner.prototype.setReadOnlyToElement=function(selectedItem,inputElement,isReadOnly){if(isReadOnly){inputElement.disabled=true;if(selectedItem.formFieldAnnotationType==='RadioButton'){inputElement.parentElement.style.cursor='default';inputElement.parentElement.style.backgroundColor='transparent';}else{inputElement.style.cursor='default';inputElement.style.backgroundColor='transparent';}}else{inputElement.disabled=false;if(selectedItem.formFieldAnnotationType==='RadioButton'){inputElement.parentElement.style.backgroundColor=selectedItem.backgroundColor;}else if(selectedItem.formFieldAnnotationType=="SignatureField"||selectedItem.formFieldAnnotationType=="InitialField"){inputElement.style.backgroundColor='transparent';}else{inputElement.style.backgroundColor=selectedItem.backgroundColor;}}};FormDesigner.prototype.setRequiredToElement=function(selectedItem,inputElement,isRequired){if(isRequired){inputElement.required=true;inputElement.style.border='1px solid red';if(selectedItem.formFieldAnnotationType==='RadioButton'){var thickness=selectedItem.thickness===0?1:selectedItem.thickness;inputElement.parentElement.style.boxShadow='red 0px 0px 0px '+thickness+'px';}}else{inputElement.required=false;inputElement.style.borderWidth=selectedItem.thickness;inputElement.style.borderColor=selectedItem.borderColor;if(selectedItem.formFieldAnnotationType==='RadioButton'){inputElement.parentElement.style.boxShadow=selectedItem.borderColor+' 0px 0px 0px '+selectedItem.thickness+'px';}}};/**
     * @private
    */FormDesigner.prototype.destroyPropertiesWindow=function(){this.formFieldListItemCollection=[];this.formFieldListItemDataSource=[];this.formFieldFontFamily=null;this.formFieldFontSize=null;this.formFieldAlign=null;this.fontColorValue=null;this.backgroundColorValue=null;this.borderColorValue=null;this.formFieldBorderWidth=null;this.formFieldName=null;this.formFieldChecked=null;this.formFieldReadOnly=null;this.formFieldRequired=null;this.formFieldTooltip=null;this.formFieldPrinting=null;this.formFieldMultiline=null;this.formFieldVisibility=null;var dialogElement=this.pdfViewerBase.getElement('_properties_window');if(dialogElement){dialogElement.parentElement.removeChild(dialogElement);}};/**
     * @private
    */FormDesigner.prototype.destroy=function(){this.destroyPropertiesWindow();};FormDesigner.prototype.hex=function(x){return('0'+x.toString(16)).slice(-2);};/**
     * @private
    */FormDesigner.prototype.getModuleName=function(){return'FormDesigner';};FormDesigner.prototype.updateAnnotationCanvas=function(canvas,pageWidth,pageHeight,pageNumber){var ratio=this.pdfViewerBase.getZoomRatio();canvas.width=pageWidth*ratio;canvas.height=pageHeight*ratio;canvas.style.width=pageWidth+'px';canvas.style.height=pageHeight+'px';canvas.style.position='absolute';canvas.style.zIndex='1';this.pdfViewerBase.applyElementStyles(canvas,pageNumber);};FormDesigner.prototype.getFontFamily=function(fontFamily){var fontFamilyNames=['Helvetica','Courier','TimesRoman','Symbol','ZapfDingbats'];return fontFamilyNames.indexOf(fontFamily)>-1?true:false;};return FormDesigner;}();/**
 * export types
 */function PdfiumRunner(){var moduleString="Module";var pageLoaded=false;var moduleLoaded=false;var FPDF={};var pdfiumWindow=pdfiumWindow||{};var doc;var PDFiumModule=typeof pdfiumWindow[moduleString]!=='undefined'?pdfiumWindow[moduleString]:{};var F64=Float64Array;var H=function H(t,s,d){return function(f){var _a=pdfiumWindow.heap(t,s),m=_a[0],a=_a.slice(1);var v=f.apply(void 0,a.map(function(x){return x.p;}));if(!v){m.free();return d;}var r=a.map(function(x){return x.v;});m.free();return r;};};Object.assign(FPDF,{LCD_TEXT:0x02,NO_NATIVETEXT:0x04,GRAYSCALE:0x08,DEBUG_INFO:0x80,NO_CATCH:0x100,RENDER_LIMITEDIMAGECACHE:0x200,RENDER_FORCEHALFTONE:0x400,PRINTING:0x800,REVERSE_BYTE_ORDER:0x10,Bitmap_Gray:1,Bitmap_BGR:2,Bitmap_BGRx:3,Bitmap_BGRA:4,LAST_ERROR:{SUCCESS:0,UNKNOWN:1,FILE:2,FORMAT:3,PASSWORD:4,SECURITY:5,PAGE:6}});function initializeFPDF(){FPDF.Init=PDFiumModule.cwrap('FPDF_InitLibrary');FPDF.RenderPageBitmap=PDFiumModule.cwrap('FPDF_RenderPageBitmap','',['number','number','number','number','number','number','number','number']);FPDF.Bitmap_FillRect=PDFiumModule.cwrap('FPDFBitmap_FillRect','',['number','number','number','number','number','number']);FPDF.Bitmap_CreateEx=PDFiumModule.cwrap('FPDFBitmap_CreateEx','number',['number','number','number','number','number']);FPDF.Bitmap_Destroy=PDFiumModule.cwrap('FPDFBitmap_Destroy','',['number']);FPDF.LoadPage=PDFiumModule.cwrap('FPDF_LoadPage','number',['number','number']);FPDF.ClosePage=PDFiumModule.cwrap('FPDF_ClosePage','',['number']);FPDF.LoadMemDocument=PDFiumModule.cwrap('FPDF_LoadMemDocument','number',['number','number','string']);FPDF.GetPageSizeByIndex=PDFiumModule.cwrap('FPDF_GetPageSizeByIndex','number',['number','number','number','number']);FPDF.GetLastError=PDFiumModule.cwrap('FPDF_GetLastError','number');FPDF.GetPageCount=PDFiumModule.cwrap('FPDF_GetPageCount','number',['number']);FPDF.CloseDocument=PDFiumModule.cwrap('FPDF_CloseDocument','',['number']);FPDF.DestroyLibrary=PDFiumModule.cwrap('FPDF_DestroyLibrary');FPDF.LoadTextPage=PDFiumModule.cwrap('FPDFText_LoadPage','number',['number']);FPDF.CloseTextPage=PDFiumModule.cwrap('FPDFText_ClosePage','',['number']);FPDF.TextCountChars=PDFiumModule.cwrap('FPDFText_CountChars','number',['number']);FPDF.GetUnicodeChar=PDFiumModule.cwrap('FPDFText_GetUnicode','number',['number']);FPDF.GetCharBox=PDFiumModule.cwrap('FPDFText_GetCharBox','number',['number','number','number','number','number']);FPDF.GetPageRotation=PDFiumModule.cwrap('FPDFPage_GetRotation','number',['number']);FPDF.GetCharAngle=PDFiumModule.cwrap('FPDFText_GetCharAngle','number',['number']);pdfiumWindow.heap=function(J,s){var E;switch(J){case Int8Array:E=PDFiumModule.HEAP8;break;case Int16Array:E=PDFiumModule.HEAP16;break;case Int32Array:E=PDFiumModule.HEAP32;break;case Uint8Array:E=PDFiumModule.HEAPU8;break;case Uint16Array:E=PDFiumModule.HEAPU16;break;case Uint32Array:E=PDFiumModule.HEAPU32;break;case Float32Array:E=PDFiumModule.HEAPF32;break;case Float64Array:E=PDFiumModule.HEAPF64;break;}var Z=J.BYTES_PER_ELEMENT;var m=PDFiumModule.asm.malloc(s*Z);var a=Array(1+s);a[0]={s:s,J:J,Z:Z,E:E,m:m,free:function free(){return PDFiumModule.asm.free(m);}};var _loop_1=function _loop_1(i){a[i+1]={p:m+i*Z,get v(){return E[m/Z+i];}};};for(var i=0;i<s;i++){_loop_1(i);}return a;};}function checkIfEverythingWasLoaded(){pageLoaded=true;if(pageLoaded||moduleLoaded){startApp();}}PDFiumModule.onRuntimeInitialized=function(){moduleLoaded=true;checkIfEverythingWasLoaded();};function startApp(){initializeFPDF();if(pdfiumWindow.loaded){pdfiumWindow.loaded();}}pdfiumWindow.onload=function(){pageLoaded=true;checkIfEverythingWasLoaded();};pdfiumWindow.loaded=function(){ctx.postMessage({message:'loaded'});};var ctx=self;ctx.onmessage=function(event){if(event.data.message==='initialLoading'){importScripts(event.data.url+'/pdfium.js');PDFiumModule.url=event.data.url;PDFiumModule.onRuntimeInitialized=function(){moduleLoaded=true;checkIfEverythingWasLoaded();};this['PDFiumModule'](PDFiumModule);}else if(event.data.message==='LoadPageCollection'){pdfiumWindow.fileByteArray=event.data.uploadedFile;var fileSize=pdfiumWindow.fileByteArray.length;FPDF.Init();var wasmBuffer=PDFiumModule.asm.malloc(fileSize);PDFiumModule.HEAPU8.set(pdfiumWindow.fileByteArray,wasmBuffer);doc=new Doc({wasm:FPDF.LoadMemDocument(wasmBuffer,fileSize,event.data.password),wasmBuffer:wasmBuffer});var pages=FPDF.GetPageCount(doc.processor.wasmData.wasm);doc.setPages(pages);doc.createAllPages();ctx.postMessage({message:'PageLoaded',pageIndex:event.data.pageIndex,isZoomMode:event.data.isZoomMode});}else if(event.data.message==='renderPage'){var firstPage=doc.getPage(event.data.pageIndex);var ImageData_1=event.data;var data=firstPage.render(null,ImageData_1.zoomFactor,ImageData_1.isTextNeed,null,null,ImageData_1.textDetailsId);ctx.postMessage(data);}else if(event.data.message==='renderThumbnail'){var firstPage=doc.getPage(event.data.pageIndex);var data=firstPage.render("thumbnail",null,false,null,null);ctx.postMessage(data);}else if(event.data.message==='printImage'){var firstPage=doc.getPage(event.data.pageIndex);var data=firstPage.render("print",null,false,event.data.printScaleFactor,event.data.printDevicePixelRatio);ctx.postMessage(data);}else if(event.data.message==='renderImageAsTile'){var values=event.data;var firstPage=doc.getPage(event.data.pageIndex);var data=firstPage.renderTileImage(values.tileX,values.tileY,values.tileXCount,values.tileYCount,values.zoomFactor,event.data.isTextNeed,event.data.textDetailsId);ctx.postMessage(data);}else if(event.data.message==='unloadFPDF'){if(doc){PDFiumModule.asm.free(doc.processor.wasmData.wasmBuffer);FPDF.CloseDocument(doc.processor.wasmData.wasm);FPDF.DestroyLibrary();}}};var Page=/** @class */function(){function Page(index,processor){this.index=index;this.src=null;this.processor=processor;}Page.prototype.render=function(message,zoomFactor,isTextNeed,printScaleFactor,printDevicePixelRatio,textDetailsId){return this.processor.render(this.index,message,zoomFactor,isTextNeed,printScaleFactor,printDevicePixelRatio,textDetailsId);};Page.prototype.renderTileImage=function(x,y,tileX,tileY,zoomFactor,isTextNeed,textDetailsId){return this.processor.renderTileImage(this.index,x,y,tileX,tileY,zoomFactor,isTextNeed,textDetailsId);};return Page;}();var RectAngle=/** @class */function(){function RectAngle(X,Y,Width,Height,Text,Rotation){this.X=X;this.Y=Y;this.Width=Width;this.Height=Height;this.Bottom=this.Y+this.Height;this.Right=this.X+this.Width;this.Top=this.Y;this.Left=this.X;this.Rotation=Rotation;this.Text=Text;}return RectAngle;}();var Processor=/** @class */function(){function Processor(wasmData){this.TextBounds=[];this.TextContent=[];this.CharacterBounds=[];this.PageText="";this.wasmData=wasmData;}Processor.prototype.getPageSize=function(i){var _this=this;if(i===void 0){i=0;}return H(F64,2,[-1,-1])(function(w,h){return FPDF.GetPageSizeByIndex(_this.wasmData.wasm,i,w,h);}).map(function(v){return parseInt((v*(96/72)).toString());});};Processor.prototype.getCharBounds=function(pagePointer,i){if(i===void 0){i=0;}return H(F64,4,[-1,-1,-1,-1])(function(left,right,bottom,top){return FPDF.GetCharBox(pagePointer,i,left,right,bottom,top);});};Processor.prototype.getRender=function(i,w,h,isTextNeed){if(i===void 0){i=0;}var flag=FPDF.REVERSE_BYTE_ORDER;var heap=PDFiumModule.asm.malloc(w*h*4);PDFiumModule.HEAPU8.fill(0,heap,heap+w*h*4);var bmap=FPDF.Bitmap_CreateEx(w,h,FPDF.Bitmap_BGRA,heap,w*4);var page=FPDF.LoadPage(this.wasmData.wasm,i);FPDF.Bitmap_FillRect(bmap,0,0,w,h,0xFFFFFFFF);FPDF.RenderPageBitmap(bmap,page,0,0,w,h,0,flag);FPDF.Bitmap_Destroy(bmap);this.textExtraction(page,i,isTextNeed);FPDF.ClosePage(page);return heap;};Processor.prototype.textExtraction=function(pagePointer,pageIndex,isTextNeed){var _a;if(isTextNeed){var _b=this.getPageSize(pageIndex),pageWidth=_b[0],pageHeight=_b[1];var textPage=FPDF.LoadTextPage(pagePointer,pageIndex);var pageRotation=FPDF.GetPageRotation(pagePointer);var totalCharacterCount=FPDF.TextCountChars(textPage);this.TextBounds=[];this.TextContent=[];this.CharacterBounds=[];var pageText="";var minTop=0;var maxBottom=0;var minLeft=0;var maxRight=0;var top_1=[];var bottom=[];var left=[];var right=[];var wordBounds=[];var word="";var wordMinLeft=0;var wordMaxRight=0;var wordMinTop=0;var wordMaxBottom=0;var wordRotation=0;var wordStart=true;var isZeroWidthSpace=false;var isPreviousSpace=false;var startNewLine=false;var maximumSpaceForNewLine=11;for(var charCount=0;charCount<=totalCharacterCount;charCount++){var result=FPDF.GetUnicodeChar(textPage,charCount);var rotationRadian=FPDF.GetCharAngle(textPage,charCount);var character=String.fromCharCode(result);var _c=this.getCharBounds(textPage,charCount),charLeft=_c[0],charRight=_c[1],charBottom=_c[2],charTop=_c[3];var X=this.pointerToPixelConverter(charLeft);var Y=pageHeight-this.pointerToPixelConverter(charTop);var Width=this.pointerToPixelConverter(charRight-charLeft);var Height=this.pointerToPixelConverter(charTop-charBottom);var rotationAngle=parseInt((rotationRadian*180/Math.PI).toString());if(charCount<totalCharacterCount){pageText+=character;var currentCharacterBounds=new RectAngle(X,Y,Width,Height,character,rotationAngle);this.CharacterBounds.push(currentCharacterBounds);}if(pageRotation==1||pageRotation==3){Y=pageWidth-this.pointerToPixelConverter(charTop);}switch(character){case"\0":minTop=Math.min.apply(Math,top_1);maxBottom=Math.max.apply(Math,bottom);minLeft=Math.min.apply(Math,left);maxRight=Math.max.apply(Math,right);var newWordBounds=new RectAngle(wordMinLeft,wordMinTop,wordMaxRight-wordMinLeft,wordMaxBottom-wordMinTop,word,wordRotation);wordBounds.push(newWordBounds);this.textBoundsCalculation(wordBounds,minTop,maxBottom,maxRight,minLeft,pageRotation,pageWidth,pageHeight);wordBounds=[];wordStart=true;isPreviousSpace=false;word="";top_1=[];left=[];bottom=[];right=[];minTop=0;maxBottom=0;minLeft=0;maxRight=0;break;case"\r":if(charCount<totalCharacterCount){var characterBounds=new RectAngle(X,Y,Width,Height,"\r\n",rotationAngle);top_1.push(characterBounds.Top);bottom.push(characterBounds.Bottom);left.push(characterBounds.Left);right.push(characterBounds.Right);minTop=Math.min.apply(Math,top_1);maxBottom=Math.max.apply(Math,bottom);minLeft=Math.min.apply(Math,left);maxRight=Math.max.apply(Math,right);var newWordBounds_1=void 0;if(wordStart==false){newWordBounds_1=new RectAngle(wordMinLeft,wordMinTop,wordMaxRight-wordMinLeft,wordMaxBottom-wordMinTop,word,wordRotation);wordBounds.push(newWordBounds_1);}wordBounds.push(characterBounds);this.textBoundsCalculation(wordBounds,minTop,maxBottom,maxRight,minLeft,pageRotation,pageWidth,pageHeight);wordBounds=[];wordStart=true;isPreviousSpace=false;word="";top_1=[];left=[];bottom=[];right=[];minTop=0;maxBottom=0;minLeft=0;maxRight=0;pageText+='\n';rotationRadian=FPDF.GetCharAngle(textPage,charCount);_a=this.getCharBounds(textPage,charCount),charLeft=_a[0],charRight=_a[1],charBottom=_a[2],charTop=_a[3];X=this.pointerToPixelConverter(charLeft);Y=pageHeight-this.pointerToPixelConverter(charTop);Width=this.pointerToPixelConverter(charRight-charLeft);Height=this.pointerToPixelConverter(charTop-charBottom);rotationAngle=parseInt((rotationRadian*180/Math.PI).toString());var currentCharacterBounds=new RectAngle(X,Y,Width,Height,character,rotationAngle);this.CharacterBounds.push(currentCharacterBounds);charCount++;}break;case"\x02":case"\uFFFE":{var characterBounds=new RectAngle(X,Y,Width,Height,character,rotationAngle);top_1.push(characterBounds.Top);bottom.push(characterBounds.Bottom);left.push(characterBounds.Left);right.push(characterBounds.Right);minTop=Math.min.apply(Math,top_1);maxBottom=Math.max.apply(Math,bottom);minLeft=Math.min.apply(Math,left);maxRight=Math.max.apply(Math,right);var newWordBounds_2=void 0;if(wordStart==false){newWordBounds_2=new RectAngle(wordMinLeft,wordMinTop,wordMaxRight-wordMinLeft,wordMaxBottom-wordMinTop,word,wordRotation);wordBounds.push(newWordBounds_2);}if(character=="\x02"){wordBounds.push(characterBounds);}this.textBoundsCalculation(wordBounds,minTop,maxBottom,maxRight,minLeft,pageRotation,pageWidth,pageHeight);wordBounds=[];wordStart=true;isPreviousSpace=false;word="";top_1=[];left=[];bottom=[];right=[];minTop=0;maxBottom=0;minLeft=0;maxRight=0;}break;default:if(Width==0||Height==0){isZeroWidthSpace=true;minTop=Math.min.apply(Math,top_1);maxBottom=Math.max.apply(Math,bottom);minLeft=Math.min.apply(Math,left);maxRight=Math.max.apply(Math,right);var newWordBounds_3=new RectAngle(wordMinLeft,wordMinTop,wordMaxRight-wordMinLeft,wordMaxBottom-wordMinTop,word,wordRotation);wordBounds.push(newWordBounds_3);var characterBounds=new RectAngle(X,Y,Width,Height,character,rotationAngle);wordMinTop=characterBounds.Top;wordMaxBottom=characterBounds.Bottom;wordMinLeft=characterBounds.Left;wordMaxRight=characterBounds.Right;word=character;wordRotation=wordBounds[wordBounds.length-1].Rotation;newWordBounds_3=new RectAngle(wordMinLeft,wordMinTop,wordMaxRight-wordMinLeft,wordMaxBottom-wordMinTop,word,wordRotation);wordBounds.push(newWordBounds_3);wordMinTop=0;wordMaxBottom=0;wordMinLeft=0;wordMaxRight=0;word="";wordRotation=0;wordStart=true;isPreviousSpace=true;}else{if(wordStart==true){wordMinTop=Y;wordMaxBottom=Y+Height;wordMinLeft=X;wordMaxRight=X+Width;}var characterBounds=new RectAngle(X,Y,Width,Height,character,rotationAngle);if(character!=" "){if(isPreviousSpace&&wordBounds.length>0&&rotationAngle==wordBounds[0].Rotation){if((rotationAngle==180||rotationAngle==0)&&Math.abs(characterBounds.Y-wordBounds[0].Y)>maximumSpaceForNewLine){startNewLine=true;}if((rotationAngle==270||rotationAngle==90)&&Math.abs(characterBounds.X-wordBounds[0].X)>maximumSpaceForNewLine){startNewLine=true;}}if(isZeroWidthSpace&&wordBounds.length>=1&&wordBounds[wordBounds.length-1].Rotation!=characterBounds.Rotation||startNewLine){isZeroWidthSpace=false;startNewLine=false;minTop=Math.min.apply(Math,top_1);maxBottom=Math.max.apply(Math,bottom);minLeft=Math.min.apply(Math,left);maxRight=Math.max.apply(Math,right);var newWordBounds_4=void 0;if(wordStart==false){newWordBounds_4=new RectAngle(wordMinLeft,wordMinTop,wordMaxRight-wordMinLeft,wordMaxBottom-wordMinTop,word,wordRotation);wordBounds.push(newWordBounds_4);}this.textBoundsCalculation(wordBounds,minTop,maxBottom,maxRight,minLeft,pageRotation,pageWidth,pageHeight);wordBounds=[];wordStart=true;word="";top_1=[];left=[];bottom=[];right=[];minTop=0;maxBottom=0;minLeft=0;maxRight=0;}top_1.push(characterBounds.Top);bottom.push(characterBounds.Bottom);left.push(characterBounds.Left);right.push(characterBounds.Right);wordMinTop=Math.min(wordMinTop,characterBounds.Top);wordMaxBottom=Math.max(wordMaxBottom,characterBounds.Bottom);wordMinLeft=Math.min(wordMinLeft,characterBounds.Left);wordMaxRight=Math.max(wordMaxRight,characterBounds.Right);word+=character;wordRotation=characterBounds.Rotation;wordStart=false;isPreviousSpace=false;}else{var newWordBounds_5=new RectAngle(wordMinLeft,wordMinTop,wordMaxRight-wordMinLeft,wordMaxBottom-wordMinTop,word,wordRotation);wordBounds.push(newWordBounds_5);wordMinTop=characterBounds.Top;wordMaxBottom=characterBounds.Bottom;wordMinLeft=characterBounds.Left;wordMaxRight=characterBounds.Right;word=character;wordRotation=characterBounds.Rotation;newWordBounds_5=new RectAngle(wordMinLeft,wordMinTop,wordMaxRight-wordMinLeft,wordMaxBottom-wordMinTop,word,wordRotation);wordBounds.push(newWordBounds_5);wordMinTop=0;wordMaxBottom=0;wordMinLeft=0;wordMaxRight=0;word="";wordRotation=0;wordStart=true;isPreviousSpace=true;}}break;}}FPDF.CloseTextPage(textPage);this.Rotation=pageRotation;this.PageText=pageText;}};Processor.prototype.pointerToPixelConverter=function(pointerValue){return pointerValue*(96/72);};Processor.prototype.textBoundsCalculation=function(wordBounds,minTop,maxBottom,maxRight,minLeft,pageRotation,pageWidth,pageHeight){var newWordBounds;var hasInBetweenRotation=false;var inBetweenRotatedText="";var maximumSpaceBetweenWords=30;var sentence=wordBounds.reduce(function(word,rect){return word+rect.Text;},'');var isRTLText=this.checkIsRtlText(sentence);for(var count=0;count<wordBounds.length;count++){var textRotation=wordBounds[count].Rotation;if(textRotation==0||textRotation==180){if(hasInBetweenRotation){this.TextBounds.push(newWordBounds);this.TextContent.push(inBetweenRotatedText);inBetweenRotatedText="";}hasInBetweenRotation=false;if(pageRotation==0){newWordBounds=new RectAngle(wordBounds[count].Left,minTop,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-minTop,wordBounds[count].Left,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-wordBounds[count].Left,pageHeight-minTop,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(minTop,pageHeight-wordBounds[count].Left,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}}else if(textRotation==90||textRotation==270){if(hasInBetweenRotation){this.TextBounds.push(newWordBounds);this.TextContent.push(inBetweenRotatedText);inBetweenRotatedText="";}hasInBetweenRotation=false;if(pageRotation==0){newWordBounds=new RectAngle(minLeft,wordBounds[count].Top,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-wordBounds[count].Top,minLeft,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-minLeft,pageHeight-wordBounds[count].Top,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(wordBounds[count].Top,pageHeight-minLeft,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}}else if(!hasInBetweenRotation){hasInBetweenRotation=true;inBetweenRotatedText+=wordBounds[count].Text;if(pageRotation==0){newWordBounds=new RectAngle(wordBounds[count].Left,minTop,maxRight-minLeft,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-minTop,wordBounds[count].Left,maxRight-minLeft,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-wordBounds[count].Left,pageHeight-minTop,maxRight-minLeft,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(minTop,pageHeight-wordBounds[count].Left,maxRight-minLeft,maxBottom-minTop,wordBounds[count].Text,textRotation);}}else{inBetweenRotatedText+=wordBounds[count].Text;}if(!hasInBetweenRotation&&wordBounds[count].Text===" "&&count!==0&&count+1<=wordBounds.length){if(!isRTLText){if(count+1!=wordBounds.length){var spaceWidth=0;switch(textRotation){case 0:spaceWidth=wordBounds[count+1].Left-(wordBounds[count-1].Left+wordBounds[count-1].Width);if(maximumSpaceBetweenWords<spaceWidth||spaceWidth<0){spaceWidth=0;}if(pageRotation==0){newWordBounds=new RectAngle(wordBounds[count-1].Left+wordBounds[count-1].Width,minTop,spaceWidth,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-minTop,wordBounds[count-1].Left+wordBounds[count-1].Width,spaceWidth,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-(wordBounds[count-1].Left+wordBounds[count-1].Width),pageHeight-minTop,spaceWidth,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(minTop,pageHeight-(wordBounds[count-1].Left+wordBounds[count-1].Width),spaceWidth,maxBottom-minTop,wordBounds[count].Text,textRotation);}break;case 90:spaceWidth=wordBounds[count+1].Top-(wordBounds[count-1].Top+wordBounds[count-1].Height);if(maximumSpaceBetweenWords<spaceWidth||spaceWidth<0){spaceWidth=0;}if(pageRotation==0){newWordBounds=new RectAngle(minLeft,wordBounds[count-1].Top+wordBounds[count-1].Height,maxRight-minLeft,spaceWidth,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-(wordBounds[count-1].Top+wordBounds[count-1].Height),minLeft,maxRight-minLeft,spaceWidth,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-minLeft,pageHeight-(wordBounds[count-1].Top+wordBounds[count-1].Height),maxRight-minLeft,spaceWidth,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(wordBounds[count-1].Top+wordBounds[count-1].Height,pageHeight-minLeft,maxRight-minLeft,spaceWidth,wordBounds[count].Text,textRotation);}break;case 180:spaceWidth=wordBounds[count-1].Left-(wordBounds[count+1].Left+wordBounds[count+1].Width);if(maximumSpaceBetweenWords<spaceWidth||spaceWidth<0){spaceWidth=0;}if(pageRotation==0){newWordBounds=new RectAngle(wordBounds[count+1].Left+wordBounds[count+1].Width,minTop,spaceWidth,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-minTop,wordBounds[count+1].Left+wordBounds[count+1].Width,spaceWidth,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-(wordBounds[count+1].Left+wordBounds[count+1].Width),pageHeight-minTop,spaceWidth,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(minTop,pageHeight-(wordBounds[count+1].Left+wordBounds[count+1].Width),spaceWidth,maxBottom-minTop,wordBounds[count].Text,textRotation);}break;case 270:spaceWidth=wordBounds[count-1].Top-(wordBounds[count+1].Top+wordBounds[count+1].Height);if(maximumSpaceBetweenWords<spaceWidth||spaceWidth<0){spaceWidth=0;}if(pageRotation==0){newWordBounds=new RectAngle(minLeft,wordBounds[count+1].Top+wordBounds[count+1].Height,maxRight-minLeft,spaceWidth,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-(wordBounds[count+1].Top+wordBounds[count+1].Height),minLeft,maxRight-minLeft,spaceWidth,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-minLeft,pageHeight-(wordBounds[count+1].Top+wordBounds[count+1].Height),maxRight-minLeft,spaceWidth,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(wordBounds[count+1].Top+wordBounds[count+1].Height,pageHeight-minLeft,maxRight-minLeft,spaceWidth,wordBounds[count].Text,textRotation);}break;}}else{switch(textRotation){case 90:if(pageRotation==0){newWordBounds=new RectAngle(minLeft,wordBounds[count-1].Top+wordBounds[count-1].Height,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-(wordBounds[count-1].Top+wordBounds[count-1].Height),minLeft,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-minLeft,pageHeight-(wordBounds[count-1].Top+wordBounds[count-1].Height),maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(wordBounds[count-1].Top+wordBounds[count-1].Height,pageHeight-minLeft,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}break;case 270:if(pageRotation==0){newWordBounds=new RectAngle(minLeft,wordBounds[count-1].Top-wordBounds[count].Height,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-(wordBounds[count-1].Top-wordBounds[count].Height),minLeft,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-minLeft,pageHeight-wordBounds[count-1].Top-wordBounds[count].Height,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(wordBounds[count-1].Top-wordBounds[count].Height,pageHeight-minLeft,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}break;case 180:if(pageRotation==0){newWordBounds=new RectAngle(wordBounds[count-1].Left-wordBounds[count].Width,minTop,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-minTop,wordBounds[count-1].Left-wordBounds[count].Width,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-(wordBounds[count-1].Left-wordBounds[count].Width),pageHeight-minTop,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(minTop,pageHeight-(wordBounds[count-1].Left-wordBounds[count].Width),wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}break;case 0:if(pageRotation==0){newWordBounds=new RectAngle(wordBounds[count-1].Left+wordBounds[count-1].Width,minTop,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-minTop,wordBounds[count-1].Left+wordBounds[count-1].Width,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-(wordBounds[count-1].Left+wordBounds[count-1].Width),pageHeight-minTop,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(minTop,pageHeight-(wordBounds[count-1].Left+wordBounds[count-1].Width),wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}break;}}}else if(isRTLText&&count+1!=wordBounds.length){var spaceWidth=wordBounds[count-1].Left-(wordBounds[count+1].Left+wordBounds[count+1].Width);if(maximumSpaceBetweenWords<spaceWidth||spaceWidth<0){spaceWidth=0;}newWordBounds=new RectAngle(wordBounds[count+1].Left+wordBounds[count+1].Width,minTop,spaceWidth,maxBottom-minTop,wordBounds[count].Text,wordBounds[count].Rotation);}else if(isRTLText){newWordBounds=new RectAngle(wordBounds[count-1].Left-wordBounds[count].Width,minTop,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,wordBounds[count].Rotation);}}if(!hasInBetweenRotation){this.TextBounds.push(newWordBounds);this.TextContent.push(wordBounds[count].Text);}}if(hasInBetweenRotation){this.TextBounds.push(newWordBounds);this.TextContent.push(inBetweenRotatedText);}};Processor.prototype.checkIsRtlText=function(text){// eslint-disable-next-line max-len
var ltrChars="A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF"+"\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF";var rtlChars="\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC";// eslint-disable-next-line
var rtlDirCheck=new RegExp('^[^'+ltrChars+']*['+rtlChars+']');return rtlDirCheck.test(text);};Processor.prototype.getPageRender=function(n,w,h,isTextNeed){if(n===void 0){n=0;}var pageRenderPtr=this.getRender(n,w,h,isTextNeed);var pageRenderData=[];pageRenderData=PDFiumModule.HEAPU8.slice(pageRenderPtr,pageRenderPtr+w*h*4);PDFiumModule.asm.free(pageRenderPtr);return pageRenderData;};Processor.prototype.render=function(n,message,zoomFactor,isTextNeed,printScaleFactor,printDevicePixelRatio,textDetailsId){if(n===void 0){n=0;}var _a=this.getPageSize(n),w=_a[0],h=_a[1];if(message==='thumbnail'){var newWidth_1=Math.round(99.7*1.5);var newHeight_1=Math.round(141*1.5);var data=this.getPageRender(n,newWidth_1,newHeight_1,false);return{value:data,width:newWidth_1,height:newHeight_1,pageIndex:n,message:'renderThumbnail'};}else if(message==='print'){//An A0 piece of paper measures 33.1  46.8 inches, with 46.8 inches being the greater dimension. The pixel value of 46.8 inches is 4493px. If the document size is too large, we may not be able to display the image. Therefore, we should consider the maximum size of A0 paper if the page size is greater than 4493 pixels.
var maxPageSize=4493;var scaleFactor=1.5;var whichIsBigger=w>h?'Width':'Height';var maxWidth=w;var maxHeight=h;if(whichIsBigger==='Width'){maxWidth=w>maxPageSize?maxPageSize:w;if(maxWidth===maxPageSize){maxHeight=h/(w/maxPageSize);}}else{maxHeight=h>maxPageSize?maxPageSize:h;if(maxHeight===maxPageSize){maxWidth=w/(h/maxPageSize);}}var newWidth_2=Math.round(maxWidth*printScaleFactor*scaleFactor);var newHeight_2=Math.round(maxHeight*printScaleFactor*scaleFactor);var data=this.getPageRender(n,newWidth_2,newHeight_2,false);return{value:data,width:newWidth_2,height:newHeight_2,pageIndex:n,pageWidth:w,pageHeight:h,message:'printImage',printDevicePixelRatio:printDevicePixelRatio};}else{var newWidth=Math.round(w*1.5*zoomFactor);var newHeight=Math.round(h*1.5*zoomFactor);while(newWidth*newHeight*4*2>=2147483648){zoomFactor=zoomFactor-0.1;newWidth=Math.round(Math.round(w*1.3333)*zoomFactor);newHeight=Math.round(Math.round(h*1.3333)*zoomFactor);}var data=this.getPageRender(n,newWidth,newHeight,isTextNeed);return{value:data,width:newWidth,height:newHeight,pageIndex:n,message:'imageRendered',textBounds:this.TextBounds,textContent:this.TextContent,rotation:this.Rotation,pageText:this.PageText,characterBounds:this.CharacterBounds,zoomFactor:zoomFactor,isTextNeed:isTextNeed,textDetailsId:textDetailsId};}};Processor.prototype.renderTileImage=function(n,tileX,tileY,xCount,yCount,zoomFactor,isTextNeed,textDetailsId){if(n===void 0){n=0;}var _a=this.getPageSize(n),w=_a[0],h=_a[1];var newWidth=Math.round(w*1.5*zoomFactor);var newHeight=Math.round(h*1.5*zoomFactor);var w1=Math.round(newWidth/xCount);var h1=Math.round(newHeight/yCount);var flag=FPDF.REVERSE_BYTE_ORDER;var heap=PDFiumModule.asm.malloc(w1*h1*4);PDFiumModule.HEAPU8.fill(0,heap,heap+w1*h1*4);var bmap=FPDF.Bitmap_CreateEx(w1,h1,4,heap,w1*4);var page=FPDF.LoadPage(this.wasmData.wasm,n);FPDF.Bitmap_FillRect(bmap,0,0,w1,h1,0xFFFFFFFF);FPDF.RenderPageBitmap(bmap,page,-tileX*w1,-tileY*h1,newWidth,newHeight,0,flag);FPDF.Bitmap_Destroy(bmap);this.textExtraction(page,n,isTextNeed);FPDF.ClosePage(page);var pageRenderPtr=heap;var data=[];data=PDFiumModule.HEAPU8.slice(pageRenderPtr,pageRenderPtr+w1*h1*4);PDFiumModule.asm.free(pageRenderPtr);if(tileX===0&&tileY===0){return{value:data,w:w1,h:h1,noTileX:xCount,noTileY:yCount,x:tileX,y:tileY,pageIndex:n,message:'renderTileImage',textBounds:this.TextBounds,textContent:this.TextContent,rotation:this.Rotation,pageText:this.PageText,characterBounds:this.CharacterBounds,textDetailsId:textDetailsId,isTextNeed:isTextNeed};}else{return{value:data,w:w1,h:h1,noTileX:xCount,noTileY:yCount,x:tileX,y:tileY,pageIndex:n,message:'renderTileImage',textDetailsId:textDetailsId,isTextNeed:isTextNeed};}};Processor.prototype.getLastError=function(){var lastError=FPDF.GetLastError();switch(lastError){case FPDF.LAST_ERROR.SUCCESS:return"success";case FPDF.LAST_ERROR.UNKNOWN:return"unknown error";case FPDF.LAST_ERROR.FILE:return"file not found or could not be opened";case FPDF.LAST_ERROR.FORMAT:return"file not in PDF format or corrupted";case FPDF.LAST_ERROR.PASSWORD:return"password required or incorrect password";case FPDF.LAST_ERROR.SECURITY:return"unsupported security scheme";case FPDF.LAST_ERROR.PAGE:return"page not found or content error";default:return"unknown error";}};return Processor;}();var Doc=/** @class */function(){function Doc(wasmData){this.pages=[];this.processor=new Processor(wasmData);}Doc.prototype.setPages=function(pagesCount){this.pages=Array(pagesCount).fill(null);};Doc.prototype.createAllPages=function(){for(var i=0;i<this.pages.length;i++){this.pages[i]=new Page(i,this.processor);}};Doc.prototype.getPage=function(index){var page=this.pages[index];if(!page){page=new Page(index);this.pages[index]=page;}return page;};return Doc;}();}/**
 * export types
 */ /**
 * PdfViewer component exported items
 */ /**
 * export PDF viewer modules
 */var __awaiter=undefined&&undefined.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value);}).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var __generator=undefined&&undefined.__generator||function(thisArg,body){var _={label:0,sent:function sent(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break;}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}if(t[2])_.ops.pop();_.trys.pop();continue;}op=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}};var Viewer={elementRef:null,dotnetRef:null,initialize:function initialize(dataId,element,options,dotnetRef,culture,isWebAssembly){if(culture===void 0){culture=null;}sf.base.enableBlazorMode();var pdfViewer=new PdfViewer(dataId,element,dotnetRef,options,isWebAssembly);pdfViewer.preRender();pdfViewer.cultureValue=culture;pdfViewer.render();if(element){if(element.className==="e-blazor-hidden e-pv-mobile-view"){element.className="e-control e-pdfviewer e-lib e-pv-mobile-view";}else{element.className="e-control e-pdfviewer e-lib";}}this.elementRef=element;this.dotnetRef=dotnetRef;if(!pdfViewer.serviceUrl){AjaxHandler.prototype.send=this.viewerRequestHandler.bind(this);}},updateOptions:function updateOptions(dataId,options,isLoad){var instance=window.sfBlazor.getCompInstance(dataId);if(options.selectedItems.annotations.length===0){if(instance.blazorAction&PdfViewerBlazorAction.AnnotationAdding){delete options.selectedItems;}}if(!sf.base.isNullOrUndefined(instance)&&!sf.base.isNullOrUndefined(instance.element)){instance.setOptions(options,instance.options,isLoad);instance.options=options;}instance.blazorAction&=~PdfViewerBlazorAction.AnnotationAdding;},updateCustomstamp:function updateCustomstamp(dataId,options){var instance=window.sfBlazor.getCompInstance(dataId);if(options.customStamps){instance.renderCustomerStamp(options.customStamps[0]);}},invokeMethod:function invokeMethod(dataId,methodName,moduleName,args){return __awaiter(this,void 0,void 0,function(){var returnValue,instance,comp,e_1;return __generator(this,function(_a){switch(_a.label){case 0:_a.trys.push([0,4,,5]);returnValue=null;instance=window.sfBlazor.getCompInstance(dataId);comp=instance;if(!comp)return[3/*break*/,3];if(moduleName===null){returnValue=comp[methodName].apply(comp,args);}else{comp=instance;comp=this.getChildModule(comp,moduleName);returnValue=comp[methodName].apply(comp,args);}if(returnValue&&_typeof(returnValue)==="object"&&!(returnValue instanceof Promise)){returnValue=this.cleanStringify(returnValue);}if(!(methodName=='saveAsBlob'&&returnValue instanceof Promise))return[3/*break*/,2];return[4/*yield*/,this.promiseHandler(returnValue)];case 1:returnValue=_a.sent();_a.label=2;case 2:return[2/*return*/,returnValue];case 3:return[3/*break*/,5];case 4:e_1=_a.sent();return[2/*return*/,this.throwError(e_1,comp)];case 5:return[2/*return*/,{}];}});});},promiseHandler:function promiseHandler(returnValue){return __awaiter(this,void 0,void 0,function(){var object;return __generator(this,function(_a){switch(_a.label){case 0:object=this;if(!(returnValue instanceof Promise))return[3/*break*/,2];return[4/*yield*/,returnValue.then(function(data){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return[4/*yield*/,object.docEditFileReader(data).then(function(dataUrl){returnValue=JSON.stringify({"data":dataUrl.substr(dataUrl.indexOf(',')+1)});})];case 1:_a.sent();return[2/*return*/];}});});})];case 1:_a.sent();_a.label=2;case 2:return[2/*return*/,returnValue];}});});},docEditFileReader:function docEditFileReader(file){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return[2/*return*/,new Promise(function(resolve,reject){var fileReader=new FileReader();fileReader.onload=function(){resolve(fileReader.result);};fileReader.readAsDataURL(file);})];});});},getMethodCall:function getMethodCall(dataId,moduleName,methodName){try{var instance=window.sfBlazor.getCompInstance(dataId);if(!sf.base.isNullOrUndefined(instance)&&!sf.base.isNullOrUndefined(instance.element)){var comp=instance;}if(comp){if(moduleName==null||moduleName=="null"){return comp[methodName];}else{comp=this.getChildModule(comp,moduleName);return comp[methodName];}}}catch(e){this.throwError(e,comp);}},setMethodCall:function setMethodCall(dataId,moduleName,methodName,args){try{var instance=window.sfBlazor.getCompInstance(dataId);if(!sf.base.isNullOrUndefined(instance)&&!sf.base.isNullOrUndefined(instance.element)){var comp=instance;}if(comp){comp=this.getChildModule(comp,moduleName);comp[methodName]=args[0];}}catch(e){this.throwError(e,comp);}},cleanStringify:function cleanStringify(object){try{return JSON.stringify(object);}catch(e){console.log(e);return'';}},getChildModule:function getChildModule(comp,moduleName){try{var path=moduleName.split(',');for(var i=0;i<path.length;i++){comp=comp[path[i]];}return comp;}catch(e){}return comp;},viewerRequestHandler:function viewerRequestHandler(jsonObject){return __awaiter(this,void 0,void 0,function(){var result,element,instance,_a;return __generator(this,function(_b){switch(_b.label){case 0:element=document.getElementById(jsonObject.elementId);instance=window.sfBlazor.getCompInstance(jsonObject.elementId);if(!instance)return[3/*break*/,31];_a=jsonObject.action;switch(_a){case'Load':return[3/*break*/,1];case'Unload':return[3/*break*/,3];case"RenderPdfPages":return[3/*break*/,5];case"VirtualLoad":return[3/*break*/,7];case"Download":return[3/*break*/,9];case"PrintImages":return[3/*break*/,11];case"Search":return[3/*break*/,13];case"Bookmarks":return[3/*break*/,15];case"RenderThumbnailImages":return[3/*break*/,17];case"RenderAnnotationComments":return[3/*break*/,19];case"RenderPdfTexts":return[3/*break*/,21];case"ImportAnnotations":return[3/*break*/,23];case"ExportAnnotations":return[3/*break*/,25];case"ExportFormFields":return[3/*break*/,27];case"ImportFormFields":return[3/*break*/,29];}return[3/*break*/,31];case 1:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 2:result=_b.sent();instance.viewerBase.loadRequestHandler.successHandler(result);return[3/*break*/,31];case 3:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 4:result=_b.sent();instance.viewerBase.unloadRequestHandler.successHandler(result);return[3/*break*/,31];case 5:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 6:result=_b.sent();instance.viewerBase.pageRequestHandler.successHandler(result);return[3/*break*/,31];case 7:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 8:result=_b.sent();instance.viewerBase.virtualLoadRequestHandler.successHandler(result);return[3/*break*/,31];case 9:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 10:result=_b.sent();instance.viewerBase.dowonloadRequestHandler.successHandler(result);return[3/*break*/,31];case 11:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 12:result=_b.sent();instance.printModule.printRequestHandler.successHandler(result);return[3/*break*/,31];case 13:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 14:result=_b.sent();instance.textSearchModule.searchRequestHandler.successHandler(result);return[3/*break*/,31];case 15:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 16:result=_b.sent();instance.bookmarkViewModule.bookmarkRequestHandler.successHandler(result);return[3/*break*/,31];case 17:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 18:result=_b.sent();instance.thumbnailViewModule.thumbnailRequestHandler.successHandler(result);return[3/*break*/,31];case 19:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 20:result=_b.sent();instance.annotationModule.stickyNotesAnnotationModule.commentsRequestHandler.successHandler(result);return[3/*break*/,31];case 21:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 22:result=_b.sent();instance.textSearchModule.searchRequestHandler.successHandler(result);return[3/*break*/,31];case 23:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 24:result=_b.sent();instance.viewerBase.importAnnotationRequestHandler.successHandler(result);return[3/*break*/,31];case 25:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 26:result=_b.sent();instance.viewerBase.exportAnnotationRequestHandler.successHandler(result);return[3/*break*/,31];case 27:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 28:result=_b.sent();instance.viewerBase.exportFormFieldsRequestHandler.successHandler(result);return[3/*break*/,31];case 29:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 30:result=_b.sent();instance.viewerBase.importFormFieldsRequestHandler.successHandler(result);return[3/*break*/,31];case 31:return[2/*return*/];}});});}};return Viewer;}();

/***/ })

}]);(async()=>{await import(`${document.baseURI}_content/Syncfusion.Blazor/scripts/syncfusion-blazor-base.min.js?v=19.3.1`).then(()=>{sfBlazor.loadDependencies('sfpdfviewer2');})})();